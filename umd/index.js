var PhotoEditorSDK=(()=>{var dve=Object.create;var Xp=Object.defineProperty,pve=Object.defineProperties,Q5=Object.getOwnPropertyDescriptor,mve=Object.getOwnPropertyDescriptors,hve=Object.getOwnPropertyNames,iv=Object.getOwnPropertySymbols,fve=Object.getPrototypeOf,$T=Object.prototype.hasOwnProperty,eL=Object.prototype.propertyIsEnumerable;var KT=(r,e,t)=>e in r?Xp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,T=(r,e)=>{for(var t in e||(e={}))$T.call(e,t)&&KT(r,t,e[t]);if(iv)for(var t of iv(e))eL.call(e,t)&&KT(r,t,e[t]);return r},U=(r,e)=>pve(r,mve(e)),tL=r=>Xp(r,"__esModule",{value:!0});var C=r=>{if(typeof require!="undefined")return require(r);throw new Error('Dynamic require of "'+r+'" is not supported')};var Hi=(r,e)=>{var t={};for(var i in r)$T.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&iv)for(var i of iv(r))e.indexOf(i)<0&&eL.call(r,i)&&(t[i]=r[i]);return t};var m=(r,e)=>()=>(r&&(e=r(r=0)),e);var S=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ht=(r,e)=>{tL(r);for(var t in e)Xp(r,t,{get:e[t],enumerable:!0})},gve=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hve(e))!$T.call(r,i)&&i!=="default"&&Xp(r,i,{get:()=>e[i],enumerable:!(t=Q5(e,i))||t.enumerable});return r},v=r=>gve(tL(Xp(r!=null?dve(fve(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),g=(r,e,t,i)=>{for(var o=i>1?void 0:i?Q5(e,t):e,n=r.length-1,s;n>=0;n--)(s=r[n])&&(o=(i?s(e,t,o):s(o))||o);return i&&o&&Xp(e,t,o),o};var ce=(r,e,t)=>(KT(r,typeof e!="symbol"?e+"":e,t),t);var de=(r,e,t)=>new Promise((i,o)=>{var n=l=>{try{a(t.next(l))}catch(c){o(c)}},s=l=>{try{a(t.throw(l))}catch(c){o(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(n,s);a((t=t.apply(r,e)).next())});var cL=S((MYe,lL)=>{"use strict";lL.exports=XT;function XT(r){gs.length||(ov(),iL=!0),gs[gs.length]=r}var gs=[],iL=!1,ov,bs=0,bve=1024;function oL(){for(;bs<gs.length;){var r=bs;if(bs=bs+1,gs[r].call(),bs>bve){for(var e=0,t=gs.length-bs;e<t;e++)gs[e]=gs[e+bs];gs.length-=bs,bs=0}}gs.length=0,bs=0,iL=!1}var nL=typeof global!="undefined"?global:self,sL=nL.MutationObserver||nL.WebKitMutationObserver;typeof sL=="function"?ov=yve(oL):ov=aL(oL);XT.requestFlush=ov;function yve(r){var e=1,t=new sL(r),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}function aL(r){return function(){var t=setTimeout(o,0),i=setInterval(o,50);function o(){clearTimeout(t),clearInterval(i),r()}}}XT.makeRequestCallFromTimer=aL});var ZT=S((BYe,pL)=>{"use strict";var _ve=cL();function nv(){}var Yp=null,Jp={};function vve(r){try{return r.then}catch(e){return Yp=e,Jp}}function xve(r,e){try{return r(e)}catch(t){return Yp=t,Jp}}function Cve(r,e,t){try{r(e,t)}catch(i){return Yp=i,Jp}}pL.exports=yo;function yo(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,r!==nv&&dL(r,this)}yo._Y=null;yo._Z=null;yo._0=nv;yo.prototype.then=function(r,e){if(this.constructor!==yo)return Sve(this,r,e);var t=new yo(nv);return sv(this,new uL(r,e,t)),t};function Sve(r,e,t){return new r.constructor(function(i,o){var n=new yo(nv);n.then(i,o),sv(r,new uL(e,t,n))})}function sv(r,e){for(;r._V===3;)r=r._W;if(yo._Y&&yo._Y(r),r._V===0){if(r._U===0){r._U=1,r._X=e;return}if(r._U===1){r._U=2,r._X=[r._X,e];return}r._X.push(e);return}wve(r,e)}function wve(r,e){_ve(function(){var t=r._V===1?e.onFulfilled:e.onRejected;if(t===null){r._V===1?YT(e.promise,r._W):Zp(e.promise,r._W);return}var i=xve(t,r._W);i===Jp?Zp(e.promise,Yp):YT(e.promise,i)})}function YT(r,e){if(e===r)return Zp(r,new TypeError("A promise cannot be resolved with itself."));if(e&&(typeof e=="object"||typeof e=="function")){var t=vve(e);if(t===Jp)return Zp(r,Yp);if(t===r.then&&e instanceof yo){r._V=3,r._W=e,JT(r);return}else if(typeof t=="function"){dL(t.bind(e),r);return}}r._V=1,r._W=e,JT(r)}function Zp(r,e){r._V=2,r._W=e,yo._Z&&yo._Z(r,e),JT(r)}function JT(r){if(r._U===1&&(sv(r,r._X),r._X=null),r._U===2){for(var e=0;e<r._X.length;e++)sv(r,r._X[e]);r._X=null}}function uL(r,e,t){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof e=="function"?e:null,this.promise=t}function dL(r,e){var t=!1,i=Cve(r,function(o){t||(t=!0,YT(e,o))},function(o){t||(t=!0,Zp(e,o))});!t&&i===Jp&&(t=!0,Zp(e,Yp))}});var gL=S(ek=>{"use strict";var av=ZT(),mL=[ReferenceError,TypeError,RangeError],QT=!1;ek.disable=hL;function hL(){QT=!1,av._Y=null,av._Z=null}ek.enable=Tve;function Tve(r){r=r||{},QT&&hL(),QT=!0;var e=0,t=0,i={};av._Y=function(s){s._V===2&&i[s._1]&&(i[s._1].logged?n(s._1):clearTimeout(i[s._1].timeout),delete i[s._1])},av._Z=function(s,a){s._U===0&&(s._1=e++,i[s._1]={displayId:null,error:a,timeout:setTimeout(o.bind(null,s._1),fL(a,mL)?100:2e3),logged:!1})};function o(s){(r.allRejections||fL(i[s].error,r.whitelist||mL))&&(i[s].displayId=t++,r.onUnhandled?(i[s].logged=!0,r.onUnhandled(i[s].displayId,i[s].error)):(i[s].logged=!0,kve(i[s].displayId,i[s].error)))}function n(s){i[s].logged&&(r.onHandled?r.onHandled(i[s].displayId,i[s].error):i[s].onUnhandled||(console.warn("Promise Rejection Handled (id: "+i[s].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+i[s].displayId+".")))}}function kve(r,e){console.warn("Possible Unhandled Promise Rejection (id: "+r+"):");var t=(e&&(e.stack||e))+"";t.split(`
`).forEach(function(i){console.warn("  "+i)})}function fL(r,e){return e.some(function(t){return r instanceof t})}});var yL=S((zYe,bL)=>{"use strict";var Hr=ZT();bL.exports=Hr;var Eve=Mu(!0),Ive=Mu(!1),Dve=Mu(null),Ove=Mu(void 0),Rve=Mu(0),Fve=Mu("");function Mu(r){var e=new Hr(Hr._0);return e._V=1,e._W=r,e}Hr.resolve=function(r){if(r instanceof Hr)return r;if(r===null)return Dve;if(r===void 0)return Ove;if(r===!0)return Eve;if(r===!1)return Ive;if(r===0)return Rve;if(r==="")return Fve;if(typeof r=="object"||typeof r=="function")try{var e=r.then;if(typeof e=="function")return new Hr(e.bind(r))}catch(t){return new Hr(function(i,o){o(t)})}return Mu(r)};var lv=function(r){return typeof Array.from=="function"?(lv=Array.from,Array.from(r)):(lv=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(r))};Hr.all=function(r){var e=lv(r);return new Hr(function(t,i){if(e.length===0)return t([]);var o=e.length;function n(a,l){if(l&&(typeof l=="object"||typeof l=="function"))if(l instanceof Hr&&l.then===Hr.prototype.then){for(;l._V===3;)l=l._W;if(l._V===1)return n(a,l._W);l._V===2&&i(l._W),l.then(function(d){n(a,d)},i);return}else{var c=l.then;if(typeof c=="function"){var u=new Hr(c.bind(l));u.then(function(d){n(a,d)},i);return}}e[a]=l,--o==0&&t(e)}for(var s=0;s<e.length;s++)n(s,e[s])})};Hr.reject=function(r){return new Hr(function(e,t){t(r)})};Hr.race=function(r){return new Hr(function(e,t){lv(r).forEach(function(i){Hr.resolve(i).then(e,t)})})};Hr.prototype.catch=function(r){return this.then(null,r)}});var vL=S((cv,_L)=>{(function(r,e){typeof cv=="object"&&typeof _L!="undefined"?e(cv):typeof define=="function"&&define.amd?define(["exports"],e):e(r.WHATWGFetch={})})(cv,function(r){"use strict";var e=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof e!="undefined"&&e,t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(A){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function i(A){return A&&DataView.prototype.isPrototypeOf(A)}if(t.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(A){return A&&o.indexOf(Object.prototype.toString.call(A))>-1};function s(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(A)||A==="")throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function a(A){return typeof A!="string"&&(A=String(A)),A}function l(A){var q={next:function(){var ue=A.shift();return{done:ue===void 0,value:ue}}};return t.iterable&&(q[Symbol.iterator]=function(){return q}),q}function c(A){this.map={},A instanceof c?A.forEach(function(q,ue){this.append(ue,q)},this):Array.isArray(A)?A.forEach(function(q){this.append(q[0],q[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(q){this.append(q,A[q])},this)}c.prototype.append=function(A,q){A=s(A),q=a(q);var ue=this.map[A];this.map[A]=ue?ue+", "+q:q},c.prototype.delete=function(A){delete this.map[s(A)]},c.prototype.get=function(A){return A=s(A),this.has(A)?this.map[A]:null},c.prototype.has=function(A){return this.map.hasOwnProperty(s(A))},c.prototype.set=function(A,q){this.map[s(A)]=a(q)},c.prototype.forEach=function(A,q){for(var ue in this.map)this.map.hasOwnProperty(ue)&&A.call(q,this.map[ue],ue,this)},c.prototype.keys=function(){var A=[];return this.forEach(function(q,ue){A.push(ue)}),l(A)},c.prototype.values=function(){var A=[];return this.forEach(function(q){A.push(q)}),l(A)},c.prototype.entries=function(){var A=[];return this.forEach(function(q,ue){A.push([ue,q])}),l(A)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function u(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function d(A){return new Promise(function(q,ue){A.onload=function(){q(A.result)},A.onerror=function(){ue(A.error)}})}function p(A){var q=new FileReader,ue=d(q);return q.readAsArrayBuffer(A),ue}function h(A){var q=new FileReader,ue=d(q);return q.readAsText(A),ue}function f(A){for(var q=new Uint8Array(A),ue=new Array(q.length),_e=0;_e<q.length;_e++)ue[_e]=String.fromCharCode(q[_e]);return ue.join("")}function _(A){if(A.slice)return A.slice(0);var q=new Uint8Array(A.byteLength);return q.set(new Uint8Array(A)),q.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(A){this.bodyUsed=this.bodyUsed,this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:t.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:t.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():t.arrayBuffer&&t.blob&&i(A)?(this._bodyArrayBuffer=_(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||n(A))?this._bodyArrayBuffer=_(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var A=u(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var A=u(this);return A||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(p)}),this.text=function(){var A=u(this);if(A)return A;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(f(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function D(A){var q=A.toUpperCase();return y.indexOf(q)>-1?q:A}function E(A,q){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');q=q||{};var ue=q.body;if(A instanceof E){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,q.headers||(this.headers=new c(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!ue&&A._bodyInit!=null&&(ue=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new c(q.headers)),this.method=D(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ue)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ue),(this.method==="GET"||this.method==="HEAD")&&(q.cache==="no-store"||q.cache==="no-cache")){var _e=/([?&])_=[^&]*/;if(_e.test(this.url))this.url=this.url.replace(_e,"$1_="+new Date().getTime());else{var ye=/\?/;this.url+=(ye.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function F(A){var q=new FormData;return A.trim().split("&").forEach(function(ue){if(ue){var _e=ue.split("="),ye=_e.shift().replace(/\+/g," "),De=_e.join("=").replace(/\+/g," ");q.append(decodeURIComponent(ye),decodeURIComponent(De))}}),q}function N(A){var q=new c,ue=A.replace(/\r?\n[\t ]+/g," ");return ue.split(/\r?\n/).forEach(function(_e){var ye=_e.split(":"),De=ye.shift().trim();if(De){var Kt=ye.join(":").trim();q.append(De,Kt)}}),q}x.call(E.prototype);function R(A,q){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in q?q.statusText:"",this.headers=new c(q.headers),this.url=q.url||"",this._initBody(A)}x.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},R.error=function(){var A=new R(null,{status:0,statusText:""});return A.type="error",A};var B=[301,302,303,307,308];R.redirect=function(A,q){if(B.indexOf(q)===-1)throw new RangeError("Invalid status code");return new R(null,{status:q,headers:{location:A}})},r.DOMException=e.DOMException;try{new r.DOMException}catch(A){r.DOMException=function(q,ue){this.message=q,this.name=ue;var _e=Error(q);this.stack=_e.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function se(A,q){return new Promise(function(ue,_e){var ye=new E(A,q);if(ye.signal&&ye.signal.aborted)return _e(new r.DOMException("Aborted","AbortError"));var De=new XMLHttpRequest;function Kt(){De.abort()}De.onload=function(){var J={status:De.status,statusText:De.statusText,headers:N(De.getAllResponseHeaders()||"")};J.url="responseURL"in De?De.responseURL:J.headers.get("X-Request-URL");var Z="response"in De?De.response:De.responseText;setTimeout(function(){ue(new R(Z,J))},0)},De.onerror=function(){setTimeout(function(){_e(new TypeError("Network request failed"))},0)},De.ontimeout=function(){setTimeout(function(){_e(new TypeError("Network request failed"))},0)},De.onabort=function(){setTimeout(function(){_e(new r.DOMException("Aborted","AbortError"))},0)};function oe(J){try{return J===""&&e.location.href?e.location.href:J}catch(Z){return J}}De.open(ye.method,oe(ye.url),!0),ye.credentials==="include"?De.withCredentials=!0:ye.credentials==="omit"&&(De.withCredentials=!1),"responseType"in De&&(t.blob?De.responseType="blob":t.arrayBuffer&&ye.headers.get("Content-Type")&&ye.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(De.responseType="arraybuffer")),q&&typeof q.headers=="object"&&!(q.headers instanceof c)?Object.getOwnPropertyNames(q.headers).forEach(function(J){De.setRequestHeader(J,a(q.headers[J]))}):ye.headers.forEach(function(J,Z){De.setRequestHeader(Z,J)}),ye.signal&&(ye.signal.addEventListener("abort",Kt),De.onreadystatechange=function(){De.readyState===4&&ye.signal.removeEventListener("abort",Kt)}),De.send(typeof ye._bodyInit=="undefined"?null:ye._bodyInit)})}se.polyfill=!0,e.fetch||(e.fetch=se,e.Headers=c,e.Request=E,e.Response=R),r.Headers=c,r.Request=E,r.Response=R,r.fetch=se,Object.defineProperty(r,"__esModule",{value:!0})})});var SL=S((UYe,CL)=>{"use strict";var xL=Object.getOwnPropertySymbols,Ave=Object.prototype.hasOwnProperty,Pve=Object.prototype.propertyIsEnumerable;function Mve(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function Bve(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var i=Object.getOwnPropertyNames(e).map(function(n){return e[n]});if(i.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(n){return!1}}CL.exports=Bve()?Object.assign:function(r,e){for(var t,i=Mve(r),o,n=1;n<arguments.length;n++){t=Object(arguments[n]);for(var s in t)Ave.call(t,s)&&(i[s]=t[s]);if(xL){o=xL(t);for(var a=0;a<o.length;a++)Pve.call(t,o[a])&&(i[o[a]]=t[o[a]])}}return i}});var Xe=S((NYe,wL)=>{var uv=function(r){return r&&r.Math==Math&&r};wL.exports=uv(typeof globalThis=="object"&&globalThis)||uv(typeof window=="object"&&window)||uv(typeof self=="object"&&self)||uv(typeof global=="object"&&global)||Function("return this")()});var Re=S((qYe,TL)=>{TL.exports=function(r){try{return!!r()}catch(e){return!0}}});var bt=S((HYe,kL)=>{var Lve=Re();kL.exports=!Lve(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})});var Gf=S(DL=>{"use strict";var EL={}.propertyIsEnumerable,IL=Object.getOwnPropertyDescriptor,zve=IL&&!EL.call({1:2},1);DL.f=zve?function(e){var t=IL(this,e);return!!t&&t.enumerable}:EL});var Ia=S((WYe,OL)=>{OL.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var _o=S((GYe,RL)=>{var Uve={}.toString;RL.exports=function(r){return Uve.call(r).slice(8,-1)}});var Qp=S((VYe,FL)=>{var Nve=Re(),qve=_o(),Hve="".split;FL.exports=Nve(function(){return!Object("z").propertyIsEnumerable(0)})?function(r){return qve(r)=="String"?Hve.call(r,""):Object(r)}:Object});var ci=S(($Ye,AL)=>{AL.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}});var ji=S((KYe,PL)=>{var jve=Qp(),Wve=ci();PL.exports=function(r){return jve(Wve(r))}});var ct=S((XYe,ML)=>{ML.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}});var rn=S((YYe,BL)=>{var dv=ct();BL.exports=function(r,e){if(!dv(r))return r;var t,i;if(e&&typeof(t=r.toString)=="function"&&!dv(i=t.call(r))||typeof(t=r.valueOf)=="function"&&!dv(i=t.call(r))||!e&&typeof(t=r.toString)=="function"&&!dv(i=t.call(r)))return i;throw TypeError("Can't convert object to primitive value")}});var dr=S((JYe,LL)=>{var Gve={}.hasOwnProperty;LL.exports=function(r,e){return Gve.call(r,e)}});var pv=S((ZYe,UL)=>{var Vve=Xe(),zL=ct(),tk=Vve.document,$ve=zL(tk)&&zL(tk.createElement);UL.exports=function(r){return $ve?tk.createElement(r):{}}});var rk=S((QYe,NL)=>{var Kve=bt(),Xve=Re(),Yve=pv();NL.exports=!Kve&&!Xve(function(){return Object.defineProperty(Yve("div"),"a",{get:function(){return 7}}).a!=7})});var Yr=S(HL=>{var Jve=bt(),Zve=Gf(),Qve=Ia(),exe=ji(),txe=rn(),rxe=dr(),ixe=rk(),qL=Object.getOwnPropertyDescriptor;HL.f=Jve?qL:function(e,t){if(e=exe(e),t=txe(t,!0),ixe)try{return qL(e,t)}catch(i){}if(rxe(e,t))return Qve(!Zve.f.call(e,t),e[t])}});var ht=S((tJe,jL)=>{var oxe=ct();jL.exports=function(r){if(!oxe(r))throw TypeError(String(r)+" is not an object");return r}});var zt=S(VL=>{var nxe=bt(),sxe=rk(),WL=ht(),axe=rn(),GL=Object.defineProperty;VL.f=nxe?GL:function(e,t,i){if(WL(e),t=axe(t,!0),WL(i),sxe)try{return GL(e,t,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}});var ui=S((iJe,$L)=>{var lxe=bt(),cxe=zt(),uxe=Ia();$L.exports=lxe?function(r,e,t){return cxe.f(r,e,uxe(1,t))}:function(r,e,t){return r[e]=t,r}});var mv=S((oJe,XL)=>{var KL=Xe(),dxe=ui();XL.exports=function(r,e){try{dxe(KL,r,e)}catch(t){KL[r]=e}return e}});var ik=S((nJe,JL)=>{var pxe=Xe(),mxe=mv(),YL="__core-js_shared__",hxe=pxe[YL]||mxe(YL,{});JL.exports=hxe});var hv=S((sJe,ZL)=>{var ok=ik(),fxe=Function.toString;typeof ok.inspectSource!="function"&&(ok.inspectSource=function(r){return fxe.call(r)});ZL.exports=ok.inspectSource});var nk=S((aJe,e4)=>{var gxe=Xe(),bxe=hv(),QL=gxe.WeakMap;e4.exports=typeof QL=="function"&&/native code/.test(bxe(QL))});var on=S((lJe,t4)=>{t4.exports=!1});var fv=S((cJe,i4)=>{var yxe=on(),r4=ik();(i4.exports=function(r,e){return r4[r]||(r4[r]=e!==void 0?e:{})})("versions",[]).push({version:"3.6.5",mode:yxe?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var em=S((uJe,o4)=>{var _xe=0,vxe=Math.random();o4.exports=function(r){return"Symbol("+String(r===void 0?"":r)+")_"+(++_xe+vxe).toString(36)}});var Vf=S((dJe,s4)=>{var xxe=fv(),Cxe=em(),n4=xxe("keys");s4.exports=function(r){return n4[r]||(n4[r]=Cxe(r))}});var tm=S((pJe,a4)=>{a4.exports={}});var di=S((mJe,p4)=>{var Sxe=nk(),wxe=Xe(),Txe=ct(),kxe=ui(),l4=dr(),Exe=Vf(),Ixe=tm(),Dxe=wxe.WeakMap,gv,$f,bv,Oxe=function(r){return bv(r)?$f(r):gv(r,{})},Rxe=function(r){return function(e){var t;if(!Txe(e)||(t=$f(e)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return t}};Sxe?(Bu=new Dxe,c4=Bu.get,u4=Bu.has,d4=Bu.set,gv=function(r,e){return d4.call(Bu,r,e),e},$f=function(r){return c4.call(Bu,r)||{}},bv=function(r){return u4.call(Bu,r)}):(rm=Exe("state"),Ixe[rm]=!0,gv=function(r,e){return kxe(r,rm,e),e},$f=function(r){return l4(r,rm)?r[rm]:{}},bv=function(r){return l4(r,rm)});var Bu,c4,u4,d4,rm;p4.exports={set:gv,get:$f,has:bv,enforce:Oxe,getterFor:Rxe}});var Jr=S((hJe,f4)=>{var Fxe=Xe(),m4=ui(),Axe=dr(),Pxe=mv(),Mxe=hv(),h4=di(),Bxe=h4.get,Lxe=h4.enforce,zxe=String(String).split("String");(f4.exports=function(r,e,t,i){var o=i?!!i.unsafe:!1,n=i?!!i.enumerable:!1,s=i?!!i.noTargetGet:!1;if(typeof t=="function"&&(typeof e=="string"&&!Axe(t,"name")&&m4(t,"name",e),Lxe(t).source=zxe.join(typeof e=="string"?e:"")),r===Fxe){n?r[e]=t:Pxe(e,t);return}else o?!s&&r[e]&&(n=!0):delete r[e];n?r[e]=t:m4(r,e,t)})(Function.prototype,"toString",function(){return typeof this=="function"&&Bxe(this).source||Mxe(this)})});var ec=S((fJe,g4)=>{var Uxe=Xe();g4.exports=Uxe});var vo=S((gJe,y4)=>{var sk=ec(),ak=Xe(),b4=function(r){return typeof r=="function"?r:void 0};y4.exports=function(r,e){return arguments.length<2?b4(sk[r])||b4(ak[r]):sk[r]&&sk[r][e]||ak[r]&&ak[r][e]}});var xo=S((bJe,_4)=>{var Nxe=Math.ceil,qxe=Math.floor;_4.exports=function(r){return isNaN(r=+r)?0:(r>0?qxe:Nxe)(r)}});var It=S((yJe,v4)=>{var Hxe=xo(),jxe=Math.min;v4.exports=function(r){return r>0?jxe(Hxe(r),9007199254740991):0}});var Da=S((_Je,x4)=>{var Wxe=xo(),Gxe=Math.max,Vxe=Math.min;x4.exports=function(r,e){var t=Wxe(r);return t<0?Gxe(t+e,0):Vxe(t,e)}});var im=S((vJe,S4)=>{var $xe=ji(),Kxe=It(),Xxe=Da(),C4=function(r){return function(e,t,i){var o=$xe(e),n=Kxe(o.length),s=Xxe(i,n),a;if(r&&t!=t){for(;n>s;)if(a=o[s++],a!=a)return!0}else for(;n>s;s++)if((r||s in o)&&o[s]===t)return r||s||0;return!r&&-1}};S4.exports={includes:C4(!0),indexOf:C4(!1)}});var ck=S((xJe,w4)=>{var lk=dr(),Yxe=ji(),Jxe=im().indexOf,Zxe=tm();w4.exports=function(r,e){var t=Yxe(r),i=0,o=[],n;for(n in t)!lk(Zxe,n)&&lk(t,n)&&o.push(n);for(;e.length>i;)lk(t,n=e[i++])&&(~Jxe(o,n)||o.push(n));return o}});var yv=S((CJe,T4)=>{T4.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var tc=S(k4=>{var Qxe=ck(),e0e=yv(),t0e=e0e.concat("length","prototype");k4.f=Object.getOwnPropertyNames||function(e){return Qxe(e,t0e)}});var _v=S(E4=>{E4.f=Object.getOwnPropertySymbols});var vv=S((TJe,I4)=>{var r0e=vo(),i0e=tc(),o0e=_v(),n0e=ht();I4.exports=r0e("Reflect","ownKeys")||function(e){var t=i0e.f(n0e(e)),i=o0e.f;return i?t.concat(i(e)):t}});var uk=S((kJe,D4)=>{var s0e=dr(),a0e=vv(),l0e=Yr(),c0e=zt();D4.exports=function(r,e){for(var t=a0e(e),i=c0e.f,o=l0e.f,n=0;n<t.length;n++){var s=t[n];s0e(r,s)||i(r,s,o(e,s))}}});var om=S((EJe,O4)=>{var u0e=Re(),d0e=/#|\.prototype\./,Kf=function(r,e){var t=m0e[p0e(r)];return t==f0e?!0:t==h0e?!1:typeof e=="function"?u0e(e):!!e},p0e=Kf.normalize=function(r){return String(r).replace(d0e,".").toLowerCase()},m0e=Kf.data={},h0e=Kf.NATIVE="N",f0e=Kf.POLYFILL="P";O4.exports=Kf});var W=S((IJe,R4)=>{var dk=Xe(),g0e=Yr().f,b0e=ui(),y0e=Jr(),_0e=mv(),v0e=uk(),x0e=om();R4.exports=function(r,e){var t=r.target,i=r.global,o=r.stat,n,s,a,l,c,u;if(i?s=dk:o?s=dk[t]||_0e(t,{}):s=(dk[t]||{}).prototype,s)for(a in e){if(c=e[a],r.noTargetGet?(u=g0e(s,a),l=u&&u.value):l=s[a],n=x0e(i?a:t+(o?".":"#")+a,r.forced),!n&&l!==void 0){if(typeof c==typeof l)continue;v0e(c,l)}(r.sham||l&&l.sham)&&b0e(c,"sham",!0),y0e(s,a,c,r)}}});var rc=S((DJe,F4)=>{var C0e=_o();F4.exports=Array.isArray||function(e){return C0e(e)=="Array"}});var ir=S((OJe,A4)=>{var S0e=ci();A4.exports=function(r){return Object(S0e(r))}});var ic=S((RJe,P4)=>{"use strict";var w0e=rn(),T0e=zt(),k0e=Ia();P4.exports=function(r,e,t){var i=w0e(e);i in r?T0e.f(r,i,k0e(0,t)):r[i]=t}});var xv=S((FJe,M4)=>{var E0e=Re();M4.exports=!!Object.getOwnPropertySymbols&&!E0e(function(){return!String(Symbol())})});var pk=S((AJe,B4)=>{var I0e=xv();B4.exports=I0e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var kt=S((PJe,z4)=>{var D0e=Xe(),O0e=fv(),L4=dr(),R0e=em(),F0e=xv(),A0e=pk(),Cv=O0e("wks"),Xf=D0e.Symbol,P0e=A0e?Xf:Xf&&Xf.withoutSetter||R0e;z4.exports=function(r){return L4(Cv,r)||(F0e&&L4(Xf,r)?Cv[r]=Xf[r]:Cv[r]=P0e("Symbol."+r)),Cv[r]}});var nm=S((MJe,N4)=>{var M0e=ct(),U4=rc(),B0e=kt(),L0e=B0e("species");N4.exports=function(r,e){var t;return U4(r)&&(t=r.constructor,typeof t=="function"&&(t===Array||U4(t.prototype))?t=void 0:M0e(t)&&(t=t[L0e],t===null&&(t=void 0))),new(t===void 0?Array:t)(e===0?0:e)}});var Yf=S((BJe,q4)=>{var z0e=vo();q4.exports=z0e("navigator","userAgent")||""});var wv=S((LJe,G4)=>{var U0e=Xe(),mk=Yf(),H4=U0e.process,j4=H4&&H4.versions,W4=j4&&j4.v8,Oa,Sv;W4?(Oa=W4.split("."),Sv=Oa[0]+Oa[1]):mk&&(Oa=mk.match(/Edge\/(\d+)/),(!Oa||Oa[1]>=74)&&(Oa=mk.match(/Chrome\/(\d+)/),Oa&&(Sv=Oa[1])));G4.exports=Sv&&+Sv});var sm=S((zJe,V4)=>{var N0e=Re(),q0e=kt(),H0e=wv(),j0e=q0e("species");V4.exports=function(r){return H0e>=51||!N0e(function(){var e=[],t=e.constructor={};return t[j0e]=function(){return{foo:1}},e[r](Boolean).foo!==1})}});var hk=S(()=>{"use strict";var W0e=W(),G0e=Re(),V0e=rc(),$0e=ct(),K0e=ir(),X0e=It(),$4=ic(),Y0e=nm(),J0e=sm(),Z0e=kt(),Q0e=wv(),K4=Z0e("isConcatSpreadable"),X4=9007199254740991,Y4="Maximum allowed index exceeded",eCe=Q0e>=51||!G0e(function(){var r=[];return r[K4]=!1,r.concat()[0]!==r}),tCe=J0e("concat"),rCe=function(r){if(!$0e(r))return!1;var e=r[K4];return e!==void 0?!!e:V0e(r)},iCe=!eCe||!tCe;W0e({target:"Array",proto:!0,forced:iCe},{concat:function(e){var t=K0e(this),i=Y0e(t,0),o=0,n,s,a,l,c;for(n=-1,a=arguments.length;n<a;n++)if(c=n===-1?t:arguments[n],rCe(c)){if(l=X0e(c.length),o+l>X4)throw TypeError(Y4);for(s=0;s<l;s++,o++)s in c&&$4(i,o,c[s])}else{if(o>=X4)throw TypeError(Y4);$4(i,o++,c)}return i.length=o,i}})});var Tv=S((qJe,Z4)=>{var oCe=kt(),nCe=oCe("toStringTag"),J4={};J4[nCe]="z";Z4.exports=String(J4)==="[object z]"});var am=S((HJe,Q4)=>{var sCe=Tv(),kv=_o(),aCe=kt(),lCe=aCe("toStringTag"),cCe=kv(function(){return arguments}())=="Arguments",uCe=function(r,e){try{return r[e]}catch(t){}};Q4.exports=sCe?kv:function(r){var e,t,i;return r===void 0?"Undefined":r===null?"Null":typeof(t=uCe(e=Object(r),lCe))=="string"?t:cCe?kv(e):(i=kv(e))=="Object"&&typeof e.callee=="function"?"Arguments":i}});var t3=S((jJe,e3)=>{"use strict";var dCe=Tv(),pCe=am();e3.exports=dCe?{}.toString:function(){return"[object "+pCe(this)+"]"}});var fk=S(()=>{var mCe=Tv(),hCe=Jr(),fCe=t3();mCe||hCe(Object.prototype,"toString",fCe,{unsafe:!0})});var lm=S((VJe,r3)=>{var gCe=ck(),bCe=yv();r3.exports=Object.keys||function(e){return gCe(e,bCe)}});var Ev=S(($Je,i3)=>{var yCe=bt(),_Ce=zt(),vCe=ht(),xCe=lm();i3.exports=yCe?Object.defineProperties:function(e,t){vCe(e);for(var i=xCe(t),o=i.length,n=0,s;o>n;)_Ce.f(e,s=i[n++],t[s]);return e}});var gk=S((KJe,o3)=>{var CCe=vo();o3.exports=CCe("document","documentElement")});var ys=S((XJe,u3)=>{var SCe=ht(),wCe=Ev(),n3=yv(),TCe=tm(),kCe=gk(),ECe=pv(),ICe=Vf(),s3=">",a3="<",bk="prototype",yk="script",l3=ICe("IE_PROTO"),_k=function(){},c3=function(r){return a3+yk+s3+r+a3+"/"+yk+s3},DCe=function(r){r.write(c3("")),r.close();var e=r.parentWindow.Object;return r=null,e},OCe=function(){var r=ECe("iframe"),e="java"+yk+":",t;return r.style.display="none",kCe.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(c3("document.F=Object")),t.close(),t.F},vk,Iv=function(){try{vk=document.domain&&new ActiveXObject("htmlfile")}catch(e){}Iv=vk?DCe(vk):OCe();for(var r=n3.length;r--;)delete Iv[bk][n3[r]];return Iv()};TCe[l3]=!0;u3.exports=Object.create||function(e,t){var i;return e!==null?(_k[bk]=SCe(e),i=new _k,_k[bk]=null,i[l3]=e):i=Iv(),t===void 0?i:wCe(i,t)}});var xk=S((YJe,m3)=>{var RCe=ji(),d3=tc().f,FCe={}.toString,p3=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ACe=function(r){try{return d3(r)}catch(e){return p3.slice()}};m3.exports.f=function(e){return p3&&FCe.call(e)=="[object Window]"?ACe(e):d3(RCe(e))}});var Ck=S(h3=>{var PCe=kt();h3.f=PCe});var kr=S((ZJe,g3)=>{var f3=ec(),MCe=dr(),BCe=Ck(),LCe=zt().f;g3.exports=function(r){var e=f3.Symbol||(f3.Symbol={});MCe(e,r)||LCe(e,r,{value:BCe.f(r)})}});var An=S((QJe,y3)=>{var zCe=zt().f,UCe=dr(),NCe=kt(),b3=NCe("toStringTag");y3.exports=function(r,e,t){r&&!UCe(r=t?r:r.prototype,b3)&&zCe(r,b3,{configurable:!0,value:e})}});var vi=S((eZe,_3)=>{_3.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}});var _s=S((tZe,v3)=>{var qCe=vi();v3.exports=function(r,e,t){if(qCe(r),e===void 0)return r;switch(t){case 0:return function(){return r.call(e)};case 1:return function(i){return r.call(e,i)};case 2:return function(i,o){return r.call(e,i,o)};case 3:return function(i,o,n){return r.call(e,i,o,n)}}return function(){return r.apply(e,arguments)}}});var jr=S((rZe,x3)=>{var HCe=_s(),jCe=Qp(),WCe=ir(),GCe=It(),VCe=nm(),$Ce=[].push,Lu=function(r){var e=r==1,t=r==2,i=r==3,o=r==4,n=r==6,s=r==5||n;return function(a,l,c,u){for(var d=WCe(a),p=jCe(d),h=HCe(l,c,3),f=GCe(p.length),_=0,x=u||VCe,y=e?x(a,f):t?x(a,0):void 0,D,E;f>_;_++)if((s||_ in p)&&(D=p[_],E=h(D,_,d),r)){if(e)y[_]=E;else if(E)switch(r){case 3:return!0;case 5:return D;case 6:return _;case 2:$Ce.call(y,D)}else if(o)return!1}return n?-1:i||o?o:y}};x3.exports={forEach:Lu(0),map:Lu(1),filter:Lu(2),some:Lu(3),every:Lu(4),find:Lu(5),findIndex:Lu(6)}});var zk=S(()=>{"use strict";var cm=W(),C3=Xe(),KCe=vo(),XCe=on(),um=bt(),zu=xv(),YCe=pk(),Sk=Re(),Er=dr(),JCe=rc(),ZCe=ct(),wk=ht(),QCe=ir(),Dv=ji(),Tk=rn(),kk=Ia(),Jf=ys(),S3=lm(),eSe=tc(),w3=xk(),Ek=_v(),T3=Yr(),k3=zt(),E3=Gf(),tSe=ui(),Ik=Jr(),Zf=fv(),rSe=Vf(),I3=tm(),D3=em(),O3=kt(),iSe=Ck(),oSe=kr(),nSe=An(),R3=di(),Ov=jr().forEach,Wi=rSe("hidden"),Rv="Symbol",Ra="prototype",F3=O3("toPrimitive"),sSe=R3.set,A3=R3.getterFor(Rv),nn=Object[Ra],Gi=C3.Symbol,Qf=KCe("JSON","stringify"),P3=T3.f,oc=k3.f,M3=w3.f,aSe=E3.f,Fa=Zf("symbols"),eg=Zf("op-symbols"),Dk=Zf("string-to-symbol-registry"),Ok=Zf("symbol-to-string-registry"),lSe=Zf("wks"),Rk=C3.QObject,Fk=!Rk||!Rk[Ra]||!Rk[Ra].findChild,Ak=um&&Sk(function(){return Jf(oc({},"a",{get:function(){return oc(this,"a",{value:7}).a}})).a!=7})?function(r,e,t){var i=P3(nn,e);i&&delete nn[e],oc(r,e,t),i&&r!==nn&&oc(nn,e,i)}:oc,Pk=function(r,e){var t=Fa[r]=Jf(Gi[Ra]);return sSe(t,{type:Rv,tag:r,description:e}),um||(t.description=e),t},Mk=YCe?function(r){return typeof r=="symbol"}:function(r){return Object(r)instanceof Gi},Fv=function(e,t,i){e===nn&&Fv(eg,t,i),wk(e);var o=Tk(t,!0);return wk(i),Er(Fa,o)?(i.enumerable?(Er(e,Wi)&&e[Wi][o]&&(e[Wi][o]=!1),i=Jf(i,{enumerable:kk(0,!1)})):(Er(e,Wi)||oc(e,Wi,kk(1,{})),e[Wi][o]=!0),Ak(e,o,i)):oc(e,o,i)},B3=function(e,t){wk(e);var i=Dv(t),o=S3(i).concat(Lk(i));return Ov(o,function(n){(!um||Bk.call(i,n))&&Fv(e,n,i[n])}),e},cSe=function(e,t){return t===void 0?Jf(e):B3(Jf(e),t)},Bk=function(e){var t=Tk(e,!0),i=aSe.call(this,t);return this===nn&&Er(Fa,t)&&!Er(eg,t)?!1:i||!Er(this,t)||!Er(Fa,t)||Er(this,Wi)&&this[Wi][t]?i:!0},L3=function(e,t){var i=Dv(e),o=Tk(t,!0);if(!(i===nn&&Er(Fa,o)&&!Er(eg,o))){var n=P3(i,o);return n&&Er(Fa,o)&&!(Er(i,Wi)&&i[Wi][o])&&(n.enumerable=!0),n}},z3=function(e){var t=M3(Dv(e)),i=[];return Ov(t,function(o){!Er(Fa,o)&&!Er(I3,o)&&i.push(o)}),i},Lk=function(e){var t=e===nn,i=M3(t?eg:Dv(e)),o=[];return Ov(i,function(n){Er(Fa,n)&&(!t||Er(nn,n))&&o.push(Fa[n])}),o};zu||(Gi=function(){if(this instanceof Gi)throw TypeError("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),t=D3(e),i=function(o){this===nn&&i.call(eg,o),Er(this,Wi)&&Er(this[Wi],t)&&(this[Wi][t]=!1),Ak(this,t,kk(1,o))};return um&&Fk&&Ak(nn,t,{configurable:!0,set:i}),Pk(t,e)},Ik(Gi[Ra],"toString",function(){return A3(this).tag}),Ik(Gi,"withoutSetter",function(r){return Pk(D3(r),r)}),E3.f=Bk,k3.f=Fv,T3.f=L3,eSe.f=w3.f=z3,Ek.f=Lk,iSe.f=function(r){return Pk(O3(r),r)},um&&(oc(Gi[Ra],"description",{configurable:!0,get:function(){return A3(this).description}}),XCe||Ik(nn,"propertyIsEnumerable",Bk,{unsafe:!0})));cm({global:!0,wrap:!0,forced:!zu,sham:!zu},{Symbol:Gi});Ov(S3(lSe),function(r){oSe(r)});cm({target:Rv,stat:!0,forced:!zu},{for:function(r){var e=String(r);if(Er(Dk,e))return Dk[e];var t=Gi(e);return Dk[e]=t,Ok[t]=e,t},keyFor:function(e){if(!Mk(e))throw TypeError(e+" is not a symbol");if(Er(Ok,e))return Ok[e]},useSetter:function(){Fk=!0},useSimple:function(){Fk=!1}});cm({target:"Object",stat:!0,forced:!zu,sham:!um},{create:cSe,defineProperty:Fv,defineProperties:B3,getOwnPropertyDescriptor:L3});cm({target:"Object",stat:!0,forced:!zu},{getOwnPropertyNames:z3,getOwnPropertySymbols:Lk});cm({target:"Object",stat:!0,forced:Sk(function(){Ek.f(1)})},{getOwnPropertySymbols:function(e){return Ek.f(QCe(e))}});Qf&&(U3=!zu||Sk(function(){var r=Gi();return Qf([r])!="[null]"||Qf({a:r})!="{}"||Qf(Object(r))!="{}"}),cm({target:"JSON",stat:!0,forced:U3},{stringify:function(e,t,i){for(var o=[e],n=1,s;arguments.length>n;)o.push(arguments[n++]);if(s=t,!(!ZCe(t)&&e===void 0||Mk(e)))return JCe(t)||(t=function(a,l){if(typeof s=="function"&&(l=s.call(this,a,l)),!Mk(l))return l}),o[1]=t,Qf.apply(null,o)}}));var U3;Gi[Ra][F3]||tSe(Gi[Ra],F3,Gi[Ra].valueOf);nSe(Gi,Rv);I3[Wi]=!0});var Uk=S(()=>{var uSe=kr();uSe("asyncIterator")});var qk=S(()=>{"use strict";var dSe=W(),pSe=bt(),mSe=Xe(),hSe=dr(),fSe=ct(),gSe=zt().f,bSe=uk(),Aa=mSe.Symbol;pSe&&typeof Aa=="function"&&(!("description"in Aa.prototype)||Aa().description!==void 0)&&(Nk={},dm=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),t=this instanceof dm?new Aa(e):e===void 0?Aa():Aa(e);return e===""&&(Nk[t]=!0),t},bSe(dm,Aa),Av=dm.prototype=Aa.prototype,Av.constructor=dm,N3=Av.toString,q3=String(Aa("test"))=="Symbol(test)",H3=/^Symbol\((.*)\)[^)]+$/,gSe(Av,"description",{configurable:!0,get:function(){var e=fSe(this)?this.valueOf():this,t=N3.call(e);if(hSe(Nk,e))return"";var i=q3?t.slice(7,-1):t.replace(H3,"$1");return i===""?void 0:i}}),dSe({global:!0,forced:!0},{Symbol:dm}));var Nk,dm,Av,N3,q3,H3});var Hk=S(()=>{var ySe=kr();ySe("hasInstance")});var jk=S(()=>{var _Se=kr();_Se("isConcatSpreadable")});var Wk=S(()=>{var vSe=kr();vSe("iterator")});var Gk=S(()=>{var xSe=kr();xSe("match")});var Vk=S(()=>{var CSe=kr();CSe("matchAll")});var $k=S(()=>{var SSe=kr();SSe("replace")});var Kk=S(()=>{var wSe=kr();wSe("search")});var Xk=S(()=>{var TSe=kr();TSe("species")});var Yk=S(()=>{var kSe=kr();kSe("split")});var Jk=S(()=>{var ESe=kr();ESe("toPrimitive")});var Zk=S(()=>{var ISe=kr();ISe("toStringTag")});var Qk=S(()=>{var DSe=kr();DSe("unscopables")});var e2=S(()=>{var OSe=An();OSe(Math,"Math",!0)});var t2=S(()=>{var RSe=Xe(),FSe=An();FSe(RSe.JSON,"JSON",!0)});var W3=S((LZe,j3)=>{hk();fk();zk();Uk();qk();Hk();jk();Wk();Gk();Vk();$k();Kk();Xk();Yk();Jk();Zk();Qk();e2();t2();var ASe=ec();j3.exports=ASe.Symbol});var G3=S(()=>{var PSe=kr();PSe("asyncDispose")});var V3=S(()=>{var MSe=kr();MSe("dispose")});var $3=S(()=>{var BSe=kr();BSe("observable")});var K3=S(()=>{var LSe=kr();LSe("patternMatch")});var X3=S(()=>{var zSe=kr();zSe("replaceAll")});var J3=S((KZe,Y3)=>{var USe=W3();G3();V3();$3();K3();X3();Y3.exports=USe});var tg=S((XZe,Q3)=>{var NSe=xo(),qSe=ci(),Z3=function(r){return function(e,t){var i=String(qSe(e)),o=NSe(t),n=i.length,s,a;return o<0||o>=n?r?"":void 0:(s=i.charCodeAt(o),s<55296||s>56319||o+1===n||(a=i.charCodeAt(o+1))<56320||a>57343?r?i.charAt(o):s:r?i.slice(o,o+2):(s-55296<<10)+(a-56320)+65536)}};Q3.exports={codeAt:Z3(!1),charAt:Z3(!0)}});var Pv=S((YZe,ez)=>{var HSe=Re();ez.exports=!HSe(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})});var sn=S((JZe,rz)=>{var jSe=dr(),WSe=ir(),GSe=Vf(),VSe=Pv(),tz=GSe("IE_PROTO"),$Se=Object.prototype;rz.exports=VSe?Object.getPrototypeOf:function(r){return r=WSe(r),jSe(r,tz)?r[tz]:typeof r.constructor=="function"&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?$Se:null}});var o2=S((ZZe,sz)=>{"use strict";var iz=sn(),KSe=ui(),XSe=dr(),YSe=kt(),JSe=on(),oz=YSe("iterator"),nz=!1,ZSe=function(){return this},pm,r2,i2;[].keys&&(i2=[].keys(),"next"in i2?(r2=iz(iz(i2)),r2!==Object.prototype&&(pm=r2)):nz=!0);pm==null&&(pm={});!JSe&&!XSe(pm,oz)&&KSe(pm,oz,ZSe);sz.exports={IteratorPrototype:pm,BUGGY_SAFARI_ITERATORS:nz}});var mm=S((QZe,az)=>{az.exports={}});var Mv=S((eQe,lz)=>{"use strict";var QSe=o2().IteratorPrototype,e1e=ys(),t1e=Ia(),r1e=An(),i1e=mm(),o1e=function(){return this};lz.exports=function(r,e,t){var i=e+" Iterator";return r.prototype=e1e(QSe,{next:t1e(1,t)}),r1e(r,i,!1,!0),i1e[i]=o1e,r}});var n2=S((tQe,cz)=>{var n1e=ct();cz.exports=function(r){if(!n1e(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype");return r}});var nc=S((rQe,uz)=>{var s1e=ht(),a1e=n2();uz.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,e={},t;try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(e,[]),r=e instanceof Array}catch(i){}return function(o,n){return s1e(o),a1e(n),r?t.call(o,n):o.__proto__=n,o}}():void 0)});var zv=S((iQe,_z)=>{"use strict";var l1e=W(),c1e=Mv(),dz=sn(),pz=nc(),u1e=An(),mz=ui(),d1e=Jr(),p1e=kt(),s2=on(),hz=mm(),fz=o2(),a2=fz.IteratorPrototype,Bv=fz.BUGGY_SAFARI_ITERATORS,rg=p1e("iterator"),gz="keys",Lv="values",bz="entries",yz=function(){return this};_z.exports=function(r,e,t,i,o,n,s){c1e(t,e,i);var a=function(y){if(y===o&&p)return p;if(!Bv&&y in u)return u[y];switch(y){case gz:return function(){return new t(this,y)};case Lv:return function(){return new t(this,y)};case bz:return function(){return new t(this,y)}}return function(){return new t(this)}},l=e+" Iterator",c=!1,u=r.prototype,d=u[rg]||u["@@iterator"]||o&&u[o],p=!Bv&&d||a(o),h=e=="Array"&&u.entries||d,f,_,x;if(h&&(f=dz(h.call(new r)),a2!==Object.prototype&&f.next&&(!s2&&dz(f)!==a2&&(pz?pz(f,a2):typeof f[rg]!="function"&&mz(f,rg,yz)),u1e(f,l,!0,!0),s2&&(hz[l]=yz))),o==Lv&&d&&d.name!==Lv&&(c=!0,p=function(){return d.call(this)}),(!s2||s)&&u[rg]!==p&&mz(u,rg,p),hz[e]=p,o)if(_={values:a(Lv),keys:n?p:a(gz),entries:a(bz)},s)for(x in _)(Bv||c||!(x in u))&&d1e(u,x,_[x]);else l1e({target:e,proto:!0,forced:Bv||c},_);return _}});var Uv=S(()=>{"use strict";var m1e=tg().charAt,vz=di(),h1e=zv(),xz="String Iterator",f1e=vz.set,g1e=vz.getterFor(xz);h1e(String,"String",function(r){f1e(this,{type:xz,string:String(r),index:0})},function(){var e=g1e(this),t=e.string,i=e.index,o;return i>=t.length?{value:void 0,done:!0}:(o=m1e(t,i),e.index+=o.length,{value:o,done:!1})})});var l2=S((sQe,Sz)=>{var Cz=ht();Sz.exports=function(r,e,t,i){try{return i?e(Cz(t)[0],t[1]):e(t)}catch(n){var o=r.return;throw o!==void 0&&Cz(o.call(r)),n}}});var Nv=S((aQe,wz)=>{var b1e=kt(),y1e=mm(),_1e=b1e("iterator"),v1e=Array.prototype;wz.exports=function(r){return r!==void 0&&(y1e.Array===r||v1e[_1e]===r)}});var hm=S((lQe,Tz)=>{var x1e=am(),C1e=mm(),S1e=kt(),w1e=S1e("iterator");Tz.exports=function(r){if(r!=null)return r[w1e]||r["@@iterator"]||C1e[x1e(r)]}});var c2=S((cQe,Ez)=>{"use strict";var T1e=_s(),k1e=ir(),E1e=l2(),I1e=Nv(),D1e=It(),kz=ic(),O1e=hm();Ez.exports=function(e){var t=k1e(e),i=typeof this=="function"?this:Array,o=arguments.length,n=o>1?arguments[1]:void 0,s=n!==void 0,a=O1e(t),l=0,c,u,d,p,h,f;if(s&&(n=T1e(n,o>2?arguments[2]:void 0,2)),a!=null&&!(i==Array&&I1e(a)))for(p=a.call(t),h=p.next,u=new i;!(d=h.call(p)).done;l++)f=s?E1e(p,n,[d.value,l],!0):d.value,kz(u,l,f);else for(c=D1e(t.length),u=new i(c);c>l;l++)f=s?n(t[l],l):t[l],kz(u,l,f);return u.length=l,u}});var ig=S((uQe,Rz)=>{var R1e=kt(),Iz=R1e("iterator"),Dz=!1;try{Oz=0,u2={next:function(){return{done:!!Oz++}},return:function(){Dz=!0}},u2[Iz]=function(){return this},Array.from(u2,function(){throw 2})}catch(r){}var Oz,u2;Rz.exports=function(r,e){if(!e&&!Dz)return!1;var t=!1;try{var i={};i[Iz]=function(){return{next:function(){return{done:t=!0}}}},r(i)}catch(o){}return t}});var d2=S(()=>{var F1e=W(),A1e=c2(),P1e=ig(),M1e=!P1e(function(r){Array.from(r)});F1e({target:"Array",stat:!0,forced:M1e},{from:A1e})});var Az=S((mQe,Fz)=>{Uv();d2();var B1e=ec();Fz.exports=B1e.Array.from});var Mz=S((hQe,Pz)=>{var L1e=Az();Pz.exports=L1e});var m2=S((gQe,zz)=>{"use strict";var Bz=bt(),z1e=Re(),p2=lm(),U1e=_v(),N1e=Gf(),q1e=ir(),H1e=Qp(),fm=Object.assign,Lz=Object.defineProperty;zz.exports=!fm||z1e(function(){if(Bz&&fm({b:1},fm(Lz({},"a",{enumerable:!0,get:function(){Lz(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},e={},t=Symbol(),i="abcdefghijklmnopqrst";return r[t]=7,i.split("").forEach(function(o){e[o]=o}),fm({},r)[t]!=7||p2(fm({},e)).join("")!=i})?function(e,t){for(var i=q1e(e),o=arguments.length,n=1,s=U1e.f,a=N1e.f;o>n;)for(var l=H1e(arguments[n++]),c=s?p2(l).concat(s(l)):p2(l),u=c.length,d=0,p;u>d;)p=c[d++],(!Bz||a.call(l,p))&&(i[p]=l[p]);return i}:fm});var Nz=S(()=>{var j1e=W(),Uz=m2();j1e({target:"Object",stat:!0,forced:Object.assign!==Uz},{assign:Uz})});var qz=S(()=>{var W1e=W(),G1e=bt(),V1e=ys();W1e({target:"Object",stat:!0,sham:!G1e},{create:V1e})});var jz=S(()=>{var $1e=W(),Hz=bt(),K1e=zt();$1e({target:"Object",stat:!0,forced:!Hz,sham:!Hz},{defineProperty:K1e.f})});var Gz=S(()=>{var X1e=W(),Wz=bt(),Y1e=Ev();X1e({target:"Object",stat:!0,forced:!Wz,sham:!Wz},{defineProperties:Y1e})});var h2=S((TQe,$z)=>{var J1e=bt(),Z1e=lm(),Q1e=ji(),ewe=Gf().f,Vz=function(r){return function(e){for(var t=Q1e(e),i=Z1e(t),o=i.length,n=0,s=[],a;o>n;)a=i[n++],(!J1e||ewe.call(t,a))&&s.push(r?[a,t[a]]:t[a]);return s}};$z.exports={entries:Vz(!0),values:Vz(!1)}});var Kz=S(()=>{var twe=W(),rwe=h2().entries;twe({target:"Object",stat:!0},{entries:function(e){return rwe(e)}})});var gm=S((IQe,Xz)=>{var iwe=Re();Xz.exports=!iwe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var sc=S((DQe,Yz)=>{var owe=tm(),nwe=ct(),f2=dr(),swe=zt().f,awe=em(),lwe=gm(),Uu=awe("meta"),cwe=0,g2=Object.isExtensible||function(){return!0},b2=function(r){swe(r,Uu,{value:{objectID:"O"+ ++cwe,weakData:{}}})},uwe=function(r,e){if(!nwe(r))return typeof r=="symbol"?r:(typeof r=="string"?"S":"P")+r;if(!f2(r,Uu)){if(!g2(r))return"F";if(!e)return"E";b2(r)}return r[Uu].objectID},dwe=function(r,e){if(!f2(r,Uu)){if(!g2(r))return!0;if(!e)return!1;b2(r)}return r[Uu].weakData},pwe=function(r){return lwe&&mwe.REQUIRED&&g2(r)&&!f2(r,Uu)&&b2(r),r},mwe=Yz.exports={REQUIRED:!1,fastKey:uwe,getWeakData:dwe,onFreeze:pwe};owe[Uu]=!0});var Jz=S(()=>{var hwe=W(),fwe=gm(),gwe=Re(),bwe=ct(),ywe=sc().onFreeze,y2=Object.freeze,_we=gwe(function(){y2(1)});hwe({target:"Object",stat:!0,forced:_we,sham:!fwe},{freeze:function(e){return y2&&bwe(e)?y2(ywe(e)):e}})});var Nu=S((FQe,Zz)=>{var vwe=ht(),xwe=Nv(),Cwe=It(),Swe=_s(),wwe=hm(),Twe=l2(),og=function(r,e){this.stopped=r,this.result=e},kwe=Zz.exports=function(r,e,t,i,o){var n=Swe(e,t,i?2:1),s,a,l,c,u,d,p;if(o)s=r;else{if(a=wwe(r),typeof a!="function")throw TypeError("Target is not iterable");if(xwe(a)){for(l=0,c=Cwe(r.length);c>l;l++)if(u=i?n(vwe(p=r[l])[0],p[1]):n(r[l]),u&&u instanceof og)return u;return new og(!1)}s=a.call(r)}for(d=s.next;!(p=d.call(s)).done;)if(u=Twe(s,n,p.value,i),typeof u=="object"&&u&&u instanceof og)return u;return new og(!1)};kwe.stop=function(r){return new og(!0,r)}});var Qz=S(()=>{var Ewe=W(),Iwe=Nu(),Dwe=ic();Ewe({target:"Object",stat:!0},{fromEntries:function(e){var t={};return Iwe(e,function(i,o){Dwe(t,i,o)},void 0,!0),t}})});var r8=S(()=>{var Owe=W(),Rwe=Re(),Fwe=ji(),e8=Yr().f,t8=bt(),Awe=Rwe(function(){e8(1)}),Pwe=!t8||Awe;Owe({target:"Object",stat:!0,forced:Pwe,sham:!t8},{getOwnPropertyDescriptor:function(e,t){return e8(Fwe(e),t)}})});var i8=S(()=>{var Mwe=W(),Bwe=bt(),Lwe=vv(),zwe=ji(),Uwe=Yr(),Nwe=ic();Mwe({target:"Object",stat:!0,sham:!Bwe},{getOwnPropertyDescriptors:function(e){for(var t=zwe(e),i=Uwe.f,o=Lwe(t),n={},s=0,a,l;o.length>s;)l=i(t,a=o[s++]),l!==void 0&&Nwe(n,a,l);return n}})});var o8=S(()=>{var qwe=W(),Hwe=Re(),jwe=xk().f,Wwe=Hwe(function(){return!Object.getOwnPropertyNames(1)});qwe({target:"Object",stat:!0,forced:Wwe},{getOwnPropertyNames:jwe})});var s8=S(()=>{var Gwe=W(),Vwe=Re(),$we=ir(),n8=sn(),Kwe=Pv(),Xwe=Vwe(function(){n8(1)});Gwe({target:"Object",stat:!0,forced:Xwe,sham:!Kwe},{getPrototypeOf:function(e){return n8($we(e))}})});var _2=S((jQe,a8)=>{a8.exports=Object.is||function(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}});var l8=S(()=>{var Ywe=W(),Jwe=_2();Ywe({target:"Object",stat:!0},{is:Jwe})});var c8=S(()=>{var Zwe=W(),Qwe=Re(),eTe=ct(),v2=Object.isExtensible,tTe=Qwe(function(){v2(1)});Zwe({target:"Object",stat:!0,forced:tTe},{isExtensible:function(e){return eTe(e)?v2?v2(e):!0:!1}})});var u8=S(()=>{var rTe=W(),iTe=Re(),oTe=ct(),x2=Object.isFrozen,nTe=iTe(function(){x2(1)});rTe({target:"Object",stat:!0,forced:nTe},{isFrozen:function(e){return oTe(e)?x2?x2(e):!1:!0}})});var d8=S(()=>{var sTe=W(),aTe=Re(),lTe=ct(),C2=Object.isSealed,cTe=aTe(function(){C2(1)});sTe({target:"Object",stat:!0,forced:cTe},{isSealed:function(e){return lTe(e)?C2?C2(e):!1:!0}})});var m8=S(()=>{var uTe=W(),dTe=ir(),p8=lm(),pTe=Re(),mTe=pTe(function(){p8(1)});uTe({target:"Object",stat:!0,forced:mTe},{keys:function(e){return p8(dTe(e))}})});var h8=S(()=>{var hTe=W(),fTe=ct(),gTe=sc().onFreeze,bTe=gm(),yTe=Re(),S2=Object.preventExtensions,_Te=yTe(function(){S2(1)});hTe({target:"Object",stat:!0,forced:_Te,sham:!bTe},{preventExtensions:function(e){return S2&&fTe(e)?S2(gTe(e)):e}})});var f8=S(()=>{var vTe=W(),xTe=ct(),CTe=sc().onFreeze,STe=gm(),wTe=Re(),w2=Object.seal,TTe=wTe(function(){w2(1)});vTe({target:"Object",stat:!0,forced:TTe,sham:!STe},{seal:function(e){return w2&&xTe(e)?w2(CTe(e)):e}})});var g8=S(()=>{var kTe=W(),ETe=nc();kTe({target:"Object",stat:!0},{setPrototypeOf:ETe})});var b8=S(()=>{var ITe=W(),DTe=h2().values;ITe({target:"Object",stat:!0},{values:function(e){return DTe(e)}})});var ng=S((cet,y8)=>{"use strict";var OTe=on(),RTe=Xe(),FTe=Re();y8.exports=OTe||!FTe(function(){var r=Math.random();__defineSetter__.call(null,r,function(){}),delete RTe[r]})});var _8=S(()=>{"use strict";var ATe=W(),PTe=bt(),MTe=ng(),BTe=ir(),LTe=vi(),zTe=zt();PTe&&ATe({target:"Object",proto:!0,forced:MTe},{__defineGetter__:function(e,t){zTe.f(BTe(this),e,{get:LTe(t),enumerable:!0,configurable:!0})}})});var v8=S(()=>{"use strict";var UTe=W(),NTe=bt(),qTe=ng(),HTe=ir(),jTe=vi(),WTe=zt();NTe&&UTe({target:"Object",proto:!0,forced:qTe},{__defineSetter__:function(e,t){WTe.f(HTe(this),e,{set:jTe(t),enumerable:!0,configurable:!0})}})});var x8=S(()=>{"use strict";var GTe=W(),VTe=bt(),$Te=ng(),KTe=ir(),XTe=rn(),YTe=sn(),JTe=Yr().f;VTe&&GTe({target:"Object",proto:!0,forced:$Te},{__lookupGetter__:function(e){var t=KTe(this),i=XTe(e,!0),o;do if(o=JTe(t,i))return o.get;while(t=YTe(t))}})});var C8=S(()=>{"use strict";var ZTe=W(),QTe=bt(),eke=ng(),tke=ir(),rke=rn(),ike=sn(),oke=Yr().f;QTe&&ZTe({target:"Object",proto:!0,forced:eke},{__lookupSetter__:function(e){var t=tke(this),i=rke(e,!0),o;do if(o=oke(t,i))return o.set;while(t=ike(t))}})});var k2=S((yet,w8)=>{"use strict";var nke=vi(),ske=ct(),S8=[].slice,T2={},ake=function(r,e,t){if(!(e in T2)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";T2[e]=Function("C,a","return new C("+i.join(",")+")")}return T2[e](r,t)};w8.exports=Function.bind||function(e){var t=nke(this),i=S8.call(arguments,1),o=function(){var s=i.concat(S8.call(arguments));return this instanceof o?ake(t,s.length,s):t.apply(e,s)};return ske(t.prototype)&&(o.prototype=t.prototype),o}});var T8=S(()=>{var lke=W(),cke=k2();lke({target:"Function",proto:!0},{bind:cke})});var E8=S(()=>{var uke=bt(),dke=zt().f,E2=Function.prototype,pke=E2.toString,mke=/^\s*function ([^ (]*)/,k8="name";uke&&!(k8 in E2)&&dke(E2,k8,{configurable:!0,get:function(){try{return pke.call(this).match(mke)[1]}catch(r){return""}}})});var R8=S(()=>{"use strict";var I8=ct(),hke=zt(),fke=sn(),gke=kt(),D8=gke("hasInstance"),O8=Function.prototype;D8 in O8||hke.f(O8,D8,{value:function(r){if(typeof this!="function"||!I8(r))return!1;if(!I8(this.prototype))return r instanceof this;for(;r=fke(r);)if(this.prototype===r)return!0;return!1}})});var F8=S(()=>{var bke=W(),yke=Xe();bke({global:!0},{globalThis:yke})});var A8=S(()=>{var _ke=W(),vke=rc();_ke({target:"Array",stat:!0},{isArray:vke})});var P8=S(()=>{"use strict";var xke=W(),Cke=Re(),Ske=ic(),wke=Cke(function(){function r(){}return!(Array.of.call(r)instanceof r)});xke({target:"Array",stat:!0,forced:wke},{of:function(){for(var e=0,t=arguments.length,i=new(typeof this=="function"?this:Array)(t);t>e;)Ske(i,e,arguments[e++]);return i.length=t,i}})});var D2=S((Fet,M8)=>{"use strict";var Tke=ir(),I2=Da(),kke=It(),Eke=Math.min;M8.exports=[].copyWithin||function(e,t){var i=Tke(this),o=kke(i.length),n=I2(e,o),s=I2(t,o),a=arguments.length>2?arguments[2]:void 0,l=Eke((a===void 0?o:I2(a,o))-s,o-n),c=1;for(s<n&&n<s+l&&(c=-1,s+=l-1,n+=l-1);l-- >0;)s in i?i[n]=i[s]:delete i[n],n+=c,s+=c;return i}});var Pa=S((Aet,B8)=>{var Ike=kt(),Dke=ys(),Oke=zt(),O2=Ike("unscopables"),R2=Array.prototype;R2[O2]==null&&Oke.f(R2,O2,{configurable:!0,value:Dke(null)});B8.exports=function(r){R2[O2][r]=!0}});var L8=S(()=>{var Rke=W(),Fke=D2(),Ake=Pa();Rke({target:"Array",proto:!0},{copyWithin:Fke});Ake("copyWithin")});var vs=S((Bet,z8)=>{"use strict";var Pke=Re();z8.exports=function(r,e){var t=[][r];return!!t&&Pke(function(){t.call(null,e||function(){throw 1},1)})}});var xi=S((Let,N8)=>{var Mke=bt(),Bke=Re(),qv=dr(),Lke=Object.defineProperty,F2={},U8=function(r){throw r};N8.exports=function(r,e){if(qv(F2,r))return F2[r];e||(e={});var t=[][r],i=qv(e,"ACCESSORS")?e.ACCESSORS:!1,o=qv(e,0)?e[0]:U8,n=qv(e,1)?e[1]:void 0;return F2[r]=!!t&&!Bke(function(){if(i&&!Mke)return!0;var s={length:-1};i?Lke(s,1,{enumerable:!0,get:U8}):s[1]=1,t.call(s,o,n)})}});var q8=S(()=>{"use strict";var zke=W(),Uke=jr().every,Nke=vs(),qke=xi(),Hke=Nke("every"),jke=qke("every");zke({target:"Array",proto:!0,forced:!Hke||!jke},{every:function(e){return Uke(this,e,arguments.length>1?arguments[1]:void 0)}})});var Hv=S((Net,j8)=>{"use strict";var Wke=ir(),H8=Da(),Gke=It();j8.exports=function(e){for(var t=Wke(this),i=Gke(t.length),o=arguments.length,n=H8(o>1?arguments[1]:void 0,i),s=o>2?arguments[2]:void 0,a=s===void 0?i:H8(s,i);a>n;)t[n++]=e;return t}});var W8=S(()=>{var Vke=W(),$ke=Hv(),Kke=Pa();Vke({target:"Array",proto:!0},{fill:$ke});Kke("fill")});var G8=S(()=>{"use strict";var Xke=W(),Yke=jr().filter,Jke=sm(),Zke=xi(),Qke=Jke("filter"),e2e=Zke("filter");Xke({target:"Array",proto:!0,forced:!Qke||!e2e},{filter:function(e){return Yke(this,e,arguments.length>1?arguments[1]:void 0)}})});var A2=S(()=>{"use strict";var t2e=W(),r2e=jr().find,i2e=Pa(),o2e=xi(),jv="find",V8=!0,n2e=o2e(jv);jv in[]&&Array(1)[jv](function(){V8=!1});t2e({target:"Array",proto:!0,forced:V8||!n2e},{find:function(e){return r2e(this,e,arguments.length>1?arguments[1]:void 0)}});i2e(jv)});var K8=S(()=>{"use strict";var s2e=W(),a2e=jr().findIndex,l2e=Pa(),c2e=xi(),Wv="findIndex",$8=!0,u2e=c2e(Wv);Wv in[]&&Array(1)[Wv](function(){$8=!1});s2e({target:"Array",proto:!0,forced:$8||!u2e},{findIndex:function(e){return a2e(this,e,arguments.length>1?arguments[1]:void 0)}});l2e(Wv)});var P2=S((Xet,Y8)=>{"use strict";var d2e=rc(),p2e=It(),m2e=_s(),X8=function(r,e,t,i,o,n,s,a){for(var l=o,c=0,u=s?m2e(s,a,3):!1,d;c<i;){if(c in t){if(d=u?u(t[c],c,e):t[c],n>0&&d2e(d))l=X8(r,e,d,p2e(d.length),l,n-1)-1;else{if(l>=9007199254740991)throw TypeError("Exceed the acceptable array length");r[l]=d}l++}c++}return l};Y8.exports=X8});var J8=S(()=>{"use strict";var h2e=W(),f2e=P2(),g2e=ir(),b2e=It(),y2e=xo(),_2e=nm();h2e({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=g2e(this),i=b2e(t.length),o=_2e(t,0);return o.length=f2e(o,t,t,i,0,e===void 0?1:y2e(e)),o}})});var Z8=S(()=>{"use strict";var v2e=W(),x2e=P2(),C2e=ir(),S2e=It(),w2e=vi(),T2e=nm();v2e({target:"Array",proto:!0},{flatMap:function(e){var t=C2e(this),i=S2e(t.length),o;return w2e(e),o=T2e(t,0),o.length=x2e(o,t,t,i,0,1,e,arguments.length>1?arguments[1]:void 0),o}})});var M2=S((ett,Q8)=>{"use strict";var k2e=jr().forEach,E2e=vs(),I2e=xi(),D2e=E2e("forEach"),O2e=I2e("forEach");Q8.exports=!D2e||!O2e?function(e){return k2e(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach});var t6=S(()=>{"use strict";var R2e=W(),e6=M2();R2e({target:"Array",proto:!0,forced:[].forEach!=e6},{forEach:e6})});var r6=S(()=>{"use strict";var F2e=W(),A2e=im().includes,P2e=Pa(),M2e=xi(),B2e=M2e("indexOf",{ACCESSORS:!0,1:0});F2e({target:"Array",proto:!0,forced:!B2e},{includes:function(e){return A2e(this,e,arguments.length>1?arguments[1]:void 0)}});P2e("includes")});var n6=S(()=>{"use strict";var L2e=W(),z2e=im().indexOf,U2e=vs(),N2e=xi(),i6=[].indexOf,o6=!!i6&&1/[1].indexOf(1,-0)<0,q2e=U2e("indexOf"),H2e=N2e("indexOf",{ACCESSORS:!0,1:0});L2e({target:"Array",proto:!0,forced:o6||!q2e||!H2e},{indexOf:function(e){return o6?i6.apply(this,arguments)||0:z2e(this,e,arguments.length>1?arguments[1]:void 0)}})});var s6=S(()=>{"use strict";var j2e=W(),W2e=Qp(),G2e=ji(),V2e=vs(),$2e=[].join,K2e=W2e!=Object,X2e=V2e("join",",");j2e({target:"Array",proto:!0,forced:K2e||!X2e},{join:function(e){return $2e.call(G2e(this),e===void 0?",":e)}})});var L2=S((ctt,l6)=>{"use strict";var Y2e=ji(),J2e=xo(),Z2e=It(),Q2e=vs(),eEe=xi(),tEe=Math.min,B2=[].lastIndexOf,a6=!!B2&&1/[1].lastIndexOf(1,-0)<0,rEe=Q2e("lastIndexOf"),iEe=eEe("indexOf",{ACCESSORS:!0,1:0}),oEe=a6||!rEe||!iEe;l6.exports=oEe?function(e){if(a6)return B2.apply(this,arguments)||0;var t=Y2e(this),i=Z2e(t.length),o=i-1;for(arguments.length>1&&(o=tEe(o,J2e(arguments[1]))),o<0&&(o=i+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:B2});var u6=S(()=>{var nEe=W(),c6=L2();nEe({target:"Array",proto:!0,forced:c6!==[].lastIndexOf},{lastIndexOf:c6})});var z2=S(()=>{"use strict";var sEe=W(),aEe=jr().map,lEe=sm(),cEe=xi(),uEe=lEe("map"),dEe=cEe("map");sEe({target:"Array",proto:!0,forced:!uEe||!dEe},{map:function(e){return aEe(this,e,arguments.length>1?arguments[1]:void 0)}})});var sg=S((htt,p6)=>{var pEe=vi(),mEe=ir(),hEe=Qp(),fEe=It(),d6=function(r){return function(e,t,i,o){pEe(t);var n=mEe(e),s=hEe(n),a=fEe(n.length),l=r?a-1:0,c=r?-1:1;if(i<2)for(;;){if(l in s){o=s[l],l+=c;break}if(l+=c,r?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;r?l>=0:a>l;l+=c)l in s&&(o=t(o,s[l],l,n));return o}};p6.exports={left:d6(!1),right:d6(!0)}});var m6=S(()=>{"use strict";var gEe=W(),bEe=sg().left,yEe=vs(),_Ee=xi(),vEe=yEe("reduce"),xEe=_Ee("reduce",{1:0});gEe({target:"Array",proto:!0,forced:!vEe||!xEe},{reduce:function(e){return bEe(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var h6=S(()=>{"use strict";var CEe=W(),SEe=sg().right,wEe=vs(),TEe=xi(),kEe=wEe("reduceRight"),EEe=TEe("reduce",{1:0});CEe({target:"Array",proto:!0,forced:!kEe||!EEe},{reduceRight:function(e){return SEe(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var g6=S(()=>{"use strict";var IEe=W(),DEe=rc(),OEe=[].reverse,f6=[1,2];IEe({target:"Array",proto:!0,forced:String(f6)===String(f6.reverse())},{reverse:function(){return DEe(this)&&(this.length=this.length),OEe.call(this)}})});var _6=S(()=>{"use strict";var REe=W(),FEe=ct(),b6=rc(),y6=Da(),AEe=It(),PEe=ji(),MEe=ic(),BEe=kt(),LEe=sm(),zEe=xi(),UEe=LEe("slice"),NEe=zEe("slice",{ACCESSORS:!0,0:0,1:2}),qEe=BEe("species"),HEe=[].slice,jEe=Math.max;REe({target:"Array",proto:!0,forced:!UEe||!NEe},{slice:function(e,t){var i=PEe(this),o=AEe(i.length),n=y6(e,o),s=y6(t===void 0?o:t,o),a,l,c;if(b6(i)&&(a=i.constructor,typeof a=="function"&&(a===Array||b6(a.prototype))?a=void 0:FEe(a)&&(a=a[qEe],a===null&&(a=void 0)),a===Array||a===void 0))return HEe.call(i,n,s);for(l=new(a===void 0?Array:a)(jEe(s-n,0)),c=0;n<s;n++,c++)n in i&&MEe(l,c,i[n]);return l.length=c,l}})});var v6=S(()=>{"use strict";var WEe=W(),GEe=jr().some,VEe=vs(),$Ee=xi(),KEe=VEe("some"),XEe=$Ee("some");WEe({target:"Array",proto:!0,forced:!KEe||!XEe},{some:function(e){return GEe(this,e,arguments.length>1?arguments[1]:void 0)}})});var w6=S(()=>{"use strict";var YEe=W(),JEe=vi(),x6=ir(),C6=Re(),ZEe=vs(),U2=[],S6=U2.sort,QEe=C6(function(){U2.sort(void 0)}),eIe=C6(function(){U2.sort(null)}),tIe=ZEe("sort"),rIe=QEe||!eIe||!tIe;YEe({target:"Array",proto:!0,forced:rIe},{sort:function(e){return e===void 0?S6.call(x6(this)):S6.call(x6(this),JEe(e))}})});var T6=S(()=>{"use strict";var iIe=W(),oIe=Da(),nIe=xo(),sIe=It(),aIe=ir(),lIe=nm(),cIe=ic(),uIe=sm(),dIe=xi(),pIe=uIe("splice"),mIe=dIe("splice",{ACCESSORS:!0,0:0,1:2}),hIe=Math.max,fIe=Math.min,gIe=9007199254740991,bIe="Maximum allowed length exceeded";iIe({target:"Array",proto:!0,forced:!pIe||!mIe},{splice:function(e,t){var i=aIe(this),o=sIe(i.length),n=oIe(e,o),s=arguments.length,a,l,c,u,d,p;if(s===0?a=l=0:s===1?(a=0,l=o-n):(a=s-2,l=fIe(hIe(nIe(t),0),o-n)),o+a-l>gIe)throw TypeError(bIe);for(c=lIe(i,l),u=0;u<l;u++)d=n+u,d in i&&cIe(c,u,i[d]);if(c.length=l,a<l){for(u=n;u<o-l;u++)d=u+l,p=u+a,d in i?i[p]=i[d]:delete i[p];for(u=o;u>o-l+a;u--)delete i[u-1]}else if(a>l)for(u=o-l;u>n;u--)d=u+l-1,p=u+a-1,d in i?i[p]=i[d]:delete i[p];for(u=0;u<a;u++)i[u+n]=arguments[u+2];return i.length=o-l+a,c}})});var qu=S((Dtt,E6)=>{"use strict";var yIe=vo(),_Ie=zt(),vIe=kt(),xIe=bt(),k6=vIe("species");E6.exports=function(r){var e=yIe(r),t=_Ie.f;xIe&&e&&!e[k6]&&t(e,k6,{configurable:!0,get:function(){return this}})}});var I6=S(()=>{var CIe=qu();CIe("Array")});var D6=S(()=>{var SIe=Pa();SIe("flat")});var O6=S(()=>{var wIe=Pa();wIe("flatMap")});var ag=S((Btt,P6)=>{"use strict";var TIe=ji(),N2=Pa(),R6=mm(),F6=di(),kIe=zv(),A6="Array Iterator",EIe=F6.set,IIe=F6.getterFor(A6);P6.exports=kIe(Array,"Array",function(r,e){EIe(this,{type:A6,target:TIe(r),index:0,kind:e})},function(){var r=IIe(this),e=r.target,t=r.kind,i=r.index++;return!e||i>=e.length?(r.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:i,done:!1}:t=="values"?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}},"values");R6.Arguments=R6.Array;N2("keys");N2("values");N2("entries")});var L6=S(()=>{var DIe=W(),OIe=Da(),M6=String.fromCharCode,B6=String.fromCodePoint,RIe=!!B6&&B6.length!=1;DIe({target:"String",stat:!0,forced:RIe},{fromCodePoint:function(e){for(var t=[],i=arguments.length,o=0,n;i>o;){if(n=+arguments[o++],OIe(n,1114111)!==n)throw RangeError(n+" is not a valid code point");t.push(n<65536?M6(n):M6(((n-=65536)>>10)+55296,n%1024+56320))}return t.join("")}})});var z6=S(()=>{var FIe=W(),AIe=ji(),PIe=It();FIe({target:"String",stat:!0},{raw:function(e){for(var t=AIe(e.raw),i=PIe(t.length),o=arguments.length,n=[],s=0;i>s;)n.push(String(t[s++])),s<o&&n.push(String(arguments[s]));return n.join("")}})});var U6=S(()=>{"use strict";var MIe=W(),BIe=tg().codeAt;MIe({target:"String",proto:!0},{codePointAt:function(e){return BIe(this,e)}})});var lg=S((jtt,N6)=>{var LIe=ct(),zIe=_o(),UIe=kt(),NIe=UIe("match");N6.exports=function(r){var e;return LIe(r)&&((e=r[NIe])!==void 0?!!e:zIe(r)=="RegExp")}});var Gv=S((Wtt,q6)=>{var qIe=lg();q6.exports=function(r){if(qIe(r))throw TypeError("The method doesn't accept regular expressions");return r}});var Vv=S((Gtt,H6)=>{var HIe=kt(),jIe=HIe("match");H6.exports=function(r){var e=/./;try{"/./"[r](e)}catch(t){try{return e[jIe]=!1,"/./"[r](e)}catch(i){}}return!1}});var V6=S(()=>{"use strict";var WIe=W(),GIe=Yr().f,j6=It(),VIe=Gv(),$Ie=ci(),KIe=Vv(),XIe=on(),W6="".endsWith,YIe=Math.min,G6=KIe("endsWith"),JIe=!XIe&&!G6&&!!function(){var r=GIe(String.prototype,"endsWith");return r&&!r.writable}();WIe({target:"String",proto:!0,forced:!JIe&&!G6},{endsWith:function(e){var t=String($Ie(this));VIe(e);var i=arguments.length>1?arguments[1]:void 0,o=j6(t.length),n=i===void 0?o:YIe(j6(i),o),s=String(e);return W6?W6.call(t,s,n):t.slice(n-s.length,n)===s}})});var $6=S(()=>{"use strict";var ZIe=W(),QIe=Gv(),eDe=ci(),tDe=Vv();ZIe({target:"String",proto:!0,forced:!tDe("includes")},{includes:function(e){return!!~String(eDe(this)).indexOf(QIe(e),arguments.length>1?arguments[1]:void 0)}})});var bm=S((Ytt,K6)=>{"use strict";var rDe=ht();K6.exports=function(){var r=rDe(this),e="";return r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.sticky&&(e+="y"),e}});var cg=S(q2=>{"use strict";var X6=Re();function Y6(r,e){return RegExp(r,e)}q2.UNSUPPORTED_Y=X6(function(){var r=Y6("a","y");return r.lastIndex=2,r.exec("abcd")!=null});q2.BROKEN_CARET=X6(function(){var r=Y6("^r","gy");return r.lastIndex=2,r.exec("str")!=null})});var ug=S((Ztt,eU)=>{"use strict";var iDe=bm(),J6=cg(),$v=RegExp.prototype.exec,oDe=String.prototype.replace,Z6=$v,H2=function(){var r=/a/,e=/b*/g;return $v.call(r,"a"),$v.call(e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),Q6=J6.UNSUPPORTED_Y||J6.BROKEN_CARET,j2=/()??/.exec("")[1]!==void 0,nDe=H2||j2||Q6;nDe&&(Z6=function(e){var t=this,i,o,n,s,a=Q6&&t.sticky,l=iDe.call(t),c=t.source,u=0,d=e;return a&&(l=l.replace("y",""),l.indexOf("g")===-1&&(l+="g"),d=String(e).slice(t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&e[t.lastIndex-1]!==`
`)&&(c="(?: "+c+")",d=" "+d,u++),o=new RegExp("^(?:"+c+")",l)),j2&&(o=new RegExp("^"+c+"$(?!\\s)",l)),H2&&(i=t.lastIndex),n=$v.call(a?o:t,d),a?n?(n.input=n.input.slice(u),n[0]=n[0].slice(u),n.index=t.lastIndex,t.lastIndex+=n[0].length):t.lastIndex=0:H2&&n&&(t.lastIndex=t.global?n.index+n[0].length:i),j2&&n&&n.length>1&&oDe.call(n[0],o,function(){for(s=1;s<arguments.length-2;s++)arguments[s]===void 0&&(n[s]=void 0)}),n});eU.exports=Z6});var Kv=S(()=>{"use strict";var sDe=W(),tU=ug();sDe({target:"RegExp",proto:!0,forced:/./.exec!==tU},{exec:tU})});var dg=S((trt,sU)=>{"use strict";Kv();var rU=Jr(),Xv=Re(),W2=kt(),aDe=ug(),lDe=ui(),cDe=W2("species"),uDe=!Xv(function(){var r=/./;return r.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(r,"$<a>")!=="7"}),iU=function(){return"a".replace(/./,"$0")==="$0"}(),oU=W2("replace"),nU=function(){return/./[oU]?/./[oU]("a","$0")==="":!1}(),dDe=!Xv(function(){var r=/(?:)/,e=r.exec;r.exec=function(){return e.apply(this,arguments)};var t="ab".split(r);return t.length!==2||t[0]!=="a"||t[1]!=="b"});sU.exports=function(r,e,t,i){var o=W2(r),n=!Xv(function(){var d={};return d[o]=function(){return 7},""[r](d)!=7}),s=n&&!Xv(function(){var d=!1,p=/a/;return r==="split"&&(p={},p.constructor={},p.constructor[cDe]=function(){return p},p.flags="",p[o]=/./[o]),p.exec=function(){return d=!0,null},p[o](""),!d});if(!n||!s||r==="replace"&&!(uDe&&iU&&!nU)||r==="split"&&!dDe){var a=/./[o],l=t(o,""[r],function(d,p,h,f,_){return p.exec===aDe?n&&!_?{done:!0,value:a.call(p,h,f)}:{done:!0,value:d.call(h,p,f)}:{done:!1}},{REPLACE_KEEPS_$0:iU,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:nU}),c=l[0],u=l[1];rU(String.prototype,r,c),rU(RegExp.prototype,o,e==2?function(d,p){return u.call(d,this,p)}:function(d){return u.call(d,this)})}i&&lDe(RegExp.prototype[o],"sham",!0)}});var pg=S((rrt,aU)=>{"use strict";var pDe=tg().charAt;aU.exports=function(r,e,t){return e+(t?pDe(r,e).length:1)}});var mg=S((irt,lU)=>{var mDe=_o(),hDe=ug();lU.exports=function(r,e){var t=r.exec;if(typeof t=="function"){var i=t.call(r,e);if(typeof i!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return i}if(mDe(r)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return hDe.call(r,e)}});var uU=S(()=>{"use strict";var fDe=dg(),gDe=ht(),bDe=It(),yDe=ci(),_De=pg(),cU=mg();fDe("match",1,function(r,e,t){return[function(o){var n=yDe(this),s=o==null?void 0:o[r];return s!==void 0?s.call(o,n):new RegExp(o)[r](String(n))},function(i){var o=t(e,i,this);if(o.done)return o.value;var n=gDe(i),s=String(this);if(!n.global)return cU(n,s);var a=n.unicode;n.lastIndex=0;for(var l=[],c=0,u;(u=cU(n,s))!==null;){var d=String(u[0]);l[c]=d,d===""&&(n.lastIndex=_De(s,bDe(n.lastIndex),a)),c++}return c===0?null:l}]})});var xs=S((srt,pU)=>{var dU=ht(),vDe=vi(),xDe=kt(),CDe=xDe("species");pU.exports=function(r,e){var t=dU(r).constructor,i;return t===void 0||(i=dU(t)[CDe])==null?e:vDe(i)}});var _U=S(()=>{"use strict";var SDe=W(),wDe=Mv(),mU=ci(),hU=It(),TDe=vi(),kDe=ht(),EDe=_o(),IDe=lg(),fU=bm(),DDe=ui(),ODe=Re(),RDe=kt(),FDe=xs(),ADe=pg(),gU=di(),G2=on(),Yv=RDe("matchAll"),bU="RegExp String",yU=bU+" Iterator",PDe=gU.set,MDe=gU.getterFor(yU),hg=RegExp.prototype,BDe=hg.exec,V2="".matchAll,$2=!!V2&&!ODe(function(){"a".matchAll(/./)}),LDe=function(r,e){var t=r.exec,i;if(typeof t=="function"){if(i=t.call(r,e),typeof i!="object")throw TypeError("Incorrect exec result");return i}return BDe.call(r,e)},zDe=wDe(function(e,t,i,o){PDe(this,{type:yU,regexp:e,string:t,global:i,unicode:o,done:!1})},bU,function(){var e=MDe(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,i=e.string,o=LDe(t,i);return o===null?{value:void 0,done:e.done=!0}:e.global?(String(o[0])==""&&(t.lastIndex=ADe(i,hU(t.lastIndex),e.unicode)),{value:o,done:!1}):(e.done=!0,{value:o,done:!1})}),K2=function(r){var e=kDe(this),t=String(r),i,o,n,s,a,l;return i=FDe(e,RegExp),o=e.flags,o===void 0&&e instanceof RegExp&&!("flags"in hg)&&(o=fU.call(e)),n=o===void 0?"":String(o),s=new i(i===RegExp?e.source:e,n),a=!!~n.indexOf("g"),l=!!~n.indexOf("u"),s.lastIndex=hU(e.lastIndex),new zDe(s,t,a,l)};SDe({target:"String",proto:!0,forced:$2},{matchAll:function(e){var t=mU(this),i,o,n,s;if(e!=null){if(IDe(e)&&(i=String(mU("flags"in hg?e.flags:fU.call(e))),!~i.indexOf("g")))throw TypeError("`.matchAll` does not allow non-global regexes");if($2)return V2.apply(t,arguments);if(n=e[Yv],n===void 0&&G2&&EDe(e)=="RegExp"&&(n=K2),n!=null)return TDe(n).call(e,t)}else if($2)return V2.apply(t,arguments);return o=String(t),s=new RegExp(e,"g"),G2?K2.call(s,o):s[Yv](o)}});G2||Yv in hg||DDe(hg,Yv,K2)});var Jv=S((crt,vU)=>{"use strict";var UDe=xo(),NDe=ci();vU.exports="".repeat||function(e){var t=String(NDe(this)),i="",o=UDe(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))o&1&&(i+=t);return i}});var Zv=S((urt,CU)=>{var qDe=It(),HDe=Jv(),jDe=ci(),WDe=Math.ceil,xU=function(r){return function(e,t,i){var o=String(jDe(e)),n=o.length,s=i===void 0?" ":String(i),a=qDe(t),l,c;return a<=n||s==""?o:(l=a-n,c=HDe.call(s,WDe(l/s.length)),c.length>l&&(c=c.slice(0,l)),r?o+c:c+o)}};CU.exports={start:xU(!1),end:xU(!0)}});var X2=S((drt,SU)=>{var GDe=Yf();SU.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(GDe)});var wU=S(()=>{"use strict";var VDe=W(),$De=Zv().end,KDe=X2();VDe({target:"String",proto:!0,forced:KDe},{padEnd:function(e){return $De(this,e,arguments.length>1?arguments[1]:void 0)}})});var TU=S(()=>{"use strict";var XDe=W(),YDe=Zv().start,JDe=X2();XDe({target:"String",proto:!0,forced:JDe},{padStart:function(e){return YDe(this,e,arguments.length>1?arguments[1]:void 0)}})});var kU=S(()=>{var ZDe=W(),QDe=Jv();ZDe({target:"String",proto:!0},{repeat:QDe})});var EU=S(()=>{"use strict";var eOe=dg(),tOe=ht(),rOe=ir(),iOe=It(),oOe=xo(),nOe=ci(),sOe=pg(),aOe=mg(),lOe=Math.max,cOe=Math.min,uOe=Math.floor,dOe=/\$([$&'`]|\d\d?|<[^>]*>)/g,pOe=/\$([$&'`]|\d\d?)/g,mOe=function(r){return r===void 0?r:String(r)};eOe("replace",2,function(r,e,t,i){var o=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,n=i.REPLACE_KEEPS_$0,s=o?"$":"$0";return[function(c,u){var d=nOe(this),p=c==null?void 0:c[r];return p!==void 0?p.call(c,d,u):e.call(String(d),c,u)},function(l,c){if(!o&&n||typeof c=="string"&&c.indexOf(s)===-1){var u=t(e,l,this,c);if(u.done)return u.value}var d=tOe(l),p=String(this),h=typeof c=="function";h||(c=String(c));var f=d.global;if(f){var _=d.unicode;d.lastIndex=0}for(var x=[];;){var y=aOe(d,p);if(y===null||(x.push(y),!f))break;var D=String(y[0]);D===""&&(d.lastIndex=sOe(p,iOe(d.lastIndex),_))}for(var E="",F=0,N=0;N<x.length;N++){y=x[N];for(var R=String(y[0]),B=lOe(cOe(oOe(y.index),p.length),0),se=[],A=1;A<y.length;A++)se.push(mOe(y[A]));var q=y.groups;if(h){var ue=[R].concat(se,B,p);q!==void 0&&ue.push(q);var _e=String(c.apply(void 0,ue))}else _e=a(R,p,B,se,q,c);B>=F&&(E+=p.slice(F,B)+_e,F=B+R.length)}return E+p.slice(F)}];function a(l,c,u,d,p,h){var f=u+l.length,_=d.length,x=pOe;return p!==void 0&&(p=rOe(p),x=dOe),e.call(h,x,function(y,D){var E;switch(D.charAt(0)){case"$":return"$";case"&":return l;case"`":return c.slice(0,u);case"'":return c.slice(f);case"<":E=p[D.slice(1,-1)];break;default:var F=+D;if(F===0)return y;if(F>_){var N=uOe(F/10);return N===0?y:N<=_?d[N-1]===void 0?D.charAt(1):d[N-1]+D.charAt(1):y}E=d[F-1]}return E===void 0?"":E})}})});var DU=S(()=>{"use strict";var hOe=dg(),fOe=ht(),gOe=ci(),IU=_2(),bOe=mg();hOe("search",1,function(r,e,t){return[function(o){var n=gOe(this),s=o==null?void 0:o[r];return s!==void 0?s.call(o,n):new RegExp(o)[r](String(n))},function(i){var o=t(e,i,this);if(o.done)return o.value;var n=fOe(i),s=String(this),a=n.lastIndex;IU(a,0)||(n.lastIndex=0);var l=bOe(n,s);return IU(n.lastIndex,a)||(n.lastIndex=a),l===null?-1:l.index}]})});var FU=S(()=>{"use strict";var yOe=dg(),_Oe=lg(),vOe=ht(),OU=ci(),xOe=xs(),COe=pg(),SOe=It(),RU=mg(),wOe=ug(),TOe=Re(),kOe=[].push,EOe=Math.min,Y2=4294967295,ym=!TOe(function(){return!RegExp(Y2,"y")});yOe("split",2,function(r,e,t){var i;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?i=function(o,n){var s=String(OU(this)),a=n===void 0?Y2:n>>>0;if(a===0)return[];if(o===void 0)return[s];if(!_Oe(o))return e.call(s,o,a);for(var l=[],c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(o.sticky?"y":""),u=0,d=new RegExp(o.source,c+"g"),p,h,f;(p=wOe.call(d,s))&&(h=d.lastIndex,!(h>u&&(l.push(s.slice(u,p.index)),p.length>1&&p.index<s.length&&kOe.apply(l,p.slice(1)),f=p[0].length,u=h,l.length>=a)));)d.lastIndex===p.index&&d.lastIndex++;return u===s.length?(f||!d.test(""))&&l.push(""):l.push(s.slice(u)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?i=function(o,n){return o===void 0&&n===0?[]:e.call(this,o,n)}:i=e,[function(n,s){var a=OU(this),l=n==null?void 0:n[r];return l!==void 0?l.call(n,a,s):i.call(String(a),n,s)},function(o,n){var s=t(i,o,this,n,i!==e);if(s.done)return s.value;var a=vOe(o),l=String(this),c=xOe(a,RegExp),u=a.unicode,d=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(ym?"y":"g"),p=new c(ym?a:"^(?:"+a.source+")",d),h=n===void 0?Y2:n>>>0;if(h===0)return[];if(l.length===0)return RU(p,l)===null?[l]:[];for(var f=0,_=0,x=[];_<l.length;){p.lastIndex=ym?_:0;var y=RU(p,ym?l:l.slice(_)),D;if(y===null||(D=EOe(SOe(p.lastIndex+(ym?0:_)),l.length))===f)_=COe(l,_,u);else{if(x.push(l.slice(f,_)),x.length===h)return x;for(var E=1;E<=y.length-1;E++)if(x.push(y[E]),x.length===h)return x;_=f=D}}return x.push(l.slice(f)),x}]},!ym)});var MU=S(()=>{"use strict";var IOe=W(),DOe=Yr().f,OOe=It(),ROe=Gv(),FOe=ci(),AOe=Vv(),POe=on(),AU="".startsWith,MOe=Math.min,PU=AOe("startsWith"),BOe=!POe&&!PU&&!!function(){var r=DOe(String.prototype,"startsWith");return r&&!r.writable}();IOe({target:"String",proto:!0,forced:!BOe&&!PU},{startsWith:function(e){var t=String(FOe(this));ROe(e);var i=OOe(MOe(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return AU?AU.call(t,o,i):t.slice(i,i+o.length)===o}})});var fg=S((krt,BU)=>{BU.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Hu=S((Ert,LU)=>{var LOe=ci(),zOe=fg(),Qv="["+zOe+"]",UOe=RegExp("^"+Qv+Qv+"*"),NOe=RegExp(Qv+Qv+"*$"),J2=function(r){return function(e){var t=String(LOe(e));return r&1&&(t=t.replace(UOe,"")),r&2&&(t=t.replace(NOe,"")),t}};LU.exports={start:J2(1),end:J2(2),trim:J2(3)}});var ex=S((Irt,NU)=>{var qOe=Re(),zU=fg(),UU="\u200B\x85\u180E";NU.exports=function(r){return qOe(function(){return!!zU[r]()||UU[r]()!=UU||zU[r].name!==r})}});var qU=S(()=>{"use strict";var HOe=W(),jOe=Hu().trim,WOe=ex();HOe({target:"String",proto:!0,forced:WOe("trim")},{trim:function(){return jOe(this)}})});var WU=S(()=>{"use strict";var GOe=W(),VOe=Hu().start,$Oe=ex(),HU=$Oe("trimStart"),jU=HU?function(){return VOe(this)}:"".trimStart;GOe({target:"String",proto:!0,forced:HU},{trimStart:jU,trimLeft:jU})});var $U=S(()=>{"use strict";var KOe=W(),XOe=Hu().end,YOe=ex(),GU=YOe("trimEnd"),VU=GU?function(){return XOe(this)}:"".trimEnd;KOe({target:"String",proto:!0,forced:GU},{trimEnd:VU,trimRight:VU})});var Vi=S((Mrt,KU)=>{var JOe=ci(),ZOe=/"/g;KU.exports=function(r,e,t,i){var o=String(JOe(r)),n="<"+e;return t!==""&&(n+=" "+t+'="'+String(i).replace(ZOe,"&quot;")+'"'),n+">"+o+"</"+e+">"}});var $i=S((Brt,XU)=>{var QOe=Re();XU.exports=function(r){return QOe(function(){var e=""[r]('"');return e!==e.toLowerCase()||e.split('"').length>3})}});var YU=S(()=>{"use strict";var eRe=W(),tRe=Vi(),rRe=$i();eRe({target:"String",proto:!0,forced:rRe("anchor")},{anchor:function(e){return tRe(this,"a","name",e)}})});var JU=S(()=>{"use strict";var iRe=W(),oRe=Vi(),nRe=$i();iRe({target:"String",proto:!0,forced:nRe("big")},{big:function(){return oRe(this,"big","","")}})});var ZU=S(()=>{"use strict";var sRe=W(),aRe=Vi(),lRe=$i();sRe({target:"String",proto:!0,forced:lRe("blink")},{blink:function(){return aRe(this,"blink","","")}})});var QU=S(()=>{"use strict";var cRe=W(),uRe=Vi(),dRe=$i();cRe({target:"String",proto:!0,forced:dRe("bold")},{bold:function(){return uRe(this,"b","","")}})});var e9=S(()=>{"use strict";var pRe=W(),mRe=Vi(),hRe=$i();pRe({target:"String",proto:!0,forced:hRe("fixed")},{fixed:function(){return mRe(this,"tt","","")}})});var t9=S(()=>{"use strict";var fRe=W(),gRe=Vi(),bRe=$i();fRe({target:"String",proto:!0,forced:bRe("fontcolor")},{fontcolor:function(e){return gRe(this,"font","color",e)}})});var r9=S(()=>{"use strict";var yRe=W(),_Re=Vi(),vRe=$i();yRe({target:"String",proto:!0,forced:vRe("fontsize")},{fontsize:function(e){return _Re(this,"font","size",e)}})});var i9=S(()=>{"use strict";var xRe=W(),CRe=Vi(),SRe=$i();xRe({target:"String",proto:!0,forced:SRe("italics")},{italics:function(){return CRe(this,"i","","")}})});var o9=S(()=>{"use strict";var wRe=W(),TRe=Vi(),kRe=$i();wRe({target:"String",proto:!0,forced:kRe("link")},{link:function(e){return TRe(this,"a","href",e)}})});var n9=S(()=>{"use strict";var ERe=W(),IRe=Vi(),DRe=$i();ERe({target:"String",proto:!0,forced:DRe("small")},{small:function(){return IRe(this,"small","","")}})});var s9=S(()=>{"use strict";var ORe=W(),RRe=Vi(),FRe=$i();ORe({target:"String",proto:!0,forced:FRe("strike")},{strike:function(){return RRe(this,"strike","","")}})});var a9=S(()=>{"use strict";var ARe=W(),PRe=Vi(),MRe=$i();ARe({target:"String",proto:!0,forced:MRe("sub")},{sub:function(){return PRe(this,"sub","","")}})});var l9=S(()=>{"use strict";var BRe=W(),LRe=Vi(),zRe=$i();BRe({target:"String",proto:!0,forced:zRe("sup")},{sup:function(){return LRe(this,"sup","","")}})});var gg=S((cit,u9)=>{var URe=ct(),c9=nc();u9.exports=function(r,e,t){var i,o;return c9&&typeof(i=e.constructor)=="function"&&i!==t&&URe(o=i.prototype)&&o!==t.prototype&&c9(r,o),r}});var m9=S(()=>{var NRe=bt(),d9=Xe(),qRe=om(),HRe=gg(),jRe=zt().f,WRe=tc().f,GRe=lg(),VRe=bm(),$Re=cg(),KRe=Jr(),XRe=Re(),YRe=di().set,JRe=qu(),ZRe=kt(),QRe=ZRe("match"),Cs=d9.RegExp,Z2=Cs.prototype,bg=/a/g,Q2=/a/g,eE=new Cs(bg)!==bg,tE=$Re.UNSUPPORTED_Y,eFe=NRe&&qRe("RegExp",!eE||tE||XRe(function(){return Q2[QRe]=!1,Cs(bg)!=bg||Cs(Q2)==Q2||Cs(bg,"i")!="/a/i"}));if(eFe){for(Ss=function(e,t){var i=this instanceof Ss,o=GRe(e),n=t===void 0,s;if(!i&&o&&e.constructor===Ss&&n)return e;eE?o&&!n&&(e=e.source):e instanceof Ss&&(n&&(t=VRe.call(e)),e=e.source),tE&&(s=!!t&&t.indexOf("y")>-1,s&&(t=t.replace(/y/g,"")));var a=HRe(eE?new Cs(e,t):Cs(e,t),i?this:Z2,Ss);return tE&&s&&YRe(a,{sticky:s}),a},p9=function(r){r in Ss||jRe(Ss,r,{configurable:!0,get:function(){return Cs[r]},set:function(e){Cs[r]=e}})},rE=WRe(Cs),iE=0;rE.length>iE;)p9(rE[iE++]);Z2.constructor=Ss,Ss.prototype=Z2,KRe(d9,"RegExp",Ss)}var Ss,p9,rE,iE;JRe("RegExp")});var h9=S(()=>{var tFe=bt(),rFe=zt(),iFe=bm(),oFe=cg().UNSUPPORTED_Y;tFe&&(/./g.flags!="g"||oFe)&&rFe.f(RegExp.prototype,"flags",{configurable:!0,get:iFe})});var f9=S(()=>{var nFe=bt(),sFe=cg().UNSUPPORTED_Y,aFe=zt().f,lFe=di().get,cFe=RegExp.prototype;nFe&&sFe&&aFe(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==cFe){if(this instanceof RegExp)return!!lFe(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})});var g9=S(()=>{"use strict";Kv();var uFe=W(),dFe=ct(),pFe=function(){var r=!1,e=/[ac]/;return e.exec=function(){return r=!0,/./.exec.apply(this,arguments)},e.test("abc")===!0&&r}(),mFe=/./.test;uFe({target:"RegExp",proto:!0,forced:!pFe},{test:function(r){if(typeof this.exec!="function")return mFe.call(this,r);var e=this.exec(r);if(e!==null&&!dFe(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}})});var _9=S(()=>{"use strict";var hFe=Jr(),fFe=ht(),gFe=Re(),bFe=bm(),oE="toString",b9=RegExp.prototype,y9=b9[oE],yFe=gFe(function(){return y9.call({source:"a",flags:"b"})!="/a/b"}),_Fe=y9.name!=oE;(yFe||_Fe)&&hFe(RegExp.prototype,oE,function(){var e=fFe(this),t=String(e.source),i=e.flags,o=String(i===void 0&&e instanceof RegExp&&!("flags"in b9)?bFe.call(e):i);return"/"+t+"/"+o},{unsafe:!0})});var nE=S((vit,x9)=>{var vFe=Xe(),xFe=Hu().trim,v9=fg(),tx=vFe.parseInt,CFe=/^[+-]?0[Xx]/,SFe=tx(v9+"08")!==8||tx(v9+"0x16")!==22;x9.exports=SFe?function(e,t){var i=xFe(String(e));return tx(i,t>>>0||(CFe.test(i)?16:10))}:tx});var S9=S(()=>{var wFe=W(),C9=nE();wFe({global:!0,forced:parseInt!=C9},{parseInt:C9})});var aE=S((Sit,w9)=>{var TFe=Xe(),kFe=Hu().trim,EFe=fg(),sE=TFe.parseFloat,IFe=1/sE(EFe+"-0")!=-1/0;w9.exports=IFe?function(e){var t=kFe(String(e)),i=sE(t);return i===0&&t.charAt(0)=="-"?-0:i}:sE});var k9=S(()=>{var DFe=W(),T9=aE();DFe({global:!0,forced:parseFloat!=T9},{parseFloat:T9})});var R9=S(()=>{"use strict";var OFe=bt(),E9=Xe(),RFe=om(),FFe=Jr(),I9=dr(),D9=_o(),AFe=gg(),PFe=rn(),MFe=Re(),BFe=ys(),LFe=tc().f,zFe=Yr().f,UFe=zt().f,NFe=Hu().trim,yg="Number",ac=E9[yg],rx=ac.prototype,qFe=D9(BFe(rx))==yg,O9=function(r){var e=PFe(r,!1),t,i,o,n,s,a,l,c;if(typeof e=="string"&&e.length>2){if(e=NFe(e),t=e.charCodeAt(0),t===43||t===45){if(i=e.charCodeAt(2),i===88||i===120)return NaN}else if(t===48){switch(e.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+e}for(s=e.slice(2),a=s.length,l=0;l<a;l++)if(c=s.charCodeAt(l),c<48||c>n)return NaN;return parseInt(s,o)}}return+e};if(RFe(yg,!ac(" 0o1")||!ac("0b1")||ac("+0x1"))){for(lc=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof lc&&(qFe?MFe(function(){rx.valueOf.call(i)}):D9(i)!=yg)?AFe(new ac(O9(t)),i,lc):O9(t)},lE=OFe?LFe(ac):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ix=0;lE.length>ix;ix++)I9(ac,_g=lE[ix])&&!I9(lc,_g)&&UFe(lc,_g,zFe(ac,_g));lc.prototype=rx,rx.constructor=lc,FFe(E9,yg,lc)}var lc,lE,ix,_g});var F9=S(()=>{var HFe=W();HFe({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})});var P9=S((Oit,A9)=>{var jFe=Xe(),WFe=jFe.isFinite;A9.exports=Number.isFinite||function(e){return typeof e=="number"&&WFe(e)}});var M9=S(()=>{var GFe=W(),VFe=P9();GFe({target:"Number",stat:!0},{isFinite:VFe})});var cE=S((Ait,B9)=>{var $Fe=ct(),KFe=Math.floor;B9.exports=function(e){return!$Fe(e)&&isFinite(e)&&KFe(e)===e}});var L9=S(()=>{var XFe=W(),YFe=cE();XFe({target:"Number",stat:!0},{isInteger:YFe})});var z9=S(()=>{var JFe=W();JFe({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})});var U9=S(()=>{var ZFe=W(),QFe=cE(),eAe=Math.abs;ZFe({target:"Number",stat:!0},{isSafeInteger:function(e){return QFe(e)&&eAe(e)<=9007199254740991}})});var N9=S(()=>{var tAe=W();tAe({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})});var q9=S(()=>{var rAe=W();rAe({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var j9=S(()=>{var iAe=W(),H9=aE();iAe({target:"Number",stat:!0,forced:Number.parseFloat!=H9},{parseFloat:H9})});var G9=S(()=>{var oAe=W(),W9=nE();oAe({target:"Number",stat:!0,forced:Number.parseInt!=W9},{parseInt:W9})});var uE=S((Kit,V9)=>{var nAe=_o();V9.exports=function(r){if(typeof r!="number"&&nAe(r)!="Number")throw TypeError("Incorrect invocation");return+r}});var X9=S(()=>{"use strict";var sAe=W(),aAe=xo(),lAe=uE(),dE=Jv(),cAe=Re(),$9=1 .toFixed,K9=Math.floor,_m=function(r,e,t){return e===0?t:e%2==1?_m(r,e-1,t*r):_m(r*r,e/2,t)},uAe=function(r){for(var e=0,t=r;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e},dAe=$9&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!cAe(function(){$9.call({})});sAe({target:"Number",proto:!0,forced:dAe},{toFixed:function(e){var t=lAe(this),i=aAe(e),o=[0,0,0,0,0,0],n="",s="0",a,l,c,u,d=function(f,_){for(var x=-1,y=_;++x<6;)y+=f*o[x],o[x]=y%1e7,y=K9(y/1e7)},p=function(f){for(var _=6,x=0;--_>=0;)x+=o[_],o[_]=K9(x/f),x=x%f*1e7},h=function(){for(var f=6,_="";--f>=0;)if(_!==""||f===0||o[f]!==0){var x=String(o[f]);_=_===""?x:_+dE.call("0",7-x.length)+x}return _};if(i<0||i>20)throw RangeError("Incorrect fraction digits");if(t!=t)return"NaN";if(t<=-1e21||t>=1e21)return String(t);if(t<0&&(n="-",t=-t),t>1e-21)if(a=uAe(t*_m(2,69,1))-69,l=a<0?t*_m(2,-a,1):t/_m(2,a,1),l*=4503599627370496,a=52-a,a>0){for(d(0,l),c=i;c>=7;)d(1e7,0),c-=7;for(d(_m(10,c,1),0),c=a-1;c>=23;)p(1<<23),c-=23;p(1<<c),d(1,1),p(2),s=h()}else d(0,l),d(1<<-a,0),s=h()+dE.call("0",i);return i>0?(u=s.length,s=n+(u<=i?"0."+dE.call("0",i-u)+s:s.slice(0,u-i)+"."+s.slice(u-i))):s=n+s,s}})});var Z9=S(()=>{"use strict";var pAe=W(),Y9=Re(),J9=uE(),ox=1 .toPrecision,mAe=Y9(function(){return ox.call(1,void 0)!=="1"})||!Y9(function(){ox.call({})});pAe({target:"Number",proto:!0,forced:mAe},{toPrecision:function(e){return e===void 0?ox.call(J9(this)):ox.call(J9(this),e)}})});var pE=S((Qit,Q9)=>{var hAe=Math.log;Q9.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:hAe(1+e)}});var tN=S(()=>{var fAe=W(),gAe=pE(),mE=Math.acosh,bAe=Math.log,eN=Math.sqrt,yAe=Math.LN2,_Ae=!mE||Math.floor(mE(Number.MAX_VALUE))!=710||mE(1/0)!=1/0;fAe({target:"Math",stat:!0,forced:_Ae},{acosh:function(e){return(e=+e)<1?NaN:e>9490626562425156e-8?bAe(e)+yAe:gAe(e-1+eN(e-1)*eN(e+1))}})});var oN=S(()=>{var vAe=W(),rN=Math.asinh,xAe=Math.log,CAe=Math.sqrt;function iN(r){return!isFinite(r=+r)||r==0?r:r<0?-iN(-r):xAe(r+CAe(r*r+1))}vAe({target:"Math",stat:!0,forced:!(rN&&1/rN(0)>0)},{asinh:iN})});var sN=S(()=>{var SAe=W(),nN=Math.atanh,wAe=Math.log;SAe({target:"Math",stat:!0,forced:!(nN&&1/nN(-0)<0)},{atanh:function(e){return(e=+e)==0?e:wAe((1+e)/(1-e))/2}})});var nx=S((sot,aN)=>{aN.exports=Math.sign||function(e){return(e=+e)==0||e!=e?e:e<0?-1:1}});var lN=S(()=>{var TAe=W(),kAe=nx(),EAe=Math.abs,IAe=Math.pow;TAe({target:"Math",stat:!0},{cbrt:function(e){return kAe(e=+e)*IAe(EAe(e),1/3)}})});var cN=S(()=>{var DAe=W(),OAe=Math.floor,RAe=Math.log,FAe=Math.LOG2E;DAe({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-OAe(RAe(e+.5)*FAe):32}})});var xg=S((dot,uN)=>{var vg=Math.expm1,AAe=Math.exp;uN.exports=!vg||vg(10)>22025.465794806718||vg(10)<22025.465794806718||vg(-2e-17)!=-2e-17?function(e){return(e=+e)==0?e:e>-1e-6&&e<1e-6?e+e*e/2:AAe(e)-1}:vg});var pN=S(()=>{var PAe=W(),MAe=xg(),dN=Math.cosh,BAe=Math.abs,hE=Math.E;PAe({target:"Math",stat:!0,forced:!dN||dN(710)===1/0},{cosh:function(e){var t=MAe(BAe(e)-1)+1;return(t+1/(t*hE*hE))*(hE/2)}})});var hN=S(()=>{var LAe=W(),mN=xg();LAe({target:"Math",stat:!0,forced:mN!=Math.expm1},{expm1:mN})});var gN=S((got,fN)=>{var zAe=nx(),UAe=Math.abs,sx=Math.pow,fE=sx(2,-52),ax=sx(2,-23),NAe=sx(2,127)*(2-ax),gE=sx(2,-126),qAe=function(r){return r+1/fE-1/fE};fN.exports=Math.fround||function(e){var t=UAe(e),i=zAe(e),o,n;return t<gE?i*qAe(t/gE/ax)*gE*ax:(o=(1+ax/fE)*t,n=o-(o-t),n>NAe||n!=n?i*(1/0):i*n)}});var bN=S(()=>{var HAe=W(),jAe=gN();HAe({target:"Math",stat:!0},{fround:jAe})});var _N=S(()=>{var WAe=W(),yN=Math.hypot,GAe=Math.abs,VAe=Math.sqrt,$Ae=!!yN&&yN(1/0,NaN)!==1/0;WAe({target:"Math",stat:!0,forced:$Ae},{hypot:function(e,t){for(var i=0,o=0,n=arguments.length,s=0,a,l;o<n;)a=GAe(arguments[o++]),s<a?(l=s/a,i=i*l*l+1,s=a):a>0?(l=a/s,i+=l*l):i+=a;return s===1/0?1/0:s*VAe(i)}})});var xN=S(()=>{var KAe=W(),XAe=Re(),vN=Math.imul,YAe=XAe(function(){return vN(4294967295,5)!=-5||vN.length!=2});KAe({target:"Math",stat:!0,forced:YAe},{imul:function(e,t){var i=65535,o=+e,n=+t,s=i&o,a=i&n;return 0|s*a+((i&o>>>16)*a+s*(i&n>>>16)<<16>>>0)}})});var CN=S(()=>{var JAe=W(),ZAe=Math.log,QAe=Math.LOG10E;JAe({target:"Math",stat:!0},{log10:function(e){return ZAe(e)*QAe}})});var SN=S(()=>{var ePe=W(),tPe=pE();ePe({target:"Math",stat:!0},{log1p:tPe})});var wN=S(()=>{var rPe=W(),iPe=Math.log,oPe=Math.LN2;rPe({target:"Math",stat:!0},{log2:function(e){return iPe(e)/oPe}})});var TN=S(()=>{var nPe=W(),sPe=nx();nPe({target:"Math",stat:!0},{sign:sPe})});var IN=S(()=>{var aPe=W(),lPe=Re(),kN=xg(),cPe=Math.abs,EN=Math.exp,uPe=Math.E,dPe=lPe(function(){return Math.sinh(-2e-17)!=-2e-17});aPe({target:"Math",stat:!0,forced:dPe},{sinh:function(e){return cPe(e=+e)<1?(kN(e)-kN(-e))/2:(EN(e-1)-EN(-e-1))*(uPe/2)}})});var RN=S(()=>{var pPe=W(),DN=xg(),ON=Math.exp;pPe({target:"Math",stat:!0},{tanh:function(e){var t=DN(e=+e),i=DN(-e);return t==1/0?1:i==1/0?-1:(t-i)/(ON(e)+ON(-e))}})});var FN=S(()=>{var mPe=W(),hPe=Math.ceil,fPe=Math.floor;mPe({target:"Math",stat:!0},{trunc:function(e){return(e>0?fPe:hPe)(e)}})});var AN=S(()=>{var gPe=W();gPe({target:"Date",stat:!0},{now:function(){return new Date().getTime()}})});var PN=S(()=>{"use strict";var bPe=W(),yPe=Re(),_Pe=ir(),vPe=rn(),xPe=yPe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});bPe({target:"Date",proto:!0,forced:xPe},{toJSON:function(e){var t=_Pe(this),i=vPe(t);return typeof i=="number"&&!isFinite(i)?null:t.toISOString()}})});var zN=S((qot,LN)=>{"use strict";var MN=Re(),ju=Zv().start,CPe=Math.abs,BN=Date.prototype,SPe=BN.getTime,bE=BN.toISOString;LN.exports=MN(function(){return bE.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!MN(function(){bE.call(new Date(NaN))})?function(){if(!isFinite(SPe.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),i=e.getUTCMilliseconds(),o=t<0?"-":t>9999?"+":"";return o+ju(CPe(t),o?6:4,0)+"-"+ju(e.getUTCMonth()+1,2,0)+"-"+ju(e.getUTCDate(),2,0)+"T"+ju(e.getUTCHours(),2,0)+":"+ju(e.getUTCMinutes(),2,0)+":"+ju(e.getUTCSeconds(),2,0)+"."+ju(i,3,0)+"Z"}:bE});var NN=S(()=>{var wPe=W(),UN=zN();wPe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==UN},{toISOString:UN})});var jN=S(()=>{var TPe=Jr(),yE=Date.prototype,qN="Invalid Date",HN="toString",kPe=yE[HN],EPe=yE.getTime;new Date(NaN)+""!=qN&&TPe(yE,HN,function(){var e=EPe.call(this);return e===e?kPe.call(this):qN})});var GN=S((Vot,WN)=>{"use strict";var IPe=ht(),DPe=rn();WN.exports=function(r){if(r!=="string"&&r!=="number"&&r!=="default")throw TypeError("Incorrect hint");return DPe(IPe(this),r!=="number")}});var KN=S(()=>{var OPe=ui(),RPe=GN(),FPe=kt(),VN=FPe("toPrimitive"),$N=Date.prototype;VN in $N||OPe($N,VN,RPe)});var JN=S(()=>{var APe=W(),PPe=vo(),MPe=Re(),lx=PPe("JSON","stringify"),BPe=/[\uD800-\uDFFF]/g,XN=/^[\uD800-\uDBFF]$/,YN=/^[\uDC00-\uDFFF]$/,LPe=function(r,e,t){var i=t.charAt(e-1),o=t.charAt(e+1);return XN.test(r)&&!YN.test(o)||YN.test(r)&&!XN.test(i)?"\\u"+r.charCodeAt(0).toString(16):r},zPe=MPe(function(){return lx("\uDF06\uD834")!=='"\\udf06\\ud834"'||lx("\uDEAD")!=='"\\udead"'});lx&&APe({target:"JSON",stat:!0,forced:zPe},{stringify:function(e,t,i){var o=lx.apply(null,arguments);return typeof o=="string"?o.replace(BPe,LPe):o}})});var _E=S((Jot,ZN)=>{var UPe=Xe();ZN.exports=UPe.Promise});var Wu=S((Zot,QN)=>{var NPe=Jr();QN.exports=function(r,e,t){for(var i in e)NPe(r,i,e[i],t);return r}});var Ma=S((Qot,e7)=>{e7.exports=function(r,e,t){if(!(r instanceof e))throw TypeError("Incorrect "+(t?t+" ":"")+"invocation");return r}});var vE=S((ent,t7)=>{var qPe=Yf();t7.exports=/(iphone|ipod|ipad).*applewebkit/i.test(qPe)});var cx=S((tnt,c7)=>{var ws=Xe(),HPe=Re(),jPe=_o(),WPe=_s(),r7=gk(),i7=pv(),GPe=vE(),xE=ws.location,CE=ws.setImmediate,SE=ws.clearImmediate,o7=ws.process,n7=ws.MessageChannel,wE=ws.Dispatch,TE=0,Cg={},s7="onreadystatechange",Gu,kE,EE,IE=function(r){if(Cg.hasOwnProperty(r)){var e=Cg[r];delete Cg[r],e()}},DE=function(r){return function(){IE(r)}},a7=function(r){IE(r.data)},l7=function(r){ws.postMessage(r+"",xE.protocol+"//"+xE.host)};(!CE||!SE)&&(CE=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return Cg[++TE]=function(){(typeof e=="function"?e:Function(e)).apply(void 0,t)},Gu(TE),TE},SE=function(e){delete Cg[e]},jPe(o7)=="process"?Gu=function(r){o7.nextTick(DE(r))}:wE&&wE.now?Gu=function(r){wE.now(DE(r))}:n7&&!GPe?(kE=new n7,EE=kE.port2,kE.port1.onmessage=a7,Gu=WPe(EE.postMessage,EE,1)):ws.addEventListener&&typeof postMessage=="function"&&!ws.importScripts&&!HPe(l7)&&xE.protocol!=="file:"?(Gu=l7,ws.addEventListener("message",a7,!1)):s7 in i7("script")?Gu=function(r){r7.appendChild(i7("script"))[s7]=function(){r7.removeChild(this),IE(r)}}:Gu=function(r){setTimeout(DE(r),0)});c7.exports={set:CE,clear:SE}});var ME=S((rnt,f7)=>{var vm=Xe(),VPe=Yr().f,$Pe=_o(),KPe=cx().set,XPe=vE(),u7=vm.MutationObserver||vm.WebKitMutationObserver,OE=vm.process,RE=vm.Promise,d7=$Pe(OE)=="process",p7=VPe(vm,"queueMicrotask"),m7=p7&&p7.value,Sg,Vu,wg,xm,FE,AE,PE,h7;m7||(Sg=function(){var r,e;for(d7&&(r=OE.domain)&&r.exit();Vu;){e=Vu.fn,Vu=Vu.next;try{e()}catch(t){throw Vu?xm():wg=void 0,t}}wg=void 0,r&&r.enter()},d7?xm=function(){OE.nextTick(Sg)}:u7&&!XPe?(FE=!0,AE=document.createTextNode(""),new u7(Sg).observe(AE,{characterData:!0}),xm=function(){AE.data=FE=!FE}):RE&&RE.resolve?(PE=RE.resolve(void 0),h7=PE.then,xm=function(){h7.call(PE,Sg)}):xm=function(){KPe.call(vm,Sg)});f7.exports=m7||function(r){var e={fn:r,next:void 0};wg&&(wg.next=e),Vu||(Vu=e,xm()),wg=e}});var ux=S((int,b7)=>{"use strict";var g7=vi(),YPe=function(r){var e,t;this.promise=new r(function(i,o){if(e!==void 0||t!==void 0)throw TypeError("Bad Promise constructor");e=i,t=o}),this.resolve=g7(e),this.reject=g7(t)};b7.exports.f=function(r){return new YPe(r)}});var BE=S((ont,y7)=>{var JPe=ht(),ZPe=ct(),QPe=ux();y7.exports=function(r,e){if(JPe(r),ZPe(e)&&e.constructor===r)return e;var t=QPe.f(r),i=t.resolve;return i(e),t.promise}});var v7=S((nnt,_7)=>{var eMe=Xe();_7.exports=function(r,e){var t=eMe.console;t&&t.error&&(arguments.length===1?t.error(r):t.error(r,e))}});var LE=S((snt,x7)=>{x7.exports=function(r){try{return{error:!1,value:r()}}catch(e){return{error:!0,value:e}}}});var q7=S(()=>{"use strict";var Tg=W(),dx=on(),Ba=Xe(),C7=vo(),px=_E(),tMe=Jr(),rMe=Wu(),iMe=An(),oMe=qu(),nMe=ct(),zE=vi(),sMe=Ma(),aMe=_o(),lMe=hv(),S7=Nu(),cMe=ig(),uMe=xs(),w7=cx().set,T7=ME(),k7=BE(),dMe=v7(),E7=ux(),UE=LE(),NE=di(),pMe=om(),mMe=kt(),I7=wv(),hMe=mMe("species"),Ts="Promise",D7=NE.get,fMe=NE.set,gMe=NE.getterFor(Ts),pi=px,O7=Ba.TypeError,qE=Ba.document,mx=Ba.process,R7=C7("fetch"),Cm=E7.f,bMe=Cm,kg=aMe(mx)=="process",yMe=!!(qE&&qE.createEvent&&Ba.dispatchEvent),F7="unhandledrejection",_Me="rejectionhandled",A7=0,P7=1,vMe=2,HE=1,M7=2,hx,B7,jE,L7,Eg=pMe(Ts,function(){var r=lMe(pi)!==String(pi);if(!r&&(I7===66||!kg&&typeof PromiseRejectionEvent!="function")||dx&&!pi.prototype.finally)return!0;if(I7>=51&&/native code/.test(pi))return!1;var e=pi.resolve(1),t=function(o){o(function(){},function(){})},i=e.constructor={};return i[hMe]=t,!(e.then(function(){})instanceof t)}),xMe=Eg||!cMe(function(r){pi.all(r).catch(function(){})}),z7=function(r){var e;return nMe(r)&&typeof(e=r.then)=="function"?e:!1},WE=function(r,e,t){if(!e.notified){e.notified=!0;var i=e.reactions;T7(function(){for(var o=e.value,n=e.state==P7,s=0;i.length>s;){var a=i[s++],l=n?a.ok:a.fail,c=a.resolve,u=a.reject,d=a.domain,p,h,f;try{l?(n||(e.rejection===M7&&SMe(r,e),e.rejection=HE),l===!0?p=o:(d&&d.enter(),p=l(o),d&&(d.exit(),f=!0)),p===a.promise?u(O7("Promise-chain cycle")):(h=z7(p))?h.call(p,c,u):c(p)):u(o)}catch(_){d&&!f&&d.exit(),u(_)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&CMe(r,e)})}},U7=function(r,e,t){var i,o;yMe?(i=qE.createEvent("Event"),i.promise=e,i.reason=t,i.initEvent(r,!1,!0),Ba.dispatchEvent(i)):i={promise:e,reason:t},(o=Ba["on"+r])?o(i):r===F7&&dMe("Unhandled promise rejection",t)},CMe=function(r,e){w7.call(Ba,function(){var t=e.value,i=N7(e),o;if(i&&(o=UE(function(){kg?mx.emit("unhandledRejection",t,r):U7(F7,r,t)}),e.rejection=kg||N7(e)?M7:HE,o.error))throw o.value})},N7=function(r){return r.rejection!==HE&&!r.parent},SMe=function(r,e){w7.call(Ba,function(){kg?mx.emit("rejectionHandled",r):U7(_Me,r,e.value)})},Sm=function(r,e,t,i){return function(o){r(e,t,o,i)}},wm=function(r,e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=vMe,WE(r,e,!0))},GE=function(r,e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(r===t)throw O7("Promise can't be resolved itself");var o=z7(t);o?T7(function(){var n={done:!1};try{o.call(t,Sm(GE,r,n,e),Sm(wm,r,n,e))}catch(s){wm(r,n,s,e)}}):(e.value=t,e.state=P7,WE(r,e,!1))}catch(n){wm(r,{done:!1},n,e)}}};Eg&&(pi=function(e){sMe(this,pi,Ts),zE(e),hx.call(this);var t=D7(this);try{e(Sm(GE,this,t),Sm(wm,this,t))}catch(i){wm(this,t,i)}},hx=function(e){fMe(this,{type:Ts,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:A7,value:void 0})},hx.prototype=rMe(pi.prototype,{then:function(e,t){var i=gMe(this),o=Cm(uMe(this,pi));return o.ok=typeof e=="function"?e:!0,o.fail=typeof t=="function"&&t,o.domain=kg?mx.domain:void 0,i.parent=!0,i.reactions.push(o),i.state!=A7&&WE(this,i,!1),o.promise},catch:function(r){return this.then(void 0,r)}}),B7=function(){var r=new hx,e=D7(r);this.promise=r,this.resolve=Sm(GE,r,e),this.reject=Sm(wm,r,e)},E7.f=Cm=function(r){return r===pi||r===jE?new B7(r):bMe(r)},!dx&&typeof px=="function"&&(L7=px.prototype.then,tMe(px.prototype,"then",function(e,t){var i=this;return new pi(function(o,n){L7.call(i,o,n)}).then(e,t)},{unsafe:!0}),typeof R7=="function"&&Tg({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return k7(pi,R7.apply(Ba,arguments))}})));Tg({global:!0,wrap:!0,forced:Eg},{Promise:pi});iMe(pi,Ts,!1,!0);oMe(Ts);jE=C7(Ts);Tg({target:Ts,stat:!0,forced:Eg},{reject:function(e){var t=Cm(this);return t.reject.call(void 0,e),t.promise}});Tg({target:Ts,stat:!0,forced:dx||Eg},{resolve:function(e){return k7(dx&&this===jE?pi:this,e)}});Tg({target:Ts,stat:!0,forced:xMe},{all:function(e){var t=this,i=Cm(t),o=i.resolve,n=i.reject,s=UE(function(){var a=zE(t.resolve),l=[],c=0,u=1;S7(e,function(d){var p=c++,h=!1;l.push(void 0),u++,a.call(t,d).then(function(f){h||(h=!0,l[p]=f,--u||o(l))},n)}),--u||o(l)});return s.error&&n(s.value),i.promise},race:function(e){var t=this,i=Cm(t),o=i.reject,n=UE(function(){var s=zE(t.resolve);S7(e,function(a){s.call(t,a).then(i.resolve,o)})});return n.error&&o(n.value),i.promise}})});var H7=S(()=>{"use strict";var wMe=W(),TMe=vi(),kMe=ux(),EMe=LE(),IMe=Nu();wMe({target:"Promise",stat:!0},{allSettled:function(e){var t=this,i=kMe.f(t),o=i.resolve,n=i.reject,s=EMe(function(){var a=TMe(t.resolve),l=[],c=0,u=1;IMe(e,function(d){var p=c++,h=!1;l.push(void 0),u++,a.call(t,d).then(function(f){h||(h=!0,l[p]={status:"fulfilled",value:f},--u||o(l))},function(f){h||(h=!0,l[p]={status:"rejected",reason:f},--u||o(l))})}),--u||o(l)});return s.error&&n(s.value),i.promise}})});var G7=S(()=>{"use strict";var DMe=W(),OMe=on(),Ig=_E(),RMe=Re(),j7=vo(),FMe=xs(),W7=BE(),AMe=Jr(),PMe=!!Ig&&RMe(function(){Ig.prototype.finally.call({then:function(){}},function(){})});DMe({target:"Promise",proto:!0,real:!0,forced:PMe},{finally:function(r){var e=FMe(this,j7("Promise")),t=typeof r=="function";return this.then(t?function(i){return W7(e,r()).then(function(){return i})}:r,t?function(i){return W7(e,r()).then(function(){throw i})}:r)}});!OMe&&typeof Ig=="function"&&!Ig.prototype.finally&&AMe(Ig.prototype,"finally",j7("Promise").prototype.finally)});var Dg=S((mnt,$7)=>{"use strict";var MMe=W(),BMe=Xe(),V7=om(),LMe=Jr(),zMe=sc(),UMe=Nu(),NMe=Ma(),VE=ct(),$E=Re(),qMe=ig(),HMe=An(),jMe=gg();$7.exports=function(r,e,t){var i=r.indexOf("Map")!==-1,o=r.indexOf("Weak")!==-1,n=i?"set":"add",s=BMe[r],a=s&&s.prototype,l=s,c={},u=function(x){var y=a[x];LMe(a,x,x=="add"?function(E){return y.call(this,E===0?0:E),this}:x=="delete"?function(D){return o&&!VE(D)?!1:y.call(this,D===0?0:D)}:x=="get"?function(E){return o&&!VE(E)?void 0:y.call(this,E===0?0:E)}:x=="has"?function(E){return o&&!VE(E)?!1:y.call(this,E===0?0:E)}:function(E,F){return y.call(this,E===0?0:E,F),this})};if(V7(r,typeof s!="function"||!(o||a.forEach&&!$E(function(){new s().entries().next()}))))l=t.getConstructor(e,r,i,n),zMe.REQUIRED=!0;else if(V7(r,!0)){var d=new l,p=d[n](o?{}:-0,1)!=d,h=$E(function(){d.has(1)}),f=qMe(function(x){new s(x)}),_=!o&&$E(function(){for(var x=new s,y=5;y--;)x[n](y,y);return!x.has(-0)});f||(l=e(function(x,y){NMe(x,l,r);var D=jMe(new s,x,l);return y!=null&&UMe(y,D[n],D,i),D}),l.prototype=a,a.constructor=l),(h||_)&&(u("delete"),u("has"),i&&u("get")),(_||p)&&u(n),o&&a.clear&&delete a.clear}return c[r]=l,MMe({global:!0,forced:l!=s},c),HMe(l,r),o||t.setStrong(l,r,i),l}});var XE=S((hnt,Z7)=>{"use strict";var WMe=zt().f,GMe=ys(),K7=Wu(),VMe=_s(),$Me=Ma(),KMe=Nu(),XMe=zv(),YMe=qu(),Og=bt(),X7=sc().fastKey,Y7=di(),J7=Y7.set,KE=Y7.getterFor;Z7.exports={getConstructor:function(r,e,t,i){var o=r(function(l,c){$Me(l,o,e),J7(l,{type:e,index:GMe(null),first:void 0,last:void 0,size:0}),Og||(l.size=0),c!=null&&KMe(c,l[i],l,t)}),n=KE(e),s=function(l,c,u){var d=n(l),p=a(l,c),h,f;return p?p.value=u:(d.last=p={index:f=X7(c,!0),key:c,value:u,previous:h=d.last,next:void 0,removed:!1},d.first||(d.first=p),h&&(h.next=p),Og?d.size++:l.size++,f!=="F"&&(d.index[f]=p)),l},a=function(l,c){var u=n(l),d=X7(c),p;if(d!=="F")return u.index[d];for(p=u.first;p;p=p.next)if(p.key==c)return p};return K7(o.prototype,{clear:function(){for(var c=this,u=n(c),d=u.index,p=u.first;p;)p.removed=!0,p.previous&&(p.previous=p.previous.next=void 0),delete d[p.index],p=p.next;u.first=u.last=void 0,Og?u.size=0:c.size=0},delete:function(l){var c=this,u=n(c),d=a(c,l);if(d){var p=d.next,h=d.previous;delete u.index[d.index],d.removed=!0,h&&(h.next=p),p&&(p.previous=h),u.first==d&&(u.first=p),u.last==d&&(u.last=h),Og?u.size--:c.size--}return!!d},forEach:function(c){for(var u=n(this),d=VMe(c,arguments.length>1?arguments[1]:void 0,3),p;p=p?p.next:u.first;)for(d(p.value,p.key,this);p&&p.removed;)p=p.previous},has:function(c){return!!a(this,c)}}),K7(o.prototype,t?{get:function(c){var u=a(this,c);return u&&u.value},set:function(c,u){return s(this,c===0?0:c,u)}}:{add:function(c){return s(this,c=c===0?0:c,c)}}),Og&&WMe(o.prototype,"size",{get:function(){return n(this).size}}),o},setStrong:function(r,e,t){var i=e+" Iterator",o=KE(e),n=KE(i);XMe(r,e,function(s,a){J7(this,{type:i,target:s,state:o(s),kind:a,last:void 0})},function(){for(var s=n(this),a=s.kind,l=s.last;l&&l.removed;)l=l.previous;return!s.target||!(s.last=l=l?l.next:s.state.first)?(s.target=void 0,{value:void 0,done:!0}):a=="keys"?{value:l.key,done:!1}:a=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}},t?"entries":"values",!t,!0),YMe(e)}}});var eq=S((fnt,Q7)=>{"use strict";var JMe=Dg(),ZMe=XE();Q7.exports=JMe("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},ZMe)});var rq=S((gnt,tq)=>{"use strict";var QMe=Dg(),eBe=XE();tq.exports=QMe("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},eBe)});var ZE=S((bnt,lq)=>{"use strict";var iq=Wu(),fx=sc().getWeakData,tBe=ht(),YE=ct(),rBe=Ma(),iBe=Nu(),oq=jr(),nq=dr(),sq=di(),oBe=sq.set,nBe=sq.getterFor,sBe=oq.find,aBe=oq.findIndex,lBe=0,gx=function(r){return r.frozen||(r.frozen=new aq)},aq=function(){this.entries=[]},JE=function(r,e){return sBe(r.entries,function(t){return t[0]===e})};aq.prototype={get:function(r){var e=JE(this,r);if(e)return e[1]},has:function(r){return!!JE(this,r)},set:function(r,e){var t=JE(this,r);t?t[1]=e:this.entries.push([r,e])},delete:function(r){var e=aBe(this.entries,function(t){return t[0]===r});return~e&&this.entries.splice(e,1),!!~e}};lq.exports={getConstructor:function(r,e,t,i){var o=r(function(a,l){rBe(a,o,e),oBe(a,{type:e,id:lBe++,frozen:void 0}),l!=null&&iBe(l,a[i],a,t)}),n=nBe(e),s=function(a,l,c){var u=n(a),d=fx(tBe(l),!0);return d===!0?gx(u).set(l,c):d[u.id]=c,a};return iq(o.prototype,{delete:function(a){var l=n(this);if(!YE(a))return!1;var c=fx(a);return c===!0?gx(l).delete(a):c&&nq(c,l.id)&&delete c[l.id]},has:function(l){var c=n(this);if(!YE(l))return!1;var u=fx(l);return u===!0?gx(c).has(l):u&&nq(u,c.id)}}),iq(o.prototype,t?{get:function(l){var c=n(this);if(YE(l)){var u=fx(l);return u===!0?gx(c).get(l):u?u[c.id]:void 0}},set:function(l,c){return s(this,l,c)}}:{add:function(l){return s(this,l,!0)}}),o}}});var mq=S((ynt,pq)=>{"use strict";var cq=Xe(),cBe=Wu(),uBe=sc(),dBe=Dg(),uq=ZE(),bx=ct(),yx=di().enforce,pBe=nk(),mBe=!cq.ActiveXObject&&"ActiveXObject"in cq,_x=Object.isExtensible,Rg,dq=function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},hBe=pq.exports=dBe("WeakMap",dq,uq);pBe&&mBe&&(Rg=uq.getConstructor(dq,"WeakMap",!0),uBe.REQUIRED=!0,Tm=hBe.prototype,QE=Tm.delete,Fg=Tm.has,eI=Tm.get,tI=Tm.set,cBe(Tm,{delete:function(r){if(bx(r)&&!_x(r)){var e=yx(this);return e.frozen||(e.frozen=new Rg),QE.call(this,r)||e.frozen.delete(r)}return QE.call(this,r)},has:function(e){if(bx(e)&&!_x(e)){var t=yx(this);return t.frozen||(t.frozen=new Rg),Fg.call(this,e)||t.frozen.has(e)}return Fg.call(this,e)},get:function(e){if(bx(e)&&!_x(e)){var t=yx(this);return t.frozen||(t.frozen=new Rg),Fg.call(this,e)?eI.call(this,e):t.frozen.get(e)}return eI.call(this,e)},set:function(e,t){if(bx(e)&&!_x(e)){var i=yx(this);i.frozen||(i.frozen=new Rg),Fg.call(this,e)?tI.call(this,e,t):i.frozen.set(e,t)}else tI.call(this,e,t);return this}}));var Tm,QE,Fg,eI,tI});var hq=S(()=>{"use strict";var fBe=Dg(),gBe=ZE();fBe("WeakSet",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},gBe)});var vx=S((xnt,fq)=>{fq.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var rI=S((Cnt,gq)=>{var bBe=xo(),yBe=It();gq.exports=function(r){if(r===void 0)return 0;var e=bBe(r),t=yBe(e);if(e!==t)throw RangeError("Wrong length or index");return t}});var yq=S((Snt,bq)=>{var iI=1/0,_Be=Math.abs,La=Math.pow,vBe=Math.floor,xBe=Math.log,CBe=Math.LN2,SBe=function(r,e,t){var i=new Array(t),o=t*8-e-1,n=(1<<o)-1,s=n>>1,a=e===23?La(2,-24)-La(2,-77):0,l=r<0||r===0&&1/r<0?1:0,c=0,u,d,p;for(r=_Be(r),r!=r||r===iI?(d=r!=r?1:0,u=n):(u=vBe(xBe(r)/CBe),r*(p=La(2,-u))<1&&(u--,p*=2),u+s>=1?r+=a/p:r+=a*La(2,1-s),r*p>=2&&(u++,p/=2),u+s>=n?(d=0,u=n):u+s>=1?(d=(r*p-1)*La(2,e),u=u+s):(d=r*La(2,s-1)*La(2,e),u=0));e>=8;i[c++]=d&255,d/=256,e-=8);for(u=u<<e|d,o+=e;o>0;i[c++]=u&255,u/=256,o-=8);return i[--c]|=l*128,i},wBe=function(r,e){var t=r.length,i=t*8-e-1,o=(1<<i)-1,n=o>>1,s=i-7,a=t-1,l=r[a--],c=l&127,u;for(l>>=7;s>0;c=c*256+r[a],a--,s-=8);for(u=c&(1<<-s)-1,c>>=-s,s+=e;s>0;u=u*256+r[a],a--,s-=8);if(c===0)c=1-n;else{if(c===o)return u?NaN:l?-iI:iI;u=u+La(2,e),c=c-n}return(l?-1:1)*u*La(2,c-e)};bq.exports={pack:SBe,unpack:wBe}});var Mg=S((wnt,Pq)=>{"use strict";var oI=Xe(),nI=bt(),TBe=vx(),kBe=ui(),_q=Wu(),sI=Re(),xx=Ma(),EBe=xo(),IBe=It(),Cx=rI(),vq=yq(),DBe=sn(),xq=nc(),OBe=tc().f,RBe=zt().f,FBe=Hv(),Cq=An(),Sq=di(),km=Sq.get,wq=Sq.set,Sx="ArrayBuffer",wx="DataView",Ag="prototype",ABe="Wrong length",Tq="Wrong index",Pn=oI[Sx],Co=Pn,Mn=oI[wx],Tx=Mn&&Mn[Ag],kq=Object.prototype,kx=oI.RangeError,Eq=vq.pack,Iq=vq.unpack,Dq=function(r){return[r&255]},Oq=function(r){return[r&255,r>>8&255]},Rq=function(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]},Fq=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]},PBe=function(r){return Eq(r,23,4)},MBe=function(r){return Eq(r,52,8)},Ex=function(r,e){RBe(r[Ag],e,{get:function(){return km(this)[e]}})},cc=function(r,e,t,i){var o=Cx(t),n=km(r);if(o+e>n.byteLength)throw kx(Tq);var s=km(n.buffer).bytes,a=o+n.byteOffset,l=s.slice(a,a+e);return i?l:l.reverse()},uc=function(r,e,t,i,o,n){var s=Cx(t),a=km(r);if(s+e>a.byteLength)throw kx(Tq);for(var l=km(a.buffer).bytes,c=s+a.byteOffset,u=i(+o),d=0;d<e;d++)l[c+d]=u[n?d:e-d-1]};if(!TBe)Co=function(e){xx(this,Co,Sx);var t=Cx(e);wq(this,{bytes:FBe.call(new Array(t),0),byteLength:t}),nI||(this.byteLength=t)},Mn=function(e,t,i){xx(this,Mn,wx),xx(e,Co,wx);var o=km(e).byteLength,n=EBe(t);if(n<0||n>o)throw kx("Wrong offset");if(i=i===void 0?o-n:IBe(i),n+i>o)throw kx(ABe);wq(this,{buffer:e,byteLength:i,byteOffset:n}),nI||(this.buffer=e,this.byteLength=i,this.byteOffset=n)},nI&&(Ex(Co,"byteLength"),Ex(Mn,"buffer"),Ex(Mn,"byteLength"),Ex(Mn,"byteOffset")),_q(Mn[Ag],{getInt8:function(e){return cc(this,1,e)[0]<<24>>24},getUint8:function(e){return cc(this,1,e)[0]},getInt16:function(e){var t=cc(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=cc(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Fq(cc(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Fq(cc(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Iq(cc(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Iq(cc(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){uc(this,1,e,Dq,t)},setUint8:function(e,t){uc(this,1,e,Dq,t)},setInt16:function(e,t){uc(this,2,e,Oq,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){uc(this,2,e,Oq,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){uc(this,4,e,Rq,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){uc(this,4,e,Rq,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){uc(this,4,e,PBe,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){uc(this,8,e,MBe,t,arguments.length>2?arguments[2]:void 0)}});else{if(!sI(function(){Pn(1)})||!sI(function(){new Pn(-1)})||sI(function(){return new Pn,new Pn(1.5),new Pn(NaN),Pn.name!=Sx})){for(Co=function(e){return xx(this,Co),new Pn(Cx(e))},Aq=Co[Ag]=Pn[Ag],aI=OBe(Pn),lI=0;aI.length>lI;)(Ix=aI[lI++])in Co||kBe(Co,Ix,Pn[Ix]);Aq.constructor=Co}xq&&DBe(Tx)!==kq&&xq(Tx,kq),Pg=new Mn(new Co(2)),cI=Tx.setInt8,Pg.setInt8(0,2147483648),Pg.setInt8(1,2147483649),(Pg.getInt8(0)||!Pg.getInt8(1))&&_q(Tx,{setInt8:function(e,t){cI.call(this,e,t<<24>>24)},setUint8:function(e,t){cI.call(this,e,t<<24>>24)}},{unsafe:!0})}var Aq,aI,lI,Ix,Pg,cI;Cq(Co,Sx);Cq(Mn,wx);Pq.exports={ArrayBuffer:Co,DataView:Mn}});var Bq=S(()=>{"use strict";var BBe=W(),LBe=Xe(),zBe=Mg(),UBe=qu(),uI="ArrayBuffer",Mq=zBe[uI],NBe=LBe[uI];BBe({global:!0,forced:NBe!==Mq},{ArrayBuffer:Mq});UBe(uI)});var Dt=S((Ent,Gq)=>{"use strict";var qBe=vx(),dI=bt(),Ki=Xe(),Lq=ct(),Em=dr(),pI=am(),HBe=ui(),mI=Jr(),jBe=zt().f,hI=sn(),Im=nc(),WBe=kt(),GBe=em(),Bg=Ki.Int8Array,fI=Bg&&Bg.prototype,zq=Ki.Uint8ClampedArray,Uq=zq&&zq.prototype,za=Bg&&hI(Bg),Bn=fI&&hI(fI),Nq=Object.prototype,qq=Nq.isPrototypeOf,Hq=WBe("toStringTag"),gI=GBe("TYPED_ARRAY_TAG"),Ua=qBe&&!!Im&&pI(Ki.opera)!=="Opera",jq=!1,So,Ln={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VBe=function(e){var t=pI(e);return t==="DataView"||Em(Ln,t)},Wq=function(r){return Lq(r)&&Em(Ln,pI(r))},$Be=function(r){if(Wq(r))return r;throw TypeError("Target is not a typed array")},KBe=function(r){if(Im){if(qq.call(za,r))return r}else for(var e in Ln)if(Em(Ln,So)){var t=Ki[e];if(t&&(r===t||qq.call(t,r)))return r}throw TypeError("Target is not a typed array constructor")},XBe=function(r,e,t){if(!!dI){if(t)for(var i in Ln){var o=Ki[i];o&&Em(o.prototype,r)&&delete o.prototype[r]}(!Bn[r]||t)&&mI(Bn,r,t?e:Ua&&fI[r]||e)}},YBe=function(r,e,t){var i,o;if(!!dI){if(Im){if(t)for(i in Ln)o=Ki[i],o&&Em(o,r)&&delete o[r];if(!za[r]||t)try{return mI(za,r,t?e:Ua&&Bg[r]||e)}catch(n){}else return}for(i in Ln)o=Ki[i],o&&(!o[r]||t)&&mI(o,r,e)}};for(So in Ln)Ki[So]||(Ua=!1);if((!Ua||typeof za!="function"||za===Function.prototype)&&(za=function(){throw TypeError("Incorrect invocation")},Ua))for(So in Ln)Ki[So]&&Im(Ki[So],za);if((!Ua||!Bn||Bn===Nq)&&(Bn=za.prototype,Ua))for(So in Ln)Ki[So]&&Im(Ki[So].prototype,Bn);Ua&&hI(Uq)!==Bn&&Im(Uq,Bn);if(dI&&!Em(Bn,Hq)){jq=!0,jBe(Bn,Hq,{get:function(){return Lq(this)?this[gI]:void 0}});for(So in Ln)Ki[So]&&HBe(Ki[So],gI,So)}Gq.exports={NATIVE_ARRAY_BUFFER_VIEWS:Ua,TYPED_ARRAY_TAG:jq&&gI,aTypedArray:$Be,aTypedArrayConstructor:KBe,exportTypedArrayMethod:XBe,exportTypedArrayStaticMethod:YBe,isView:VBe,isTypedArray:Wq,TypedArray:za,TypedArrayPrototype:Bn}});var $q=S(()=>{var JBe=W(),Vq=Dt(),ZBe=Vq.NATIVE_ARRAY_BUFFER_VIEWS;JBe({target:"ArrayBuffer",stat:!0,forced:!ZBe},{isView:Vq.isView})});var Qq=S(()=>{"use strict";var QBe=W(),e5e=Re(),Kq=Mg(),Xq=ht(),Yq=Da(),t5e=It(),r5e=xs(),bI=Kq.ArrayBuffer,Jq=Kq.DataView,Zq=bI.prototype.slice,i5e=e5e(function(){return!new bI(2).slice(1,void 0).byteLength});QBe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i5e},{slice:function(e,t){if(Zq!==void 0&&t===void 0)return Zq.call(Xq(this),e);for(var i=Xq(this).byteLength,o=Yq(e,i),n=Yq(t===void 0?i:t,i),s=new(r5e(this,bI))(t5e(n-o)),a=new Jq(this),l=new Jq(s),c=0;o<n;)l.setUint8(c++,a.getUint8(o++));return s}})});var eH=S(()=>{var o5e=W(),n5e=Mg(),s5e=vx();o5e({global:!0,forced:!s5e},{DataView:n5e.DataView})});var Dx=S((Pnt,rH)=>{var tH=Xe(),yI=Re(),a5e=ig(),l5e=Dt().NATIVE_ARRAY_BUFFER_VIEWS,c5e=tH.ArrayBuffer,$u=tH.Int8Array;rH.exports=!l5e||!yI(function(){$u(1)})||!yI(function(){new $u(-1)})||!a5e(function(r){new $u,new $u(null),new $u(1.5),new $u(r)},!0)||yI(function(){return new $u(new c5e(2),1,void 0).length!==1})});var oH=S((Mnt,iH)=>{var u5e=xo();iH.exports=function(r){var e=u5e(r);if(e<0)throw RangeError("The argument can't be less than 0");return e}});var _I=S((Bnt,nH)=>{var d5e=oH();nH.exports=function(r,e){var t=d5e(r);if(t%e)throw RangeError("Wrong offset");return t}});var vI=S((Lnt,sH)=>{var p5e=ir(),m5e=It(),h5e=hm(),f5e=Nv(),g5e=_s(),b5e=Dt().aTypedArrayConstructor;sH.exports=function(e){var t=p5e(e),i=arguments.length,o=i>1?arguments[1]:void 0,n=o!==void 0,s=h5e(t),a,l,c,u,d,p;if(s!=null&&!f5e(s))for(d=s.call(t),p=d.next,t=[];!(u=p.call(d)).done;)t.push(u.value);for(n&&i>2&&(o=g5e(o,arguments[2],2)),l=m5e(t.length),c=new(b5e(this))(l),a=0;l>a;a++)c[a]=n?o(t[a],a):t[a];return c}});var ks=S((znt,II)=>{"use strict";var aH=W(),lH=Xe(),y5e=bt(),_5e=Dx(),Dm=Dt(),cH=Mg(),uH=Ma(),v5e=Ia(),Lg=ui(),x5e=It(),dH=rI(),xI=_I(),pH=rn(),zg=dr(),C5e=am(),CI=ct(),S5e=ys(),Ox=nc(),w5e=tc().f,mH=vI(),T5e=jr().forEach,k5e=qu(),hH=zt(),fH=Yr(),gH=di(),E5e=gg(),SI=gH.get,I5e=gH.set,wI=hH.f,D5e=fH.f,O5e=Math.round,TI=lH.RangeError,bH=cH.ArrayBuffer,R5e=cH.DataView,Rx=Dm.NATIVE_ARRAY_BUFFER_VIEWS,yH=Dm.TYPED_ARRAY_TAG,_H=Dm.TypedArray,Ug=Dm.TypedArrayPrototype,F5e=Dm.aTypedArrayConstructor,kI=Dm.isTypedArray,Fx="BYTES_PER_ELEMENT",EI="Wrong length",vH=function(r,e){for(var t=0,i=e.length,o=new(F5e(r))(i);i>t;)o[t]=e[t++];return o},Ax=function(r,e){wI(r,e,{get:function(){return SI(this)[e]}})},xH=function(r){var e;return r instanceof bH||(e=C5e(r))=="ArrayBuffer"||e=="SharedArrayBuffer"},CH=function(r,e){return kI(r)&&typeof e!="symbol"&&e in r&&String(+e)==String(e)},SH=function(e,t){return CH(e,t=pH(t,!0))?v5e(2,e[t]):D5e(e,t)},wH=function(e,t,i){return CH(e,t=pH(t,!0))&&CI(i)&&zg(i,"value")&&!zg(i,"get")&&!zg(i,"set")&&!i.configurable&&(!zg(i,"writable")||i.writable)&&(!zg(i,"enumerable")||i.enumerable)?(e[t]=i.value,e):wI(e,t,i)};y5e?(Rx||(fH.f=SH,hH.f=wH,Ax(Ug,"buffer"),Ax(Ug,"byteOffset"),Ax(Ug,"byteLength"),Ax(Ug,"length")),aH({target:"Object",stat:!0,forced:!Rx},{getOwnPropertyDescriptor:SH,defineProperty:wH}),II.exports=function(r,e,t){var i=r.match(/\d+$/)[0]/8,o=r+(t?"Clamped":"")+"Array",n="get"+r,s="set"+r,a=lH[o],l=a,c=l&&l.prototype,u={},d=function(f,_){var x=SI(f);return x.view[n](_*i+x.byteOffset,!0)},p=function(f,_,x){var y=SI(f);t&&(x=(x=O5e(x))<0?0:x>255?255:x&255),y.view[s](_*i+y.byteOffset,x,!0)},h=function(f,_){wI(f,_,{get:function(){return d(this,_)},set:function(x){return p(this,_,x)},enumerable:!0})};Rx?_5e&&(l=e(function(f,_,x,y){return uH(f,l,o),E5e(function(){return CI(_)?xH(_)?y!==void 0?new a(_,xI(x,i),y):x!==void 0?new a(_,xI(x,i)):new a(_):kI(_)?vH(l,_):mH.call(l,_):new a(dH(_))}(),f,l)}),Ox&&Ox(l,_H),T5e(w5e(a),function(f){f in l||Lg(l,f,a[f])}),l.prototype=c):(l=e(function(f,_,x,y){uH(f,l,o);var D=0,E=0,F,N,R;if(!CI(_))R=dH(_),N=R*i,F=new bH(N);else if(xH(_)){F=_,E=xI(x,i);var B=_.byteLength;if(y===void 0){if(B%i||(N=B-E,N<0))throw TI(EI)}else if(N=x5e(y)*i,N+E>B)throw TI(EI);R=N/i}else return kI(_)?vH(l,_):mH.call(l,_);for(I5e(f,{buffer:F,byteOffset:E,byteLength:N,length:R,view:new R5e(F)});D<R;)h(f,D++)}),Ox&&Ox(l,_H),c=l.prototype=S5e(Ug)),c.constructor!==l&&Lg(c,"constructor",l),yH&&Lg(c,yH,o),u[o]=l,aH({global:!0,forced:l!=a,sham:!Rx},u),Fx in l||Lg(l,Fx,i),Fx in c||Lg(c,Fx,i),k5e(o)}):II.exports=function(){}});var TH=S(()=>{var A5e=ks();A5e("Int8",function(r){return function(t,i,o){return r(this,t,i,o)}})});var kH=S(()=>{var P5e=ks();P5e("Uint8",function(r){return function(t,i,o){return r(this,t,i,o)}})});var EH=S(()=>{var M5e=ks();M5e("Uint8",function(r){return function(t,i,o){return r(this,t,i,o)}},!0)});var IH=S(()=>{var B5e=ks();B5e("Int16",function(r){return function(t,i,o){return r(this,t,i,o)}})});var DH=S(()=>{var L5e=ks();L5e("Uint16",function(r){return function(t,i,o){return r(this,t,i,o)}})});var OH=S(()=>{var z5e=ks();z5e("Int32",function(r){return function(t,i,o){return r(this,t,i,o)}})});var RH=S(()=>{var U5e=ks();U5e("Uint32",function(r){return function(t,i,o){return r(this,t,i,o)}})});var FH=S(()=>{var N5e=ks();N5e("Float32",function(r){return function(t,i,o){return r(this,t,i,o)}})});var AH=S(()=>{var q5e=ks();q5e("Float64",function(r){return function(t,i,o){return r(this,t,i,o)}})});var PH=S(()=>{"use strict";var H5e=Dx(),j5e=Dt().exportTypedArrayStaticMethod,W5e=vI();j5e("from",W5e,H5e)});var BH=S(()=>{"use strict";var MH=Dt(),G5e=Dx(),V5e=MH.aTypedArrayConstructor,$5e=MH.exportTypedArrayStaticMethod;$5e("of",function(){for(var e=0,t=arguments.length,i=new(V5e(this))(t);t>e;)i[e]=arguments[e++];return i},G5e)});var zH=S(()=>{"use strict";var LH=Dt(),K5e=D2(),X5e=LH.aTypedArray,Y5e=LH.exportTypedArrayMethod;Y5e("copyWithin",function(e,t){return K5e.call(X5e(this),e,t,arguments.length>2?arguments[2]:void 0)})});var NH=S(()=>{"use strict";var UH=Dt(),J5e=jr().every,Z5e=UH.aTypedArray,Q5e=UH.exportTypedArrayMethod;Q5e("every",function(e){return J5e(Z5e(this),e,arguments.length>1?arguments[1]:void 0)})});var HH=S(()=>{"use strict";var qH=Dt(),eLe=Hv(),tLe=qH.aTypedArray,rLe=qH.exportTypedArrayMethod;rLe("fill",function(e){return eLe.apply(tLe(this),arguments)})});var jH=S(()=>{"use strict";var DI=Dt(),iLe=jr().filter,oLe=xs(),nLe=DI.aTypedArray,sLe=DI.aTypedArrayConstructor,aLe=DI.exportTypedArrayMethod;aLe("filter",function(e){for(var t=iLe(nLe(this),e,arguments.length>1?arguments[1]:void 0),i=oLe(this,this.constructor),o=0,n=t.length,s=new(sLe(i))(n);n>o;)s[o]=t[o++];return s})});var GH=S(()=>{"use strict";var WH=Dt(),lLe=jr().find,cLe=WH.aTypedArray,uLe=WH.exportTypedArrayMethod;uLe("find",function(e){return lLe(cLe(this),e,arguments.length>1?arguments[1]:void 0)})});var $H=S(()=>{"use strict";var VH=Dt(),dLe=jr().findIndex,pLe=VH.aTypedArray,mLe=VH.exportTypedArrayMethod;mLe("findIndex",function(e){return dLe(pLe(this),e,arguments.length>1?arguments[1]:void 0)})});var XH=S(()=>{"use strict";var KH=Dt(),hLe=jr().forEach,fLe=KH.aTypedArray,gLe=KH.exportTypedArrayMethod;gLe("forEach",function(e){hLe(fLe(this),e,arguments.length>1?arguments[1]:void 0)})});var JH=S(()=>{"use strict";var YH=Dt(),bLe=im().includes,yLe=YH.aTypedArray,_Le=YH.exportTypedArrayMethod;_Le("includes",function(e){return bLe(yLe(this),e,arguments.length>1?arguments[1]:void 0)})});var QH=S(()=>{"use strict";var ZH=Dt(),vLe=im().indexOf,xLe=ZH.aTypedArray,CLe=ZH.exportTypedArrayMethod;CLe("indexOf",function(e){return vLe(xLe(this),e,arguments.length>1?arguments[1]:void 0)})});var nj=S(()=>{"use strict";var SLe=Xe(),ej=Dt(),OI=ag(),wLe=kt(),tj=wLe("iterator"),rj=SLe.Uint8Array,TLe=OI.values,kLe=OI.keys,ELe=OI.entries,RI=ej.aTypedArray,Px=ej.exportTypedArrayMethod,FI=rj&&rj.prototype[tj],ij=!!FI&&(FI.name=="values"||FI.name==null),oj=function(){return TLe.call(RI(this))};Px("entries",function(){return ELe.call(RI(this))});Px("keys",function(){return kLe.call(RI(this))});Px("values",oj,!ij);Px(tj,oj,!ij)});var aj=S(()=>{"use strict";var sj=Dt(),ILe=sj.aTypedArray,DLe=sj.exportTypedArrayMethod,OLe=[].join;DLe("join",function(e){return OLe.apply(ILe(this),arguments)})});var cj=S(()=>{"use strict";var lj=Dt(),RLe=L2(),FLe=lj.aTypedArray,ALe=lj.exportTypedArrayMethod;ALe("lastIndexOf",function(e){return RLe.apply(FLe(this),arguments)})});var uj=S(()=>{"use strict";var AI=Dt(),PLe=jr().map,MLe=xs(),BLe=AI.aTypedArray,LLe=AI.aTypedArrayConstructor,zLe=AI.exportTypedArrayMethod;zLe("map",function(e){return PLe(BLe(this),e,arguments.length>1?arguments[1]:void 0,function(t,i){return new(LLe(MLe(t,t.constructor)))(i)})})});var pj=S(()=>{"use strict";var dj=Dt(),ULe=sg().left,NLe=dj.aTypedArray,qLe=dj.exportTypedArrayMethod;qLe("reduce",function(e){return ULe(NLe(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})});var hj=S(()=>{"use strict";var mj=Dt(),HLe=sg().right,jLe=mj.aTypedArray,WLe=mj.exportTypedArrayMethod;WLe("reduceRight",function(e){return HLe(jLe(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})});var gj=S(()=>{"use strict";var fj=Dt(),GLe=fj.aTypedArray,VLe=fj.exportTypedArrayMethod,$Le=Math.floor;VLe("reverse",function(){for(var e=this,t=GLe(e).length,i=$Le(t/2),o=0,n;o<i;)n=e[o],e[o++]=e[--t],e[t]=n;return e})});var yj=S(()=>{"use strict";var bj=Dt(),KLe=It(),XLe=_I(),YLe=ir(),JLe=Re(),ZLe=bj.aTypedArray,QLe=bj.exportTypedArrayMethod,e4e=JLe(function(){new Int8Array(1).set({})});QLe("set",function(e){ZLe(this);var t=XLe(arguments.length>1?arguments[1]:void 0,1),i=this.length,o=YLe(e),n=KLe(o.length),s=0;if(n+t>i)throw RangeError("Wrong length");for(;s<n;)this[t+s]=o[s++]},e4e)});var _j=S(()=>{"use strict";var PI=Dt(),t4e=xs(),r4e=Re(),i4e=PI.aTypedArray,o4e=PI.aTypedArrayConstructor,n4e=PI.exportTypedArrayMethod,s4e=[].slice,a4e=r4e(function(){new Int8Array(1).slice()});n4e("slice",function(e,t){for(var i=s4e.call(i4e(this),e,t),o=t4e(this,this.constructor),n=0,s=i.length,a=new(o4e(o))(s);s>n;)a[n]=i[n++];return a},a4e)});var xj=S(()=>{"use strict";var vj=Dt(),l4e=jr().some,c4e=vj.aTypedArray,u4e=vj.exportTypedArrayMethod;u4e("some",function(e){return l4e(c4e(this),e,arguments.length>1?arguments[1]:void 0)})});var Sj=S(()=>{"use strict";var Cj=Dt(),d4e=Cj.aTypedArray,p4e=Cj.exportTypedArrayMethod,m4e=[].sort;p4e("sort",function(e){return m4e.call(d4e(this),e)})});var kj=S(()=>{"use strict";var wj=Dt(),h4e=It(),Tj=Da(),f4e=xs(),g4e=wj.aTypedArray,b4e=wj.exportTypedArrayMethod;b4e("subarray",function(e,t){var i=g4e(this),o=i.length,n=Tj(e,o);return new(f4e(i,i.constructor))(i.buffer,i.byteOffset+n*i.BYTES_PER_ELEMENT,h4e((t===void 0?o:Tj(t,o))-n))})});var Oj=S(()=>{"use strict";var y4e=Xe(),Ej=Dt(),MI=Re(),Mx=y4e.Int8Array,Ij=Ej.aTypedArray,_4e=Ej.exportTypedArrayMethod,Dj=[].toLocaleString,v4e=[].slice,x4e=!!Mx&&MI(function(){Dj.call(new Mx(1))}),C4e=MI(function(){return[1,2].toLocaleString()!=new Mx([1,2]).toLocaleString()})||!MI(function(){Mx.prototype.toLocaleString.call([1,2])});_4e("toLocaleString",function(){return Dj.apply(x4e?v4e.call(Ij(this)):Ij(this),arguments)},C4e)});var Fj=S(()=>{"use strict";var S4e=Dt().exportTypedArrayMethod,w4e=Re(),T4e=Xe(),Rj=T4e.Uint8Array,k4e=Rj&&Rj.prototype||{},Bx=[].toString,E4e=[].join;w4e(function(){Bx.call({})})&&(Bx=function(){return E4e.call(this)});var I4e=k4e.toString!=Bx;S4e("toString",Bx,I4e)});var Aj=S(()=>{var D4e=W(),O4e=vo(),R4e=vi(),F4e=ht(),A4e=Re(),BI=O4e("Reflect","apply"),P4e=Function.apply,M4e=!A4e(function(){BI(function(){})});D4e({target:"Reflect",stat:!0,forced:M4e},{apply:function(e,t,i){return R4e(e),F4e(i),BI?BI(e,t,i):P4e.call(e,t,i)}})});var Nj=S(()=>{var B4e=W(),L4e=vo(),Pj=vi(),z4e=ht(),Mj=ct(),U4e=ys(),N4e=k2(),Bj=Re(),LI=L4e("Reflect","construct"),Lj=Bj(function(){function r(){}return!(LI(function(){},[],r)instanceof r)}),zj=!Bj(function(){LI(function(){})}),Uj=Lj||zj;B4e({target:"Reflect",stat:!0,forced:Uj,sham:Uj},{construct:function(e,t){Pj(e),z4e(t);var i=arguments.length<3?e:Pj(arguments[2]);if(zj&&!Lj)return LI(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return o.push.apply(o,t),new(N4e.apply(e,o))}var n=i.prototype,s=U4e(Mj(n)?n:Object.prototype),a=Function.apply.call(e,s,t);return Mj(a)?a:s}})});var jj=S(()=>{var q4e=W(),H4e=bt(),qj=ht(),j4e=rn(),Hj=zt(),W4e=Re(),G4e=W4e(function(){Reflect.defineProperty(Hj.f({},1,{value:1}),1,{value:2})});q4e({target:"Reflect",stat:!0,forced:G4e,sham:!H4e},{defineProperty:function(e,t,i){qj(e);var o=j4e(t,!0);qj(i);try{return Hj.f(e,o,i),!0}catch(n){return!1}}})});var Wj=S(()=>{var V4e=W(),$4e=ht(),K4e=Yr().f;V4e({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var i=K4e($4e(e),t);return i&&!i.configurable?!1:delete e[t]}})});var Vj=S(()=>{var X4e=W(),Y4e=ct(),J4e=ht(),Z4e=dr(),Q4e=Yr(),e3e=sn();function Gj(r,e){var t=arguments.length<3?r:arguments[2],i,o;if(J4e(r)===t)return r[e];if(i=Q4e.f(r,e))return Z4e(i,"value")?i.value:i.get===void 0?void 0:i.get.call(t);if(Y4e(o=e3e(r)))return Gj(o,e,t)}X4e({target:"Reflect",stat:!0},{get:Gj})});var $j=S(()=>{var t3e=W(),r3e=bt(),i3e=ht(),o3e=Yr();t3e({target:"Reflect",stat:!0,sham:!r3e},{getOwnPropertyDescriptor:function(e,t){return o3e.f(i3e(e),t)}})});var Kj=S(()=>{var n3e=W(),s3e=ht(),a3e=sn(),l3e=Pv();n3e({target:"Reflect",stat:!0,sham:!l3e},{getPrototypeOf:function(e){return a3e(s3e(e))}})});var Xj=S(()=>{var c3e=W();c3e({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})});var Jj=S(()=>{var u3e=W(),d3e=ht(),Yj=Object.isExtensible;u3e({target:"Reflect",stat:!0},{isExtensible:function(e){return d3e(e),Yj?Yj(e):!0}})});var Zj=S(()=>{var p3e=W(),m3e=vv();p3e({target:"Reflect",stat:!0},{ownKeys:m3e})});var Qj=S(()=>{var h3e=W(),f3e=vo(),g3e=ht(),b3e=gm();h3e({target:"Reflect",stat:!0,sham:!b3e},{preventExtensions:function(e){g3e(e);try{var t=f3e("Object","preventExtensions");return t&&t(e),!0}catch(i){return!1}}})});var nW=S(()=>{var y3e=W(),_3e=ht(),eW=ct(),v3e=dr(),x3e=Re(),zI=zt(),tW=Yr(),rW=sn(),iW=Ia();function oW(r,e,t){var i=arguments.length<4?r:arguments[3],o=tW.f(_3e(r),e),n,s;if(!o){if(eW(s=rW(r)))return oW(s,e,t,i);o=iW(0)}if(v3e(o,"value")){if(o.writable===!1||!eW(i))return!1;if(n=tW.f(i,e)){if(n.get||n.set||n.writable===!1)return!1;n.value=t,zI.f(i,e,n)}else zI.f(i,e,iW(0,t));return!0}return o.set===void 0?!1:(o.set.call(i,t),!0)}var C3e=x3e(function(){var r=zI.f({},"a",{configurable:!0});return Reflect.set(rW(r),"a",1,r)!==!1});y3e({target:"Reflect",stat:!0,forced:C3e},{set:oW})});var aW=S(()=>{var S3e=W(),w3e=ht(),T3e=n2(),sW=nc();sW&&S3e({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){w3e(e),T3e(t);try{return sW(e,t),!0}catch(i){return!1}}})});var cW=S((Tat,lW)=>{zk();Uk();qk();Hk();jk();Wk();Gk();Vk();$k();Kk();Xk();Yk();Jk();Zk();Qk();Nz();qz();jz();Gz();Kz();Jz();Qz();r8();i8();o8();s8();l8();c8();u8();d8();m8();h8();f8();g8();b8();fk();_8();v8();x8();C8();T8();E8();R8();F8();d2();A8();P8();hk();L8();q8();W8();G8();A2();K8();J8();Z8();t6();r6();n6();s6();u6();z2();m6();h6();g6();_6();v6();w6();T6();I6();D6();O6();ag();L6();z6();U6();V6();$6();uU();_U();wU();TU();kU();EU();DU();FU();MU();qU();WU();$U();Uv();YU();JU();ZU();QU();e9();t9();r9();i9();o9();n9();s9();a9();l9();m9();Kv();h9();f9();g9();_9();S9();k9();R9();F9();M9();L9();z9();U9();N9();q9();j9();G9();X9();Z9();tN();oN();sN();lN();cN();pN();hN();bN();_N();xN();CN();SN();wN();TN();IN();RN();e2();FN();AN();PN();NN();jN();KN();JN();t2();q7();H7();G7();eq();rq();mq();hq();Bq();$q();Qq();eH();TH();kH();EH();IH();DH();OH();RH();FH();AH();PH();BH();zH();NH();HH();jH();GH();$H();XH();JH();QH();nj();aj();cj();uj();pj();hj();gj();yj();_j();xj();Sj();kj();Oj();Fj();Aj();Nj();jj();Wj();Vj();$j();Kj();Xj();Jj();Zj();Qj();nW();aW();var k3e=ec();lW.exports=k3e});var UI=S((kat,uW)=>{uW.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var pW=S(()=>{var E3e=Xe(),I3e=UI(),NI=M2(),D3e=ui();for(dW in I3e)if(qI=E3e[dW],Ng=qI&&qI.prototype,Ng&&Ng.forEach!==NI)try{D3e(Ng,"forEach",NI)}catch(r){Ng.forEach=NI}var qI,Ng,dW});var gW=S(()=>{var O3e=Xe(),mW=UI(),qg=ag(),HI=ui(),hW=kt(),jI=hW("iterator"),fW=hW("toStringTag"),WI=qg.values;for(Lx in mW)if(GI=O3e[Lx],Es=GI&&GI.prototype,Es){if(Es[jI]!==WI)try{HI(Es,jI,WI)}catch(r){Es[jI]=WI}if(Es[fW]||HI(Es,fW,Lx),mW[Lx]){for(Ku in qg)if(Es[Ku]!==qg[Ku])try{HI(Es,Ku,qg[Ku])}catch(r){Es[Ku]=qg[Ku]}}}var GI,Es,Ku,Lx});var _W=S(()=>{var R3e=W(),bW=Xe(),yW=cx(),F3e=!bW.setImmediate||!bW.clearImmediate;R3e({global:!0,bind:!0,enumerable:!0,forced:F3e},{setImmediate:yW.set,clearImmediate:yW.clear})});var xW=S(()=>{var A3e=W(),P3e=Xe(),M3e=ME(),B3e=_o(),vW=P3e.process,L3e=B3e(vW)=="process";A3e({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=L3e&&vW.domain;M3e(t?t.bind(e):e)}})});var wW=S(()=>{var z3e=W(),CW=Xe(),U3e=Yf(),N3e=[].slice,q3e=/MSIE .\./.test(U3e),SW=function(r){return function(e,t){var i=arguments.length>2,o=i?N3e.call(arguments,2):void 0;return r(i?function(){(typeof e=="function"?e:Function(e)).apply(this,o)}:e,t)}};z3e({global:!0,bind:!0,forced:q3e},{setTimeout:SW(CW.setTimeout),setInterval:SW(CW.setInterval)})});var VI=S((Lat,TW)=>{var H3e=Re(),j3e=kt(),W3e=on(),G3e=j3e("iterator");TW.exports=!H3e(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),e=r.searchParams,t="";return r.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),t+=o+i}),W3e&&!r.toJSON||!e.sort||r.href!=="http://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[G3e]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||t!=="a1c3"||new URL("http://x",void 0).host!=="x"})});var OW=S((zat,DW)=>{"use strict";var $I=2147483647,Hg=36,kW=1,KI=26,V3e=38,$3e=700,K3e=72,X3e=128,Y3e="-",J3e=/[^\0-\u007E]/,Z3e=/[.\u3002\uFF0E\uFF61]/g,EW="Overflow: input needs wider integers to process",XI=Hg-kW,Om=Math.floor,YI=String.fromCharCode,Q3e=function(r){for(var e=[],t=0,i=r.length;t<i;){var o=r.charCodeAt(t++);if(o>=55296&&o<=56319&&t<i){var n=r.charCodeAt(t++);(n&64512)==56320?e.push(((o&1023)<<10)+(n&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},IW=function(r){return r+22+75*(r<26)},eze=function(r,e,t){var i=0;for(r=t?Om(r/$3e):r>>1,r+=Om(r/e);r>XI*KI>>1;i+=Hg)r=Om(r/XI);return Om(i+(XI+1)*r/(r+V3e))},tze=function(r){var e=[];r=Q3e(r);var t=r.length,i=X3e,o=0,n=K3e,s,a;for(s=0;s<r.length;s++)a=r[s],a<128&&e.push(YI(a));var l=e.length,c=l;for(l&&e.push(Y3e);c<t;){var u=$I;for(s=0;s<r.length;s++)a=r[s],a>=i&&a<u&&(u=a);var d=c+1;if(u-i>Om(($I-o)/d))throw RangeError(EW);for(o+=(u-i)*d,i=u,s=0;s<r.length;s++){if(a=r[s],a<i&&++o>$I)throw RangeError(EW);if(a==i){for(var p=o,h=Hg;;h+=Hg){var f=h<=n?kW:h>=n+KI?KI:h-n;if(p<f)break;var _=p-f,x=Hg-f;e.push(YI(IW(f+_%x))),p=Om(_/x)}e.push(YI(IW(p))),n=eze(o,d,c==l),o=0,++c}}++o,++i}return e.join("")};DW.exports=function(r){var e=[],t=r.toLowerCase().replace(Z3e,".").split("."),i,o;for(i=0;i<t.length;i++)o=t[i],e.push(J3e.test(o)?"xn--"+tze(o):o);return e.join(".")}});var FW=S((Uat,RW)=>{var rze=ht(),ize=hm();RW.exports=function(r){var e=ize(r);if(typeof e!="function")throw TypeError(String(r)+" is not iterable");return rze(e.call(r))}});var eD=S((Nat,$W)=>{"use strict";ag();var AW=W(),PW=vo(),MW=VI(),BW=Jr(),oze=Wu(),nze=An(),sze=Mv(),JI=di(),aze=Ma(),lze=dr(),cze=_s(),uze=am(),dze=ht(),LW=ct(),pze=ys(),zW=Ia(),UW=FW(),mze=hm(),hze=kt(),NW=PW("fetch"),ZI=PW("Headers"),fze=hze("iterator"),Rm="URLSearchParams",qW=Rm+"Iterator",HW=JI.set,zn=JI.getterFor(Rm),gze=JI.getterFor(qW),bze=/\+/g,jW=Array(4),yze=function(r){return jW[r-1]||(jW[r-1]=RegExp("((?:%[\\da-f]{2}){"+r+"})","gi"))},_ze=function(r){try{return decodeURIComponent(r)}catch(e){return r}},WW=function(r){var e=r.replace(bze," "),t=4;try{return decodeURIComponent(e)}catch(i){for(;t;)e=e.replace(yze(t--),_ze);return e}},vze=/[!'()~]|%20/g,xze={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Cze=function(r){return xze[r]},GW=function(r){return encodeURIComponent(r).replace(vze,Cze)},VW=function(r,e){if(e)for(var t=e.split("&"),i=0,o,n;i<t.length;)o=t[i++],o.length&&(n=o.split("="),r.push({key:WW(n.shift()),value:WW(n.join("="))}))},Sze=function(r){this.entries.length=0,VW(this.entries,r)},Fm=function(r,e){if(r<e)throw TypeError("Not enough arguments")},QI=sze(function(e,t){HW(this,{type:qW,iterator:UW(zn(e).entries),kind:t})},"Iterator",function(){var e=gze(this),t=e.kind,i=e.iterator.next(),o=i.value;return i.done||(i.value=t==="keys"?o.key:t==="values"?o.value:[o.key,o.value]),i}),jg=function(){aze(this,jg,Rm);var e=arguments.length>0?arguments[0]:void 0,t=this,i=[],o,n,s,a,l,c,u,d,p;if(HW(t,{type:Rm,entries:i,updateURL:function(){},updateSearchParams:Sze}),e!==void 0)if(LW(e))if(o=mze(e),typeof o=="function")for(n=o.call(e),s=n.next;!(a=s.call(n)).done;){if(l=UW(dze(a.value)),c=l.next,(u=c.call(l)).done||(d=c.call(l)).done||!c.call(l).done)throw TypeError("Expected sequence with length 2");i.push({key:u.value+"",value:d.value+""})}else for(p in e)lze(e,p)&&i.push({key:p,value:e[p]+""});else VW(i,typeof e=="string"?e.charAt(0)==="?"?e.slice(1):e:e+"")},zx=jg.prototype;oze(zx,{append:function(e,t){Fm(arguments.length,2);var i=zn(this);i.entries.push({key:e+"",value:t+""}),i.updateURL()},delete:function(r){Fm(arguments.length,1);for(var e=zn(this),t=e.entries,i=r+"",o=0;o<t.length;)t[o].key===i?t.splice(o,1):o++;e.updateURL()},get:function(e){Fm(arguments.length,1);for(var t=zn(this).entries,i=e+"",o=0;o<t.length;o++)if(t[o].key===i)return t[o].value;return null},getAll:function(e){Fm(arguments.length,1);for(var t=zn(this).entries,i=e+"",o=[],n=0;n<t.length;n++)t[n].key===i&&o.push(t[n].value);return o},has:function(e){Fm(arguments.length,1);for(var t=zn(this).entries,i=e+"",o=0;o<t.length;)if(t[o++].key===i)return!0;return!1},set:function(e,t){Fm(arguments.length,1);for(var i=zn(this),o=i.entries,n=!1,s=e+"",a=t+"",l=0,c;l<o.length;l++)c=o[l],c.key===s&&(n?o.splice(l--,1):(n=!0,c.value=a));n||o.push({key:s,value:a}),i.updateURL()},sort:function(){var e=zn(this),t=e.entries,i=t.slice(),o,n,s;for(t.length=0,s=0;s<i.length;s++){for(o=i[s],n=0;n<s;n++)if(t[n].key>o.key){t.splice(n,0,o);break}n===s&&t.push(o)}e.updateURL()},forEach:function(e){for(var t=zn(this).entries,i=cze(e,arguments.length>1?arguments[1]:void 0,3),o=0,n;o<t.length;)n=t[o++],i(n.value,n.key,this)},keys:function(){return new QI(this,"keys")},values:function(){return new QI(this,"values")},entries:function(){return new QI(this,"entries")}},{enumerable:!0});BW(zx,fze,zx.entries);BW(zx,"toString",function(){for(var e=zn(this).entries,t=[],i=0,o;i<e.length;)o=e[i++],t.push(GW(o.key)+"="+GW(o.value));return t.join("&")},{enumerable:!0});nze(jg,Rm);AW({global:!0,forced:!MW},{URLSearchParams:jg});!MW&&typeof NW=="function"&&typeof ZI=="function"&&AW({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t=[e],i,o,n;return arguments.length>1&&(i=arguments[1],LW(i)&&(o=i.body,uze(o)===Rm&&(n=i.headers?new ZI(i.headers):new ZI,n.has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),i=pze(i,{body:zW(0,String(o)),headers:zW(0,n)}))),t.push(i)),NW.apply(this,t)}});$W.exports={URLSearchParams:jg,getState:zn}});var CG=S(()=>{"use strict";Uv();var wze=W(),tD=bt(),Tze=VI(),kze=Xe(),Eze=Ev(),Ux=Jr(),Ize=Ma(),rD=dr(),iD=m2(),Am=c2(),Dze=tg().codeAt,Oze=OW(),Rze=An(),KW=eD(),XW=di(),Wg=kze.URL,Fze=KW.URLSearchParams,oD=KW.getState,Aze=XW.set,pr=XW.getterFor("URL"),Pze=Math.floor,YW=Math.pow,Mze="Invalid authority",nD="Invalid scheme",Xu="Invalid host",JW="Invalid port",ZW=/[A-Za-z]/,Bze=/[\d+-.A-Za-z]/,sD=/\d/,Lze=/^(0x|0X)/,zze=/^[0-7]+$/,Uze=/^\d+$/,QW=/^[\dA-Fa-f]+$/,Nze=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,qze=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Hze=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,jze=/[\u0009\u000A\u000D]/g,an,aD=function(r,e){var t,i,o;if(e.charAt(0)=="["){if(e.charAt(e.length-1)!="]"||(t=Gze(e.slice(1,-1)),!t))return Xu;r.host=t}else if(Wr(r)){if(e=Oze(e),Nze.test(e)||(t=Wze(e),t===null))return Xu;r.host=t}else{if(qze.test(e))return Xu;for(t="",i=Am(e),o=0;o<i.length;o++)t+=dc(i[o],Nx);r.host=t}},Wze=function(r){var e=r.split("."),t,i,o,n,s,a,l;if(e.length&&e[e.length-1]==""&&e.pop(),t=e.length,t>4)return r;for(i=[],o=0;o<t;o++){if(n=e[o],n=="")return r;if(s=10,n.length>1&&n.charAt(0)=="0"&&(s=Lze.test(n)?16:8,n=n.slice(s==8?1:2)),n==="")a=0;else{if(!(s==10?Uze:s==8?zze:QW).test(n))return r;a=parseInt(n,s)}i.push(a)}for(o=0;o<t;o++)if(a=i[o],o==t-1){if(a>=YW(256,5-t))return null}else if(a>255)return null;for(l=i.pop(),o=0;o<i.length;o++)l+=i[o]*YW(256,3-o);return l},Gze=function(r){var e=[0,0,0,0,0,0,0,0],t=0,i=null,o=0,n,s,a,l,c,u,d,p=function(){return r.charAt(o)};if(p()==":"){if(r.charAt(1)!=":")return;o+=2,t++,i=t}for(;p();){if(t==8)return;if(p()==":"){if(i!==null)return;o++,t++,i=t;continue}for(n=s=0;s<4&&QW.test(p());)n=n*16+parseInt(p(),16),o++,s++;if(p()=="."){if(s==0||(o-=s,t>6))return;for(a=0;p();){if(l=null,a>0)if(p()=="."&&a<4)o++;else return;if(!sD.test(p()))return;for(;sD.test(p());){if(c=parseInt(p(),10),l===null)l=c;else{if(l==0)return;l=l*10+c}if(l>255)return;o++}e[t]=e[t]*256+l,a++,(a==2||a==4)&&t++}if(a!=4)return;break}else if(p()==":"){if(o++,!p())return}else if(p())return;e[t++]=n}if(i!==null)for(u=t-i,t=7;t!=0&&u>0;)d=e[t],e[t--]=e[i+u-1],e[i+--u]=d;else if(t!=8)return;return e},Vze=function(r){for(var e=null,t=1,i=null,o=0,n=0;n<8;n++)r[n]!==0?(o>t&&(e=i,t=o),i=null,o=0):(i===null&&(i=n),++o);return o>t&&(e=i,t=o),e},Gg=function(r){var e,t,i,o;if(typeof r=="number"){for(e=[],t=0;t<4;t++)e.unshift(r%256),r=Pze(r/256);return e.join(".")}else if(typeof r=="object"){for(e="",i=Vze(r),t=0;t<8;t++)o&&r[t]===0||(o&&(o=!1),i===t?(e+=t?":":"::",o=!0):(e+=r[t].toString(16),t<7&&(e+=":")));return"["+e+"]"}return r},Nx={},eG=iD({},Nx,{" ":1,'"':1,"<":1,">":1,"`":1}),tG=iD({},eG,{"#":1,"?":1,"{":1,"}":1}),lD=iD({},tG,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),dc=function(r,e){var t=Dze(r,0);return t>32&&t<127&&!rD(e,r)?r:encodeURIComponent(r)},qx={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Wr=function(r){return rD(qx,r.scheme)},cD=function(r){return r.username!=""||r.password!=""},uD=function(r){return!r.host||r.cannotBeABaseURL||r.scheme=="file"},Vg=function(r,e){var t;return r.length==2&&ZW.test(r.charAt(0))&&((t=r.charAt(1))==":"||!e&&t=="|")},rG=function(r){var e;return r.length>1&&Vg(r.slice(0,2))&&(r.length==2||(e=r.charAt(2))==="/"||e==="\\"||e==="?"||e==="#")},iG=function(r){var e=r.path,t=e.length;t&&(r.scheme!="file"||t!=1||!Vg(e[0],!0))&&e.pop()},$ze=function(r){return r==="."||r.toLowerCase()==="%2e"},Kze=function(r){return r=r.toLowerCase(),r===".."||r==="%2e."||r===".%2e"||r==="%2e%2e"},dD={},oG={},pD={},nG={},sG={},mD={},aG={},lG={},Hx={},jx={},hD={},fD={},gD={},bD={},cG={},yD={},Pm={},Is={},uG={},Yu={},Na={},Ds=function(r,e,t,i){var o=t||dD,n=0,s="",a=!1,l=!1,c=!1,u,d,p,h;for(t||(r.scheme="",r.username="",r.password="",r.host=null,r.port=null,r.path=[],r.query=null,r.fragment=null,r.cannotBeABaseURL=!1,e=e.replace(Hze,"")),e=e.replace(jze,""),u=Am(e);n<=u.length;){switch(d=u[n],o){case dD:if(d&&ZW.test(d))s+=d.toLowerCase(),o=oG;else{if(t)return nD;o=pD;continue}break;case oG:if(d&&(Bze.test(d)||d=="+"||d=="-"||d=="."))s+=d.toLowerCase();else if(d==":"){if(t&&(Wr(r)!=rD(qx,s)||s=="file"&&(cD(r)||r.port!==null)||r.scheme=="file"&&!r.host))return;if(r.scheme=s,t){Wr(r)&&qx[r.scheme]==r.port&&(r.port=null);return}s="",r.scheme=="file"?o=bD:Wr(r)&&i&&i.scheme==r.scheme?o=nG:Wr(r)?o=lG:u[n+1]=="/"?(o=sG,n++):(r.cannotBeABaseURL=!0,r.path.push(""),o=uG)}else{if(t)return nD;s="",o=pD,n=0;continue}break;case pD:if(!i||i.cannotBeABaseURL&&d!="#")return nD;if(i.cannotBeABaseURL&&d=="#"){r.scheme=i.scheme,r.path=i.path.slice(),r.query=i.query,r.fragment="",r.cannotBeABaseURL=!0,o=Na;break}o=i.scheme=="file"?bD:mD;continue;case nG:if(d=="/"&&u[n+1]=="/")o=Hx,n++;else{o=mD;continue}break;case sG:if(d=="/"){o=jx;break}else{o=Is;continue}case mD:if(r.scheme=i.scheme,d==an)r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=i.path.slice(),r.query=i.query;else if(d=="/"||d=="\\"&&Wr(r))o=aG;else if(d=="?")r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=i.path.slice(),r.query="",o=Yu;else if(d=="#")r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=i.path.slice(),r.query=i.query,r.fragment="",o=Na;else{r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=i.path.slice(),r.path.pop(),o=Is;continue}break;case aG:if(Wr(r)&&(d=="/"||d=="\\"))o=Hx;else if(d=="/")o=jx;else{r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,o=Is;continue}break;case lG:if(o=Hx,d!="/"||s.charAt(n+1)!="/")continue;n++;break;case Hx:if(d!="/"&&d!="\\"){o=jx;continue}break;case jx:if(d=="@"){a&&(s="%40"+s),a=!0,p=Am(s);for(var f=0;f<p.length;f++){var _=p[f];if(_==":"&&!c){c=!0;continue}var x=dc(_,lD);c?r.password+=x:r.username+=x}s=""}else if(d==an||d=="/"||d=="?"||d=="#"||d=="\\"&&Wr(r)){if(a&&s=="")return Mze;n-=Am(s).length+1,s="",o=hD}else s+=d;break;case hD:case fD:if(t&&r.scheme=="file"){o=yD;continue}else if(d==":"&&!l){if(s=="")return Xu;if(h=aD(r,s),h)return h;if(s="",o=gD,t==fD)return}else if(d==an||d=="/"||d=="?"||d=="#"||d=="\\"&&Wr(r)){if(Wr(r)&&s=="")return Xu;if(t&&s==""&&(cD(r)||r.port!==null))return;if(h=aD(r,s),h)return h;if(s="",o=Pm,t)return;continue}else d=="["?l=!0:d=="]"&&(l=!1),s+=d;break;case gD:if(sD.test(d))s+=d;else if(d==an||d=="/"||d=="?"||d=="#"||d=="\\"&&Wr(r)||t){if(s!=""){var y=parseInt(s,10);if(y>65535)return JW;r.port=Wr(r)&&y===qx[r.scheme]?null:y,s=""}if(t)return;o=Pm;continue}else return JW;break;case bD:if(r.scheme="file",d=="/"||d=="\\")o=cG;else if(i&&i.scheme=="file")if(d==an)r.host=i.host,r.path=i.path.slice(),r.query=i.query;else if(d=="?")r.host=i.host,r.path=i.path.slice(),r.query="",o=Yu;else if(d=="#")r.host=i.host,r.path=i.path.slice(),r.query=i.query,r.fragment="",o=Na;else{rG(u.slice(n).join(""))||(r.host=i.host,r.path=i.path.slice(),iG(r)),o=Is;continue}else{o=Is;continue}break;case cG:if(d=="/"||d=="\\"){o=yD;break}i&&i.scheme=="file"&&!rG(u.slice(n).join(""))&&(Vg(i.path[0],!0)?r.path.push(i.path[0]):r.host=i.host),o=Is;continue;case yD:if(d==an||d=="/"||d=="\\"||d=="?"||d=="#"){if(!t&&Vg(s))o=Is;else if(s==""){if(r.host="",t)return;o=Pm}else{if(h=aD(r,s),h)return h;if(r.host=="localhost"&&(r.host=""),t)return;s="",o=Pm}continue}else s+=d;break;case Pm:if(Wr(r)){if(o=Is,d!="/"&&d!="\\")continue}else if(!t&&d=="?")r.query="",o=Yu;else if(!t&&d=="#")r.fragment="",o=Na;else if(d!=an&&(o=Is,d!="/"))continue;break;case Is:if(d==an||d=="/"||d=="\\"&&Wr(r)||!t&&(d=="?"||d=="#")){if(Kze(s)?(iG(r),d!="/"&&!(d=="\\"&&Wr(r))&&r.path.push("")):$ze(s)?d!="/"&&!(d=="\\"&&Wr(r))&&r.path.push(""):(r.scheme=="file"&&!r.path.length&&Vg(s)&&(r.host&&(r.host=""),s=s.charAt(0)+":"),r.path.push(s)),s="",r.scheme=="file"&&(d==an||d=="?"||d=="#"))for(;r.path.length>1&&r.path[0]==="";)r.path.shift();d=="?"?(r.query="",o=Yu):d=="#"&&(r.fragment="",o=Na)}else s+=dc(d,tG);break;case uG:d=="?"?(r.query="",o=Yu):d=="#"?(r.fragment="",o=Na):d!=an&&(r.path[0]+=dc(d,Nx));break;case Yu:!t&&d=="#"?(r.fragment="",o=Na):d!=an&&(d=="'"&&Wr(r)?r.query+="%27":d=="#"?r.query+="%23":r.query+=dc(d,Nx));break;case Na:d!=an&&(r.fragment+=dc(d,eG));break}n++}},Ju=function(e){var t=Ize(this,Ju,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(e),n=Aze(t,{type:"URL"}),s,a;if(i!==void 0){if(i instanceof Ju)s=pr(i);else if(a=Ds(s={},String(i)),a)throw TypeError(a)}if(a=Ds(n,o,null,s),a)throw TypeError(a);var l=n.searchParams=new Fze,c=oD(l);c.updateSearchParams(n.query),c.updateURL=function(){n.query=String(l)||null},tD||(t.href=Wx.call(t),t.origin=dG.call(t),t.protocol=pG.call(t),t.username=mG.call(t),t.password=hG.call(t),t.host=fG.call(t),t.hostname=gG.call(t),t.port=bG.call(t),t.pathname=yG.call(t),t.search=_G.call(t),t.searchParams=vG.call(t),t.hash=xG.call(t))},_D=Ju.prototype,Wx=function(){var r=pr(this),e=r.scheme,t=r.username,i=r.password,o=r.host,n=r.port,s=r.path,a=r.query,l=r.fragment,c=e+":";return o!==null?(c+="//",cD(r)&&(c+=t+(i?":"+i:"")+"@"),c+=Gg(o),n!==null&&(c+=":"+n)):e=="file"&&(c+="//"),c+=r.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",a!==null&&(c+="?"+a),l!==null&&(c+="#"+l),c},dG=function(){var r=pr(this),e=r.scheme,t=r.port;if(e=="blob")try{return new URL(e.path[0]).origin}catch(i){return"null"}return e=="file"||!Wr(r)?"null":e+"://"+Gg(r.host)+(t!==null?":"+t:"")},pG=function(){return pr(this).scheme+":"},mG=function(){return pr(this).username},hG=function(){return pr(this).password},fG=function(){var r=pr(this),e=r.host,t=r.port;return e===null?"":t===null?Gg(e):Gg(e)+":"+t},gG=function(){var r=pr(this).host;return r===null?"":Gg(r)},bG=function(){var r=pr(this).port;return r===null?"":String(r)},yG=function(){var r=pr(this),e=r.path;return r.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},_G=function(){var r=pr(this).query;return r?"?"+r:""},vG=function(){return pr(this).searchParams},xG=function(){var r=pr(this).fragment;return r?"#"+r:""},ln=function(r,e){return{get:r,set:e,configurable:!0,enumerable:!0}};tD&&Eze(_D,{href:ln(Wx,function(r){var e=pr(this),t=String(r),i=Ds(e,t);if(i)throw TypeError(i);oD(e.searchParams).updateSearchParams(e.query)}),origin:ln(dG),protocol:ln(pG,function(r){var e=pr(this);Ds(e,String(r)+":",dD)}),username:ln(mG,function(r){var e=pr(this),t=Am(String(r));if(!uD(e)){e.username="";for(var i=0;i<t.length;i++)e.username+=dc(t[i],lD)}}),password:ln(hG,function(r){var e=pr(this),t=Am(String(r));if(!uD(e)){e.password="";for(var i=0;i<t.length;i++)e.password+=dc(t[i],lD)}}),host:ln(fG,function(r){var e=pr(this);e.cannotBeABaseURL||Ds(e,String(r),hD)}),hostname:ln(gG,function(r){var e=pr(this);e.cannotBeABaseURL||Ds(e,String(r),fD)}),port:ln(bG,function(r){var e=pr(this);uD(e)||(r=String(r),r==""?e.port=null:Ds(e,r,gD))}),pathname:ln(yG,function(r){var e=pr(this);e.cannotBeABaseURL||(e.path=[],Ds(e,r+"",Pm))}),search:ln(_G,function(r){var e=pr(this);r=String(r),r==""?e.query=null:(r.charAt(0)=="?"&&(r=r.slice(1)),e.query="",Ds(e,r,Yu)),oD(e.searchParams).updateSearchParams(e.query)}),searchParams:ln(vG),hash:ln(xG,function(r){var e=pr(this);if(r=String(r),r==""){e.fragment=null;return}r.charAt(0)=="#"&&(r=r.slice(1)),e.fragment="",Ds(e,r,Na)})});Ux(_D,"toJSON",function(){return Wx.call(this)},{enumerable:!0});Ux(_D,"toString",function(){return Wx.call(this)},{enumerable:!0});Wg&&(vD=Wg.createObjectURL,xD=Wg.revokeObjectURL,vD&&Ux(Ju,"createObjectURL",function(e){return vD.apply(Wg,arguments)}),xD&&Ux(Ju,"revokeObjectURL",function(e){return xD.apply(Wg,arguments)}));var vD,xD;Rze(Ju,"URL");wze({global:!0,forced:!Tze,sham:!tD},{URL:Ju})});var SG=S(()=>{"use strict";var Xze=W();Xze({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})});var TG=S((Gat,wG)=>{pW();gW();_W();xW();wW();CG();SG();eD();var Yze=ec();wG.exports=Yze});var EG=S((Vat,kG)=>{cW();TG();var Jze=ec();kG.exports=Jze});var DG=S(($at,CD)=>{var IG=function(r){"use strict";var e=Object.prototype,t=e.hasOwnProperty,i,o=typeof Symbol=="function"?Symbol:{},n=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(oe,J,Z){return Object.defineProperty(oe,J,{value:Z,enumerable:!0,configurable:!0,writable:!0}),oe[J]}try{l({},"")}catch(oe){l=function(J,Z,we){return J[Z]=we}}function c(oe,J,Z,we){var ve=J&&J.prototype instanceof x?J:x,Ne=Object.create(ve.prototype),Ae=new ye(we||[]);return Ne._invoke=A(oe,Z,Ae),Ne}r.wrap=c;function u(oe,J,Z){try{return{type:"normal",arg:oe.call(J,Z)}}catch(we){return{type:"throw",arg:we}}}var d="suspendedStart",p="suspendedYield",h="executing",f="completed",_={};function x(){}function y(){}function D(){}var E={};E[n]=function(){return this};var F=Object.getPrototypeOf,N=F&&F(F(De([])));N&&N!==e&&t.call(N,n)&&(E=N);var R=D.prototype=x.prototype=Object.create(E);y.prototype=R.constructor=D,D.constructor=y,y.displayName=l(D,a,"GeneratorFunction");function B(oe){["next","throw","return"].forEach(function(J){l(oe,J,function(Z){return this._invoke(J,Z)})})}r.isGeneratorFunction=function(oe){var J=typeof oe=="function"&&oe.constructor;return J?J===y||(J.displayName||J.name)==="GeneratorFunction":!1},r.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,D):(oe.__proto__=D,l(oe,a,"GeneratorFunction")),oe.prototype=Object.create(R),oe},r.awrap=function(oe){return{__await:oe}};function se(oe,J){function Z(Ne,Ae,Ke,Tt){var Xt=u(oe[Ne],oe,Ae);if(Xt.type==="throw")Tt(Xt.arg);else{var qi=Xt.arg,at=qi.value;return at&&typeof at=="object"&&t.call(at,"__await")?J.resolve(at.__await).then(function(Ge){Z("next",Ge,Ke,Tt)},function(Ge){Z("throw",Ge,Ke,Tt)}):J.resolve(at).then(function(Ge){qi.value=Ge,Ke(qi)},function(Ge){return Z("throw",Ge,Ke,Tt)})}}var we;function ve(Ne,Ae){function Ke(){return new J(function(Tt,Xt){Z(Ne,Ae,Tt,Xt)})}return we=we?we.then(Ke,Ke):Ke()}this._invoke=ve}B(se.prototype),se.prototype[s]=function(){return this},r.AsyncIterator=se,r.async=function(oe,J,Z,we,ve){ve===void 0&&(ve=Promise);var Ne=new se(c(oe,J,Z,we),ve);return r.isGeneratorFunction(J)?Ne:Ne.next().then(function(Ae){return Ae.done?Ae.value:Ne.next()})};function A(oe,J,Z){var we=d;return function(Ne,Ae){if(we===h)throw new Error("Generator is already running");if(we===f){if(Ne==="throw")throw Ae;return Kt()}for(Z.method=Ne,Z.arg=Ae;;){var Ke=Z.delegate;if(Ke){var Tt=q(Ke,Z);if(Tt){if(Tt===_)continue;return Tt}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(we===d)throw we=f,Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);we=h;var Xt=u(oe,J,Z);if(Xt.type==="normal"){if(we=Z.done?f:p,Xt.arg===_)continue;return{value:Xt.arg,done:Z.done}}else Xt.type==="throw"&&(we=f,Z.method="throw",Z.arg=Xt.arg)}}}function q(oe,J){var Z=oe.iterator[J.method];if(Z===i){if(J.delegate=null,J.method==="throw"){if(oe.iterator.return&&(J.method="return",J.arg=i,q(oe,J),J.method==="throw"))return _;J.method="throw",J.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var we=u(Z,oe.iterator,J.arg);if(we.type==="throw")return J.method="throw",J.arg=we.arg,J.delegate=null,_;var ve=we.arg;if(!ve)return J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,_;if(ve.done)J[oe.resultName]=ve.value,J.next=oe.nextLoc,J.method!=="return"&&(J.method="next",J.arg=i);else return ve;return J.delegate=null,_}B(R),l(R,a,"Generator"),R[n]=function(){return this},R.toString=function(){return"[object Generator]"};function ue(oe){var J={tryLoc:oe[0]};1 in oe&&(J.catchLoc=oe[1]),2 in oe&&(J.finallyLoc=oe[2],J.afterLoc=oe[3]),this.tryEntries.push(J)}function _e(oe){var J=oe.completion||{};J.type="normal",delete J.arg,oe.completion=J}function ye(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(ue,this),this.reset(!0)}r.keys=function(oe){var J=[];for(var Z in oe)J.push(Z);return J.reverse(),function we(){for(;J.length;){var ve=J.pop();if(ve in oe)return we.value=ve,we.done=!1,we}return we.done=!0,we}};function De(oe){if(oe){var J=oe[n];if(J)return J.call(oe);if(typeof oe.next=="function")return oe;if(!isNaN(oe.length)){var Z=-1,we=function ve(){for(;++Z<oe.length;)if(t.call(oe,Z))return ve.value=oe[Z],ve.done=!1,ve;return ve.value=i,ve.done=!0,ve};return we.next=we}}return{next:Kt}}r.values=De;function Kt(){return{value:i,done:!0}}return ye.prototype={constructor:ye,reset:function(oe){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(_e),!oe)for(var J in this)J.charAt(0)==="t"&&t.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=i)},stop:function(){this.done=!0;var oe=this.tryEntries[0],J=oe.completion;if(J.type==="throw")throw J.arg;return this.rval},dispatchException:function(oe){if(this.done)throw oe;var J=this;function Z(Tt,Xt){return Ne.type="throw",Ne.arg=oe,J.next=Tt,Xt&&(J.method="next",J.arg=i),!!Xt}for(var we=this.tryEntries.length-1;we>=0;--we){var ve=this.tryEntries[we],Ne=ve.completion;if(ve.tryLoc==="root")return Z("end");if(ve.tryLoc<=this.prev){var Ae=t.call(ve,"catchLoc"),Ke=t.call(ve,"finallyLoc");if(Ae&&Ke){if(this.prev<ve.catchLoc)return Z(ve.catchLoc,!0);if(this.prev<ve.finallyLoc)return Z(ve.finallyLoc)}else if(Ae){if(this.prev<ve.catchLoc)return Z(ve.catchLoc,!0)}else if(Ke){if(this.prev<ve.finallyLoc)return Z(ve.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(oe,J){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var we=this.tryEntries[Z];if(we.tryLoc<=this.prev&&t.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var ve=we;break}}ve&&(oe==="break"||oe==="continue")&&ve.tryLoc<=J&&J<=ve.finallyLoc&&(ve=null);var Ne=ve?ve.completion:{};return Ne.type=oe,Ne.arg=J,ve?(this.method="next",this.next=ve.finallyLoc,_):this.complete(Ne)},complete:function(oe,J){if(oe.type==="throw")throw oe.arg;return oe.type==="break"||oe.type==="continue"?this.next=oe.arg:oe.type==="return"?(this.rval=this.arg=oe.arg,this.method="return",this.next="end"):oe.type==="normal"&&J&&(this.next=J),_},finish:function(oe){for(var J=this.tryEntries.length-1;J>=0;--J){var Z=this.tryEntries[J];if(Z.finallyLoc===oe)return this.complete(Z.completion,Z.afterLoc),_e(Z),_}},catch:function(oe){for(var J=this.tryEntries.length-1;J>=0;--J){var Z=this.tryEntries[J];if(Z.tryLoc===oe){var we=Z.completion;if(we.type==="throw"){var ve=we.arg;_e(Z)}return ve}}throw new Error("illegal catch attempt")},delegateYield:function(oe,J,Z){return this.delegate={iterator:De(oe),resultName:J,nextLoc:Z},this.method==="next"&&(this.arg=i),_}},r}(typeof CD=="object"?CD.exports:{});try{regeneratorRuntime=IG}catch(r){Function("r","regeneratorRuntime = r")(IG)}});var SD=S((Xat,OG)=>{var Zze=Xe(),Qze=_s(),e8e=Function.call;OG.exports=function(r,e,t){return Qze(e8e,Zze[r].prototype[e],t)}});var FG=S((Yat,RG)=>{A2();var t8e=SD();RG.exports=t8e("Array","find")});var PG=S((Jat,AG)=>{var r8e=FG();AG.exports=r8e});var BG=S((Zat,MG)=>{z2();var i8e=SD();MG.exports=i8e("Array","map")});var zG=S((Qat,LG)=>{var o8e=BG();LG.exports=o8e});function Mm(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:s8e}function wo(){return++Te.mobxGuid}function Ut(r){throw pc(!1,r),"X"}function pc(r,e){if(!r)throw new Error("[mobx] "+(e||n8e))}function qa(r,e){return!1}function wD(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}function a8e(r){var e=[];return r.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e}function TD(r){return r!==null&&typeof r=="object"}function Bm(r){if(r===null||typeof r!="object")return!1;var e=Object.getPrototypeOf(r);return e===Object.prototype||e===null}function l8e(r){if(Lm(r)||Ps(r))return r;if(Array.isArray(r))return new Map(r);if(Bm(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ut("Cannot convert to map from '"+r+"'")}function c8e(r,e){for(var t=0;t<e.length;t++)Ha(r,e[t],r[e[t]])}function Ha(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function $g(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function u8e(r,e){}function mc(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(i){return TD(i)&&i[t]===!0}}function d8e(r,e){return typeof r=="number"&&typeof e=="number"&&isNaN(r)&&isNaN(e)}function Lm(r){return Mm().Map!==void 0&&r instanceof Mm().Map}function Kg(r){return r instanceof Set}function ja(r){for(var e=[];;){var t=r.next();if(t.done)break;e.push(t.value)}return e}function HG(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function jG(r){return r===null?null:typeof r=="object"?""+r:r}function WG(r,e){for(var t=r.next();!t.done;)e(t.value),t=r.next()}function GG(){return typeof Symbol=="function"&&Symbol.iterator||"@@iterator"}function kD(r,e){$g(r,GG(),e)}function Xg(r){return r[GG()]=p8e,r}function ED(){return typeof Symbol=="function"&&Symbol.toStringTag||"@@toStringTag"}function p8e(){return this}function $x(r,e,t){e===void 0&&(e=qG),t===void 0&&(t=qG);var i=new Vx(r);return K8e(i,e),pV(i,t),i}function VG(r,e){return r===e}function m8e(r,e){return WD(r,e)}function h8e(r,e){return WD(r,e,1)}function f8e(r,e){return d8e(r,e)||VG(r,e)}function $G(r,e){DD(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function OD(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,n=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return n}function RD(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(OD(arguments[e]));return r}function y8e(r,e){var t=e?g8e:b8e;return t[r]||(t[r]={configurable:!0,enumerable:e,get:function(){return Zu(this),this[r]},set:function(i){Zu(this),this[r]=i}})}function Zu(r){if(r.__mobxDidRunLazyInitializers!==!0){var e=r.__mobxDecorators;if(e){Ha(r,"__mobxDidRunLazyInitializers",!0);for(var t in e){var i=e[t];i.propertyCreator(r,i.prop,i.descriptor,i.decoratorTarget,i.decoratorArguments)}}}}function KG(r,e){return function(){var i,o=function(s,a,l,c){if(c===!0)return e(s,a,l,s,i),null;if(!Object.prototype.hasOwnProperty.call(s,"__mobxDecorators")){var u=s.__mobxDecorators;Ha(s,"__mobxDecorators",or({},u))}return s.__mobxDecorators[a]={prop:a,propertyCreator:e,descriptor:l,decoratorTarget:s,decoratorArguments:i},y8e(a,r)};return _8e(arguments)?(i=Gx,o.apply(null,arguments)):(i=Array.prototype.slice.call(arguments),o)}}function _8e(r){return(r.length===2||r.length===3)&&typeof r[1]=="string"||r.length===4&&r[3]===!0}function Yg(r,e,t){return s0(r)?r:Array.isArray(r)?ge.array(r,{name:t}):Bm(r)?ge.object(r,void 0,{name:t}):Lm(r)?ge.map(r,{name:t}):Kg(r)?ge.set(r,{name:t}):r}function v8e(r,e,t){return r==null||id(r)||rd(r)||Ps(r)||_c(r)?r:Array.isArray(r)?ge.array(r,{name:t,deep:!1}):Bm(r)?ge.object(r,void 0,{name:t,deep:!1}):Lm(r)?ge.map(r,{name:t,deep:!1}):Kg(r)?ge.set(r,{name:t,deep:!1}):Ut(!1)}function Xx(r){return r}function x8e(r,e,t){return WD(r,e)?e:r}function Yx(r){pc(r);var e=KG(!0,function(i,o,n,s,a){var l=n?n.initializer?n.initializer.call(i):n.value:void 0;u6e(i,o,l,r)}),t=(typeof process!="undefined"&&process.env,e);return t.enhancer=r,t}function zm(r){return r==null?XG:typeof r=="string"?{name:r,deep:!0}:r}function Jx(r){return r.defaultDecorator?r.defaultDecorator.enhancer:r.deep===!1?Xx:Yg}function T8e(r,e,t){if(typeof arguments[1]=="string")return FD.apply(null,arguments);if(s0(r))return r;var i=Bm(r)?ge.object(r,e,t):Array.isArray(r)?ge.array(r,e):Lm(r)?ge.map(r,e):Kg(r)?ge.set(r,e):r;if(i!==r)return i;Ut(!1)}function Wa(r){Ut("Expected one or two arguments to observable."+r+". Did you accidentally try to use observable."+r+" as decorator?")}function Jg(r){return r instanceof Qx}function AD(r){switch(r.dependenciesState){case Ct.UP_TO_DATE:return!1;case Ct.NOT_TRACKING:case Ct.STALE:return!0;case Ct.POSSIBLY_STALE:{for(var e=Qu(!0),t=Nm(),i=r.observing,o=i.length,n=0;n<o;n++){var s=i[n];if(t0(s)){if(Te.disableErrorBoundaries)s.get();else try{s.get()}catch(a){return hc(t),Ga(e),!0}if(r.dependenciesState===Ct.STALE)return hc(t),Ga(e),!0}}return QG(r),hc(t),Ga(e),!1}}}function Um(r){var e=r.observers.length>0;Te.computationDepth>0&&e&&Ut(!1),!Te.allowStateChanges&&(e||Te.enforceActions==="strict")&&Ut(!1)}function E8e(r){}function ZG(r,e,t){var i=Qu(!0);QG(r),r.newObserving=new Array(r.observing.length+100),r.unboundDepsCount=0,r.runId=++Te.runId;var o=Te.trackingDerivation;Te.trackingDerivation=r;var n;if(Te.disableErrorBoundaries===!0)n=e.call(t);else try{n=e.call(t)}catch(s){n=new Qx(s)}return Te.trackingDerivation=o,D8e(r),r.observing.length===0&&I8e(r),Ga(i),n}function I8e(r){}function D8e(r){for(var e=r.observing,t=r.observing=r.newObserving,i=Ct.UP_TO_DATE,o=0,n=r.unboundDepsCount,s=0;s<n;s++){var a=t[s];a.diffValue===0&&(a.diffValue=1,o!==s&&(t[o]=a),o++),a.dependenciesState>i&&(i=a.dependenciesState)}for(t.length=o,r.newObserving=null,n=e.length;n--;){var a=e[n];a.diffValue===0&&oV(a,r),a.diffValue=0}for(;o--;){var a=t[o];a.diffValue===1&&(a.diffValue=0,M8e(a,r))}i!==Ct.UP_TO_DATE&&(r.dependenciesState=i,r.onBecomeStale())}function PD(r){var e=r.observing;r.observing=[];for(var t=e.length;t--;)oV(e[t],r);r.dependenciesState=Ct.NOT_TRACKING}function MD(r){var e=Nm(),t=r();return hc(e),t}function Nm(){var r=Te.trackingDerivation;return Te.trackingDerivation=null,r}function hc(r){Te.trackingDerivation=r}function Qu(r){var e=Te.allowStateReads;return Te.allowStateReads=r,e}function Ga(r){Te.allowStateReads=r}function QG(r){if(r.dependenciesState!==Ct.UP_TO_DATE){r.dependenciesState=Ct.UP_TO_DATE;for(var e=r.observing,t=e.length;t--;)e[t].lowestObserverState=Ct.UP_TO_DATE}}function ed(r,e){var t=function(){return tV(r,e,this,arguments)};return t.isMobxAction=!0,t}function tV(r,e,t,i){var o=R8e(r,t,i);try{return e.apply(t,i)}catch(n){throw o.error=n,n}finally{F8e(o)}}function R8e(r,e,t){var i=Zr()&&!!r,o=0;if(i){o=Date.now();var n=t&&t.length||0,s=new Array(n);if(n>0)for(var a=0;a<n;a++)s[a]=t[a];Nn({type:"action",name:r,object:e,arguments:s})}var l=Nm();Va();var c=Zg(!0),u=Qu(!0),d={prevDerivation:l,prevAllowStateChanges:c,prevAllowStateReads:u,notifySpy:i,startTime:o,actionId:O8e++,parentActionId:e0};return e0=d.actionId,d}function F8e(r){e0!==r.actionId&&Ut("invalid action stack. did you forget to finish an action?"),e0=r.parentActionId,r.error!==void 0&&(Te.suppressReactionErrors=!0),Qg(r.prevAllowStateChanges),Ga(r.prevAllowStateReads),$a(),hc(r.prevDerivation),r.notifySpy&&qn({time:Date.now()-r.startTime}),Te.suppressReactionErrors=!1}function rV(r,e){var t=Zg(r),i;try{i=e()}finally{Qg(t)}return i}function Zg(r){var e=Te.allowStateChanges;return Te.allowStateChanges=r,e}function Qg(r){Te.allowStateChanges=r}function P8e(){(Te.pendingReactions.length||Te.inBatch||Te.isRunningReactions)&&Ut("isolateGlobalState should be called before MobX is running any reactions"),iV=!0,i0&&(--Mm().__mobxInstanceCount==0&&(Mm().__mobxGlobals=void 0),Te=new r0)}function M8e(r,e){var t=r.observers.length;t&&(r.observersIndexes[e.__mapid]=t),r.observers[t]=e,r.lowestObserverState>e.dependenciesState&&(r.lowestObserverState=e.dependenciesState)}function oV(r,e){if(r.observers.length===1)r.observers.length=0,nV(r);else{var t=r.observers,i=r.observersIndexes,o=t.pop();if(o!==e){var n=i[e.__mapid]||0;n?i[o.__mapid]=n:delete i[o.__mapid],t[n]=o}delete i[e.__mapid]}}function nV(r){r.isPendingUnobservation===!1&&(r.isPendingUnobservation=!0,Te.pendingUnobservations.push(r))}function Va(){Te.inBatch++}function $a(){if(--Te.inBatch==0){uV();for(var r=Te.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation=!1,t.observers.length===0&&(t.isBeingObserved&&(t.isBeingObserved=!1,t.onBecomeUnobserved()),t instanceof gc&&t.suspend())}Te.pendingUnobservations=[]}}function sV(r){E8e(r);var e=Te.trackingDerivation;return e!==null?(e.runId!==r.lastAccessedBy&&(r.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=r,r.isBeingObserved||(r.isBeingObserved=!0,r.onBecomeObserved())),!0):(r.observers.length===0&&Te.inBatch>0&&nV(r),!1)}function B8e(r){if(r.lowestObserverState!==Ct.STALE){r.lowestObserverState=Ct.STALE;for(var e=r.observers,t=e.length;t--;){var i=e[t];i.dependenciesState===Ct.UP_TO_DATE&&(i.isTracing!==Un.NONE&&aV(i,r),i.onBecomeStale()),i.dependenciesState=Ct.STALE}}}function L8e(r){if(r.lowestObserverState!==Ct.STALE){r.lowestObserverState=Ct.STALE;for(var e=r.observers,t=e.length;t--;){var i=e[t];i.dependenciesState===Ct.POSSIBLY_STALE?i.dependenciesState=Ct.STALE:i.dependenciesState===Ct.UP_TO_DATE&&(r.lowestObserverState=Ct.UP_TO_DATE)}}}function z8e(r){if(r.lowestObserverState===Ct.UP_TO_DATE){r.lowestObserverState=Ct.POSSIBLY_STALE;for(var e=r.observers,t=e.length;t--;){var i=e[t];i.dependenciesState===Ct.UP_TO_DATE&&(i.dependenciesState=Ct.POSSIBLY_STALE,i.isTracing!==Un.NONE&&aV(i,r),i.onBecomeStale())}}}function aV(r,e){if(console.log("[mobx.trace] '"+r.name+"' is invalidated due to a change in: '"+e.name+"'"),r.isTracing===Un.BREAK){var t=[];lV(UD(r),t,1),new Function(`debugger;
/*
Tracing '`+r.name+`'

You are entering this break point because derivation '`+r.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(r instanceof gc?r.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+t.join(`
`)+`
*/
    `)()}}function lV(r,e,t){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+new Array(t).join("	")+r.name),r.dependencies&&r.dependencies.forEach(function(i){return lV(i,e,t+1)})}function uV(){Te.inBatch>0||Te.isRunningReactions||BD(U8e)}function U8e(){Te.isRunningReactions=!0;for(var r=Te.pendingReactions,e=0;r.length>0;){++e===cV&&(console.error("Reaction doesn't converge to a stable state after "+cV+" iterations."+(" Probably there is a cycle in the reactive function: "+r[0])),r.splice(0));for(var t=r.splice(0),i=0,o=t.length;i<o;i++)t[i].runReaction()}Te.isRunningReactions=!1}function N8e(r){var e=BD;BD=function(t){return r(function(){return e(t)})}}function Zr(){return!!Te.spyListeners.length}function td(r){if(!!Te.spyListeners.length)for(var e=Te.spyListeners,t=0,i=e.length;t<i;t++)e[t](r)}function Nn(r){var e=or(or({},r),{spyReportStart:!0});td(e)}function qn(r){td(r?or(or({},r),{spyReportEnd:!0}):q8e)}function LD(r){return Te.spyListeners.push(r),wD(function(){Te.spyListeners=Te.spyListeners.filter(function(e){return e!==r})})}function H8e(){Ut(!1)}function dV(r){return function(e,t,i){if(i){if(i.value)return{value:ed(r,i.value),enumerable:!1,configurable:!0,writable:!0};var o=i.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return ed(r,o.call(this))}}}return j8e(r).apply(this,arguments)}}function j8e(r){return function(e,t,i){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:function(){},set:function(o){Ha(this,t,I(r,o))}})}}function W8e(r,e,t,i){return i===!0?(zD(r,e,t.value),null):t?{configurable:!0,enumerable:!1,get:function(){return zD(this,e,t.value||t.initializer.call(this)),this[e]},set:H8e}:{enumerable:!1,configurable:!0,set:function(o){zD(this,e,o)},get:function(){}}}function Cr(r,e){var t=typeof r=="string"?r:r.name||"<unnamed action>",i=typeof r=="function"?r:e;return tV(t,i,this,void 0)}function zD(r,e,t){Ha(r,e,ed(e,t.bind(r)))}function G8e(r,e){e===void 0&&(e=UG);var t=e&&e.name||r.name||"Autorun@"+wo(),i=!e.scheduler&&!e.delay,o;if(i)o=new bc(t,function(){this.track(a)},e.onError,e.requiresObservable);else{var n=$8e(e),s=!1;o=new bc(t,function(){s||(s=!0,n(function(){s=!1,o.isDisposed||o.track(a)}))},e.onError,e.requiresObservable)}function a(){r(o)}return o.schedule(),o.getDisposer()}function $8e(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:V8e}function K8e(r,e,t){return mV("onBecomeObserved",r,e,t)}function pV(r,e,t){return mV("onBecomeUnobserved",r,e,t)}function mV(r,e,t,i){var o=typeof i=="function"?vc(e,t):vc(e),n=typeof i=="function"?i:t,s=o[r];return typeof s!="function"?Ut(!1):(o[r]=function(){s.call(this),n.call(this)},function(){o[r]=s})}function n0(r){var e=r.enforceActions,t=r.computedRequiresReaction,i=r.computedConfigurable,o=r.disableErrorBoundaries,n=r.arrayBuffer,s=r.reactionScheduler,a=r.reactionRequiresObservable,l=r.observableRequiresReaction;if(r.isolateGlobalState===!0&&P8e(),e!==void 0){(typeof e=="boolean"||e==="strict")&&qa(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);var c=void 0;switch(e){case!0:case"observed":c=!0;break;case!1:case"never":c=!1;break;case"strict":case"always":c="strict";break;default:Ut("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Te.enforceActions=c,Te.allowStateChanges=!(c===!0||c==="strict")}t!==void 0&&(Te.computedRequiresReaction=!!t),a!==void 0&&(Te.reactionRequiresObservable=!!a),l!==void 0&&(Te.observableRequiresReaction=!!l,Te.allowStateReads=!Te.observableRequiresReaction),i!==void 0&&(Te.computedConfigurable=!!i),o!==void 0&&(o===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Te.disableErrorBoundaries=!!o),typeof n=="number"&&HD(n),s&&N8e(s)}function X8e(r,e,t,i){if(!1&&t)for(var o in t);i=zm(i);var n=i.defaultDecorator||(i.deep===!1?YG:FD);Zu(r),jD(r,i.name,n.enhancer),Va();try{for(var s=Object.getOwnPropertyNames(e),a=0,l=s.length;a<l;a++){var o=s[a],c=Object.getOwnPropertyDescriptor(e,o),u=t&&o in t?t[o]:c.get?Zx:n,d=u(r,o,c,!0);d&&Object.defineProperty(r,o,d)}}finally{$a()}return r}function UD(r,e){return hV(vc(r,e))}function hV(r){var e={name:r.name};return r.observing&&r.observing.length>0&&(e.dependencies=a8e(r.observing).map(hV)),e}function Y8e(){this.message="FLOW_CANCELLED"}function J8e(r,e){if(r==null)return!1;if(e!==void 0){if(id(r)){var t=r.$mobx;return t.values&&!!t.values[e]}return!1}return id(r)||!!r.$mobx||ID(r)||o0(r)||t0(r)}function s0(r){return arguments.length!==1&&Ut(!1),J8e(r)}function Z8e(r){return id(r)?r.$mobx.getKeys():Ps(r)||_c(r)?ja(r.keys()):rd(r)?r.map(function(e,t){return t}):Ut(!1)}function qm(r,e,t,i){return i.detectCycles&&r.set(e,t),t}function yc(r,e,t){if(!e.recurseEverything&&!s0(r)||typeof r!="object")return r;if(r===null)return null;if(r instanceof Date)return r;if(A8e(r))return yc(r.get(),e,t);s0(r)&&Z8e(r);var i=e.detectCycles===!0;if(i&&r!==null&&t.has(r))return t.get(r);if(rd(r)||Array.isArray(r)){var o=qm(t,r,[],e),n=r.map(function(f){return yc(f,e,t)});o.length=n.length;for(var s=0,a=n.length;s<a;s++)o[s]=n[s];return o}if(_c(r)||Object.getPrototypeOf(r)===Set.prototype)if(e.exportMapsAsObjects===!1){var l=qm(t,r,new Set,e);return r.forEach(function(f){l.add(yc(f,e,t))}),l}else{var c=qm(t,r,[],e);return r.forEach(function(f){c.push(yc(f,e,t))}),c}if(Ps(r)||Object.getPrototypeOf(r)===Map.prototype)if(e.exportMapsAsObjects===!1){var u=qm(t,r,new Map,e);return r.forEach(function(f,_){u.set(_,yc(f,e,t))}),u}else{var d=qm(t,r,{},e);return r.forEach(function(f,_){d[_]=yc(f,e,t)}),d}var p=qm(t,r,{},e);for(var h in r)p[h]=yc(r[h],e,t);return p}function ke(r,e){typeof e=="boolean"&&(e={detectCycles:e}),e||(e=Q8e),e.detectCycles=e.detectCycles===void 0?e.recurseEverything===!0:e.detectCycles===!0;var t;return e.detectCycles&&(t=new Map),yc(r,e,t)}function e6e(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=!1;typeof r[r.length-1]=="boolean"&&(t=r.pop());var i=t6e(r);if(!i)return Ut(!1);i.isTracing===Un.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled"),i.isTracing=t?Un.BREAK:Un.LOG}function t6e(r){switch(r.length){case 0:return Te.trackingDerivation;case 1:return vc(r[0]);case 2:return vc(r[0],r[1])}}function Os(r,e){e===void 0&&(e=void 0),Va();try{return r.apply(e)}finally{$a()}}function Rs(r){return r.interceptors!==void 0&&r.interceptors.length>0}function eb(r,e){var t=r.interceptors||(r.interceptors=[]);return t.push(e),wD(function(){var i=t.indexOf(e);i!==-1&&t.splice(i,1)})}function Fs(r,e){var t=Nm();try{var i=r.interceptors;if(i)for(var o=0,n=i.length;o<n&&(e=i[o](e),pc(!e||e.type,"Intercept handlers should return nothing or a change object"),!!e);o++);return e}finally{hc(t)}}function Hn(r){return r.changeListeners!==void 0&&r.changeListeners.length>0}function tb(r,e){var t=r.changeListeners||(r.changeListeners=[]);return t.push(e),wD(function(){var i=t.indexOf(e);i!==-1&&t.splice(i,1)})}function jn(r,e){var t=Nm(),i=r.changeListeners;if(!!i){i=i.slice();for(var o=0,n=i.length;o<n;o++)i[o](e);hc(t)}}function o6e(r,e){typeof Object.setPrototypeOf!="undefined"?Object.setPrototypeOf(r.prototype,e):typeof r.prototype.__proto__!="undefined"?r.prototype.__proto__=e:r.prototype=e}function gV(r){return{enumerable:!1,configurable:!1,get:function(){return this.get(r)},set:function(e){this.set(r,e)}}}function s6e(r){Object.defineProperty(As.prototype,""+r,gV(r))}function HD(r){for(var e=ND;e<r;e++)s6e(e);ND=r}function rd(r){return TD(r)&&a6e(r.$mobx)}function l0(r){return r&&r.toString?r.toString():new String(r).toString()}function jD(r,e,t){e===void 0&&(e=""),t===void 0&&(t=Yg);var i=r.$mobx;return i||(Bm(r)||(e=(r.constructor.name||"ObservableObject")+"@"+wo()),e||(e="ObservableObject@"+wo()),i=new bV(r,e,t),$g(r,"$mobx",i),i)}function u6e(r,e,t,i){var o=jD(r);if(u8e(r,e),Rs(o)){var n=Fs(o,{object:r,name:e,type:"add",newValue:t});if(!n)return;t=n.newValue}var s=o.values[e]=new fc(t,i,o.name+"."+e,!1);t=s.value,Object.defineProperty(r,e,p6e(e)),o.keys&&o.keys.push(e),h6e(o,r,e,t)}function d6e(r,e,t){var i=jD(r);t.name=i.name+"."+e,t.context=r,i.values[e]=new gc(t),Object.defineProperty(r,e,m6e(e))}function p6e(r){return yV[r]||(yV[r]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,r)},set:function(e){this.$mobx.write(this,r,e)}})}function vV(r){var e=r.$mobx;return e||(Zu(r),r.$mobx)}function m6e(r){return _V[r]||(_V[r]={configurable:Te.computedConfigurable,enumerable:!1,get:function(){return vV(this).read(this,r)},set:function(e){vV(this).write(this,r,e)}})}function h6e(r,e,t,i){var o=Hn(r),n=Zr(),s=o||n?{type:"add",object:e,name:t,newValue:i}:null;n&&Nn(or(or({},s),{name:r.name,key:t})),o&&jn(r,s),n&&qn()}function id(r){return TD(r)?(Zu(r),f6e(r.$mobx)):!1}function vc(r,e){if(typeof r=="object"&&r!==null){if(rd(r))return e!==void 0&&Ut(!1),r.$mobx.atom;if(_c(r))return r.$mobx;if(Ps(r)){var t=r;if(e===void 0)return t._keysAtom;var i=t._data.get(e)||t._hasMap.get(e);return i||Ut(!1),i}if(Zu(r),e&&!r.$mobx&&r[e],id(r)){if(!e)return Ut(!1);var i=r.$mobx.values[e];return i||Ut(!1),i}if(ID(r)||t0(r)||o0(r))return r}else if(typeof r=="function"&&o0(r.$mobx))return r.$mobx;return Ut(!1)}function xV(r,e){if(r||Ut("Expecting some object"),e!==void 0)return xV(vc(r,e));if(ID(r)||t0(r)||o0(r)||Ps(r)||_c(r))return r;if(Zu(r),r.$mobx)return r.$mobx;Ut(!1)}function g6e(r,e){var t;return e!==void 0?t=vc(r,e):id(r)||Ps(r)||_c(r)?t=xV(r):t=vc(r),t.name}function WD(r,e,t){return t===void 0&&(t=-1),GD(r,e,t)}function GD(r,e,t,i,o){if(r===e)return r!==0||1/r==1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var n=typeof r;if(n!=="function"&&n!=="object"&&typeof e!="object")return!1;r=SV(r),e=SV(e);var s=CV.call(r);if(s!==CV.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r==1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e)}var a=s==="[object Array]";if(!a){if(typeof r!="object"||typeof e!="object")return!1;var l=r.constructor,c=e.constructor;if(l!==c&&!(typeof l=="function"&&l instanceof l&&typeof c=="function"&&c instanceof c)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),i=i||[],o=o||[];for(var u=i.length;u--;)if(i[u]===r)return o[u]===e;if(i.push(r),o.push(e),a){if(u=r.length,u!==e.length)return!1;for(;u--;)if(!GD(r[u],e[u],t-1,i,o))return!1}else{var d=Object.keys(r),p=void 0;if(u=d.length,Object.keys(e).length!==u)return!1;for(;u--;)if(p=d[u],!(b6e(e,p)&&GD(r[p],e[p],t-1,i,o)))return!1}return i.pop(),o.pop(),!0}function SV(r){return rd(r)?r.peek():Lm(r)||Ps(r)||Kg(r)||_c(r)?ja(r.entries()):r}function b6e(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var n8e,Gx,UG,s8e,NG,qG,Vx,ID,Kx,DD,or,g8e,b8e,XG,C8e,FD,S8e,YG,w8e,JG,ge,Zx,k8e,k,Ct,Un,Qx,e0,O8e,eV,elt,fc,A8e,gc,t0,r0,i0,iV,Te,bc,cV,BD,o0,q8e,I,V8e,Q8e,r6e,i6e,ND,qD,fV,As,n6e,a6e,l6e,a0,Ps,c6e,c0,_c,bV,yV,_V,f6e,CV,VD,$D,Ye=m(()=>{n8e="An invariant failed, however the error is obfuscated because this is an production build.",Gx=[];Object.freeze(Gx);UG={};Object.freeze(UG);s8e={};NG=[];qG=function(){};Vx=function(){function r(e){e===void 0&&(e="Atom@"+wo()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Ct.NOT_TRACKING}return r.prototype.onBecomeUnobserved=function(){},r.prototype.onBecomeObserved=function(){},r.prototype.reportObserved=function(){return sV(this)},r.prototype.reportChanged=function(){Va(),B8e(this),$a()},r.prototype.toString=function(){return this.name},r}(),ID=mc("Atom",Vx);Kx={identity:VG,structural:m8e,default:f8e,shallow:h8e};DD=function(r,e){return DD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},DD(r,e)};or=function(){return or=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},or.apply(this,arguments)};g8e={},b8e={};XG={deep:!0,name:void 0,defaultDecorator:void 0},C8e={deep:!1,name:void 0,defaultDecorator:void 0};Object.freeze(XG);Object.freeze(C8e);FD=Yx(Yg),S8e=Yx(v8e),YG=Yx(Xx),w8e=Yx(x8e);JG={box:function(r,e){arguments.length>2&&Wa("box");var t=zm(e);return new fc(r,Jx(t),t.name,!0,t.equals)},shallowBox:function(r,e){return arguments.length>2&&Wa("shallowBox"),qa("observable.shallowBox","observable.box(value, { deep: false })"),ge.box(r,{name:e,deep:!1})},array:function(r,e){arguments.length>2&&Wa("array");var t=zm(e);return new As(r,Jx(t),t.name)},shallowArray:function(r,e){return arguments.length>2&&Wa("shallowArray"),qa("observable.shallowArray","observable.array(values, { deep: false })"),ge.array(r,{name:e,deep:!1})},map:function(r,e){arguments.length>2&&Wa("map");var t=zm(e);return new a0(r,Jx(t),t.name)},shallowMap:function(r,e){return arguments.length>2&&Wa("shallowMap"),qa("observable.shallowMap","observable.map(values, { deep: false })"),ge.map(r,{name:e,deep:!1})},set:function(r,e){arguments.length>2&&Wa("set");var t=zm(e);return new c0(r,Jx(t),t.name)},object:function(r,e,t){typeof arguments[1]=="string"&&Wa("object");var i=zm(t);return X8e({},r,e,i)},shallowObject:function(r,e){return typeof arguments[1]=="string"&&Wa("shallowObject"),qa("observable.shallowObject","observable.object(values, {}, { deep: false })"),ge.object(r,{},{name:e,deep:!1})},ref:YG,shallow:S8e,deep:FD,struct:w8e},ge=T8e;Object.keys(JG).forEach(function(r){return ge[r]=JG[r]});Zx=KG(!1,function(r,e,t,i,o){var n=t.get,s=t.set,a=o[0]||{};d6e(r,e,or({get:n,set:s},a))}),k8e=Zx({equals:Kx.structural}),k=function(e,t,i){if(typeof t=="string"||e!==null&&typeof e=="object"&&arguments.length===1)return Zx.apply(null,arguments);var o=typeof t=="object"?t:{};return o.get=e,o.set=typeof t=="function"?t:o.set,o.name=o.name||e.name||"",new gc(o)};k.struct=k8e;(function(r){r[r.NOT_TRACKING=-1]="NOT_TRACKING",r[r.UP_TO_DATE=0]="UP_TO_DATE",r[r.POSSIBLY_STALE=1]="POSSIBLY_STALE",r[r.STALE=2]="STALE"})(Ct||(Ct={}));(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(Un||(Un={}));Qx=function(){function r(e){this.cause=e}return r}();e0=0,O8e=1,eV=Object.getOwnPropertyDescriptor(function(){},"name"),elt=eV&&eV.configurable;fc=function(r){$G(e,r);function e(t,i,o,n,s){o===void 0&&(o="ObservableValue@"+wo()),n===void 0&&(n=!0),s===void 0&&(s=Kx.default);var a=r.call(this,o)||this;return a.enhancer=i,a.name=o,a.equals=s,a.hasUnreportedChange=!1,a.value=i(t,void 0,o),n&&Zr()&&td({type:"create",name:a.name,newValue:""+a.value}),a}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.set=function(t){var i=this.value;if(t=this.prepareNewValue(t),t!==Te.UNCHANGED){var o=Zr();o&&Nn({type:"update",name:this.name,newValue:t,oldValue:i}),this.setNewValue(t),o&&qn()}},e.prototype.prepareNewValue=function(t){if(Um(this),Rs(this)){var i=Fs(this,{object:this,type:"update",newValue:t});if(!i)return Te.UNCHANGED;t=i.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Te.UNCHANGED:t},e.prototype.setNewValue=function(t){var i=this.value;this.value=t,this.reportChanged(),Hn(this)&&jn(this,{type:"update",object:this,newValue:t,oldValue:i})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return eb(this,t)},e.prototype.observe=function(t,i){return i&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),tb(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return jG(this.get())},e}(Vx);fc.prototype[HG()]=fc.prototype.valueOf;A8e=mc("ObservableValue",fc),gc=function(){function r(e){this.dependenciesState=Ct.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Ct.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+wo(),this.value=new Qx(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Un.NONE,pc(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+wo(),e.set&&(this.setter=ed(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?Kx.structural:Kx.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return r.prototype.onBecomeStale=function(){z8e(this)},r.prototype.onBecomeUnobserved=function(){},r.prototype.onBecomeObserved=function(){},r.prototype.get=function(){this.isComputing&&Ut("Cycle detected in computation "+this.name+": "+this.derivation),Te.inBatch===0&&this.observers.length===0&&!this.keepAlive?AD(this)&&(this.warnAboutUntrackedRead(),Va(),this.value=this.computeValue(!1),$a()):(sV(this),AD(this)&&this.trackAndCompute()&&L8e(this));var e=this.value;if(Jg(e))throw e.cause;return e},r.prototype.peek=function(){var e=this.computeValue(!1);if(Jg(e))throw e.cause;return e},r.prototype.set=function(e){if(this.setter){pc(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else pc(!1,!1)},r.prototype.trackAndCompute=function(){Zr()&&td({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===Ct.NOT_TRACKING,i=this.computeValue(!0),o=t||Jg(e)||Jg(i)||!this.equals(e,i);return o&&(this.value=i),o},r.prototype.computeValue=function(e){this.isComputing=!0,Te.computationDepth++;var t;if(e)t=ZG(this,this.derivation,this.scope);else if(Te.disableErrorBoundaries===!0)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(i){t=new Qx(i)}return Te.computationDepth--,this.isComputing=!1,t},r.prototype.suspend=function(){this.keepAlive||(PD(this),this.value=void 0)},r.prototype.observe=function(e,t){var i=this,o=!0,n=void 0;return G8e(function(){var s=i.get();if(!o||t){var a=Nm();e({type:"update",object:i,newValue:s,oldValue:n}),hc(a)}o=!1,n=s})},r.prototype.warnAboutUntrackedRead=function(){},r.prototype.toJSON=function(){return this.get()},r.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},r.prototype.valueOf=function(){return jG(this.get())},r}();gc.prototype[HG()]=gc.prototype.valueOf;t0=mc("ComputedValue",gc),r0=function(){function r(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return r}(),i0=!0,iV=!1,Te=function(){var r=Mm();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(i0=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new r0().version&&(i0=!1),i0?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new r0):(setTimeout(function(){iV||Ut("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new r0)}();bc=function(){function r(e,t,i,o){e===void 0&&(e="Reaction@"+wo()),o===void 0&&(o=!1),this.name=e,this.onInvalidate=t,this.errorHandler=i,this.requiresObservable=o,this.observing=[],this.newObserving=[],this.dependenciesState=Ct.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+wo(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Un.NONE}return r.prototype.onBecomeStale=function(){this.schedule()},r.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Te.pendingReactions.push(this),uV())},r.prototype.isScheduled=function(){return this._isScheduled},r.prototype.runReaction=function(){if(!this.isDisposed){if(Va(),this._isScheduled=!1,AD(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Zr()&&td({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}$a()}},r.prototype.track=function(e){Va();var t=Zr(),i;t&&(i=Date.now(),Nn({name:this.name,type:"reaction"})),this._isRunning=!0;var o=ZG(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&PD(this),Jg(o)&&this.reportExceptionInDerivation(o.cause),t&&qn({time:Date.now()-i}),$a()},r.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler){this.errorHandler(e,this);return}if(Te.disableErrorBoundaries)throw e;var i="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Te.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(i,e),Zr()&&td({type:"error",name:this.name,message:i,error:""+e}),Te.globalReactionErrorHandlers.forEach(function(o){return o(e,t)})},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Va(),PD(this),$a()))},r.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},r.prototype.toString=function(){return"Reaction["+this.name+"]"},r.prototype.trace=function(e){e===void 0&&(e=!1),e6e(this,e)},r}(),cV=100,BD=function(r){return r()};o0=mc("Reaction",bc);q8e={spyReportEnd:!0};I=function(e,t,i,o){if(arguments.length===1&&typeof e=="function")return ed(e.name||"<unnamed action>",e);if(arguments.length===2&&typeof t=="function")return ed(e,t);if(arguments.length===1&&typeof e=="string")return dV(e);if(o===!0)e[t]=ed(e.name||t,i.value);else return dV(t).apply(null,arguments)};I.bound=W8e;V8e=function(r){return r()};Y8e.prototype=Object.create(Error.prototype);Q8e={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};r6e=1e4,i6e=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)["0"]=1,r===!1}(),ND=0,qD=function(){function r(){}return r}();o6e(qD,Array.prototype);Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(r){Object.defineProperty(qD.prototype,r,{configurable:!0,writable:!0,value:Array.prototype[r]})});fV=function(){function r(e,t,i,o){this.array=i,this.owned=o,this.values=[],this.lastKnownLength=0,this.atom=new Vx(e||"ObservableArray@"+wo()),this.enhancer=function(n,s){return t(n,s,e+"[..]")}}return r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.dehanceValues=function(e){return this.dehancer!==void 0&&e.length>0?e.map(this.dehancer):e},r.prototype.intercept=function(e){return eb(this,e)},r.prototype.observe=function(e,t){return t===void 0&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),tb(this,e)},r.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},r.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var i=new Array(e-t),o=0;o<e-t;o++)i[o]=void 0;this.spliceWithArray(t,0,i)}else this.spliceWithArray(e,t-e)},r.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>ND&&HD(e+t+1)},r.prototype.spliceWithArray=function(e,t,i){var o=this;Um(this.atom);var n=this.values.length;if(e===void 0?e=0:e>n?e=n:e<0&&(e=Math.max(0,n+e)),arguments.length===1?t=n-e:t==null?t=0:t=Math.max(0,Math.min(t,n-e)),i===void 0&&(i=Gx),Rs(this)){var s=Fs(this,{object:this.array,type:"splice",index:e,removedCount:t,added:i});if(!s)return Gx;t=s.removedCount,i=s.added}i=i.length===0?i:i.map(function(c){return o.enhancer(c,void 0)});var a=i.length-t;this.updateArrayLength(n,a);var l=this.spliceItemsIntoValues(e,t,i);return(t!==0||i.length!==0)&&this.notifyArraySplice(e,i,l),this.dehanceValues(l)},r.prototype.spliceItemsIntoValues=function(e,t,i){var o;if(i.length<r6e)return(o=this.values).splice.apply(o,RD([e,t],i));var n=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(i,this.values.slice(e+t)),n},r.prototype.notifyArrayChildUpdate=function(e,t,i){var o=!this.owned&&Zr(),n=Hn(this),s=n||o?{object:this.array,type:"update",index:e,newValue:t,oldValue:i}:null;o&&Nn(or(or({},s),{name:this.atom.name})),this.atom.reportChanged(),n&&jn(this,s),o&&qn()},r.prototype.notifyArraySplice=function(e,t,i){var o=!this.owned&&Zr(),n=Hn(this),s=n||o?{object:this.array,type:"splice",index:e,removed:i,added:t,removedCount:i.length,addedCount:t.length}:null;o&&Nn(or(or({},s),{name:this.atom.name})),this.atom.reportChanged(),n&&jn(this,s),o&&qn()},r}(),As=function(r){$G(e,r);function e(t,i,o,n){o===void 0&&(o="ObservableArray@"+wo()),n===void 0&&(n=!1);var s=r.call(this)||this,a=new fV(o,i,s,n);if($g(s,"$mobx",a),t&&t.length){var l=Zg(!0);s.spliceWithArray(0,0,t),Qg(l)}return i6e&&Object.defineProperty(a.array,"0",n6e),s}return e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,i){return i===void 0&&(i=!1),this.$mobx.observe(t,i)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map(function(o){return rd(o)?o.peek():o}))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,i,o){o===void 0&&(o=0),arguments.length===3&&qa("The array.find fromIndex argument to find will not be supported anymore in the next major");var n=this.findIndex.apply(this,arguments);return n===-1?void 0:this.get(n)},e.prototype.findIndex=function(t,i,o){o===void 0&&(o=0),arguments.length===3&&qa("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");for(var n=this.peek(),s=n.length,a=o;a<s;a++)if(t.call(i,n[a],a,this))return a;return-1},e.prototype.splice=function(t,i){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,i)}return this.$mobx.spliceWithArray(t,i,o)},e.prototype.spliceWithArray=function(t,i,o){return this.$mobx.spliceWithArray(t,i,o)},e.prototype.push=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=this.$mobx;return o.spliceWithArray(o.values.length,0,t),o.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=this.$mobx;return o.spliceWithArray(0,0,t),o.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var i=this.slice();return i.sort.apply(i,arguments)},e.prototype.remove=function(t){var i=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return i>-1?(this.splice(i,1),!0):!1},e.prototype.move=function(t,i){qa("observableArray.move is deprecated, use .slice() & .replace() instead");function o(a){if(a<0)throw new Error("[mobx.array] Index out of bounds: "+a+" is negative");var l=this.$mobx.values.length;if(a>=l)throw new Error("[mobx.array] Index out of bounds: "+a+" is not smaller than "+l)}if(o.call(this,t),o.call(this,i),t!==i){var n=this.$mobx.values,s;t<i?s=RD(n.slice(0,t),n.slice(t+1,i+1),[n[t]],n.slice(i+1)):s=RD(n.slice(0,i),[n[t]],n.slice(i,t),n.slice(t+1)),this.replace(s)}},e.prototype.get=function(t){var i=this.$mobx;if(i){if(t<i.values.length)return i.atom.reportObserved(),i.dehanceValue(i.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+i.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,i){var o=this.$mobx,n=o.values;if(t<n.length){Um(o.atom);var s=n[t];if(Rs(o)){var a=Fs(o,{type:"update",object:this,index:t,newValue:i});if(!a)return;i=a.newValue}i=o.enhancer(i,s);var l=i!==s;l&&(n[t]=i,o.notifyArrayChildUpdate(t,i,s))}else if(t===n.length)o.spliceWithArray(t,0,[i]);else throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+n.length)},e}(qD);kD(As.prototype,function(){this.$mobx.atom.reportObserved();var r=this,e=0;return Xg({next:function(){return e<r.length?{value:r[e++],done:!1}:{done:!0,value:void 0}}})});Object.defineProperty(As.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(r){this.$mobx.setArrayLength(r)}});Ha(As.prototype,ED(),"Array");["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(r){var e=Array.prototype[r];pc(typeof e=="function","Base function not defined on Array prototype: '"+r+"'"),Ha(As.prototype,r,function(){return e.apply(this.peek(),arguments)})});["every","filter","forEach","map","some"].forEach(function(r){var e=Array.prototype[r];pc(typeof e=="function","Base function not defined on Array prototype: '"+r+"'"),Ha(As.prototype,r,function(t,i){var o=this,n=this.$mobx;n.atom.reportObserved();var s=n.dehanceValues(n.values);return s[r](function(a,l){return t.call(i,a,l,o)},i)})});["reduce","reduceRight"].forEach(function(r){Ha(As.prototype,r,function(){var e=this,t=this.$mobx;t.atom.reportObserved();var i=arguments[0];return arguments[0]=function(o,n,s){return n=t.dehanceValue(n),i(o,n,s,e)},t.values[r].apply(t.values,arguments)})});c8e(As.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);n6e=gV(0);HD(1e3);a6e=mc("ObservableArrayAdministration",fV);l6e={},a0=function(){function r(e,t,i){if(t===void 0&&(t=Yg),i===void 0&&(i="ObservableMap@"+wo()),this.enhancer=t,this.name=i,this.$mobx=l6e,this._keysAtom=$x(this.name+".keys()"),typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return r.prototype._has=function(e){return this._data.has(e)},r.prototype.has=function(e){var t=this;if(!Te.trackingDerivation)return this._has(e);var i=this._hasMap.get(e);if(!i){var o=i=new fc(this._has(e),Xx,this.name+"."+l0(e)+"?",!1);this._hasMap.set(e,o),pV(o,function(){return t._hasMap.delete(e)})}return i.get()},r.prototype.set=function(e,t){var i=this._has(e);if(Rs(this)){var o=Fs(this,{type:i?"update":"add",object:this,newValue:t,name:e});if(!o)return this;t=o.newValue}return i?this._updateValue(e,t):this._addValue(e,t),this},r.prototype.delete=function(e){var t=this;if(Um(this._keysAtom),Rs(this)){var i=Fs(this,{type:"delete",object:this,name:e});if(!i)return!1}if(this._has(e)){var o=Zr(),n=Hn(this),i=n||o?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return o&&Nn(or(or({},i),{name:this.name,key:e})),Os(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1);var a=t._data.get(e);a.setNewValue(void 0),t._data.delete(e)}),n&&jn(this,i),o&&qn(),!0}return!1},r.prototype._updateHasMapEntry=function(e,t){var i=this._hasMap.get(e);i&&i.setNewValue(t)},r.prototype._updateValue=function(e,t){var i=this._data.get(e);if(t=i.prepareNewValue(t),t!==Te.UNCHANGED){var o=Zr(),n=Hn(this),s=n||o?{type:"update",object:this,oldValue:i.value,name:e,newValue:t}:null;o&&Nn(or(or({},s),{name:this.name,key:e})),i.setNewValue(t),n&&jn(this,s),o&&qn()}},r.prototype._addValue=function(e,t){var i=this;Um(this._keysAtom),Os(function(){var a=new fc(t,i.enhancer,i.name+"."+l0(e),!1);i._data.set(e,a),t=a.value,i._updateHasMapEntry(e,!0),i._keysAtom.reportChanged()});var o=Zr(),n=Hn(this),s=n||o?{type:"add",object:this,name:e,newValue:t}:null;o&&Nn(or(or({},s),{name:this.name,key:e})),n&&jn(this,s),o&&qn()},r.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},r.prototype.values=function(){var e=this,t=this.keys();return Xg({next:function(){var i=t.next(),o=i.done,n=i.value;return{done:o,value:o?void 0:e.get(n)}}})},r.prototype.entries=function(){var e=this,t=this.keys();return Xg({next:function(){var i=t.next(),o=i.done,n=i.value;return{done:o,value:o?void 0:[n,e.get(n)]}}})},r.prototype.forEach=function(e,t){var i=this;this._keysAtom.reportObserved(),this._data.forEach(function(o,n){return e.call(t,i.get(n),n,i)})},r.prototype.merge=function(e){var t=this;return Ps(e)&&(e=e.toJS()),Os(function(){var i=Zg(!0);try{Bm(e)?Object.keys(e).forEach(function(o){return t.set(o,e[o])}):Array.isArray(e)?e.forEach(function(o){var n=OD(o,2),s=n[0],a=n[1];return t.set(s,a)}):Lm(e)?e.constructor!==Map?Ut("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach(function(o,n){return t.set(n,o)}):e!=null&&Ut("Cannot initialize map from "+e)}finally{Qg(i)}}),this},r.prototype.clear=function(){var e=this;Os(function(){MD(function(){e._data.forEach(function(t,i){return e.delete(i)})})})},r.prototype.replace=function(e){var t=this;return Os(function(){var i=l8e(e),o=new Map,n=!1;if(WG(t._data.keys(),function(u){if(!i.has(u)){var d=t.delete(u);if(d)n=!0;else{var p=t._data.get(u);o.set(u,p)}}}),WG(i.entries(),function(u){var d=OD(u,2),p=d[0],h=d[1],f=t._data.has(p);if(t.set(p,h),t._data.has(p)){var _=t._data.get(p);o.set(p,_),f||(n=!0)}}),!n)if(t._data.size!==o.size)t._keysAtom.reportChanged();else for(var s=t._data.keys(),a=o.keys(),l=s.next(),c=a.next();!l.done;){if(l.value!==c.value){t._keysAtom.reportChanged();break}l=s.next(),c=a.next()}t._data=o}),this},Object.defineProperty(r.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),r.prototype.toPOJO=function(){var e=this,t={};return this.forEach(function(i,o){return t[typeof o=="symbol"?o:l0(o)]=e.get(o)}),t},r.prototype.toJS=function(){return new Map(this)},r.prototype.toJSON=function(){return this.toPOJO()},r.prototype.toString=function(){var e=this;return this.name+"[{ "+ja(this.keys()).map(function(t){return l0(t)+": "+(""+e.get(t))}).join(", ")+" }]"},r.prototype.observe=function(e,t){return tb(this,e)},r.prototype.intercept=function(e){return eb(this,e)},r}();kD(a0.prototype,function(){return this.entries()});$g(a0.prototype,ED(),"Map");Ps=mc("ObservableMap",a0),c6e={},c0=function(){function r(e,t,i){if(t===void 0&&(t=Yg),i===void 0&&(i="ObservableSet@"+wo()),this.name=i,this.$mobx=c6e,this._data=new Set,this._atom=$x(this.name),typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(o,n){return t(o,n,i)},e&&this.replace(e)}return r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.clear=function(){var e=this;Os(function(){MD(function(){e._data.forEach(function(t){e.delete(t)})})})},r.prototype.forEach=function(e,t){var i=this;this._atom.reportObserved(),this._data.forEach(function(o){e.call(t,o,o,i)})},Object.defineProperty(r.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),r.prototype.add=function(e){var t=this;if(Um(this._atom),Rs(this)){var i=Fs(this,{type:"add",object:this,newValue:e});if(!i)return this}if(!this.has(e)){Os(function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()});var o=Zr(),n=Hn(this),i=n||o?{type:"add",object:this,newValue:e}:null;n&&jn(this,i)}return this},r.prototype.delete=function(e){var t=this;if(Rs(this)){var i=Fs(this,{type:"delete",object:this,oldValue:e});if(!i)return!1}if(this.has(e)){var o=Zr(),n=Hn(this),i=n||o?{type:"delete",object:this,oldValue:e}:null;return Os(function(){t._atom.reportChanged(),t._data.delete(e)}),n&&jn(this,i),!0}return!1},r.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},r.prototype.entries=function(){var e=0,t=ja(this.keys()),i=ja(this.values());return Xg({next:function(){var o=e;return e+=1,o<i.length?{value:[t[o],i[o]],done:!1}:{done:!0}}})},r.prototype.keys=function(){return this.values()},r.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,i;return this._data.values!==void 0?i=ja(this._data.values()):(i=[],this._data.forEach(function(o){return i.push(o)})),Xg({next:function(){return t<i.length?{value:e.dehanceValue(i[t++]),done:!1}:{done:!0}}})},r.prototype.replace=function(e){var t=this;return _c(e)&&(e=e.toJS()),Os(function(){var i=Zg(!0);try{Array.isArray(e)?(t.clear(),e.forEach(function(o){return t.add(o)})):Kg(e)?(t.clear(),e.forEach(function(o){return t.add(o)})):e!=null&&Ut("Cannot initialize set from "+e)}finally{Qg(i)}}),this},r.prototype.observe=function(e,t){return tb(this,e)},r.prototype.intercept=function(e){return eb(this,e)},r.prototype.toJS=function(){return new Set(this)},r.prototype.toString=function(){return this.name+"[ "+ja(this.keys()).join(", ")+" ]"},r}();kD(c0.prototype,function(){return this.values()});$g(c0.prototype,ED(),"Set");_c=mc("ObservableSet",c0),bV=function(){function r(e,t,i){this.target=e,this.name=t,this.defaultEnhancer=i,this.values={}}return r.prototype.read=function(e,t){if(!(this.target!==e&&(this.illegalAccess(e,t),!this.values[t])))return this.values[t].get()},r.prototype.write=function(e,t,i){var o=this.target;o!==e&&this.illegalAccess(e,t);var n=this.values[t];if(n instanceof gc){n.set(i);return}if(Rs(this)){var s=Fs(this,{type:"update",object:o,name:t,newValue:i});if(!s)return;i=s.newValue}if(i=n.prepareNewValue(i),i!==Te.UNCHANGED){var a=Hn(this),l=Zr(),s=a||l?{type:"update",object:o,oldValue:n.value,name:t,newValue:i}:null;l&&Nn(or(or({},s),{name:this.name,key:t})),n.setNewValue(i),a&&jn(this,s),l&&qn()}},r.prototype.remove=function(e){if(!!this.values[e]){var t=this.target;if(Rs(this)){var i=Fs(this,{object:t,name:e,type:"remove"});if(!i)return}try{Va();var o=Hn(this),n=Zr(),s=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var i=o||n?{type:"remove",object:t,oldValue:s,name:e}:null;n&&Nn(or(or({},i),{name:this.name,key:e})),o&&jn(this,i),n&&qn()}finally{$a()}}},r.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},r.prototype.observe=function(e,t){return tb(this,e)},r.prototype.intercept=function(e){return eb(this,e)},r.prototype.getKeys=function(){var e=this;return this.keys===void 0&&(this.keys=new As(Object.keys(this.values).filter(function(t){return e.values[t]instanceof fc}),Xx,"keys("+this.name+")",!0)),this.keys.slice()},r}();yV=Object.create(null),_V=Object.create(null);f6e=mc("ObservableObjectAdministration",bV);CV=Object.prototype.toString;try{}catch(r){VD=Mm(),typeof process=="undefined"&&(VD.process={}),VD.process.env={}}(function(){function r(){}if(r.name!=="testCodeMinification"&&!1)var e})();$D="$mobx";typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:LD,extras:{getDebugName:g6e},$mobx:$D})});var wV,TV=m(()=>{Ye();wV=v(C("react"));if(!wV.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!LD)throw new Error("mobx-react-lite requires mobx at least version 4 to be available")});var KD,kV=m(()=>{KD=v(C("react-dom"))});function XD(){var r=y6e((0,rb.useState)(0),2),e=r[1],t=(0,rb.useCallback)(function(){e(function(i){return i+1})},[]);return t}function EV(r){return typeof Symbol=="function"?Symbol.for(r):"__$mobx-react "+r+"__"}function IV(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:_6e}var rb,y6e,_6e,Hm=m(()=>{rb=v(C("react")),y6e=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,n=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return n};_6e={}});function x6e(r){r()}function u0(r){r||(r=x6e),n0({reactionScheduler:r}),IV()[v6e]=!0}var v6e,YD=m(()=>{Ye();Hm();v6e=EV("observerBatching")});function Ms(){return C6e}var C6e,d0=m(()=>{C6e=!1});function DV(r){return UD(r)}var OV=m(()=>{Ye()});function RV(r){var e={cleanAt:Date.now()+S6e,reaction:r};return e}function FV(){JD===void 0&&(JD=setTimeout(T6e,w6e))}function AV(r){ib.add(r),FV()}function PV(r){ib.delete(r)}function T6e(){JD=void 0;var r=Date.now();ib.forEach(function(e){var t=e.current;t&&r>=t.cleanAt&&(t.reaction.dispose(),e.current=null,ib.delete(e))}),ib.size>0&&FV()}var S6e,w6e,ib,JD,MV=m(()=>{S6e=1e4,w6e=1e4,ib=new Set});function ZD(r){return function(){p0?m0.push(r):r()}}function QD(r){p0=!0,m0=[];try{var e=r();p0=!1;var t=m0.length>0?m0:void 0;return BV.default.useLayoutEffect(function(){t&&t.forEach(function(i){return i()})},[t]),e}finally{p0=!1}}var BV,p0,m0,eO=m(()=>{BV=v(C("react")),p0=!1,m0=[]});function LV(r){return"observer"+r}function jm(r,e,t){if(e===void 0&&(e="observed"),t===void 0&&(t=k6e),Ms())return r();var i=t.useForceUpdate||XD,o=i(),n=ZD(o),s=h0.default.useRef(null);if(!s.current){var a=new bc(LV(e),function(){l.mounted?n():(a.dispose(),s.current=null)}),l=RV(a);s.current=l,AV(s)}var c=s.current.reaction;return h0.default.useDebugValue(c,DV),h0.default.useEffect(function(){return PV(s),s.current?s.current.mounted=!0:(s.current={reaction:new bc(LV(e),function(){n()}),cleanAt:1/0},n()),function(){s.current.reaction.dispose(),s.current=null}},[]),QD(function(){var u,d;if(c.track(function(){try{u=r()}catch(p){d=p}}),d)throw d;return u})}var h0,k6e,f0=m(()=>{Ye();h0=v(C("react"));OV();MV();d0();Hm();eO();k6e={}});function rO(r,e){if(Ms())return r;var t=tO({forwardRef:!1},e),i=r.displayName||r.name,o=function(s,a){return jm(function(){return r(s,a)},i)};o.displayName=i;var n;return t.forwardRef?n=(0,ob.memo)((0,ob.forwardRef)(o)):n=(0,ob.memo)(o),I6e(r,n),n.displayName=i,n}function I6e(r,e){Object.keys(r).forEach(function(t){E6e[t]||Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}var ob,tO,E6e,zV=m(()=>{ob=v(C("react"));d0();f0();tO=function(){return tO=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},tO.apply(this,arguments)};E6e={$$typeof:!0,render:!0,compare:!0,type:!0}});function Wm(r){var e=r.children,t=r.render,i=e||t;return typeof i!="function"?null:jm(i)}function UV(r,e,t,i,o){var n=e==="children"?"render":"children",s=typeof r[e]=="function",a=typeof r[n]=="function";return s&&a?new Error("MobX Observer: Do not use children and render in the same time in`"+t):s||a?null:new Error("Invalid prop `"+o+"` of type `"+typeof r[e]+"` supplied to `"+t+"`, expected `function`.")}var NV=m(()=>{f0();Wm.propTypes={children:UV,render:UV};Wm.displayName="Observer"});var D6e,iO=m(()=>{Ye();D6e=v(C("react"));Hm()});var O6e,qV=m(()=>{Ye();O6e=v(C("react"));iO();Hm()});var oO=m(()=>{TV();kV();YD();d0();zV();f0();NV();Hm();iO();qV();eO();YD();u0(KD.unstable_batchedUpdates)});function P6e(r){if(typeof Symbol=="function")return Symbol(r);var e="__$mobx-react "+r+" ("+HV+")";return HV++,e}function xc(r){return nO[r]||(nO[r]=P6e(r)),nO[r]}function jV(r,e){if(WV(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),i=Object.keys(e);if(t.length!==i.length)return!1;for(var o=0;o<t.length;o++)if(!Object.hasOwnProperty.call(e,t[o])||!WV(r[t[o]],e[t[o]]))return!1;return!0}function WV(r,e){return r===e?r!==0||1/r==1/e:r!==r&&e!==e}function B6e(r,e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(r));Object.getOwnPropertyNames(r).forEach(function(i){!M6e[i]&&t.indexOf(i)===-1&&Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}function Ka(r,e,t){Object.hasOwnProperty.call(r,e)?r[e]=t:Object.defineProperty(r,e,{enumerable:!1,configurable:!0,writable:!0,value:t})}function L6e(r,e){var t=r[GV]=r[GV]||{},i=t[e]=t[e]||{};return i.locks=i.locks||0,i.methods=i.methods||[],i}function $V(r,e){for(var t=this,i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++)o[n-2]=arguments[n];e.locks++;try{var s;return r!=null&&(s=r.apply(this,o)),s}finally{e.locks--,e.locks===0&&e.methods.forEach(function(a){a.apply(t,o)})}}function KV(r,e){var t=function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];$V.call.apply($V,[this,r,e].concat(n))};return t}function z6e(r,e,t){var i=L6e(r,e);i.methods.indexOf(t)<0&&i.methods.push(t);var o=Object.getOwnPropertyDescriptor(r,e);if(!(o&&o[VV])){var n=r[e],s=XV(r,e,o?o.enumerable:void 0,i,n);Object.defineProperty(r,e,s)}}function XV(r,e,t,i,o){var n,s=KV(o,i);return n={},n[VV]=!0,n.get=function(){return s},n.set=function(l){if(this===r)s=KV(l,i);else{var c=XV(this,e,t,i,l);Object.defineProperty(this,e,c)}},n.configurable=!0,n.enumerable=t,n}function U6e(r){var e=r.prototype;if(r[YV]){var t=aO(e);console.warn("The provided component class ("+t+`) 
                has already been declared as an observer component.`)}else r[YV]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(r.__proto__!==mr.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=ZV;else if(e.shouldComponentUpdate!==ZV)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}QV(e,"props"),QV(e,"state");var i=e.render;return e.render=function(){return N6e.call(this,i)},z6e(e,"componentWillUnmount",function(){var o;if(Ms()!==!0&&((o=this.render[sO])===null||o===void 0||o.dispose(),this[JV]=!0,!this.render[sO])){var n=aO(this);console.warn("The reactive render of an observer class component ("+n+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),r}function aO(r){return r.displayName||r.name||r.constructor&&(r.constructor.displayName||r.constructor.name)||"<component>"}function N6e(r){var e=this;if(Ms()===!0)return r.call(this);Ka(this,g0,!1),Ka(this,b0,!1);var t=aO(this),i=r.bind(this),o=!1,n=new bc(t+".render()",function(){if(!o&&(o=!0,e[JV]!==!0)){var a=!0;try{Ka(e,b0,!0),e[g0]||mr.Component.prototype.forceUpdate.call(e),a=!1}finally{Ka(e,b0,!1),a&&n.dispose()}}});n.reactComponent=this,s[sO]=n,this.render=s;function s(){o=!1;var a=void 0,l=void 0;if(n.track(function(){try{l=rV(!1,i)}catch(c){a=c}}),a)throw a;return l}return s.call(this)}function ZV(r,e){return Ms()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==e?!0:!jV(this.props,r)}function QV(r,e){var t=xc("reactProp_"+e+"_valueHolder"),i=xc("reactProp_"+e+"_atomHolder");function o(){return this[i]||Ka(this,i,$x("reactive "+e)),this[i]}Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var s=!1;return Qu&&Ga&&(s=Qu(!0)),o.call(this).reportObserved(),Qu&&Ga&&Ga(s),this[t]},set:function(s){!this[b0]&&!jV(this[t],s)?(Ka(this,t,s),Ka(this,g0,!0),o.call(this).reportChanged(),Ka(this,g0,!1)):Ka(this,t,s)}})}function O(r){if(r.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),r$&&r.$$typeof===r$)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(t$&&r.$$typeof===t$){var e=r.render;if(typeof e!="function")throw new Error("render property of ForwardRef was not a function");return(0,mr.forwardRef)(function(){var i=arguments;return(0,mr.createElement)(Wm,null,function(){return e.apply(void 0,i)})})}return typeof r=="function"&&(!r.prototype||!r.prototype.render)&&!r.isReactClass&&!Object.prototype.isPrototypeOf.call(mr.Component,r)?rO(r):U6e(r)}function y0(){return y0=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},y0.apply(this,arguments)}function q6e(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,n;for(n=0;n<i.length;n++)o=i[n],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function sb(r){var e=r.children,t=q6e(r,["children"]),i=mr.default.useContext(nb),o=mr.default.useRef(y0({},i,t)),n=o.current;if(!1)var s;return mr.default.createElement(nb.Provider,{value:n},e)}function i$(r,e,t,i){var o=mr.default.forwardRef(function(n,s){var a=y0({},n),l=mr.default.useContext(nb);return Object.assign(a,r(l||{},a)||{}),s&&(a.ref=s),mr.default.createElement(e,a)});return i&&(o=O(o)),o.isMobxInjector=!0,B6e(e,o),o.wrappedComponent=e,o.displayName=H6e(e,t),o}function H6e(r,e){var t,i=r.displayName||r.name||r.constructor&&r.constructor.name||"Component";return e?t="inject-with-"+e+"("+i+")":t="inject("+i+")",t}function j6e(r){return function(e,t){return r.forEach(function(i){if(!(i in t)){if(!(i in e))throw new Error("MobX injector: Store '"+i+"' is not available! Make sure it is provided by some Provider");t[i]=e[i]}}),t}}function fe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];if(typeof arguments[0]=="function"){var i=arguments[0];return function(o){return i$(i,o,i.name,!0)}}else return function(o){return i$(j6e(e),o,e.join("-"),!1)}}var mr,HV,nO,M6e,GV,VV,sO,YV,JV,g0,b0,e$,t$,r$,nb,j=m(()=>{Ye();mr=v(C("react"));oO();oO();HV=0;nO={};M6e={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};GV=xc("patchMixins"),VV=xc("patchedDefinition");sO=$D||"$mobx",YV=xc("isMobXReactObserver"),JV=xc("isUnmounted"),g0=xc("skipRender"),b0=xc("isForcingUpdate");e$=typeof Symbol=="function"&&Symbol.for,t$=e$?Symbol.for("react.forward_ref"):typeof mr.forwardRef=="function"&&(0,mr.forwardRef)(function(r){return null}).$$typeof,r$=e$?Symbol.for("react.memo"):typeof mr.memo=="function"&&(0,mr.memo)(function(r){return null}).$$typeof;nb=mr.default.createContext({});sb.displayName="MobXProvider";if(!mr.Component)throw new Error("mobx-react requires React to be available");if(!ge)throw new Error("mobx-react requires mobx to be available")});var o$,_0,lO=m(()=>{o$=v(C("styled-components")),_0=o$.keyframes`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`});var n$,s$,a$=m(()=>{n$=v(C("styled-components")),s$=n$.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`});var l$,v0,c$=m(()=>{l$=v(C("styled-components")),v0=l$.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`});var cO=m(()=>{lO();a$();c$()});var cn,Gm=m(()=>{cn=[]});var u$,d$=m(()=>{Gm();u$=function(){return cn.some(function(r){return r.activeTargets.length>0})}});var p$,m$=m(()=>{Gm();p$=function(){return cn.some(function(r){return r.skippedTargets.length>0})}});var h$,f$,g$=m(()=>{h$="ResizeObserver loop completed with undelivered notifications.",f$=function(){var r;typeof ErrorEvent=="function"?r=new ErrorEvent("error",{message:h$}):(r=document.createEvent("Event"),r.initEvent("error",!1,!1),r.message=h$),window.dispatchEvent(r)}});var od,uO=m(()=>{(function(r){r.BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(od||(od={}))});var dO,b$=m(()=>{dO=function(){function r(e,t,i,o){return this.x=e,this.y=t,this.width=i,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return r.prototype.toJSON=function(){var e=this,t=e.x,i=e.y,o=e.top,n=e.right,s=e.bottom,a=e.left,l=e.width,c=e.height;return{x:t,y:i,top:o,right:n,bottom:s,left:a,width:l,height:c}},r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r}()});var ab,x0,pO,y$,lb=m(()=>{ab=function(r){return r instanceof SVGElement&&"getBBox"in r},x0=function(r){if(ab(r)){var e=r.getBBox(),t=e.width,i=e.height;return!t&&!i}var o=r,n=o.offsetWidth,s=o.offsetHeight;return!(n||s||r.getClientRects().length)},pO=function(r){var e,t,i=(t=(e=r)===null||e===void 0?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(i&&r instanceof i.Element)},y$=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}});var nd,mO=m(()=>{nd=typeof window!="undefined"?window:{}});var C0,_$,W6e,G6e,Bs,Vm,v$,hO,S0,w0=m(()=>{uO();b$();lb();mO();C0=new WeakMap,_$=/auto|scroll/,W6e=/^tb|vertical/,G6e=/msie|trident/i.test(nd.navigator&&nd.navigator.userAgent),Bs=function(r){return parseFloat(r||"0")},Vm=function(r,e,t){return r===void 0&&(r=0),e===void 0&&(e=0),t===void 0&&(t=!1),Object.freeze({inlineSize:(t?e:r)||0,blockSize:(t?r:e)||0})},v$=Object.freeze({devicePixelContentBoxSize:Vm(),borderBoxSize:Vm(),contentBoxSize:Vm(),contentRect:new dO(0,0,0,0)}),hO=function(r,e){if(e===void 0&&(e=!1),C0.has(r)&&!e)return C0.get(r);if(x0(r))return C0.set(r,v$),v$;var t=getComputedStyle(r),i=ab(r)&&r.ownerSVGElement&&r.getBBox(),o=!G6e&&t.boxSizing==="border-box",n=W6e.test(t.writingMode||""),s=!i&&_$.test(t.overflowY||""),a=!i&&_$.test(t.overflowX||""),l=i?0:Bs(t.paddingTop),c=i?0:Bs(t.paddingRight),u=i?0:Bs(t.paddingBottom),d=i?0:Bs(t.paddingLeft),p=i?0:Bs(t.borderTopWidth),h=i?0:Bs(t.borderRightWidth),f=i?0:Bs(t.borderBottomWidth),_=i?0:Bs(t.borderLeftWidth),x=d+c,y=l+u,D=_+h,E=p+f,F=a?r.offsetHeight-E-r.clientHeight:0,N=s?r.offsetWidth-D-r.clientWidth:0,R=o?x+D:0,B=o?y+E:0,se=i?i.width:Bs(t.width)-R-N,A=i?i.height:Bs(t.height)-B-F,q=se+x+N+D,ue=A+y+F+E,_e=Object.freeze({devicePixelContentBoxSize:Vm(Math.round(se*devicePixelRatio),Math.round(A*devicePixelRatio),n),borderBoxSize:Vm(q,ue,n),contentBoxSize:Vm(se,A,n),contentRect:new dO(d,l,se,A)});return C0.set(r,_e),_e},S0=function(r,e,t){var i=hO(r,t),o=i.borderBoxSize,n=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(e){case od.DEVICE_PIXEL_CONTENT_BOX:return s;case od.BORDER_BOX:return o;default:return n}}});var fO,gO=m(()=>{w0();fO=function(){function r(e){var t=hO(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]}return r}()});var T0,bO=m(()=>{lb();T0=function(r){if(x0(r))return 1/0;for(var e=0,t=r.parentNode;t;)e+=1,t=t.parentNode;return e}});var x$,C$=m(()=>{Gm();gO();bO();w0();x$=function(){var r=1/0,e=[];cn.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(c){var u=new fO(c.target),d=T0(c.target);a.push(u),c.lastReportedSize=S0(c.target,c.observedBox),d<r&&(r=d)}),e.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var t=0,i=e;t<i.length;t++){var o=i[t];o()}return r}});var yO,S$=m(()=>{Gm();bO();yO=function(r){cn.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(o){o.isActive()&&(T0(o.target)>r?t.activeTargets.push(o):t.skippedTargets.push(o))})})}});var w$,T$=m(()=>{d$();m$();g$();C$();S$();w$=function(){var r=0;for(yO(r);u$();)r=x$(),yO(r);return p$()&&f$(),r>0}});var _O,k$,V6e,E$,I$=m(()=>{k$=[],V6e=function(){return k$.splice(0).forEach(function(r){return r()})},E$=function(r){if(!_O){var e=0,t=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return V6e()}).observe(t,i),_O=function(){t.textContent=""+(e?e--:e++)}}k$.push(r),_O()}});var D$,O$=m(()=>{I$();D$=function(r){E$(function(){requestAnimationFrame(r)})}});var k0,$6e,K6e,X6e,R$,F$,vO,Y6e,E0,xO,A$=m(()=>{T$();mO();O$();k0=0,$6e=function(){return!!k0},K6e=250,X6e={attributes:!0,characterData:!0,childList:!0,subtree:!0},R$=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],F$=function(r){return r===void 0&&(r=0),Date.now()+r},vO=!1,Y6e=function(){function r(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return r.prototype.run=function(e){var t=this;if(e===void 0&&(e=K6e),!vO){vO=!0;var i=F$(e);D$(function(){var o=!1;try{o=w$()}finally{if(vO=!1,e=i-F$(),!$6e())return;o?t.run(1e3):e>0?t.run(e):t.start()}})}},r.prototype.schedule=function(){this.stop(),this.run()},r.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,X6e)};document.body?t():nd.addEventListener("DOMContentLoaded",t)},r.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),R$.forEach(function(t){return nd.addEventListener(t,e.listener,!0)}))},r.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),R$.forEach(function(t){return nd.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},r}(),E0=new Y6e,xO=function(r){!k0&&r>0&&E0.start(),k0+=r,!k0&&E0.stop()}});var J6e,P$,M$=m(()=>{uO();w0();lb();J6e=function(r){return!ab(r)&&!y$(r)&&getComputedStyle(r).display==="inline"},P$=function(){function r(e,t){this.target=e,this.observedBox=t||od.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return r.prototype.isActive=function(){var e=S0(this.target,this.observedBox,!0);return J6e(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},r}()});var B$,L$=m(()=>{B$=function(){function r(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return r}()});var I0,z$,cb,U$=m(()=>{A$();M$();L$();Gm();I0=new WeakMap,z$=function(r,e){for(var t=0;t<r.length;t+=1)if(r[t].target===e)return t;return-1},cb=function(){function r(){}return r.connect=function(e,t){var i=new B$(e,t);I0.set(e,i)},r.observe=function(e,t,i){var o=I0.get(e),n=o.observationTargets.length===0;z$(o.observationTargets,t)<0&&(n&&cn.push(o),o.observationTargets.push(new P$(t,i&&i.box)),xO(1),E0.schedule())},r.unobserve=function(e,t){var i=I0.get(e),o=z$(i.observationTargets,t),n=i.observationTargets.length===1;o>=0&&(n&&cn.splice(cn.indexOf(i),1),i.observationTargets.splice(o,1),xO(-1))},r.disconnect=function(e){var t=this,i=I0.get(e);i.observationTargets.slice().forEach(function(o){return t.unobserve(e,o.target)}),i.activeTargets.splice(0,i.activeTargets.length)},r}()});var ub,N$=m(()=>{U$();lb();ub=function(){function r(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");cb.connect(this,e)}return r.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!pO(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");cb.observe(this,e,t)},r.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!pO(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");cb.unobserve(this,e)},r.prototype.disconnect=function(){cb.disconnect(this)},r.toString=function(){return"function ResizeObserver () { [polyfill code] }"},r}()});var CO=m(()=>{N$();gO()});var D0=S((cut,j$)=>{var Z6e="Expected a function",q$=0/0,Q6e="[object Symbol]",eUe=/^\s+|\s+$/g,tUe=/^[-+]0x[0-9a-f]+$/i,rUe=/^0b[01]+$/i,iUe=/^0o[0-7]+$/i,oUe=parseInt,nUe=typeof global=="object"&&global&&global.Object===Object&&global,sUe=typeof self=="object"&&self&&self.Object===Object&&self,aUe=nUe||sUe||Function("return this")(),lUe=Object.prototype,cUe=lUe.toString,uUe=Math.max,dUe=Math.min,SO=function(){return aUe.Date.now()};function pUe(r,e,t){var i,o,n,s,a,l,c=0,u=!1,d=!1,p=!0;if(typeof r!="function")throw new TypeError(Z6e);e=H$(e)||0,wO(t)&&(u=!!t.leading,d="maxWait"in t,n=d?uUe(H$(t.maxWait)||0,e):n,p="trailing"in t?!!t.trailing:p);function h(R){var B=i,se=o;return i=o=void 0,c=R,s=r.apply(se,B),s}function f(R){return c=R,a=setTimeout(y,e),u?h(R):s}function _(R){var B=R-l,se=R-c,A=e-B;return d?dUe(A,n-se):A}function x(R){var B=R-l,se=R-c;return l===void 0||B>=e||B<0||d&&se>=n}function y(){var R=SO();if(x(R))return D(R);a=setTimeout(y,_(R))}function D(R){return a=void 0,p&&i?h(R):(i=o=void 0,s)}function E(){a!==void 0&&clearTimeout(a),c=0,i=l=o=a=void 0}function F(){return a===void 0?s:D(SO())}function N(){var R=SO(),B=x(R);if(i=arguments,o=this,l=R,B){if(a===void 0)return f(l);if(d)return a=setTimeout(y,e),h(l)}return a===void 0&&(a=setTimeout(y,e)),s}return N.cancel=E,N.flush=F,N}function wO(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function mUe(r){return!!r&&typeof r=="object"}function hUe(r){return typeof r=="symbol"||mUe(r)&&cUe.call(r)==Q6e}function H$(r){if(typeof r=="number")return r;if(hUe(r))return q$;if(wO(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=wO(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(eUe,"");var t=rUe.test(r);return t||iUe.test(r)?oUe(r.slice(2),t?2:8):tUe.test(r)?q$:+r}j$.exports=pUe});var W$,O0,TO=m(()=>{W$=v(C("react")),O0=W$.default.createContext({})});var G$=m(()=>{});var db,un,nr,V$,$$,K$,X$,kO=m(()=>{db=()=>typeof window!="undefined"&&window.navigator&&window.navigator.userAgent||"",un=(r=db())=>r.indexOf("Edge")!==-1,nr=(r=db())=>!!r.match(/msie|trident/i),V$=(r=db())=>!!r.match(/windows/i),$$=(r=db())=>r.indexOf("Safari")!==-1&&r.indexOf("Chrome")===-1,K$=(r=db())=>!!r.match(/iP(hone|od|ad)|AppleWebKit/),X$=()=>{if(typeof document=="undefined")return!1;let r=document.createElement("canvas"),e=r.getContext("webgl")||r.getContext("experimental-webgl");return e&&e instanceof WebGLRenderingContext}});var fUe,Y$,J$=m(()=>{fUe=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g),Y$=r=>r.replace(fUe,"")});var Ls,EO=m(()=>{Ls=r=>{try{return new URL(r),!0}catch(e){return!1}}});var Z$,IO=m(()=>{Z$=r=>r instanceof HTMLImageElement});function gUe(r){return!Object.prototype.hasOwnProperty.call(r,"name")}function bUe(r){return!Object.prototype.hasOwnProperty.call(r,"name")}var Q$=m(()=>{});var Ve,pb=m(()=>{(function(d){d.UNDO="undo",d.REDO="redo",d.DELETE="delete",d.BRING_TO_FRONT="bringtofront",d.EDIT="edit",d.DUPLICATE="duplicate",d.ADD="add",d.FLIP="flip",d.INVERT="invert",d.CLOSE="close",d.EXPORT="export"})(Ve||(Ve={}))});var w,DO=m(()=>{(function(p){p.LIBRARY="library",p.TRANSFORM="transform",p.FILTER="filter",p.ADJUSTMENT="adjustment",p.FOCUS="focus",p.STICKER="sticker",p.TEXT="text",p.TEXT_DESIGN="textdesign",p.OVERLAY="overlay",p.FRAME="frame",p.BRUSH="brush",p.CUSTOM="customTool"})(w||(w={}))});var eK=m(()=>{});var tK=m(()=>{});var rK=m(()=>{});var iK=m(()=>{});var hr,$m=m(()=>{(function(t){t.TEXT="text",t.CARD="card"})(hr||(hr={}))});var Le,oK=m(()=>{(function(i){i.LARGE="large",i.MEDIUM="medium",i.SMALL="small"})(Le||(Le={}))});var nK=m(()=>{});var sK=m(()=>{});var aK=m(()=>{});var lK=m(()=>{});var cK=m(()=>{});var uK=m(()=>{});var dK=m(()=>{});var St,pK=m(()=>{(function(o){o.ERROR="error",o.WARNING="warning",o.INFO="info",o.TEXT_EDIT="textEdit"})(St||(St={}))});var mK=m(()=>{});var hK=m(()=>{});var fK=m(()=>{});var gK=m(()=>{});var bK=m(()=>{});var yK=m(()=>{});var _K=m(()=>{});var vK=m(()=>{});var xK,CK,R0,SK=m(()=>{xK=class{constructor(){this.enabled=!0;this.threshold=20;this.snapToHorizontalCenter=!0;this.snapToVerticalCenter=!0;this.snapToLeft=.1;this.snapToRight=.1;this.snapToTop=.1;this.snapToBottom=.1}},CK=class{constructor(){this.enabled=!0;this.threshold=20;this.angles=[0,45,90,135,180,225,270,315]}},R0=class{constructor(){this.position=new xK;this.rotation=new CK}}});var F0,A0,wK=m(()=>{(function(n){n.CENTER="center",n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right"})(F0||(F0={}));A0=class{constructor(){this.watermarkURI="";this.alignment=F0.TOP_RIGHT;this.inset=.05;this.size=.2}}});var OO,TK,kK=m(()=>{(function(e){e.OBJECT="object"})(OO||(OO={}));TK=class{}});var Qr,EK=m(()=>{(function(o){o.IMAGE="image",o.DATA_URL="data-url",o.BLOB="blob",o.MSBLOB="ms-blob"})(Qr||(Qr={}))});var Ir,IK=m(()=>{(function(t){t.PNG="image/png",t.JPEG="image/jpeg"})(Ir||(Ir={}))});var Ci,DK=m(()=>{(function(l){l.BMP="image/bmp",l.GIF="image/gif",l.ICO="image/x-icon",l.JPEG="image/jpeg",l.PNG="image/png",l.SVG="image/svg+xml",l.TIFF="image/tiff",l.WEBP="image/webp"})(Ci||(Ci={}))});var OK=m(()=>{});var RK=m(()=>{});var FK=m(()=>{});var AK=m(()=>{});var PK,MK=m(()=>{DO();PK=class{constructor(){this.order="default";this.language="en";this.theme="dark";this.assetBaseUrl="assets/";this.assetResolver={};this.displayResizeWarning=!1;this.displayCloseWarning=!0;this.displayCanvasRendererWarning=!0;this.displayToolControlBarTitle=!0;this.displaySerializationModal=!0;this.forceCrop=!1;this.enableZoom=!0;this.scaleImageToFit=!0;this.restrictZoomOutToDefault=!0;this.defaultTool=w.FILTER}};w.FILTER,w.FOCUS,w.ADJUSTMENT,w.LIBRARY,w.OVERLAY,w.STICKER,w.TEXT,w.TEXT_DESIGN,w.FRAME,w.BRUSH,w.TRANSFORM,w.CUSTOM});var BK=m(()=>{});var Je,RO,LK=m(()=>{(function(p){p.BRIGHTNESS="brightness",p.CONTRAST="contrast",p.SATURATION="saturation",p.CLARITY="clarity",p.SHADOWS="shadows",p.HIGHLIGHTS="highlights",p.EXPOSURE="exposure",p.GAMMA="gamma",p.BLACKS="blacks",p.WHITES="whites",p.TEMPERATURE="temperature",p.SHARPNESS="sharpness"})(Je||(Je={}));RO=Object.values(Je).reduce((r,e)=>(r[e]=!0,r),{})});var Wn,P0,zK=m(()=>{(function(o){o.RemoveAdjustmentButton="removeAdjustmentButton",o.Expandable="expandable",o.Separator="separator",o.Items="items"})(Wn||(Wn={}));P0=class{constructor(){this.categories=[];this.flattenCategories=!1;this.advancedUIToolControlBarOrder=[{type:Wn.Expandable,children:[Wn.RemoveAdjustmentButton,Wn.Separator]},Wn.Items]}}});var UK=m(()=>{});var NK=m(()=>{LK();zK();UK()});var qK,HK=m(()=>{qK=class{}});var To,Km,M0,jK=m(()=>{$m();(function(n){n.RemoveFilterButton="removeFilterButton",n.FilterIntensitySlider="filterIntensitySlider",n.Expandable="expandable",n.Separator="separator",n.Items="items"})(To||(To={}));(function(e){e.FilterIntensity="filterIntensity"})(Km||(Km={}));M0=class{constructor(){this.categories=[];this.flattenCategories=!1;this.categoryHeaderType=hr.CARD;this.enablePreviewThumbnails=!1;this.advancedUIToolControlBarOrder=[{type:To.Expandable,children:[To.RemoveFilterButton,To.FilterIntensitySlider,To.Separator]},To.Items];this.basicUIToolControlBarTabsOrder=[Km.FilterIntensity]}}});function Xm(r){return r.lightColor!==void 0}function FO(r){return r.lutURI!==void 0}var WK=m(()=>{});var M,Nt,GK=m(()=>{(function(G){G.Desert="imgly_duotone_desert",G.Peach="imgly_duotone_peach",G.Clash="imgly_duotone_clash",G.Plum="imgly_duotone_plum",G.Breezy="imgly_duotone_breezy",G.DeepBlue="imgly_duotone_deepblue",G.Frog="imgly_duotone_frog",G.Sunset="imgly_duotone_sunset",G.AD1920="imgly_lut_ad1920",G.Greyed="imgly_lut_bw",G.Dusty="imgly_lut_x400",G.Litho="imgly_lut_litho",G.Sepia="imgly_lut_sepiahigh",G.Weathered="imgly_lut_plate",G.HardStuff="imgly_lut_sin",G.Polaroid="imgly_lut_blues",G.Sunny70s="imgly_lut_front",G.Oldtimer="imgly_lut_texas",G.Inferno="imgly_lut_celsius",G.Snappy="imgly_lut_cool",G.Chestnut="imgly_lut_chest",G.Softy="imgly_lut_winter",G.Pebble="imgly_lut_kdynamic",G.Moss="imgly_lut_fall",G.Lemon="imgly_lut_lenin",G.GreenGap="imgly_lut_pola669",G.Colla="imgly_lut_elder",G.Solanus="imgly_lut_orchid",G.Kalmen="imgly_lut_bleached",G.Joran="imgly_lut_bleachedblue",G.Levante="imgly_lut_breeze",G.Zephyr="imgly_lut_blueshadows",G.Golden="imgly_lut_sunset",G.LowFire="imgly_lut_eighties",G.Sunrise="imgly_lut_evening",G.FlatBlack="imgly_lut_k2",G.Pumpkin="imgly_lut_nogreen",G.Ancient="imgly_lut_ancient",G.Candy="imgly_lut_cottoncandy",G.Classic="imgly_lut_classic",G.Colorful="imgly_lut_colorful",G.Creamy="imgly_lut_creamy",G.Fixie="imgly_lut_fixie",G.Food="imgly_lut_food",G.Fridge="imgly_lut_fridge",G.Glam="imgly_lut_glam",G.Gobblin="imgly_lut_gobblin",G.Hicon="imgly_lut_highcontrast",G.HighCarb="imgly_lut_highcarb",G.K1="imgly_lut_k1",G.K6="imgly_lut_k6",G.Keen="imgly_lut_keen",G.Lomo="imgly_lut_lomo",G.Lomo100="imgly_lut_lomo100",G.Lucid="imgly_lut_lucid",G.Mellow="imgly_lut_mellow",G.Neat="imgly_lut_neat",G.Pale="imgly_lut_pale",G.Pitched="imgly_lut_pitched",G.PolaSX="imgly_lut_polasx",G.Pro400="imgly_lut_pro400",G.Quozi="imgly_lut_quozi",G.Settled="imgly_lut_settled",G.Seventies="imgly_lut_seventies",G.Soft="imgly_lut_soft",G.Steel="imgly_lut_steel",G.Summer="imgly_lut_summer",G.Tender="imgly_lut_tender",G.Twilight="imgly_lut_twilight"})(M||(M={}));(function(a){a.DuoTone="imgly_filter_category_duotone",a.BW="imgly_filter_category_bw",a.Vintage="imgly_filter_category_vintage",a.Smooth="imgly_filter_category_smooth",a.Cold="imgly_filter_category_cold",a.Warm="imgly_filter_category_warm",a.Legacy="imgly_filter_category_legacy"})(Nt||(Nt={}))});var VK=m(()=>{jK();WK();GK()});var ko,B0,L0,$K=m(()=>{(function(n){n.RemoveFocusButton="removeFocusButton",n.FocusIntensitySlider="focusIntensitySlider",n.Expandable="expandable",n.Separator="separator",n.Items="items"})(ko||(ko={}));(function(e){e.FocusIntensity="focusIntensity"})(B0||(B0={}));L0=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:ko.Expandable,children:[ko.RemoveFocusButton,ko.FocusIntensitySlider,ko.Separator]},ko.Items];this.basicUIToolControlBarTabsOrder=[B0.FocusIntensity]}}});var KK=m(()=>{});var Ze,XK=m(()=>{(function(o){o.RADIAL="radial",o.LINEAR="linear",o.MIRRORED="mirrored",o.GAUSSIAN="gaussian"})(Ze||(Ze={}))});var YK=m(()=>{$K();KK();XK()});var ei,zs,z0,JK=m(()=>{(function(a){a.RemoveFrameButton="removeFrameButton",a.FrameOpacitySlider="frameOpacitySlider",a.FrameSizeSlider="frameSizeSlider",a.FrameColorList="frameColorList",a.Separator="separator",a.Items="items",a.Expandable="expandable"})(ei||(ei={}));(function(i){i.FrameSize="frameSize",i.FrameOpacity="frameOpacity",i.FrameColor="frameColor"})(zs||(zs={}));z0=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:ei.Expandable,children:[ei.RemoveFrameButton,ei.FrameOpacitySlider,ei.FrameSizeSlider,ei.FrameColorList,ei.Separator]},ei.Items];this.basicUIToolControlBarTabsOrder=[zs.FrameOpacity,zs.FrameSize,zs.FrameColor]}}});var ZK=m(()=>{});var QK=m(()=>{JK();ZK()});var U0,AO=m(()=>{U0=class{constructor(e){this.name=e.name,this.coverImageUrl=e.coverImageUrl}loadCoverImage(e="anonymous"){return new Promise((t,i)=>{let o=new Image;o.addEventListener("load",()=>{t(o)}),o.addEventListener("error",()=>{i(new Error(`Failed to load image at ${this.coverImage}`))}),o.crossOrigin=e,o.src=this.coverImageUrl,this.coverImage=o})}}});var N0,PO=m(()=>{N0=class{constructor(e){this.title=e.title,this.category=e.category||e.title,this.thumbUrl=e.thumbUrl,this.rawUrl=e.rawUrl,this.authorName=e.authorName,this.authorAvatar=e.authorAvatar}loadThumbImage(e="anonymous"){return new Promise((t,i)=>{let o=new Image;o.addEventListener("load",()=>{t(o)}),o.addEventListener("error",()=>{i(new Error(`Failed to load image at ${this.thumbUrl}`))}),o.crossOrigin=e,o.src=this.thumbUrl,this.thumbImage=o})}getThumbImage(){return this.thumbUrl}}});var q0,eX=m(()=>{q0=class{getData(e){return new Promise((t,i)=>{let o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="json",o.onload=()=>{let{status:n}=o;n===200?t(o.response):i(new Error(`HTTP Status ${n}`))},o.send()})}}});var H0,MO=m(()=>{eX();H0=class{loadJSON(e){return new q0().getData(e)}getCategories(){return Promise.resolve([])}searchImages(e){return Promise.resolve([])}}});var BO,tX=m(()=>{AO();PO();MO();BO=class extends H0{loadData(){return this.data?Promise.resolve(this.data):this.loadJSON("https://img.ly/static/libraries/unsplash/metadata.json").then(e=>(typeof e=="string"&&(e=JSON.parse(e)),this.data=e,e))}getCategories(){return this.loadData().then(e=>e.categories.map(t=>new U0({name:t.name,coverImageUrl:t.coverImage})))}searchImages(e){return this.loadData().then(t=>t.images.filter(i=>{let o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(/\s+/);for(let n=0;n<o.length;n+=1){let s=o[n];if(!new RegExp(s,"i").test(i.title))return!1}return!0}).map(i=>new N0(i)))}}});var Xi,j0,rX=m(()=>{$m();tX();(function(n){n.UploadImageButton="uploadImageButton",n.OpenWebcamButton="openWebcamButton",n.SearchFieldInput="searchFieldInput",n.Separator="separator",n.Items="items"})(Xi||(Xi={}));j0=class{constructor(){this.enableWebcam=!1;this.enableUpload=!1;this.provider=BO;this.flattenCategories=!1;this.categoryHeaderType=hr.CARD;this.advancedUIToolControlBarOrder=[Xi.SearchFieldInput,Xi.UploadImageButton,Xi.OpenWebcamButton,Xi.Separator,Xi.Items]}}});var iX=m(()=>{AO();PO();rX();MO()});var Si,Cc,W0,oX=m(()=>{(function(s){s.RemoveOverlayButton="removeOverlayButton",s.OverlayOpacitySlider="overlayOpacitySlider",s.OverlayBlendModeCarousel="overlayBlendModeCarousel",s.Expandable="expandable",s.Separator="separator",s.Items="items"})(Si||(Si={}));(function(t){t.OverlayOpacity="overlayOpacity",t.OverlayBlendMode="overlayBlendMode"})(Cc||(Cc={}));W0=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:Si.Expandable,children:[Si.RemoveOverlayButton,Si.OverlayBlendModeCarousel,Si.OverlayOpacitySlider,Si.Separator]},Si.Items];this.basicUIToolControlBarTabsOrder=[Cc.OverlayBlendMode,Cc.OverlayOpacity]}}});var nX=m(()=>{});var Ue,sX=m(()=>{(function(c){c.NORMAL="normal",c.OVERLAY="overlay",c.SOFT_LIGHT="softLight",c.HARD_LIGHT="hardLight",c.MULTIPLY="multiply",c.DARKEN="darken",c.COLOR_BURN="colorBurn",c.SCREEN="screen",c.LIGHTEN="lighten"})(Ue||(Ue={}))});var Fe,aX=m(()=>{(function(y){y.Bokeh="imgly_overlay_bokeh",y.Chop="imgly_overlay_chop",y.Clouds="imgly_overlay_clouds",y.Golden="imgly_overlay_golden",y.Grain="imgly_overlay_grain",y.Hearts="imgly_overlay_hearts",y.LightLeak1="imgly_overlay_lightleak1",y.LightLeak2="imgly_overlay_lightleak2",y.Metal="imgly_overlay_metal",y.Mosaic="imgly_overlay_mosaic",y.Painting="imgly_overlay_painting",y.Paper="imgly_overlay_paper",y.Rain="imgly_overlay_rain",y.Vintage="imgly_overlay_vintage",y.Wall1="imgly_overlay_wall1",y.Wall2="imgly_overlay_wall2",y.Wood="imgly_overlay_wood"})(Fe||(Fe={}))});var lX=m(()=>{oX();nX();sX();aX()});var Yi,Sc,G0,cX=m(()=>{pb();$m();(function(n){n.UploadStickerButton="uploadStickerButton",n.StickerOpacitySlider="stickerOpacitySlider",n.StickerColorList="stickerColorList",n.Separator="separator",n.Items="items"})(Yi||(Yi={}));(function(t){t.StickerColor="stickerColor",t.StickerOpacity="stickerOpacity"})(Sc||(Sc={}));G0=class{constructor(){this.categories=[];this.canvasActions=[Ve.BRING_TO_FRONT,Ve.FLIP,Ve.DUPLICATE,Ve.DELETE];this.flattenCategories=!1;this.categoryHeaderType=hr.CARD;this.enableCustomUpload=!0;this.customStickerResizeMode="keepAspect";this.customStickerTintMode="none";this.advancedUIToolControlBarOrder=[Yi.UploadStickerButton,Yi.StickerOpacitySlider,Yi.StickerColorList,Yi.Separator,Yi.Items];this.basicUIToolControlBarTabsOrder=[Sc.StickerColor,Sc.StickerOpacity]}}});var uX=m(()=>{});var dX=m(()=>{cX();uX()});var br,Ji,V0,pX=m(()=>{pb();(function(c){c.NewTextButton="newTextButton",c.FontFamilyDropdown="fontFamilyDropdown",c.FontSizeInput="fontSizeInput",c.TextAligmentList="textAlignmentList",c.Separator="separator",c.Inline="inline",c.TextColorList="textColorList",c.BackgroundColorList="backgroundColorList",c.LineSpacingSlider="lineSpacingSlider"})(br||(br={}));(function(n){n.FontSize="fontSize",n.TextAligment="textAlignment",n.TextColor="textColor",n.BackgroundColor="backgroundColor",n.LineSpacing="lineSpacing"})(Ji||(Ji={}));V0=class{constructor(){this.fonts=[];this.canvasActions=[Ve.EDIT,Ve.BRING_TO_FRONT,Ve.DUPLICATE,Ve.DELETE];this.allowEmojis=!1;this.disableAutoScaling=!1;this.addDefaultTextOnEnter=!0;this.advancedUIToolControlBarOrder=[br.NewTextButton,br.FontFamilyDropdown,{type:br.Inline,children:[br.FontSizeInput,br.TextAligmentList]},br.Separator,br.TextColorList,br.BackgroundColorList,br.Separator,br.LineSpacingSlider];this.basicUIToolControlBarTabsOrder=[Ji.FontSize,Ji.TextAligment,Ji.TextColor,Ji.BackgroundColor,Ji.LineSpacing]}}});function LO(r){return r.provider===void 0||r.provider==="file"}function zO(r){return r.provider==="google"}var mX=m(()=>{});var hX=m(()=>{});var fX=m(()=>{pX();mX();hX()});var wi,Us,$0,gX=m(()=>{(function(s){s.RemoveBrushButton="removeBrushButton",s.BrushColorList="brushColorList",s.BrushSizeSlider="brushSizeSlider",s.BrushHardnessSlider="brushHardnessSlider",s.Expandable="expandable",s.Separator="separator"})(wi||(wi={}));(function(i){i.BrushSize="brushSize",i.BrushHardness="brushHardness",i.BrushColor="brushColor"})(Us||(Us={}));$0=class{constructor(){this.defaultSize=.05;this.defaultHardness=.5;this.advancedUIToolControlBarOrder=[{type:wi.Expandable,children:[wi.RemoveBrushButton,wi.Separator]},wi.BrushHardnessSlider,wi.BrushSizeSlider,wi.BrushColorList];this.basicUIToolControlBarTabsOrder=[Us.BrushColor,Us.BrushSize,Us.BrushHardness]}}});var bX=m(()=>{gX()});var Zi,K0,yX=m(()=>{pb();(function(n){n.NewTextDesignButton="newTextDesignButton",n.ShuffleLayoutButton="shuffleLayoutButton",n.TextDesignColorList="textDesignColorList",n.Separator="separator",n.Items="items"})(Zi||(Zi={}));K0=class{constructor(){this.items=[];this.canvasActions=[Ve.EDIT,Ve.BRING_TO_FRONT,Ve.INVERT,Ve.DUPLICATE,Ve.DELETE];this.allowEmojis=!1;this.addDefaultTextOnEnter=!0;this.advancedUIToolControlBarOrder=[Zi.NewTextDesignButton,Zi.ShuffleLayoutButton,Zi.TextDesignColorList,Zi.Separator,Zi.Items]}}});var _X=m(()=>{});var vX=m(()=>{yX();_X()});var Qi,Ns,X0,xX=m(()=>{$m();(function(n){n.ResetTransformButton="resetTransformButton",n.KeepResolutionCheckbox="keepResolutionCheckbox",n.CropSizeInput="cropSizeInput",n.Separator="separator",n.Items="items"})(Qi||(Qi={}));(function(i){i.CropSize="cropSize",i.FlipRotate="flipRotate",i.Resolution="resolution"})(Ns||(Ns={}));X0=class{constructor(){this.categories=[];this.enableRotation=!0;this.enableFlip=!0;this.flattenCategories=!1;this.categoryHeaderType=hr.TEXT;this.advancedUIToolControlBarOrder=[Qi.ResetTransformButton,Qi.KeepResolutionCheckbox,Qi.CropSizeInput,Qi.Separator,Qi.Items];this.basicUIToolControlBarTabsOrder=[Ns.CropSize,Ns.FlipRotate,Ns.Resolution]}}});var CX=m(()=>{});var sr,SX=m(()=>{(function(F){F.CommonCategory="imgly_transforms_common",F.FacebookCategory="imgly_transforms_facebook",F.TwitterCategory="imgly_transforms_twitter",F.InstagramCategory="imgly_transforms_instagram",F.Custom="imgly_transform_common_custom",F.Square="imgly_transform_common_square",F.ThreeByFour="imgly_transform_common_3",F.FourByThree="imgly_transform_common_4",F.NineBySixteen="imgly_transform_common_9",F.SixteenByNine="imgly_transform_common_16",F.FacebookPost="imgly_transform_facebook_post",F.FacebookProfile="imgly_transform_facebook_profile",F.FacebookTitle="imgly_transform_facebook_title",F.InstagramLandscape="imgly_transform_instagram_landscape",F.InstagramPortrait="imgly_transform_instagram_portrait",F.InstagramSquare="imgly_transform_instagram_square",F.InstagramStory="imgly_transform_instagram_story",F.TwitterPost="imgly_transform_twitter_post",F.TwitterProfile="imgly_transform_twitter_profile",F.TwitterTitle="imgly_transform_twitter_title"})(sr||(sr={}))});var wX=m(()=>{xX();CX();SX()});var le,TX=m(()=>{(function(p){p.EXPORT="export",p.CLOSE="close",p.HISTORY_UNDO="historyUndo",p.HISTORY_REDO="historyRedo",p.HISTORY_CHANGE="historyChange",p.EDITOR_READY="editorReady",p.ERROR_IMAGE_LOADING="errorImageLoading",p.IMAGE_LOAD="imageLoad",p.TOOL_ENTER="toolEnter",p.STICKER_UPLOAD_ADD="stickerUploadAdd",p.ERROR_WEBGL_CONTEXT_LOST="errorWebGLContextLost",p.CROP_DIMENSIONS_CHANGE="cropDimensionsChange"})(le||(le={}))});var Eo,kX=m(()=>{Eo=class{constructor(){this.events={}}addListener(e,t){return(this.events[e]||(this.events[e]=[])).push(t),this}removeListener(e,t){let i=this.events[e];if(!i)return this;let o=i.lastIndexOf(t);return o===-1?this:(i.splice(o,1),this)}removeAllListeners(e){return this.events[e]=void 0,this}on(e,t){return this.addListener(e,t)}off(e,t){return this.removeListener(e,t)}emit(e,...t){let i=this.events[e];return!i||!i.length?!1:(i.slice(0).forEach(o=>o.apply(null,t)),!0)}}});var EX=m(()=>{});var IX=m(()=>{});var V=m(()=>{Q$();pb();DO();eK();tK();rK();iK();$m();oK();nK();sK();aK();lK();cK();uK();dK();pK();mK();hK();fK();gK();bK();yK();_K();vK();SK();wK();kK();EK();IK();DK();OK();RK();FK();AK();MK();BK();NK();HK();VK();YK();QK();iX();lX();dX();fX();bX();vX();wX();TX();kX();EX();IX()});var yUe,Y0,DX=m(()=>{V();yUe=[{identifier:"basics",name:"Basics",items:[{identifier:Je.BRIGHTNESS},{identifier:Je.CONTRAST},{identifier:Je.SATURATION},{identifier:Je.GAMMA}]},{identifier:"refinements",name:"Refinements",items:[{identifier:Je.CLARITY},{identifier:Je.SHADOWS},{identifier:Je.HIGHLIGHTS},{identifier:Je.EXPOSURE},{identifier:Je.BLACKS},{identifier:Je.WHITES},{identifier:Je.TEMPERATURE},{identifier:Je.SHARPNESS}]}],Y0=yUe});var _Ue,J0,OX=m(()=>{V();_Ue=[{identifier:Nt.DuoTone,name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:M.Desert,name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:M.Peach,name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:M.Clash,name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:M.Plum,name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:M.Breezy,name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:M.DeepBlue,name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:M.Frog,name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:M.Sunset,name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:Nt.BW,name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:M.AD1920,name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:M.Greyed,name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:M.Dusty,name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:M.Litho,name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:M.Sepia,name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:M.Weathered,name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:M.HardStuff,name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:Nt.Vintage,name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:M.Polaroid,name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:M.Sunny70s,name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Oldtimer,name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Inferno,name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Snappy,name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:Nt.Smooth,name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:M.Chestnut,name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Softy,name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:M.Pebble,name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:M.Moss,name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:M.Lemon,name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:M.GreenGap,name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:Nt.Cold,name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:M.Colla,name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:M.Solanus,name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:M.Kalmen,name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:M.Joran,name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:M.Levante,name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:M.Zephyr,name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:Nt.Warm,name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:M.Golden,name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:M.LowFire,name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:M.Sunrise,name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:M.FlatBlack,name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Pumpkin,name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:Nt.Legacy,name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:M.Ancient,name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:M.Candy,name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:M.Classic,name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:M.Colorful,name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:M.Creamy,name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:M.Fixie,name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Food,name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:M.Fridge,name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Glam,name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:M.Gobblin,name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:M.Hicon,name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:M.HighCarb,name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:M.K1,name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:M.K6,name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:M.Keen,name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:M.Lomo,name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Lomo100,name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:M.Lucid,name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:M.Mellow,name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:M.Neat,name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:M.Pale,name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:M.Pitched,name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:M.PolaSX,name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:M.Pro400,name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:M.Quozi,name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:M.Settled,name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:M.Seventies,name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:M.Soft,name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:M.Steel,name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:M.Summer,name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:M.Tender,name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:M.Twilight,name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}],J0=_Ue});var vUe,UO,RX=m(()=>{V();vUe=[{identifier:Ze.RADIAL,thumbnailURI:"./items/radial.png"},{identifier:Ze.MIRRORED,thumbnailURI:"./items/mirrored.png"},{identifier:Ze.LINEAR,thumbnailURI:"./items/linear.png"},{identifier:Ze.GAUSSIAN,thumbnailURI:"./items/gaussian.png"}],UO=vUe});var xUe,Z0,FX=m(()=>{xUe=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}},{identifier:"imgly_font_amaticsc",fontFamily:"Amatic SC",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans_regular",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_carter_one",fontFamily:"Carter One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",googleFamily:"Oswald",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",googleFamily:"Palanquin Dark",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"bold",fontStyle:"italic",googleFamily:"Roboto",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",googleFamily:"Roboto",fontWeight:300,fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",googleFamily:"Montserrat",fontWeight:300,fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}],Z0=xUe});var AX,PX,MX=m(()=>{AX=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans_regular","imgly_font_galano_grotesque_bold","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"],PX=["imgly_font_abril_fatface_regular","imgly_font_amberlight","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_galano_grotesque_bold","imgly_font_handycheera_regular","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra","imgly_font_wolesbro"]});var CUe,Q0,BX=m(()=>{CUe=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}],Q0=CUe});var SUe,eC,LX=m(()=>{V();SUe=[{identifier:Fe.Golden,name:"Golden",defaultBlendMode:Ue.LIGHTEN,overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:Fe.LightLeak1,name:"Lightleak",defaultBlendMode:Ue.SCREEN,overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:Fe.Rain,name:"Rain",defaultBlendMode:Ue.OVERLAY,overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:Fe.Mosaic,name:"Mosaic",defaultBlendMode:Ue.MULTIPLY,overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:Fe.Vintage,name:"Vintage",defaultBlendMode:Ue.OVERLAY,overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:Fe.Paper,name:"Paper",defaultBlendMode:Ue.MULTIPLY,overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:Fe.Bokeh,name:"Bokeh",defaultBlendMode:Ue.LIGHTEN,overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:Fe.Hearts,name:"Hearts",defaultBlendMode:Ue.SCREEN,overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:Fe.LightLeak2,name:"Lightleak 2",defaultBlendMode:Ue.LIGHTEN,overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:Fe.Wood,name:"Wood",defaultBlendMode:Ue.MULTIPLY,overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:Fe.Chop,name:"Chop",defaultBlendMode:Ue.MULTIPLY,overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:Fe.Metal,name:"Metal",defaultBlendMode:Ue.OVERLAY,overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:Fe.Painting,name:"Painting",defaultBlendMode:Ue.OVERLAY,overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:Fe.Grain,name:"Grain",defaultBlendMode:Ue.OVERLAY,overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:Fe.Clouds,name:"Clouds",defaultBlendMode:Ue.SOFT_LIGHT,overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:Fe.Wall1,name:"Wall",defaultBlendMode:Ue.LIGHTEN,overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:Fe.Wall2,name:"Wall 2",defaultBlendMode:Ue.OVERLAY,overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}],eC=SUe});var wUe,tC,zX=m(()=>{wUe=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}],tC=wUe});var TUe,UX,NX=m(()=>{TUe=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],UX=TUe});var kUe,qX,HX=m(()=>{kUe=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],qX=kUe});var EUe,rC,jX=m(()=>{EUe=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}],rC=EUe});var Xa,wc,NO=m(()=>{Xa={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco"},wc=(r,e=!1)=>Xa[r]?(e&&console.warn(`Font ${r} was deprecated. Please use ${Xa[r]} instead.`),Xa[r]):r});var iC={};Ht(iC,{isMobile:()=>qO});function qO(){if(typeof navigator=="undefined")return!1;let r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}var HO=m(()=>{});function yt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}var WX=m(()=>{});var GX,VX,jO=m(()=>{GX=r=>{r.preventDefault(),r.stopPropagation()},VX=(...r)=>{}});var WO=m(()=>{});var lht,$X=m(()=>{jO();WO();lht=typeof window!="undefined"?window.performance.now.bind(window.performance):VX()});var mb,GO=m(()=>{mb=class{constructor(e){this.text=e;this.lastOffsetWidth=-1;let t="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(e)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=t,this.expandable.style.cssText=t,this.expandableInner.style.cssText=t,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}getElement(){return this.element}setFont(e){this.element.style.cssText=`max-width:none;
      min-width:20px;
      min-height:20px;
      display:inline-block;
      overflow:hidden;
      position:absolute;
      width:auto;
      margin:0;
      padding:0;
      top:-999px;
      white-space:nowrap;
      font-synthesis:none;
      font:${e};`}getWidth(){return this.element.offsetWidth}setWidth(e){this.element.style.width=`${e}px`}onResize(e){let t=()=>{this.onScroll(e)};this.collapsible.addEventListener("scroll",t),this.expandable.addEventListener("scroll",t),this.reset()}reset(){let e=this.getWidth(),t=e+100;return this.expandableInner.style.width=`${t}px`,this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e?(this.lastOffsetWidth=e,!0):!1}onScroll(e){this.reset()&&this.element.parentNode!==null&&e(this.lastOffsetWidth)}}});var Yt,Tc,KX=m(()=>{GO();Yt=class{static getUserAgent(){return window.navigator.userAgent}static getNavigatorVendor(){return window.navigator.vendor}static hasWebKitFallbackBug(){if(Yt.HAS_WEBKIT_FALLBACK_BUG===null){let e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(Yt.getUserAgent());Yt.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||parseInt(e[1],10)===536&&parseInt(e[2],10)<=11)}return Yt.HAS_WEBKIT_FALLBACK_BUG}static hasSafari10Bug(){if(Yt.HAS_SAFARI_10_BUG===null)if(Yt.supportsNativeFontLoading()&&/Apple/.test(Yt.getNavigatorVendor())){let e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(Yt.getUserAgent());Yt.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else Yt.HAS_SAFARI_10_BUG=!1;return Yt.HAS_SAFARI_10_BUG}static supportsNativeFontLoading(){return Yt.SUPPORTS_NATIVE_FONT_LOADING===null&&(Yt.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),Yt.SUPPORTS_NATIVE_FONT_LOADING}static supportsStretch(){if(Yt.SUPPORTS_STRETCH===null){let e=document.createElement("div");try{e.style.font="condensend 100px sans-serif"}catch(t){Yt.SUPPORTS_STRETCH=!1}Yt.SUPPORTS_STRETCH=e.style.font!==""}return Yt.SUPPORTS_STRETCH}constructor(e){this.font=T({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},e)}load(e,t){let i="BESbswy",o=null,n=t||Yt.DEFAULT_TIMEOUT,s=this.getTime();return new Promise((a,l)=>{if(Yt.supportsNativeFontLoading()&&!Yt.hasSafari10Bug()){let c=new Promise((d,p)=>{let h=()=>{this.getTime()-s>=n?p(new Error(""+n+"ms timeout exceeded")):document.fonts.load(this.getStyle(`"${this.font.fontFamily}"`),i).then(_=>{_.length>=1?d():setTimeout(h,25)},l)};h()}),u=new Promise((d,p)=>{o=setTimeout(()=>{p(new Error(`${n} ms timeout exceeded`))},n)});Promise.race([u,c]).then(()=>{clearTimeout(o),a(this)},l)}else{let c=new mb(i),u=new mb(i),d=new mb(i),p=-1,h=-1,f=-1,_=-1,x=-1,y=-1,D=document.createElement("div"),E=()=>{D.parentNode!==null&&D.parentNode.removeChild(D)},F=()=>{if((p!==-1&&h!==-1||p!==-1&&f!==-1||h!==-1&&f!==-1)&&(p===h||p===f||h===f)){if(Yt.hasWebKitFallbackBug()&&(p===_&&h===_&&f===_||p===x&&h===x&&f===x||p===y&&h===y&&f===y))return;E(),clearTimeout(o),a(this)}};D.dir="ltr",c.setFont(this.getStyle("sans-serif")),u.setFont(this.getStyle("serif")),d.setFont(this.getStyle("monospace")),D.appendChild(c.getElement()),D.appendChild(u.getElement()),D.appendChild(d.getElement()),document.body.appendChild(D),_=c.getWidth(),x=u.getWidth(),y=d.getWidth();let N=()=>{if(this.getTime()-s>=n)E(),l(new Error(`${n} ms timeout exceeded`));else{let B=document.hidden;(B===!0||B===void 0)&&(p=c.getWidth(),h=u.getWidth(),f=d.getWidth(),F()),o=setTimeout(N,50)}};N(),c.onResize(R=>{p=R,F()}),c.setFont(this.getStyle(`"${this.font.fontFamily}",sans-serif`)),u.onResize(R=>{h=R,F()}),u.setFont(this.getStyle(`"${this.font.fontFamily}",serif`)),d.onResize(R=>{f=R,F()}),d.setFont(this.getStyle(`"${this.font.fontFamily}",monospace`))}})}getStyle(e){return[this.font.fontStyle,this.font.fontWeight,Yt.supportsStretch()?this.font.fontStretch:"","100px",e].join(" ")}getTime(){return new Date().getTime()}},Tc=Yt;Tc.HAS_WEBKIT_FALLBACK_BUG=null,Tc.HAS_SAFARI_10_BUG=null,Tc.SUPPORTS_STRETCH=null,Tc.SUPPORTS_NATIVE_FONT_LOADING=null,Tc.DEFAULT_TIMEOUT=6e4});var jt,L,VO=m(()=>{jt=class{static fromSize(e){return new jt(e.width,e.height)}static distance(e,t){let i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)}static dot(e,t){return e.x*t.x+e.y*t.y}static lerp(e,t,i){let o=Math.min(Math.max(i,0),1);return new jt(e.x*o+t.x*(1-o),e.y*o+t.y*(1-o))}static lerpUnclamped(e,t,i){return new jt(e.x*i+t.x*(1-i),e.y*i+t.y*(1-i))}static proportionalFit(e,t){let i=e.x/e.y,o=t.x/t.y;return i>o?t.multiply(e.y/t.y):t.multiply(e.x/t.x)}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){let e=this.magnitude;return new jt(this.x/e,this.y/e)}get floored(){return new jt(Math.floor(this.x),Math.floor(this.y))}get rounded(){return new jt(Math.round(this.x),Math.round(this.y))}get min(){return Math.min(this.x,this.y)}get max(){return Math.max(this.x,this.y)}get abs(){return new jt(Math.abs(this.x),Math.abs(this.y))}get swapped(){return new jt(this.y,this.x)}constructor(e,t){typeof e=="number"?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}clone(){return new jt(this.x,this.y)}add(e,t){return typeof e=="number"?new jt(this.x+e,this.y+t):new jt(this.x+e.x,this.y+e.y)}subtract(e,t){return typeof e=="number"?new jt(this.x-e,this.y-t):new jt(this.x-e.x,this.y-e.y)}multiply(e,t){return typeof e=="number"?new jt(this.x*e,this.y*(t===void 0?e:t)):new jt(this.x*e.x,this.y*e.y)}divide(e,t){return typeof e=="number"?new jt(this.x/e,this.y/(t===void 0?e:t)):new jt(this.x/e.x,this.y/e.y)}equals(e){return this.x===e.x&&this.y===e.y}clamp(e,t){let i=Math.max(e.x,Math.min(t.x,this.x)),o=Math.max(e.y,Math.min(t.y,this.y));return new jt(i,o)}},L=jt;L.ZERO=new jt(0,0),L.ONE=new jt(1,1),L.UP=new jt(0,1),L.DOWN=new jt(0,-1),L.RIGHT=new jt(1,0),L.LEFT=new jt(-1,0)});var $O=m(()=>{V()});var Ya,hb,XX=m(()=>{VO();$O();HO();(function(t){t.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",t.IMAGE_DOWNSCALED="imageDownscaled"})(Ya||(Ya={}));hb=class extends Eo{constructor(e,t){super();this.image=e,this.options=t}needsResize(){let e=this.resizedDimensions();return e.x<this.image.width||e.y<this.image.height}resizedDimensions(){let{options:e}=this,t={width:this.image.width,height:this.image.height},i=L.fromSize(t),o=L.fromSize(t),{maxMegaPixels:n}=e;if(n){let l=(qO()?n.mobile:n.desktop)*1e6,c=t.width/t.height,u=t.height/t.width,d=new L(Math.floor(Math.sqrt(l*c)),Math.floor(Math.sqrt(l*u)));d.x<=t.width&&d.y<=t.height&&(i=d)}let s=e.maxDimensions;s&&(s.height<t.height||s.width<t.width)&&(o=new L(s.width,s.height));let a=new L(Math.min(i.x,o.x),Math.min(i.y,o.y));return L.proportionalFit(a,L.fromSize(t)).floored}downscaleIfNecessary(){let e=this.resizedDimensions();if(!(e.x<this.image.width||e.y<this.image.height))return this.image;this.emit(Ya.BEGAN_IMAGE_DOWNSCALING,this.image);let i=document.createElement("canvas");i.width=e.x,i.height=e.y;let o=i.getContext("2d"),{image:n}=this;return o.imageSmoothingQuality="high",o.drawImage(n,0,0,n.width,n.height,0,0,e.x,e.y),this.emit(Ya.IMAGE_DOWNSCALED,{width:e.x,height:e.y}),i}downscaleImageIfNecessary(){let e=this.image,t=this.resizedDimensions();if(!(t.x<this.image.width||t.y<this.image.height))return e;this.emit(Ya.BEGAN_IMAGE_DOWNSCALING,e);let o=new Image;return o.width=t.x,o.height=t.y,o.src=e.src,this.emit(Ya.IMAGE_DOWNSCALED,{width:t.x,height:t.y}),o}}});var IUe,DUe,YX,JX,ZX=m(()=>{IUe=r=>r.key==="Enter",DUe=r=>r.key==="Escape",YX=r=>e=>{IUe(e)&&r(e)},JX=r=>e=>{DUe(e)&&r(e)}});var oC,QX,X,eY,xht,tY=m(()=>{(function(Q){Q[Q.EditorContainer=0]="EditorContainer",Q[Q.ToolControlBar=1]="ToolControlBar",Q[Q.ToolControlBarExpandableControls=2]="ToolControlBarExpandableControls",Q[Q.CanvasContainer=3]="CanvasContainer",Q[Q.Canvas=4]="Canvas",Q[Q.MainBarButtonClose=5]="MainBarButtonClose",Q[Q.MainBarButtonExport=6]="MainBarButtonExport",Q[Q.MainBarButtonUndo=7]="MainBarButtonUndo",Q[Q.MainBarButtonRedo=8]="MainBarButtonRedo",Q[Q.MainBarButtonZoom=9]="MainBarButtonZoom",Q[Q.Tooltip=10]="Tooltip",Q[Q.Cursor=11]="Cursor",Q[Q.CursorContainer=12]="CursorContainer",Q[Q.NummericInput=13]="NummericInput",Q[Q.BrushSize=14]="BrushSize",Q[Q.BrushHardness=15]="BrushHardness",Q[Q.Dialog=16]="Dialog",Q[Q.DialogBody=17]="DialogBody",Q[Q.CardContainer=18]="CardContainer",Q[Q.CategoryItemsContainer=19]="CategoryItemsContainer",Q[Q.ToolbarItem=20]="ToolbarItem",Q[Q.ColorList=21]="ColorList",Q[Q.NoResult=22]="NoResult",Q[Q.CardLabel=23]="CardLabel",Q[Q.CardAvatar=24]="CardAvatar",Q[Q.Dropdown=25]="Dropdown",Q[Q.DropdownList=26]="DropdownList",Q[Q.TextAlignment=27]="TextAlignment",Q[Q.Sprite=28]="Sprite",Q[Q.SpriteTopLeft=29]="SpriteTopLeft",Q[Q.SpriteTopRight=30]="SpriteTopRight",Q[Q.SpriteBottomLeft=31]="SpriteBottomLeft",Q[Q.SpriteBottomRight=32]="SpriteBottomRight",Q[Q.Knob=33]="Knob",Q[Q.TextWidth=34]="TextWidth",Q[Q.ToolbarWrapper=35]="ToolbarWrapper",Q[Q.MainCanvasActionBar=36]="MainCanvasActionBar",Q[Q.SpriteActions=37]="SpriteActions",Q[Q.CarouselSlider=38]="CarouselSlider",Q[Q.CropMask=39]="CropMask",Q[Q.FlipRotateControls=40]="FlipRotateControls",Q[Q.RotateSlider=41]="RotateSlider",Q[Q.CropTopRight=42]="CropTopRight",Q[Q.CropTopLeft=43]="CropTopLeft",Q[Q.CropBottomRight=44]="CropBottomRight",Q[Q.CropBottomLeft=45]="CropBottomLeft",Q[Q.Watermark=46]="Watermark",Q[Q.Toolbar=47]="Toolbar",Q[Q.CanvasBar=48]="CanvasBar",Q[Q.Checkbox=49]="Checkbox",Q[Q.Focus=50]="Focus",Q[Q.SnappingLine=51]="SnappingLine",Q[Q.LibraryUploadButton=52]="LibraryUploadButton",Q[Q.LibraryWebcamButton=53]="LibraryWebcamButton",Q[Q.ZoomLevel=54]="ZoomLevel"})(oC||(oC={}));QX={};for(let r in oC){let e=oC[r];typeof e=="string"&&(QX[e]=e)}X=QX,xht=Boolean(typeof window!="undefined"&&((eY=window.Cypress)==null?void 0:eY.env("pesdk")))});function OUe(r,e){let t=0;for(let i=r.length-1;i>=0;i--){let o=r[i];o==="."?r.splice(i,1):o===".."?(r.splice(i,1),t++):t&&(r.splice(i,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}function RUe(r){return r.charAt(0)==="/"}function FUe(r){let e=RUe(r),t=r.substr(-1)==="/";return r=OUe(r.split("/").filter(Boolean),!e).join("/"),!r&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r}var fb,rY=m(()=>{fb=(...r)=>FUe(r.join("/"))});var oY=S((wht,iY)=>{var AUe=typeof Element!="undefined",PUe=typeof Map=="function",MUe=typeof Set=="function",BUe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function nC(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){if(r.constructor!==e.constructor)return!1;var t,i,o;if(Array.isArray(r)){if(t=r.length,t!=e.length)return!1;for(i=t;i--!=0;)if(!nC(r[i],e[i]))return!1;return!0}var n;if(PUe&&r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(n=r.entries();!(i=n.next()).done;)if(!e.has(i.value[0]))return!1;for(n=r.entries();!(i=n.next()).done;)if(!nC(i.value[1],e.get(i.value[0])))return!1;return!0}if(MUe&&r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(n=r.entries();!(i=n.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(BUe&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(e)){if(t=r.length,t!=e.length)return!1;for(i=t;i--!=0;)if(r[i]!==e[i])return!1;return!0}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();if(o=Object.keys(r),t=o.length,t!==Object.keys(e).length)return!1;for(i=t;i--!=0;)if(!Object.prototype.hasOwnProperty.call(e,o[i]))return!1;if(AUe&&r instanceof Element)return!1;for(i=t;i--!=0;)if(!((o[i]==="_owner"||o[i]==="__v"||o[i]==="__o")&&r.$$typeof)&&!nC(r[o[i]],e[o[i]]))return!1;return!0}return r!==r&&e!==e}iY.exports=function(e,t){try{return nC(e,t)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}}});var Pr,KO,Gn,nY=m(()=>{Pr=v(oY()),KO=(r,e,[t,i],o=0)=>{let n=r[e];if(n){if(n<t)return console.error(`${e} must be greater than or equal to ${t}`),t;if(n>i)return console.error(`${e} must be less than or equal to ${i}`),i}return n||o},Gn=(r,e,t=[1,1,1,1])=>{let i=r[e],o=!0;return i&&i.forEach(n=>{n<0&&(console.error(`${n} in ${e} must be greater than or equal to 0`),o=!1),n>1&&(console.error(`${n} in ${e} must be less than or equal to 1`),o=!1)}),o&&i||t}});var Qe,sC,sY=m(()=>{Qe=r=>r*.08,sC=r=>r*.03});var aY,lY,cY=m(()=>{aY=(r,e)=>{let t=r.indexOf(e);if(!(t===-1||!r.length))return t===r.length-1?r[0]:r[t+1]},lY=(r,e)=>{let t=r.indexOf(e);if(!(t===-1||!r.length))return t===0?r[r.length-1]:r[t-1]}});var gb,XO,uY=m(()=>{gb={},XO=({src:r,crossOrigin:e,key:t,resolve:i,reject:o})=>{gb[t]=r;let n=new Image;n.onload=()=>{gb[t]===r&&(i(n),delete gb[t])},n.onerror=s=>{gb[t]===r&&(o(s),delete gb[t])},n.crossOrigin=e,n.src=r}});var bb=m(()=>{NO();HO();WX();$X();WO();KX();GO();XX();$O();ZX();tY();jO();rY();nY();sY();cY();uY()});var pY=S((Vht,dY)=>{"use strict";dY.exports=(r,e=1,t)=>{if(t=T({indent:" ",includeEmptyLines:!1},t),typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof t.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof t.indent}\``);if(e===0)return r;let i=t.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(i,t.indent.repeat(e))}});var mY=S(()=>{});var bY=S((Xht,gY)=>{"use strict";var hY=mY(),fY=/\s+at.*(?:\(|\s)(.*)\)?/,LUe=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,zUe=typeof hY.homedir=="undefined"?"":hY.homedir();gY.exports=(r,e)=>(e=Object.assign({pretty:!1},e),r.replace(/\\/g,"/").split(`
`).filter(t=>{let i=t.match(fY);if(i===null||!i[1])return!0;let o=i[1];return o.includes(".app/Contents/Resources/electron.asar")||o.includes(".app/Contents/Resources/default_app.asar")?!1:!LUe.test(o)}).filter(t=>t.trim()!=="").map(t=>e.pretty?t.replace(fY,(i,o)=>i.replace(o,o.replace(zUe,"~"))):t).join(`
`))});var vY=S((Yht,_Y)=>{"use strict";var UUe=pY(),NUe=bY(),qUe=r=>r.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),yY=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(i=>i instanceof Error?i:i!==null&&typeof i=="object"?Object.assign(new Error(i.message),i):new Error(i));let t=e.map(i=>typeof i.stack=="string"?qUe(NUe(i.stack)):String(i)).join(`
`);t=`
`+UUe(t,4);super(t);this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(let e of this._errors)yield e}};_Y.exports=yY});var Ym=S((YO,xY)=>{"use strict";var HUe=vY();xY.exports=(o,n,...s)=>de(YO,[o,n,...s],function*(r,e,{concurrency:t=1/0,stopOnError:i=!0}={}){return new Promise((a,l)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(t)||t===1/0)&&t>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${t}\` (${typeof t})`);let c=[],u=[],d=r[Symbol.iterator](),p=!1,h=!1,f=0,_=0,x=()=>{if(p)return;let y=d.next(),D=_;if(_++,y.done){h=!0,f===0&&(!i&&u.length!==0?l(new HUe(u)):a(c));return}f++,(()=>de(YO,null,function*(){try{let E=yield y.value;c[D]=yield e(E,D),f--,x()}catch(E){i?(p=!0,l(E)):(u.push(E),f--,x())}}))()};for(let y=0;y<t&&(x(),!h);y++);})})});var CY,jUe,yb,JO=m(()=>{CY=v(Ym());V();bb();jUe={italic:"i"},yb=class{constructor(e){this.assetManager=e;this.injectedFonts={};this.loadedFonts={};this.isFontLoaded=e=>this.loadedFonts[e]!==void 0;this.getGoogleFamiliesString=e=>{let t=e.reduce((i,o)=>{let{fontFamily:n,fontStyle:s,fontWeight:a=400}=o;return i[n]=(i[n]||[]).concat(`${a}${jUe[s]||""}`),i},{});return Object.keys(t).map(i=>{let o=t[i].length?`:${t[i].join(",")}`:"";return i.replace(" ","+")+o}).join("|")}}static createFontFacesCSS(e,t){return e.map(i=>{let o=t(i.fontURI);return`@font-face {
        font-family: "${i.fontFamily}";
        src: url('${o}') format('${i.format||"woff"}');
        font-weight: ${i.fontWeight||"normal"};
        font-style: ${i.fontStyle||"normal"};
      }`})}getFontWithId(e){let t=this.assetManager.getFontAsset(e);if(!t)throw new Error("The requested font does not exist as an asset.");return t}injectAllFonts(){let e=this.assetManager.getFontAssets();this.injectFonts(e)}loadAllFonts(){return de(this,null,function*(){let e=this.assetManager.getFontAssets();return this.loadFonts(e)})}loadFontsWithIdentifiers(e){return de(this,null,function*(){let t=e.map(i=>this.getFontWithId(i));return this.loadFonts(t)})}loadFonts(e){return de(this,null,function*(){return this.injectFonts(e),(0,CY.default)(e,t=>this.loadFont(t,!1),{stopOnError:!1}).then(()=>{})})}loadFont(e,t=!0){return de(this,null,function*(){return new Promise((i,o)=>{this.isFontLoaded(e.identifier)&&i(),t&&this.injectFonts([e]),new Tc(e).load().then(()=>{this.loadedFonts[e.identifier]=e,i()}).catch(s=>{o(e.identifier)})})})}loadFontWithIdentifier(e,t=!0){return de(this,null,function*(){let i=this.assetManager.getFontAsset(e);if(!i)throw new Error(`The requested font asset with identifier ${e} does not exist!`);return this.loadFont(i,t)})}injectFonts(e,t=this.assetManager.getPathForCategory("font")){let i=e.filter(zO),o=e.filter(LO);i.length>0&&this.addGoogleFontLinks(i),o.length>0&&this.addWebFontCSS(o,t)}addGoogleFontLinks(e){let t=e.filter(s=>!this.injectedFonts[s.identifier]);if(t.length===0)return;let i=this.getGoogleFamiliesString(t),o=document.createElement("link");o.rel="stylesheet",o.href=`https://fonts.googleapis.com/css?family=${i}`,document.getElementsByTagName("head")[0].appendChild(o),e.forEach(s=>{this.injectedFonts[s.identifier]=s})}addWebFontCSS(e,t){let i=e.filter(a=>!this.injectedFonts[a.identifier]);if(i.length===0)return;let n=`
      /* Injected by PhotoEditorSDK */
      ${yb.createFontFacesCSS(i,t).join(`
`)}
    `,s=document.createElement("style");s.innerHTML=n,document.head.appendChild(s),e.forEach(a=>{this.injectedFonts[a.identifier]=a})}}});var _b,SY=m(()=>{V();DX();OX();RX();FX();MX();BX();LX();zX();NX();HX();jX();kO();EO();bb();JO();_b=class{constructor(e,t=!1,i){this.assetResolver=i;this.basePath="assets/";this.areCustomAssetsAllowed=!1;this.getAssets=e=>{switch(e){case"overlay":return this.overlayAssets;case"filter":return this.filterCategories;case"font":return this.fontAssets;case"focus":return this.focusAssets;case"adjustment":return this.adjustmentCategories;case"sticker":return this.stickerCategories;case"textdesign":return this.textDesignAssets;case"frame":return this.frameAssets;case"transform":return this.transformCategories}return[]};this.getPath=(e,t)=>{let{assetResolver:i={}}=this,o=t&&i.item?i.item(t,e):t;if((o==null?void 0:o.match(/data:image/g))||(o==null?void 0:o.match(/(ftp|http|https):\/\//))&&Ls(o))return o;if(!o&&Ls(e))return e;let n=o?fb(e,o):fb(e),s;if(this.basePath.match(/(ftp|http|https):\/\//)){let{length:a}=this.basePath;this.basePath[a-1]!=="/"&&(this.basePath=`${this.basePath}/`),s=this.basePath+n}else s=fb(this.basePath,n);return i.path?i.path(s,e,o):s};this.getPathForCategory=e=>(...t)=>this.getPath(e,...t);this.addCustomStickerAsset=(e,t,i)=>{e.forEach(o=>{let{thumbnailURI:n,name:s,stickerURI:a,identifier:l,tintMode:c,resizeMode:u}=o,d=this.stickerCategories.find(h=>h.identifier===t),p={identifier:l,name:s,thumbnailURI:n,stickerURI:a,tintMode:c,resizeMode:u};if(d)d.items.push(p),d.thumbnailURI=n;else{let h={identifier:t,name:i,thumbnailURI:n,items:[p]};this.stickerCategories=[h,...this.stickerCategories]}}),this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[])};this.getItemPath=(e,t,i)=>{let o=e.find(n=>n.identifier===t);return o&&(o[i]||o.path)||""};this.isNonExistingFont=e=>!Z0.find(t=>t.identifier===e.identifier)&&!Xa[e.identifier];this.replaceDeprecatedFont=e=>Xa[e.identifier]?Z0.find(t=>t.identifier===wc(e.identifier,!0)):e;var d,p;(e==null?void 0:e.basePath)&&(this.basePath=e.basePath),this.areCustomAssetsAllowed=t;let o=J0.reduce(this.allOptions,[]);e&&e.filter?this.filterCategories=this.configuredCategory(J0,e.filter,o):this.filterCategories=J0,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(h=>FO(h)),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(h=>Xm(h));let n=Y0.reduce(this.allOptions,[]);e&&e.adjustment?this.adjustmentCategories=this.configuredCategory(Y0,e.adjustment,n):this.adjustmentCategories=Y0,this.fontAssets=Z0.reduce(this.allOptions,[]);let s=AX.map(h=>this.getFontAsset(h));if(((p=(d=e==null?void 0:e.text)==null?void 0:d.fonts)==null?void 0:p.length)>0){s=e.text.fonts.map(f=>{if(this.isNonExistingFont(f))return f;let _=this.replaceDeprecatedFont(f);return this.getFontAsset(_.identifier)});let h=e.text.fonts.filter(this.isNonExistingFont);this.fontAssets=e.text.fonts?[...this.fontAssets,...h]:this.fontAssets}this.textToolFontAssets=s;let a=e&&e.focus&&e.focus.items&&e.focus.items.length?e.focus.items.map(h=>UO.find(f=>f.identifier===h.identifier)):UO;this.focusAssets=a,e&&e.overlay&&e.overlay.items?this.overlayAssets=this.configuredItem(e.overlay.items,eC,eC):this.overlayAssets=eC,e&&e.frame&&e.frame.items?this.frameAssets=this.configuredItem(e.frame.items,Q0,Q0):this.frameAssets=Q0;let l=tC.reduce(this.allOptions,[]);e&&e.sticker?this.stickerCategories=this.configuredCategory(tC,e.sticker,l):this.stickerCategories=tC,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);let c=UX;e&&e.theme==="light"&&(c=qX),this.textDesignAssets=e&&e.textdesign&&e.textdesign.items&&e.textdesign.items.length?e.textdesign.items.map(h=>c.find(f=>f.identifier===h.identifier)):c,this.textDesignToolFontAssets=PX.map(h=>this.getFontAsset(h));let u=rC.reduce(this.allOptions,[]);e&&e.transform?this.transformCategories=this.configuredCategory(rC,e.transform,u,w.TRANSFORM):this.transformCategories=rC,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new yb(this)}getFontManager(){return this.fontManager}getAssetSource(e,t){switch(e){case"filter":if(this.getLUTFilterAsset(t))return this.getPath(e,this.getItemPath(this.lutFilterAssets,t,"lutURI"));break;case"overlay":return this.getPath(e,this.getItemPath(this.overlayAssets,t,"overlayURI"));case"font":return this.getPath(e,this.getItemPath(this.fontAssets,t,"fontURI"));case"sticker":let o=this.stickerAssets.find(n=>n.identifier===t);if(o){if(o.stickerURI.substr(0,10)==="data:image")return o.stickerURI;if(t.includes("imgly_sticker")&&o.stickerURI.includes(".svg")&&nr()){let s=this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI")).split("/");return s.splice(s.length-1,0,"base"),s[s.length-1]=s[s.length-1].replace(".svg",".png"),s.join("/")}return this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(fb(e,"engine"),t);case"frame":return this.getPath(e,t)}throw new Error("Cannot resolve this type of asset yet")}getDuotoneFilterAsset(e){return this.duoToneFilterAssets.filter(t=>t.identifier===e)[0]}getLUTFilterAsset(e){return this.lutFilterAssets.filter(t=>t.identifier===e)[0]}getOverlayAsset(e){return this.overlayAssets.filter(t=>t.identifier===e)[0]}getStickerAsset(e){return this.stickerAssets.filter(t=>t.identifier===e)[0]}getFontAsset(e){return this.fontAssets.filter(t=>t.identifier===e)[0]}getTextDesignAssets(e){return this.textDesignAssets.filter(t=>t.identifier===e)[0]}getFrameAsset(e){return this.frameAssets.filter(t=>t.identifier===e)[0]}getFontAssets(){return this.fontAssets}getFontAssetsForText(){return this.textToolFontAssets}getFontAssetsForTextDesign(){return this.textDesignToolFontAssets}getFrameAssets(){return this.frameAssets}allOptions(e,t){return Object.prototype.hasOwnProperty.call(t,"items")?[...e,...t.items]:[...e,t]}configuredCategory(e,t,i,o){return t.categories&&t.categories.length?t.categories.reduce((n,s)=>{let a=e.find(l=>l.identifier===s.identifier);return a?n.push(U(T(T({},a),s),{items:this.configuredItem(s.items,i,a.items,o).filter(Boolean)})):(this.areCustomAssetsAllowed||o===w.TRANSFORM)&&n.push(U(T({},s),{items:this.configuredItem(s.items,i,s.items,o).filter(Boolean)})),n},[]):e}configuredItem(e,t,i,o){return e&&e.length?e.reduce((n,s)=>{let a=t.find(l=>l.identifier===s.identifier);return a?n.push(T(T({},a),s)):(this.areCustomAssetsAllowed||o===w.TRANSFORM)&&n.push(s),n},[]).filter(Boolean):i}}});var ZO,Sr,wY=m(()=>{ZO=class{static contains(e,t){return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY}constructor(e,t,i,o){if(typeof e=="number")if(typeof t=="number"&&i!==void 0&&o!==void 0)this.origin={x:e,y:t},this.size={width:i||0,height:o||0};else throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");else{if(this.origin=e,typeof t=="number")throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=t}}get minX(){return this.origin.x}get minY(){return this.origin.y}get midX(){return this.origin.x+.5*this.size.width}get midY(){return this.origin.y+.5*this.size.height}get maxX(){return this.origin.x+this.size.width}get maxY(){return this.origin.y+this.size.height}get width(){return this.size.width}get height(){return this.size.height}},Sr=ZO;Sr.ZERO=new ZO({x:0,y:0},{width:0,height:0})});var Ja,$e,TY=m(()=>{Ja=class{constructor(e,t,i,o,n,s){this.a=e;this.b=t;this.c=i;this.d=o;this.tx=n;this.ty=s}static fromScale(e,t){return new Ja(e,0,0,t,0,0)}static fromRotation(e){let t=Math.cos(e),i=Math.sin(e);return new Ja(t,-i,i,t,0,0)}static fromRotationDeg(e){let t=Math.PI*e/180;return this.fromRotation(t)}static fromTranslation(e,t){return new Ja(1,0,0,1,e,t)}static fromTRS(e,t,i,o,n){let s=Math.cos(i),a=Math.sin(i);return new Ja(o*s,-n*a,o*a,n*s,e,t)}static multiply(e,t){let i=e.a*t.a+e.b*t.c,o=e.a*t.b+e.b*t.d,n=e.c*t.a+e.d*t.c,s=e.c*t.b+e.d*t.d,a=e.a*t.tx+e.b*t.ty+e.tx,l=e.c*t.tx+e.d*t.ty+e.ty;return new Ja(i,o,n,s,a,l)}static transformPoint(e,t){return{x:e.a*t.x+e.b*t.y+e.tx,y:e.c*t.x+e.d*t.y+e.ty}}static getInverted(e){let t=e.a*e.d-e.b*e.c;if(t===0)return e;let i=1/t,o=i*e.d,n=-i*e.b,s=-i*e.c,a=i*e.a,l=i*(e.b*e.ty-e.d*e.tx),c=i*(e.c*e.tx-e.a*e.ty);return new Ja(o,n,s,a,l,c)}},$e=Ja;$e.IDENTITY=Ja.fromScale(1,1)});function dn(r){return typeof r=="number"}var QO,eR,tR=m(()=>{QO=r=>r<0,eR=r=>QO(r)?-r:r});var sd,aC,eo,lC,kY,vb,rR,iR,oR,EY,IY=m(()=>{tR();bb();sd=r=>r*(Math.PI/180),aC=r=>r*(180/Math.PI);(function(o){o[o.Top=0]="Top",o[o.Right=90]="Right",o[o.Bottom=180]="Bottom",o[o.Left=270]="Left"})(eo||(eo={}));lC={[0]:sd(0),[90]:sd(90),[180]:sd(180),[270]:sd(270)},kY=Object.values(lC),vb=r=>{let e=Math.round(aC(eR(r)));return QO(r)&&(e===270?e=90:e===90&&(e=270)),lC[e%360]},rR=r=>r===0?r:360-eR(r),iR=r=>aY(kY,vb(r)),oR=r=>lY(kY,vb(r)),EY=r=>{let e=vb(r);return e===lC[270]||e===lC[90]}});var DY=m(()=>{VO();wY();TY();tR();IY()});var Ot,OY=m(()=>{Ot=class{static get IDENTITY(){return new Ot({x:0,y:0})}constructor(e,t={x:1,y:1},i=0){this.position=e,this.scale=t,this.rotation=i}}});var Y=m(()=>{G$();kO();J$();EO();IO();SY();JO();DY();OY();bb()});var kc,RY,FY,WUe,nR,AY=m(()=>{kc=v(C("react"));CO();RY=v(D0()),FY=v(C("styled-components"));TO();Y();WUe=FY.default.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${r=>r.theme.background};
  color: ${r=>r.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${r=>r.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${r=>r.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${r=>r.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`,nR=class extends kc.default.Component{constructor(e){super(e);this.node=kc.default.createRef();this.saveEditorDimensions=e=>{this.setState({contextValue:{element:e,rect:e.getBoundingClientRect()}})};var t;if((t=kc.default)==null?void 0:t.version){let i=Number.parseInt(kc.default.version.split(".")[0],10),o=Number.parseInt(kc.default.version.split(".")[1],10);(i<16||i===16&&o<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,RY.default)(this.saveEditorDimensions,100),this.resizeObserver=new ub(([i])=>{this.saveEditorDimensions(i.target)}),this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var e;((e=this.node)==null?void 0:e.current)&&this.resizeObserver.observe(this.node.current)}componentWillUnmount(){var e;((e=this.node)==null?void 0:e.current)&&this.resizeObserver.unobserve(this.node.current)}render(){let{children:e}=this.props,{contextValue:t}=this.state;return kc.default.createElement(WUe,{ref:this.node,"data-test":X.EditorContainer},kc.default.createElement(O0.Provider,{value:t},e))}}});var cC,xb,GUe,uC,Cb=m(()=>{cC=v(C("styled-components")),xb=cC.css`
  position: absolute;
  top: 0;
  left: 0;
  height: ${r=>r.theme.measurements.colorItem.size}px;
  width: ${r=>r.theme.measurements.colorItem.size}px;
  border-radius: ${r=>r.theme.colorItem.borderRadius||`${r.theme.shape.radiusSmall}px`};
  pointer-events: none;
`,GUe=cC.default.div.attrs(r=>({style:{background:r.color}}))`
  ${xb}
  z-index: ${r=>r.theme.measurements.zIndex.colorItem.background};
`,uC=GUe});var ad,Sb,VUe,sR,$Ue,dC,aR=m(()=>{ad=v(C("react")),Sb=v(C("styled-components"));Cb();VUe=Sb.default.div`
  ${xb}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${r=>r.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${r=>r.theme.colorItem.borderRadius||`${r.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${r=>r.isActive&&Sb.css`
      border-color: ${r.theme.selectColor.activeBorderColor};
    `}
`,sR=Sb.default.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`,$Ue=({isActive:r,className:e,style:t})=>ad.default.createElement(VUe,{isActive:r,className:e,style:t},r&&ad.default.createElement(ad.default.Fragment,null,ad.default.createElement(sR,null),ad.default.createElement(sR,null),ad.default.createElement(sR,null))),dC=$Ue});var PY,Gr,MY=m(()=>{PY=v(C("styled-components")),Gr=PY.css`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${r=>r.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${r=>r.theme.focusOutlineColor};
  }
`});var BY,Jm,LY=m(()=>{BY=v(C("styled-components")),Jm=BY.css`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`});var pn=m(()=>{MY();LY()});var zY,KUe,pC,lR=m(()=>{zY=v(C("styled-components"));pn();KUe=zY.default.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${r=>r.theme.measurements.colorItem.size}px;
  width: ${r=>r.theme.measurements.colorItem.size}px;
  margin: ${r=>r.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${r=>r.theme.colorItem.borderRadius||`${r.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${Gr}

  &:disabled {
    opacity: ${r=>r.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`,pC=KUe});var UY,XUe,mC,cR=m(()=>{UY=v(C("styled-components"));Cb();XUe=UY.default.div.attrs(r=>{let e=r.url?{backgroundImage:`url(${r.url})`}:{};return T({style:e},r.style)})`
  ${xb}
  z-index: ${r=>r.theme.measurements.zIndex.colorItem.tiledBackground};
`,mC=XUe});var wb,YUe,NY,qY=m(()=>{wb=v(C("react"));j();aR();Cb();lR();cR();YUe=({isActive:r,onClick:e,color:t,label:i,isDisabled:o,tiledBackgroundUrl:n,className:s,style:a,children:l})=>wb.default.createElement(pC,{disabled:o,onClick:e,"aria-label":i,className:s,style:a},wb.default.createElement(mC,{url:n}),wb.default.createElement(uC,{color:t}),wb.default.createElement(dC,{isActive:r}),l),NY=fe("config")(O(YUe))});var HY,JUe,hC,uR=m(()=>{HY=v(C("styled-components")),JUe=HY.default.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${r=>r.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${r=>r.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`,hC=JUe});var jY,fC,ZUe,gC,dR=m(()=>{jY=v(C("react")),fC=v(C("styled-components")),ZUe=fC.default.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${r=>r.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${r=>r.isVisible&&fC.css`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`,gC=({isVisible:r,className:e,children:t})=>jY.default.createElement(ZUe,{isVisible:r,className:e},t)});var WY,QUe,bC,pR=m(()=>{WY=v(C("styled-components")),QUe=WY.default.div.attrs(({style:r})=>({role:"dialog","aria-hidden":!1,style:r}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${r=>r.top}px);
  left: calc(50% + ${r=>r.left}px);
  width: ${r=>r.width};
  height: ${r=>r.height};
  transform: translate(-50%, -50%);
  border-radius: ${r=>r.theme.shape.radiusLarge}px;
  background: ${r=>r.theme.modal.background};
  color: ${r=>r.theme.modal.bodyForeground};
  z-index: ${r=>r.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`,bC=QUe});var yC,e9e,GY,VY=m(()=>{yC=v(C("react"));Y();uR();dR();pR();e9e=({isVisible:r=!1,width:e="350px",height:t="fit-content",position:i,header:o,body:n,footer:s,className:a,style:l,children:c})=>yC.default.createElement(gC,{isVisible:r},yC.default.createElement(hC,null),yC.default.createElement(bC,{height:t,width:e,left:i.x,top:i.y,className:a,style:l,"data-test":X.Dialog},o,n,c,s)),GY=e9e});var $Y,t9e,Za,Tb=m(()=>{$Y=v(C("styled-components")),t9e=$Y.default.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  color: ${r=>r.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`,Za=t9e});var KY,r9e,Zm,_C=m(()=>{KY=v(C("styled-components")),r9e=KY.default.div`
  display: flex;
  border-top: 2px solid
    ${r=>r.type==="error"?r.theme.error:r.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`,Zm=r9e});var XY,i9e,Qm,vC=m(()=>{XY=v(C("styled-components")),i9e=XY.default.h3`
  font-size: ${r=>r.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.headline2.case};
  color: ${r=>r.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`,Qm=i9e});var eh,kb,o9e,n9e,xC,s9e,CC,mR=m(()=>{eh=v(C("react")),kb=v(C("styled-components")),o9e=kb.keyframes`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,n9e=kb.default.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`,xC=kb.default.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${r=>r.theme.primary};
  border-radius: 50%;
  animation: ${o9e} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${r=>r.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`,s9e=({className:r,style:e})=>eh.default.createElement(n9e,{className:r,style:e},eh.default.createElement(xC,null),eh.default.createElement(xC,null),eh.default.createElement(xC,null),eh.default.createElement(xC,null)),CC=s9e});function a9e(r){let e="",t=!0,i;for(i=0;i<r.length;i+=1)t?(e+=r[i].toUpperCase(),t=!1):r[i]==="-"?t=!0:e+=r[i];return e}function fR(r,e){return e?`${e}${a9e(r)}`:r}function l9e(r="transform"){if(typeof window=="undefined"||typeof window.document=="undefined")return"";let{style:e}=window.document.documentElement;if(r in e)return"";let t;for(t=0;t<hR.length;t+=1)if(fR(r,hR[t])in e)return hR[t];return""}var hR,YY,JY=m(()=>{hR=["Moz","Webkit","O","ms"];YY=l9e()});function SC(r,e){for(let t=0,{length:i}=r;t<i;t+=1)if(e.apply(e,[r[t],t,r]))return r[t];return null}function gR(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Function]"}function th(r){return typeof r=="number"&&!Number.isNaN(r)}function Vr(r){return parseInt(r,10)}var bR=m(()=>{});function c9e(r,e){return wC||(wC=SC(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],t=>gR(r[t]))),gR(r[wC])?r[wC](e):!1}function yR(r,e,t){let i=r;do{if(c9e(i,e))return!0;if(i===t)return!1;i=i.parentNode}while(i);return!1}function TC(r,e,t){!r||(r.attachEvent?r.attachEvent(`on${e}`,t):r.addEventListener?r.addEventListener(e,t,!0):r[`on${e}`]=t)}function Ec(r,e,t){!r||(r.detachEvent?r.detachEvent(`on${e}`,t):r.removeEventListener?r.removeEventListener(e,t,!0):r[`on${e}`]=null)}function ZY(r){let e=r.clientHeight,t=r.ownerDocument.defaultView.getComputedStyle(r);return e+=Vr(t.borderTopWidth),e+=Vr(t.borderBottomWidth),e}function QY(r){let e=r.clientWidth,t=r.ownerDocument.defaultView.getComputedStyle(r);return e+=Vr(t.borderLeftWidth),e+=Vr(t.borderRightWidth),e}function eJ(r){let e=r.clientHeight,t=r.ownerDocument.defaultView.getComputedStyle(r);return e-=Vr(t.paddingTop),e-=Vr(t.paddingBottom),e}function tJ(r){let e=r.clientWidth,t=r.ownerDocument.defaultView.getComputedStyle(r);return e-=Vr(t.paddingLeft),e-=Vr(t.paddingRight),e}function rJ(r,e){let i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=r.clientX+e.scrollLeft-i.left,n=r.clientY+e.scrollTop-i.top;return{x:o,y:n}}function iJ({x:r,y:e,rotation:t}){let i=`translate(${r}px,${e}px) rotate(${t}rad)`;return{[fR("transform",YY)]:i}}function oJ(r,e){let t=null;return r.targetTouches&&(t=SC(r.targetTouches,i=>e===i.identifier)),r.changedTouches&&!t&&(t=SC(r.changedTouches,i=>e===i.identifier)),t}function nJ(r){return r.targetTouches&&r.targetTouches[0]?r.targetTouches[0].identifier:r.changedTouches&&r.changedTouches[0]?r.changedTouches[0].identifier:null}var wC,kC=m(()=>{JY();bR();wC=""});function _R(r){let e=r.findDOMNode();return e||null}function u9e(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}}function sJ(r,e,t){if(!r.props.bounds)return[e,t];let{bounds:i}=r.props;i=typeof i=="string"?i:u9e(i);let o=_R(r);if(!o)return[e,t];if(typeof i=="string"){let{ownerDocument:n}=o,s=n.defaultView,a;i==="parent"?a=o.parentNode:a=n.querySelector(i);let l=s.getComputedStyle(o),c=s.getComputedStyle(a);i={left:-o.offsetLeft+Vr(c.paddingLeft)+Vr(l.marginLeft),top:-o.offsetTop+Vr(c.paddingTop)+Vr(l.marginTop),right:tJ(a)-QY(o)-o.offsetLeft+Vr(c.paddingRight)-Vr(l.marginRight),bottom:eJ(a)-ZY(o)-o.offsetTop+Vr(c.paddingBottom)-Vr(l.marginBottom)}}return th(i.right)&&(e=Math.min(e,i.right)),th(i.bottom)&&(t=Math.min(t,i.bottom)),th(i.left)&&(e=Math.max(e,i.left)),th(i.top)&&(t=Math.max(t,i.top)),[e,t]}function EC(r,e,t){let{state:i}=r,o=!th(i.lastX),n=_R(r);return o?{node:n,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:n,deltaX:e-i.lastX,deltaY:t-i.lastY,lastX:i.lastX,lastY:i.lastY,x:e,y:t}}function IC(r,e){return{node:e.node,x:r.state.x+e.deltaX,y:r.state.y+e.deltaY,deltaX:e.deltaX,deltaY:e.deltaY,lastX:r.state.x,lastY:r.state.y}}function aJ(r){return r.props.axis==="both"||r.props.axis==="x"}function lJ(r){return r.props.axis==="both"||r.props.axis==="y"}function DC(r,e){let t=_R(e);if(!t)return{x:0,y:0};let{offsetParent:i}=e.props;return!i&&t instanceof HTMLElement&&(i=t.offsetParent||t.ownerDocument.body),rJ(r,i)}var vR=m(()=>{kC();bR()});var OC,qs,Io,xR,ld,CR=m(()=>{OC=v(C("react"));kC();vR();qs={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Io=qs.mouse,xR={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}},ld=class extends OC.default.Component{constructor(){super(...arguments);this.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.findDOMNode=()=>{let{nodeRef:e}=this.props;return(e==null?void 0:e.current)||null};this.getTouchFromEvent=e=>{let t=nJ(e);return this.setState({touchIdentifier:t}),oJ(e,t)};this.preventDefault=e=>{e.stopPropagation&&e.stopPropagation()};this.handleDragStart=e=>{let t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:i}=t;if(this.props.disabled||!(e.target instanceof Node)||this.props.handle&&!yR(e.target,this.props.handle,t)||this.props.cancel&&yR(e.target,this.props.cancel,t))return!1;let o=DC(e,this);if(o==null)return!1;let{x:n,y:s}=o,a=EC(this,n,s);if(this.props.onStart(e,a)===!1)return!1;this.setState({dragging:!0,lastX:n,lastY:s}),Io.move==="touchmove"?TC(i,Io.move,this.onTouchDrag):TC(i,Io.move,this.onMouseDrag),TC(i,Io.stop,this.handleDragStop)};this.handleDrag=e=>{let t=DC(e,this);if(t==null)return;let{x:i,y:o}=t,n=EC(this,i,o);if(this.props.onDrag(e,n)===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(a){let l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.setState({lastX:i,lastY:o})};this.handleDragStop=e=>{if(!this.state.dragging)return;let t=DC(e,this);if(t==null)return;let{x:i,y:o}=t,n=EC(this,i,o),s=this.findDOMNode();this.setState({dragging:!1,lastX:NaN,lastY:NaN}),this.props.onStop(e,n),s&&(Io.move==="touchmove"?Ec(s.ownerDocument,Io.move,this.onTouchDrag):Ec(s.ownerDocument,Io.move,this.onMouseDrag),Ec(s.ownerDocument,Io.stop,this.handleDragStop))};this.onMouseDown=e=>(this.preventDefault(e),Io=qs.mouse,this.props.onMouseDown(e),e.button&&typeof e.button=="number"&&e.button!==0?!1:this.handleDragStart(e));this.onMouseDrag=e=>(this.preventDefault(e),this.handleDrag(e));this.onMouseUp=e=>(this.preventDefault(e),Io=qs.mouse,this.handleDragStop(e));this.onTouchStart=e=>{this.preventDefault(e),Io=qs.touch;let t=this.getTouchFromEvent(e);return this.handleDragStart(t)};this.onTouchDrag=e=>{this.preventDefault(e),Io=qs.touch;let t=this.getTouchFromEvent(e);return this.handleDrag(t)};this.onTouchEnd=e=>{this.preventDefault(e),Io=qs.touch;let t=this.getTouchFromEvent(e);return this.handleDragStop(t)}}componentWillUnmount(){let e=this.findDOMNode();if(e){let{ownerDocument:t}=e;Ec(t,qs.mouse.move,this.onMouseDrag),Ec(t,qs.touch.move,this.onTouchDrag),Ec(t,qs.mouse.stop,this.handleDragStop),Ec(t,qs.touch.stop,this.handleDragStop)}}render(){return OC.default.cloneElement(OC.default.Children.only(this.props.children),{style:T({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};ld.defaultProps=xR,ld.displayName="DraggableCore"});var Eb,d9e,RC,cJ,uJ=m(()=>{Eb=v(C("react"));CR();kC();vR();d9e=U(T({},xR),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),RC=class extends Eb.default.Component{constructor(e){super(e);this.onDragStart=(e,t)=>{if(this.props.onStart(e,IC(this,t))===!1)return!1;this.setState({dragging:!0,dragged:!0})};this.onDrag=(e,t)=>{let{position:i,defaultPosition:o,onDrag:n,bounds:s}=this.props;if(!this.state.dragging)return!1;let a=IC(this,t),l=Boolean(i),c={x:l?a.x:o.x,y:l?a.y:o.y,slackX:0,slackY:0};if(s){let{x:d,y:p}=c;c.x+=this.state.slackX,c.y+=this.state.slackY;let[h,f]=sJ(this,c.x,c.y);c.x=h,c.y=f,c.slackX=this.state.slackX+(d-c.x),c.slackY=this.state.slackY+(p-c.y),a.x=c.x,a.y=c.y,a.deltaX=c.x-this.state.x,a.deltaY=c.y-this.state.y}if(n(e,a)===!1)return!1;this.setState(c)};this.onDragStop=(e,t)=>{if(!this.state.dragging||this.props.onStop(e,IC(this,t))===!1)return!1;let o={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(this.props.position)){let{x:s,y:a}=this.props.position;o.x=s,o.y=a}this.setState(o)};this.findDOMNode=()=>{let{nodeRef:e}=this.props;return(e==null?void 0:e.current)||null};this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(e){Boolean(this.props.position)&&(this.props.updateOnPosition?(e.position&&e.position.x!==this.props.position.x||e.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(e.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}componentWillUnmount(){this.setState({dragging:!1})}render(){let F=this.props,{position:e,defaultPosition:t,rotation:i,defaultClassName:o,defaultClassNameDragging:n,defaultClassNameDragged:s}=F,a=Hi(F,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),{x:l,y:c,dragging:u,dragged:d}=this.state,p={},f=!Boolean(e)||u,_=e||t,x={x:aJ(this)&&f?l:_.x,y:lJ(this)&&f?c:_.y,rotation:i};p=iJ(x);let y=Eb.default.Children.only(this.props.children),D=[y.props.className||"",o,u?n:"",d?s:""].join(" ").trim(),E=Eb.default.cloneElement(y,{className:D,style:T(T({},y.props.style),p)});return Eb.default.createElement(ld,U(T({},a),{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),E)}};RC.defaultProps=d9e,RC.displayName="Draggable";cJ=RC});var fJ=S((tbt,hJ)=>{var dJ="Expected a function",pJ=0/0,p9e="[object Symbol]",m9e=/^\s+|\s+$/g,h9e=/^[-+]0x[0-9a-f]+$/i,f9e=/^0b[01]+$/i,g9e=/^0o[0-7]+$/i,b9e=parseInt,y9e=typeof global=="object"&&global&&global.Object===Object&&global,_9e=typeof self=="object"&&self&&self.Object===Object&&self,v9e=y9e||_9e||Function("return this")(),x9e=Object.prototype,C9e=x9e.toString,S9e=Math.max,w9e=Math.min,SR=function(){return v9e.Date.now()};function T9e(r,e,t){var i,o,n,s,a,l,c=0,u=!1,d=!1,p=!0;if(typeof r!="function")throw new TypeError(dJ);e=mJ(e)||0,FC(t)&&(u=!!t.leading,d="maxWait"in t,n=d?S9e(mJ(t.maxWait)||0,e):n,p="trailing"in t?!!t.trailing:p);function h(R){var B=i,se=o;return i=o=void 0,c=R,s=r.apply(se,B),s}function f(R){return c=R,a=setTimeout(y,e),u?h(R):s}function _(R){var B=R-l,se=R-c,A=e-B;return d?w9e(A,n-se):A}function x(R){var B=R-l,se=R-c;return l===void 0||B>=e||B<0||d&&se>=n}function y(){var R=SR();if(x(R))return D(R);a=setTimeout(y,_(R))}function D(R){return a=void 0,p&&i?h(R):(i=o=void 0,s)}function E(){a!==void 0&&clearTimeout(a),c=0,i=l=o=a=void 0}function F(){return a===void 0?s:D(SR())}function N(){var R=SR(),B=x(R);if(i=arguments,o=this,l=R,B){if(a===void 0)return f(l);if(d)return a=setTimeout(y,e),h(l)}return a===void 0&&(a=setTimeout(y,e)),s}return N.cancel=E,N.flush=F,N}function k9e(r,e,t){var i=!0,o=!0;if(typeof r!="function")throw new TypeError(dJ);return FC(t)&&(i="leading"in t?!!t.leading:i,o="trailing"in t?!!t.trailing:o),T9e(r,e,{leading:i,maxWait:e,trailing:o})}function FC(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function E9e(r){return!!r&&typeof r=="object"}function I9e(r){return typeof r=="symbol"||E9e(r)&&C9e.call(r)==p9e}function mJ(r){if(typeof r=="number")return r;if(I9e(r))return pJ;if(FC(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=FC(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(m9e,"");var t=f9e.test(r);return t||g9e.test(r)?b9e(r.slice(2),t?2:8):h9e.test(r)?pJ:+r}hJ.exports=k9e});var rh,AC,wR,Ti,ih,PC,MC,cd=m(()=>{rh=v(C("styled-components"));lO();AC=rh.default.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,wR=(0,rh.default)(AC)``,Ti=(0,rh.default)(AC)``,ih=(0,rh.default)(AC)``,PC={display:"none",left:0,top:0},MC=(0,rh.default)(AC)`
  display: ${({display:r})=>r};
  left: ${({left:r})=>r}px;
  top: ${({top:r})=>r}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${_0} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`});var oh,BC,Vn,D9e,ti,Ic=m(()=>{oh=v(C("react")),BC=v(C("styled-components"));pn();cd();Vn=BC.css`
  color: ${r=>r.theme.button.activeForeground};
  border-color: ${r=>r.theme.button.activeForeground};

  svg {
    color: ${r=>r.theme.button.activeForeground};
  }
`,D9e=BC.default.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  font-size: ${r=>r.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button1.case};
  font-family: ${r=>r.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${Gr}

  /* Active */

  &:active {
    ${Vn}
  }

  ${({isActive:r})=>r&&Vn}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${Ti} {
      background-color: ${r=>r.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${ih} {
      background-color: ${r=>r.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${r=>r.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${r=>r.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`,ti=class extends oh.default.Component{constructor(){super(...arguments);this.state=PC;this.timeout=null;this.onClick=e=>{let t=e.currentTarget.getBoundingClientRect(),i=e.pageX-t.left,o=e.pageY-t.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(i,o)}):this.setRippleState(i,o),this.props.onClick(e)};this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){let d=this.props,{isActive:e,isDisabled:t,label:i,ariaLabel:o,children:n,className:s}=d,a=Hi(d,["isActive","isDisabled","label","ariaLabel","children","className"]),{left:l,top:c,display:u}=this.state;return oh.default.createElement(D9e,U(T({"data-test":o,className:s,isActive:e,disabled:t,"aria-label":o},a),{onClick:this.onClick}),i,n,oh.default.createElement(MC,{display:u,left:l,top:c}),oh.default.createElement(Ti,null),oh.default.createElement(ih,null))}};ti.defaultProps={type:"button",isDisabled:!1,isActive:!1}});var gJ,Ib,O9e,R9e,ri,Qa=m(()=>{gJ=v(C("react")),Ib=v(C("styled-components"));pn();O9e=Ib.default.label`
  ${Jm}
`,R9e=Ib.default.label`
  display: block;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:r})=>r&&Ib.css`
      opacity: ${e=>e.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`,ri=({label:r,htmlFor:e,show:t,style:i,isDisabled:o,className:n})=>{let s=t?R9e:O9e,a=e||(r?r.replace(" ","-"):void 0);return gJ.default.createElement(s,{style:i,isDisabled:o,htmlFor:a,className:n},r)};ri.defaultProps={show:!0}});var mn,bJ,hn,F9e,A9e,yJ,P9e,M9e,B9e,L9e,_J,TR,vJ,xJ=m(()=>{mn=v(C("react")),bJ=v(fJ()),hn=v(C("styled-components"));Y();Ic();Qa();F9e=hn.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,A9e=(0,hn.default)(ri)`
  align-self: flex-start;
`,yJ=(0,hn.default)(ti)`
  color: ${r=>r.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`,P9e=hn.default.div`
  display: flex;
  justify-content: space-between;
  width: ${r=>r.theme.measurements.advancedUIToolControlBar.width-48}px;
`,M9e=hn.default.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${r=>.6*r.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};
`,B9e=hn.default.div`
  width: ${r=>.6*r.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`,L9e=hn.default.span`
  width: ${r=>Math.round(r.length*.6*r.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${r=>r.activeIndex*.6*r.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;
`,_J=hn.default.div`
  border: solid ${r=>r.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:r})=>r==="left"?hn.css`
          margin-left: 2px;
          transform: rotate(135deg);
        `:hn.css`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`,TR=class extends mn.default.PureComponent{constructor(e){super(e);this.updateIndex=(e,t=!1)=>{let i=e+(t?-1:1),o=this.props.list.length-1;i>o&&(i=0),i<0&&(i=o),this.props.onSelect(this.props.list[i].identifier)};this.getActiveIndex=e=>{let{list:t}=this.props,i=t.findIndex(o=>o.identifier===e);return i!==-1?i:0};this.throttledUpdateIndex=(0,bJ.default)(this.updateIndex,600)}render(){let{list:e,label:t,showLabel:i=!0}=this.props,o=this.getActiveIndex(this.props.defaultIdentifier),n=e.length<=1;return mn.default.createElement(F9e,{"data-test":X.CarouselSlider},mn.default.createElement(A9e,{show:i,label:t}),mn.default.createElement(P9e,{id:`photoeditorsdk-${t.replace(" ","-")}`},mn.default.createElement(yJ,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o,!0)},mn.default.createElement(_J,{direction:"left"})),mn.default.createElement(B9e,null,mn.default.createElement(L9e,{activeIndex:o,length:e.length},e.map(s=>mn.default.createElement(M9e,{key:s.identifier},s.value)))),mn.default.createElement(yJ,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o)},mn.default.createElement(_J,{direction:"right"}))))}};TR.defaultProps={showLabel:!0};vJ=TR});var CJ,z9e,LC,kR=m(()=>{CJ=v(C("styled-components")),z9e=CJ.default.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${r=>r.theme.measurements.basicToolControlBar.maxWidth}px;
`,LC=z9e});var Db,U9e,Ob,ER=m(()=>{Db=v(C("styled-components"));pn();U9e=Db.default.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${r=>r.theme.checkbox.background};
  border-radius: ${r=>r.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${Gr}

  &:hover {
    opacity: ${r=>r.theme.checkbox.hoverOpacity};
  }
  ${r=>r.isChecked&&Db.css`
      background-color: ${r.theme.checkbox.activeBackground};
      &::after {
        color: ${r.theme.checkbox.activeForeground};
        border-color: ${r.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${r.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${r=>r.isDisabled&&Db.css`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`,Ob=U9e});var SJ,N9e,zC,IR=m(()=>{SJ=v(C("styled-components"));pn();N9e=SJ.default.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${Gr}
`,zC=N9e});var nh,wJ,TJ,kJ=m(()=>{nh=v(C("react"));Y();Qa();kR();ER();IR();wJ=({label:r,value:e,checkMarkPosition:t,onClick:i,isDisabled:o,className:n,style:s})=>{let a=`photoeditorsdk-${r.replace(" ","-")}`;return nh.default.createElement(LC,{"data-test":X.Checkbox,className:n,style:s},t==="left"&&nh.default.createElement(Ob,{onClick:i,isDisabled:o,isChecked:e}),nh.default.createElement(ri,{isDisabled:o,label:r,htmlFor:a}),nh.default.createElement(zC,{id:a,disabled:o,checked:e,onChange:i}),t==="right"&&nh.default.createElement(Ob,{onClick:i,isDisabled:o,isChecked:e}))},TJ=wJ;wJ.defaultProps={value:!1,checkMarkPosition:"left"}});var EJ,ud,Rb=m(()=>{EJ=v(C("styled-components")),ud=EJ.css`
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${r=>r.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${r=>r.theme.textInput.borderColor};
  background: ${r=>r.theme.textInput.background};
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${r=>r.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${r=>r.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${r=>r.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${r=>r.theme.textInput.hoverBorderColor};
  }
`});var UC,IJ,DJ,OJ=m(()=>{UC=v(C("styled-components")),IJ=UC.css`
  opacity: ${r=>r.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`,DJ=UC.default.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${IJ}
  }

  ${({isDisabled:r})=>r&&IJ}
`});var NC,RJ,FJ=m(()=>{NC=v(C("styled-components"));pn();RJ=NC.default.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${r=>r.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${r=>r.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${r=>r.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:r})=>r&&NC.css`
      border-left: 2px solid ${e=>e.theme.primary};
    `}

  ${Gr}
`});var DR,Hs,q9e,H9e,$n,AJ=m(()=>{DR=v(C("react")),Hs=v(C("styled-components"));Y();q9e=Hs.default.div`
  display: flex;
  ${r=>nr()||un()?Hs.css`
        overflow: hidden;
      `:r.direction==="vertical"?Hs.css`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `:Hs.css`
      overflow-y: hidden;
      overflow-x: auto;
    `};
`,H9e=Hs.default.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${r=>r.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${r=>nr()||un()?Hs.css`
        ${()=>r.direction==="vertical"?Hs.css`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `:Hs.css`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}

        scrollbar-face-color: ${r.theme.scrollbar.handleColor};
        scrollbar-track-color: ${r.theme.toolbar.background};
        scrollbar-base-color: ${r.theme.toolbar.background};
        scrollbar-3dlight-color: ${r.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${r.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${r.theme.toolbar.background};
        scrollbar-shadow-color: ${r.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${r.theme.scrollbar.handleColor};
      `:""}
`,$n=({direction:r="horizontal","data-test":e,className:t,children:i})=>DR.default.createElement(q9e,{direction:r,className:t},DR.default.createElement(H9e,{direction:r,"data-test":e},i))});var OR=m(()=>{AJ()});var Fb,RR,PJ=m(()=>{Fb=v(C("styled-components"));Y();OR();RR=(0,Fb.default)($n)`
  position: absolute;

  background: ${r=>r.theme.dropdown.listBackground};
  color: ${r=>r.theme.dropdown.listForeground};
  border: 1px solid ${r=>r.theme.dropdown.listBorderColor};
  box-shadow: ${r=>r.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${r=>r.isOpen?Fb.css`
        visibility: visible;
        opacity: 1;
        display: flex;
      `:""}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>nr()?Fb.css`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `:""}

  border-radius: 0 0 ${r=>r.theme.shape.radiusMedium}px
    ${r=>r.theme.shape.radiusMedium}px;
  z-index: ${r=>r.theme.measurements.zIndex.input.list};
`;RR.defaultProps={direction:"vertical"}});var MJ,BJ,LJ=m(()=>{MJ=v(C("styled-components"));pn();BJ=MJ.default.div`
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  color: ${r=>r.theme.dropdown.foreground};
  background-color: ${r=>r.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${r=>r.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${r=>r.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${r=>r.theme.dropdown.hoverBorderColor};
  }

  ${Gr}
`});var js,FR,j9e,W9e,AR,zJ=m(()=>{js=v(C("react")),FR=v(C("styled-components"));Y();OJ();FJ();PJ();LJ();Qa();j9e=FR.default.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${r=>r.theme.dropdown.caretColor};
  transform: rotate(${r=>r.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`,W9e=FR.default.div``,AR=class extends js.default.PureComponent{constructor(e){super(e);this.state={isOpen:!1};this.handleOutsideClick=e=>{this.node&&this.node.contains(e.target)||this.setState({isOpen:!1})};this.onSelect=e=>{let{onSelect:t}=this.props;t(e),this.setState({isOpen:!1})};this.onClick=()=>{this.setState(e=>({isOpen:!e.isOpen}))};this.listItem=e=>{let{itemStyle:t,selectedItem:i}=this.props,{isOpen:o}=this.state,{value:n,label:s}=e,a={};return typeof t=="function"?a=t(e):t!==null&&typeof t=="object"&&(a=t),js.default.createElement(RJ,{"aria-hidden":!o,tabIndex:0,style:a,onClick:()=>this.onSelect(n),key:n,isActive:i===n},s)};this.onKeyDown=e=>{(e.code==="Space"||e.code==="Enter")&&this.onClick()};this.nodeRef=t=>{this.node=t}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}render(){let{selectedItem:e,list:t,label:i,style:o,isDisabled:n}=this.props,{isOpen:s}=this.state,a=t.length>1,l=n?{}:{tabIndex:0};return js.default.createElement(W9e,null,js.default.createElement(ri,{isDisabled:n,style:{paddingLeft:"0px"},label:i}),js.default.createElement("div",{ref:this.nodeRef},js.default.createElement(DJ,{isOpen:s,isDisabled:n},js.default.createElement(BJ,U(T({"data-test":X.Dropdown,"aria-hidden":n},l),{showList:a,style:o,onClick:a?this.onClick:void 0,onKeyDown:this.onKeyDown}),e,a&&js.default.createElement(j9e,{rotation:s?180:0})),js.default.createElement(RR,{"data-test":X.DropdownList,isOpen:s},a&&t.map(this.listItem)))))}}});var UJ,NJ,qJ=m(()=>{UJ=v(C("styled-components")),NJ=UJ.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`});var HJ,G9e,jJ,WJ=m(()=>{HJ=v(C("react")),G9e=({children:r})=>HJ.default.createElement("form",{onSubmit:t=>{t.preventDefault()}},r),jJ=G9e});var qC,PR,V9e,$9e,MR,HC,BR=m(()=>{qC=v(C("react")),PR=v(C("styled-components"));Rb();V9e=PR.default.input`
  ${ud}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${r=>r.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`,$9e=PR.default.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`,MR=class extends qC.default.Component{constructor(){super(...arguments);this.onChange=e=>{let{onChange:t}=this.props;t&&t(e.target.value)}}render(){let{id:e,testId:t,value:i,type:o,min:n,max:s,onBlur:a,onFocus:l,onKeyUp:c,onKeyDown:u,onMouseUp:d,onTouchEnd:p,isDisabled:h,className:f,children:_}=this.props;return qC.default.createElement($9e,{className:f},qC.default.createElement(V9e,{id:e,"data-test":t,"aria-hidden":h,disabled:h,value:i,type:o,min:n,max:s,onChange:this.onChange,onBlur:a,onFocus:l,onKeyUp:c,onKeyDown:u,onMouseUp:d,onTouchEnd:p}),_)}};MR.defaultProps={type:"text"};HC=MR});var sh,Ab,K9e,Pb,LR,jC,zR=m(()=>{sh=v(C("react")),Ab=v(C("styled-components"));Y();Qa();BR();K9e=Ab.default.div`
  ${nr()?Ab.css``:Ab.css`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`,Pb=class extends sh.default.Component{constructor(e){super(e);this.node=null;this.handleOutsideClick=e=>{this.node&&this.node.current&&this.node.current.contains(e.target)||this.onSubmit()};this.onSubmit=()=>{let{onSubmit:e}=this.props,{value:t,isActive:i}=this.state;if(e){let o=parseFloat(Pb.cleanValue(t));!Number.isNaN(o)&&i&&e(`${o}`)}this.setState({isActive:!1})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:!0})};this.onKeyDown=e=>{let{value:t}=this.state;if(e.key==="Enter")this.onSubmit();else if(e.key==="ArrowUp"){let i=parseFloat(Pb.cleanValue(t));typeof i=="number"&&this.setState({value:(i+1).toString(),isActive:!0})}else if(e.key==="ArrowDown"){let i=parseFloat(Pb.cleanValue(t));typeof i=="number"&&this.setState({value:(i-1).toString(),isActive:!0})}};this.onChange=e=>{this.setState({value:e.replace(/[^\d.,-]/g,""),isActive:!0})};this.state={value:this.props.value||"",isActive:!1},this.node=sh.default.createRef()}static getDerivedStateFromProps({value:e},{value:t,isActive:i}){return e!==t&&!i?{value:e}:null}static cleanValue(e){return e?e.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)}render(){let{id:e,label:t,isDisabled:i,ariaHidden:o,onMouseUp:n,onTouchEnd:s,className:a}=this.props,{value:l}=this.state;return sh.default.createElement(K9e,{ref:this.node,"data-test":X.NummericInput,className:a},sh.default.createElement(ri,{htmlFor:e,label:t,show:!!t,isDisabled:i}),sh.default.createElement(HC,{id:e,value:l,isDisabled:i,"aria-hidden":o,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:n,onTouchEnd:s}))}},LR=Pb;LR.defaultProps={showLabel:!0};jC=LR});var ah,GJ,X9e,VJ,$J=m(()=>{ah=v(C("react")),GJ=v(C("styled-components"));Rb();Qa();X9e=GJ.default.input.attrs({type:"search"})`
  ${ud}
`,VJ=(0,ah.forwardRef)(({onChange:r,onKeyDown:e,placeholder:t,className:i,style:o},n)=>ah.default.createElement("div",{className:i,style:o},ah.default.createElement(ri,{show:!1,label:"photoeditorsdk-Search"}),ah.default.createElement(X9e,{ref:n,id:"photoeditorsdk-Search",onChange:a=>{r&&r(a.target.value)},onKeyDown:e,placeholder:t,autoComplete:"off"})))});var WC,Mb,Y9e,KJ,J9e,XJ,YJ=m(()=>{WC=v(C("react")),Mb=v(C("styled-components"));Qa();Y9e=Mb.default.div``,KJ=({label:r,children:e,inline:t,showLabel:i,isDisabled:o,"data-test":n})=>WC.default.createElement(Y9e,{"data-test":n},WC.default.createElement(ri,{isDisabled:o,label:r,show:i}),WC.default.createElement(J9e,{id:`photoeditorsdk-${r.replace(" ","-")}`,inline:!!t},e)),J9e=Mb.default.div`
  display: inline-flex;
  ${r=>!r.inline&&Mb.css`
        flex-wrap: wrap;
      `||""}
`;KJ.defaultProps={showLabel:!0};XJ=KJ});var dd,fn,Z9e,Q9e,UR,eNe,tNe,rNe,iNe,NR,JJ,ZJ=m(()=>{dd=v(C("react")),fn=v(C("styled-components"));Y();pn();Qa();zR();Z9e=fn.default.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`,Q9e=(0,fn.default)(ri)`
  padding-bottom: 2px;
`,UR=fn.css`
  ${un()||nr()?fn.css`
        width: 16px;
        height: 16px;
      `:fn.css`
        width: 20px;
        height: 20px;
      `}
  background: ${r=>r.theme.slider.thumbBackground};
  border: 2px solid ${r=>r.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`,eNe=r=>{let e=(r.value-r.min)*100/(r.max-r.min);return r.adjust?r.value>0?(e=r.value*(r.max/2)*100,`${r.theme.slider.trackColor} 0%,
      ${r.theme.slider.trackColor} 50%,
      ${r.theme.slider.activeTrackColor} 50%,
      ${r.theme.slider.activeTrackColor} ${50+e}%,
      ${r.theme.slider.trackColor} ${50+e}%,
      ${r.theme.slider.trackColor} 100%
      `):r.value<0?(e=r.value*(r.min/2)*100,`${r.theme.slider.trackColor} 0%,
      ${r.theme.slider.trackColor} ${50-e}%,
      ${r.theme.slider.activeTrackColor} ${50-e}%,
      ${r.theme.slider.activeTrackColor} 50%,
      ${r.theme.slider.trackColor} 50%,
      ${r.theme.slider.trackColor} 100%
      `):`${r.theme.slider.trackColor} 0%,
    ${r.theme.slider.trackColor} 100%`:`${r.theme.slider.activeTrackColor} 0%,
    ${r.theme.slider.activeTrackColor} ${e}%,
    ${r.theme.slider.trackColor} ${e}%,
    ${r.theme.slider.trackColor} 100%`},tNe=fn.default.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  height: 100;
  border: none;

  ${Gr}

  ${un()||nr()?fn.css`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:fn.css`
        height: 2px;
        background: ${r=>`linear-gradient(to right, ${eNe(r)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${r=>r.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${r=>r.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${UR}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${UR}
  }
  &::-ms-thumb {
    appearance: none;
    ${UR}
  }
  &::-ms-fill-lower {
    background: ${r=>`${r.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${r=>`${r.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`,rNe=fn.default.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${r=>r.centerSlider?-56:0}px;
`,iNe=(0,fn.default)(jC)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`,NR=class extends dd.default.Component{constructor(e){super(e);this.onSubmit=e=>{let{onChange:t,suffix:i,divider:o,min:n,max:s,value:a}=this.props,l=e.replace(i,""),c=l?parseFloat(l)/o:a,u=Math.max(n,Math.min(s,c));Number.isNaN(u)||(t(u),this.props.onMouseUp?this.props.onMouseUp(u):this.props.onTouchEnd&&this.props.onTouchEnd(u))};this.onSliderChange=e=>{let{onChange:t}=this.props,i=parseFloat(e.target.value);t(i)};this.onTouchOrMouseUp=e=>{let{value:t}=e.target,{onMouseUp:i,onTouchEnd:o}=this.props,n=parseFloat(t);i&&i(n),o&&o(n)};this.randomId=yt()}render(){let{"data-test":e,identifier:t,value:i,min:o,max:n,divider:s,suffix:a,decimal:l,showLabel:c,showInput:u,style:d,centerSlider:p,adjust:h,label:f,isDisabled:_,step:x,"aria-hidden":y,className:D}=this.props,E=`photoeditorsdk-slider-${this.randomId}`,F=`${E}-input`,N=`${(i*s).toFixed(l)}${a}`,R=u&&dd.default.createElement(iNe,{id:F,value:N,isDisabled:_,"aria-hidden":y,onSubmit:this.onSubmit});return dd.default.createElement(Z9e,{className:D,"data-test":e||t||E},dd.default.createElement(Q9e,{isDisabled:_,label:f,show:c}),dd.default.createElement(rNe,{centerSlider:u&&p},dd.default.createElement(tNe,{type:"range",role:"slider","aria-hidden":y,tabIndex:0,value:i,min:o,max:n,step:x,style:d,disabled:_,id:E,onChange:this.onSliderChange,adjust:h,name:f,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:this.onTouchOrMouseUp,onTouchEnd:this.onTouchOrMouseUp}),R))}};NR.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};JJ=NR});var QJ,pd,GC=m(()=>{QJ=v(C("styled-components"));Ic();cd();pd=(0,QJ.default)(ti)`
  color: ${r=>r.theme.button.textPrimaryForeground};

  svg {
    color: ${r=>r.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:r})=>r&&Vn}

  ${Ti} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }
`});var eZ,Kn,VC=m(()=>{eZ=v(C("styled-components"));Ic();cd();Kn=(0,eZ.default)(ti)`
  color: ${r=>r.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:r})=>r&&Vn}

  ${Ti} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${r=>r.theme.button.textSecondaryForeground};
  }
`});var Ws,qR,tZ=m(()=>{Ws=v(C("react"));Y();GC();VC();Tb();_C();vC();qR=class extends Ws.default.Component{constructor(){super(...arguments);this.onDismiss=()=>{let{handleClose:e,handleDismiss:t}=this.props;e&&e(),t&&t()};this.onConfirm=()=>{let{handleClose:e,handleConfirm:t}=this.props;e&&e(),t&&t()}}render(){let{headerLabel:e,bodyLabel:t,confirmLabel:i,dismissLabel:o,type:n,children:s}=this.props,a=Ws.default.Children.toArray(s)[0];if(!Ws.default.isValidElement(a))throw new Error("Child is not a valid react element");return Ws.default.cloneElement(a,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:Ws.default.createElement(Qm,null,e),body:Ws.default.createElement(Za,{"data-test":X.DialogBody},t),footer:Ws.default.createElement(Zm,{type:n},o&&Ws.default.createElement(Kn,{label:o,ariaLabel:o,onClick:this.onDismiss}),i&&Ws.default.createElement(pd,{label:i,ariaLabel:i,onClick:this.onConfirm}))})}}});var Xn,Bb,oNe,nNe,sNe,aNe,HR,rZ=m(()=>{Xn=v(C("react")),Bb=v(C("styled-components"));Y();Tb();vC();mR();oNe=Bb.default.div`
  display: flex;
`,nNe=(0,Bb.default)(Qm)`
  padding: 0;
`,sNe=Bb.default.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`,aNe=(0,Bb.default)(Za)`
  padding: 0;
  margin: 0;
`,HR=class extends Xn.default.PureComponent{render(){let{headerLabel:e,bodyLabel:t,children:i}=this.props,o=Xn.default.Children.toArray(i)[0];if(!Xn.default.isValidElement(o))throw new Error("Child is not a valid react element");return Xn.default.cloneElement(o,{height:"90px",body:Xn.default.createElement(Za,{"data-test":X.DialogBody},Xn.default.createElement(oNe,null,Xn.default.createElement(CC,null),Xn.default.createElement(sNe,null,Xn.default.createElement(nNe,null,e),Xn.default.createElement(aNe,null,t))))})}}});var Do,lh,lNe,cNe,uNe,dNe,pNe,jR,iZ,oZ=m(()=>{Do=v(C("react")),lh=v(C("styled-components"));Y();GC();VC();Tb();_C();Rb();lNe=lh.default.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,cNe=lh.default.textarea`
  display: flex;
  caret-color: ${r=>r.theme.primary};
  ${ud}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${r=>r.theme.modal.bodyForeground};
  resize: none;
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${r=>r.theme.primary};
    color: ${r=>r.theme.foreground};
  }
`,uNe=lh.default.label`
  padding: 11px 20px 8px;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  color: ${r=>r.theme.modal.headerForeground};
`,dNe=(0,lh.default)(Za)`
  height: 100%;
`,pNe=(0,lh.default)(Zm)`
  border-top: none;
`,jR=class extends Do.default.Component{constructor(){super(...arguments);this.state={value:""};this.input=Do.default.createRef();this.handleKeydown=e=>{JX(this.handleDismiss)(e)};this.handleDismiss=()=>{let{handleDismiss:e}=this.props;e&&e(!1)};this.handleConfirm=()=>{let{handleConfirm:e}=this.props,{value:t}=this.input.current;t&&(e&&e(t),this.handleDismiss())};this.onChange=e=>{let{allowEmojis:t}=this.props,i=t?e.target.value:Y$(e.target.value);this.input.current.value=i,this.setState({value:i})};this.onSubmit=e=>{e.preventDefault()}}componentDidMount(){let{text:e,defaultText:t}=this.props;this.input.current.focus(),this.input.current.value=e||t||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),e===t&&this.input.current.select()}componentDidUpdate(e){let{isVisible:t}=this.props;e.isVisible!==t&&t&&this.input.current.focus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,!1)}render(){let{headerLabel:e,dismissLabel:t,confirmLabel:i,maxLength:o,type:n,children:s}=this.props,{value:a}=this.state,l=Do.default.Children.toArray(s)[0];if(!Do.default.isValidElement(l))throw new Error("Child is not a valid react element");return Do.default.cloneElement(l,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!a,height:"150px",header:Do.default.createElement(uNe,{htmlFor:"photoeditorsdk-TextInput"},e),body:Do.default.createElement(dNe,null,Do.default.createElement(lNe,{onSubmit:this.onSubmit},Do.default.createElement(cNe,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:o}))),footer:Do.default.createElement(pNe,{type:n},Do.default.createElement(Kn,{label:t,ariaLabel:t,onClick:this.handleDismiss}),Do.default.createElement(pd,{label:i,ariaLabel:i,isDisabled:!a,onClick:this.handleConfirm}))})}};jR.defaultProps={defaultText:"Write Something",allowEmojis:!1};iZ=jR});var nZ,WR,sZ=m(()=>{nZ=v(C("styled-components")),WR=nZ.default.div`
  padding-bottom: ${r=>(r.count||1)*8}px;
`;WR.defaultProps={count:1}});var md,GR,$C,KC,aZ=m(()=>{md=v(C("react")),GR=class extends md.default.Component{getChildren(){let e=[],t=[];return md.default.Children.forEach(this.props.children,i=>{switch(i.type.componentName){case"case":this.props.type===i.props.value&&e.push(i);break;case"default":t.push(i);break}}),e.length>0?e:t}render(){let e=this.getChildren();return e.length===0?null:md.default.createElement(md.default.Fragment,null,e)}},$C=class extends md.default.Component{render(){return this.props.children}};$C.componentName="case";KC=class extends md.default.Component{render(){return this.props.children}};KC.componentName="default"});var ch,mNe,hNe,lZ,cZ=m(()=>{ch=v(C("styled-components")),mNe=ch.keyframes`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`,hNe=ch.default.div`
  position: absolute;
  top: ${r=>r.position.y}px;
  left: ${r=>r.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${r=>r.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:r})=>r&&ch.css`
      visibility: visible;
      animation: ${mNe} 0.5s, fadeout 0.5s 2.5s;
    `}
`,lZ=hNe});var XC,Dc,fNe,gNe,bNe,Yn,Lb=m(()=>{XC=v(C("react")),Dc=v(C("styled-components"));Ic();fNe=(0,Dc.default)(ti)`
  ${({fullWidth:r})=>r&&Dc.css`
      width: 100%;
    `}
`,gNe=Dc.default.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`,bNe=Dc.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:r})=>r&&Dc.css`
      opacity: ${e=>e.theme.button.textInactiveOpacity};
    `}
  ${({hasIcon:r})=>r&&Dc.css`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`,Yn=s=>{var a=s,{label:r,children:e,icon:t,fullWidth:i,isDisabled:o}=a,n=Hi(a,["label","children","icon","fullWidth","isDisabled"]);let l=XC.default.createElement(bNe,{hasIcon:!!t,isDisabled:o},r,e);return XC.default.createElement(fNe,T({fullWidth:i,isDisabled:o},n),t&&XC.default.createElement(gNe,null,t),(e||r)&&l)}});var uZ,zb,dZ=m(()=>{uZ=v(C("styled-components"));Lb();zb=(0,uZ.default)(Yn)`
  background: ${r=>r.theme.button.outlinedPrimaryBackground};
  color: ${r=>r.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${r=>r.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${r=>r.theme.button.outlinedPrimaryForeground};
  }
`});var pZ,Oc,mZ=m(()=>{pZ=v(C("styled-components"));Ic();Lb();Oc=(0,pZ.default)(Yn)`
  background: ${r=>r.theme.button.outlinedSecondaryBackground};
  color: ${r=>r.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${r=>r.theme.button.outlinedBorderColor};

  svg {
    color: ${r=>r.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:r})=>r&&Vn}
`});var VR,$R,yNe,_Ne,el,hZ=m(()=>{VR=v(C("react")),$R=v(C("styled-components"));Ic();cd();yNe=(0,$R.default)(ti)`
  color: ${r=>r.theme.foreground};

  svg {
    color: ${r=>r.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:r})=>r&&Vn}

  ${Ti} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }
`,_Ne=$R.default.div`
  display: flex;
  &:focus {
    outline: none;
  }
`,el=o=>{var n=o,{label:r,icon:e,children:t}=n,i=Hi(n,["label","icon","children"]);return VR.default.createElement(yNe,T({},i),VR.default.createElement(_Ne,null,e))}});var fZ,Ub,gZ=m(()=>{fZ=v(C("styled-components"));Lb();Ub=(0,fZ.default)(Yn)`
  background: ${r=>r.theme.button.containedPrimaryBackground};
  color: ${r=>r.theme.button.containedPrimaryForeground};
  border: 1px solid ${r=>r.theme.button.containedPrimaryBackground};

  &:active {
    color: ${r=>r.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${r=>r.theme.button.containedPrimaryForeground};

    &:active {
      color: ${r=>r.theme.button.containedPrimaryForeground};
    }
  }
`});var hd,Nb,vNe,xNe,CNe,Oo,bZ=m(()=>{hd=v(C("react")),Nb=v(C("styled-components"));cO();cd();pn();vNe=()=>Nb.css`
    animation: ${v0} 0.2s linear;
  `,xNe=Nb.css`
  border: 1px solid ${r=>r.theme.card.activeBorderColor};
  ${wR} {
    background-color: ${r=>r.theme.card.activeOverlayColor};
  }
`,CNe=Nb.default.button.attrs(r=>{let e={};return r.image&&(e.backgroundImage=`url(${r.image})`),T({style:e},r.style)})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${r=>r.theme.card.background};
  color: ${r=>r.theme.card.foreground};

  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  ${vNe};
  animation-fill-mode: both;
  overflow: hidden;

  ${Gr}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:r})=>r&&xNe}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${Ti} {
      background-color: ${r=>r.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${ih} {
      background-color: ${r=>r.theme.card.hoverOverlayColor};
    }
  }
`,Oo=class extends hd.default.Component{constructor(){super(...arguments);this.state=PC;this.timeout=null;this.onKeyDown=e=>{(e.key==="Space"||e.key==="Enter")&&this.props.onClick&&this.props.onClick()};this.onClick=e=>{let t=e.currentTarget.getBoundingClientRect(),i=e.pageX-t.left,o=e.pageY-t.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(i,o)}):this.setRippleState(i,o),this.props.onClick(e)};this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){let{children:e,label:t,isActive:i,isDisabled:o,image:n,style:s,className:a}=this.props,{left:l,top:c,display:u}=this.state;return hd.default.createElement(CNe,{isActive:i,"aria-label":t,"data-test":t,disabled:o,image:n,onClick:this.onClick,onKeyDown:this.onKeyDown,style:s,className:a},e,hd.default.createElement(MC,{display:u,left:l,top:c}),hd.default.createElement(wR,null),hd.default.createElement(Ti,null),hd.default.createElement(ih,null))}};Oo.defaultProps={isActive:!1}});var uh,Ro,SNe,wNe,TNe,kNe,ENe,Jt,yZ=m(()=>{uh=v(C("react")),Ro=v(C("styled-components"));Y();pn();SNe=Ro.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  ${r=>r.withBackground?Ro.css`
          color: ${r.theme.card.labelForeground};
        `:Ro.css`
          color: ${r.theme.card.foreground};
        `}
`,wNe=Ro.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  left: 0;
  ${r=>r.withBackground?Ro.css`
          color: ${r.theme.card.labelForeground};
          height: 40px;
          background: ${r.theme.card.labelBackground};
        `:Ro.css`
          color: ${r.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`,TNe=Ro.default.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${r=>r.theme.card.labelForeground};
  ${r=>r.withBackground?Ro.css`
          border-top-color: ${r.theme.card.labelForeground};
        `:Ro.css`
          border-top-color: ${r.theme.card.foreground};
        `}
  transform: rotate(${r=>r.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`,kNe=Ro.default.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`,ENe=Ro.default.div`
  ${Jm}
`,Jt=({children:r,className:e,caret:t,isActive:i,style:o,withBackground:n,hidden:s})=>{if(s)return uh.default.createElement(ENe,null,r);let a=()=>uh.default.createElement(kNe,null,uh.default.createElement(TNe,{"aria-hidden":!0,rotation:i?180:0,withBackground:n}));return uh.default.createElement(wNe,{className:e,withBackground:n,style:o},uh.default.createElement(SNe,{"data-test":X.CardLabel,withBackground:n},r,t&&a()))}});var _Z,fd,vZ=m(()=>{_Z=v(C("styled-components"));Y();fd=_Z.default.div.attrs(r=>({"data-test":X.CardAvatar,style:{backgroundImage:`url(${r.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`});var xZ=m(()=>{});var YC,CZ,z,pe=m(()=>{cO();AY();qY();aR();Cb();lR();cR();VY();uR();dR();Tb();pR();_C();vC();mR();uJ();CR();xJ();kJ();kR();ER();IR();Rb();zJ();qJ();WJ();Qa();zR();$J();YJ();ZJ();BR();tZ();rZ();oZ();sZ();pn();aZ();cZ();cd();Ic();Lb();dZ();VC();GC();mZ();hZ();gZ();bZ();yZ();vZ();OR();xZ();YC={Focused:Gr,VisuallyHidden:Jm},CZ={ripple:_0,scale:s$,slide:v0},z={Container:nR,ColorItem:NY,ColorItemBase:pC,ColorItemBackground:uC,ColorItemTiledBackground:mC,ColorItemActiveOverlay:dC,Dialog:GY,DialogBase:gC,DialogContainer:bC,DialogBackdrop:hC,DialogHeader:Qm,DialogBody:Za,DialogFooter:Zm,DialogSpinner:CC,TextEditModal:iZ,ActionModal:qR,InfoModal:HR,Spacer:WR,Draggable:cJ,DraggableCore:ld,Toast:lZ,Input:{Label:ri,File:NJ,Search:VJ,Slider:JJ,CarouselSlider:vJ,Selection:XJ,Checkbox:TJ,CheckboxBase:LC,CheckboxInput:zC,CheckboxCheckMark:Ob,Dropdown:AR,Text:HC,NumericInput:jC,Form:jJ},Switch:{Index:GR,Case:$C,Default:KC}}});var SZ,JC,wZ=m(()=>{SZ=v(C("styled-components"));pe();JC=(0,SZ.default)(Yn)`
  font-size: ${r=>r.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button2.case};
  color: ${r=>r.theme.button.textSecondaryForeground};

  ${Ti} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }
`});var KR,XR,INe,DNe,TZ,kZ=m(()=>{KR=v(C("react")),XR=v(C("styled-components"));pe();INe=(0,XR.default)(ti)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${r=>r.theme.measurements.zIndex.button.float};
  padding: 2px;
`,DNe=XR.default.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${r=>r.theme.webcam.floatButton};
`,TZ=r=>KR.default.createElement(INe,T({},r),KR.default.createElement(DNe,null))});var gd,EZ,Gs,qb,IZ=m(()=>{gd=v(C("styled-components"));pe();EZ=gd.default.div`
  display: inline-flex;
`,Gs=(0,gd.default)(Yn)`
  background: ${r=>r.theme.canvasActionBar.background};
  color: ${r=>r.theme.canvasActionBar.foreground};
  font-size: ${r=>r.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`,qb=gd.default.div`
  ${({show:r})=>r?gd.css`
          opacity: 1;
        `:gd.css`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${r=>r.theme.canvasActionBar.background};
  color: ${r=>r.theme.canvasActionBar.foreground};
  border-radius: ${r=>r.theme.canvasActionBar.borderRadius?r.theme.canvasActionBar.borderRadius:r.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${r=>r.theme.measurements.zIndex.buttonGroup};

  ${Gs} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${r=>r.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`});var ZC=m(()=>{wZ();kZ();IZ()});var tl,ONe,DZ,OZ=m(()=>{tl=v(C("react")),ONe=()=>tl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},tl.default.createElement("defs",null,tl.default.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),tl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},tl.default.createElement("path",{d:"M0 0H48V48H0z"}),tl.default.createElement("mask",{fill:"currentColor"},tl.default.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),tl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"}))),DZ=ONe});var Rc,RNe,RZ,FZ=m(()=>{Rc=v(C("react")),RNe=()=>Rc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Rc.default.createElement("defs",null,Rc.default.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Rc.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Rc.default.createElement("mask",null,Rc.default.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),Rc.default.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"}))),RZ=RNe});var rl,FNe,AZ,PZ=m(()=>{rl=v(C("react")),FNe=()=>rl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},rl.default.createElement("defs",null,rl.default.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),rl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},rl.default.createElement("path",{d:"M0 0H48V48H0z"}),rl.default.createElement("mask",{fill:"currentColor"},rl.default.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),rl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"}))),AZ=FNe});var il,ANe,MZ,BZ=m(()=>{il=v(C("react")),ANe=()=>il.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},il.default.createElement("defs",null,il.default.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),il.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},il.default.createElement("path",{d:"M0 0H48V48H0z"}),il.default.createElement("mask",{fill:"currentColor"},il.default.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),il.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"}))),MZ=ANe});var ol,PNe,LZ,zZ=m(()=>{ol=v(C("react")),PNe=()=>ol.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ol.default.createElement("defs",null,ol.default.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),ol.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ol.default.createElement("path",{d:"M0 0H48V48H0z"}),ol.default.createElement("mask",{fill:"currentColor"},ol.default.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),ol.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"}))),LZ=PNe});var nl,MNe,UZ,NZ=m(()=>{nl=v(C("react")),MNe=()=>nl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},nl.default.createElement("defs",null,nl.default.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),nl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},nl.default.createElement("path",{d:"M0 0H48V48H0z"}),nl.default.createElement("mask",{fill:"#fff"},nl.default.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),nl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"}))),UZ=MNe});var sl,BNe,qZ,HZ=m(()=>{sl=v(C("react")),BNe=()=>sl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},sl.default.createElement("defs",null,sl.default.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),sl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},sl.default.createElement("path",{d:"M0 0H48V48H0z"}),sl.default.createElement("mask",{fill:"currentColor"},sl.default.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),sl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"}))),qZ=BNe});var al,LNe,jZ,WZ=m(()=>{al=v(C("react")),LNe=()=>al.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},al.default.createElement("defs",null,al.default.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),al.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},al.default.createElement("path",{d:"M0 0H48V48H0z"}),al.default.createElement("mask",{fill:"currentColor"},al.default.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),al.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"}))),jZ=LNe});var ll,zNe,GZ,VZ=m(()=>{ll=v(C("react")),zNe=()=>ll.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ll.default.createElement("defs",null,ll.default.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),ll.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ll.default.createElement("path",{d:"M0 0H48V48H0z"}),ll.default.createElement("mask",{fill:"currentColor"},ll.default.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),ll.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"}))),GZ=zNe});var cl,UNe,$Z,KZ=m(()=>{cl=v(C("react")),UNe=()=>cl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},cl.default.createElement("defs",null,cl.default.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),cl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},cl.default.createElement("path",{d:"M0 0H48V48H0z"}),cl.default.createElement("mask",{fill:"currentColor"},cl.default.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),cl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"}))),$Z=UNe});var ul,NNe,XZ,YZ=m(()=>{ul=v(C("react")),NNe=()=>ul.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ul.default.createElement("defs",null,ul.default.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),ul.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ul.default.createElement("path",{d:"M0 0H48V48H0z"}),ul.default.createElement("mask",{fill:"currentColor"},ul.default.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),ul.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"}))),XZ=NNe});var dl,qNe,JZ,ZZ=m(()=>{dl=v(C("react")),qNe=()=>dl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},dl.default.createElement("defs",null,dl.default.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),dl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},dl.default.createElement("path",{d:"M0 0H48V48H0z"}),dl.default.createElement("mask",{fill:"currentColor"},dl.default.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),dl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"}))),JZ=qNe});var Fc,HNe,QZ,eQ=m(()=>{Fc=v(C("react")),HNe=()=>Fc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Fc.default.createElement("defs",null,Fc.default.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Fc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fc.default.createElement("mask",{fill:"currentColor"},Fc.default.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Fc.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"}))),QZ=HNe});function jNe(){return Ac.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ac.default.createElement("defs",null,Ac.default.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Ac.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ac.default.createElement("mask",{fill:"#fff"},Ac.default.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Ac.default.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var Ac,tQ,rQ=m(()=>{Ac=v(C("react"));tQ=jNe});var Pc,WNe,iQ,oQ=m(()=>{Pc=v(C("react")),WNe=()=>Pc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Pc.default.createElement("defs",null,Pc.default.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Pc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Pc.default.createElement("mask",{fill:"currentColor"},Pc.default.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),Pc.default.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"}))),iQ=WNe});var Mc,GNe,nQ,sQ=m(()=>{Mc=v(C("react")),GNe=()=>Mc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Mc.default.createElement("defs",null,Mc.default.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Mc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Mc.default.createElement("mask",{fill:"currentColor"},Mc.default.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),Mc.default.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"}))),nQ=GNe});function VNe(){return Bc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Bc.default.createElement("defs",null,Bc.default.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Bc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Bc.default.createElement("mask",{fill:"#fff"},Bc.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Bc.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var Bc,aQ,lQ=m(()=>{Bc=v(C("react"));aQ=VNe});var Lc,$Ne,cQ,uQ=m(()=>{Lc=v(C("react")),$Ne=()=>Lc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},Lc.default.createElement("defs",null,Lc.default.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Lc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Lc.default.createElement("mask",{fill:"#fff"},Lc.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),Lc.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"}))),cQ=$Ne});function KNe(){return pl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},pl.default.createElement("defs",null,pl.default.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),pl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},pl.default.createElement("path",{d:"M0 0H48V48H0z"}),pl.default.createElement("mask",{fill:"#fff"},pl.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),pl.default.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var pl,dQ,pQ=m(()=>{pl=v(C("react"));dQ=KNe});var ii,XNe,mQ,hQ=m(()=>{ii=v(C("react")),XNe=()=>ii.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},ii.default.createElement("g",{fill:"none",fillRule:"evenodd"},ii.default.createElement("g",null,ii.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},ii.default.createElement("rect",{width:"48",height:"48"})),ii.default.createElement("g",{transform:"translate(12 12)"},ii.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),ii.default.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},ii.default.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),ii.default.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),ii.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),ii.default.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},ii.default.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),ii.default.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},ii.default.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),ii.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})))))),mQ=XNe});function YNe(){return zc.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},zc.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},zc.default.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),zc.default.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),zc.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),zc.default.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),zc.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var zc,fQ,gQ=m(()=>{zc=v(C("react"));fQ=YNe});var Jn,JNe,bQ,yQ=m(()=>{Jn=v(C("react")),JNe=()=>Jn.default.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Jn.default.createElement("g",{fill:"none",fillRule:"evenodd"},Jn.default.createElement("g",null,Jn.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},Jn.default.createElement("rect",{width:"48",height:"48"})),Jn.default.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},Jn.default.createElement("g",null,Jn.default.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),Jn.default.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),Jn.default.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"})))))),bQ=JNe});var gn,ZNe,_Q,vQ=m(()=>{gn=v(C("react")),ZNe=()=>gn.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},gn.default.createElement("g",{fill:"none",fillRule:"evenodd"},gn.default.createElement("g",null,gn.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},gn.default.createElement("rect",{width:"48",height:"48"})),gn.default.createElement("g",{transform:"translate(12 12)"},gn.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),gn.default.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},gn.default.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),gn.default.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),gn.default.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"})))))),_Q=ZNe});var bd,QNe,xQ,CQ=m(()=>{bd=v(C("react")),QNe=()=>bd.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},bd.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},bd.default.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),bd.default.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),bd.default.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),bd.default.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"}))),xQ=QNe});var Fo,e7e,SQ,wQ=m(()=>{Fo=v(C("react")),e7e=()=>Fo.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Fo.default.createElement("g",{fill:"none",fillRule:"evenodd"},Fo.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},Fo.default.createElement("g",null,Fo.default.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),Fo.default.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),Fo.default.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),Fo.default.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),Fo.default.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),Fo.default.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},Fo.default.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),Fo.default.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"})))))),SQ=e7e});var dh,t7e,TQ,kQ=m(()=>{dh=v(C("react")),t7e=()=>dh.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},dh.default.createElement("g",{fill:"none",fillRule:"evenodd"},dh.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},dh.default.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),dh.default.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"})))),TQ=t7e});var Vs,r7e,EQ,IQ=m(()=>{Vs=v(C("react")),r7e=()=>Vs.default.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},Vs.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Vs.default.createElement("g",null,Vs.default.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},Vs.default.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},Vs.default.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),Vs.default.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),Vs.default.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),Vs.default.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"}))))),EQ=r7e});var ph,i7e,DQ,OQ=m(()=>{ph=v(C("react")),i7e=()=>ph.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},ph.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ph.default.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),ph.default.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),ph.default.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"}))),DQ=i7e});var mh,o7e,RQ,FQ=m(()=>{mh=v(C("react")),o7e=()=>mh.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},mh.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},mh.default.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),mh.default.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),mh.default.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"}))),RQ=o7e});function n7e(){return Uc.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Uc.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Uc.default.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),Uc.default.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),Uc.default.createElement("g",{fillOpacity:"0.2"},Uc.default.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),Uc.default.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var Uc,AQ,PQ=m(()=>{Uc=v(C("react"));AQ=n7e});var Nc,s7e,MQ,BQ=m(()=>{Nc=v(C("react")),s7e=()=>Nc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Nc.default.createElement("defs",null,Nc.default.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),Nc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Nc.default.createElement("mask",{fill:"currentColor"},Nc.default.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),Nc.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"}))),MQ=s7e});var YR,a7e,LQ,zQ=m(()=>{YR=v(C("react")),a7e=()=>YR.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},YR.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"})),LQ=a7e});var JR,l7e,UQ,NQ=m(()=>{JR=v(C("react")),l7e=()=>JR.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},JR.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"})),UQ=l7e});function c7e(){return qc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},qc.default.createElement("defs",null,qc.default.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),qc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},qc.default.createElement("mask",{fill:"currentColor"},qc.default.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),qc.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var qc,qQ,HQ=m(()=>{qc=v(C("react"));qQ=c7e});var Hc,u7e,jQ,WQ=m(()=>{Hc=v(C("react")),u7e=()=>Hc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Hc.default.createElement("defs",null,Hc.default.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),Hc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Hc.default.createElement("mask",{fill:"currentColor"},Hc.default.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),Hc.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"}))),jQ=u7e});var ml,d7e,GQ,VQ=m(()=>{ml=v(C("react")),d7e=()=>ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ml.default.createElement("defs",null,ml.default.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),ml.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ml.default.createElement("path",{d:"M0 0H24V24H0z"}),ml.default.createElement("mask",{fill:"currentColor"},ml.default.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),ml.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"}))),GQ=d7e});var Dr,p7e,$Q,KQ=m(()=>{Dr=v(C("react")),p7e=({highlight:r="currentColor",width:e=48,height:t=48})=>Dr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},Dr.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Dr.default.createElement("g",{fill:r,transform:"translate(13 13)"},Dr.default.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),Dr.default.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),Dr.default.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),Dr.default.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),Dr.default.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),Dr.default.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),Dr.default.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),Dr.default.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),Dr.default.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),Dr.default.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),Dr.default.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),Dr.default.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),Dr.default.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),Dr.default.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),Dr.default.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),Dr.default.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"})))),$Q=p7e});var QC,m7e,XQ,YQ=m(()=>{QC=v(C("react")),m7e=({highlight:r="currentColor",width:e=48,height:t=48})=>QC.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},QC.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},QC.default.createElement("path",{fill:r,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"}))),XQ=m7e});var yd,h7e,JQ,ZQ=m(()=>{yd=v(C("react")),h7e=({highlight:r="currentColor",width:e=48,height:t=48})=>yd.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},yd.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},yd.default.createElement("g",{fill:r,transform:"translate(13 13)"},yd.default.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),yd.default.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),yd.default.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"})))),JQ=h7e});var eS,f7e,QQ,eee=m(()=>{eS=v(C("react")),f7e=({highlight:r="currentColor",width:e=48,height:t=48})=>eS.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},eS.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},eS.default.createElement("path",{fill:r,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"}))),QQ=f7e});var tee,g7e,ki,jc=m(()=>{tee=v(C("styled-components")),g7e=tee.default.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``,ki=g7e});var Rt,b7e,ree,iee=m(()=>{Rt=v(C("react"));jc();b7e=({highlight:r="#565656",width:e=32,height:t=32})=>Rt.default.createElement(ki,{width:e,height:t,viewBox:"0 0 32 32"},Rt.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Rt.default.createElement("g",{fill:r,transform:"translate(-8 -8)"},Rt.default.createElement("g",{transform:"translate(8 8)"},Rt.default.createElement("g",null,Rt.default.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),Rt.default.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),Rt.default.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),Rt.default.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),Rt.default.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),Rt.default.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),Rt.default.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),Rt.default.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),Rt.default.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),Rt.default.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),Rt.default.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),Rt.default.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),Rt.default.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),Rt.default.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),Rt.default.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),Rt.default.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),Rt.default.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),Rt.default.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),Rt.default.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),Rt.default.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),Rt.default.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),Rt.default.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),Rt.default.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),Rt.default.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"})))))),ree=b7e});var Hb,y7e,oee,nee=m(()=>{Hb=v(C("react"));jc();y7e=({highlight:r="#565656",width:e=32,height:t=48})=>Hb.default.createElement(ki,{width:e,height:t,viewBox:"0 0 42 32"},Hb.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Hb.default.createElement("g",{fill:r,transform:"translate(-3 -8)"},Hb.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"})))),oee=y7e});var jb,_7e,see,aee=m(()=>{jb=v(C("react"));jc();_7e=({highlight:r="#565656",width:e=26,height:t=46})=>jb.default.createElement(ki,{width:e,height:t,viewBox:"0 0 26 46"},jb.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jb.default.createElement("g",{fill:r,transform:"translate(-11 -1)"},jb.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"})))),see=_7e});var Wb,v7e,lee,cee=m(()=>{Wb=v(C("react"));jc();v7e=({highlight:r="#565656",width:e=26,height:t=46})=>Wb.default.createElement(ki,{width:e,height:t,viewBox:"0 0 26 46"},Wb.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Wb.default.createElement("g",{fill:r,transform:"translate(-11 -1)"},Wb.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"})))),lee=v7e});var $s,x7e,uee,dee=m(()=>{$s=v(C("react"));jc();x7e=({highlight:r="#565656",mask:e="#fff",width:t=32,height:i=32})=>$s.default.createElement(ki,{width:t,height:i,viewBox:"0 0 32 32"},$s.default.createElement("defs",null,$s.default.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),$s.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$s.default.createElement("g",{transform:"translate(-8 -8)"},$s.default.createElement("g",{transform:"translate(7.08 7.293)"},$s.default.createElement("mask",{fill:e},$s.default.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),$s.default.createElement("use",{fill:r,xlinkHref:"#photoeditorsdk-square-icon"}))))),uee=x7e});var Gb,C7e,pee,mee=m(()=>{Gb=v(C("react"));jc();C7e=({highlight:r="#565656",width:e=32,height:t=42})=>Gb.default.createElement(ki,{width:e,height:t,viewBox:"0 0 32 42"},Gb.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Gb.default.createElement("g",{fill:r,transform:"translate(-8 -3)"},Gb.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"})))),pee=C7e});var Ks,S7e,hee,fee=m(()=>{Ks=v(C("react")),S7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Ks.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Ks.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ks.default.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Ks.default.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),Ks.default.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Ks.default.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Ks.default.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:r,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),Ks.default.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Ks.default.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:r,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}))),hee=S7e});var Xs,w7e,gee,bee=m(()=>{Xs=v(C("react")),w7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Xs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Xs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Xs.default.createElement("g",null,Xs.default.createElement("path",{fill:r,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Xs.default.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:r,rx:"1"}),Xs.default.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:r,rx:"1"}),Xs.default.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:r,rx:"1"}),Xs.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}),Xs.default.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:r,rx:"1"})))),gee=w7e});var Ys,T7e,yee,_ee=m(()=>{Ys=v(C("react")),T7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Ys.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Ys.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ys.default.createElement("g",{transform:"translate(5 5)"},Ys.default.createElement("path",{fill:e,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),Ys.default.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:r,rx:"1"}),Ys.default.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:r,rx:"1"}),Ys.default.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:r,rx:"1"}),Ys.default.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:r,rx:"1"}),Ys.default.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:r,rx:"1"})))),yee=T7e});var hl,k7e,vee,xee=m(()=>{hl=v(C("react")),k7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>hl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},hl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},hl.default.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:r,rx:"1"}),hl.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:r,rx:"1"}),hl.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:r,rx:"1"}),hl.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:r,rx:"1"}),hl.default.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:r,rx:"1"}),hl.default.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:e,rx:"1"}))),vee=k7e});var fl,E7e,Cee,See=m(()=>{fl=v(C("react")),E7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>fl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},fl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},fl.default.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:r,rx:"1"}),fl.default.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:e,rx:"1"}),fl.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:r,rx:"1"}),fl.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:r,rx:"1"}),fl.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:r,rx:"1"}),fl.default.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:r,rx:"1"}))),Cee=E7e});var gl,I7e,wee,Tee=m(()=>{gl=v(C("react")),I7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>gl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},gl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},gl.default.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:r,rx:"1"}),gl.default.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:e,rx:"1"}),gl.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:r,rx:"1"}),gl.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:r,rx:"1"}),gl.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:r,rx:"1"}),gl.default.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:r,rx:"1"}))),wee=I7e});var Vb,D7e,kee,Eee=m(()=>{Vb=v(C("react")),D7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Vb.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Vb.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Vb.default.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:e,rx:"1.5"}),Vb.default.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:r,rx:"1"}))),kee=D7e});var Ei,O7e,Iee,Dee=m(()=>{Ei=v(C("react")),O7e=({main:r="#424242",highlight:e="#565656",shadow:t="#333333",width:i="48px",height:o="48px"})=>Ei.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},Ei.default.createElement("defs",null,Ei.default.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},Ei.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),Ei.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ei.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:r,rx:"0.5"}),Ei.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:r,rx:"0.5"}),Ei.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:r,rx:"0.5"}),Ei.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:r,rx:"0.5"}),Ei.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),Ei.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:r,rx:"0.5"}),Ei.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:r,rx:"0.5"}),Ei.default.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:t,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),Ei.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:r,rx:"1"}))),Iee=O7e});var Zn,R7e,Oee,Ree=m(()=>{Zn=v(C("react")),R7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Zn.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Zn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Zn.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:r,rx:"0.5"}),Zn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:r,rx:"0.5"}),Zn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:r,rx:"0.5"}),Zn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:r,rx:"0.5"}),Zn.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:r,rx:"0.5"}),Zn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:r,rx:"0.5"}),Zn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:r,rx:"0.5"}),Zn.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}))),Oee=R7e});var Qn,F7e,Fee,Aee=m(()=>{Qn=v(C("react")),F7e=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Qn.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Qn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qn.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),Qn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:r,rx:"0.5"}),Qn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:r,rx:"0.5"}),Qn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:r,rx:"0.5"}),Qn.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:r,rx:"0.5"}),Qn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:r,rx:"0.5"}),Qn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:r,rx:"0.5"}),Qn.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:r,rx:"1"}))),Fee=F7e});var Wc,A7e,Pee,Mee=m(()=>{Wc=v(C("react")),A7e=()=>Wc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Wc.default.createElement("defs",null,Wc.default.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),Wc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Wc.default.createElement("mask",{fill:"currentColor"},Wc.default.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),Wc.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"}))),Pee=A7e});var Ao,P7e,Bee,Lee=m(()=>{Ao=v(C("react")),P7e=({height:r=3,width:e=102,x:t=-102,className:i,style:o})=>Ao.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 102 3",className:i,style:o},Ao.default.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},Ao.default.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),Ao.default.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),Ao.default.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-e*1.5,y:"0",width:e*4,height:"3",transform:`translate(${t}, 0)`})),Bee=P7e});var Gc,M7e,zee,Uee=m(()=>{Gc=v(C("react")),M7e=()=>Gc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Gc.default.createElement("defs",null,Gc.default.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),Gc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Gc.default.createElement("mask",{fill:"currentColor"},Gc.default.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),Gc.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"}))),zee=M7e});var ZR,B7e,Nee,qee=m(()=>{ZR=v(C("react")),B7e=()=>ZR.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},ZR.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"})),Nee=B7e});var bl,L7e,Hee,jee=m(()=>{bl=v(C("react")),L7e=({className:r})=>bl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:r},bl.default.createElement("title",null,"Flip Horizontal"),bl.default.createElement("defs",null,bl.default.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),bl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},bl.default.createElement("mask",{fill:"none"},bl.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),bl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"}))),Hee=L7e});var yl,z7e,Wee,Gee=m(()=>{yl=v(C("react")),z7e=({className:r})=>yl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:r},yl.default.createElement("title",null,"Flip Vertical"),yl.default.createElement("defs",null,yl.default.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),yl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},yl.default.createElement("mask",{fill:"none"},yl.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),yl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"}))),Wee=z7e});var _l,U7e,Vee,$ee=m(()=>{_l=v(C("react")),U7e=({alt:r="Rotate",className:e})=>_l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:e},_l.default.createElement("title",null,r),_l.default.createElement("defs",null,_l.default.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),_l.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},_l.default.createElement("mask",{fill:"none"},_l.default.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),_l.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"}))),Vee=U7e});var tS,rS,ar,$b,ft,Kee,Zt=m(()=>{V();OZ();FZ();PZ();BZ();zZ();NZ();HZ();WZ();VZ();KZ();YZ();ZZ();eQ();rQ();oQ();sQ();lQ();uQ();pQ();hQ();gQ();yQ();vQ();CQ();wQ();kQ();IQ();OQ();FQ();PQ();BQ();zQ();NQ();HQ();WQ();VQ();KQ();YQ();ZQ();eee();jc();iee();nee();aee();cee();dee();mee();fee();bee();_ee();xee();See();Tee();Eee();Dee();Ree();Aee();Mee();Lee();Uee();qee();jee();Gee();$ee();tS={[w.ADJUSTMENT]:mQ,[w.FILTER]:bQ,[w.LIBRARY]:SQ,[w.OVERLAY]:TQ,[w.FOCUS]:_Q,[w.STICKER]:EQ,[w.TEXT]:DQ,[w.TEXT_DESIGN]:RQ,[w.FRAME]:xQ,[w.TRANSFORM]:AQ,[w.BRUSH]:fQ},rS={left:cQ,right:dQ,center:aQ},ar={addText:MQ,openWebcam:LQ,reset:UQ,shuffle:qQ,uploadImage:jQ},$b={undo:nQ,redo:iQ,close:QZ,export:tQ},ft={categories:{[sr.CommonCategory]:$Q,[sr.FacebookCategory]:XQ,[sr.TwitterCategory]:QQ,[sr.InstagramCategory]:JQ},crops:{[sr.Custom]:ree,[sr.Square]:uee,[sr.ThreeByFour]:pee,[sr.FourByThree]:oee,[sr.NineBySixteen]:see,[sr.SixteenByNine]:lee,[sr.FacebookPost]:hee,[sr.FacebookProfile]:gee,[sr.FacebookTitle]:yee,[sr.InstagramLandscape]:vee,[sr.InstagramPortrait]:Cee,[sr.InstagramSquare]:wee,[sr.InstagramStory]:kee,[sr.TwitterPost]:Iee,[sr.TwitterProfile]:Oee,[sr.TwitterTitle]:Fee},dots:Bee,duplicate:zee,edit:Nee,bringToFront:GQ,delete:Pee,flipHorizontal:Hee,flipVertical:Wee,rotate:Vee},Kee={[Je.BRIGHTNESS]:RZ,[Je.CONTRAST]:MZ,[Je.SATURATION]:jZ,[Je.CLARITY]:AZ,[Je.SHADOWS]:GZ,[Je.HIGHLIGHTS]:qZ,[Je.EXPOSURE]:LZ,[Je.GAMMA]:UZ,[Je.BLACKS]:DZ,[Je.WHITES]:JZ,[Je.TEMPERATURE]:XZ,[Je.SHARPNESS]:$Z}});var Xee,Vc,QR=m(()=>{Xee=v(C("styled-components")),Vc=Xee.default.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
`});var Kb,Yee,Jee=m(()=>{Kb=v(C("styled-components"));Y();Yee=Kb.default.div.attrs(()=>({"data-test":X.MainCanvasActionBar}))`
  &&& {
    display: ${r=>r.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${r=>r.theme.measurements.mainCanvasActionBar.height}px;
    color: ${r=>r.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${r=>r.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${r=>r.theme.measurements.zIndex.canvas.bar};
    background: ${r=>r.transparentBackgound?"transparent":r.theme.mainCanvasActionBar.background};
    ${r=>r.bottom?Kb.css`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:Kb.css`
            justify-content: space-between;
          `}
  }
`});var Zee,Qee,ete=m(()=>{Zee=v(C("styled-components")),Qee=Zee.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`});var tte,rte,ite=m(()=>{tte=v(C("styled-components")),rte=tte.default.div.attrs({role:"main"})`
  background-color: ${r=>r.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${r=>r.theme.measurements.canvas.marginTop}px;
`});var ote,nte,ste=m(()=>{ote=v(C("styled-components")),nte=ote.default.div.attrs(({height:r,width:e})=>({style:{height:`${r}px`,width:`${e}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${r=>r.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`});var ate,lte,cte=m(()=>{ate=v(C("styled-components")),lte=ate.default.div.attrs(({radius:r})=>({style:{height:`${r*2}px`,width:`${r*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${r=>r.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`});var ute,dte,pte=m(()=>{ute=v(C("styled-components")),dte=ute.default.div`
  position: relative;
  height: inherit;
  width: inherit;
`});var Wt,N7e,iS,eF=m(()=>{Wt=v(C("styled-components")),N7e=Wt.default.div(r=>{let{desktop:e,mobile:t}=r.theme.measurements.canvasControls.corner.touchable,i=e/4,o=t/2;return Wt.css`
    position: absolute;
    width: ${e}px;
    height: ${e}px;
    ${n=>n.vertical==="top"?Wt.css`
            top: 0px;
          `:Wt.css`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?Wt.css`
            left: 0px;
          `:Wt.css`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?Wt.css`
            margin-top: -${i}px;
          `:Wt.css`
            margin-bottom: -${i}px;
          `}
  ${n=>n.horizontal==="left"?Wt.css`
            margin-left: -${i}px;
          `:Wt.css`
            margin-right: -${i}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${t}px;
      height: ${t}px;
      ${n=>n.vertical==="top"?Wt.css`
              margin-top: -${o}px;
            `:Wt.css`
              margin-bottom: -${o}px;
            `}
      ${n=>n.horizontal==="left"?Wt.css`
              margin-left: -${o}px;
            `:Wt.css`
              margin-right: -${o}px;
            `}
    }
  `}),iS=(0,Wt.default)(N7e)(r=>{let e=r.horizontal==="right"?r.borderWidth:0,t=r.vertical==="bottom"?r.borderWidth:0,i=r.horizontal==="left"?r.borderWidth:0,n=`${r.vertical==="top"?r.borderWidth:0}px ${e}px ${t}px ${i}px`,s=r.horizontal==="left"&&r.vertical==="bottom"||r.horizontal==="right"&&r.vertical==="top"?"nesw-resize":"nwse-resize",a=r.theme.measurements.canvasControls.corner.touchable.desktop/4-r.borderWidth,l=r.theme.measurements.canvasControls.corner.touchable.mobile/4+r.borderWidth;return Wt.css`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      height: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      z-index: ${c=>c.theme.measurements.zIndex.canvas.controls};
      border-color: ${c=>c.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${r.vertical==="top"?Wt.css`
            top: ${a}px;
          `:Wt.css`
            bottom: ${a}px;
          `}
      ${r.horizontal==="left"?Wt.css`
            left: ${a}px;
          `:Wt.css`
            right: ${a}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${r.vertical==="top"?Wt.css`
              margin-top: ${l}px;
            `:Wt.css`
              margin-bottom: ${l}px;
            `}
        ${r.horizontal==="left"?Wt.css`
              margin-left: ${l}px;
            `:Wt.css`
              margin-right: ${l}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `})});var mte,hte,fte=m(()=>{mte=v(C("styled-components"));Y();hte=mte.default.div.attrs(()=>({"data-test":X.Knob}))`
  position: absolute;
  height: ${r=>r.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${r=>r.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${r=>r.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${r=>r.theme.measurements.canvasControls.knob.size}px;
    height: ${r=>r.theme.measurements.canvasControls.knob.size}px;
    top: ${r=>r.theme.measurements.canvasControls.knob.size/4}px;
    left: ${r=>r.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`});var gte,bte,yte=m(()=>{gte=v(C("styled-components")),bte=gte.default.div`
  position: absolute;
  color: ${r=>r.theme.canvas.controlsOutline};
`});var _te,vte,xte=m(()=>{_te=v(C("styled-components")),vte=_te.default.div.attrs(r=>({style:{left:`${r.x}px`}}))`
  position: absolute;
  bottom: -${r=>r.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${r=>r.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${r=>r.theme.canvas.controlsOutline};
`});var Cte,Ste,wte=m(()=>{Cte=v(C("styled-components")),Ste=Cte.default.div.attrs(({height:r,width:e,theme:t})=>({style:{height:`${r+t.measurements.canvasControls.sprite.controlPadding}px`,width:`${e+t.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${r=>r.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${r=>r.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${r=>r.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`});var Tte,kte,Ete=m(()=>{Tte=v(C("styled-components"));Y();kte=Tte.default.div.attrs(()=>({"data-test":X.TextWidth}))`
  position: absolute;
  height: ${r=>r.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.controls};
  background: ${r=>r.theme.canvas.controlsColor};
  cursor: pointer;
`});var Ite,Dte,Ote=m(()=>{Ite=v(C("styled-components")),Dte=Ite.default.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${r=>r.height}px;
  width: ${r=>r.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`});var $c,oS,Rte,Fte,Ate,_d,tF=m(()=>{$c=v(C("styled-components"));Y();eF();oS=$$()?$c.css`
      transition: unset;
    `:$c.css`
      transition: all 0.4s ease-in-out;
    `,Rte=$c.default.div`
  position: absolute;
  background: ${r=>r.theme.canvas.cropBackdrop};
  z-index: ${r=>r.theme.measurements.zIndex.canvas.crop.backdrop};
  ${oS}
`,Fte=$c.default.div.attrs({"data-test":X.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${r=>r.theme.canvas.controlsOutline};
  cursor: move;
  ${oS}
`,Ate=$c.default.div`
  position: absolute;
  background: ${r=>r.theme.canvas.controlsOutline};
  z-index: ${r=>r.theme.measurements.zIndex.canvas.crop.grid};
  ${oS}
`,_d=(0,$c.default)(iS)`
  z-index: ${r=>r.theme.measurements.zIndex.canvas.controls};
  ${oS};
`});var Pte,Mte,Bte=m(()=>{Pte=v(C("styled-components")),Mte=Pte.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`});var Lte,zte,Ute=m(()=>{Lte=v(C("styled-components")),zte=Lte.default.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`});var Nte,qte,Hte=m(()=>{Nte=v(C("styled-components")),qte=Nte.default.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${r=>r.theme.webcam.background};
`});var Oe,wr=m(()=>{ZC();QR();Jee();ete();ite();ste();cte();pte();eF();fte();yte();xte();wte();Ete();Ote();tF();Bte();Ute();Hte();Oe={Index:Qee,Area:Vc,Bar:{Index:Yee,ButtonGroup:EZ},Button:{TextSecondary:JC,Float:TZ},Container:rte,Element:Mte,Wrapper:qte,Webcam:zte,Controls:{Knob:hte,Circle:lte,Corner:iS,Line:bte,Area:nte,Sprite:Ste,RotateHandle:vte,Container:dte,Wrapper:Dte,SpriteActionsWrapper:qb,SpriteActionButton:Gs,Width:kte},Crop:{Mask:Fte,GridLine:Ate,Backdrop:Rte,Control:_d}}});var to={};Ht(to,{FragmentPrecision:()=>bn,ImageFormat:()=>vd,OptionType:()=>b,RenderType:()=>Po,RendererType:()=>Pe,UniformType:()=>ne});var Po,vd,b,ne,Pe,bn,Mo=m(()=>{Po={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},vd={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"};(function(h){h.NUMBER="number",h.VECTOR2="vector2",h.COLOR_MATRIX="color-matrix",h.COLOR="color",h.ARRAY="array",h.OBJECT="object",h.STRING="string",h.BOOLEAN="boolean",h.CONFIGURABLE="configurable",h.IMAGE="image",h.FUNCTION="function",h.TEXTURE="texture",h.ALL="*"})(b||(b={}));(function(_){_.SAMPLER2D="sampler2d",_.INT="i",_.INT1="1i",_.INT2="2i",_.INT3="3i",_.INT4="4i",_.FLOAT="f",_.FLOAT1="1f",_.FLOAT2="2f",_.FLOAT_VECTOR2="2fv",_.FLOAT3="3f",_.FLOAT4="4f",_.MAT3="mat3",_.MAT3FV="mat3fv",_.MAT4="mat4"})(ne||(ne={}));(function(t){t.WEBGL="webgl",t.CANVAS="canvas"})(Pe||(Pe={}));(function(i){i.High="highp",i.Medium="mediump",i.Low="lowp"})(bn||(bn={}))});var Xb,jte,Wte=m(()=>{Xb=()=>document.createElement("canvas"),jte=(r,e)=>{let t=e||Xb();t.width=r.width,t.height=r.height;let i=t.getContext("2d");if(!i)throw new Error("Cannot render context");return i.clearRect(0,0,t.width,t.height),i.drawImage(r,0,0,r.width,r.height),t}});var hh,rF=m(()=>{hh=class{constructor(e,t,i){this.width=e;this.height=t;this.data=i}}});var Gte={};Ht(Gte,{glGet:()=>nS,webUtils:()=>W7e});var nS,q7e,H7e,j7e,W7e,Vte=m(()=>{Wte();rF();nS=r=>{let e={preserveDrawingBuffer:!0};return r.getContext("webgl",e)||r.getContext("experimental-webgl",e)},q7e=()=>{let r=nS(Xb()),e=r.getParameter(r.MAX_TEXTURE_SIZE),t=r.getExtension("WEBGL_lose_context");return t&&t.loseContext(),e},H7e=(r,e)=>{if(e instanceof hh)r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width,e.height,0,r.RGBA,r.UNSIGNED_BYTE,e.data);else{let t=jte(e);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}},j7e=r=>Boolean(r.tagName&&r.tagName.toUpperCase()==="IMG"),W7e={isSupported:()=>Boolean(nS(Xb())),isCanvas:r=>r.constructor.name==="Canvas"||Boolean(r.tagName&&r.tagName.toUpperCase()==="CANVAS"),isImage:j7e,Image:typeof window!="undefined"?window.Image:void 0,glMaxTexture:q7e,glGet:nS,createCanvas:Xb,glResize(r,e){return r},glTexImage:H7e}});var $te,$r,fh,iF,Kte,Js=m(()=>{Mo();$te=(Vte(),Gte).webUtils;$r=$te,fh=r=>r._type===Pe.WEBGL,iF=r=>Boolean(r&&"tagName"in r&&r.tagName&&r.tagName.toUpperCase()==="CANVAS"),Kte=r=>Boolean("tagName"in r&&r.tagName.toUpperCase()==="IMG")});var sS,Xte,Yte=m(()=>{sS=class{static head(e){return e[0]}static tail(e){return e.slice(1)}static last(e){return e[e.length-1]}static init(e){return e.slice(0,e.length-1)}static remove(e,t){return e.filter((i,o,n)=>!t(i,o,n))}static findIndex(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i;return-1}static find(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return e[i]}static flatten(e){return e.reduce(function(t,i){return t.concat(Array.isArray(i)?sS.flatten(i):i)},[])}static range(e,t){let i=[];if(t>e)for(let o=e;o<t;o++)i.push(o);return i}static repeat(e,t){let i=[];for(let o=0;o<t;o++)i[o]=e;return i}static zip(e,t){let i=Math.min(e.length,t.length),o=[];for(let n=0;n<i;n++)o[n]=[e[n],t[n]];return o}},Xte=sS});var Kc,G7e,es,gh=m(()=>{Kc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",G7e={encode(r){let e="",t,i,o,n,s,a,l,c=0;do t=r[c++],i=r[c++],o=r[c++],n=t>>2,s=(t&3)<<4|i>>4,a=(i&15)<<2|o>>6,l=o&63,isNaN(i)?a=l=64:isNaN(o)&&(l=64),e=e+Kc.charAt(n)+Kc.charAt(s)+Kc.charAt(a)+Kc.charAt(l),t=i=o="",n=s=a=l="";while(c<r.length);return e},decode(r){let e,t,i,o,n,s,a,l=0,c=[];if(/[^A-Za-z0-9+/=]/g.exec(r))throw new Error(`There were invalid base64 characters in the input text.
Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='
Expect errors in decoding.`);r=r.replace(/[^A-Za-z0-9+/=]/g,"");do o=Kc.indexOf(r.charAt(l++)),n=Kc.indexOf(r.charAt(l++)),s=Kc.indexOf(r.charAt(l++)),a=Kc.indexOf(r.charAt(l++)),e=o<<2|n>>4,t=(n&15)<<4|s>>2,i=(s&3)<<6|a,c.push(e),s!==64&&c.push(t),a!==64&&c.push(i),e=t=i="",o=n=s=a="";while(l<r.length);return c}},es=G7e});var xd,oF,K,Zs=m(()=>{Js();Yte();gh();xd=class{static mapRange(e,t,i){return(e-t.getMin())*i.getLength()/t.getLength()+i.getMin()}static isPlainObject(e){if(typeof e!="object"||!e)return!1;if(typeof Object.getPrototypeOf=="function"){let t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}return Object.prototype.toString.call(e)==="[object Object]"}static isMobile(){if(typeof navigator=="undefined")return!1;let e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}static isBrowser(){return typeof window!="undefined"}static values(e){let t=[];for(let i in e)t.push(e[i]);return t}static generateUUID(){let e=new Date().getTime();return typeof window.performance!="undefined"&&typeof window.performance.now=="function"&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let i=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t==="x"?i:i&3|8).toString(16)})}static resizeVectorToFit(e,t){let i=Math.min(t.x/e.x,t.y/e.y);return e.clone().multiply(i)}static resizeVectorToFill(e,t){let i=e.x/e.y,o=t.x/t.y;return i>o?t.clone().set(t.y*i,t.y):t.clone().set(t.x,t.x/i)}static isExtendable(e){return typeof e!="undefined"&&e!==null&&(typeof e=="object"||typeof e=="function")}static defaults(e,...t){let i={};for(let o in e)i[o]=e[o];for(let o=0;o<t.length;o++){let n=t[o];for(let s in n)typeof i[s]=="undefined"&&(i[s]=n[s])}return i}static deepMerge(e,...t){let i=(o,n)=>{if(n===void 0)return i(null,o);if(Array.isArray(n))return[...n];if(!xd.isPlainObject(n))return n;if(!xd.isPlainObject(o))return T({},n);let s=T({},o);return Object.keys(n).forEach(a=>{let l=n[a];l!==void 0&&(s[a]=i(o[a],l))}),s};return t.reduce(i,e)}static deepDefaults(e,...t){let i=[...t].reverse();return xd.deepMerge(...i,e)}static deepClone(e){let t={};for(let i in e)xd.isExtendable(e[i])?t[i]=xd.deepClone(e[i]):t[i]=e[i];return t}static extend(e,...t){let i={};for(let o in e)i[o]=e[o];for(let o=0;o<t.length;o++){let n=t[o];for(let s in n)i[s]=n[s]}return i}static clone(e){return this.extend({},e)}static getUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}static createCanvas(){return $r.createCanvas()}static isPowerOfTwo(e){return(e.x&e.x-1)==0&&(e.y&e.y-1)==0}static nextLowestPOT(e){for(let t=1;t<32;t<<=1)e|=e>>t;return e-(e>>1)}static nextHighestPOT(e){e--;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}static moveArrayItem(e,t,i){if(i>=e.length){let o=i-e.length;for(;o--+1;)e.push(void 0)}e.splice(i,0,e.splice(t,1)[0])}static ensureCanvasDimensions(e,t){return e.width!==t.x||e.height!==t.y?(e.width=t.x,e.height=t.y,!0):!1}static byteArrayToString(e){return e.map(t=>String.fromCharCode(t)).join("")}static clamp(e,t,i){return Math.max(t,Math.min(e,i))}static wildCardMatch(e,t){return new RegExp(`^${t.split("*").join(".*")}$`).test(e)}static flipObject(e){let t={};for(let i in e)t[e[i]]=i;return t}static ISODateString(e){function t(i){return i<10?`0${i}`:i}return`${e.getUTCFullYear()}-${t(e.getUTCMonth()+1)}-${t(e.getUTCDate())}T${t(e.getUTCHours())}:${t(e.getUTCMinutes())}:${t(e.getUTCSeconds())}Z`}static getCrossOriginValue(e){if(!e)return"anonymous";if(e!=="none")return e}static invariant(e,t){if(!e)throw new Error(t)}static executePromises(e){let t=e.length,i=0,o=[],n=[];return new Promise((s,a)=>{let l=()=>{i++,i>=t&&(n.length<=0?s(o):a(n))},c=d=>{o.push(d),l()},u=d=>{n.push(d),l()};e.forEach(d=>{d.then(c).catch(u)})})}},oF=xd;ce(oF,"Array",Xte);K=oF});var V7e,Jte,$7e,K7e,Zte,nF,me,ts=m(()=>{Zs();V7e=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],Jte=()=>console&&console.group&&console.groupCollapsed&&console.groupEnd,$7e=()=>typeof navigator!="undefined"&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/),K7e=(r,e)=>["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0",`background: ${r}; color: ${e}; line-height: 20px; padding: 4px 0; font-weight: bold`,"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"],Zte=class{constructor(e="warn",t=V7e){this._levels=[...t],this._maxLevel=this.getLevelIndexByName(e),this._consoleFuncs={trace:(...i)=>{Jte()?(console.groupCollapsed(...i),console.trace(),console.groupEnd()):console.trace(...i)}},this._levels.forEach(({name:i})=>{this[i]=(o,...n)=>{this._log(i,o,...n)}})}getLevelIndexByName(e){return K.Array.findIndex(this._levels,t=>t.name===e)}getLevelObjectByName(e){return K.Array.find(this._levels,t=>t.name===e)}canLog(e){let t=this.getLevelIndexByName(e);return t<0?!1:t>=this._maxLevel}setLevel(e){let t=this.getLevelIndexByName(e);t<0||(this._maxLevel=t)}_log(e,t,...i){let o=this.getLevelObjectByName(e);if(!o||!this.canLog(e))return;let{name:n,type:s,background:a,color:l}=o,c=i.filter(h=>h!==void 0).map(h=>h.toObject?JSON.parse(JSON.stringify(h.toObject())):h),u=this._consoleFuncs[s]||console[s]?(...h)=>console[s](...h):(...h)=>console.log(...h),d=c.length,p=K7e(a,l);if(!$7e()){let h=c.length;if(h<=0){u(`PhotoEditorSDK | ${t} `);return}if(h===1&&typeof c[0]=="string"){u(`PhotoEditorSDK | ${t} | ${c[0]}`);return}u(`PhotoEditorSDK | ${t} | `,...c);return}if(d<=0){u(`%c  %c PhotoEditorSDK %c  %c ${t} %c %c  `,...p);return}if(d===1&&typeof c[0]=="string"){u(`%c  %c PhotoEditorSDK %c  %c ${t} %c  ${c[0]}  %c  `,...p);return}Jte()?(console.groupCollapsed(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...K.Array.init(p)),u(...c),console.groupEnd()):u(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...K.Array.init(p),...c)}image(e="",t){{let i=new window.Image,o=()=>{let{width:n}=i,{height:s}=i;e&&console.log(e),console.log("%c+",`
        font-size: 1px;
        padding: 0px ${Math.floor(n/2)}px;
        line-height: ${s}px;
        background: url(${i.src});
        color: transparent;
        background-repeat: no-repeat;
        background-size: ${n}px ${s}px;`)};return i.onload=o,t instanceof window.HTMLCanvasElement?i.src=t.toDataURL():t instanceof window.Image?(i=t,o()):typeof t=="string"?i.src=t:this.log(e,t),i}}texture(e="",t){{if(!t){this.log(e,"texture: null or undefined");return}let i=t.getBaseTexture(),o=i.getRenderers(),n=K.Array.find(o,l=>l&&l.constructor.type==="webgl"),{width:s,height:a}=i.getFrame();if(n){let l=n.getContext(),c=i.getGLTextureForRenderer(n);this.logGlTexture(l,c,s,a,e)}else nF.image(e,i.getSource())}}logGlTexture(e,t,i=150,o=150,n){{e.bindTexture(e.TEXTURE_2D,t);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);let a=new Uint8Array(i*o*4);e.readPixels(0,0,i,o,e.RGBA,e.UNSIGNED_BYTE,a),e.deleteFramebuffer(s);let l=document.createElement("canvas");l.width=i,l.height=o;let c=l.getContext("2d"),u=c.createImageData(i,o);return u.data.set(a),c.putImageData(u,0,0),nF.image(n,l)}}},nF=new Zte("warn"),me=nF});var Ii,bh=m(()=>{Ii={load(r,e={cors:!0,value:"anonymous"}){return(()=>Promise.resolve([r,r]))().then(([i,o])=>this._createAndLoadImage(i,o,e))},loadImage(r,e={cors:!0,value:"anonymous"}){return this._loadWithoutExif(r,e)},_loadWithoutExif(r,e={cors:!0,value:"anonymous"}){return new Promise((t,i)=>{let o=new window.Image;o.addEventListener("load",()=>{t(o)}),o.addEventListener("error",()=>{i(new Error(`Failed to load image at ${r}`))}),e.cors&&(o.crossOrigin=e.value),o.src=r})},_createAndLoadImage(r,e,t={cors:!0,value:"anonymous"}){return new Promise((i,o)=>{{let n=this._loadWithoutExif(e,t).then(a=>i(a)),s=new Promise((a,l)=>{this._loadAsDataURL(e,t).then(c=>{let u=new window.Image;u.addEventListener("load",()=>{a(u)}),u.src=c,u.rawSource=c}).catch(c=>{n.then(u=>a(u))})});return this._stringEndsWith(e,".svg")?n.then(a=>i(a)):s.then(a=>i(a))}})},_stringEndsWith(r,e,t=r.length){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e},_loadAsDataURL(r,e={cors:!0,value:"anonymous"}){return new Promise((t,i)=>{let o=new XMLHttpRequest;o.onload=function(){let n=new FileReader;n.onloadend=function(){n.error&&i(n.error),t(n.result)},n.readAsDataURL(o.response)},o.open("GET",r),o.responseType="blob",o.withCredentials=e.cors&&e.value==="use-credentials",o.send()})},loadXHR(r,e){return new Promise((t,i)=>{let o;window.XDomainRequest?(o=new window.XDomainRequest,e&&o.overrideMimeType(e),o.onload=function(){t(o)},o.onerror=function(n){i(n)}):window.XMLHttpRequest&&(o=new window.XMLHttpRequest,e&&o.overrideMimeType(e),o.onreadystatechange=function(n){o.readyState===4&&(o.status===200?t(o):i(new Error(`HTTP Status ${o.status}`)))}),o.open("GET",r,!0),o.send()})}}});var ere=S((sSt,Qte)=>{"use strict";function X7e(r,e){return Object.prototype.hasOwnProperty.call(r,e)}Qte.exports=function(r,e,t,i){e=e||"&",t=t||"=";var o={};if(typeof r!="string"||r.length===0)return o;var n=/\+/g;r=r.split(e);var s=1e3;i&&typeof i.maxKeys=="number"&&(s=i.maxKeys);var a=r.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var c=r[l].replace(n,"%20"),u=c.indexOf(t),d,p,h,f;u>=0?(d=c.substr(0,u),p=c.substr(u+1)):(d=c,p=""),h=decodeURIComponent(d),f=decodeURIComponent(p),X7e(o,h)?Array.isArray(o[h])?o[h].push(f):o[h]=[o[h],f]:o[h]=f}return o}});var rre=S((aSt,tre)=>{"use strict";var Yb=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};tre.exports=function(r,e,t,i){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(o){var n=encodeURIComponent(Yb(o))+t;return Array.isArray(r[o])?r[o].map(function(s){return n+encodeURIComponent(Yb(s))}).join(e):n+encodeURIComponent(Yb(r[o]))}).join(e):i?encodeURIComponent(Yb(i))+t+encodeURIComponent(Yb(r)):""}});var ire=S(Jb=>{"use strict";Jb.decode=Jb.parse=ere();Jb.encode=Jb.stringify=rre()});function Zb(r){typeof r=="string"&&(r=_h(r));var e=function(t,i,o){var n=t.auth,s=t.hostname,a=t.protocol||"",l=t.pathname||"",c=t.hash||"",u=t.query||"",d=!1;n=n?encodeURIComponent(n).replace(/%3A/i,":")+"@":"",t.host?d=n+t.host:s&&(d=n+(~s.indexOf(":")?"["+s+"]":s),t.port&&(d+=":"+t.port)),u&&typeof u=="object"&&(u=i.encode(u));var p=t.search||u&&"?"+u||"";return a&&a.substr(-1)!==":"&&(a+=":"),t.slashes||(!a||o.test(a))&&d!==!1?(d="//"+(d||""),l&&l[0]!=="/"&&(l="/"+l)):d||(d=""),c&&c[0]!=="#"&&(c="#"+c),p&&p[0]!=="?"&&(p="?"+p),{protocol:a,host:d,pathname:l=l.replace(/[?#]/g,encodeURIComponent),search:p=p.replace("#","%23"),hash:c}}(r,sF.default,Y7e);return""+e.protocol+e.host+e.pathname+e.search+e.hash}function ore(r,e){var t=typeof r=="string"?_h(r):r;r=typeof r=="object"?Zb(r):r;var i=_h(e),o="";t.protocol&&!t.slashes&&(o=t.protocol,r=r.replace(t.protocol,""),o+=e[0]==="/"||r[0]==="/"?"/":""),o&&i.protocol&&(o="",i.slashes||(o=i.protocol,e=e.replace(i.protocol,"")));var n=r.match(J7e);n&&!i.protocol&&(r=r.substr((o=n[1]+(n[2]||"")).length),/^\/\/[^/]/.test(e)&&(o=o.slice(0,-1)));var s=new URL(r,cF+"/"),a=new URL(e,s).toString().replace(cF,""),l=i.protocol||t.protocol;return l+=t.slashes||i.slashes?"//":"",!o&&l?a=a.replace(aF,l):o&&(a=a.replace(aF,"")),Z7e.test(a)||~e.indexOf(".")||r.slice(-1)==="/"||e.slice(-1)==="/"||a.slice(-1)!=="/"||(a=a.slice(0,-1)),o&&(a=o+(a[0]==="/"?a.substr(1):a)),a}function yh(){}function _h(r,e,t){if(e===void 0&&(e=!1),t===void 0&&(t=!1),r&&typeof r=="object"&&r instanceof yh)return r;var i=(r=r.trim()).match(Q7e);r=i?i[1].replace(/\\/g,"/")+i[2]:r.replace(/\\/g,"/"),rqe.test(r)&&r.slice(-1)!=="/"&&(r+="/");var o=!/(^javascript)/.test(r)&&r.match(eqe),n=tqe.test(r),s="";o&&(uF.test(o[1])||(s=o[1].toLowerCase(),r=""+o[2]+o[3]),o[2]||(n=!1,uF.test(o[1])?(s=o[1],r=""+o[3]):r="//"+o[3]),o[2].length!==3&&o[2].length!==1||(s=o[1],r="/"+o[3]));var a,l=(i?i[1]:r).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),c=l&&l[1],u=new yh,d="",p="";try{a=new URL(r)}catch(_){d=_,s||t||!/^\/\//.test(r)||/^\/\/.+[@.]/.test(r)||(p="/",r=r.substr(1));try{a=new URL(r,cF)}catch(x){return u.protocol=s,u.href=s,u}}u.slashes=n&&!p,u.host=a.host===lF?"":a.host,u.hostname=a.hostname===lF?"":a.hostname.replace(/(\[|\])/g,""),u.protocol=d?s||null:a.protocol,u.search=a.search.replace(/\\/g,"%5C"),u.hash=a.hash.replace(/\\/g,"%5C");var h=r.split("#");!u.search&&~h[0].indexOf("?")&&(u.search="?"),u.hash||h[1]!==""||(u.hash="#"),u.query=e?sF.default.decode(a.search.substr(1)):u.search.substr(1),u.pathname=p+(o?function(_){return _.replace(/['^|`]/g,function(x){return"%"+x.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(x,y){try{return decodeURIComponent(y).split("").map(function(D){var E=D.charCodeAt();return E>256||/^[a-z0-9]$/i.test(D)?D:"%"+E.toString(16).toUpperCase()}).join("")}catch(D){return y}})}(a.pathname):a.pathname),u.protocol==="about:"&&u.pathname==="blank"&&(u.protocol="",u.pathname=""),d&&r[0]!=="/"&&(u.pathname=u.pathname.substr(1)),s&&!uF.test(s)&&r.slice(-1)!=="/"&&u.pathname==="/"&&(u.pathname=""),u.path=u.pathname+u.search,u.auth=[a.username,a.password].map(decodeURIComponent).filter(Boolean).join(":"),u.port=a.port,c&&!u.host.endsWith(c)&&(u.host+=c,u.port=c.slice(1)),u.href=p?""+u.pathname+u.search+u.hash:Zb(u);var f=/^(file)/.test(u.href)?["host","hostname"]:[];return Object.keys(u).forEach(function(_){~f.indexOf(_)||(u[_]=u[_]||null)}),u}var sF,Y7e,aF,lF,cF,J7e,Z7e,uF,Q7e,eqe,tqe,rqe,nre=m(()=>{sF=v(ire()),Y7e=/https?|ftp|gopher|file/;aF="http://",lF="w.w",cF=aF+lF,J7e=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,Z7e=/https?|ftp|gopher|file/;yh.prototype.parse=_h,yh.prototype.format=Zb,yh.prototype.resolve=ore,yh.prototype.resolveObject=ore;uF=/^https?|ftp|gopher|file/,Q7e=/^(.*?)([#?].*)/,eqe=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,tqe=/^([a-z0-9.+-]*:)?\/\/\/*/i,rqe=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i});var iqe,Qb,yn,vh=m(()=>{nre();iqe=5e3,Qb=typeof window!="undefined"?window:global,yn=class{constructor(e){this._url=e,this._parsedUrl=_h(this._url,!0)}_isJSONPRequest(){let{query:e}=this._parsedUrl;for(let t in e)if(e[t]==="?")return!0;return!1}load(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}_loadJSON(){return new Promise((e,t)=>{let i;Qb.XDomainRequest?(i=new Qb.XDomainRequest,i.onload=function(){let o=JSON.parse(i.responseText);e(o)},i.onerror=function(o){t(o)},i.open("GET",this._url,!0),i.send()):Qb.XMLHttpRequest&&(i=new XMLHttpRequest,i.onreadystatechange=function(o){if(i.readyState===4)if(i.status===200){let n=JSON.parse(i.responseText);e(n)}else t(new Error(`HTTP Status ${i.status}`))},i.open("GET",this._url,!0),i.send())})}_loadJSONP(){let e=!1,t=!1,i=`pesdk${Math.round(Math.random()*99999999999999)}`;return new Promise((o,n)=>{let s=this._createJSONPNode(i);Qb[i]=a=>{this._removeJSONPNode(s),e||(t=!0,o(a))},Qb.setTimeout(()=>{t||(this._removeJSONPNode(s),e=!0,n(new Error("Timeout of 5 seconds exceeded.")))},iqe)})}_createJSONPNode(e){let t=this._buildJSONPUrl(e),i=document.querySelector("head"),o=document.createElement("script");return o.src=t,i.appendChild(o),o}_removeJSONPNode(e){e.parentNode.removeChild(e)}_buildJSONPUrl(e){let{query:t}=this._parsedUrl,i=null;for(let o in t)if(t[o]==="?"){i=o;break}return delete this._parsedUrl.search,t[i]=e,Zb(this._parsedUrl)}}});var dF={};Ht(dF,{ImageLoader:()=>Ii,JSONLoader:()=>yn});var sre=m(()=>{bh();vh()});var ro,ee,xh=m(()=>{ro=class{constructor(e,t,i,o=1){this.r=e,this.g=t,this.b=i,this.a=o}toRGBA(){return`rgba(${[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255),this.a.toFixed(2)].join(",")})`}set(e,t,i,o=this.a){return this.r=e,this.g=t,this.b=i,this.a=o,this}toRGB(){return[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)]}toHex(){return`#${[this._componentToHex(Math.round(this.r*255)),this._componentToHex(Math.round(this.g*255)),this._componentToHex(Math.round(this.b*255))].join("")}`}toGLColor(){return[this.r,this.g,this.b,this.a]}toArray(){return this.toGLColor()}toRGBGLColor(){return[this.r,this.g,this.b]}toHSV(){let e=Math.max(this.r,this.g,this.b),t=Math.min(this.r,this.g,this.b),i,o,n=e,s=e-t;if(o=e===0?0:s/e,e===t)i=0;else{switch(e){case this.r:i=(this.g-this.b)/s,this.g<this.b&&(i+=6);break;case this.g:i=(this.b-this.r)/s+2;break;case this.b:i=(this.r-this.g)/s+4;break}i/=6}return[i,o,n]}fromHSV(e,t,i){return this.copy(ro.fromHSV(e,t,i)),this}static fromHSV(e,t,i,o=1){let[n,s,a]=[],l=Math.floor(e*6),c=e*6-l,u=i*(1-t),d=i*(1-c*t),p=i*(1-(1-c)*t);switch(l%6){case 0:n=i,s=p,a=u;break;case 1:n=d,s=i,a=u;break;case 2:n=u,s=i,a=p;break;case 3:n=u,s=d,a=i;break;case 4:n=p,s=u,a=i;break;case 5:n=i,s=u,a=d;break}return new ro(n,s,a,o)}static fromArray(e){return new ro(e[0],e[1],e[2],e[3])}static fromHex(e){let[t,i,o]=e.match(/[0-9A-fa-f]{1,2}/g);return new ro(parseInt(t,16)/255,parseInt(i,16)/255,parseInt(o,16)/255,1)}clone(){return new ro(this.r,this.g,this.b,this.a)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}minus(e){return this.r-=e.r,this.g-=e.g,this.b-=e.b,this.a-=e.a,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this.a*=e,this}divideScalar(e){return this.r/=e,this.g/=e,this.b/=e,this.a/=e,this}clamp(e,t){return this.r=Math.min(Math.max(this.r,e),t),this.g=Math.min(Math.max(this.g,e),t),this.b=Math.min(Math.max(this.b,e),t),this.a=Math.min(Math.max(this.a,e),t),this}mix(e,t){return this.r=(1-t)*this.r+t*e.r,this.g=(1-t)*this.g+t*e.g,this.b=(1-t)*this.b+t*e.b,this.a=(1-t)*this.a+t*e.a,this}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}_componentToHex(e){let t=e.toString(16);return t.length===1?`0${t}`:t}toString(){return`Color(${this.r}, ${this.g}, ${this.b}, ${this.a})`}static get TRANSPARENT(){return new ro(0,0,0,0)}static get WHITE(){return new ro(1,1,1,1)}static get BLACK(){return new ro(0,0,0,1)}static get RED(){return new ro(1,0,0,1)}static get BLUE(){return new ro(0,0,1,1)}static get GREEN(){return new ro(0,1,0,1)}},ee=ro});var oqe,are,Di,Ch=m(()=>{ts();oqe=12,are=class{constructor(){this._maxListeners=oqe,this._events={},this._pipeDestinations=[]}pipeEvents(e){this._pipeDestinations.push(e)}unpipeEvents(e){let t=this._pipeDestinations.indexOf(e);t!==-1&&this._pipeDestinations.splice(t,1)}on(e,t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);if(typeof t!="function")throw new TypeError;let i=this._events[e]||(this._events[e]=[]);return i.indexOf(t)!==-1?this:(i.push(t),this._maxListeners&&i.length>this._maxListeners&&(me.warn("EventEmitter",`Possible memory leak detected, added ${i.length} \`${e}\` listeners (current limit is ${this._maxListeners})`),typeof console!="undefined"&&console.trace()),this)}once(e,t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);let i=this;function o(){i.off(e,o),t.apply(null,arguments)}return this.on(e,o)}off(e,...t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);if(t.length===0)return this._events[e]=null,this;let i=t[0];if(typeof i!="function")throw new TypeError;let o=this._events[e];if(!o||!o.length)return this;let n=o.indexOf(i);return n===-1?this:(o.splice(n,1),this)}emit(e,...t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);this._pipeDestinations.forEach(o=>{o.emit(e,...t)});let i=this._events[e];return!i||!i.length?!1:(i.slice(0).forEach(o=>o.apply(null,t)),!0)}setMaxListeners(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e}},Di=are});var Cd,pF=m(()=>{ts();Cd={checkFramebufferStatus(r,e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER),i={[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT]:"Incomplete attachment",[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]:"Missing attachment",[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS]:"Incomplete dimensions",[e.FRAMEBUFFER_UNSUPPORTED]:"Framebuffer unsupported"};t!==e.FRAMEBUFFER_COMPLETE&&me.warn(r,`Framebuffer incomplete: ${i[t]}`)},determineGPUName(r){let e=null,t=null;r||(t=document.createElement("canvas"),r=t.getContext("experimental-webgl")||t.getContext("webgl"));let i=r&&r.getExtension("WEBGL_debug_renderer_info");return i&&(e=r.getParameter(i.UNMASKED_RENDERER_WEBGL),t&&t.remove()),e},isGPUBlacklisted(r,e=null){return!1}}});var aS,lre=m(()=>{aS=r=>typeof r=="number"});var nqe,Sd,lS,xe,vl=m(()=>{lre();nqe=r=>r instanceof xe,Sd=(r,e)=>nqe(r)?{x:r.x,y:r.y}:{x:r,y:aS(e)?e:r},lS=(r,e)=>(t,i)=>{let{x:o,y:n}=Sd(t,i);return r.x=e(r.x,o),r.y=e(r.y,n),r},xe=class{constructor(e=0,t=0){this.add=lS(this,(e,t)=>e+t);this.subtract=lS(this,(e,t)=>e-t);this.divide=lS(this,(e,t)=>e/t);this.multiply=lS(this,(e,t)=>e*t);this.x=e,this.y=t}set(e,t){let{x:i,y:o}=Sd(e,t);return this.x=i,this.y=o,this}clone(){return new xe(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}clamp(e,t){return aS(e)&&(e=new xe(e,e)),aS(t)&&(t=new xe(t,t)),e&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),t&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y)),this}dot(e,t){let{x:i,y:o}=Sd(e,t);return this.x*i+this.y*o}equals(e,t){let{x:i,y:o}=Sd(e,t);return i===this.x&&o===this.y}flip(){let e=this.x;return this.x=this.y,this.y=e,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}floor(){return this.x|=0,this.y|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y)}min(){return Math.min(this.x,this.y)}max(){return Math.max(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2({ x: ${this.x}, y: ${this.y} })`}roundDecimal(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this}asArray(e=!1){return e?[this.y,this.x]:[this.x,this.y]}static fromObject(e){return new xe(e.x,e.y)}static get NULL(){return new xe(0,0)}}});var io,mF=m(()=>{vl();io=class{constructor(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;this.reset()}multiply(e){let t,i,o,n,s,a;return t=this.a*e.a+this.b*e.c,i=this.a*e.b+this.b*e.d,o=this.c*e.a+this.d*e.c,n=this.c*e.b+this.d*e.d,s=this.tx*e.a+this.ty*e.c+e.tx,a=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=i,this.c=o,this.d=n,this.tx=s,this.ty=a,this}applyToVector(e){let{x:t,y:i}=e;return e=e.clone(),e.x=this.a*t+this.c*i+this.tx,e.y=this.b*t+this.d*i+this.tx,e}applyInverseToVector(e){let t=1/(this.a*this.d+this.c*-this.b),{x:i,y:o}=e;return e=e.clone(),e.x=this.d*t*i+-this.c*t*o+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*o+-this.b*t*i+(-this.ty*this.a+this.tx*this.b)*t,e}rectangleToCoordinates(e,t=new xe(0,0)){let i=e.width*(1-t.x),o=e.width*-t.x,n=e.height*(1-t.y),s=e.height*-t.y,a=[];return a.push(new xe(this.a*o+this.c*s+this.tx,this.d*s+this.b*o+this.ty)),a.push(new xe(this.a*i+this.c*s+this.tx,this.d*s+this.b*i+this.ty)),a.push(new xe(this.a*i+this.c*n+this.tx,this.d*n+this.b*i+this.ty)),a.push(new xe(this.a*o+this.c*n+this.tx,this.d*n+this.b*o+this.ty)),a}reset(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}toArray(){let e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return typeof Float32Array=="undefined"?e:new Float32Array(e)}toString(){return`Matrix({ a: ${this.a}, b: ${this.b}, c: ${this.c}, d: ${this.d}, tx: ${this.tx}, ty: ${this.ty} })`}static get IDENTITY(){return new io}}});var Pt,hF=m(()=>{vl();Pt=class{constructor(e=0,t=0,i=0,o=0){this.x=0;this.y=0;this.width=0;this.height=0;this.x=e,this.y=t,this.width=i,this.height=o}set(e,t,i,o){return this.x=e,this.y=t,this.width=i,this.height=o,this}clone(){return new Pt(this.x,this.y,this.width,this.height)}copy(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}equals(e,t,i,o){return e instanceof Pt?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&t===this.y&&i===this.width&&o===this.height}translate(e,t){let{x:i,y:o}=Sd(e,t);return this.x+=i,this.y+=o,this}scale(e,t){let{x:i,y:o}=Sd(e,t);return this.width*=i,this.height*=o,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}getPosition(){return new xe(this.x,this.y)}getSize(){return new xe(this.width,this.height)}insetBy(e,t){return this.x+=e,this.y+=t,this.width-=2*e,this.height-=2*t,this}intersects(e){let t=new xe(this.x,this.y),i=new xe(this.x+this.width,this.y+this.height),o=new xe(e.x,e.y),n=new xe(e.x+e.width,e.y+e.height);return!(o.x>i.x||t.x>n.x||n.y<t.y||i.y<o.y)}toString(){return`Rectangle({ x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height} })`}static FromDiagonalPoints(e,t){let i=!1;t.x-e.x<0&&(i=!0);let o=i?t:e,n=i?e:t,s=n.x-o.x,a=n.y-o.y;return new Pt(o.x,o.y,s,a)}}});var Sh,sqe,Xc,fr=m(()=>{ts();Mo();xh();Ch();pF();mF();hF();vl();Zs();Sh=2e3,sqe=5,Xc=sqe*4});var wd,cS=m(()=>{fr();wd=class{constructor(){this._position=new xe(0,0),this._scale=new xe(1,1),this._pivot=new xe(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new io,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new Pt(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new Pt(0,0,1,1),this._filterRectangle=new Pt(0,0,0,0)}renderWebGL(e){me.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}renderCanvas(e){me.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}updateTransform(){let e=this._parent?this._parent.getWorldTransform():io.IDENTITY,t=this._worldTransform,i=Math.sin(this._rotation),o=Math.cos(this._rotation);t.a=o*this._scale.x,t.b=i*this._scale.x,t.c=-i*this._scale.y,t.d=o*this._scale.y,t.tx=this._position.x,t.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(t.tx-=this._pivot.x*t.a+this._pivot.y*t.c,t.ty-=this._pivot.x*t.b+this._pivot.y*t.d),t.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}addShader(e){this._shaders.push(e)}removeShader(e){let t=this._shaders.indexOf(e);return t!==-1?(this._shaders.splice(t,1),!0):!1}removeShaderAt(e){return this._shaders[e]?(this._shaders.splice(e,1),!0):!1}getBounds(){return this._bounds.clone()}getPosition(){return this._position}setPosition(e,t){this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getScale(){return this._scale}setScale(e,t){this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getPivot(){return this._pivot}setPivot(e,t){this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getRotation(){return this._rotation}setRotation(e){this._rotation=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getAlpha(){return this._alpha}setAlpha(e){this._alpha=e}getWorldAlpha(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}getWorldTransform(){return this._worldTransform}getParent(){return this._parent}setParent(e){this._parent=e}getFilterRectangle(){return this._filterRectangle}setFilterRectangle(e){this._filterRectangle.copy(e)}isVisible(){return this._visible}setVisible(e){this._visible=e}}});var Qs,uS=m(()=>{fr();cS();Qs=class extends wd{constructor(){super();this._children=[],this._filters=[]}addFilter(e){this._filters.push(e)}removeFilter(e){let t=this._filters.indexOf(e);return t!==-1?(this._filters.splice(t,1),!0):!1}setFilters(e){this._filters=e}addChild(e){let t=e.getParent();t instanceof Qs&&t.removeChild(e),e.setParent(this),this._children.push(e)}prependChild(e){let t=e.getParent();t instanceof Qs&&t.removeChild(e),e.setParent(this),this._children.unshift(e)}hasChild(e){return this._children.indexOf(e)!==-1}removeChild(e){let t=this._children.indexOf(e);t!==-1?(this._children.splice(t,1),e.setParent(null)):me.info(this.constructor.name,"Tried to remove a child that does not exist")}clearChildren(){this._children=[]}renderWebGL(e){if(!this._visible)return;let t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach(i=>{i.renderWebGL(e)}),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}_renderWebGL(e){}renderCanvas(e){if(!this._visible)return;let t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach(i=>{i.renderCanvas(e)}),this._filters&&this._filters.length&&t.popFilters()}_renderCanvas(e){}updateTransform(){super.updateTransform(),this._children.forEach(e=>{e.updateTransform()})}getLocalBounds(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}getBounds(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}getChildren(){return this._children}getFilters(){return this._filters}dispose(){}}});function cre(r,e,t,i,o,n){if(!(isNaN(n)||n<1)){n|=0;var s=r.data,a,l,c,u,d,p,h,f,_,x,y,D,E,F,N,R,B,se,A,q,ue,_e,ye,De,Kt=n+n+1,oe=i-1,J=o-1,Z=n+1,we=Z*(Z+1)/2,ve=new ure,Ne,Ae=ve;for(c=1;c<Kt;c++)Ae=Ae.next=new ure,c==Z&&(Ne=Ae);Ae.next=ve;var Ke=null,Tt=null;h=p=0;var Xt=aqe[n],qi=lqe[n];for(l=0;l<o;l++){for(R=B=se=A=f=_=x=y=0,D=Z*(q=s[p]),E=Z*(ue=s[p+1]),F=Z*(_e=s[p+2]),N=Z*(ye=s[p+3]),f+=we*q,_+=we*ue,x+=we*_e,y+=we*ye,Ae=ve,c=0;c<Z;c++)Ae.r=q,Ae.g=ue,Ae.b=_e,Ae.a=ye,Ae=Ae.next;for(c=1;c<Z;c++)u=p+((oe<c?oe:c)<<2),f+=(Ae.r=q=s[u])*(De=Z-c),_+=(Ae.g=ue=s[u+1])*De,x+=(Ae.b=_e=s[u+2])*De,y+=(Ae.a=ye=s[u+3])*De,R+=q,B+=ue,se+=_e,A+=ye,Ae=Ae.next;for(Ke=ve,Tt=Ne,a=0;a<i;a++)s[p+3]=ye=y*Xt>>qi,ye!==0?(ye=255/ye,s[p]=(f*Xt>>qi)*ye,s[p+1]=(_*Xt>>qi)*ye,s[p+2]=(x*Xt>>qi)*ye):s[p]=s[p+1]=s[p+2]=0,f-=D,_-=E,x-=F,y-=N,D-=Ke.r,E-=Ke.g,F-=Ke.b,N-=Ke.a,u=h+((u=a+n+1)<oe?u:oe)<<2,R+=Ke.r=s[u],B+=Ke.g=s[u+1],se+=Ke.b=s[u+2],A+=Ke.a=s[u+3],f+=R,_+=B,x+=se,y+=A,Ke=Ke.next,D+=q=Tt.r,E+=ue=Tt.g,F+=_e=Tt.b,N+=ye=Tt.a,R-=q,B-=ue,se-=_e,A-=ye,Tt=Tt.next,p+=4;h+=i}for(a=0;a<i;a++){for(B=se=A=R=_=x=y=f=0,p=a<<2,D=Z*(q=s[p]),E=Z*(ue=s[p+1]),F=Z*(_e=s[p+2]),N=Z*(ye=s[p+3]),f+=we*q,_+=we*ue,x+=we*_e,y+=we*ye,Ae=ve,c=0;c<Z;c++)Ae.r=q,Ae.g=ue,Ae.b=_e,Ae.a=ye,Ae=Ae.next;for(d=i,c=1;c<=n;c++)p=d+a<<2,f+=(Ae.r=q=s[p])*(De=Z-c),_+=(Ae.g=ue=s[p+1])*De,x+=(Ae.b=_e=s[p+2])*De,y+=(Ae.a=ye=s[p+3])*De,R+=q,B+=ue,se+=_e,A+=ye,Ae=Ae.next,c<J&&(d+=i);for(p=a,Ke=ve,Tt=Ne,l=0;l<o;l++)u=p<<2,s[u+3]=ye=y*Xt>>qi,ye>0?(ye=255/ye,s[u]=f*Xt>>qi,s[u+1]=_*Xt>>qi,s[u+2]=x*Xt>>qi):s[u]=s[u+1]=s[u+2]=0,f-=D,_-=E,x-=F,y-=N,D-=Ke.r,E-=Ke.g,F-=Ke.b,N-=Ke.a,u=a+((u=l+Z)<J?u:J)*i<<2,f+=R+=Ke.r=s[u],_+=B+=Ke.g=s[u+1],x+=se+=Ke.b=s[u+2],y+=A+=Ke.a=s[u+3],Ke=Ke.next,D+=q=Tt.r,E+=ue=Tt.g,F+=_e=Tt.b,N+=ye=Tt.a,R-=q,B-=ue,se-=_e,A-=ye,Tt=Tt.next,p+=i}}}function ure(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var aqe,lqe,dre=m(()=>{"use strict";aqe=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],lqe=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]});var ea,ey,fF=m(()=>{xh();ea=class{constructor(e=1,t=0,i=0,o=0,n=0,s=0,a=1,l=0,c=0,u=0,d=0,p=0,h=1,f=0,_=0,x=0,y=0,D=0,E=1,F=0){this.set(e,t,i,o,n,s,a,l,c,u,d,p,h,f,_,x,y,D,E,F)}set(e,t,i,o,n,s,a,l,c,u,d,p,h,f,_,x,y,D,E,F){this.a=e,this.b=t,this.c=i,this.d=o,this.e=n,this.f=s,this.g=a,this.h=l,this.i=c,this.j=u,this.k=d,this.l=p,this.m=h,this.n=f,this.o=_,this.p=x,this.q=y,this.r=D,this.s=E,this.t=F}reset(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}apply(e){let t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,i=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,o=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,n=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new ee(t,i,o,n)}multiply(e){let t,i,o,n,s,a,l,c,u,d,p,h,f,_,x,y,D,E,F,N,R=e,B=this;return t=R.a*B.a+R.b*B.f+R.c*B.k+R.d*B.p,i=R.a*B.b+R.b*B.g+R.c*B.l+R.d*B.q,o=R.a*B.c+R.b*B.h+R.c*B.m+R.d*B.r,n=R.a*B.d+R.b*B.i+R.c*B.n+R.d*B.s,a=R.f*B.a+R.g*B.f+R.h*B.k+R.i*B.p,l=R.f*B.b+R.g*B.g+R.h*B.l+R.i*B.q,c=R.f*B.c+R.g*B.h+R.h*B.m+R.i*B.r,u=R.f*B.d+R.g*B.i+R.h*B.n+R.i*B.s,p=R.k*B.a+R.l*B.f+R.m*B.k+R.n*B.p,h=R.k*B.b+R.l*B.g+R.m*B.l+R.n*B.q,f=R.k*B.c+R.l*B.h+R.m*B.m+R.n*B.r,_=R.k*B.d+R.l*B.i+R.m*B.n+R.n*B.s,y=R.p*B.a+R.q*B.f+R.r*B.k+R.s*B.p,D=R.p*B.b+R.q*B.g+R.r*B.l+R.s*B.q,E=R.p*B.c+R.q*B.h+R.r*B.m+R.s*B.r,F=R.p*B.d+R.q*B.i+R.r*B.n+R.s*B.s,s=R.a*B.e+R.b*B.j+R.c*B.o+R.d*B.t+R.e,d=R.f*B.e+R.g*B.j+R.h*B.o+R.i*B.t+R.j,x=R.k*B.e+R.l*B.j+R.m*B.o+R.n*B.t+R.o,N=R.p*B.e+R.q*B.j+R.r*B.o+R.s*B.t+R.t,this.a=t,this.b=i,this.c=o,this.d=n,this.e=s,this.f=a,this.g=l,this.h=c,this.i=u,this.j=d,this.k=p,this.l=h,this.m=f,this.n=_,this.o=x,this.p=y,this.q=D,this.r=E,this.s=F,this.t=N,this}clone(){let e=new ea;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}getOffsets(){return[this.e,this.j,this.o,this.t]}toString(){return`ColorMatrix( ${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e},
      ${this.f}, ${this.g}, ${this.h}, ${this.i}, ${this.j},
      ${this.k}, ${this.l}, ${this.m}, ${this.n}, ${this.o},
      ${this.p}, ${this.q}, ${this.r}, ${this.s}, ${this.t} )`}toArray(){return"abcdefghijklmnopqrst".split("").map(e=>this[e])}static get IDENTITY(){return new ea}static createBrightnessMatrix(e){let t=new ea;return t.e=e,t.j=e,t.o=e,t}static createContrastMatrix(e){let t=new ea,i=(1-e)/2;return t.a=t.g=t.m=e,t.e=t.j=t.o=i,t}static createSaturationMatrix(e=1){let t=new ea,i=1-e,o=.213*i,n=.715*i,s=.072*i;return t.a=o+e,t.b=n,t.c=s,t.f=o,t.g=n+e,t.h=s,t.k=o,t.l=n,t.m=s+e,t}static createExposureMatrix(e=0){let t=Math.pow(2,e);return new ea(t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0)}static createLinearMatrix(e=1,t=0){let i=new ea;return i.a=i.g=i.m=e,i.e=i.j=i.o=t,i}},ey=ea});var wh,qe,Th=m(()=>{Mo();Js();xh();Ch();fF();vl();Zs();wh=class extends Di{constructor(e={},t={}){super();this.availableOptions=T(T({},Object.getPrototypeOf(this).availableOptions),t),this._onConfigurableUpdate=this._onConfigurableUpdate.bind(this),this._initOptions(e)}_buildConfigError(e){let t="";return this.constructor.name&&(t=`${this.constructor.name}: `),t+=e,new Error(t)}_onOptionsChange(){}validateSettings(){return new Promise((e,t)=>{for(let i in this.availableOptions)if(this.availableOptions[i].required&&typeof this._options[i]=="undefined")return t(this._buildConfigError(`Option \`${i}\` is required.`));e()})}_initOptions(e={}){this._options={};let t,i,o,n=this;for(t in this.availableOptions){if(o=t.charAt(0).toUpperCase()+t.slice(1),i=this.availableOptions[t],[b.STRING,b.NUMBER,b.BOOLEAN,b.OBJECT,b.VECTOR2,b.COLOR,b.CONFIGURABLE,b.COLOR_MATRIX,b.ARRAY,b.IMAGE,b.FUNCTION,b.ALL].indexOf(i.type)===-1)throw this._buildConfigError(`Unknown option type: \`${i.type}\``);if(function(l){n[`set${o}`]=function(c,u,d){n.setOption(l,c,u,d)},n[`get${o}`]=function(){return n.getOption(l)}}(t),i.type===b.CONFIGURABLE&&(this._options[t]=new wh(void 0,i.structure||{}),this._options[t].on("update",this._onConfigurableUpdate)),!(t in e)||typeof e[t]=="undefined")if(typeof i.default!="undefined"){let a=i.default;typeof i.default=="function"&&(a=i.default()),this[`set${o}`](a,!1,!0)}else i.type!==b.CONFIGURABLE&&(this._options[t]=void 0)}for(t in e){if(typeof this.availableOptions[t]=="undefined")throw new Error(`Invalid option: ${t}`);typeof e[t]!="undefined"&&(o=t.charAt(0).toUpperCase()+t.slice(1),this[`set${o}`](e[t],!1,!0))}}set(e,t=!0){Object.keys(e).forEach(i=>{this.setOption(i,e[i],!1)}),this._onOptionsChange(),t&&this.emit("update",this,e)}getOption(e){return this._options[e]}hasOption(e){return!!this.availableOptions[e]}getOptionDefault(e){let t=this.availableOptions[e];if(!t)throw new Error(`Invalid option: ${e}`);return t.default}resetOptions(){this.set(this.getDefaultOptions())}getDefaultOptions(){let e={};for(let t in this.availableOptions){let i=this.availableOptions[t].default;typeof i!="undefined"&&(e[t]=i)}return e}getOptions(){return T({},this._options)}equals(e){let t=e.getOptions();return this.optionsEqual(t)}optionsEqual(e){for(let t in e){let i=e[t];if(!this._optionEquals(t,i))return!1}return!0}_optionEquals(e,t){if(typeof this.availableOptions[e]=="undefined")throw new Error(`Invalid option: ${e}`);let o=this.availableOptions[e].type,n=this._options[e];if(n===t)return!0;if(typeof t=="undefined"||typeof n=="undefined")return!1;switch(o){case b.OBJECT:return typeof n.optionsEqual=="function"?n.optionsEqual(t._options):n===t;case b.STRING:case b.NUMBER:case b.BOOLEAN:case b.FUNCTION:case"*":return n===t;case b.VECTOR2:return n.equals(t);case b.COLOR:case b.COLOR_MATRIX:return t.equals(n);case b.CONFIGURABLE:return n.optionsEqual(t);case b.ARRAY:return this._arrayOptionEquals(e,t);case b.IMAGE:return n.src===t.src}}_arrayOptionEquals(e,t){let i=this._options[e];if(t.length!==i.length)return!1;let o=!0;for(let n=0;n<i.length;n++){let s=i[n],a=t[n];if(s instanceof wh){if(typeof a=="undefined"||!s.optionsEqual(a)){o=!1;break}}else if(a!==s){o=!1;break}}return o}serializeOptions(e=Object.keys(this._options),t=!1){let i={};return e.forEach(o=>{if(typeof this.availableOptions[o]=="undefined")return Log.warn(`Trying to serialize a key that does not exist: ${o}`);this.availableOptions[o].serializable!==!1&&(i[o]=this.serializeOption(o,t))}),i}serializeOption(e,t=!1){let i=this.availableOptions[e],o=i.type,n=this._options[e];if(!n)return n;if(i.serializable===!1)throw new Error(`Option \`${e}\` is not serializable.`);switch(o){case b.STRING:case b.NUMBER:case b.BOOLEAN:case b.OBJECT:case b.FUNCTION:case b.ALL:return n;case b.VECTOR2:return t?n.toObject():n.clone();case b.COLOR:case b.COLOR_MATRIX:return t?n.toArray():n.clone();case b.CONFIGURABLE:return n.serializeOptions(void 0,t);case b.ARRAY:return n.slice(0);case b.IMAGE:return t?n.src:n}}setOption(e,t,i=!0,o=!1){let n=this.availableOptions[e];if(!n)throw new Error(`Invalid option: ${e}`);if(typeof n.setter!="undefined"&&(t=n.setter.call(this,t,o)),typeof n.validation!="undefined"&&n.validation(t),t===null||typeof t=="undefined"){if(n.required)throw this._buildConfigError(`Option \`${e}\` is required.`);this._options[e]=t}else switch(n.type){case b.STRING:{if(typeof t!==b.STRING)throw this._buildConfigError(`Option \`${e}\` has to be a string.`);let{available:s}=n;if(typeof s!="undefined"&&s.indexOf(t)===-1)throw this._buildConfigError(`Invalid value for \`${e}\` (valid values are: ${n.available.join(", ")})`);this._options[e]=t;break}case b.NUMBER:if(typeof t!==b.NUMBER)throw this._buildConfigError(`Option \`${e}\` has to be a number.`);this._options[e]=t;break;case b.BOOLEAN:if(typeof t!==b.BOOLEAN)throw this._buildConfigError(`Option \`${e}\` has to be a boolean.`);this._options[e]=t;break;case b.VECTOR2:if(!(t instanceof xe)&&!(typeof t=="object"&&"x"in t&&"y"in t))throw this._buildConfigError(`Option \`${e}\` has to be an instance of Vector2 or an Object holding x and y values.`);t instanceof xe?this._options[e]=t.clone():this._options[e]=xe.fromObject(t);break;case b.COLOR:if(!(t instanceof ee))throw this._buildConfigError(`Option \`${e}\` has to be an instance of Color.`);this._options[e]=t;break;case b.COLOR_MATRIX:if(!(t instanceof ey))throw this._buildConfigError(`Option \`${e}\` has to be an instance of ColorMatrix.`);this._options[e]=t.clone();break;case b.FUNCTION:if(typeof t!="function")throw this._buildConfigError(`Option \`${e}\` has to be a function.`);this._options[e]=t;break;case b.OBJECT:case"*":this._options[e]=t;break;case b.IMAGE:{let{Image:s}=$r;if(typeof t=="string"){let a=new s;Kte(a)&&(a.crossOrigin=K.getCrossOriginValue(n.crossOrigin)),a.src=t,this._options[e]=a}else if(t instanceof s||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement)this._options[e]=t;else throw this._buildConfigError(`Option \`${e}\` has to be an Image, Canvas or String.`);break}case b.CONFIGURABLE:t instanceof wh?this._options[e]=t:this._options[e].set(t);break;case b.ARRAY:if(!(t instanceof Array))throw this._buildConfigError(`Option \`${e}\` has to be an Array.`);this._options[e]=t.slice(0);break;default:throw this._buildConfigError(`Unknown option type: \`${n.type}\``)}i&&(this._onOptionsChange(),this.emit("update",this,{[e]:t}))}_onConfigurableUpdate(...e){this.emit("update",...e)}hasChanges(){let e=this.getDefaultOptions();return!this.optionsEqual(e)}},qe=wh});var ty,gF=m(()=>{Mo();fr();fr();ty=class{constructor(e,t,i,o={},n=[]){this._program=null;this._renderer=e,this._vertexSource=t,this._fragmentSource=i,this._uniforms=o,this._uniformLocations={},this._attributes=n,this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}_init(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}_onContextChange(){this._init()}setupBuffers(e,t){let i=this._renderer.getContext();i.bindBuffer(i.ARRAY_BUFFER,e),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),i.vertexAttribPointer(this._attributeLocations.a_position,2,i.FLOAT,!1,Xc,0),i.vertexAttribPointer(this._attributeLocations.a_texCoord,2,i.FLOAT,!1,Xc,2*4),i.vertexAttribPointer(this._attributeLocations.a_color,4,i.UNSIGNED_BYTE,!0,Xc,4*4)}syncUniforms(){Object.keys(this._uniforms).forEach(e=>{this.syncUniform(e)})}syncUniform(e){let t=this._renderer.getContext(),i=this._uniforms[e],o=this._uniformLocations[e];switch(i.type){case ne.SAMPLER2D:t.uniform1i(o,i.value);break;case ne.INT:case ne.INT1:t.uniform1i(o,i.value);break;case ne.INT2:t.uniform2i(o,i.value[0],i.value[1]);break;case ne.INT3:t.uniform3i(o,i.value[0],i.value[1],i.value[2]);break;case ne.INT4:t.uniform4i(o,i.value[0],i.value[1],i.value[2],i.value[3]);break;case ne.FLOAT:case ne.FLOAT1:t.uniform1f(o,i.value);break;case ne.FLOAT2:t.uniform2f(o,i.value[0],i.value[1]);break;case ne.FLOAT3:t.uniform3f(o,i.value[0],i.value[1],i.value[2]);break;case ne.FLOAT4:t.uniform4f(o,i.value[0],i.value[1],i.value[2],i.value[3]);break;case ne.FLOAT_VECTOR2:t.uniform2fv(o,i.value);break;case ne.MAT3:case ne.MAT3FV:t.uniformMatrix3fv(o,!1,i.value);break;case ne.MAT4:t.uniformMatrix4fv(o,!1,i.value);break;default:me.warn(this.constructor.name,`Unknown uniform type: ${i.type}`)}}_cacheAttributeLocations(){let e=this._renderer.getContext();this._attributes.forEach(t=>{this._program&&(this._attributeLocations[t]=e.getAttribLocation(this._program,t))})}_cacheUniformLocations(){let e=this._renderer.getContext();Object.keys(this._uniforms).forEach(i=>{if(this._program){let o=e.getUniformLocation(this._program,i);o&&(this._uniformLocations[i]=o)}})}_addPrecisionToSource(e){let t=this._renderer.getMaxFloatPrecision(),i=bn.Medium;return K.isMobile()&&t===bn.High&&(i=bn.High),`precision ${i} float;
${e}`}_compile(){let e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;let i=this._addPrecisionToSource(this._fragmentSource),o=this._compileShader(e.FRAGMENT_SHADER,i);this._fragmentShader=o;let n=e.createProgram();if(!n)return;if(e.attachShader(n,t),e.attachShader(n,o),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS))this._program=n;else{let a=e.getProgramInfoLog(n);e.isContextLost()&&(a="WebGL context lost"),e.deleteProgram(n),me.error(this.constructor.name,`WebGL program linking error: ${a}`)}}_compileShader(e,t){let i=this._renderer.getContext(),o=i.createShader(e);if(!o)throw new Error(`Cannot create shared: ${JSON.stringify(e)}`);if(i.shaderSource(o,t),i.compileShader(o),!i.getShaderParameter(o,i.COMPILE_STATUS)){let s=i.getShaderInfoLog(o);i.isContextLost()&&(s="WebGL context lost"),i.deleteShader(o),me.error(this.constructor.name,`WebGL shader compilation error: ${s}`)}return o}setUniform(e,t,i=!1){this._uniforms[e].value=t,i&&this.syncUniform(e)}setUniforms(e,t=!1){Object.keys(e).forEach(i=>{this._uniforms[i].value=e[i],t&&this.syncUniform(i)})}getUniforms(){return this._uniforms}getAttributes(){return this._attributes}getAttributeLocations(){return this._attributeLocations}getProgram(){return this._program}dispose(){let e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._renderer.off("context",this._onContextChange)}}});var mre,pre=m(()=>{mre=`uniform sampler2D u_image;
varying vec2 v_texCoord;
varying vec4 v_color;

void main() {
  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;
}
`});var fre,hre=m(()=>{fre=`attribute vec2 a_position;
attribute vec2 a_texCoord;
attribute vec4 a_color;
varying vec2 v_texCoord;
varying vec4 v_color;
uniform mat3 u_projMatrix;

void main() {
  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);
  v_texCoord = a_texCoord;
  v_color = vec4(a_color.rgb * a_color.a, a_color.a);
}
`});var dqe,xl,bF,gre=m(()=>{Mo();fr();gF();pre();hre();dqe=new io,xl={vertexSource:fre,fragmentSource:mre,uniforms:{u_image:{type:ne.SAMPLER2D,value:0},u_projMatrix:{type:ne.MAT3,value:dqe.toArray()}},attributes:["a_position","a_texCoord","a_color"]},bF=class extends ty{constructor(e,t=xl.vertexSource,i=xl.fragmentSource){super(e,t,i,xl.uniforms,xl.attributes)}}});var yF=m(()=>{gF();gre()});var rs,kh=m(()=>{dre();Mo();Th();fr();yF();Js();rs=class extends qe{constructor(e={},t={}){super(e,t);this._initOptions(e)}_initOptions(e={}){this._shaders=[],this._availableUniforms=xl.uniforms,this._attributes=xl.attributes,this._vertexSource=xl.vertexSource,this._fragmentSource=xl.fragmentSource,this._initUniforms(),super._initOptions(e)}_initUniforms(){this._uniforms={};for(let e in this._availableUniforms){let t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(let e in this.availableOptions){let t=this.availableOptions[e];t.uniformType?this._uniforms[`u_${e}`]={type:t.uniformType,value:t.default||null}:me.trace(this.constructor.name,`Option \`${e}\` is missing a \`uniformType\`!`)}}setOption(e,t,i=!0){super.setOption(e,t,i);let o=t,n=this.availableOptions[e];if(!n.uniformType)return;let s=`u_${e}`;switch(n.type){case b.COLOR:n.uniformType===ne.FLOAT4?o=t.toGLColor():n.uniformType===ne.FLOAT3&&(o=t.toRGBGLColor());break;case b.VECTOR2:o=[t.x,t.y];break;case b.COLOR_MATRIX:{o=[t.a,t.b,t.c,t.d,t.f,t.g,t.h,t.i,t.k,t.l,t.m,t.n,t.p,t.q,t.r,t.s];let a=[t.e,t.j,t.o,t.t];this._uniforms[`${s}_vec`]={value:a,type:ne.FLOAT4}}}this.setUniform(s,o)}setUniform(e,t,i=!1){this._uniforms[e].value=t}setUniforms(e,t=!1){Object.entries(e).forEach(([i,o])=>{this._uniforms[i].value=o,t&&this.syncUniform(i)})}syncUniform(e){this._shaders.forEach(t=>{t.syncUniform(e)})}syncUniforms(){this._shaders.forEach(e=>{e.syncUniforms()})}getShaderForRenderer(e){let{id:t}=e;this._shaders||(this._shaders=[]);let i=this._shaders[t];return i||(i=new ty(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t]=i),i}apply(e,t,i,o=!1){fh(e)?this._applyWebGL(e,t,i,o):this._applyCanvas(e,t,i,o)}_applyWebGL(e,t,i,o=!1){let n=e.getContext(),s=this.getShaderForRenderer(e);e.setRenderTarget(i),o&&i.clear(),e.setShader(s);let a=e.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",a),s.syncUniforms(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=i.getContext();me.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),s.clearRect(0,0,n.width,n.height),s.drawImage(n,0,0)}dispose(){this._shaders.forEach(e=>e.dispose()),this._shaders=[]}_blurImage(e,t,i){let o=10,n=e.getCanvas(),s=Math.min(1,o/(i*Math.min(n.width,n.height))),a=K.createCanvas();a.width=Math.round(n.width*s),a.height=Math.round(n.height*s);let l=a.getContext("2d");l.drawImage(n,0,0,n.width,n.height,0,0,a.width,a.height);let c=i*Math.min(a.width,a.height),u=l.getImageData(0,0,a.width,a.height);cre(u,0,0,a.width,a.height,c),l.putImageData(u,0,0),t.getContext().drawImage(a,0,0,a.width,a.height,0,0,n.width,n.height)}}});var yre,bre=m(()=>{yre=`uniform sampler2D u_image;
varying vec2 v_texCoord;
varying vec4 v_color;

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);
}
`});var dS,_re=m(()=>{kh();bre();dS=class extends rs{constructor(){super();this._fragmentSource=yre}}});var xre,vre=m(()=>{xre=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform vec4 u_color;

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;
}
`});var hqe,fqe,_F,Cre,Sre=m(()=>{fr();kh();vre();({OptionType:hqe,UniformType:fqe}=to),_F=class extends rs{constructor(...e){super(...e);this._fragmentSource=xre}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),{color:l}=this._options,c=s.getImageData(0,0,n.width,n.height),u=a.getImageData(0,0,n.width,n.height),d=n.width*n.height,p=new ee,h=new ee;for(let f=0;f<d*4;f+=4){p.set(c.data[f]/255,c.data[f+1]/255,c.data[f+2]/255,c.data[f+3]/255),h.set(u.data[f]/255,u.data[f+1]/255,u.data[f+2]/255,u.data[f+3]/255);let _=h.r+p.a*(p.r-h.r);u.data[f]=(_+p.a*(l.r-_))*255;let x=h.g+p.a*(p.g-h.g);u.data[f+1]=(x+p.a*(l.g-x))*255;let y=h.b+p.a*(p.b-h.b);u.data[f+2]=(y+p.a*(l.b-y))*255}a.putImageData(u,0,0)}};_F.prototype.availableOptions={color:{type:hqe.COLOR,default:ee.WHITE,uniformType:fqe.FLOAT4}};Cre=_F});var Tre,wre=m(()=>{Tre=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform vec4 u_color;
uniform int u_mode;
vec3 W = vec3(0.2125, 0.7154, 0.0721);
const float EPSILON = 0.0000001;
void main() {
    vec4 color = texture2D(u_image, v_texCoord); // Is premultiplied.
    color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha.
    vec4 newColor;
    if (u_mode == 0) {
        newColor = vec4(color.rgb, 1.0); // We use alpha 1.0 becaue color is not premultiplied.
        newColor *= color.a; // Premultiply the result
    } else if (u_mode == 1) {
        newColor = vec4(u_color.rgb, 1.0); // Use alpha 1.0 because it is not premultiplied.
        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.
    } else if (u_mode == 2) {
        float luminance = dot(color.rgb, W); // Convert to color to gray value.
        newColor = vec4(vec3(luminance) * u_color.rgb, 1.0); // Colorize and with alpha 1.0 because it is not premultiplied.
        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.
    }
    gl_FragColor = newColor;
}`});var kre,Ere,Yc,Ire,Dre=m(()=>{fr();kh();wre();({OptionType:kre,UniformType:Ere}=to),Yc=class extends rs{constructor(...e){super(...e);this._fragmentSource=Tre}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{mode:c,color:u}=this._options,{r:d,g:p,b:h,a:f}=u,_=[.2125,.7154,.0721];switch(c){case Yc.MODES.SOLID:for(let x=0;x<n.width*n.height;x++){let y=x*4;l.data[y]+=(d*255-l.data[y])*f,l.data[y+1]+=(p*255-l.data[y+1])*f,l.data[y+2]+=(h*255-l.data[y+2])*f}break;case Yc.MODES.COLORIZED:for(let x=0;x<n.width*n.height;x++){let y=x*4,D=l.data[y]/255*_[0]+l.data[y+1]/255*_[1]+l.data[y+2]/255*_[2],E=new ee(D*d,D*p,D*h);l.data[y]+=(E.r*255-l.data[y])*f,l.data[y+1]+=(E.g*255-l.data[y+1])*f,l.data[y+2]+=(E.b*255-l.data[y+2])*f}break}a.putImageData(l,0,0)}};Yc.MODES={NONE:0,SOLID:1,COLORIZED:2};Yc.prototype.availableOptions={color:{type:kre.COLOR,default:ee.WHITE,uniformType:Ere.FLOAT4},mode:{type:kre.NUMBER,default:Yc.MODES.NONE,uniformType:Ere.INT}};Ire=Yc});var Rre,Ore=m(()=>{Rre=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform sampler2D u_overlayImage;
uniform int u_blendMode;
uniform float u_alpha;

const float EPSILON = 0.000001;

vec4 overlay(vec4 a, vec4 b) {
    vec3 result = mix(
          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),
          2.0 * a.rgb * b.rgb,
          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)
      );
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 hardLight(vec4 b, vec4 a) {
    vec3 result = mix(
          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),
          2.0 * a.rgb * b.rgb,
          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)
      );
    return mix(b, vec4(result, b.a), u_alpha * a.a);
}

vec4 softLight(vec4 a, vec4 b) {
    vec3 result = mix(
          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),
          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),
          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)
      );
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 multiply(vec4 a, vec4 b) {
    vec3 result = a.rgb * b.rgb;
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 darken(vec4 a, vec4 b) {
    vec3 result = min(a.rgb, b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 lighten(vec4 a, vec4 b) {
    vec3 result = max(a.rgb, b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 screen(vec4 a, vec4 b) {
    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 colorBurn(vec4 a, vec4 b) {
    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 normal(vec4 a, vec4 b) {
    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);
}

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);

  vec4 resultColor;
  if (u_blendMode == 0) {
    resultColor = normal(color, overlayColor);
  } else if (u_blendMode == 1) {
    resultColor = overlay(color, overlayColor);
  } else if (u_blendMode == 2) {
    resultColor = hardLight(color, overlayColor);
  } else if (u_blendMode == 3) {
    resultColor = softLight(color, overlayColor);
  } else if (u_blendMode == 4) {
    resultColor = multiply(color, overlayColor);
  } else if (u_blendMode == 5) {
    resultColor = darken(color, overlayColor);
  } else if (u_blendMode == 6) {
    resultColor = lighten(color, overlayColor);
  } else if (u_blendMode == 7) {
    resultColor = screen(color, overlayColor);
  } else if (u_blendMode == 8) {
    resultColor = colorBurn(color, overlayColor);
  }
  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);
}
`});var pS,vF,xF,Oi,Fre,Are=m(()=>{fr();kh();Ore();({OptionType:pS,UniformType:vF}=to),xF=1e-6,Oi=class extends rs{constructor(...e){super(...e);this._fragmentSource=Rre,this._lastImage=null}_applyCanvas(e,t,i,o=!1){let n=this._options.overlayTexture.getRenderTarget().getContext(),s=t.getCanvas(),a=t.getContext(),l=i.getContext(),c=a.getImageData(0,0,s.width,s.height),u=n.getImageData(0,0,s.width,s.height),{blendMode:d,alpha:p}=this._options,h=new ee,f=new ee,_=new ee;for(let x=0;x<s.width*s.height*4;x+=4){h.set(c.data[x]/255,c.data[x+1]/255,c.data[x+2]/255,c.data[x+3]/255),f.set(u.data[x]/255,u.data[x+1]/255,u.data[x+2]/255,u.data[x+3]/255);let y,D,E,F,N,R,B,se,A;switch(d){case Oi.BLEND_MODES.NORMAL:_.set(h.r+f.a*p*(f.r-h.r),h.g+f.a*p*(f.g-h.g),h.b+f.a*p*(f.b-h.b),h.a);break;case Oi.BLEND_MODES.OVERLAY:y=1-2*(1-h.r)*(1-f.r),D=2*h.r*f.r,E=y+(h.r<.5?1:0)*(D-y),F=1-2*(1-h.g)*(1-f.g),N=2*h.g*f.g,R=F+(h.g<.5?1:0)*(N-F),B=1-2*(1-h.b)*(1-f.b),se=2*h.b*f.b,A=B+(h.b<.5?1:0)*(se-B),_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break;case Oi.BLEND_MODES.HARD_LIGHT:y=1-2*(1-f.r)*(1-h.r),D=2*f.r*h.r,E=y+(f.r<.5?1:0)*(D-y),F=1-2*(1-f.g)*(1-h.g),N=2*f.g*h.g,R=F+(f.g<.5?1:0)*(N-F),B=1-2*(1-f.b)*(1-h.b),se=2*f.b*h.b,A=B+(f.b<.5?1:0)*(se-B),_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break;case Oi.BLEND_MODES.SOFT_LIGHT:y=2*h.r*(1-f.r)+(2*f.r-1)*Math.sqrt(h.r),D=2*h.r*f.r+h.r*h.r*(1-2*f.r),E=y+(f.r<.5?1:0)*(D-y),F=2*h.g*(1-f.g)+(2*f.g-1)*Math.sqrt(h.g),N=2*h.g*f.g+h.g*h.g*(1-2*f.g),R=F+(f.g<.5?1:0)*(N-F),B=2*h.b*(1-f.b)+(2*f.b-1)*Math.sqrt(h.b),se=2*h.b*f.b+h.b*h.b*(1-2*f.b),A=B+(f.b<.5?1:0)*(se-B),_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break;case Oi.BLEND_MODES.MULTIPLY:E=h.r*f.r,R=h.g*f.g,A=h.b*f.b,_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break;case Oi.BLEND_MODES.DARKEN:E=Math.min(h.r,f.r),R=Math.min(h.g,f.g),A=Math.min(h.b,f.b),_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break;case Oi.BLEND_MODES.LIGHTEN:E=Math.max(h.r,f.r),R=Math.max(h.g,f.g),A=Math.max(h.b,f.b),_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break;case Oi.BLEND_MODES.SCREEN:E=1-(1-h.r)*(1-f.r),R=1-(1-h.g)*(1-f.g),A=1-(1-h.b)*(1-f.b),_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break;case Oi.BLEND_MODES.COLOR_BURN:E=Math.max(0,Math.min(1,1-(1-h.r)/Math.max(f.r,xF))),R=Math.max(0,Math.min(1,1-(1-h.g)/Math.max(f.g,xF))),A=Math.max(0,Math.min(1,1-(1-h.b)/Math.max(f.b,xF))),_.set(h.r+f.a*p*(E-h.r),h.g+f.a*p*(R-h.g),h.b+f.a*p*(A-h.b),h.a);break}c.data[x]=_.r*255,c.data[x+1]=_.g*255,c.data[x+2]=_.b*255,c.data[x+3]=_.a*255}l.putImageData(c,0,0)}};Oi.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8};Oi.prototype.availableOptions={blendMode:{type:pS.NUMBER,default:Oi.BLEND_MODES.NORMAL,uniformType:vF.INT},overlayImage:{type:pS.NUMBER,required:!0,uniformType:vF.SAMPLER2D},overlayTexture:{type:pS.OBJECT,required:!0},alpha:{type:pS.NUMBER,default:1,uniformType:vF.FLOAT}};Fre=Oi});var CF={};Ht(CF,{ColorOverlayFilter:()=>Cre,OverlayFilter:()=>Fre,TintFilter:()=>Ire,UnpremultiplyFilter:()=>dS});var Pre=m(()=>{_re();Sre();Dre();Are()});var _n,Jc,Mre,Eh,lr,Ih=m(()=>{fr();Js();(function(o){o[o.Nearest=0]="Nearest",o[o.Linear=1]="Linear",o[o.Bilinear=2]="Bilinear",o[o.Trilinear=3]="Trilinear"})(_n||(_n={}));(function(i){i[i.ClampToEdge=0]="ClampToEdge",i[i.Repeat=1]="Repeat",i[i.MirroredRepeat=2]="MirroredRepeat"})(Jc||(Jc={}));Mre={[1]:"LINEAR",[0]:"NEAREST",[2]:"LINEAR_MIPMAP_NEAREST",[3]:"LINEAR_MIPMAP_LINEAR"},Eh=class extends Di{constructor(e){super();this._renderers=[];this._glTextures={};this._dirty=!0;this._mipMapping=!1;this._glUnit=0;this._magFilter=Eh.DefaultMagFilter;this._minFilter=Eh.DefaultMinFilter;this._repeatX=0;this._repeatY=0;this._pixelRatio=1;this._loaded=!1;this._frame=new Pt(0,0,100,100);this._onSourceLoaded=this._onSourceLoaded.bind(this),this._source=e,this._loadSource()}resizeTo(e){this._frame.width===e.x&&this._frame.height===e.y||(this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0)}_loadSource(){let e=this._source;if(!!e){if($r.isCanvas(e))return this._onSourceLoaded();if(e.complete)return this._onSourceLoaded();e.addEventListener&&e.addEventListener("load",this._onSourceLoaded)}}_onSourceLoaded(){this._loaded=!0,this.emit("loaded"),this.update()}_updateGLFilters(){if(!this._source)return;let e=new xe(this._source.width,this._source.height);K.isPowerOfTwo(e)?(me.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=Eh.TrilinearFilter,this._mipMapping=!0):(this._minFilter=Eh.LinearFilter,this._mipMapping=!1)}update(){!this._source||((this._frame.width!==this._source.width||this._frame.height!==this._source.height)&&(this._frame=new Pt(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update"))}getRenderers(){return[...this._renderers]}getGLFilter(e,t){switch(t){case"min":return e[Mre[this._minFilter]];case"mag":return e[Mre[this._magFilter]]}}isLoaded(){return this._loaded}setLoaded(e){this._loaded=e}getSource(){return this._source}setSource(e){this._source=e}getGLTextureForRenderer(e){return this._glTextures[e.id]}setGLTextureForRenderer(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e}getFrame(){return this._frame}setFrame(e){this._frame=e}getDimensions(){return new xe(this._frame.width,this._frame.height)}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getGLUnit(){return this._glUnit}setGLUnit(e){this._glUnit=e}setMinFilter(e){this._minFilter=e}getMinFilter(){return this._minFilter}setMagFilter(e){this._magFilter=e}getMagFilter(){return this._magFilter}setRepeatX(e){this._repeatX=e}getRepeatX(){return this._repeatX}setRepeatY(e){this._repeatY=e}getRepeatY(){return this._repeatY}getGLRepeat(e,t){switch(t==="x"?this.getRepeatX():this.getRepeatY()){case 0:return e.CLAMP_TO_EDGE;case 1:return e.REPEAT;case 2:return e.MIRRORED_REPEAT;default:return 0}}isDirty(){return this._dirty}setDirty(e){this._dirty=e}disposeGLTextures(){this._renderers.forEach(e=>{fh(e)&&this.disposeGLTexturesForRenderer(e)})}disposeGLTexturesForRenderer(e){if(!this._glTextures[e.id])return;e.getContext().deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id]}isMipMappingEnabled(){return this._mipMapping}setMipMappingEnabled(e){this._mipMapping=e}dispose(){this.disposeGLTextures(),this._source=void 0}},lr=Eh;lr.NearestFilter=0,lr.LinearFilter=1,lr.BilinearFilter=2,lr.TrilinearFilter=3,lr.DefaultMagFilter=0,lr.DefaultMinFilter=1,lr.Repeat=1,lr._id=0});var Cl,ry=m(()=>{fr();Ih();Js();Cl=class{constructor(e,t,i,o=$r.createCanvas(),n){this._width=e,this._height=t,this._pixelRatio=i,this._baseTexture=new lr,this._canvas=o;let s=n||this._canvas.getContext("2d");if(!s)throw new Error("Cannot get canvas context");this._context=s,this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filters:[]}]}clear(){let e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}resizeTo(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)}getCanvas(){return this._canvas}getContext(){return this._context}getFilterStack(){return this._filterStack}getWidth(){return this._width}getHeight(){return this._height}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getDimensions(){return new xe(this._width,this._height)}getBaseTexture(){return this._baseTexture}dispose(){delete this._canvas,delete this._context,this._baseTexture.dispose()}}});var Td,mS=m(()=>{fr();ry();Td=class{constructor(e){this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._textures=[],this._textureFrame=new Pt(0,0,e.getWidth(),e.getHeight())}resizeTo(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach(t=>t.resizeTo(e))}pushFilters(e,t){this._currentFrame=e.getBounds();let i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),this._filterStack.push({renderTarget:i,filters:t}),i.clear()}popFilters(){let e=this._filterStack.pop();if(!e)return;let{filters:t,renderTarget:i}=e,o=this._filterStack[this._filterStack.length-1],n=i,s=o.renderTarget;return t.length===1?(t[0].apply(this._renderer,n,s),this._textures.push(n)):this._applyFilters(t,n,s),t}_applyFilters(e,t,i){let o=t,n=this._getOrCreateRenderTarget(!0),s=e[e.length-1];e.forEach(a=>{if(a===s)a.apply(this._renderer,o,i);else{a.apply(this._renderer,o,n);let c=o;o=n,n=c}}),this._textures.push(o),this._textures.push(n)}_getOrCreateRenderTarget(e=!1){let t=this._textures.pop();return t||(t=new Cl(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t}setFilterStack(e){this._filterStack=e}dispose(){}}});var oy=S((Bre,iy)=>{(function(){var r,e,t,i,o,n;typeof performance!="undefined"&&performance!==null&&performance.now?iy.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(iy.exports=function(){return(r()-o)/1e6},e=process.hrtime,r=function(){var s;return s=e(),s[0]*1e9+s[1]},i=r(),n=process.uptime()*1e9,o=i-n):Date.now?(iy.exports=function(){return Date.now()-t},t=Date.now()):(iy.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(Bre)});var Lre,zre,hS,SF=m(()=>{fr();Lre=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oy(),zre=class{constructor(e){this._context=e,this._tracking=!1;let t=this;for(let i in e)typeof e[i]=="function"?this[i]=function(...n){let s=e[i];if(!t._tracking)return s.apply(e,n);let a=Lre(),l=s.apply(e,n),c=Lre()-a,u={functionName:i,arguments:n,duration:c};return t._trackedCalls.push(u),l}:this._makePropertyWrapper(i)}_makePropertyWrapper(e){if(["_context","_trackedCalls","_tracking"].indexOf(e)!==-1)return;let i=this._context;this.__defineGetter__(e,()=>i[e]),this.__defineSetter__(e,o=>{i[e]=o})}startFrame(){this._tracking=!0,this._trackedCalls=[]}endFrame(){let e="Rendering";me.log(e,"Frame rendering results:"),me.log(e,`Context calls: ${this._trackedCalls.length}`);let t={};this._trackedCalls.forEach(({functionName:o,duration:n})=>{t[o]=t[o]||{totalDuration:0,calls:0},t[o].totalDuration+=n,t[o].calls++});let i=[];for(let o in t){let n=t[o];n.averageDuration=n.totalDuration/n.calls,i.push({functionName:o,data:n})}i.sort((o,n)=>n.data.totalDuration-o.data.totalDuration),i=i.slice(0,3),i.forEach(o=>{me.log(e,`${o.functionName}: ${o.data.calls} calls, ${o.data.totalDuration.toFixed(2)}ms`)})}},hS=zre});var ny,wF=m(()=>{fr();ny=class extends Di{constructor(e=800,t=600,i){super();this._maxTextureSize=null;this._options=U(T({debug:!1,transparent:!1,clearColor:ee.TRANSPARENT},i),{pixelRatio:1}),this.setMaxListeners(0),this._width=e,this._height=t,this._dimensions=new xe(this._width,this._height),this._maxTextureSize=null,this._pixelRatio=this._options.pixelRatio,this._canvas=this._options.canvas,this._clearColor=this._options.transparent?ee.TRANSPARENT:this._options.clearColor||ee.BLACK}setCanvas(e){let t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new xe(this._width,this._height))}getCanvas(){return this._canvas}_onBeforeContext(){}resizeTo(e,t=!0){this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&this._canvas&&(this._canvas.width=this._width,this._canvas.height=this._height,"style"in this._canvas&&(this._canvas.style.width=`${this._width/this._pixelRatio}px`,this._canvas.style.height=`${this._height/this._pixelRatio}px`)),this._dimensions=e.clone()}_createContext(){me.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}_setupContext(){me.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}render(e){me.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}getMaxDimensions(){return null}getContext(){return this._context}getWidth(){return this._dimensions.x}getHeight(){return this._dimensions.y}getDimensions(){return this._dimensions}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(e)}getMaxTextureSize(){return this._maxTextureSize}getFilterManager(){return this._filterManager}setFilterManager(e){this._filterManager=e}isOfType(e){return this._type===e}dispose(){me.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}});var Ure,TF,Dh,Nre=m(()=>{cS();fr();mS();ry();SF();Js();wF();({RendererType:Ure}=to),TF=class extends ny{constructor(e=800,t=600,i){super(e,t,T({},i));this.id=0;this.setCanvas((i==null?void 0:i.canvas)||$r.createCanvas()),this._type=Ure.CANVAS}_createContext(){let t=this._canvas.getContext("2d");if(!!t)return this._options.debug&&(t=new hS(t)),this.id=TF.contextId++,this._context=t,this.emit("context",t),t}_setupContext(){let e=this._context;"imageSmoothingEnabled"in e?e.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(t=>{e[t]&&(e[t]=!0)}),this._defaultRenderTarget=new Cl(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new Td(this)}render(e){let t=this._renderTarget.getContext(),i=e.getParent();e.setParent(new wd),e.updateTransform(),i&&e.setParent(i),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;let{width:o,height:n}=this._canvas;t.clearRect(0,0,o,n),this._clearColor.a!==0&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,o,n),t.restore()),this.renderDisplayObject(e,this._renderTarget)}renderDisplayObject(e,t){let i=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(i)}getCurrentRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getContext(){return this._renderTarget.getContext()}dispose(){this._filterManager.dispose()}},Dh=TF;Dh.contextId=0,Dh.type=Ure.CANVAS});var qre,Hre=m(()=>{qre=r=>{if(typeof window!="undefined"){let{WebGLDebugUtils:e}=window;if(e){let t=(i,o)=>{console.error(`gl.${i}(${e.glFunctionArgsToString(i,o)})`)};r=e.makeDebugContext(r,null,t)}}return r}});var kF,jre=m(()=>{kF=class{constructor(e){this.vertices=new Float32Array([0,0,100,0,100,100,0,100]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.vertexBuffer=null;this.indexBuffer=null;this.gl=e,this.initBuffers(),this.uploadBuffers()}map(e,t){let{x:i,y:o}=t;this.uvs[2]=t.width/e.width,this.uvs[4]=this.uvs[2],this.uvs[5]=t.height/e.height,this.uvs[7]=this.uvs[5],this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+t.width,this.vertices[3]=o,this.vertices[4]=this.vertices[2],this.vertices[5]=o+t.height,this.vertices[6]=i,this.vertices[7]=this.vertices[5],this.uploadBuffers()}getVertexBuffer(){return this.vertexBuffer}getIndexBuffer(){return this.indexBuffer}dispose(){this.cleanBuffer()}initBuffers(){let{gl:e}=this;this.cleanBuffer(),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,(8+8+16)*4,e.DYNAMIC_DRAW),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)}uploadBuffers(){let{gl:e}=this;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.bufferSubData(e.ARRAY_BUFFER,8*4,this.uvs),e.bufferSubData(e.ARRAY_BUFFER,(8+8)*4,this.colors)}cleanBuffer(){let{gl:e}=this;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)}}});var Sl,sy=m(()=>{fr();Ih();Sl=class{constructor(e,t,i,o,n=!1){this._renderer=e,this._gl=e.getContext(),this._width=t,this._height=i,this._frame=null,this._pixelRatio=o,this._projectionMatrix=new io,this._mipMapping=!1,this._baseTexture=new lr;let s=this._baseTexture.getFrame();s.width=t,s.height=i,this._baseTexture.setPixelRatio(o),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=n,this._filterStack=[{renderTarget:this,filters:[]}],n||this._initFrameBuffer()}resizeTo(e){this._width=e.x|0,this._height=e.y|0,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}_getMinFilter(){let e=lr.DefaultMinFilter;return this._mipMapping&&(e=lr.TrilinearFilter),e}_getMagFilter(){return lr.DefaultMagFilter}_resizeTexture(){let e=this._gl,t=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&Cd.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e);let o=new xe(this._width,this._height);K.isPowerOfTwo(o)?(me.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}activate(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)}clear(e=ee.TRANSPARENT){let t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&Cd.checkFramebufferStatus("WebGLRenderTarget#clear",t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}_calculateProjectionMatrix(){let e=this._projectionMatrix;e.reset();let t=this._frame||new Pt(0,0,this._width,this._height),{x:i,y:o}=t;this._isRoot?(e.a=1/this._width*2,e.d=-1/this._height*2,e.tx=-1-i*e.a,e.ty=1-o*e.d):(e.a=1/this._width*2,e.d=1/this._height*2,e.tx=-1-i*e.a,e.ty=-1-o*e.d)}_initFrameBuffer(){let e=this._gl;this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new xe(this._width,this._height)),this._renderer._options.debug&&Cd.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}getProjectionMatrix(){return this._projectionMatrix}getTexture(){return this._texture}getFrame(){return this._frame}setFrame(e){this._frame=e}getFilterStack(){return this._filterStack}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e,this._isRoot||this._resizeTexture()}getBaseTexture(){return this._baseTexture}dispose(){let e=this._gl;this._baseTexture.dispose(),this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null)}}});var ay,EF=m(()=>{fr();jre();Js();sy();ay=class{constructor(e){this._renderer=e,this._filterStack=[],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new Pt(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}resizeTo(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach(t=>t.resizeTo(e))}getFilterStack(){return this._filterStack}setFilterStack(e){this._filterStack=e}_getOrCreateRenderTarget(e=!1){let t=this._renderTargets.pop();return t||(t=new Sl(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),this._currentFrame&&t.setFrame(this._currentFrame),e&&t.clear(),t}pushFilters(e,t){let i=e.getBounds();this._currentFrame=i;let o=e.getFilterRectangle();o.width>0&&o.height>0&&(this._currentFrame=o);let n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),n.clear(),this._filterStack.push({renderTarget:n,filters:t})}popFilters(){let e=this._filterStack.pop();if(!e)return;let{filters:t,renderTarget:i}=e,o=this._filterStack[this._filterStack.length-1],n=i,s=o.renderTarget,a=n.getFrame();a&&this._quad.map(this._textureFrame,a);let l=t[0].getShaderForRenderer(this._renderer),c=this._quad.getVertexBuffer(),u=this._quad.getIndexBuffer(),d=this._renderer.getContext();d.bindBuffer(d.ARRAY_BUFFER,c),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,u);let p=l.getAttributeLocations();return d.vertexAttribPointer(p.a_position,2,d.FLOAT,!1,0,0),d.vertexAttribPointer(p.a_texCoord,2,d.FLOAT,!1,0,2*4*4),d.vertexAttribPointer(p.a_color,4,d.FLOAT,!1,0,4*4*4),this._renderer.updateTexture(n.getBaseTexture(),!1),t.length===1?(t[0].apply(this._renderer,n,s),this._renderTargets.push(n)):this._applyFilters(t,n,s),t}_applyFilters(e,t,i){let o=t,n=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(n.getBaseTexture(),!1);let s=e[e.length-1];e.forEach(a=>{if(a===s)a.apply(this._renderer,o,i,!0);else{a.apply(this._renderer,o,n,!0);let c=o;o=n,n=c}}),this._renderTargets.push(o),this._renderTargets.push(n)}_onContextChange(){this._renderTargets.length=0,fh(this._renderer)&&(this._quad&&this._quad.dispose(),this._quad=new kF(this._renderer.getContext()))}dispose(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(e=>{e.dispose()})}}});var Wre=S((Ewt,IF)=>{var ly=function(){function r(u){return i.appendChild(u.dom),u}function e(u){for(var d=0;d<i.children.length;d++)i.children[d].style.display=d===u?"block":"none";t=u}var t=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(u){u.preventDefault(),e(++t%i.children.length)},!1);var o=(performance||Date).now(),n=o,s=0,a=r(new ly.Panel("FPS","#0ff","#002")),l=r(new ly.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=r(new ly.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:i,addPanel:r,showPanel:e,begin:function(){o=(performance||Date).now()},end:function(){s++;var u=(performance||Date).now();if(l.update(u-o,200),u>n+1e3&&(a.update(1e3*s/(u-n),100),n=u,s=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){o=this.end()},domElement:i,setMode:e}};ly.Panel=function(r,e,t){var i=1/0,o=0,n=Math.round,s=n(window.devicePixelRatio||1),a=80*s,l=48*s,c=3*s,u=2*s,d=3*s,p=15*s,h=74*s,f=30*s,_=document.createElement("canvas");_.width=a,_.height=l,_.style.cssText="width:80px;height:48px";var x=_.getContext("2d");return x.font="bold "+9*s+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=t,x.fillRect(0,0,a,l),x.fillStyle=e,x.fillText(r,c,u),x.fillRect(d,p,h,f),x.fillStyle=t,x.globalAlpha=.9,x.fillRect(d,p,h,f),{dom:_,update:function(y,D){i=Math.min(i,y),o=Math.max(o,y),x.fillStyle=t,x.globalAlpha=1,x.fillRect(0,0,a,p),x.fillStyle=e,x.fillText(n(y)+" "+r+" ("+n(i)+"-"+n(o)+")",c,u),x.drawImage(_,d+s,p,h-s,f,d,p,h-s,f),x.fillRect(d+h-s,p,s,f),x.fillStyle=t,x.globalAlpha=.9,x.fillRect(d+h-s,p,s,n((1-y/D)*f))}}};typeof IF=="object"&&(IF.exports=ly)});var Zc,fS,Gre=m(()=>{Zc=v(Wre()),fS=class{constructor(e){this._context=e,this._domAvailable=typeof document!="undefined",this._hookIntoContext(),this._textures={},this._framebuffers={},this._programs={},this._shaders={},this._buffers={},this._boundTexture=null,this._id=0,this._enums={},this._setupStats(),this._createEnumMap(),this._updateMemoryStats=this._updateMemoryStats.bind(this),this._updateMemoryStats()}_createEnumMap(){for(let e in this._context){let t=this._context[e];typeof t=="number"&&(this._enums[t]=e)}}_enumValueToString(e){let t=this._enums[e];return typeof t=="undefined"?e:t}_setupStats(){!this._domAvailable||(this._stats=new Zc.default,this._stats.showPanel(3),this._memPanel=this._stats.addPanel(new Zc.default.Panel("MB [WebGL]","#43ADEB","#282828")),this._texPanel=this._stats.addPanel(new Zc.default.Panel("Textures","#43ADEB","#282828")),this._bufPanel=this._stats.addPanel(new Zc.default.Panel("Buffers","#43ADEB","#282828")),this._fboPanel=this._stats.addPanel(new Zc.default.Panel("FBOs","#43ADEB","#282828")),this._prgPanel=this._stats.addPanel(new Zc.default.Panel("Programs","#43ADEB","#282828")),this._shdPanel=this._stats.addPanel(new Zc.default.Panel("Shaders","#43ADEB","#282828")))}_updatePanel(e){if(!!this._domAvailable){switch(this._stats.begin(),e){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50);break}this._stats.end()}}getTexturesCount(){return Object.keys(this._textures).length}getBuffersCount(){return Object.keys(this._buffers).length}getFBOCount(){return Object.keys(this._framebuffers).length}getProgramCount(){return Object.keys(this._programs).length}getShaderCount(){return Object.keys(this._shaders).length}_updateMemoryStats(){if(!this._domAvailable)return;let e=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(e,400),setTimeout(this._updateMemoryStats,1e3)}_getMemoryUsage(){let e=0;for(let t in this._textures)e+=this._textures[t].memory;for(let t in this._buffers)e+=this._buffers[t].memory;return e}_hookIntoContext(){for(let e in this._context)typeof this._context[e]=="function"?this[e]=function(...i){let o=this._context[e];return this._trackGLCall(o,e,i)}:this._makePropertyWrapper(e)}_makePropertyWrapper(e){if(["_context"].indexOf(e)!==-1)return;let i=this._context;this.__defineGetter__(e,()=>i[e]),this.__defineSetter__(e,o=>{i[e]=o})}_trackGLCall(e,t,i){let o=["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"],n;o.indexOf(t)!==-1?n=this[`_${t}`](i):n=e.apply(this._context,i);let s=this._context.getError();if(s!==0){let a=i.join(", ");a.length>100&&(a=`${a.substr(0,100)}...`),console.error(new Error(`WebGL Error ${this._enumValueToString(s)} in ${t}(${a})`))}return n}_createProgram(){let e=this._context.createProgram();return e._wmmId=this._id++,this._programs[e._wmmId]=e,this._updatePanel("prg"),e}_deleteProgram([e]){!e||!this._programs[e._wmmId]||(delete this._programs[e._wmmId],this._context.deleteProgram(e),this._updatePanel("prg"))}_createShader([e]){let t=this._context.createShader(e);return t._wmmId=this._id++,this._shaders[t._wmmId]=t,this._updatePanel("shd"),t}_deleteShader([e]){!e||!this._shaders[e._wmmId]||(delete this._shaders[e._wmmId],this._context.deleteShader(e),this._updatePanel("shd"))}_createFramebuffer(){let e=this._context.createFramebuffer();return e._wmmId=this._id++,this._framebuffers[e._wmmId]=e,this._updatePanel("fbo"),e}_deleteFramebuffer([e]){!e||!this._framebuffers[e._wmmId]||(delete this._framebuffers[e._wmmId],this._context.deleteFramebuffer(e),this._updatePanel("fbo"))}_createBuffer(){let e=this._context.createBuffer();return e._wmmId=this._id++,this._buffers[e._wmmId]={buffer:e,memory:0},this._updatePanel("buf"),e}_bindBuffer([e,t]){this._context.bindBuffer(e,t),this._boundBuffer=t._wmmId}_bufferData([e,t,i]){this._context.bufferData(e,t,i);let o;typeof t=="number"?o=t:"byteLength"in t?o=t.byteLength:"length"in t&&(o=t.length),this._buffers[this._boundBuffer].memory=o}_deleteBuffer([e]){!e||!this._buffers[e._wmmId]||(delete this._buffers[e._wmmId],this._context.deleteBuffer(e),this._updatePanel("buf"))}_createTexture(){let e=this._context.createTexture();return e._wmmId=this._id++,this._textures[e._wmmId]={texture:e,memory:0},this._updatePanel("tex"),e}_deleteTexture([e]){!e||!this._textures[e._wmmId]||(delete this._textures[e._wmmId],this._context.deleteTexture(e),this._updatePanel("tex"))}_bindTexture([e,t]){this._context.bindTexture(e,t),this._boundTexture=t._wmmId}_texImage2D(e){let[,,t,i,o,n,,,s]=e;typeof s=="undefined"&&(s=n),this._context.texImage2D.apply(this._context,e);let a=this._calculateByteCountForTexture(t,i,o,s);this._textures[this._boundTexture].memory=a}_calculateByteCountForTexture(e,t,i,o){if(o!==null)if("width"in o)t=o.width,i=o.height;else return o.length;let n=1;switch(e){case this._context.ALPHA:n=1;break;case this._context.RGB:n=3;break;case this._context.RGBA:n=4;break}return t*i*n}}});var cy,DF=m(()=>{cy=class{constructor(e){this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}_onContextChange(){}start(){}stop(){this.flush()}flush(){}dispose(){this._renderer.off("context",this._onContextChange),delete this._renderer}}});var OF,Vre=m(()=>{fr();DF();OF=class extends cy{constructor(e){super(e);this._vertexBuffer=null;this._indexBuffer=null;this._maxBatchSize=Sh,this._vertices=new ArrayBuffer(Sh*4*Xc),this._positions=new Float32Array(this._vertices),this._colors=new Uint32Array(this._vertices),this._indices=new Uint16Array(Sh*6);for(let t=0,i=0;t<Sh*6;t+=6,i+=4)this._indices[t+0]=i+0,this._indices[t+1]=i+1,this._indices[t+2]=i+2,this._indices[t+3]=i+0,this._indices[t+4]=i+2,this._indices[t+5]=i+3;this._sprites=[],this._currentBatchSize=0,this._onContextChange()}render(e){let t=e.getTexture();if(!t)return;let i=t.getFrame(),o=t.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&this.flush();let n=t.getUVs();if(!n)return;let s=this._currentBatchSize*Xc;this._addVertexCoordinates(e,s,i),this._addTextureUVs(e,s,n),this._addColors(e,s),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}_addColors(e,t){let i=this._colors,o=16777215,n=(o>>16)+(o&65280)+((o&255)<<16)+(e.getWorldAlpha()*255<<24);i[t+4]=i[t+9]=i[t+14]=i[t+19]=n}_addTextureUVs(e,t,i){let o=this._positions,[n,s,a,l]=i;o[t+2]=n.x,o[t+3]=n.y,o[t+7]=s.x,o[t+8]=s.y,o[t+12]=a.x,o[t+13]=a.y,o[t+17]=l.x,o[t+18]=l.y}_addVertexCoordinates(e,t,i){let o=this._positions,n=e.getWorldTransform(),s=e.getAnchor(),a=n.rectangleToCoordinates(i,s),l=5;for(let c=0;c<4;c++)o[t+c*l]=a[c].x,o[t+c*l+1]=a[c].y}_onContextChange(){let e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}start(){this._vertexBuffer&&this._indexBuffer&&this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}flush(){var p;let e=this._renderer,t=e.getContext();if(this._currentBatchSize===0)return;if(this._currentBatchSize>Sh*.5)t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices);else{let h=this._positions.subarray(0,this._currentBatchSize*Xc);t.bufferSubData(t.ARRAY_BUFFER,0,h)}let i=0,o=null,n=null,s=null,a=null,l=!1,c=!1,u=null,d=0;for(let h=0,f=this._currentBatchSize;h<f;h++){if(u=this._sprites[h],n=(p=u.getTexture())==null?void 0:p.getBaseTexture(),a=u.getShader()||this._shader,l=s!==a,c=o!==n,(c||l)&&(o&&this._renderBatch(o,i,d),d=h,i=0,o=n,l)){s=a,e.setShader(s);let x=e.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",x),s.syncUniforms(),t.activeTexture(t.TEXTURE0)}i++}o&&this._renderBatch(o,i,d),this._currentBatchSize=0,this._sprites=[]}_renderBatch(e,t,i){if(t===0)return;let o=this._renderer,n=o.getContext(),s=e.getGLTextureForRenderer(o);s||(s=o.getOrCreateGLTexture(e)),e.isDirty()&&(o.updateTexture(e),e.setDirty(!1)),n.activeTexture(n.TEXTURE0+e.getGLUnit()),n.bindTexture(n.TEXTURE_2D,s);let a=t*6,l=i*6*2;n.drawElements(n.TRIANGLES,a,n.UNSIGNED_SHORT,l)}dispose(){let t=this._renderer.getContext();this._sprites.forEach(i=>{i.dispose()}),this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),delete this._vertices,delete this._positions,delete this._colors,delete this._indices,super.dispose()}}});var RF,gS,$re=m(()=>{Hre();Mo();cS();fr();EF();yF();SF();Js();sy();Gre();wF();DF();Vre();RF=class extends ny{constructor(e=800,t=600,i){super(e,t,i);this.type=Pe.WEBGL;this.maxTextureDimensions=null;this._type=Pe.WEBGL,this._onContextLost=this._onContextLost.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.setCanvas(this._options.canvas||$r.createCanvas()),this.shaders={default:new bF(this,void 0,void 0)},this.renderers={sprite:new OF(this)}}_onContextLost(e){e.preventDefault(),me.warn(this.constructor.name,"WebGL context has been lost - trying to restore."),this.emit("context-lost")}_onContextCreationError(e){e.preventDefault(),me.warn(this.constructor.name,`Failed to create WebGL context: ${e.statusMessage||"Unknown error"}`)}_onContextRestored(){me.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}_onBeforeContext(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new ay(this),this._currentObjectRenderer=new cy(this)}setShader(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)}setCanvas(e){this._canvas&&this._removeContextEventListeners(),super.setCanvas(e),this._addContextEventListeners()}_addContextEventListeners(){iF(this._canvas)&&(this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError))}_removeContextEventListeners(){iF(this._canvas)&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError))}_setAttributesForShader(e){if(!this._canvas)return;let t=this._context,i=e.getAttributes(),o=e.getAttributeLocations();i.forEach(n=>{let s=o[n];t.enableVertexAttribArray(s)})}_createContext(){if(!this._canvas)return;let e=$r.glGet(this._canvas);return this._options.debug&&qre(e),this._options.debug&&(e=new hS(e),e=new fS(e)),this.id=RF.contextId++,this._context=e,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.emit("context",e),e}_setupContext(){let e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new Sl(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}getContext(){return this._context}_getMaxPrecision(){let e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=(t==null?void 0:t.precision)!==0?bn.High:bn.Medium;let i=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=(i==null?void 0:i.rangeMax)!==0?bn.High:bn.Low}resizeTo(e,t=!0){super.resizeTo(e,t),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),this._context=$r.glResize(this._context,e)}setRenderTarget(e=this._defaultRenderTarget){this._currentRenderTarget=e,this._currentRenderTarget.activate()}setObjectRenderer(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()}render(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);let t=e.getParent();e.setParent(new wd),e.updateTransform(),t&&e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)}renderDisplayObject(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()}clear(){let e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor),e.clear(e.COLOR_BUFFER_BIT)}save(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}restore(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer}getOrCreateGLTexture(e){let t=this._context,i=e.getGLTextureForRenderer(this);return i||(i=t.createTexture(),e.setGLTextureForRenderer(i,this)),i}updateTexture(e,t=!0){let i=e.getSource(),o=this._context,n=e.getGLUnit(),s=this.getOrCreateGLTexture(e);o.activeTexture(o.TEXTURE0+n),o.bindTexture(o.TEXTURE_2D,s),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&i&&$r.glTexImage(o,i),e.isMipMappingEnabled()?o.generateMipmap(o.TEXTURE_2D):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,e.getGLRepeat(o,"x")),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,e.getGLRepeat(o,"y"))),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,e.getGLFilter(o,"min")),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e.getGLFilter(o,"mag")),o.activeTexture(o.TEXTURE0)}getMaxDimensions(){return this.maxTextureDimensions||(this.maxTextureDimensions=$r.glMaxTexture(this._context)),this.maxTextureDimensions}getCurrentRenderTarget(){return this._currentRenderTarget}getCurrentObjectRenderer(){return this._currentObjectRenderer}getMaxFloatPrecision(){return this._maxFloatPrecision}getMaxIntPrecision(){return this._maxIntPrecision}dispose(){this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose();for(let i in this.shaders)this.shaders[i].dispose(),delete this.shaders[i];this._removeContextEventListeners();let t=this._context.getExtension("WEBGL_lose_context");t&&t.loseContext()}},gS=RF;gS.contextId=0});var yqe,_qe,FF,Kre=m(()=>{vl();yqe=()=>[new xe(0,0),new xe(1,0),new xe(1,1),new xe(0,1)],_qe=(r,e,t)=>{let[i,o,n,s]=r;return i.x=e.x/t.width,i.y=e.y/t.height,o.x=(e.x+e.width)/t.width,o.y=e.y/t.height,n.x=(e.x+e.width)/t.width,n.y=(e.y+e.height)/t.height,s.x=e.x/t.width,s.y=(e.y+e.height)/t.height,r},FF={create:yqe,updateViaFrames:_qe}});var Qc,AF=m(()=>{Kre();fr();Ih();Qc=class extends Di{constructor(e,t){super();if(!(e instanceof lr))throw new Error("`baseTexture` should be an instance of BaseTexture");this._uvs=FF.create(),this._frame=t?t.clone():new Pt(0,0,1,1),this._frameLocked=Boolean(t),this._onBaseTextureLoaded=this._onBaseTextureLoaded.bind(this),this._onBaseTextureUpdated=this._onBaseTextureUpdated.bind(this),this.setBaseTexture(e)}static fromImage(e){let t=new lr(e);return new Qc(t)}static fromCanvas(e){let t=new lr(e);return new Qc(t)}_onBaseTextureLoaded(){if(!this._frameLocked){let e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}_onBaseTextureUpdated(){let{width:e,height:t}=this._baseTexture.getFrame();this._frame.width=e,this._frame.height=t,this.emit("update")}_updateUVs(){this._uvs=FF.updateViaFrames(this._uvs,this._frame,this._baseTexture.getFrame())}getBaseTexture(){return this._baseTexture}setBaseTexture(e){if(this._baseTexture=e,!this._baseTexture.isLoaded())this._baseTexture.once("loaded",this._onBaseTextureLoaded);else{let{width:t,height:i}=e.getFrame();this._frameLocked||(this._frame=new Pt(0,0,t,i)),this._onBaseTextureLoaded()}}getFrame(){return this._frame}setFrame(e){this._frame=e,this._updateUVs()}getWidth(){return this._frame.width}getHeight(){return this._frame.height}getUVs(){return this._uvs}getDimensions(){return new xe(this._frame.width,this._frame.height)}dispose(e=!0){e&&this._baseTexture.dispose()}}});var uy,dy,PF=m(()=>{Mo();fr();mS();EF();ry();sy();Ih();AF();uy=r=>r._type===Pe.WEBGL,dy=class extends Qc{constructor(e,t=100,i=100,o=1){super(new lr,new Pt(0,0,t,i));this._loaded=!0,this._width=t,this._height=i,this._pixelRatio=o,this._renderer=e,this._setupFilterManager(),this._setupBuffer(),this.setBaseTexture(this._renderTarget.getBaseTexture()),this._updateUVs()}_setupFilterManager(){this._filterManager&&this._filterManager.dispose(),uy(this._renderer)?this._filterManager=new ay(this._renderer):this._filterManager=new Td(this._renderer),this._filterManager.resizeTo(new xe(this._width,this._height))}_setupBuffer(){this._renderTarget&&this._renderTarget.dispose(),uy(this._renderer)?this._renderTarget=new Sl(this._renderer,this._width,this._height,this._pixelRatio):this._renderTarget=new Cl(this._width,this._height,this._pixelRatio)}clear(e){this._renderTarget.clear(e)}resizeTo(e){this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e))}render(e){uy(this._renderer)?this._renderWebGL(e):this._renderCanvas(e)}_renderWebGL(e){if(!uy(this._renderer))return;this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach(i=>{i.updateTransform()});let t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}_renderCanvas(e){if(uy(this._renderer))return;e.getWorldTransform().reset(),e.getChildren().forEach(i=>{i.updateTransform()});let t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}getRenderTarget(){return this._renderTarget}dispose(){this._renderTarget.dispose(),this._filterManager.dispose(),super.dispose()}}});var Oh,wl,py=m(()=>{Oh={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"},wl={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}});function ae(r,e,t){r!=null&&(typeof r=="number"?this.fromNumber(r,e,t):e==null&&typeof r!="string"?this.fromString(r,256):this.fromString(r,e))}function ut(){return new ae(null)}function xqe(r,e,t,i,o,n){for(;--n>=0;){var s=e*this[r++]+t[i]+o;o=Math.floor(s/67108864),t[i++]=s&67108863}return o}function Cqe(r,e,t,i,o,n){for(var s=e&32767,a=e>>15;--n>=0;){var l=this[r]&32767,c=this[r++]>>15,u=a*l+c*s;l=s*l+((u&32767)<<15)+t[i]+(o&1073741823),o=(l>>>30)+(u>>>15)+a*c+(o>>>30),t[i++]=l&1073741823}return o}function Sqe(r,e,t,i,o,n){for(var s=e&16383,a=e>>14;--n>=0;){var l=this[r]&16383,c=this[r++]>>14,u=a*l+c*s;l=s*l+((u&16383)<<14)+t[i]+o,o=(l>>28)+(u>>14)+a*c,t[i++]=l&268435455}return o}function Yre(r){return wqe.charAt(r)}function Jre(r,e){var t=bS[r.charCodeAt(e)];return t==null?-1:t}function Tqe(r){for(var e=this.t-1;e>=0;--e)r[e]=this[e];r.t=this.t,r.s=this.s}function kqe(r){this.t=1,this.s=r<0?-1:0,r>0?this[0]=r:r<-1?this[0]=r+this.DV:this.t=0}function tu(r){var e=ut();return e.fromInt(r),e}function Eqe(r,e){var t;if(e==16)t=4;else if(e==8)t=3;else if(e==256)t=8;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else{this.fromRadix(r,e);return}this.t=0,this.s=0;for(var i=r.length,o=!1,n=0;--i>=0;){var s=t==8?r[i]&255:Jre(r,i);if(s<0){r.charAt(i)=="-"&&(o=!0);continue}o=!1,n==0?this[this.t++]=s:n+t>this.DB?(this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n,this[this.t++]=s>>this.DB-n):this[this.t-1]|=s<<n,n+=t,n>=this.DB&&(n-=this.DB)}t==8&&(r[0]&128)!=0&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),o&&ae.ZERO.subTo(this,this)}function Iqe(){for(var r=this.s&this.DM;this.t>0&&this[this.t-1]==r;)--this.t}function Dqe(r){if(this.s<0)return"-"+this.negate().toString(r);var e;if(r==16)e=4;else if(r==8)e=3;else if(r==2)e=1;else if(r==32)e=5;else if(r==4)e=2;else return this.toRadix(r);var t=(1<<e)-1,i,o=!1,n="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(i=this[s]>>a)>0&&(o=!0,n=Yre(i));s>=0;)a<e?(i=(this[s]&(1<<a)-1)<<e-a,i|=this[--s]>>(a+=this.DB-e)):(i=this[s]>>(a-=e)&t,a<=0&&(a+=this.DB,--s)),i>0&&(o=!0),o&&(n+=Yre(i));return o?n:"0"}function Oqe(){var r=ut();return ae.ZERO.subTo(this,r),r}function Rqe(){return this.s<0?this.negate():this}function Fqe(r){var e=this.s-r.s;if(e!=0)return e;var t=this.t;if(e=t-r.t,e!=0)return this.s<0?-e:e;for(;--t>=0;)if((e=this[t]-r[t])!=0)return e;return 0}function yS(r){var e=1,t;return(t=r>>>16)!=0&&(r=t,e+=16),(t=r>>8)!=0&&(r=t,e+=8),(t=r>>4)!=0&&(r=t,e+=4),(t=r>>2)!=0&&(r=t,e+=2),(t=r>>1)!=0&&(r=t,e+=1),e}function Aqe(){return this.t<=0?0:this.DB*(this.t-1)+yS(this[this.t-1]^this.s&this.DM)}function Pqe(r,e){var t;for(t=this.t-1;t>=0;--t)e[t+r]=this[t];for(t=r-1;t>=0;--t)e[t]=0;e.t=this.t+r,e.s=this.s}function Mqe(r,e){for(var t=r;t<this.t;++t)e[t-r]=this[t];e.t=Math.max(this.t-r,0),e.s=this.s}function Bqe(r,e){var t=r%this.DB,i=this.DB-t,o=(1<<i)-1,n=Math.floor(r/this.DB),s=this.s<<t&this.DM,a;for(a=this.t-1;a>=0;--a)e[a+n+1]=this[a]>>i|s,s=(this[a]&o)<<t;for(a=n-1;a>=0;--a)e[a]=0;e[n]=s,e.t=this.t+n+1,e.s=this.s,e.clamp()}function Lqe(r,e){e.s=this.s;var t=Math.floor(r/this.DB);if(t>=this.t){e.t=0;return}var i=r%this.DB,o=this.DB-i,n=(1<<i)-1;e[0]=this[t]>>i;for(var s=t+1;s<this.t;++s)e[s-t-1]|=(this[s]&n)<<o,e[s-t]=this[s]>>i;i>0&&(e[this.t-t-1]|=(this.s&n)<<o),e.t=this.t-t,e.clamp()}function zqe(r,e){for(var t=0,i=0,o=Math.min(r.t,this.t);t<o;)i+=this[t]-r[t],e[t++]=i&this.DM,i>>=this.DB;if(r.t<this.t){for(i-=r.s;t<this.t;)i+=this[t],e[t++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;t<r.t;)i-=r[t],e[t++]=i&this.DM,i>>=this.DB;i-=r.s}e.s=i<0?-1:0,i<-1?e[t++]=this.DV+i:i>0&&(e[t++]=i),e.t=t,e.clamp()}function Uqe(r,e){var t=this.abs(),i=r.abs(),o=t.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+t.t]=t.am(0,i[o],e,o,0,t.t);e.s=0,e.clamp(),this.s!=r.s&&ae.ZERO.subTo(e,e)}function Nqe(r){for(var e=this.abs(),t=r.t=2*e.t;--t>=0;)r[t]=0;for(t=0;t<e.t-1;++t){var i=e.am(t,e[t],r,2*t,0,1);(r[t+e.t]+=e.am(t+1,2*e[t],r,2*t+1,i,e.t-t-1))>=e.DV&&(r[t+e.t]-=e.DV,r[t+e.t+1]=1)}r.t>0&&(r[r.t-1]+=e.am(t,e[t],r,2*t,0,1)),r.s=0,r.clamp()}function qqe(r,e,t){var i=r.abs();if(!(i.t<=0)){var o=this.abs();if(o.t<i.t){e!=null&&e.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=ut());var n=ut(),s=this.s,a=r.s,l=this.DB-yS(i[i.t-1]);l>0?(i.lShiftTo(l,n),o.lShiftTo(l,t)):(i.copyTo(n),o.copyTo(t));var c=n.t,u=n[c-1];if(u!=0){var d=u*(1<<this.F1)+(c>1?n[c-2]>>this.F2:0),p=this.FV/d,h=(1<<this.F1)/d,f=1<<this.F2,_=t.t,x=_-c,y=e==null?ut():e;for(n.dlShiftTo(x,y),t.compareTo(y)>=0&&(t[t.t++]=1,t.subTo(y,t)),ae.ONE.dlShiftTo(c,y),y.subTo(n,n);n.t<c;)n[n.t++]=0;for(;--x>=0;){var D=t[--_]==u?this.DM:Math.floor(t[_]*p+(t[_-1]+f)*h);if((t[_]+=n.am(0,D,t,x,0,c))<D)for(n.dlShiftTo(x,y),t.subTo(y,t);t[_]<--D;)t.subTo(y,t)}e!=null&&(t.drShiftTo(c,e),s!=a&&ae.ZERO.subTo(e,e)),t.t=c,t.clamp(),l>0&&t.rShiftTo(l,t),s<0&&ae.ZERO.subTo(t,t)}}}function Hqe(r){var e=ut();return this.abs().divRemTo(r,null,e),this.s<0&&e.compareTo(ae.ZERO)>0&&r.subTo(e,e),e}function kd(r){this.m=r}function jqe(r){return r.s<0||r.compareTo(this.m)>=0?r.mod(this.m):r}function Wqe(r){return r}function Gqe(r){r.divRemTo(this.m,null,r)}function Vqe(r,e,t){r.multiplyTo(e,t),this.reduce(t)}function $qe(r,e){r.squareTo(e),this.reduce(e)}function Kqe(){if(this.t<1)return 0;var r=this[0];if((r&1)==0)return 0;var e=r&3;return e=e*(2-(r&15)*e)&15,e=e*(2-(r&255)*e)&255,e=e*(2-((r&65535)*e&65535))&65535,e=e*(2-r*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Ed(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function Xqe(r){var e=ut();return r.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),r.s<0&&e.compareTo(ae.ZERO)>0&&this.m.subTo(e,e),e}function Yqe(r){var e=ut();return r.copyTo(e),this.reduce(e),e}function Jqe(r){for(;r.t<=this.mt2;)r[r.t++]=0;for(var e=0;e<this.m.t;++e){var t=r[e]&32767,i=t*this.mpl+((t*this.mph+(r[e]>>15)*this.mpl&this.um)<<15)&r.DM;for(t=e+this.m.t,r[t]+=this.m.am(0,i,r,e,0,this.m.t);r[t]>=r.DV;)r[t]-=r.DV,r[++t]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function Zqe(r,e){r.squareTo(e),this.reduce(e)}function Qqe(r,e,t){r.multiplyTo(e,t),this.reduce(t)}function eHe(){return(this.t>0?this[0]&1:this.s)==0}function tHe(r,e){if(r>4294967295||r<1)return ae.ONE;var t=ut(),i=ut(),o=e.convert(this),n=yS(r)-1;for(o.copyTo(t);--n>=0;)if(e.sqrTo(t,i),(r&1<<n)>0)e.mulTo(i,o,t);else{var s=t;t=i,i=s}return e.revert(t)}function rHe(r,e){var t;return r<256||e.isEven()?t=new kd(e):t=new Ed(e),this.exp(r,t)}function iHe(){var r=ut();return this.copyTo(r),r}function oHe(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function nHe(){return this.t==0?this.s:this[0]<<24>>24}function sHe(){return this.t==0?this.s:this[0]<<16>>16}function aHe(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function lHe(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function cHe(r){if(r==null&&(r=10),this.signum()==0||r<2||r>36)return"0";var e=this.chunkSize(r),t=Math.pow(r,e),i=tu(t),o=ut(),n=ut(),s="";for(this.divRemTo(i,o,n);o.signum()>0;)s=(t+n.intValue()).toString(r).substr(1)+s,o.divRemTo(i,o,n);return n.intValue().toString(r)+s}function uHe(r,e){this.fromInt(0),e==null&&(e=10);for(var t=this.chunkSize(e),i=Math.pow(e,t),o=!1,n=0,s=0,a=0;a<r.length;++a){var l=Jre(r,a);if(l<0){r.charAt(a)=="-"&&this.signum()==0&&(o=!0);continue}s=e*s+l,++n>=t&&(this.dMultiply(i),this.dAddOffset(s,0),n=0,s=0)}n>0&&(this.dMultiply(Math.pow(e,n)),this.dAddOffset(s,0)),o&&ae.ZERO.subTo(this,this)}function dHe(r,e,t){if(typeof e=="number")if(r<2)this.fromInt(1);else for(this.fromNumber(r,t),this.testBit(r-1)||this.bitwiseTo(ae.ONE.shiftLeft(r-1),LF,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>r&&this.subTo(ae.ONE.shiftLeft(r-1),this);else{var i=new Array,o=r&7;i.length=(r>>3)+1,e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function pHe(){var r=this.t,e=new Array;e[0]=this.s;var t=this.DB-r*this.DB%8,i,o=0;if(r-- >0)for(t<this.DB&&(i=this[r]>>t)!=(this.s&this.DM)>>t&&(e[o++]=i|this.s<<this.DB-t);r>=0;)t<8?(i=(this[r]&(1<<t)-1)<<8-t,i|=this[--r]>>(t+=this.DB-8)):(i=this[r]>>(t-=8)&255,t<=0&&(t+=this.DB,--r)),(i&128)!=0&&(i|=-256),o==0&&(this.s&128)!=(i&128)&&++o,(o>0||i!=this.s)&&(e[o++]=i);return e}function mHe(r){return this.compareTo(r)==0}function hHe(r){return this.compareTo(r)<0?this:r}function fHe(r){return this.compareTo(r)>0?this:r}function gHe(r,e,t){var i,o,n=Math.min(r.t,this.t);for(i=0;i<n;++i)t[i]=e(this[i],r[i]);if(r.t<this.t){for(o=r.s&this.DM,i=n;i<this.t;++i)t[i]=e(this[i],o);t.t=this.t}else{for(o=this.s&this.DM,i=n;i<r.t;++i)t[i]=e(o,r[i]);t.t=r.t}t.s=e(this.s,r.s),t.clamp()}function bHe(r,e){return r&e}function yHe(r){var e=ut();return this.bitwiseTo(r,bHe,e),e}function LF(r,e){return r|e}function _He(r){var e=ut();return this.bitwiseTo(r,LF,e),e}function Zre(r,e){return r^e}function vHe(r){var e=ut();return this.bitwiseTo(r,Zre,e),e}function Qre(r,e){return r&~e}function xHe(r){var e=ut();return this.bitwiseTo(r,Qre,e),e}function CHe(){for(var r=ut(),e=0;e<this.t;++e)r[e]=this.DM&~this[e];return r.t=this.t,r.s=~this.s,r}function SHe(r){var e=ut();return r<0?this.rShiftTo(-r,e):this.lShiftTo(r,e),e}function wHe(r){var e=ut();return r<0?this.lShiftTo(-r,e):this.rShiftTo(r,e),e}function THe(r){if(r==0)return-1;var e=0;return(r&65535)==0&&(r>>=16,e+=16),(r&255)==0&&(r>>=8,e+=8),(r&15)==0&&(r>>=4,e+=4),(r&3)==0&&(r>>=2,e+=2),(r&1)==0&&++e,e}function kHe(){for(var r=0;r<this.t;++r)if(this[r]!=0)return r*this.DB+THe(this[r]);return this.s<0?this.t*this.DB:-1}function EHe(r){for(var e=0;r!=0;)r&=r-1,++e;return e}function IHe(){for(var r=0,e=this.s&this.DM,t=0;t<this.t;++t)r+=EHe(this[t]^e);return r}function DHe(r){var e=Math.floor(r/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<r%this.DB)!=0}function OHe(r,e){var t=ae.ONE.shiftLeft(r);return this.bitwiseTo(t,e,t),t}function RHe(r){return this.changeBit(r,LF)}function FHe(r){return this.changeBit(r,Qre)}function AHe(r){return this.changeBit(r,Zre)}function PHe(r,e){for(var t=0,i=0,o=Math.min(r.t,this.t);t<o;)i+=this[t]+r[t],e[t++]=i&this.DM,i>>=this.DB;if(r.t<this.t){for(i+=r.s;t<this.t;)i+=this[t],e[t++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;t<r.t;)i+=r[t],e[t++]=i&this.DM,i>>=this.DB;i+=r.s}e.s=i<0?-1:0,i>0?e[t++]=i:i<-1&&(e[t++]=this.DV+i),e.t=t,e.clamp()}function MHe(r){var e=ut();return this.addTo(r,e),e}function BHe(r){var e=ut();return this.subTo(r,e),e}function LHe(r){var e=ut();return this.multiplyTo(r,e),e}function zHe(){var r=ut();return this.squareTo(r),r}function UHe(r){var e=ut();return this.divRemTo(r,e,null),e}function NHe(r){var e=ut();return this.divRemTo(r,null,e),e}function qHe(r){var e=ut(),t=ut();return this.divRemTo(r,e,t),new Array(e,t)}function HHe(r){this[this.t]=this.am(0,r-1,this,0,0,this.t),++this.t,this.clamp()}function jHe(r,e){if(r!=0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=r;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function my(){}function eie(r){return r}function WHe(r,e,t){r.multiplyTo(e,t)}function GHe(r,e){r.squareTo(e)}function VHe(r){return this.exp(r,new my)}function $He(r,e,t){var i=Math.min(this.t+r.t,e);for(t.s=0,t.t=i;i>0;)t[--i]=0;var o;for(o=t.t-this.t;i<o;++i)t[i+this.t]=this.am(0,r[i],t,i,0,this.t);for(o=Math.min(r.t,e);i<o;++i)this.am(0,r[i],t,i,0,e-i);t.clamp()}function KHe(r,e,t){--e;var i=t.t=this.t+r.t-e;for(t.s=0;--i>=0;)t[i]=0;for(i=Math.max(e-this.t,0);i<r.t;++i)t[this.t+i-e]=this.am(e-i,r[i],t,0,0,this.t+i-e);t.clamp(),t.drShiftTo(1,t)}function Fh(r){this.r2=ut(),this.q3=ut(),ae.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function XHe(r){if(r.s<0||r.t>2*this.m.t)return r.mod(this.m);if(r.compareTo(this.m)<0)return r;var e=ut();return r.copyTo(e),this.reduce(e),e}function YHe(r){return r}function JHe(r){for(r.drShiftTo(this.m.t-1,this.r2),r.t>this.m.t+1&&(r.t=this.m.t+1,r.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);r.compareTo(this.r2)<0;)r.dAddOffset(1,this.m.t+1);for(r.subTo(this.r2,r);r.compareTo(this.m)>=0;)r.subTo(this.m,r)}function ZHe(r,e){r.squareTo(e),this.reduce(e)}function QHe(r,e,t){r.multiplyTo(e,t),this.reduce(t)}function eje(r,e){var t=r.bitLength(),i,o=tu(1),n;if(t<=0)return o;t<18?i=1:t<48?i=3:t<144?i=4:t<768?i=5:i=6,t<8?n=new kd(e):e.isEven()?n=new Fh(e):n=new Ed(e);var s=new Array,a=3,l=i-1,c=(1<<i)-1;if(s[1]=n.convert(this),i>1){var u=ut();for(n.sqrTo(s[1],u);a<=c;)s[a]=ut(),n.mulTo(u,s[a-2],s[a]),a+=2}var d=r.t-1,p,h=!0,f=ut(),_;for(t=yS(r[d])-1;d>=0;){for(t>=l?p=r[d]>>t-l&c:(p=(r[d]&(1<<t+1)-1)<<l-t,d>0&&(p|=r[d-1]>>this.DB+t-l)),a=i;(p&1)==0;)p>>=1,--a;if((t-=a)<0&&(t+=this.DB,--d),h)s[p].copyTo(o),h=!1;else{for(;a>1;)n.sqrTo(o,f),n.sqrTo(f,o),a-=2;a>0?n.sqrTo(o,f):(_=o,o=f,f=_),n.mulTo(f,s[p],o)}for(;d>=0&&(r[d]&1<<t)==0;)n.sqrTo(o,f),_=o,o=f,f=_,--t<0&&(t=this.DB-1,--d)}return n.revert(o)}function tje(r){var e=this.s<0?this.negate():this.clone(),t=r.s<0?r.negate():r.clone();if(e.compareTo(t)<0){var i=e;e=t,t=i}var o=e.getLowestSetBit(),n=t.getLowestSetBit();if(n<0)return e;for(o<n&&(n=o),n>0&&(e.rShiftTo(n,e),t.rShiftTo(n,t));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),e.compareTo(t)>=0?(e.subTo(t,e),e.rShiftTo(1,e)):(t.subTo(e,t),t.rShiftTo(1,t));return n>0&&t.lShiftTo(n,t),t}function rje(r){if(r<=0)return 0;var e=this.DV%r,t=this.s<0?r-1:0;if(this.t>0)if(e==0)t=this[0]%r;else for(var i=this.t-1;i>=0;--i)t=(e*t+this[i])%r;return t}function ije(r){var e=r.isEven();if(this.isEven()&&e||r.signum()==0)return ae.ZERO;for(var t=r.clone(),i=this.clone(),o=tu(1),n=tu(0),s=tu(0),a=tu(1);t.signum()!=0;){for(;t.isEven();)t.rShiftTo(1,t),e?((!o.isEven()||!n.isEven())&&(o.addTo(this,o),n.subTo(r,n)),o.rShiftTo(1,o)):n.isEven()||n.subTo(r,n),n.rShiftTo(1,n);for(;i.isEven();)i.rShiftTo(1,i),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(r,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(r,a),a.rShiftTo(1,a);t.compareTo(i)>=0?(t.subTo(i,t),e&&o.subTo(s,o),n.subTo(a,n)):(i.subTo(t,i),e&&s.subTo(o,s),a.subTo(n,a))}if(i.compareTo(ae.ONE)!=0)return ae.ZERO;if(a.compareTo(r)>=0)return a.subtract(r);if(a.signum()<0)a.addTo(r,a);else return a;return a.signum()<0?a.add(r):a}function nje(r){var e,t=this.abs();if(t.t==1&&t[0]<=Ri[Ri.length-1]){for(e=0;e<Ri.length;++e)if(t[0]==Ri[e])return!0;return!1}if(t.isEven())return!1;for(e=1;e<Ri.length;){for(var i=Ri[e],o=e+1;o<Ri.length&&i<oje;)i*=Ri[o++];for(i=t.modInt(i);e<o;)if(i%Ri[e++]==0)return!1}return t.millerRabin(r)}function sje(r){var e=this.subtract(ae.ONE),t=e.getLowestSetBit();if(t<=0)return!1;var i=e.shiftRight(t);r=r+1>>1,r>Ri.length&&(r=Ri.length);for(var o=ut(),n=0;n<r;++n){o.fromInt(Ri[Math.floor(Math.random()*Ri.length)]);var s=o.modPow(i,this);if(s.compareTo(ae.ONE)!=0&&s.compareTo(e)!=0){for(var a=1;a++<t&&s.compareTo(e)!=0;)if(s=s.modPowInt(2,this),s.compareTo(ae.ONE)==0)return!1;if(s.compareTo(e)!=0)return!1}}return!0}var MF,eu,vqe,Xre,BF,wqe,bS,Rh,vn,Ri,oje,tie,rie=m(()=>{MF={};MF=typeof window!="undefined"?window.navigator:{};vqe=244837814094590,Xre=(vqe&16777215)==15715070;Xre&&MF.appName=="Microsoft Internet Explorer"?(ae.prototype.am=Cqe,eu=30):Xre&&MF.appName!="Netscape"?(ae.prototype.am=xqe,eu=26):(ae.prototype.am=Sqe,eu=28);ae.prototype.DB=eu;ae.prototype.DM=(1<<eu)-1;ae.prototype.DV=1<<eu;BF=52;ae.prototype.FV=Math.pow(2,BF);ae.prototype.F1=BF-eu;ae.prototype.F2=2*eu-BF;wqe="0123456789abcdefghijklmnopqrstuvwxyz",bS=new Array;Rh="0".charCodeAt(0);for(vn=0;vn<=9;++vn)bS[Rh++]=vn;Rh="a".charCodeAt(0);for(vn=10;vn<36;++vn)bS[Rh++]=vn;Rh="A".charCodeAt(0);for(vn=10;vn<36;++vn)bS[Rh++]=vn;kd.prototype.convert=jqe;kd.prototype.revert=Wqe;kd.prototype.reduce=Gqe;kd.prototype.mulTo=Vqe;kd.prototype.sqrTo=$qe;Ed.prototype.convert=Xqe;Ed.prototype.revert=Yqe;Ed.prototype.reduce=Jqe;Ed.prototype.mulTo=Qqe;Ed.prototype.sqrTo=Zqe;ae.prototype.copyTo=Tqe;ae.prototype.fromInt=kqe;ae.prototype.fromString=Eqe;ae.prototype.clamp=Iqe;ae.prototype.dlShiftTo=Pqe;ae.prototype.drShiftTo=Mqe;ae.prototype.lShiftTo=Bqe;ae.prototype.rShiftTo=Lqe;ae.prototype.subTo=zqe;ae.prototype.multiplyTo=Uqe;ae.prototype.squareTo=Nqe;ae.prototype.divRemTo=qqe;ae.prototype.invDigit=Kqe;ae.prototype.isEven=eHe;ae.prototype.exp=tHe;ae.prototype.toString=Dqe;ae.prototype.negate=Oqe;ae.prototype.abs=Rqe;ae.prototype.compareTo=Fqe;ae.prototype.bitLength=Aqe;ae.prototype.mod=Hqe;ae.prototype.modPowInt=rHe;ae.ZERO=tu(0);ae.ONE=tu(1);my.prototype.convert=eie;my.prototype.revert=eie;my.prototype.mulTo=WHe;my.prototype.sqrTo=GHe;Fh.prototype.convert=XHe;Fh.prototype.revert=YHe;Fh.prototype.reduce=JHe;Fh.prototype.mulTo=QHe;Fh.prototype.sqrTo=ZHe;Ri=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],oje=(1<<26)/Ri[Ri.length-1];ae.prototype.chunkSize=aHe;ae.prototype.toRadix=cHe;ae.prototype.fromRadix=uHe;ae.prototype.fromNumber=dHe;ae.prototype.bitwiseTo=gHe;ae.prototype.changeBit=OHe;ae.prototype.addTo=PHe;ae.prototype.dMultiply=HHe;ae.prototype.dAddOffset=jHe;ae.prototype.multiplyLowerTo=$He;ae.prototype.multiplyUpperTo=KHe;ae.prototype.modInt=rje;ae.prototype.millerRabin=sje;ae.prototype.clone=iHe;ae.prototype.intValue=oHe;ae.prototype.byteValue=nHe;ae.prototype.shortValue=sHe;ae.prototype.signum=lHe;ae.prototype.toByteArray=pHe;ae.prototype.equals=mHe;ae.prototype.min=hHe;ae.prototype.max=fHe;ae.prototype.and=yHe;ae.prototype.or=_He;ae.prototype.xor=vHe;ae.prototype.andNot=xHe;ae.prototype.not=CHe;ae.prototype.shiftLeft=SHe;ae.prototype.shiftRight=wHe;ae.prototype.getLowestSetBit=kHe;ae.prototype.bitCount=IHe;ae.prototype.testBit=DHe;ae.prototype.setBit=RHe;ae.prototype.clearBit=FHe;ae.prototype.flipBit=AHe;ae.prototype.add=MHe;ae.prototype.subtract=BHe;ae.prototype.multiply=LHe;ae.prototype.divide=UHe;ae.prototype.remainder=NHe;ae.prototype.divideAndRemainder=qHe;ae.prototype.modPow=eje;ae.prototype.modInverse=ije;ae.prototype.pow=VHe;ae.prototype.gcd=tje;ae.prototype.isProbablePrime=nje;ae.prototype.square=zHe;tie=ae});function iie(r){var e=8,t=0;function i(x,y){var D=(x&65535)+(y&65535),E=(x>>16)+(y>>16)+(D>>16);return E<<16|D&65535}function o(x,y){return x>>>y|x<<32-y}function n(x,y){return x>>>y}function s(x,y,D){return x&y^~x&D}function a(x,y,D){return x&y^x&D^y&D}function l(x){return o(x,2)^o(x,13)^o(x,22)}function c(x){return o(x,6)^o(x,11)^o(x,25)}function u(x){return o(x,7)^o(x,18)^n(x,3)}function d(x){return o(x,17)^o(x,19)^n(x,10)}function p(x,y){var D=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),E=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),F=new Array(64),N,R,B,se,A,q,ue,_e,ye,De,Kt,oe;x[y>>5]|=128<<24-y%32,x[(y+64>>9<<4)+15]=y;for(var ye=0;ye<x.length;ye+=16){N=E[0],R=E[1],B=E[2],se=E[3],A=E[4],q=E[5],ue=E[6],_e=E[7];for(var De=0;De<64;De++)De<16?F[De]=x[De+ye]:F[De]=i(i(i(d(F[De-2]),F[De-7]),u(F[De-15])),F[De-16]),Kt=i(i(i(i(_e,c(A)),s(A,q,ue)),D[De]),F[De]),oe=i(l(N),a(N,R,B)),_e=ue,ue=q,q=A,A=i(se,Kt),se=B,B=R,R=N,N=i(Kt,oe);E[0]=i(N,E[0]),E[1]=i(R,E[1]),E[2]=i(B,E[2]),E[3]=i(se,E[3]),E[4]=i(A,E[4]),E[5]=i(q,E[5]),E[6]=i(ue,E[6]),E[7]=i(_e,E[7])}return E}function h(x){for(var y=Array(),D=(1<<e)-1,E=0;E<x.length*e;E+=e)y[E>>5]|=(x.charCodeAt(E/e)&D)<<24-E%32;return y}function f(x){x=x.replace(/\r\n/g,`
`);for(var y="",D=0;D<x.length;D++){var E=x.charCodeAt(D);E<128?y+=String.fromCharCode(E):E>127&&E<2048?(y+=String.fromCharCode(E>>6|192),y+=String.fromCharCode(E&63|128)):(y+=String.fromCharCode(E>>12|224),y+=String.fromCharCode(E>>6&63|128),y+=String.fromCharCode(E&63|128))}return y}function _(x){for(var y=t?"0123456789ABCDEF":"0123456789abcdef",D="",E=0;E<x.length*4;E++)D+=y.charAt(x[E>>2]>>(3-E%4)*8+4&15)+y.charAt(x[E>>2]>>(3-E%4)*8&15);return D}return r=f(r),_(p(h(r),r.length*e))}var oie=m(()=>{});var aje,lje,Id,nie=m(()=>{aje=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,lje=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,Id=class{get major(){return this._major}get minor(){return this._minor}get patch(){return this._patch}constructor(e,t=!1){let i=t?lje:aje,o=i.exec(e);i.lastIndex=0,this._major=o[1],this._minor=o[2],this._patch=o[3]||0}equals(e){return this._major===e._major&&this._minor===e._minor&&this._patch===e._patch}isMoreRecentThan(e){if(this._major<e.major)return!1;if(this._major>e.major)return!0;if(this._minor<e.minor)return!1;if(this._minor>e.minor)return!0;if(this._patch<=e.patch)return!1;if(this._patch>e.patch)return!0}}});function cje(r){return r.map(e=>`0${(e&255).toString(16)}`.slice(-2)).join("")}var oi,uje,dje,sie,pje,aie,zF,mje,hje,UF,fje,lie,NF,_S,qF=m(()=>{vh();rie();oie();gh();nie();Zs();oi=r=>K.byteArrayToString(es.decode(r));uje="TDNSeVlXTnJQMkZ3YVV0bGVUMD0=",dje="ZW50ZXJwcmlzZV9saWNlbnNl",sie="YXBwX2lkZW50aWZpZXJz",pje="cGxhdGZvcm0=",aie="ZmVhdHVyZXM=",zF="ZXhwaXJlc19hdA==",mje="ZG9tYWlucw==",hje="YXBpX3Rva2Vu",UF="c2lnbmF0dXJl",fje="dmVyc2lvbg==",lie=class{constructor(e){this._version="2.4",this._l=typeof e=="string"?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}v(){return this._sigValid()&&!this.isExp()}_jsonValid(){try{this._decLic=JSON.parse(this._l)}catch(e){return this._decLic={},!1}return!0}_hostnameValid(){if(typeof window=="undefined"||!this._decLic[oi(sie)].length)return!0;let{hostname:e}=window.location,t=!1;return this._decLic[oi(sie)].forEach(i=>{K.wildCardMatch(e,i)&&(t=!0)}),t}_platformValid(){let e=this._decLic[oi(pje)];return"HTML5"===e}c(){return new Promise((e,t)=>{let i=this._validateError();i!==null&&t(i),e()})}validate(){return this._validateError()===null}_validateError(){if(typeof this._l!=="string"||!this._jsonValid()){let t=new Error;return t.code="ELICINVFMT",t}if(!this._sigValid()){let t=new Error;return t.code="ELICINV",t}if(!this._hostnameValid()){let t=new Error;return t.code="ELICINVHOST",t}if(!this._platformValid()){let t=new Error;return t.code="ELICINVPLAT",t}if(this.isExp()){let t=new Error;return t.code="ELICEXP",t}return null}isToolAllowed(e){return this._includesFeature(e)}isWhiteLabel(){return this._includesFeature("whitelabel",new Id("2.4",!0))}areCustomAssetsAllowed(){return this._includesFeature("customassets",new Id("2.4",!0))}t(){if(this._decLic.enterprise_license||this._includesFeature("noexporttracking",new Id("2.4",!0)))return Promise.resolve();let e=this._decLic[oi(mje)][0]+oi(oi(uje))+this._decLic[oi(hje)];return new yn(e).load().catch(()=>{})}isENT(){return this._decLic?this._decLic[oi(dje)]:!1}_sigValid(){return this._verify(this._message,this._sig)}exp(){return!!this._decLic[oi(zF)]}dl(){return Math.ceil((this._expAt()-Date.now())/(60*60*24*1e3))}isExp(e=Date.now()){return this._decLic[oi(zF)]===null?!1:e>this._expAt()}_expAt(){return this._decLic[oi(zF)]*1e3}_verify(e,t){let i,o;return o=this._encodeMessage(e),i=this._decodeSignature(t),i=i.substr(-64),o===i}_encodeMessage(e){return iie(e)}_decodeSignature(e){let t;return e=es.decode(e),e=cje(e),e=this._parseBigInt(e,16),t=e.modPowInt(this._e,this._n),t=t.toString(16),t}_parseBigInt(e,t){return new tie(e,t)}_parseLicense(){typeof this._l=="string"&&(!this._jsonValid()||(this._sig=this._decLic[oi(UF)]||"",delete this._decLic[oi(UF)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(`,"${oi(UF)}":"([^"]*)"`),"")))}_includesFeature(e,t=new Id("1.0",!0)){let i=new Id(this._decLic[oi(fje)],!0);return t.isMoreRecentThan(i)?!0:this._decLic[oi(aie)]&&this._decLic[oi(aie)].indexOf(e)!==-1}},NF=class{v(){return!0}c(){return Promise.resolve()}isToolAllowed(e){return!0}isWhiteLabel(){return!1}areCustomAssetsAllowed(){return!0}t(){return Promise.resolve()}isENT(){return!1}exp(){return!1}dl(){return 0}isExp(e=Date.now()){return!1}},_S=lie});var Dd,Tl,ru,cie,vS,uie=m(()=>{Dd=typeof window=="undefined"?global:window,Tl=Dd.requestAnimationFrame,ru=Dd.cancelAnimationFrame,cie=0,vS=["ms","moz","webkit","o"];for(let r=0;r<vS.length&&!Tl;++r)Tl=Dd[`${vS[r]}RequestAnimationFrame`],ru=Dd[`${vS[r]}CancelAnimationFrame`]||Dd[`${vS[r]}CancelRequestAnimationFrame`];Tl&&(Tl=Tl.bind(Dd));ru&&(ru=ru.bind(Dd));Tl||(Tl=function(r,e){let t=new Date().getTime(),i=Math.max(0,16-(t-cie)),o=setTimeout(function(){r(t+i)},i);return cie=t+i,o});ru||(ru=function(r){clearTimeout(r)})});var die,HF,pie=m(()=>{ts();vl();die=class{constructor(e=new xe(0,0),t=new xe(1,1),i=new xe(2,-1),o=new xe(2,0)){this._p0=e.clone(),this._p1=t.clone(),this._p2=i.clone(),this._p3=o.clone(),this._segments=[],this._length=-1,this._sample=[]}set(e=new xe(0,0),t=new xe(1,1),i=new xe(2,1),o=new xe(2,0)){this._p0=e.clone(),this._p1=t.clone(),this._p2=i.clone(),this._p3=o.clone()}getLength(){return this._length}calculateSegments(e=100){let t=0,i=0,o=[],n=1/e,s=this._p0.clone();for(let a=1;a<=e;a++){let l=[];l.push({t,s:i,point:s}),t+=n,t=Math.min(t,1);let c=this.evalAt(t);i+=c.clone().subtract(s).len(),l.push({t,s:i,point:c}),o.push(l),s=c}return this._segments=o,this._length=i,i}evalAt(e){e=this.normalizeParameter(e);let t=this._p0.clone().multiply((1-e)**3),i=this._p1.clone().multiply(3*(1-e)*(1-e)*e),o=this._p2.clone().multiply(3*(1-e)*e*e),n=this._p3.clone().multiply(e*e*e);return t.add(i).add(o).add(n)}isInSegment(e,t){return e=this.normalizeArcLength(e),e>=t[0].s&&e<=t[1].s}getArcLengthSegment(e){e=this.normalizeArcLength(e);for(let t=0;t<this._segments.length;t++){let i=this._segments[t];if(this.isInSegment(e,i))return i}return null}normalizeArcLength(e){return Math.max(Math.min(this._length,e),0)}normalizeParameter(e){return Math.max(Math.min(1,e),0)}getParameterForArcLength(e){let t=this.normalizeArcLength(e),i=this.getArcLengthSegment(t);if(!i)return me.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;let o=(t-i[1].s)/(i[0].s-i[1].s);return o*i[0].t+(1-o)*i[1].t}evalAtArcLength(e){return this.evalAt(this.getParameterForArcLength(e))}approximateAtArcLength(e){let t=this.normalizeArcLength(e),i=this.getArcLengthSegment(t);if(!i)return-1;let o=(t-i[1].s)/(i[0].s-i[1].s);return i[0].point.clone().multiply(o).add(i[1].point.clone().multiply(1-o))}parameterSample(e=100){let t=1/e,i=[],o=0;for(let n=0;n<=e+1;n++)i.push(this.evalAt(o)),o+=t;return this._sample=i,[...i]}arcLengthApproxSample(e=100,t=!1,i=!1){let o=this._length/e,n=[],s=0;for(let a=t?1:0;a<e+1;a++)n.push(this.approximateAtArcLength(s)),s+=o;return i&&n.pop(),this._sample=n,[...n]}},HF=die});var mie,jF,hie=m(()=>{mie=class{constructor(e,t){this.min=e,this.max=t}getMin(){return this.min}getMax(){return this.max}getLength(){return this.max-this.min}contains(e){return this.min<=e&&e<=this.max}},jF=mie});var Fi,WF,fie=m(()=>{Fi=class{constructor(e,t,i){this.x=e,this.y=t,this.z=i,typeof this.x=="undefined"&&(this.x=0),typeof this.y=="undefined"&&(this.y=0),typeof this.z=="undefined"&&(this.z=0)}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}clone(){return new Fi(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clamp(e,t){let i=e!==null&&typeof e!="undefined",o=t!==null&&typeof t!="undefined";return!(e instanceof Fi)&&i&&(e=new Fi(e,e,e)),!(t instanceof Fi)&&o&&(t=new Fi(t,t,t)),i&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),o&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y),this.z=Math.min(t.z,this.z)),this}divide(e){return e instanceof Fi?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}subtract(e){return e instanceof Fi?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}multiply(e){return e instanceof Fi?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}add(e){return e instanceof Fi?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}equals(e){return e instanceof Fi?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}fract(){return this.x%=1,this.y%=1,this.z%=1,this}toInt(){return this.x|=0,this.y|=0,this.z|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toObject(){return{x:this.x,y:this.y,z:this.z}}toString(){return`Vector3({ x: ${this.x}, y: ${this.y}, z: ${this.z} })`}roundDecimal(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this.z=parseFloat(this.z.toFixed(e)),this}static fromObject(e){return new Fi(e.x,e.y,e.z)}static get NULL(){return new Fi(0,0,0)}},WF=Fi});var he={};Ht(he,{ColorMatrix:()=>ey,CubicBezierCurve:()=>HF,Matrix:()=>io,Range:()=>jF,Rectangle:()=>Pt,Vector2:()=>xe,Vector3:()=>WF});var GF=m(()=>{fF();pie();mF();hie();hF();vl();fie()});var hy={};Ht(hy,{Base64:()=>es,Color:()=>ee,ColorMatrix:()=>ey,Configurable:()=>qe,Constants:()=>to,CubicBezierCurve:()=>HF,Engine:()=>$,EventEmitter:()=>Di,Events:()=>Oh,FreeLicenseChecker:()=>NF,GLUtils:()=>Cd,LicenseChecker:()=>_S,Log:()=>me,Matrix:()=>io,Range:()=>jF,Rectangle:()=>Pt,Utils:()=>K,Vector2:()=>xe,Vector3:()=>WF,cancelAnimationFrame:()=>ru,requestAnimationFrame:()=>Tl});var Od=m(()=>{ts();py();Mo();fy();gh();xh();Th();Ch();pF();qF();Zs();uie();GF()});var VF,gie=m(()=>{uS();$F();PF();Od();VF=class{constructor(){this._container=new Qs;this._sprite=new gy;this._container.addChild(this._sprite)}render(e,t,i){let o=i.getDimensions(),n=this._getNextHighestPOT(o);this._renderTexture?this._renderTexture.resizeTo(n):this._renderTexture=new dy(e,n.x,n.y);let s=this._renderTexture.getDimensions();this._sprite.setTexture(i),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(e,t,o,s)}_updateSprite(e,t,i,o){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new Pt(0,0,i.x,i.y))}_getNextHighestPOT(e){return new xe(K.nextHighestPOT(e.x),K.nextHighestPOT(e.y))}getRenderTexture(){return this._renderTexture}dispose(){!this._renderTexture||(this._renderTexture.dispose(),delete this._renderTexture)}}});var gy,$F=m(()=>{gie();uS();fr();gy=class extends Qs{constructor(e){super();this._shader=null;this._width=0;this._height=0;this._anchor=new xe(0,0);this._canvasSmoothingEnabled=!0;this._smoothDownscaling=!1;this._onTextureUpdate=this._onTextureUpdate.bind(this),this.setTexture(e)}_onTextureUpdate(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}_renderWebGL(e){let t=e.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new VF),this._texture&&this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)}_renderCanvas(e){if(!this._texture)return;let t=this._worldTransform,i=this._texture.getFrame(),{width:o,height:n}=i,s=e.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-o|0,l=this._anchor.y*-n|0,c=e.getContext();if(c.setTransform(t.a,t.b,t.c,t.d,t.tx*s,t.ty*s),c.globalAlpha=this.getWorldAlpha(),!this._texture)return;let u=this._texture.getBaseTexture(),d=u.getPixelRatio(),p=u.getSource();c.imageSmoothingEnabled=this._canvasSmoothingEnabled,"beforeDraw"in e&&e.beforeDraw(c),c.drawImage(p,0,0,(p.naturalWidth||o)*d,(p.naturalHeight||n)*d,a*s,l*s,o*s,n*s)}isAtPosition(e){if(!this._texture)return;let t=this._worldTransform.applyInverseToVector(e),i=this._texture.getFrame(),{width:o,height:n}=i,s=new xe(-o,-n);s.multiply(this._anchor);let a=s.clone().add(o,n);return!(t.x<s.x||t.x>a.x||t.y<s.y||t.y>a.y)}getLocalBounds(){if(this._localBoundsNeedUpdate&&this._texture){let e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate&&this._texture){let e=this._bounds,t=this._texture.getFrame(),i=this._worldTransform,o=this._anchor,n=i.rectangleToCoordinates(t,o),s=n[0].x,a=n[0].y,l=s,c=a;n.forEach(({x:u,y:d})=>{s=Math.min(s,u),a=Math.min(a,d),l=Math.max(l,u),c=Math.max(c,d)}),e.x=s,e.width=Math.abs(l-s),e.y=a,e.height=Math.abs(c-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}getTexture(){return this._texture}clearTexture(e=!0){!this._texture||(this._texture.off("update",this._onTextureUpdate),e&&this._texture.dispose(),this._texture=null,this._potRenderer&&(e&&this._potRenderer.dispose(),delete this._potRenderer))}setTexture(e){!e||(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on("update",this._onTextureUpdate))}getShader(){return this._shader}setShader(e){this._shader=e}getWidth(){return this._width}setWidth(e){!this._texture||(this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}getHeight(){return this._height}setHeight(e){!this._texture||(this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}getDimensions(){return new xe(this._width,this._height)}getAnchor(){return this._anchor}setAnchor(e,t){this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}isSmoothDownscaling(){return this._smoothDownscaling}setSmoothDownscaling(e){this._smoothDownscaling=e}dispose(e=!1,t=!1){this._texture&&this._texture.off("update",this._onTextureUpdate),(e||t)&&this._texture&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()}}});var gje,$,fy=m(()=>{uS();Pre();kh();mS();Nre();$re();$F();Ih();PF();AF();ry();rF();Js();sy();gje={CanvasFilterManager:Td,Container:Qs,BaseTexture:lr,Texture:Qc,RenderTexture:dy,WebGLRenderTarget:Sl,CanvasRenderTarget:Cl,Sprite:gy,Filter:rs,Filters:CF,PixelArrayImage:hh,autoDetectRenderer(r,e,t={}){return $r.isSupported()?new gS(r,e,t):new Dh(r,e,t)},canvasRenderer(r,e,t={}){return new Dh(r,e,t)}},$=gje});var bie,yie,_ie=m(()=>{bie=class{static current(){return process.env.ENV}static isTest(){return process.env.ENV==="test"}static isDevelopment(){return process.env.ENV==="development"}static isProduction(){return process.env.ENV==="production"||!this.isTest()&&!this.isDevelopment()}},yie=bie});var vie,Rd,xS=m(()=>{vie=class{constructor(e){this._head=0,this._buf=e}peekInt8(){return this._buf[this._head]}peekInt16(e=!1){let t=this._buf[this._head],i=this._buf[this._head+1];return e?(i<<8)+t:(t<<8)+i}peekInt24(e=!1){let t=this._buf[this._head],i=this._buf[this._head+1],o=this._buf[this._head+2];return e?(o<<16)+(i<<8)+t:(t<<16)+(i<<8)+o}peekInt32(e=!1){let t=this._buf[this._head],i=this._buf[this._head+1],o=this._buf[this._head+2],n=this._buf[this._head+3];return e?(n<<32)+(o<<16)+(i<<8)+t:(t<<32)+(i<<16)+(o<<8)+n}writeInt8(e){this._buf[this._head]=e&255}writeInt16(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=e&255}readInt8(){let e=this.peekInt8();return this._head+=1,e}readInt16(e=!1){let t=this.peekInt16(e);return this._head+=2,t}readInt24(e=!1){let t=this.peekInt24(e);return this._head+=3,t}readInt32(e=!1){let t=this.peekInt32(e);return this._head+=4,t}readString(e){let t="";for(let i=0;i<e;i++){let o=this.readInt8();t+=String.fromCharCode(o)}return t}getHead(){return this._head}setHead(e){this._head=e}},Rd=vie});var bje,yje,Ah,CS=m(()=>{bje={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},yje={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},Ah={MARKERS:bje,EXIF_TAGS:yje}});var KF,_je,xie,Cie,Sie,wie=m(()=>{xS();Zs();CS();({invariant:KF}=K),{MARKERS:_je,EXIF_TAGS:xie}=Ah,Cie=class{constructor(e){this._buf=e,this._stream=new Rd(this._buf),this._stream.setHead(0),this._parse(),this._bigEndian=!1}isValid(){return this._stream.setHead(0),!(this._stream.readInt16()!==_je.EXIF||!(this._stream.readInt16()>0)||this._stream.readString(4)!=="Exif")}_parse(){if(!this.isValid())return;this._stream.setHead(10);let e=this._stream.getHead();this._bigEndian=!1;let t=this._stream.readInt16();t===18761?this._bigEndian=!1:t===19789?this._bigEndian=!0:KF(!1,"Invalid TIFF data: No endian type found"),KF(this._stream.readInt16(!this._bigEndian)===42,"Invalid TIFF data: No 0x002A");let i=this._stream.readInt32(!this._bigEndian);KF(i>=8,"Invalid TIFF data: First IFD offset < 8");let o=e+i,n=this._readTags(this._stream,e,o,this._bigEndian);this._tags=n.tags,this._tagData=n.tagData}getTags(){return this._tags}getTagData(){return this._tagData}setOrientation(e){if(this._tagData.Orientation){let{entryOffset:t}=this._tagData.Orientation;this._stream.setHead(t+8),this._stream.writeInt16(this._bigEndian?e:(e&255)<<8|e>>8&255)}}_readTags(e,t,i,o){e.setHead(i);let n=e.readInt16(!o),s={},a=[];for(let l=0;l<n;l++){let c=i+l*12+2;e.setHead(c);let u=e.readInt16(!o),d,p,h;if(xie[u]){u=xie[u],d=e.readInt16(!o),p=e.readInt32(!o),h=e.readInt32(!o)+t;let f=null;switch(d){case 1:case 7:if(p===1)f=e.readInt8(!o);else{f=[];for(let _=0;_<p;_++)f.push(e.readInt8(!o))}break;case 2:e.setHead(p>4?h:c+8),f=e.readString(p);break;case 3:if(e.setHead(p>2?h:c+8),p===1)f=e.readInt16(!o);else{f=[];for(let _=0;_<p;_++)f.push(e.readInt16(!o))}break;case 4:case 9:if(e.setHead(p>1?h:c+8),p===1)f=e.readInt32(!o);else{f=[];for(let _=0;_<p;_++)f.push(e.readInt32(!o))}break;case 5:case 10:if(e.setHead(h),p===1){let _=e.readInt32(!o),x=e.readInt32(!o);f=_/x}else{f=[];for(let _=0;_<p;_++){let x=e.readInt32(!o),y=e.readInt32(!o),D=x/y;f.push(D)}}break}s[u]=f,a[u]={value:f,numValues:p,entryOffset:c,valueOffset:h,type:d}}}return{tags:s,tagData:a}}getBuffer(){return this._buf}},Sie=Cie});var vje,Tie,XF,kie=m(()=>{xS();CS();({MARKERS:vje}=Ah),Tie=class{constructor(e){this._buf=e,this._stream=new Rd(this._buf),this._stream.setHead(0)}isValid(){if(this._stream.setHead(0),this._stream.readInt16()!==vje.APP0||!(this._stream.readInt16()>=16))return!1;let i=this._stream.readString(4),o=this._stream.readInt8();return!(i!=="JFIF"||o!==0)}setUnitDensity(e){this._stream.setHead(11),this._stream.writeInt8(e)}setDensityX(e){this._stream.setHead(12),this._stream.writeInt16(e)}setDensityY(e){this._stream.setHead(14),this._stream.writeInt16(e)}getUnitDensity(){return this._stream.setHead(11),this._stream.readInt8()}getDensityX(){return this._stream.setHead(12),this._stream.readInt16()}getDensityY(){return this._stream.setHead(14),this._stream.readInt16()}getBuffer(){return this._buf}},XF=Tie});var by,SS,xje,ta,yy,wS=m(()=>{xS();gh();CS();wie();kie();Zs();({MARKERS:by}=Ah),SS="data:image/jpeg;base64,",xje=new RegExp(`^${SS}`,"i"),ta=class{constructor(e){this._buf=e,this._stream=new Rd(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new Sie(this._getMarkerBuffer(by.EXIF)),this._jfifData=new XF(this._getMarkerBuffer(by.JFIF))}static toDataURL(e){return SS+es.encode(e)}static fromDataURL(e){let t=e.replace(SS,"");return es.decode(t)}restoreSegmentsInArray(e){return e=this.restoreExifTagsToImageData(e),this.restoreJfifSegmentToImageData(e)}restoreSegments(e){let t=ta.fromDataURL(e);return t=this.restoreSegmentsInArray(t),ta.toDataURL(t)}restoreExifTagsToImageData(e){if(!this._exifData.isValid())return e;let i=this._sliceIntoSegments(e)[1][0],o=e.slice(0,i),n=e.slice(i),s=o.concat(this._exifData.getBuffer());return s=s.concat(n),s}restoreJfifSegmentToImageData(e){if(!this._jfifData.isValid())return e;let t=this._sliceIntoSegments(e),i=this._findSegment(by.JFIF,t),o=[];if(i){let n=i[0],s=i[1],a=e.slice(0,n),l=e.slice(n,s),c=e.slice(s),u=new XF(l);u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity()),o=a.concat(l).concat(c)}else return e;return o}restoreExifTags(e){let t=ta.fromDataURL(e),i=this.restoreExifTagsToImageData(t);return ta.toDataURL(i)}restoreJfifSegment(e){if(!this._jfifData.isValid())return e;let t=ta.fromDataURL(e),i=this.restoreJfifSegmentToImageData(t);return ta.toDataURL(i)}setOrientation(e){return this._exifData.setOrientation(e)}static isJPEG(e){return xje.test(e)}static bufferIsJPEG(e){return e[0]===255&&e[1]===216&&e[2]===255}static fromBase64String(e){let t=e.replace(SS,""),i=es.decode(t);return new ta(i)}_findSegment(e,t=this._segments){for(let i=0;i<t.length;i++){let o=t[i][0],n=t[i][1];if(this._stream.setHead(o),this._stream.peekInt16()===e)return[o,n]}return!1}_getLastSegment(e=this._segments){return e[e.length-1]}_getMarkerBuffer(e,t=this._segments){let i=this._findSegment(e,t);if(i){let o=i[0],n=i[1];return this._buf.slice(o,n)}return!1}_sliceIntoSegments(e){let t=new Rd(e),i=[];for(;t.getHead()<e.length;){let o=t.readInt16();if(o!==by.SOI){if(o===by.SOS)break;if(o>=65280&&o<=65535){let n=t.readInt16(),s=t.getHead()+n-2;i.push([t.getHead()-4,s]),t.setHead(s)}else throw new Error(`Invalid marker: 0x${o.toString(16)}`)}}return this._stream.setHead(0),i}getTags(){return this._exifData.getTags()}getTagData(){return this._exifData.getTagData()}dispose(){this._buf=[],this._segments=[]}},yy=ta});var Eie,oo,TS=m(()=>{Eie=typeof window!="undefined"&&window.Image;oo=Eie});var kS,ES,YF=m(()=>{Od();Ch();kS=class extends Di{constructor(e=[]){super();this._onOperationUpdate=this._onOperationUpdate.bind(this),this._cacheEnabled=!0,this._stack=e,this._stack.forEach(t=>{t.on("update",this._onOperationUpdate)})}clear(){this.forEach(e=>this.remove(e)),this._stack=[]}hasChanges(){return this._stack.filter(e=>!!e).some(e=>e.hasChanges())}_onOperationUpdate(e,t){this.emit(Oh.OPERATION_UPDATED,e,t)}enableCache(){this._cacheEnabled=!0}disableCache(){this._cacheEnabled=!1}forEach(e){return this._stack.filter(t=>!!t).forEach(e)}render(e,t){let i=t,o=this._stack.filter(c=>!!c).filter(c=>c.getEnabled());o.reverse();let n=o.filter(c=>!c.isDirtyForRenderer(e.getRenderer()))[0],s=o.indexOf(n);o.reverse();let a=0;s!==-1&&(a=o.length-s-1);for(let c=0;c<a;c++)me.info(this.constructor.name,`Skipping ${o[c].constructor.name}`);let l=Promise.resolve(i);for(let c=a;c<o.length;c++){let u=o[c],d,p;l=l.then(h=>u.render(h).then(f=>(d&&f!==d&&!this._cacheEnabled&&p.disposeRenderTextures(),d=f,p=u,f)))}return l.then(c=>{let u=!o.some(d=>d.isDirtyForRenderer(e.getRenderer()));return{outputTexture:c,renderDone:u}})}validateSettings(){return Promise.all(this._stack.filter(e=>!!e).map(e=>e.validateSettings()))}setAllToDirty(e=!1){this.forEach(t=>t.setDirty(!0,e))}updateDirtinessForRenderer(e){let t=!1;for(let i=0;i<this._stack.length;i++){let o=this._stack[i];!o||(o.isDirtyForRenderer(e)&&(t=!0),t&&o.setDirtyForRenderer(!0,e))}}push(e){this._stack.push(e),e.on("update",this._onOperationUpdate)}pop(){let e=this._stack.pop();e&&(e.off("update",this._onOperationUpdate),e.dispose())}unshift(e){this._stack.unshift(e),e.on("update",this._onOperationUpdate)}clone(){return new kS(this._stack.slice(0))}get(e){return this._stack[e]}getByIdentifier(e){return K.Array.find(this._stack,t=>t&&t.constructor.identifier===e)}getIndexByIdentifier(e){return K.Array.findIndex(this._stack,t=>t&&t.constructor.identifier===e)}moveToTop(e){let t=K.Array.findIndex(this._stack,o=>o&&o.constructor.identifier===e);if(t<0||t===this._stack.length-1)return;let i=this.getByIdentifier(e);this._stack.splice(t,1),this._stack[this._stack.length]=i}set(e,t){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on("update",this._onOperationUpdate)}remove(e){let t=this._stack.indexOf(e);t!==-1&&(this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))}removeAt(e){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]}getStack(){return this._stack}dispose(){this.forEach(e=>{e.dispose()})}},ES=kS});var Iie,Die,IS,JF=m(()=>{Od();Iie=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oy(),Die=class{constructor(e,t){this._tag=e,this._name=t,this._start=Iie()}stop(){let t=Iie()-this._start,i=Math.round(1e3/t);me.info(this._tag,`${this._name} took ${t.toFixed(2)}ms (${i} FPS)`)}},IS=Die});var ZF,lt,QF=m(()=>{ts();Mo();fy();Th();JF();ZF=class extends qe{constructor(e,t={}){super(t,{enabled:{type:b.BOOLEAN,default:!0,serializable:!1}});this._sdk=e,this._cacheEnabled=!1,this._dirtiness={},this._sprite=new $.Sprite,this._container=new $.Container,this._container.addChild(this._sprite)}_onOptionsChange(){this.setDirty(!0)}render(e){if(!this.getEnabled())return me.info(this.constructor.name,"Disabled - skipping"),Promise.resolve(e);if(!this._renderTexture){let n=e.getDimensions().floor();this._renderTexture=new $.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}let t=this._sdk.getRenderer(),i,o;if(me.canLog("info")&&(o=new IS(this.constructor.name,"Rendering")),this.isDirtyForRenderer(t)){this._sprite.setTexture(e);let n=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(n),this._renderTexture.clear(),i=this._render(e).then((s=!1)=>(this.setDirtyForRenderer(s,t),this._renderTexture))}else me.info(this.constructor.name,"Rendering from cache"),i=Promise.resolve(this._renderTexture);return i.then(n=>(o&&o.stop(),n))}_render(e){let t;return this._sdk.getRenderer().isOfType(Pe.WEBGL)?t=this._renderWebGL.bind(this):t=this._renderCanvas.bind(this),t(e)}_renderWebGL(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}_renderCanvas(e){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}getNewDimensions(e){return e.clone()}onBeforeExport(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}onAfterExport(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}_onBeforeExport(){}_onAfterExport(){}setTemporaryTransformChange(e,t){this._tempTransformChange=e,this._tempInverseTransformChange=t}reset(){this._dirty=!0,this._glslPrograms={}}isDirtyForRenderer(e){let t=this._dirtiness[e.id];return typeof t=="undefined"?!0:t}setDirtyForRenderer(e,t,i=!1){this._dirtiness[t.id]=e}setDirty(e,t=!1){for(let i in this._dirtiness)this.setDirtyForRenderer(e,{id:i},t)}getSDK(){return this._sdk}getInputDimensions(e=!0){let t=this._sdk.getInputDimensions();e&&t.multiply(this._sdk.getZoom()).floor();let i;return this._sdk.getOperationsStack().forEach(o=>{if(!i){if(o===this){i=!0;return}t=o.getNewDimensions(t)}}),t.floor()}clone(){let e=this.constructor;return new e(this._sdk,this.serializeOptions())}disposeRenderTextures(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}dispose(){this.disposeRenderTextures(),this._sprite.dispose()}};ZF.identifier=null;lt=ZF});var Cje,DS,Oie,Rie=m(()=>{Od();vl();QF();({OptionType:Cje}=to),DS=class extends lt{getRotation(){let e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90;break}return e}_getFlipVertically(){let{Orientation:e}=this.getTags();return[5,7].indexOf(e)!==-1}_getFlipHorizontally(){let{Orientation:e}=this.getTags();return[2,4].indexOf(e)!==-1}_getFinalOptions(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}_render(e){let t=this._getFinalOptions(),o=t.rotation%360*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1),this._sprite.setRotation(o),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();let n=this._sprite.getBounds();return this._renderTexture.resizeTo(new xe(n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){let t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e}applyTo(e){let t=this._getFinalOptions(),i=K.createCanvas();Math.abs(t.rotation%180)===90?(i.width=e.height,i.height=e.width):(i.width=e.width,i.height=e.height);let o=i.getContext("2d"),n=t.rotation*Math.PI/180,s=.5*(i.width-e.width),a=.5*(i.height-e.height);return o.translate(s,a),o.translate(.5*e.width,.5*e.height),o.rotate(n),o.translate(-.5*e.width,-.5*e.height),t.flipVertically&&(o.translate(0,e.height),o.scale(1,-1)),t.flipHorizontally&&(o.translate(e.width,0),o.scale(-1,1)),o.drawImage(e,0,0),i}};DS.identifier="exif-orientation";DS.prototype.availableOptions={tags:{type:Cje.OBJECT,default:{}}};Oie=DS});var Ph={};Ht(Ph,{ExifOrientationOperation:()=>Oie});var eA=m(()=>{Rie()});var tA,Fie,Aie=m(()=>{Mo();fy();Th();wS();TS();Zs();tA=class extends qe{constructor(e,t={}){super(t);this._sdk=e}export(){let{imageFormat:e}=this._options,t=i=>i.renderDone?i:this._sdk.render().then(o=>t(o));return this.validateSettings().then(()=>this._prepareSDK().then(i=>t(i))).then(i=>{let{outputTexture:o,renderDone:n}=i,s=this._sdk.getRenderer(),a=s.getCanvas();return s.isOfType(Pe.WEBGL)&&(a=this._createCanvasFromTexture(o)),this._encodeImageFormat(a)}).then(i=>this._restoreExifMetadata(i,e)).then(i=>this._restoreSDK().then(()=>i))}_restoreExifMetadata(e,t,i){if(t===vd.JPEG){let o=this._sdk.getExif();o&&typeof e=="string"&&(e=o.restoreSegments(e))}return Promise.resolve(e)}_encodeAsDataURL(e,t,i){return K.isBrowser?Promise.resolve(e.toDataURL(t,i)):new Promise((o,n)=>{e.toDataURL(t,i,(s,a)=>{s?n(s):o(a)})})}_encodeAsHTMLImage(e,t,i){return this._encodeAsDataURL(e,t,i).then(o=>{let n=new oo;return n.src=o,Promise.resolve(n)})}_encodeAsBuffer(e,t,i){return Promise.reject(new Error("Unsupported platform for RenderType"))}_encodeAsMSBlob(e,t,i){return Promise.resolve(e.msToBlob())}_encodeAsBLOB(e,t,i){return new Promise((o,n)=>{e.toBlob(s=>{o(s)},t,i)})}_encodeImageFormat(e){let{imageFormat:t,quality:i}=this._options,{renderType:o}=this._options;switch(o===Po.BLOB&&e.msToBlob&&!e.toBlob&&(o=Po.MSBLOB),o){case Po.IMAGE:return this._encodeAsHTMLImage(e,t,i);case Po.DATAURL:return this._encodeAsDataURL(e,t,i);case Po.BUFFER:return this._encodeAsBuffer(e,t,i);case Po.MSBLOB:return this._encodeAsMSBlob(e,t,i);case Po.BLOB:return this._encodeAsBLOB(e,t,i)}return Promise.reject(new Error(`Unsupported RenderType: ${o}!`))}_prepareSDK(){let e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),rendererPixelRatio:e.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);let t=e.isOfType(Pe.CANVAS);e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);let i=this._sdk.getOperationsStack();return i.forEach(o=>{o.disposeRenderTextures()}),i.disableCache(),this._sdk.render()}_restoreSDK(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);let t=this._sdk.getRenderer(),i=t.isOfType(Pe.CANVAS);return t.setPixelRatio(this._sdkSettings.rendererPixelRatio),t.resizeTo(this._sdkSettings.dimensions,i),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}_createCanvasFromTexture(e){let t=this._sdk.getRenderer(),i=this._sdk.getFinalDimensions(),o=this._sdk.getRenderer().getContext(),n=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,n);let s=e.getBaseTexture().getGLTextureForRenderer(t);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,s,0);let a=new Uint8Array(i.x*i.y*4);o.readPixels(0,0,i.x,i.y,o.RGBA,o.UNSIGNED_BYTE,a);let l=this._checkPixelsForTransparency(a),c;if(l){let h=new $.Sprite(e);h.setFilters([new $.Filters.UnpremultiplyFilter]);let f=new $.Container;f.addChild(h),c=new $.RenderTexture(t,i.x,i.y),c.render(f);let _=c.getBaseTexture().getGLTextureForRenderer(t);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,_,0),o.readPixels(0,0,i.x,i.y,o.RGBA,o.UNSIGNED_BYTE,a),t.setRenderTarget(),c.dispose()}let u=K.createCanvas();u.width=i.x,u.height=i.y;let d=u.getContext("2d"),p=d.createImageData(i.x,i.y);return p.data.set(a),d.putImageData(p,0,0),o.deleteFramebuffer(n),u}_checkPixelsForTransparency(e){let t=this._sdk.getFinalDimensions(),i=t.x*t.y*4,o;for(let n=3;n<i;n+=4)if(o=e[n],o!==255)return!0;return!1}};tA.prototype.availableOptions={renderType:{type:b.STRING,available:K.values(Po),default:Po.IMAGE},imageFormat:{type:b.STRING,available:K.values(vd),default:vd.PNG},quality:{type:b.NUMBER,default:.8}};Fie=tA});var Sje,wje,xn,Pie,Tje,rA,iA,kl,kje,Eje,Gt,Ije,Dje,Mie,Bie,Qt,Lie=m(()=>{Od();wS();TS();Aie();YF();JF();eA();({Rectangle:Sje,Constants:wje,Engine:xn,Utils:Pie,EventEmitter:Tje,Events:rA,Vector2:iA,Log:kl,Base64:kje,Color:Eje}=hy),Gt=r=>Pie.byteArrayToString(kje.decode(r)),{RenderType:Ije,ImageFormat:Dje,RendererType:Mie}=wje,Bie=class extends Tje{constructor(e,t={}){super();ce(this,"_onContextLost",()=>{this.emit("context-lost")});ce(this,"_initWatermark",()=>{this._options.watermark&&this._options.watermark.watermarkURI&&(this._watermarkOperation=this.createOperation("watermark",{watermarkURI:this._options.watermark.watermarkURI,alignment:this._options.watermark.alignment,inset:this._options.watermark.inset,size:this._options.watermark.size,crossOrigin:this._options.crossOrigin}))});if(this._onOperationUpdate=this._onOperationUpdate.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.version="3.9.0",this[Gt("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,this._preferredRenderer=e,this._options=U(T({},t),{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:Eje.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:Math.max(typeof window!="undefined"&&window.devicePixelRatio||1,1)}),this._options.smoothUpscaling&&(xn.BaseTexture.DefaultMagFilter=xn.BaseTexture.LinearFilter),this._options.extensions=Object.assign(this._options.extensions,{operations:[],controls:[],languages:[]}),kl.setLevel(this._options.logLevel),this[Gt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,!this[Gt("X29wdGlvbnM=")][Gt("bGljZW5zZQ==")])this[Gt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,this._l=new hy[Gt("RnJlZUxpY2Vuc2VDaGVja2Vy")];else{let o=hy[Gt("TGljZW5zZUNoZWNrZXI=")];this._l=new o(this[Gt("X29wdGlvbnM=")][Gt("bGljZW5zZQ==")]),this._cv(!0).then(()=>{this._ct()}).catch(n=>{kl.error(Gt("TGljZW5zaW5n"),n.message)})}this._defaultRenderMode=this._options.renderMode,this._renderMode=this._options.renderMode,this._textureQuality=this._options.textureQuality,this._offset=new iA,this._zoom=this._options.zoom,this._spriteScale=this._options.spriteScale,this._rotation=this._options.rotation,this._operations={},this._operationsStack=null,this.setOperationsStack(new ES),this._container=new xn.Container,this._sprite=new xn.Sprite,this._container.addChild(this._sprite),this._inputTexture=this._options.inputTexture,this._currentInputTexture=null,this._currentTexture=null,this._resizedTexture=null,this._resizedContainer=new xn.Container,this._resizedSprite=new xn.Sprite,this._resizedContainer.addChild(this._resizedSprite),this._texturesToDispose=[],this.setSmoothDownscaling(this._options.smoothDownscaling),this._registerOperations(),this._initRenderer();let i=this._renderer.constructor.type;this._options.displayWelcomeMessage,this[Gt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&kl.log(Gt("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LmltZy5seS9zaWdudXAgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LmltZy5seS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2ltZy5seS9kb2NzL3Blc2RrL3dlYi9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),this._options.image&&this.setImage(this._options.image,this._options.exif)}_ct(){this._l.exp()&&(this._l.isExp()?kl.error(Gt("TGljZW5zaW5n"),Gt("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg==")):kl.warn(Gt("TGljZW5zaW5n"),Gt("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}_cv(e=!1){return this._l.c().catch(t=>{this[Gt("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;let i=Gt("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(t.code==="ELICEXP"?i=Gt("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg=="):t.code==="ELICINVHOST"?i=Gt("VGhlIGJ1bmRsZSBpZGVudGlmaWVycyB0aGF0IHlvdSBzcGVjaWZpZWQgaW4geW91ciBsaWNlbnNlIGZpbGUgZG8gbm90IG1hdGNoIHRoZSBhcHAncyBidW5kbGUgaWRlbnRpZmllci4gUGxlYXNlIHVwZGF0ZSBhbmQgcmVkb3dubG9hZCB5b3VyIGxpY2Vuc2UgZnJvbSB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZCBhdCBodHRwczovL3d3dy5pbWcubHkvbG9naW4u"):t.code==="ELICINVPLAT"?i=Gt("VGhlIGxpY2Vuc2UgdGhhdCB5b3Ugc3BlY2lmaWVkIGlzIGZvciBhbm90aGVyIHBsYXRmb3JtLiBQbGVhc2UgZG93bmxvYWQgeW91ciBsaWNlbnNlIGZvciB0aGUgd2ViIHBsYXRmb3JtIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg=="):t.code==="ELICINVFMT"?i=Gt("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",typeof this._options.license):t.code==="ELICINV"?i=Gt("VGhlIHNpZ25hdHVyZSBvZiB5b3VyIGxpY2Vuc2UgaXMgbm90IHZhbGlkLiBQbGVhc2UgdHJ5IHRvIHJlZG93bmxvYWQgeW91ciBsaWNlbnNlIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg=="):i=Gt("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5IHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),t.message=i,new Error(t)})}_t(){this._l.t()}_fl(){return this[Gt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}_onOperationUpdate(...e){this.emit(rA.OPERATION_UPDATED,...e)}_onContextRestored(){kl.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(e=>{e.disposeRenderTextures()}),this.render()}export(e=Ije.DATAURL,t=Dje.PNG,i=.8){return this._cv(!0).then(()=>(this.hasChanges()&&this._t(),this._operationsStack.forEach(n=>{n.onBeforeExport()}),new Fie(this,{renderType:e,imageFormat:t,quality:i}).export().then(n=>(this._operationsStack.forEach(s=>{s.onAfterExport()}),Promise.resolve(n)))))}render(e=!0){if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");let t=this._renderer.getContext();t.startFrame&&t.startFrame();let i;kl.canLog("info")&&(i=new IS("\u26A1\u26A1\u26A1","Frame rendering")),kl.info("\u26A1\u26A1\u26A1","Rendering starts");let o=this._operationsStack;return o.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(n=>{this._renderMode==="export"&&(n=this._inputTexture),this._currentTexture=n,this._sprite.setTexture(n),this._container.updateTransform()}).then(()=>o.validateSettings()).then(()=>((this._fl()||!this[Gt("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")])&&(o.getByIdentifier("license-watermark")?o.moveToTop("license-watermark"):this.createOperation("license-watermark")),o.getByIdentifier("watermark")?o.moveToTop("watermark"):this._initWatermark(),o.render(this,this._currentTexture))).then(n=>{let{outputTexture:s}=n;switch(this._currentTexture=s,this._sprite.setTexture(this._currentTexture),this._renderMode){case"dynamic":{let a=this._renderer.getDimensions().clone().divide(2).add(this._offset);this._container.setScale(this._zoom/this.getTextureScale(),this._zoom/this.getTextureScale()),this._container.setPosition(a),this._sprite.setAnchor(.5,.5),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(this._rotation);break}case"export":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(0);break;case"adapter":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(1,1),this._sprite.setRotation(0);break}return e&&this._renderer.render(this._container),n}).then(n=>(i&&i.stop(),t.endFrame&&t.endFrame(),this._disposeTextures(),n))}getTextureScale(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}_prepareTexture(){return new Promise((e,t)=>{let i=this.getTextureScale();if(this._textureQuality===1)return e(this._inputTexture);let o=this.getInputDimensions().multiply(i).floor(),n;this._resizedTexture?this._resizedTexture.getDimensions().equals(o)||(this._resizedTexture.resizeTo(o),n=!0):(this._resizedTexture=new xn.RenderTexture(this._renderer,o.x,o.y),n=!0),n&&(this._resizedSprite.setScale(i,i),this._resizedSprite.setTexture(this._inputTexture),this._resizedTexture.render(this._resizedContainer)),e(this._resizedTexture)})}_registerOperations(){this._operations={};for(let e in Ph){let t=Ph[e];this._operations[t.identifier]=t}this._operations=T(T({},this._operations),this._options.extensions.operations)}registerOperations(e){e.forEach(t=>{this._operations[t.identifier]=t})}setAllOperationsToDirty(e=!1){this._operationsStack.setAllToDirty(e)}createOperation(e,t={},i=!0){let o=this._operations[e];if(!o)throw new Error(`No operation with identifier \`${e}\` found.`);let n=new o(this,t);return i&&this.addOperation(n),n}addOperation(e){this._operationsStack.push(e)}removeOperation(e){this._operationsStack.remove(e)}getInputDimensions(){let e=this._inputTexture.getFrame();return new iA(e.width,e.height)}getFinalDimensions(e=!1){let t=this.getInputDimensions();return this._operationsStack.forEach(o=>{!o.getEnabled()||(t=o.getNewDimensions(t))}),e&&t.multiply(this._spriteScale),t.floor()}getOutputDimensions(e=!1){return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}getOutputTextureDimensions(e=!1){let t=this.getTextureScale(),i=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(o=>{i=o.getNewDimensions(i)}),i}getCrossOrigin(){return Pie.getCrossOrigin(this._options.crossOrigin||"Anonymous")}_initRenderer(){let e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor},t,i;if(this._renderMode!=="export"&&this._options.canvas){let{canvas:o}=this._options;t=o.width,i=o.height}else if(this._inputTexture){let o=this.getFinalDimensions();t=o.x,i=o.y}else t=1,i=1;switch(this._preferredRenderer){case Mie.WEBGL:this._renderer=xn.autoDetectRenderer(t,i,e),this._renderer.on("context-restored",this._onContextRestored),this._renderer.on("context-lost",this._onContextLost);break;case Mie.CANVAS:this._renderer=xn.canvasRenderer(t,i,e),this._renderer.on("context-restored",this._onContextRestored);break;default:kl.warn("PhotoEditorSDK",`PhotoEditorSDK Error: Renderer \`${this._preferredRenderer}\` not supported. Falling back to automatically detected renderer.`),this._renderer=xn.autoDetectRenderer(t,i,e)}}resizeTo(e){this._renderer.resizeTo(e,!0)}reset(){this._operationsStack.clear()}parseExif(e){if(!e)return;let{src:t}=e,i=!1,o=null;if(i=yy.isJPEG(t),o=t,i){let n=null;try{n=yy.fromBase64String(o)}catch(s){}return n||void 0}}_handleExifOrientation(){let e=this._exif.getTags();if(e&&e.Orientation){let t=e.Orientation!==1&&e.Orientation!==2,i=[2,4,5,7].indexOf(e.Orientation)!==-1;if(t||i){if(typeof navigator=="undefined")this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e);else{let o=window&&window.navigator&&window.navigator.userAgent||"";(!!o.match(/msie|trident/i)||o.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image"))&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e))}this._exif.setOrientation(1)}}}correctExifOrientation(e){let t=this.parseExif(e);if(!t)return e;let i=t.getTags();if(i&&i.Orientation){let o=i.Orientation!==1&&i.Orientation!==2,n=[2,4,5,7].indexOf(i.Orientation)!==-1;if(o||n){if(typeof navigator=="undefined"){let s=this.createOperation("exif-orientation",{},!1);s.setTags(i),e=s.applyTo(e)}else{let s=window&&window.navigator&&window.navigator.userAgent||"";if(!!s.match(/msie|trident/i)||s.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image")){let a=this.createOperation("exif-orientation",{},!1);a.setTags(i),e=a.applyTo(e)}}return t.setOrientation(1),i.Orientation=1,e}}return e}hasImage(){return this._image!==null&&typeof this._image!="undefined"}getImage(){return this._image}disposeTexture(e){this._texturesToDispose.push(e)}_disposeTextures(){for(let e=0;e<this._texturesToDispose.length;e++)this._texturesToDispose[e].dispose();this._texturesToDispose=[]}setImage(e,t=null,i=null){this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();let o=new xn.BaseTexture(this._image),n=new Sje(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);i&&(n.width=i.x,n.height=i.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new xn.Texture(o,n),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}setInputTexture(e){this._inputTexture=e}getCanvas(){return this._renderer.getCanvas()}setCanvas(e){this._renderer.setCanvas(e)}getSprite(){return this._sprite}getContainer(){return this._container}getOperationsStack(){return this._operationsStack}setOperationsStack(e){this._operationsStack&&this._operationsStack.off(rA.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(rA.OPERATION_UPDATED,this._onOperationUpdate)}getOperations(){return this._operations}getRenderer(){return this._renderer}getOffset(){return this._offset}setOffset(e,t){e instanceof iA?this._offset.copy(e):this._offset.set(e,t)}getRenderMode(){return this._renderMode}setRenderMode(e){this._renderMode=e}getZoom(){return this._zoom}setZoom(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}getTextureQuality(){return this._renderMode==="export"?1:this._textureQuality}setTextureQuality(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,e),this._textureQuality===1&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}getSpriteScale(){return this._spriteScale}setSpriteScale(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()}getPixelRatio(){return this._options.pixelRatio}getExif(){return this._exif}getOptions(){return this._options}getInputTexture(){return this._inputTexture}setSmoothDownscaling(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)}setRotation(e){this._rotation=e}getRotation(){return this._rotation}hasChanges(){return this.getOperationsStack().hasChanges()}dispose(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}},Qt=Bie});var Oje,Me,_y=m(()=>{ts();sre();Mo();fy();gh();xh();Th();_ie();Ch();wS();TS();qF();GF();YF();Zs();eA();QF();Lie();Qt.version="3.9.0";Qt.Math=he;Qt.Operations=Ph;Qt.Engine=$;Qt.Color=ee;Qt.LicenseChecker=_S;Qt.Operation=lt;Qt.EventEmitter=Di;Qt.Utils=K;Qt.Env=yie;Qt.OperationsStack=ES;Qt.EXIF=yy;Qt.Image=oo;Qt.Configurable=qe;Qt.Log=me;Qt.Loaders=dF;Qt.RenderType=Po;Qt.ImageFormat=vd;Qt.OptionType=b;Qt.RendererType=Pe;Qt.UniformType=ne;Qt.Base64=es;Oje={};Qt.UI=Oje;Me=Qt});var re=m(()=>{_y();_y()});var Uie,zie=m(()=>{Uie=`precision highp float;

varying vec2 v_texCoord;
uniform sampler2D u_image;

uniform float u_gamma;
uniform float u_shadows;
uniform float u_highlights;
uniform float u_whites;
uniform float u_blacks;

uniform mat4 u_colorMatrix;
uniform vec4 u_colorOffset;

const float EPSILON = 0.0000001;

float calculateLuminance(vec3 rgb) {
    // This is the luminance calculation part of the RGB to HSL formular.
    vec4 p = mix(
        vec4(rgb.gb, 0.0, -1.0 / 3.0),
        vec4(rgb.bg, -1.0, 2.0 / 3.0),
        vec4(rgb.g < rgb.b)
    );

    vec4 q = mix(
        vec4(rgb.r, p.yzx),
        vec4(p.xyw, rgb.r),
        vec4(rgb.r < p.x)
    );

    float croma = q.x - min(q.w, q.y);
    float luminance = q.x - croma * 0.5;
    return luminance;
}

vec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){
  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
}

void main() {

  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);
  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha

  // Apply gamma
  if (u_gamma != 1.0) {
    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));
  }

  // Apply shadows and highlights
  float luminance = calculateLuminance(color.rgb);

  float shadow = u_shadows >= 0.0
    ? clamp(
          pow(luminance, 1.0 / (u_shadows + 1.0))
          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76
          - luminance
    , 0.0, max(u_shadows, 1.0))
    : -clamp(
          pow(luminance, 1.0 / (-u_shadows + 1.0))
          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76
          - luminance
    , 0.0, max(-u_shadows, 1.0));

  float highlight = u_highlights < 0.0
    ? clamp(
          1.0
          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))
          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8
          - luminance
     , -1.0, 0.0)
    : -clamp(
          1.0
          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))
          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8
          - luminance
     , -1.0, 0.0);

  // Bright color need more contrast and dark color need more brightness.
  // This is to keep saturatation because the color information of a dark colors is lost.
  float shadowContrast   = shadow * luminance * luminance;
  float shadowBrightness = shadow - shadowContrast;

  float offset = luminance + shadowContrast + highlight;
  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);
  
  // Apply Color Matrix
  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;
  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);
  color = clamp(color, 0.0, 1.0);
  color.rgb *= color.a; // Reset premultiplied alpha

  gl_FragColor = color;
}
`});function oA(r,e,t,i,o){return(r-e)*(o-i)/(t-e)+i}var Fje,Mh,Aje,nA,OS,sA=m(()=>{re();zie();({ColorMatrix:Fje}=he),Mh=1e-7;Aje=r=>{let e=Math.max(r.r,r.g,r.b),t=Math.min(r.r,r.g,r.b);return(e+t)/2},nA=class extends $.Filter{constructor(){super();this._fragmentSource=Uie}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{colorMatrix:c,gamma:u,shadows:d,highlights:p,whites:h,blacks:f}=this._options,_=u!==1,x=d!==0||p!==0,y=new ee(0,0,0,0);for(let D=0;D<n.width*n.height;D++){let E=D*4;if(y.r=l.data[E]/255,y.g=l.data[E+1]/255,y.b=l.data[E+2]/255,_&&(y.r=Math.pow(y.r,1/Math.max(u,Mh)),y.g=Math.pow(y.g,1/Math.max(u,Mh)),y.b=Math.pow(y.b,1/Math.max(u,Mh))),x){let F=Aje(y),N=d>=0?K.clamp(Math.pow(F,1/(d+1))+Math.pow(F,2/(d+1))*-.76-F,0,Math.max(d,1)):-K.clamp(Math.pow(F,1/(-d+1))+Math.pow(F,2/(-d+1))*-.76-F,0,Math.max(-d,1)),R=p<0?K.clamp(1-Math.pow(1-F,1/(1-p))-Math.pow(1-F,2/(1-p))*-.8-F,-1,0):-K.clamp(1-Math.pow(1-F,1/(1+p))-Math.pow(1-F,2/(1+p))*-.8-F,-1,0),B=N*F*F,se=N-B,A=F+B+R;y.r=K.clamp(A*((y.r+se)/Math.max(F,Mh)),0,1),y.g=K.clamp(A*((y.g+se)/Math.max(F,Mh)),0,1),y.b=K.clamp(A*((y.b+se)/Math.max(F,Mh)),0,1)}y=c.apply(y).clamp(0,1),y.r=oA(y.r,0,1,f/2,1+h/2),y.g=oA(y.g,0,1,f/2,1+h/2),y.b=oA(y.b,0,1,f/2,1+h/2),l.data[E]=y.r*255,l.data[E+1]=y.g*255,l.data[E+2]=y.b*255}a.putImageData(l,0,0)}};nA.prototype.availableOptions={gamma:{type:b.NUMBER,default:1,uniformType:ne.FLOAT},shadows:{type:b.NUMBER,default:0,uniformType:ne.FLOAT},highlights:{type:b.NUMBER,default:1,uniformType:ne.FLOAT},whites:{type:b.NUMBER,default:0,uniformType:ne.FLOAT},blacks:{type:b.NUMBER,default:0,uniformType:ne.FLOAT},colorMatrix:{type:b.COLOR_MATRIX,default:new Fje,uniformType:ne.MAT4},colorOffset:{type:b.ARRAY,default:[],uniformType:ne.FLOAT4}};OS=nA});var qie,Nie=m(()=>{qie=`precision mediump float;

// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE
uniform sampler2D u_image;

// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)
uniform vec2 u_pixelDimension;

// Range (-1.0 - 1.0)
uniform float u_clarity;

varying vec2 v_texCoord;

uniform mat4 u_colorMatrix;
uniform vec4 u_colorOffset;

const float EPSILON = 0.000001;

vec4 unpremultiply(vec4 col) {
    col.rgb /= max(col.a, EPSILON);
    return col;
}

void main() {
    vec4 color = texture2D(u_image, v_texCoord);
    color = unpremultiply(color);

    // L = Left, R = Right, C = Center, T = Top, B = Bottom
    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));
    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));
    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));

    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));
    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));
    
    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));
    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));
    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));

    vec4 mergedColor = color;
    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;
    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;
    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;

    mergedColor /= 9.0;

    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);
    // 1.0 and 0.0 result in white not black, therefore we clamp

    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,
    // and for values between 0.1 and 0.2 it will produce a gradient.
    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.
    // And values above 0.9 will be mapped to 0.
    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));

    // here we apply the high pass filter. Its strength is determined by the uniform ,
    // and the frequence factor. That means the only the mid tones are affected by this filter.
    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.
    // Therefore we see this little magic number '3.7'.
    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;

    // apply exposure but only to the mid tones.
    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);

    // apply contrast and desaturation matrix
    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;

    color.rgb *= color.a; // Premultiply alpha

    gl_FragColor = clamp(color, 0.0, 1.0);
}
`});var Mje,Bje,aA,Hie,jie=m(()=>{re();Nie();({Vector2:Mje,ColorMatrix:Bje}=he),aA=class extends $.Filter{constructor(){super();this._fragmentSource=qie}_applyCanvas(e,t,i,o=!1){let n=i.getContext(),s=t.getCanvas(),a=t.getContext(),{clarity:l}=this._options,{colorMatrix:c}=this._options,u=new ee(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),{width:d}=s,{height:p}=s,h=a.getImageData(0,0,d,p),f=n.createImageData(d,p);this.canvasShader(h,f,l,c,u),n.putImageData(f,0,0)}canvasShader(e,t,i,o,n){let s=(y,D,E)=>Math.min(Math.max(y,D),E),a=(y,D,E)=>{let F=s((E-y)/(D-y),0,1);return F*F*(3-2*F)},l=e.width*4,{length:c}=e.data,u=c-1,d=0,p=e.data,h=t.data,f=new ee,_=255*9,x=y=>(y=y<d?d:y,y=y>u?u:y,p[y]);for(let y=0;y<c;y+=4){let D=x(y+0),E=x(y+1),F=x(y+2),N=x(y+3),R=(D+x(y-4-l+0)+x(y-4+0)+x(y-4+l+0)+x(y-l+0)+x(y+l+0)+x(y+4-l+0)+x(y+4+0)+x(y+4+l))/_,B=(E+x(y-4-l+1)+x(y-4+1)+x(y-4+l+1)+x(y-l+1)+x(y+l+1)+x(y+4-l+1)+x(y+4+1)+x(y+4+l+1))/_,se=(F+x(y-4-l+2)+x(y-4+2)+x(y-4+l+2)+x(y-l+2)+x(y+l+2)+x(y+4-l+2)+x(y+4+2)+x(y+4+l+2))/_,A=(N+x(y-4-l+3)+x(y-4+3)+x(y-4+l+3)+x(y-l+3)+x(y+l+3)+x(y+4-l+3)+x(y+4+3)+x(y+4+l+3))/_;D/=255,E/=255,F/=255,N/=255;let q=s(D*.3+E*.59+F*.1,.111111,.999999),ue=Math.min(a(1-q,0,.11),a(q,0,.11)),_e=i*3.7*ue,ye=Math.pow(2,i*.27*ue),De=s(D+s((D-R)*_e,0,10),0,1)*ye,Kt=s(E+s((E-B)*_e,0,10),0,1)*ye,oe=s(F+s((F-se)*_e,0,10),0,1)*ye,J=s(N+s((N-A)*_e,0,10),0,1);f.set(De,Kt,oe,J);let Z=o.apply(f).clamp(0,1);h[y+0]=Z.r*255,h[y+1]=Z.g*255,h[y+2]=Z.b*255,h[y+3]=Z.a*255}}};aA.prototype.availableOptions={clarity:{type:b.NUMBER,default:0,uniformType:ne.FLOAT},pixelDimension:{type:b.VECTOR2,default:new Mje(100,100),uniformType:ne.FLOAT2},colorMatrix:{type:b.COLOR_MATRIX,default:new Bje,uniformType:ne.MAT4},colorOffset:{type:b.ARRAY,default:[],uniformType:ne.FLOAT4}};Hie=aA});var Gie,Wie=m(()=>{Gie=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec2 u_pixelDimension;
uniform float u_sharpness;
 
const float EPSILON = 0.000001;
 
void main() {
    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);

    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));
    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;
 
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);
 
    color.rgb /= max(color.a, EPSILON); // unpremultiply
    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply
 
    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);
 
    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);
      
    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply
}`});var zje,lA,Vie,$ie=m(()=>{re();Wie();({Vector2:zje}=he),lA=class extends $.Filter{constructor(){super();this._fragmentSource=Gie}_applyCanvas(e,t,i,o=!1){let n=i.getContext(),s=t.getCanvas(),a=t.getContext(),{sharpness:l}=this._options,{width:c}=s,{height:u}=s,d=a.getImageData(0,0,c,u),p=n.createImageData(c,u);this.canvasShader(d,p,l),n.putImageData(p,0,0)}canvasShader(e,t,i){let o=(F,N,R)=>Math.min(Math.max(F,N),R),n=1e-6,{width:s}=e,{height:a}=e,l=e.data,c=t.data,u=(F,N,R)=>F*(1-R)+N*R,d=F=>o(l[F]/255,0,1),p=(F,N)=>{let R=o(F,0,s-1),B=o(N,0,a-1);return 4*(R+s*B)},h=[],f=[],_=[-1,0,0,1],x=[0,-1,1,0],y=i>0?-1:.2,D=i>0?5:.2,E=Math.abs(i);for(let F=0;F<s;F++)for(let N=0;N<a;N++){let R=p(F,N);h[0]=d(R+0),h[1]=d(R+1),h[2]=d(R+2),h[3]=d(R+3),f[0]=D*h[0]*h[3],f[1]=D*h[1]*h[3],f[2]=D*h[2]*h[3],f[3]=D*h[3];for(let B=0;B<4;B++){let se=_[B],A=x[B],q=p(F+se,N+A),ue=d(q+3);f[3]+=y*ue;for(let _e=0;_e<3;_e++)f[_e]+=y*d(q+_e)*ue}for(let B=0;B<3;B++)f[B]/=Math.max(f[3],n),f[B]=o(f[B],0,1);f[3]=o(f[3],0,1);for(let B=0;B<4;B++)h[B]=o(u(h[B],f[B],E),0,1),c[R+B]=h[B]*255}}};lA.prototype.availableOptions={sharpness:{type:b.NUMBER,default:0,uniformType:ne.FLOAT},pixelDimension:{type:b.VECTOR2,default:new zje(100,100),uniformType:ne.FLOAT2}};Vie=lA});var Xie,Kie=m(()=>{Xie=`precision mediump float;

// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE
uniform sampler2D u_image;

// Range (-1.0 - 1.0)
uniform float u_temperature;

const lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);

const mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);
const mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);

const float EPSILON = 0.0000001;

varying vec2 v_texCoord;
void main() {
  float temperature = u_temperature;
  const float tint = 0.0;
  vec4 source = texture2D(u_image, v_texCoord);

  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha

  vec3 yiq = RGBtoYIQ * source.rgb;
  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);
  vec3 rgb = YIQtoRGB * yiq;

  vec3 processed = mix(
    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),
    (2.0 * rgb * warmFilter),
    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)
  );

  vec4 color = vec4(mix(rgb, processed, temperature), source.a);

  color.rgb *= color.a;   // Premultiply alpha again

  gl_FragColor = color;
}
`});var cA,Yie,Jie=m(()=>{re();Kie();cA=class extends $.Filter{constructor(){super();this._fragmentSource=Xie}_applyCanvas(e,t,i,o=!1){let n=i.getContext(),s=t.getCanvas(),a=t.getContext(),{temperature:l}=this._options,{width:c}=s,{height:u}=s,d=a.getImageData(0,0,c,u),p=n.createImageData(c,u);this.canvasShader(d,p,l),n.putImageData(p,0,0)}canvasShader(e,t,i){let o=(y,D,E)=>Math.min(Math.max(y,D),E),n=(y,D,E)=>y*(1-E)+D*E,s=(y,D)=>{let E=y[0]*D[0]+y[3]*D[1]+y[6]*D[2],F=y[1]*D[0]+y[4]*D[1]+y[7]*D[2],N=y[2]*D[0]+y[5]*D[1]+y[8]*D[2];return[E,F,N]},{length:a}=e.data,l=a-1,c=0,u=e.data,d=t.data,p=y=>(y=y<c?c:y,y=y>l?l:y,u[y]),h=[.93,.54,0],f=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],_=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],x=0;for(let y=0;y<a;y+=4){let D=p(y+0)/255,E=p(y+1)/255,F=p(y+2)/255,N=p(y+3)/255,B=s(f,[D,E,F]);B.z=o(B.z+x*.5226*.1,-.5226,.5226);let se=s(_,B),A=[se[0]<.5?2*se[0]*h[0]:1-2*(1-se[0])*(1-h[0]),se[1]<.5?2*se[1]*h[1]:1-2*(1-se[1])*(1-h[1]),se[2]<.5?2*se[2]*h[2]:1-2*(1-se[2])*(1-h[2])];d[y+0]=n(se[0],A[0],i)*255,d[y+1]=n(se[1],A[1],i)*255,d[y+2]=n(se[2],A[2],i)*255,d[y+3]=N*255}}};cA.prototype.availableOptions={temperature:{type:b.NUMBER,default:0,uniformType:ne.FLOAT}};Yie=cA});var iu,vy,Zie,Qie=m(()=>{re();sA();jie();$ie();Jie();({ColorMatrix:iu}=he),vy=class extends lt{constructor(...e){super(...e);this._clarityFilter=new Hie,this._temperatureFilter=new Yie,this._sharpnessFilter=new Vie,this._filter=new OS,this._sprite.setFilters([this._clarityFilter,this._temperatureFilter,this._filter])}_render(e){let t=e.getDimensions();t.x=1/t.x,t.y=1/t.y;let i=new iu;i.multiply(iu.createSaturationMatrix(-.3*this._options.clarity+1)),i.multiply(iu.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:i,colorOffset:i.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:t});let o=new iu;o.multiply(iu.createExposureMatrix(this._options.exposure)),o.multiply(iu.createSaturationMatrix(this._options.saturation+1)),o.multiply(iu.createContrastMatrix((this._options.contrast>0?this._options.contrast*2:this._options.contrast)+1)),o.multiply(iu.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:o,colorOffset:o.getOffsets()});let n=[];return this._options.clarity!==0&&n.push(this._clarityFilter),this._options.sharpness!==0&&n.push(this._sharpnessFilter),this._options.temperature!==0&&n.push(this._temperatureFilter),n.push(this._filter),this._sprite.setFilters(n),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}};vy.identifier="adjustments";vy.prototype.availableOptions={brightness:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:b.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:b.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:b.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}};Me.Operations.AdjustmentsOperation=vy;Zie=vy});var toe,eoe=m(()=>{toe=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(gl_FragCoord.xy / u_texSize.xy);
    float radius = u_blurRadius;

    const float steps = 30.0;

    for (float t = -steps; t <= steps; t++) {
        float percent = (t + offset - 0.5) / steps;
        float weight = 1.0 - abs(percent);

        // Somehow \`sample\` is a keyword in headless-gl
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
}
`});var RS,uA,no,Bh=m(()=>{re();eoe();({Vector2:RS}=he),uA=class extends $.Filter{constructor(...e){super(...e);this._fragmentSource=toe,this._lastBlurRadius=null,this._lastDimensions=new RS(0,0),this._blurredRenderTarget=new $.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=!1,n=null){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}let s=t.getCanvas(),a=t.getContext(),l=i.getContext();this._lastBlurRadius===this._options.blurRadius&&l.drawImage(s,0,0);let c=a.getImageData(0,0,s.width,s.height),u=l.getImageData(0,0,s.width,s.height),d=this._options.blurRadius,{delta:p}=this._options,h=30;for(let f=0;f<s.width;f++)for(let _=0;_<s.height;_++){let y=(f+_*s.width)*4,D=0,E=0,F=0,N=0,R=0;n&&(d=n(f/s.width,_/s.height));let B=this._random(f,1-_/s.height);for(let se=-h;se<=h;se++){let A=(se+B-.5)/h,q=1-Math.abs(A),ue=p.x*A*d,_e=p.y*A*d,ye=Math.max(Math.min(f+ue,s.width-1),0),De=Math.max(Math.min(_+_e,s.height-1),0),Kt=(Math.round(De)*s.width+Math.round(ye))*4,oe=c.data[Kt+3],J=oe*c.data[Kt],Z=oe*c.data[Kt+1],we=oe*c.data[Kt+2];D+=J*q,E+=Z*q,F+=we*q,N+=oe*q,R+=q}D/=R,E/=R,F/=R,N/=R,u.data[y]=D/N,u.data[y+1]=E/N,u.data[y+2]=F/N,u.data[y+3]=N}l.putImageData(u,0,0),this._lastDimensions.copy(new RS(s.width,s.height))}_renderLQBlur(e,t,i,o){let n=t.getDimensions(),s=!this._lastDimensions.equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),i.setPixelRatio(t.getPixelRatio()),i.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||s)&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),i.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(n)}_random(e,t){let i=12.9898,o=78.233,n=43758.5453,s=e*i+t*o,a=s-3.14*Math.floor(s/3.14),l=Math.sin(a)*n;return l-Math.floor(l)}};uA.prototype.availableOptions={blurRadius:{type:b.NUMBER,default:30,uniformType:ne.FLOAT},delta:{type:b.VECTOR2,default:new RS(1,1),uniformType:ne.FLOAT2},texSize:{type:b.VECTOR2,default:new RS(100,100),uniformType:ne.FLOAT2},blurQuality:{type:b.STRING,default:"low"}};no=uA});var roe,xy,ioe,ooe=m(()=>{re();Bh();({Vector2:roe}=he),xy=class extends lt{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius;let t={blurQuality:{type:b.STRING}};this._horizontalFilter=new no({},t),this._verticalFilter=new no({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new roe(.5,.5)),this._verticalFilter.setDelta(new roe(-.5,.5)),this._filter=new no({},t)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){let t=e.getDimensions(),i=t.min(),{blurRadius:o}=this._options,n={blurRadius:o*i,texSize:t,blurQuality:"high"};return this._horizontalFilter.set(n),this._verticalFilter.set(n),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){let{blurRadius:t}=this._options,i=e.getDimensions();return this._filter.set({blurRadius:t,texSize:i,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}transform(e){let t=this.getBlurRadius(),i=e.applyToRelativeSize(t);this.set({blurRadius:i},!1)}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}};xy.identifier="blur";xy.prototype.availableOptions={blurRadius:{type:b.NUMBER,default:.025},highQualityCanvasBlur:{type:b.BOOLEAN,default:!1}};Me.Operations.BlurOperation=xy;ioe=xy});var soe,noe=m(()=>{soe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_filteredImage;
uniform float u_intensity;

void main() {
  vec4 color0 = texture2D(u_image, v_texCoord);
  vec4 color1 = texture2D(u_filteredImage, v_texCoord);
  gl_FragColor = mix(color0, color1, u_intensity);
}
`});var dA,aoe,pA,loe=m(()=>{re();noe();dA=class extends $.Filter{constructor(){super();this._fragmentSource=soe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=i.getContext(),{filteredCanvas:a}=this._options;s.save(),s.drawImage(n,0,0),s.globalAlpha=this._options.intensity,s.drawImage(a,0,0),s.restore()}};dA.prototype.availableOptions={filteredImage:{type:b.NUMBER,default:1,uniformType:ne.INT},filteredCanvas:{type:b.OBJECT,default:null},intensity:{type:b.NUMBER,default:1,uniformType:ne.FLOAT}};aoe=class{constructor(e=1){this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new $.Container,this._sprite=new $.Sprite,this._container.addChild(this._sprite),this._blendFilter=new dA}push(e){this._stack.push(e)}clear(){this._stack=[]}render(e,t,i){if(this.isEmpty())return Promise.resolve();let o=e.getRenderer();this._sprite.setTexture(t);let n=this._renderTextures[o.id];if(!n){let l=e.getSprite().getTexture().getFrame();n=new $.RenderTexture(e.getRenderer(),l.width,l.height),this._renderTextures[o.id]=n}let s=i.getDimensions();n.resizeTo(s);let a=this.isDirtyForRenderer(o);if(a){this._stack.forEach(c=>{c.update(e)});let l=this._stack.map(c=>c.getFilter());this._sprite.setFilters(l),n.render(this._container),this.setDirtyForRenderer(!1,o)}if(this._blendFilter.setIntensity(this._intensity),o.isOfType(Pe.CANVAS))this._blendFilter.setFilteredCanvas(n.getRenderTarget().getCanvas());else if(o.isOfType(Pe.WEBGL)){let l=n.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage()),o.updateTexture(l,!1)}return this._sprite.setFilters([this._blendFilter]),i.clear(ee.TRANSPARENT),i.render(this._container),a&&this.disposeRenderTextures(),Promise.resolve()}setIntensity(e){this._intensity=e}isEmpty(){return this._stack.length===0}isDirtyForRenderer(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._dirtiness[t.id]=e}setDirty(e){for(let t in this._dirtiness)this._dirtiness[t]=e}disposeRenderTextures(){for(let e in this._renderTextures)this._renderTextures[e].dispose(),delete this._renderTextures[e]}dispose(){this.disposeRenderTextures(),this._stack.forEach(e=>e.dispose()),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}},pA=aoe});var Lh,Ie,dt=m(()=>{re();loe();Lh=class extends qe{constructor(e={},t={}){super(e,T({intensity:{type:b.NUMBER,default:1,setter(i){return this._stack&&this._stack.setIntensity(i),i}},dirty:{type:b.BOOLEAN,default:!0}},t));this._stack=new pA(this._options.intensity)}render(e,t,i){return this._stack.render(e,t,i).then(o=>(this.setDirty(!1),o))}setDirtyForRenderer(e,t){this._stack.setDirtyForRenderer(e,t)}disposeRenderTextures(){this._stack.disposeRenderTextures()}dispose(){this._stack.dispose()}};Lh.identifier=null;Lh.isIdentity=!1;Lh.displayName=null;Lh.PrimitivesStack=pA;Ie=Lh});var uoe,coe=m(()=>{uoe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_brightness;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;
}
`});var doe,Ft,mi=m(()=>{re();doe=class extends qe{update(){}getFilter(){return this._filter}dispose(){this._filter&&(this._filter.dispose(),this._filter=null)}},Ft=doe});var FS,mA,Fd,poe=m(()=>{re();coe();mi();FS=class extends $.Filter{constructor(){super();this._fragmentSource=uoe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{brightness:c}=this._options;if(c===0){a.putImageData(l,0,0);return}c*=255;for(let u=0;u<n.width*n.height;u++){let d=u*4;l.data[d]+=c,l.data[d+1]+=c,l.data[d+2]+=c}a.putImageData(l,0,0)}};FS.prototype.availableOptions={brightness:{type:b.NUMBER,default:0,uniformType:ne.FLOAT}};mA=class extends Ft{constructor(...e){super(...e);this._filter=new FS}update(){this._filter.setBrightness(this._options.brightness)}};mA.prototype.availableOptions=FS.prototype.availableOptions;Fd=mA});var hoe,moe=m(()=>{hoe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_contrast;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);
}
`});var AS,hA,so,foe=m(()=>{re();moe();mi();AS=class extends $.Filter{constructor(){super();this._fragmentSource=hoe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{contrast:c}=this._options;if(c!==1){for(let u=0;u<n.width*n.height;u++){let d=u*4;l.data[d]=(l.data[d]-127)*c+127,l.data[d+1]=(l.data[d+1]-127)*c+127,l.data[d+2]=(l.data[d+2]-127)*c+127}a.putImageData(l,0,0)}}};AS.prototype.availableOptions={contrast:{type:b.NUMBER,default:1,uniformType:ne.FLOAT}};hA=class extends Ft{constructor(...e){super(...e);this._filter=new AS}update(){this._filter.setContrast(this._options.contrast)}};hA.prototype.availableOptions=AS.prototype.availableOptions;so=hA});var boe,goe=m(()=>{boe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform mat4 u_colorMatrix;
uniform vec4 u_colorMatrixOffset;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;
}
`});var Gje,PS,fA,MS,yoe=m(()=>{re();goe();mi();({ColorMatrix:Gje}=he),PS=class extends $.Filter{constructor(){super();this._fragmentSource=boe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{colorMatrix:c}=this._options,u=new ee(0,0,0,0);for(let d=0;d<n.width*n.height;d++){let p=d*4;u.r=l.data[p]/255,u.g=l.data[p+1]/255,u.b=l.data[p+2]/255,u=c.apply(u),l.data[p]=u.r*255,l.data[p+1]=u.g*255,l.data[p+2]=u.b*255}a.putImageData(l,0,0)}};PS.prototype.availableOptions={colorMatrix:{type:b.COLOR_MATRIX,default:new Gje,uniformType:ne.MAT4},colorMatrixOffset:{type:b.ARRAY,default:[],uniformType:ne.FLOAT4}};fA=class extends Ft{constructor(...e){super(...e);this._filter=new PS}update(){this._filter.setColorMatrix(this._options.colorMatrix)}};fA.prototype.availableOptions=PS.prototype.availableOptions;MS=fA});var voe,_oe=m(()=>{voe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_desaturation;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec3 grayXfer = vec3(0.3, 0.59, 0.11);
  vec3 gray = vec3(dot(grayXfer, texColor.xyz));
  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);
}
`});var BS,gA,ra,xoe=m(()=>{re();_oe();mi();BS=class extends $.Filter{constructor(){super();this._fragmentSource=voe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),c=[.3,.59,.11],{desaturation:u}=this._options;for(let d=0;d<n.width*n.height;d++){let p=d*4,h=c[0]*l.data[p]/255+c[1]*l.data[p+1]/255+c[2]*l.data[p+2]/255;l.data[p]+=(h*255-l.data[p])*u,l.data[p+1]+=(h*255-l.data[p+1])*u,l.data[p+2]+=(h*255-l.data[p+2])*u}a.putImageData(l,0,0)}};BS.prototype.availableOptions={desaturation:{type:b.NUMBER,default:1,uniformType:ne.FLOAT}};gA=class extends Ft{constructor(...e){super(...e);this._filter=new BS}update(){this._filter.setDesaturation(this._options.desaturation)}};gA.prototype.availableOptions=BS.prototype.availableOptions;ra=gA});var Soe,Coe=m(()=>{Soe=`precision highp float;

uniform sampler2D u_image;
uniform vec4 u_lightColor;
uniform vec4 u_darkColor;
uniform float u_intensity;
varying vec2 v_texCoord;

const float EPSILON = 0.0000001;
const vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);

vec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {
  vec4 color = clamp(sampledCol, 0.0, 1.0);
  color.rgb /= max(color.a, EPSILON);
  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES
 
  // Apply intensity as "symmetric gamma"
  if (intensity > 0.0) {
    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));
  } else {
    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));
  }
 
  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion
  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale
  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);
 
  // Apply DuoTone
  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));
  duotone.a *= color.a;
  
  duotone.rgb *= duotone.a;

  return duotone;
}

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);
}`});var LS,bA,zS,woe=m(()=>{re();Coe();mi();LS=class extends $.Filter{constructor(){super();this._fragmentSource=Soe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{lightColor:c,darkColor:u,intensity:d}=this._options;for(let p=0;p<n.width*n.height;p++){let h=p*4,f=l.data[h]/255,_=l.data[h+1]/255,x=l.data[h+2]/255,y=l.data[h+3]/255,D=new ee(f,_,x,y),E=this._duoToneKernel(D,c,u,d);l.data[h]=E.r*255,l.data[h+1]=E.g*255,l.data[h+2]=E.b*255,l.data[h+3]=E.a*255}a.putImageData(l,0,0)}_duoToneKernel(e,t,i,o){let n=1e-7;if(e.clone().clamp(0,1),o>0){let c=Math.max(o+1,n);e.r=1-Math.pow(1-e.r,c),e.g=1-Math.pow(1-e.g,c),e.b=1-Math.pow(1-e.b,c)}else{let c=Math.max(-o+1,n);e.r=Math.pow(e.r,c),e.g=Math.pow(e.g,c),e.b=Math.pow(e.b,c)}let s=.2126*e.r+.7152*e.g+.0722*e.b,a=Math.min(Math.max(s,0),1),l=i.clone().mix(t,a);return l.a*=e.a,l}};LS.prototype.availableOptions={lightColor:{type:b.COLOR,default:ee.RED,uniformType:ne.FLOAT4},darkColor:{type:b.COLOR,default:ee.BLACK,uniformType:ne.FLOAT4},intensity:{type:b.NUMBER,default:.5,uniformType:ne.FLOAT}};bA=class extends Ft{constructor(...e){super(...e);this._filter=new LS}update(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);let e=2*this._options.intensity-1;this._filter.setIntensity(e)}};bA.prototype.availableOptions=LS.prototype.availableOptions;zS=bA});var koe,Toe=m(()=>{koe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec3 u_gamma;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);
  rgb = pow(rgb, u_gamma);
  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;
}
`});var US,yA,NS,Eoe=m(()=>{re();Toe();mi();US=class extends $.Filter{constructor(){super();this._fragmentSource=koe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{gamma:c}=this._options,u=new Float32Array(256);for(let h=0;h<256;h++)u[h]=255*Math.pow(h/255,c.r);let d=new Float32Array(256);for(let h=0;h<256;h++)d[h]=255*Math.pow(h/255,c.g);let p=new Float32Array(256);for(let h=0;h<256;h++)p[h]=255*Math.pow(h/255,c.b);for(let h=0;h<n.width*n.height;h++){let f=h*4;l.data[f]=u[l.data[f]],l.data[f+1]=d[l.data[f+1]],l.data[f+2]=p[l.data[f+2]]}a.putImageData(l,0,0)}};US.prototype.availableOptions={gamma:{type:b.COLOR,default:ee.WHITE,uniformType:ne.FLOAT3}};yA=class extends Ft{constructor(...e){super(...e);this._filter=new US}update(){this._filter.setGamma(this._options.gamma)}};yA.prototype.availableOptions=US.prototype.availableOptions;NS=yA});var Doe,Ioe=m(()=>{Doe=`varying vec2 v_texCoord;
uniform sampler2D u_image;

uniform vec3 u_color;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);

  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);
  textureCoord /= 0.75;

  float d = 1.0 - dot(textureCoord, textureCoord);
  d = clamp(d, 0.2, 1.0);
  vec3 newColor = texColor.rgb * d * u_color.rgb;
  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);
}
`});var qS,_A,zh,Ooe=m(()=>{re();Ioe();mi();qS=class extends $.Filter{constructor(){super();this._fragmentSource=Doe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{color:c}=this._options,u;for(let d=0;d<n.width;d++)for(let p=0;p<n.height;p++){let h=(n.width*p+d)*4,f=d/n.width,_=p/n.height,x=(f-.5)/.75,y=(_-.5)/.75,D=x*x,E=y*y;u=1-(D+E),u=Math.min(Math.max(u,.1),1),l.data[h]*=u*c.r,l.data[h+1]=l.data[h+1]*(u*c.g),l.data[h+2]=l.data[h+2]*(u*c.b),l.data[h+3]=255}a.putImageData(l,0,0)}};qS.prototype.availableOptions={color:{type:b.COLOR,default:ee.WHITE,uniformType:ne.FLOAT3}};_A=class extends Ft{constructor(...e){super(...e);this._filter=new qS}update(){this._filter.setColor(this._options.color)}};_A.prototype.availableOptions=qS.prototype.availableOptions;zh=_A});var Foe,Roe=m(()=>{Foe=`varying vec2 v_texCoord;
uniform sampler2D u_image;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  texColor.b = texColor.g * 0.33;
  texColor.r = texColor.r * 0.6;
  texColor.b += texColor.r * 0.33;
  texColor.g = texColor.g * 0.7;
  gl_FragColor = texColor;
}
`});var Aoe,Poe,HS,Moe=m(()=>{re();Roe();mi();Aoe=class extends $.Filter{constructor(){super();this._fragmentSource=Foe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++)for(let u=0;u<n.height;u++){let d=(n.width*u+c)*4;l.data[d+2]=l.data[d+1]*.33,l.data[d]*=.6,l.data[d+2]+=l.data[d]*.33,l.data[d+1]=l.data[d+1]*.7,l.data[d+3]=255}a.putImageData(l,0,0)}},Poe=class extends Ft{constructor(...e){super(...e);this._filter=new Aoe}},HS=Poe});var Loe,Boe=m(()=>{Loe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
vec3 W = vec3(0.2125, 0.7154, 0.0721);

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float luminance = dot(texColor.rgb, W);
  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);
}
`});var zoe,Uoe,Uh,Noe=m(()=>{re();Boe();mi();zoe=class extends $.Filter{constructor(){super();this._fragmentSource=Loe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++)for(let u=0;u<n.height;u++){let d=(n.width*u+c)*4,p=l.data[d]*.2125+l.data[d+1]*.7154+l.data[d+2]*.0721;l.data[d]=p,l.data[d+1]=p,l.data[d+2]=p}a.putImageData(l,0,0)}},Uoe=class extends Ft{constructor(...e){super(...e);this._filter=new zoe}},Uh=Uoe});var Hoe,qoe=m(()=>{Hoe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_lookupTable;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;
  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;
  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;

  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);
}
`});var vA,joe,jS,xA=m(()=>{re();qoe();mi();vA=class extends $.Filter{constructor(...e){super(...e);this._fragmentSource=Hoe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),c=this._options.lookupTableData;for(let u=0;u<n.width*n.height;u++){let d=u*4,p=l.data[d];l.data[d]=c[p*4];let h=l.data[d+1];l.data[d+1]=c[1+h*4];let f=l.data[d+2];l.data[d+2]=c[2+f*4]}a.putImageData(l,0,0)}};vA.prototype.availableOptions={lookupTable:{type:b.NUMBER,default:1,uniformType:ne.INT},lookupTableData:{type:b.ARRAY,default:[]}};joe=class extends Ft{constructor(...e){super(...e);this._filter=new vA({lookupTable:this._options.textureGLUnit}),this._textures={},this._renderers={}}update(e){let t=e.getRenderer();t.isOfType(Pe.WEBGL)?this._updateWebGLTexture(e):t.isOfType(Pe.CANVAS)&&this._filter.setLookupTableData(this._options.data)}_updateWebGLTexture(e){if(typeof this._options.data=="undefined")throw new Error("LookupTable: No data specified.");let t=new Uint8Array(this._options.data),i=e.getRenderer(),{id:o}=i;this._renderers[o]=i,this._textures[o]||(this._textures[o]=new $.BaseTexture);let n=this._textures[o],s=new $.PixelArrayImage(256,1,t);n.setSource(s),n.setGLUnit(this._options.textureGLUnit),i.isOfType(Pe.WEBGL)&&i.updateTexture(n)}dispose(){super.dispose();for(let e in this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data}},jS=joe});var Goe,Woe=m(()=>{Goe=`/**
 * Based off of GPUImage's LookupFilter:
 * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m
 */

varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_lookupTable;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float blueColor = texColor.b * 63.0;

  vec2 quad1;
  quad1.y = floor(floor(blueColor) / 8.0);
  quad1.x = floor(blueColor) - (quad1.y * 8.0);

  vec2 quad2;
  quad2.y = floor(ceil(blueColor) / 8.0);
  quad2.x = ceil(blueColor) - (quad2.y * 8.0);

  vec2 texCoord1;
  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);
  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);

  vec2 texCoord2;
  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);
  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);

  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);
  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);

  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);
}
`});var Voe,$oe,CA,SA,WS,Koe=m(()=>{re();Woe();mi();({Vector2:Voe}=he),$oe=3,CA=class extends $.Filter{constructor(){super();this._precomputeQuads(),this._fragmentSource=Goe}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){let t=e/255*63,i=new Voe;i.y=(t|0)*.125|0,i.x=(t|0)-i.y*8,this._quads.push(i)}}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=this._options.lookupTableImage,u=this._createImageCanvas(l).getContext("2d"),d=s.getImageData(0,0,n.width,n.height),p=u.getImageData(0,0,l.width,l.height),h=new Voe;for(let f=0;f<n.width*n.height*4;f+=4){let _=d.data[f],x=d.data[f+1],y=d.data[f+2],D=d.data[f+3]/255,E=this._quads[y],F=64;h.x=E.x*F,h.y=E.y*F,h.x+=Math.floor(_/4),h.y+=Math.floor(x/4);let N=(l.width*h.y+h.x)*4|0,R=p.data[N];R=_*(1-D)+R*D;let B=p.data[N+1];B=x*(1-D)+B*D;let se=p.data[N+2];se=y*(1-D)+se*D,d.data[f]=R,d.data[f+1]=B,d.data[f+2]=se}a.putImageData(d,0,0)}_createImageCanvas(e){let t=K.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}};CA.prototype.availableOptions={lookupTable:{type:b.NUMBER,default:$oe,uniformType:ne.INT},lookupTableImage:{type:b.IMAGE,uniformType:null}};SA=class extends Ft{constructor(...e){super(...e);this._filter=new CA,this._textures={}}update(e){let t=e.getRenderer();t.isOfType(Pe.WEBGL)?this._updateWebGLTexture(e):t.isOfType(Pe.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}_updateWebGLTexture(e){let t=e.getRenderer(),{id:i}=t;this._textures[i]||(this._textures[i]=new $.BaseTexture);let o=this._textures[i];o.setSource(this._options.image),o.setGLUnit($oe),t.updateTexture(o)}dispose(){super.dispose();for(let e in this._textures)delete this._textures[e]}};SA.prototype.availableOptions={image:{type:b.IMAGE}};WS=SA});var Yoe,Xoe=m(()=>{Yoe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_saturation;

const vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float luminance = dot(texColor.rgb, luminanceWeighting);

  vec3 greyScaleColor = vec3(luminance);

  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);
}
`});var GS,wA,ao,Joe=m(()=>{re();Xoe();mi();GS=class extends $.Filter{constructor(){super();this._fragmentSource=Yoe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height),{saturation:c}=this._options;for(let u=0;u<n.width;u++)for(let d=0;d<n.height;d++){let p=(n.width*d+u)*4,h=l.data[p]*.2125+l.data[p+1]*.7154+l.data[p+2]*.0721;l.data[p]=h*(1-c)+l.data[p]*c,l.data[p+1]=h*(1-c)+l.data[p+1]*c,l.data[p+2]=h*(1-c)+l.data[p+2]*c}a.putImageData(l,0,0)}};GS.prototype.availableOptions={saturation:{type:b.NUMBER,default:0,uniformType:ne.FLOAT}};wA=class extends Ft{constructor(...e){super(...e);this._filter=new GS}update(){this._filter.setSaturation(this._options.saturation)}};wA.prototype.availableOptions=GS.prototype.availableOptions;ao=wA});var Qoe,Zoe=m(()=>{Qoe=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec3 u_color;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec4 overlayVec4 = vec4(u_color, texColor.a);
  gl_FragColor = max(overlayVec4 * texColor.a, texColor);
}
`});var VS,TA,$S,ene=m(()=>{re();Zoe();mi();VS=class extends $.Filter{constructor(){super();this._fragmentSource=Qoe}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++)for(let u=0;u<n.height;u++){let d=(n.width*u+c)*4;l.data[d]=Math.max(this._options.color.r*255,l.data[d]),l.data[d+1]=Math.max(this._options.color.g*255,l.data[d+1]),l.data[d+2]=Math.max(this._options.color.b*255,l.data[d+2])}a.putImageData(l,0,0)}};VS.prototype.availableOptions={color:{type:b.COLOR,default:ee.WHITE,uniformType:ne.FLOAT3}};TA=class extends Ft{constructor(...e){super(...e);this._filter=new VS}update(){this._filter.setColor(this._options.color)}};TA.prototype.availableOptions=VS.prototype.availableOptions;$S=TA});var kA,We,tne=m(()=>{re();xA();kA=class extends jS{constructor(...e){super(...e);this._options.rgbControlPoints||(this._options.rgbControlPoints={red:this._options.controlPoints,green:this._options.controlPoints,blue:this._options.controlPoints}),this._updateLookupTable()}_updateLookupTable(){let e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),i=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,i)}_buildLookupTable(e,t,i){let o=[];for(let n=0;n<256;n++)o.push(Math.min(Math.max(n+e[n],0),255)),o.push(Math.min(Math.max(n+t[n],0),255)),o.push(Math.min(Math.max(n+i[n],0),255)),o.push(255);return o}_calculateSplineCurve(e){e=e.sort(function(s,a){return s[0]>a[0]});let t=this._getSplineCurve(e),i=t[0],o;if(i[0]>0)for(o=0;o<i[0];o++)t.unshift([0,0]);let n=[];for(o=0;o<t.length;o++){let s=t[o],a=[s[0],s[0]],l=Math.sqrt(Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2));a[1]>s[1]&&(l=-l),n.push(l)}return n}_getSplineCurve(e){let t=this._secondDerivative(e),i=t.length,o=[],n;for(n=0;n<i;n++)o[n]=t[n];let s=[];for(n=0;n<i-1;n++){let a=e[n],l=e[n+1];for(let c=a[0];c<l[0];c++){let u=(c-a[0])/(l[0]-a[0]),d=1-u,p=u,h=l[0]-a[0],f=d*a[1]+p*l[1]+h*h/6*((d*d*d-d)*o[n]+(p*p*p-p)*o[n+1]);f>255?f=255:f<0&&(f=0),s.push([c,f])}}return s.length===255&&s.push(e[e.length-1]),s}_secondDerivative(e){let t=e.length;if(t<=0||t===1)return null;let i=[],o=[],n,s;for(i[0]=[0,1,0],n=1;n<t-1;n++){let l=e[n-1],c=e[n],u=e[n+1];i[n]=i[n]||[],i[n][0]=(c[0]-l[0])/6,i[n][1]=(u[0]-l[0])/3,i[n][2]=(u[0]-c[0])/6,o[n]=(u[1]-c[1])/(u[0]-c[0])-(c[1]-l[1])/(c[0]-l[0])}for(o[0]=0,o[t-1]=0,i[t-1]=[0,1,0],n=1;n<t;n++)s=i[1][0]/i[n-1][1],i[n][1]-=s*i[n-1][2],i[n][0]=0,o[n]-=s*o[n-1];for(n=t-2;n>0;n--)s=i[n][2]/i[n+1][1],i[n][1]-=s*i[n+1][0],i[n][2]=0,o[n]-=s*o[n+1];let a=[];for(n=0;n<t;n++)a[n]=o[n]/i[n][1];return a}};kA.prototype.availableOptions={rgbControlPoints:{type:b.OBJECT},controlPoints:{type:b.ARRAY,default:[]},textureGLUnit:{type:b.NUMBER,default:1}};We=kA});var ine,rne=m(()=>{ine=`varying vec2 v_texCoord;
uniform sampler2D u_image;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;
  gray -= 0.2;
  gray = clamp(gray, 0.0, 1.0);
  gray += 0.15;
  gray *= 1.4;
  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);
}
`});var one,nne,KS,sne=m(()=>{re();rne();mi();one=class extends $.Filter{constructor(){super();this._fragmentSource=ine}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++)for(let u=0;u<n.height;u++){let d=(n.width*u+c)*4,p=l.data[d]/255*.3+l.data[d+1]/255*.3+l.data[d+2]/255*.3;p-=.2,p=Math.max(0,Math.min(1,p)),p+=.15,p*=1.4,p*=255,l.data[d]=p,l.data[d+1]=p,l.data[d+2]=p}a.putImageData(l,0,0)}},nne=class extends Ft{constructor(...e){super(...e);this._filter=new one}},KS=nne});var lne,ane=m(()=>{lne=`precision highp float;

uniform sampler2D u_image;

uniform sampler2D u_lookupTable;

uniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096
uniform float u_horizontalTileCount; // Horizontal Blue Tiles
uniform float u_verticalTileCount; // Vertical Blue Tiles

varying vec2 v_texCoord;

const float EPSILON = 0.000001;

// Try to get the exact pixel of the lut map image
vec3 lutColor(int texPosX, int texPosY) {
    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;
}

vec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {
    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);
}

void main() {
    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);

    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); 

    vec3 ranges = vec3(
        floor(u_resolution / u_horizontalTileCount - 1.0),
        floor(u_resolution / u_verticalTileCount - 1.0),
        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)
    );
    
    vec3 tmp = sourceColor * ranges;
    ivec3 floors = ivec3(tmp);
    ivec3 ceils = ivec3(ceil(tmp));
    vec3 fracts = fract(tmp);

    // Map tile index to tile pixel pos.
    ivec2 pixelsPerTile = ivec2(
        u_resolution / u_horizontalTileCount, 
        u_resolution / u_verticalTileCount
      );

    ivec2 tileFloor; // Blue tile index
    tileFloor.y = floors.z / int(u_horizontalTileCount);
    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));

    ivec2 tileCeil; // Blue tile index
    tileCeil.y = ceils.z / int(u_horizontalTileCount);
    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));
    
    tileFloor *= pixelsPerTile;
    tileCeil *= pixelsPerTile; 
    
    
    // Interpolate between red and green
    vec3 lutColorFB = bilinearInterpolate(
        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),
        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),
        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),
        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),
        fracts.x, fracts.y
    );
    vec3 lutColorCB = bilinearInterpolate(
        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),
        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),
        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),
        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),
        fracts.x, fracts.y
    );

    // Interpolate between the blue values
    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);

    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;
    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);

    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);
}
`});var XS,cne,une,EA,IA,YS,dne=m(()=>{re();ane();mi();({Vector2:XS,Vector3:cne}=he),une=3,EA=class extends $.Filter{constructor(){super();this._precomputeQuads(),this._fragmentSource=lne}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){let t=e/255*63,i=new XS;i.y=(t|0)*.125|0,i.x=(t|0)-i.y*8,this._quads.push(i)}}_applyCanvas(e,t,i,o=!1){let{resolution:n,horizontalTileCount:s,verticalTileCount:a}=this._options,l=t.getCanvas(),c=t.getContext(),u=i.getContext(),d=this._options.lookupTableImage,h=this._createImageCanvas(d).getContext("2d"),f={width:128,height:128};n?f={width:n,height:n}:d.width&&d.height&&(f={width:d.width,height:d.height});let _=c.getImageData(0,0,l.width,l.height),x=h.getImageData(0,0,f.width,f.height),y=new cne(f.width/s-1|0,f.height/a-1|0,s*a-1|0),D=new ee,E=new ee,F=new ee,N=new ee,R=new ee,B=new ee,se=new ee,A=new ee,q=new XS,ue=new XS,_e=(Z,we,ve,Ne)=>{Z.r=we.r*(1-Ne)+ve.r*Ne,Z.g=we.g*(1-Ne)+ve.g*Ne,Z.b=we.b*(1-Ne)+ve.b*Ne},ye=(Z,we,ve)=>{we=.5+we|0,ve=.5+ve|0;let Ne=(ve*f.width+we)*4;Z.r=x.data[Ne]/255,Z.g=x.data[Ne+1]/255,Z.b=x.data[Ne+2]/255,Z.a=x.data[Ne+3]/255},De=new ee,Kt=new ee,oe=(Z,we,ve,Ne,Ae,Ke,Tt)=>{_e(De,we,Ne,Ke),_e(Kt,ve,Ae,Ke),_e(Z,De,Kt,Tt)},J=new XS(f.width,f.height).divide(s,a).floor();for(let Z=0;Z<l.width*l.height*4;Z+=4){D.set(_.data[Z]/255,_.data[Z+1]/255,_.data[Z+2]/255,_.data[Z+3]/255);let we=new cne(D.r*y.x,D.g*y.y,D.b*y.z),ve=we.clone().floor().toInt(),Ne=we.clone().ceil().toInt(),Ae=we.clone().fract();q.y=ve.z/s|0,q.x=ve.z-q.y*s|0,ue.y=Ne.z/s|0,ue.x=Ne.z-ue.y*s|0,q.multiply(J),ue.multiply(J),ye(R,q.x+ve.x,q.y+ve.y),ye(B,q.x+ve.x,q.y+Ne.y),ye(se,q.x+Ne.x,q.y+ve.y),ye(A,q.x+Ne.x,q.y+Ne.y),oe(F,R,B,se,A,Ae.x,Ae.y),ye(R,ue.x+ve.x,ue.y+ve.y),ye(B,ue.x+ve.x,ue.y+Ne.y),ye(se,ue.x+Ne.x,ue.y+ve.y),ye(A,ue.x+Ne.x,ue.y+Ne.y),oe(N,R,B,se,A,Ae.x,Ae.y),_e(E,F,N,Ae.z),_.data[Z]=Math.ceil(E.r*255),_.data[Z+1]=Math.ceil(E.g*255),_.data[Z+2]=Math.ceil(E.b*255)}u.putImageData(_,0,0)}_createImageCanvas(e){let t=K.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}};EA.prototype.availableOptions={lookupTable:{type:b.NUMBER,default:une,uniformType:ne.INT},lookupTableImage:{type:b.IMAGE,uniformType:null},resolution:{type:b.NUMBER,uniformType:ne.FLOAT},horizontalTileCount:{type:b.NUMBER,default:5,uniformType:ne.FLOAT},verticalTileCount:{type:b.NUMBER,default:5,uniformType:ne.FLOAT}};IA=class extends Ft{constructor(...e){super(...e);this._filter=new EA,this._textures={}}update(e){let t=e.getRenderer();t.isOfType(Pe.WEBGL)?this._updateWebGLTexture(e):t.isOfType(Pe.CANVAS)&&this._filter.setLookupTableImage(this._options.image);let{resolution:i,verticalTileCount:o,horizontalTileCount:n,image:s}=this._options;this._filter.set({resolution:i||s.width,verticalTileCount:o,horizontalTileCount:n})}_updateWebGLTexture(e){let t=e.getRenderer(),{id:i}=t;this._textures[i]||(this._textures[i]=new $.BaseTexture);let o=this._textures[i];o.setSource(this._options.image),o.setGLUnit(une),o.setMinFilter($.BaseTexture.NearestFilter),t.updateTexture(o)}dispose(){super.dispose();for(let e in this._textures)delete this._textures[e]}};IA.prototype.availableOptions={image:{type:b.IMAGE},resolution:{type:b.NUMBER},horizontalTileCount:{type:b.NUMBER,default:5},verticalTileCount:{type:b.NUMBER,default:5}};YS=IA});var DA={};Ht(DA,{Brightness:()=>Fd,ColorMatrixPrimitive:()=>MS,Contrast:()=>so,Desaturation:()=>ra,DuoTone:()=>zS,Gamma:()=>NS,Glow:()=>zh,Gobblin:()=>HS,Grayscale:()=>Uh,LookupTable:()=>jS,LookupTableImage:()=>WS,Saturation:()=>ao,SoftColorOverlay:()=>$S,ThreeDLookupTableImage:()=>YS,ToneCurve:()=>We,X400:()=>KS});var pt=m(()=>{poe();foe();yoe();xoe();woe();Eoe();Ooe();Moe();Noe();xA();Koe();Joe();ene();tne();sne();dne()});var JS,ZS,OA=m(()=>{dt();pt();JS=class extends Ie{constructor(...e){super(...e);this._stack.push(new Fd({brightness:0}))}render(e,t,i){return this._stack.isEmpty()&&this._stack.push(new Fd({brightness:0})),super.render(e,t,i)}};JS.isIdentity=!0;JS.identifier="identity";ZS=JS});var RA,pne,mne=m(()=>{dt();pt();RA=class extends Ie{constructor(...e){super(...e);this._stack.push(new so({contrast:.63})),this._stack.push(new Fd({brightness:.12})),this._stack.push(new We({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}}))}};RA.identifier="a15";pne=RA});var FA,hne,fne=m(()=>{dt();pt();FA=class extends Ie{constructor(...e){super(...e);this._stack.push(new ra({desaturation:.5})),this._stack.push(new We({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}}))}};FA.identifier="breeze";hne=FA});var AA,gne,bne=m(()=>{dt();pt();AA=class extends Ie{constructor(...e){super(...e);this._stack.push(new Uh)}};AA.identifier="bw";gne=AA});var PA,yne,_ne=m(()=>{dt();pt();PA=class extends Ie{constructor(...e){super(...e);this._stack.push(new Uh),this._stack.push(new so({contrast:1.5}))}};PA.identifier="bwhard";yne=PA});var MA,vne,xne=m(()=>{dt();pt();MA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}}))}};MA.identifier="celsius";vne=MA});var BA,Cne,Sne=m(()=>{dt();pt();BA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}}))}};BA.identifier="chest";Cne=BA});var QS,wne,Tne=m(()=>{re();dt();pt();QS=class extends Ie{constructor(...e){super(...e,{intensity:{type:b.NUMBER,default:.5,required:!0,setter(t){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(t),this._stack.setIntensity(1)),this._dirty=!0,t}}});this._filterPrimitive=new zS({lightColor:this._options.lightColor||ee.WHITE,darkColor:this._options.darkColor||ee.BLACK,intensity:this._options.intensity||.5}),this._stack.push(this._filterPrimitive)}};QS.prototype.availableOptions={lightColor:{type:b.COLOR,default:ee.WHITE,required:!0,setter(r){return this._filterPrimitive&&this._filterPrimitive.setLightColor(r),this.setDirty&&this.setDirty(!0),r}},darkColor:{type:b.COLOR,default:ee.BLACK,required:!0,setter(r){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(r),this.setDirty&&this.setDirty(!0),r}},intensity:{type:b.NUMBER,default:.5,required:!0}};QS.identifier="duotone";wne=QS});var LA,kne,Ene=m(()=>{dt();pt();LA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}}))}};LA.identifier="fixie";kne=LA});var zA,Ine,Dne=m(()=>{dt();pt();zA=class extends Ie{constructor(...e){super(...e);this._stack.push(new ao({saturation:1.35})),this._stack.push(new so({contrast:1.1}))}};zA.identifier="food";Ine=zA});var UA,One,Rne=m(()=>{dt();pt();UA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}}))}};UA.identifier="fridge";One=UA});var NA,Fne,Ane=m(()=>{dt();pt();NA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}}))}};NA.identifier="front";Fne=NA});var qA,Pne,Mne=m(()=>{dt();pt();qA=class extends Ie{constructor(...e){super(...e);this._stack.push(new so({contrast:1.1})),this._stack.push(new We({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}))}};qA.identifier="glam";Pne=qA});var HA,Bne,Lne=m(()=>{dt();pt();HA=class extends Ie{constructor(...e){super(...e);this._stack.push(new HS)}};HA.identifier="gobblin";Bne=HA});var jA,zne,Une=m(()=>{dt();pt();jA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),this._stack.push(new ao({saturation:.9}))}};jA.identifier="k1";zne=jA});var WA,Nne,qne=m(()=>{re();dt();pt();WA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),this._stack.push(new $S({color:new ee(40/255,40/255,40/255)}))}};WA.identifier="k2";Nne=WA});var GA,Hne,jne=m(()=>{dt();pt();GA=class extends Ie{constructor(...e){super(...e);this._stack.push(new ao({saturation:.5}))}};GA.identifier="k6";Hne=GA});var VA,Wne,Gne=m(()=>{dt();pt();VA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),this._stack.push(new ao({saturation:.7}))}};VA.identifier="kdynamic";Wne=VA});var $A,Vne,$ne=m(()=>{dt();pt();$A=class extends Ie{constructor(...e){super(...e);this._stack.push(new ra({desaturation:.4})),this._stack.push(new We({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}}))}};$A.identifier="lenin";Vne=$A});var KA,Kne,Xne=m(()=>{dt();pt();KA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]}))}};KA.identifier="lomo";Kne=KA});var XA,Yne,Jne=m(()=>{dt();pt();XA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}}))}};XA.identifier="mellow";Yne=XA});var oWe,YA,Zne,Qne=m(()=>{re();dt();pt();({ColorMatrix:oWe}=he),YA=class extends Ie{constructor(...e){super(...e);let t=new oWe(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);this._stack.push(new MS({colorMatrix:t}));let i=new ee(.8,.6,.9);this._stack.push(new NS({gamma:i}))}};YA.identifier="metal";Zne=YA});var JA,ese,tse=m(()=>{dt();pt();JA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),this._stack.push(new zh)}};JA.identifier="morning";ese=JA});var ZA,rse,ise=m(()=>{dt();pt();ZA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),this._stack.push(new We({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),this._stack.push(new ra({desaturation:.65}))}};ZA.identifier="orchid";rse=ZA});var QA,ose,nse=m(()=>{dt();pt();QA=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),this._stack.push(new ao({saturation:.8})),this._stack.push(new so({contrast:1.5}))}};QA.identifier="pola";ose=QA});var eP,sse,ase=m(()=>{dt();pt();eP=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),this._stack.push(new ao({saturation:.8})),this._stack.push(new so({contrast:1.5}))}};eP.identifier="pola669";sse=eP});var tP,lse,cse=m(()=>{dt();pt();tP=class extends Ie{constructor(...e){super(...e);this._stack.push(new ra({desaturation:.65})),this._stack.push(new We({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}}))}};tP.identifier="quozi";lse=tP});var rP,use,dse=m(()=>{dt();pt();rP=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),this._stack.push(new zh)}};rP.identifier="semired";use=rP});var iP,pse,mse=m(()=>{dt();pt();iP=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),this._stack.push(new We({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3}))}};iP.identifier="sunny";pse=iP});var oP,hse,fse=m(()=>{dt();pt();oP=class extends Ie{constructor(...e){super(...e);this._stack.push(new We({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}}))}};oP.identifier="texas";hse=oP});var nP,gse,bse=m(()=>{dt();pt();nP=class extends Ie{constructor(...e){super(...e);this._stack.push(new KS)}};nP.identifier="x400";gse=nP});var e1,yse,_se=m(()=>{re();dt();pt();e1=class extends Ie{constructor(...e){super(...e);this._lutPrimitive=new WS({image:this._options.image}),this._stack.push(this._lutPrimitive)}};e1.prototype.availableOptions={image:{type:b.IMAGE,required:!0,setter(r){return this._lutPrimitive&&this._lutPrimitive.setImage(r),this.setDirty(!0),r}}};e1.identifier="lut";yse=e1});var t1,vse,xse=m(()=>{re();dt();pt();t1=class extends Ie{constructor(...e){super(...e);let{image:t,resolution:i,verticalTileCount:o,horizontalTileCount:n}=this._options;this._lutPrimitive=new YS({image:t,resolution:i,verticalTileCount:o,horizontalTileCount:n}),this._stack.push(this._lutPrimitive)}};t1.prototype.availableOptions={image:{type:b.IMAGE,required:!0,setter(r){return this._lutPrimitive&&this._lutPrimitive.setImage(r),this.setDirty(!0),r}},resolution:{type:b.NUMBER},horizontalTileCount:{type:b.NUMBER,default:5},verticalTileCount:{type:b.NUMBER,default:5}};t1.identifier="3d-lut";vse=t1});var sP={};Ht(sP,{A15Filter:()=>pne,BWFilter:()=>gne,BWHardFilter:()=>yne,BreezeFilter:()=>hne,CelsiusFilter:()=>vne,ChestFilter:()=>Cne,DuoToneFilter:()=>wne,FixieFilter:()=>kne,FoodFilter:()=>Ine,FridgeFilter:()=>One,FrontFilter:()=>Fne,GlamFilter:()=>Pne,GobblinFilter:()=>Bne,IdentityFilter:()=>ZS,K1Filter:()=>zne,K2Filter:()=>Nne,K6Filter:()=>Hne,KDynamicFilter:()=>Wne,LUTFilter:()=>yse,LeninFilter:()=>Vne,LomoFilter:()=>Kne,MellowFilter:()=>Yne,MetalFilter:()=>Zne,MorningFilter:()=>ese,OrchidFilter:()=>rse,Pola669Filter:()=>sse,PolaFilter:()=>ose,QuoziFilter:()=>lse,SemiredFilter:()=>use,SunnyFilter:()=>pse,TexasFilter:()=>hse,ThreeDLUTFilter:()=>vse,X400Filter:()=>gse});var Cse=m(()=>{OA();mne();fne();bne();_ne();xne();Sne();Tne();Ene();Dne();Rne();Ane();Mne();Lne();Une();qne();jne();Gne();$ne();Xne();Jne();Qne();tse();ise();nse();ase();cse();dse();mse();fse();bse();_se();xse()});var ou,Sse,wse=m(()=>{re();Cse();dt();OA();pt();ou=class extends lt{_render(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)}render(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?super.render(e):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),Promise.resolve(e))}setDirtyForRenderer(e,t){super.setDirtyForRenderer(e,t),this._selectedFilter.setDirtyForRenderer(e,t)}disposeRenderTextures(){super.disposeRenderTextures(),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}dispose(){super.dispose(),this._selectedFilter&&this._selectedFilter.dispose()}restoreSnapshot(e){let t=T({},e);if(delete t.filter,e.filter){let i=e.filter.constructor;i.identifier==="3d-lut"?this.setFilter(new i({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()})):i.identifier==="duotone"?this.setFilter(new i({lightColor:e.filter.getLightColor(),darkColor:e.filter.getDarkColor(),intensity:e.filter.getIntensity()})):this.setFilter(new i)}this.set(t)}resetToDefaultFilterIntensity(){let e=this._selectedFilter&&this._selectedFilter.availableOptions,t=e&&e.intensity.default;this.setIntensity(t||1)}};ou.identifier="filter";ou.prototype.availableOptions={identifier:{type:b.STRING,default:"identity"},intensity:{type:b.NUMBER,default:1,setter(r){return this._selectedFilter&&this._selectedFilter.setIntensity(r),r}},filter:{type:b.OBJECT,default:new ZS,setter(r){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=r,typeof this._options.intensity!="undefined"&&this._selectedFilter.set({intensity:this._options.intensity}),r}}};ou.FilterPrimitives=DA;ou.Filters=sP;ou.Filter=Ie;Me.Operations.FilterOperation=ou;Sse=ou});var Cy,Tse,kse=m(()=>{re();Cy=class extends lt{constructor(...e){super(...e);this._flipContainer=new $.Container}_render(e){let{outputResolution:t,flipHorizontally:i,flipVertically:o}=this._options;if(i||o){let n=e.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(n):(this._flipRenderTexture=new $.RenderTexture(this._sdk.getRenderer(),n.x,n.y),this._flipSprite=new $.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));let s=i?-1:1,a=o?-1:1;this._flipSprite.setScale(s,a),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(n.x*(1-s)*.5,n.y*(1-a)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return Promise.resolve()}};Cy.identifier="flip";Cy.prototype.availableOptions={flipHorizontally:{type:b.BOOLEAN,default:!1},flipVertically:{type:b.BOOLEAN,default:!1}};Me.Operations.FlipOperation=Cy;Tse=Cy});var Nh,qh,Ese,Ise=m(()=>{re();({Vector2:Nh}=he),qh=class extends lt{constructor(...e){super(...e);this._colorOverlayFilter=new $.Filters.ColorOverlayFilter({color:this.getTintColor()}),this._frameContainer=new $.Container,this._resetSprites(),this._options.frame&&this._createSpritesForFrame(this._options.frame)}_resetSprites(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}_createSpritesForFrame(e){if(!e)return this._disposeSprites();let{imageGroups:t,layoutMode:i}=e;this._layoutMode=i||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(o=>{typeof t[o]!="undefined"&&["start","mid","end"].forEach(n=>{if(typeof t[o][n]=="undefined")return;let s=t[o][n];"image"in s&&(s=s.image);let a=$.Texture.fromImage(s),l=new $.Sprite(a);this._spriteGroups[o][n]=l,this._sprites.push(l),this._frameContainer.addChild(l)})})}_render(e){let t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new $.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new $.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),Promise.resolve()}_updateSprites(e){let t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,"top",0),this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,"left",0),this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}_updateHorizontalSpriteGroup(e,t,i=0){let o=e.getDimensions(),n=this._layoutMode==="vertical-inside",s=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,l=this._spriteGroups[t].end,c=0,u=0,d,p;if(s){d=s.getTexture().getDimensions(),p=d.y/d.x,c=Math.floor(this._frameWidth/p);let h=new Nh(0,i);h.x=n?this._frameWidth:0,s.setPosition(h),s.setHeight(this._frameWidth),s.setWidth(c)}if(l){d=l.getTexture().getDimensions(),p=d.y/d.x,u=Math.floor(this._frameWidth*p);let h=new Nh(o.x-u,i);h.x-=n?this._frameWidth:0,l.setPosition(h),l.setHeight(this._frameWidth),l.setWidth(u)}if(a){d=a.getTexture().getDimensions(),p=d.y/d.x;let h=new Nh(c,i),f=o.x-c-u;if(n&&(h.x+=this._frameWidth,f-=this._frameWidth*2),a.setPosition(h),a.setWidth(f),a.setHeight(this._frameWidth),this._options.frame.imageGroups[t].mid.mode==="repeat"){let _=this._frameWidth/p,x=Math.ceil(f/_),y=0;if(x!==-1){let D=Math.round(f/x);a.setWidth(D),y+=D,this._ensureRepeatSpritesExist(x-1,t,a);for(let E=0;E<x-1;E++){D=Math.round((f-y)/(x-E-1));let F=this._repeatSprites[t][E],N=h.clone().add(y,0).floor();F.setPosition(N),F.setWidth(D),F.setHeight(this._frameWidth),y+=D}}}}}_ensureRepeatSpritesExist(e,t,i){i.getTexture().setMaxListeners(e+1);let o=this._repeatSprites[t].length;if(e>o){let n=e-o;for(let s=0;s<n;s++){let a=new $.Sprite(i.getTexture());this._repeatSprites[t].push(a),this._frameContainer.addChild(a),this._sprites.push(a)}}else e<o&&this._repeatSprites[t].splice(e).forEach(s=>{let a=this._sprites.indexOf(s);a!==-1&&(this._sprites.splice(a,1),this._frameContainer.removeChild(s),s.dispose())})}_updateVerticalSpriteGroup(e,t,i=0){let o=e.getDimensions(),n=this._layoutMode==="horizontal-inside",s=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,l=this._spriteGroups[t].end,c=0,u=0,d,p;if(s){d=s.getTexture().getDimensions(),p=d.y/d.x,c=Math.floor(this._frameWidth*p);let h=new Nh(i,0);h.y=n?this._frameWidth:0,s.setPosition(h),s.setWidth(this._frameWidth),s.setHeight(c)}if(l){d=l.getTexture().getDimensions(),p=d.y/d.x,u=Math.floor(this._frameWidth*p);let h=new Nh(i,o.y-u);h.y-=n?this._frameWidth:0,l.setPosition(h),l.setWidth(this._frameWidth),l.setHeight(u)}if(a){d=a.getTexture().getDimensions(),p=d.y/d.x;let h=new Nh(i,c),f=o.y-c-u;if(n&&(h.y+=this._frameWidth,f-=this._frameWidth*2),a.setPosition(h),a.setHeight(f),a.setWidth(this._frameWidth),this._options.frame.imageGroups[t].mid.mode==="repeat"){let _=this._frameWidth*p,x=Math.ceil(f/_),y=0;if(x!==-1){let D=Math.round(f/x);a.setHeight(D),y+=D,this._ensureRepeatSpritesExist(x-1,t,a);for(let E=0;E<x-1;E++){D=Math.round((f-y)/(x-E-1));let F=this._repeatSprites[t][E],N=h.clone().add(0,y).floor();F.setPosition(N),F.setHeight(D),F.setWidth(this._frameWidth),y+=D}}}}}_disposeSprites(){this._sprites.forEach(e=>{this._frameContainer.removeChild(e),e.getTexture().dispose(),e.dispose()}),this._resetSprites()}dispose(){super.dispose(),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}static validateFrame(e){if(!e)return;let{imageGroups:t,layoutMode:i}=e;if(typeof e.identifier!="string")throw new Error("Frame needs a property `identifier` of type String.");if(typeof e.imageGroups!="object")throw new Error("Frame needs a property `imageGroups` of type Object.");let o=n=>{let{start:s,end:a,mid:l}=t[n];if(typeof t[n]!="undefined"){if(typeof t[n]!="object")throw new Error(`Frame: \`imageGroups.${n}\` needs to be of type Object.`);if(typeof s!="undefined"&&!(s instanceof oo||typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${n}.start\` needs to be of type Image.`);if(typeof l!="undefined"&&!(s instanceof oo||typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement)&&typeof l!="object")throw new Error(`Frame: \`imageGroups.${n}.mid\` needs to be of type Image or Object.`);if(typeof a!="undefined"&&!(a instanceof oo||typeof HTMLImageElement!="undefined"&&a instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${n}.end\` needs to be of type Image.`)}};if(typeof i!="undefined"&&["vertical-inside","horizontal-inside"].indexOf(i)===-1)throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if(typeof tintable!="undefined"&&typeof tintable!="boolean")throw new Error("Frame: `tintable` needs to be of type Boolean.");o("top"),o("left"),o("right"),o("bottom")}};qh.identifier="frame";qh.prototype.availableOptions={frame:{type:b.OBJECT,validation:qh.validateFrame,setter(r,e){return e||this._createSpritesForFrame(r),r},default:null},alpha:{type:b.NUMBER,default:1},tintColor:{type:b.COLOR,default:new ee(1,1,1,0)},scale:{type:b.NUMBER,default:.1}};Me.Operations.FrameOperation=qh;Ese=qh});var Dse,Ose=m(()=>{Dse="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAAAAADRE4smAAAsTElEQVR4Ae1d4bHjOM5ECAgBISgEZLDOwMrAysDMwMpAzkCTAUNQCAyBIfCr2ifI1DNh+c1tfTMg3b9udtZXC7tJdgMgCP8foJAUBIJx92eoEy5puAKkHH1jX0AchqoJcLwGlv1fDVAnyKtfQMoB1WLQKBBCyuCgVvQhvQGoF3RPb2Bs/AsgEDS6BqbGvwACaHsT+AV1AK/4W18AQy3gCxTAR2vAQxW4xHSD3/kC/qlI9NK7hqg6H8SLspiPv4C+kv0v6ouZQuUEEMfndUtcOQH6qJ9nR2sg1kD+FSdQ4GLS4MA82B+uZvJJRQXkFwT8uRp2VQl99xuGiOyTX4//+AuYqtj/BBGPiVITATjtEel4pdRFAJ/2uP08K9KBYXwPaT5OC9Vlg/kneQ0cUwHcQvz6F7BAXVuA/3GNsG8ofqBQmw3uUg7dCglcZQSgJHizvO1qy4OM3wPCH64BV1fnR8QfdkqAcWD86Q86KP9+o/EjGMfwrhVSpPPUWvy9YoMbsEIqAVrSgXBSCFC3FdK/sV+txc/Kv93OEpgrawiYfybsSWkIaMcK3SurB1P8Ufyk2OB2rNCoEKCV+BW2tGOFXG2N0RiUkkgZUfmumrFCfW0EgNOPKlxB6YtvQAcqRrix+BfFBjdjhVgnQL3xk+cyWwYQVG6FLjOs6PTjotaSCF5T8iUXJLSo3gqxT4kLPig6BKheB1/+/dvzEwGi/KParSDN+arAtMFTA/Gz3+8KTiF/tVZoaxx034zwwlAPvsc/7cifx+8U8tdqhfqwXxVihOMAgnp1sJA/lzu9Tv4KrRD7fFVki2VE+IuB3anvT0z/Y/x9KBRKexPkJ+77njv835YA3kvuaPm79z+6zDGtiP5Mv1sSObMv7gr8l5MfkMclCZaJf9sK0TUWd4U58N8b/NWnb5jo9+KPShM4EvzN4DGmPcL5p1ZIgVghhr8VNBZjuP4P8Rsr/fReGW72UyukIKDJeRYz/rQkoiAYHWkSTz+2QgrOVq657bG8xYAlHWBEQzcdf+OH43SAcPp7o3/N3un34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQV8iu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6P3wT5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvJT0y5+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1Wp5DfxAqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD5ZIL8gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mhfyaTOQKZl7e9RWg1ggnVO4D/TJ+q5UV8mstLX0Fjz/E1wW/Uo/EoGb9gu1O5vhWgTzqBGAwAER9C3RKj4SqlIO5sacEpPNfJ38OBstHAIdJlwD/vDXk3wNYPQLwFmHO/6wE9rKwPWilv2DkcRNWy9esng45olr9PhuYbQ+JtQ3Qq4VdTSo6S+FvZ5pXNSC/1+NL2ZdkpuNXDjTI42f9BNPj90ohMRh42UyYqhRuemUJ6GJ3MLMC5ECDlAaFAPG9MnEoN9IFMvCymaxUhQCjniXL0ZeXiTPR8Qqi449nNnL5ik8oCqURDb1l7RQCeM0kRX2jGIKBxP8lJgHk8XdpB1eO32F8ofV49H6+oKWXfVIkpRkCi0sgcP/qpOhn7ye2sfmlBLmKobK8FbB0RATbo037qCazx9dL4L4WtXtrCS/dzcLuN4yvbcy4bmzRMgHQv0hmDOoSEB044pMaYMvsh10I/nUqE4fCRjFazfaWWNwdXF7tu8JGgXbHdwkBgvK3DgowvQFq15WGstWLeFw0DaYn14DEf/zwn1ozNoZRKWm8//Bfb3i0JZYJIPHHN24BX5NxDfjqzdrhjQkGFCxvgaFIgHRTVsd01DR5tj7OX0D7M0CXeLiYrvneiwSQ0h0fzoK4Ku0AhhBfpbTno1kQtNh+7HZQCOA1hRToVUnU2Z/jK2BtpsFVSaLZ1ECsEECPP02kNgQGsj/NXxBUkxDOek+UA2NAjQABdZPkXX/qR68PSrG8BjYM+t+G+XLq+zEqrDGFRSFAcppE0jGBRWAqI6JmE3WQ9Unu8BS/SwewpADZB3p/eNdNqXtbHXOHt3Q9ssHwvJ6X9CYCWah7BDq+AK1YoUO4v7/j5Xpgg+FZB1Os4/cXyRo6RQWqVnCs4fdnr031jBoBJH6u4vfvo+bks5KPL2d9vPXfP/frE2rFkCWmBCVR36djeAQ7Qx4HbXKRi0VVg0s6RBysdLwspKjA6FKCoqrrjZ9+eE97XBUn5IdyXMcMCJ2dmn8gpSDIIUH5dz2F4zlxpobcXpU1AF6p/45mh9yyks0tqMChT6DUfynYnHCqXuCasOiEmLXUxhBNDrnFosWJXdEG/wIPapf/EEwOeew0AbdQcQ08VQb4cFh6OMNfC3XC97lUDInAcNfiB3IFCsSRrOV5BYEKTsg/uV5/MC7cn420O+mH4JAnPlCLv/BcQvQXNFbvVhiQrQFwL9YK3UPKEUa2NOFBYQDv7JF7md1EdrMPIYRlujDaerNSV+5Z0AwYXia4u370SwghzGNPxjL9Snsb7u4vY1B0sFW4N6a8nnK+99YrvDr/leaeZdf3zjXEj1d+a9bt9fsa8HJwmn6+mafCAa8L4fu++uHtlzgvMS1lHagwIORrgBUrZAXkc/EejvP3w/7A72zHL2p9KEhh9SS857ZHt0I2Nr+9cuHjCk73Le0xWo4faM7Fi8SnY8anNaBbIRObn3bFWU8JbfFGoEL8wRT/47a2VSnsn05CzoTwgRUyUvSKqPW9h+fhlz4JYJAzwaYO7PPgOk0KB/d9H8QkiGDXCtFccHmFzMY+umu+QmASX2AvfmVqcYnRw/CNAVnEnS0rpBe9WOV/950BfRJALAoHYZOxtJcqhSP2307CMd/ubVohWf7H/Hffyts3SgJYI/UmdeC91KWqMLqLiiz4VSSTN8j/k6YDI+KeLXNGgKHUCBjPNtNeuhRm9SnIWBSOHu2lfXX+T2qNBNJUEA4zGU376lLY6z0O3TOZ4mCc/4Uit1MIEOX/TG93MPTEmS6FWWOAeL7BzstmgkGb51AocisMgE3uDAr5jZX/dSmMGgN+fSuReDJ3zUsw61ZQYUA2KNIL+U3Bvy+FtUeR445Mgc3zX81suCIBpJDEOvkrkcLajLDu8YE41ML/U0kf9CUCxE04LDr565DCYh2VxC/FEcEWKCqxKEVujs8E2HIeevD1SOHiPvgL7H4Dig9Si9xdeCZADzoqk8JlBkQQVMN/vchL4YkAE+ioTAorDOgq4n8ijRsLFBgAevW3Vil8XP21rwOVMAsMAL32V6UUVh74a4v/uRkG/U3LOqWwMCPqN32sTz0LKjduz6MOQc/7ViqFV3RRz/tWy//0/DAC6KhZCstJeFz3qq0kJhiVza8RKSwMsL//6SUxhf8Cp2x+DUhhAS0D1IGT4mtf9vs6ZfNrRQofo9KSmIrWpDA0wf/3+30blMI6Ki6JKfxvUwq/j6q6IxW0I4W7tvgfj940b0wK+w5qRFAHeTtlvGGbUjgw6KjUB0VlvF2DUjg6bJD/vbL5tSeFp5r5T/pkOK9sfo1JYc/N8l/Z/JqSwvHcMP/vyubXkBRmhHpx3B3JoKANHdgAlO5IDQ1JYQUf/rcmhQUf/rcqhVsAxWb5r0hhT9AU3NGzNm1J4cAN8l/J+zYohaOD9tD/DZvfnyUe/3n+I8Ifg//jmx/58Oel8B/N+/Z/cu/hP7z54e2Pdx5STOEEfwzs/2zn3f3PHv7zX9B5ODj80zJs+pPzY/nPZ2Ju0CrEifEn/laBsc0cHLYXv/IN9E3m4Pp43WViTtAY8Ba3aWON5aBlbvuMz/ETNIJrfFxG4awdA7GJ6LNHqfL4Ox8RWgCG3ZNU960d4xKnlkpwgTIrSHhrxw/E7DaK6KD5a2PklhLQoXsUJZfYkB9Y8iepxAr5NmryMq81PMSvU14eqBf37QsI9O2emkeoFnilx0Ocp7AdgxhaqUjy7WF9fP9gADexAK4xzY8dcKAHA06///KAwSc7ZQ/E/nEO+tpvIsmUJd52QL/NXcKv+MOp+txHSml57IH/iBgaVkZ4qt/6+G0HjCgMWAi4bvLnfn/Y9sARoM+e5lu4kfhlB2S4xM0O9tRKE27ETQUC3pMwAIdm4pcdcPZJMEETkNKnJMBvMQn+qTrvG1OcSF7rcPtGvFC/9cOrT2m5kGTAut3LJUvlhz/N35+gpWz06Ii01H74c5CDLit94sP29YFrJn9MgnMW/yC2r3p0Pr90MmzZzlCr7dMf645Z/Czjh6ov+n67f71I6fMuJ38D5J8uX0d+v/I+rDtggMohNic697Xgs9LnIJaoWuD2sJ4YgCmLP3z54KpB4FehIwWvTqzQ15dT+eE/SLCS650yK3iv/hoe+Yji+0T2sjBhAqxXAIjyjbj6PiHAmFnhE9du/f4N8+H7vPwP6YJ1VP3hL/HTVgeQ+CO1cfh3m+85i+hZrdDYgvL14vtWLzjRGn/1RV8vJn/1PYPPHtzoK099bQl+3l++li9gEPdfd+pLCL8kwfbizFz34S+hFudwTQSC6lNfJymBtTSD4ZYEAfP4fWil4yskgcvvX8dx/Yula2XulNuXAF1sYgOA8fvYPfF9dK99A5D4w2nO4xcrTN5zI1f9PIv4391+7MOI9ccfHK6kn9+4/VkhJYaFt6CPbz8i16J888O9EP8vRS8PUAl4waf+t+Xw9ieHiJUo3/Acv89aoEnRyxGrSX255/dIhk0HRYdKwuxWS9F3F3+/i39hvVTsqkl9RVL6/4DTiHrCrKsj7RUH0OLHF59yWE3qy3dPfkiWd/fiU1xH3nfCkh90x58yD17KGR6pg+gJsypsYU5jhAx3PX4RhvHfT3FXw0VXh/IFvDf6xT0WAF7R8JAT9+hz9f4p/tAdTQbqvOXZGLj7nS9xeIpx1oLbbMIlJmdV+fot/q9N/Vv8+gEvNgFvpnXgJQ6yBZwK8/5C8nx0TYa9yEeTh/9Z6n1TfJr3h8W0FxLhI/5oeEjc+ovLiJv5WfTwAOVvQGSyIJ6sKt8t/jcFbf81lvUs8RuWwXSXXzyvf+BhxiSk9HVNhvRP2VK+nBf7jz8ldyS6/FNosugr7L2r87aVT8k1GfmUtS+A/I6582O0Q3c7/pQwYFTkowWcQj5imzJPc+GDTwmmVT4tIiYMYc74fpL4py9ZwMfk37eLiZiwBIyZ9esyT8OKpxHJkGOQazIiJuyAokg39om3+C9Rv+zRxfV37/u7XBTL5WNAm/Nt8RrD5mlo1j2NNMdF11+CXJRaFPloJf5/A172I45id5j56cQ5B7ONUlLs4vBlfk+Zp5mV/f9pKNgAbPCRenfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK88OKdURvy4Bb+uxIuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs2QjE60giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOloBkfkwhT10PUv8BD8BBL9/KtoEwbicF4GIsfKV5fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYC3zozWvbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgvhhge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSsxu/fo/7JfjRJDz0KSWULJB5DBLIYfzrybeElDxYjl8J7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxtwtxfk3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaCBw98KPvjggw8++OCDDz744IMPPvjggw8++OCDDz744IMP8NZD22APDeMaU9sEIN9w+4k81dAu8CpjdxqAPoqpVcgYcmyY/A01oOlz+Klh8rdLAJqTgNokv+AXtAH9AT5ul/zN3kAKSdDiDaQh5QjQHkLK0TfH/+YJsKQcAzSGLuWIrd6/EbRnhCntAO1hVAZWt4KYchBA2yqoPSMcWifAqXECzClHB82hS40ZYTzrGqiNPAjvosSUY2kh7xsIHnAt2WCpe11VFRQaKPru3W7fFAGk7hVIUUGxhaJvyq/dc8rhWql7hbOigmonvyB0xUSAa6bulW5YVEFYPfkFcg4244Kk7iUIVFJBVD/5BQs9H4FTE0VfwbWggromyJ+fg0vK4Nso+u6kUFe/ERbyP+EmR2DlBOh8KiMwANXvgygkBYFgbMEGu6ThCqAQoI0vIA6DToAm1sBCoYWGAPLqF9CIDR40CoTQhhHuQ3oDUC/ont7A2PgXQCBodA1MjX8BBND2JvCrmrwHvvsFVGqD+aJUw17DV5P3vcHvfAH/VCR66V1DVJ0P4kVZzMdfQF9R3tfrjlBHqMfxedUS106APurn2dEaiBUVPU6gwMWkwdVU9wov14iCCsgvCPhzNTxWJfTdbxgiqqjo637uCKeqir4RD4hSGQE47RHpYKVURwBfKHf+cA10NdzyEMwHaaHqbDD/JK+BYyqAW4hf/wIWqGsL8D+uEfYtxK9/AaGqez5ihXS4yghA6RuGHzYKhLou++pWSF0Drq7Oj4g/7JQA48D40x900P/9FuNHMI7hXSukSOeptfh73QY3YIV0ArSiA+GkEKBuK6R/Y79ai5/1f7uRJTBX1hAw/0zYk94Q0IgVuldWD6b4o/hJt8GNWKFRJ0AT8etsacQKudoaozHoJZECov5dtWGF+toIAKcfVbiC3hDQhg7UjXAb8S+6DW7DCrFCgKrjJ89ltgwgqNwKXWZlXK4QoNaSiEyL8SUXJLSo3gqxT4kLPig6BKhcB8u0mPMTAaL8o9qtIM35qsC0wVMD8bPf7wpOIX+1VmhrHHTfjPDCFc4AFkw5+XfxO4X8tVqhPuxXhRjhOICgXh0s5M/lTq+Qv04rxD5fFdliGRH+YmB36vsT0/8Yfx8KhdLeBPmJ+77nDv+3JYD3kjta/u79jy5zTCuiP9PvlkTO7Iu7Av/l5AfkcUmCZeLftkJ0jcVdYQ789wZ/9YXZZr8Vf1SawJHgbwaPsTje7n0rpEKsEMPfChqLMVz/h/iNlX56rww3+6kVUhDQ5DyLGX9aElEQjI40iacfWyEFZ1OzTTcs+LMX0RSMaGm87c9/OE4HCKe/fbK/hun34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQJ8uu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6I3xL5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvsXoSR+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1WZ4L8ygqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD4J+S0gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mjfyKTOQKZl7e9RWg1ggnVO4D/TJ+q5U18istLX0Fjz9EreCnP4E5qFm/YLuTOb5VII86ARgMAFHfAp3aI6Eo5WBu7CkB6fzXyZ+DwfIRwGHSJcA/bw359wBWjwC8RZjzP2uBvSpsD1rpLxh53ITV8jWrp0OOqFa/zwZm20NibQP0emFXkYrOUvjbmeZVDcjv9fhS9iWZ6fiVAw3y+Fk/wfT4vVJIDAZeNhOmKoWbXlsCqtgdzKwAOdAgpUEhQHyvTBzKjXSBDLxsJitVIcCoZ8ly9OVl4kx0vILo+OOZjVy+4hOKQmlEQ29ZO4UAXjNJUd8ohmAg8X+JSQB5/F3awZXjdxhfaD0evZ8vaOllnxRJaYbA4hII3L86KfrZ+4ltbH4pQa5iqCxvBSwdEcH2aNM+qsns8fUSuK9F7d5gwktxs7D7DeNrGzOuG1u0TAD0L5IZg7oERAeO+KQG2DL7YReCf53KxKGwUYxWs70lFncHl1f7rrBRoN3xXUKAoPytgwIMb4D6daWhbPUiHhdNg+nJNSDxHz/8p9aMjWFUShrvP/zXGx5tiWUCSPzxjVvA12RcA756tHh4Y4IBBctbYCgSIN2U1TEdNU2erY/zF9D+DNAlHi6ma773IgGkdMeHsyCuSjuAIcRXKe35aBYELbYfux0UAnhNIQV6VRJ19uf4ClibaXBVkmg2NRArBNDjTxOpDYGB7E/zFwTVJISz3hPlwBhQI0BA3SR515/60WuDUmyvgQ2D/rdhvpz6fowKa0xhUQiQnC6RNExgEZjKiKjbRA1kfZI7PMXv0gEsKUD2gd4f3nXT694mx9zhLV2PbDA8r+clvYlAFuoegY4vQCtW6BDu7+94uR7YYHjWwRTr+P1FsoZOVYGKFRxr+P3Za1M9o0YAiZ+r+P37qDj5vOTjy1kfb/33z/36hFoxZIkpQUnU9+kYHsHOkMdBm1zkYlHV4JIOEQcrHS8LKSowupSgqOp646cf3tMeV8UJ+aEc1zEDQmen5h9IKQhySFD+XU/heE6cqSG3V2UNgFfqv6PZIbesZHMLKnDoEyj1XwomJ5zqF7gmLDohZi21MUSTQ26xaHFiV7TBv8CD2uU/BJNDHjtNwC1UXANPlQE+HJYezvDXQp3wfS4VQyIw3LX4gVyBAnEka3leQaCCE/JPrtcfjAv3ZyPtTvohOOSJDyzErz2XEP0FbdW7FQbkawDci7VC95ByhJEtTXhQGMA7e+ReZjeR3exDCGGZLozW3qxUlHseNAOGlwnurh/9EkII89iTsUy/0t6Gu/vLGBQdbBXujSmvp5zvvfUKr85/pbln2fW9cw3x45XfmnV7/b4GvBycpp9v5qlwwOtC+L6vfnj7Jc5LTEtZByoMCPkaYMUKWQH5XLyH4/z9sD/wO9vxi1ofClJYPQnvue1RrJCZzW+vXPi4gtN9S3uMluMHmnPxIvHpmPFpDShWyMjmp15x1lNCW7wRqBB/MMX/uK1tVQr7p5OQMyF8YIWMFL0ian3v4Xn4pU8CGORMsKkD+zy4TpPCwX3fBzEJIti1QjQXXF4hs7GP7pqvEJjEFxiLX59aXGL0MHxjQBZxZ84KKUUvVvnffWdAnwQQi8JB2GQs7aVK4Yj9t5NwzLZ7o1ZIlv8x/9238vaNkgDWSL1JHXgvdakqjO6iIgt+FcnkDfL/pOnAiLhny5wRYCg1AsazzbSXLoVZfQoyFoWjR3tpX53/k1ojgTQVhMNMRtO+uhT2eo9D90ymOBjnf6HI7RQCRPk/09odTD1xpkth1hggnm+w87KZYNDmORSK3AoDYJM7g0J+Y+V/XQqjxoBf30oknsxd8xLMuhVUGJANivRCflPw70th7VHkuCNTYPP8VzMbrkgAKSSxQv56pLA2I6x7fCAOtfD/VNIHfYkAcRMOi0L+aqSwWEcl8UtxRLAFikosSpGb4zMBtpyHEnxVUri4D/4C5Ruw7IOUIncXngnQg4L6pHCZAREENfFfKfJSeCLABDoqk8IKA7qK+J9I48YCBQaAXv2tVQofV3/t60AlzAIDQK/9VSuF9Qf+GuF/boZBf9OyTikszIjaTR/7U8+Cyo3b86hD0PO+lUrhFV1U8r418z89P4wAOqqVwnISHte9KiyJCUZl82tECgsD7O9/eklM4b/AKZtfA1JYQMsAdeCk+NqX/b5O2fxakcIHqLckpqI1KQxN8P/9ft/mpLCOqktiCv/blMLvo6ruSAXtSOGuLf7HozfNG5PCvoMaEdRB3k4Zb9imFA4MCur1QVEZb9egFI4OG+R/r2x+7UnhqWb+kz4ZziubX2NS2HOz/Fc2v6akcDw3zP+7svk1JIUZoWocdEcyKGhABzYAvTtSQ0NSWMGH/61J4Q//Bc1J4YZAsU3+61LYEzQFd/SsTVtSOHCD/Ffyvg1K4eigPfTK5tcQuG3++9Y2P+Ur8Nwy/6ODhkExhRM0i7tsfu1icNgy/2eGD+zDMhAaByI0DPIB2kbfsgbDmxSiWwV7aURoErNy/aSxXNwErYKU6yetpeP5E3/bW4BvL+724le+gb7JQmwfr7ty3Kk99Ru7PBcdsDXlm2Z8jp+gBci77UNejnINpQSu2cukefydb8QPYNi9S3rfenIvcWqpDytQZgUJb+34gZhdSRYdNH9tjNxSF0LoHp1pS2zIDyz5u6RihXwbjZkytD88xK/Tn5+qFPftCwj0bViBR6gWeKXHa+ynsB2DGFppS+Pbw/r4/sEAbmIBXGOaHzvgQA8GnH7/+SmD77bLHoj94xz0tV9Hl1GbvO2Afhu+iV/xh1P1uY+U0vLYA/8RMTSsjPBUv/Xx2w4YURiwEHDd5M/9/rDtgSNAn73PvHAj8csOyHCJmx3sqZX204ibCgS8J2EADs3ELzvg7JNgaqv0KQnwW0yCf6rO+8YUJ5In29z+Nkao3/rh1ae0XEgyYN3u+bql8sOfZtnlJH7K5s+PSEvthz8HOeiy0ic+bF8fuGbyxyQ4Z/EP1ds+Qefzm8fDlu0MVds+QR/SAzGLn2UGZQstjxscwCKlz7uc/A2Qf7p8Hfn9yvuw7oABKofYnOjc14LPSp+DWKJqgdvrymIApiz+8OWDqwaBX4WOFLw6sUJfX07lh/8gwUqud8qs4L3668jkI4rvE9nLwoQJsF4BIMo3ovi+lQBjZoVPXLv1+zfMh+/z8j+kC9ZR9Ye/xE9bHUDij9TG4d9tvucsome1QmMLyteL71u94ERr/NUXfb2Y/NX3DD57da2vPPW1Jfh5P4FHvoChbvcvqS8h/JI2yLODc92Hv4RaHMY6EQiqT32dpATW0iCuWxIEzOP3oZWOr5AELh/CE8f1L5auleGjbl8CdLGJDQDG77OXxffRvfYNQOIPpzmPX6wwec+NXPXzLOJ/d/uxDyPWH39wuJJ+fuP2Z4WUGBbegj6+/Yhci/LND/dC/L8UvTxAJeAFn/rflsPbnxwiVqJ8w3P8PmuBJkUvR6wm9eWeH6UbNh0UHSoJs1stRd9d/P0u/oX1UrGrJvUVSen/A04j6gmzro60VxxAix9ffMphNakv3z35IVne3YtPcR153wlLftAdf8o8eClneKQOoifMqrCFOY0RMtz1+EUYxn8/xV0NF10dyhfw3ugX91gAeEXDQ07co8/V+6f4Q3c0Gajzlmdj4O53vsThKcZZC26zCZeYnFXl67f4vzb1b/HrB7zYBLyZ1oGXOMgWcCrM+wvJ89E1GfYiH00e/mep903xad4fFtNeSISP+KMoJbsTHmXEzfwseniA8jcgMlkQT1aV7xb/m4K2/5rNf5b4Dctgussvntc/8DBjElL6uiZD+qdsKV/Oi/3Hn5I7El3+KTRZ9BX23oXK9Oan5JqMfMraF0B+x9z5Mdqhux1/ShgwavLRAE4hf2eFMk9z4YNPCaZVPi0iJgxhzvh+kvinL1nAx+Tft4uJmLAEjJn16zJPw+JpFMmQY5BrMvbGRVMU6cY+8Rb/JeqXPbq4/u59f5eLYrl8DGhzvi1eY9g8Dc26p5HmuOj6S5CLUosmH43E/2/Ay37EUewOMz+dOOdgtlFKil0cvszvKfM0s7L/Pw0FG3L56DuwAXfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK29PKtURvy4Bb+vFSuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs+QjE40giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOl4BkfiwhT10PUv8BD8BBL9/KtoEwbicF4GIpfL15fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYCvzozevbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgrhlge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSMx2/co/7JfjRJDz0KSWULJB5DIeBSPzrybeElDyYjV8P7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxNwtxfm3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaC5w/+DDz744IMPPvjggw8++OCDDz744IMPDABvPbQN9tAwrjG1TQDyDdceZU53u8CrzFxoAPocjlYhM2ixXfK31H2gD2GmhsnfLgFoTgJqk/yCX9AMlNeXuF3yN9t+HpKgxfbzIeUI0B5CytE3x//mCbCkHAM0hi7liK02XwvaM8KUdoD2MCrTSltBTDkIoG0V1J4RDq0T4NQ4AeaUo4Pm0KXGjDCeFQ3UTB6Ed1FiyrG0kPcNBA+4lmyw1L2uqgoKLRR9d263b4oAUvcKpKig2ELRN+V3LjnlcK3UvcJZUUG1k18QumIiwDVT90o3LKogrJ78AjkHm3FBUvcSBCqpIKqf/IKFno/AqYmir+BaUEFdE+TPz8ElZfBtFH13Uqir3wgL+Z9wkyOwcgJ0PpURGID+qA/6P9HpZtdg1QgHAAAAAElFTkSuQmCC"});var Fse,Rse=m(()=>{Fse=`uniform sampler2D u_image;
uniform sampler2D u_watermarkTex;

varying vec2 v_texCoord;


void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);

  if (watermarkColor.r > 0.8) {
    gl_FragColor = mix(color, watermarkColor, 0.3);
  } else {
    gl_FragColor = color;
  }
}
`});var r1,Ase=m(()=>{re();Rse();r1=class extends $.Filter{constructor(...e){super(...e);this._fragmentSource=Fse}_applyWebGL(e,t,i,o=!1){let n=e.getContext(),{canvas:s}=n,a=this.getShaderForRenderer(e),l=t.getFrame(),c=this._watermarkCanvas;(!c||l.width!==c.width||l.height!==c.height)&&this._createWatermarkCanvas(l.width,l.height);let u=$.Texture.fromCanvas(this._watermarkCanvas),d=u.getBaseTexture();e.updateTexture(d),d.setGLUnit(1),e.setRenderTarget(i),o&&i.clear(),e.setShader(a);let p=e.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",p),a.syncUniforms(),n.uniform1i(n.getUniformLocation(a.getProgram(),"u_watermarkTex"),1),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,d.getGLTextureForRenderer(e)),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),u.dispose()}_createWatermarkCanvas(e,t){let i=this._options.watermarkImage,o=K.createCanvas();o.width=e,o.height=t;let n=o.getContext("2d"),s=n.createPattern(i,"repeat");n.fillStyle=s,n.fillRect(0,0,o.width,o.height),this._watermarkCanvas=o,this._watermarkContext=n}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),l=this._options.watermarkImage;this._createWatermarkCanvas(n.width,n.height);let c=s.getImageData(0,0,n.width,n.height),u=this._watermarkContext.getImageData(0,0,n.width,n.height),d=new ee,p=new ee,h=new ee;for(let f=0;f<n.width*n.height*4;f+=4)d.set(c.data[f]/255,c.data[f+1]/255,c.data[f+2]/255,c.data[f+3]/255),p.set(u.data[f]/255,u.data[f+1]/255,u.data[f+2]/255,u.data[f+3]/255),p.r>.8?h.copy(d.clone().mix(p,.3)):h.copy(d),c.data[f]=h.r*255,c.data[f+1]=h.g*255,c.data[f+2]=h.b*255,c.data[f+3]=h.a*255;a.putImageData(c,0,0)}};r1.prototype.availableOptions={watermarkImage:{type:b.OBJECT,required:!0}}});var Sy,Pse,Mse=m(()=>{re();Ose();Ase();Sy=class extends lt{constructor(...e){super(...e);ce(this,"_applyWatermarkFilter",()=>(this._watermarkFilter||(this._watermarkFilter=new r1({watermarkImage:this._watermarkImage})),this._sprite.setFilters([this._watermarkFilter]),this._renderTexture.render(this._container),Promise.resolve()));ce(this,"_loadWatermarkImage",()=>this._watermarkImage?Promise.resolve():new Promise((e,t)=>{this._watermarkImage=new oo,this._watermarkImage.onload=e,this._watermarkImage.src=Dse}));this._watermarkFilter=null,this._watermarkImage=null}_render(e){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}dispose(){this._watermarkFilter&&this._watermarkFilter.dispose(),super.dispose()}};Sy.identifier="license-watermark";Sy.prototype.availableOptions={};Me.Operations.LicenseWatermarkOperation=Sy;Pse=Sy});var Lse,Bse=m(()=>{Lse=`/*!
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform vec2 u_controlPoint1;
uniform vec2 u_controlPoint2;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    vec2 vector = u_controlPoint2 - u_controlPoint1;
    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    float radius = smoothstep(0.0, 1.0,
      abs(
        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)
      )
    ) * u_blurRadius;

    for (float t = -30.0; t <= 30.0; t++) {
      float percent = (t + offset - 0.5) / 30.0;
      float weight = 1.0 - abs(percent);
      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

      color += _sample * weight;
      total += weight;
    }

    gl_FragColor = color / total;
}
`});var El,aP,i1,zse=m(()=>{re();Bh();Bse();({Vector2:El}=he),aP=class extends $.Filter{constructor(...e){super(...e);this._fragmentSource=Lse,this._lastBlurRadius=null,this._lastControlPoint1=new El,this._lastControlPoint2=new El,this._blurFilter=new no,this._blurredRenderTarget=new $.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new $.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}let n=t.getDimensions(),s=!i.getDimensions().equals(n);if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s){let l=new El(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);let c={blurRadius:this._options.blurRadius,texSize:n},u=(_,x,y)=>Math.min(Math.max(_,x),y),d=(_,x,y)=>{let D=u((y-_)/(x-_),0,1);return D*D*(3-2*D)},p=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),{blurRadius:h}=this._options,f=(_,x)=>d(0,1,Math.abs(u(new El(_,x).subtract(this._options.controlPoint1).dot(p)/p.dot(p),0,1)))*h;this._blurFilter.set(c),this._blurFilter._applyCanvas(e,t,i,o,f),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,i,o=!1){let n=t.getDimensions(),s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());let a=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||s,l=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;a&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),l&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,i)}_renderMask(){let e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),i=new El(e.width,e.height),o=this._options.controlPoint1.clone().multiply(i),n=this._options.controlPoint2.clone().multiply(i),s=t.createLinearGradient(o.x,o.y,n.x,n.y);s.addColorStop(0,"#FFFFFF"),s.addColorStop(1,"#000000"),t.fillStyle=s,t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){let i=t.getContext(),o=e.getCanvas(),n=e.getContext(),s=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),l=n.getImageData(0,0,o.width,o.height),c=l.data,u=s.getImageData(0,0,o.width,o.height).data,d=a.getImageData(0,0,o.width,o.height).data,p;for(let h=0;h<o.width*o.height*4;h+=4)p=d[h]/255,c[h]=p*c[h]+(1-p)*u[h],c[h+1]=p*c[h+1]+(1-p)*u[h+1],c[h+2]=p*c[h+2]+(1-p)*u[h+2];i.putImageData(l,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}};aP.prototype.availableOptions={blurRadius:{type:b.NUMBER,default:30,uniformType:ne.FLOAT},controlPoint1:{type:b.VECTOR2,default:new El(0,.5),uniformType:ne.FLOAT2},controlPoint2:{type:b.VECTOR2,default:new El(1,.5),uniformType:ne.FLOAT2},delta:{type:b.VECTOR2,default:new El(1,1),uniformType:ne.FLOAT2},texSize:{type:b.VECTOR2,default:new El(100,100),uniformType:ne.FLOAT2}};i1=aP});var o1,wy,Use,Nse=m(()=>{re();zse();({Vector2:o1}=he),wy=class extends lt{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius,this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone();let t={blurQuality:{type:b.STRING}};this._horizontalFilter=new i1({},t),this._verticalFilter=new i1({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new o1(.5,.5)),this._verticalFilter.setDelta(new o1(-.5,.5)),this._filter=new i1({},t)}rotate(e){let{controlPoint1:t}=this._options,{controlPoint2:i}=this._options;e===90?(t.flip(),t.x=1-t.x,i.flip(),i.x=1-i.x):e===-90&&(t.flip(),t.y=1-t.y,i.flip(),i.y=1-i.y),this.set({controlPoint1:t,controlPoint2:i})}flip(e){let{controlPoint1:t}=this._options,{controlPoint2:i}=this._options;switch(e){case"horizontal":t.x=1-t.x,i.x=1-i.x;break;case"vertical":t.y=1-t.y,i.y=1-i.y;break}this.set({controlPoint1:t,controlPoint2:i})}transform(e){let t={};["controlPoint1","controlPoint2"].forEach(i=>{let o=this.getOption(i);t[i]=e.applyToRelativePoint(o)}),["blurRadius"].forEach(i=>{let o=this.getOption(i);t[i]=e.applyToRelativeSize(o)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){let t=e.getDimensions(),i=t.min(),{blurRadius:o,controlPoint1:n,controlPoint2:s}=this._options,a={blurRadius:o*i,controlPoint1:n.clone(),controlPoint2:s.clone(),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){let t=e.getDimensions(),{blurRadius:i,controlPoint1:o,controlPoint2:n}=this._options;return this._filter.set({blurRadius:i,controlPoint1:o.clone(),controlPoint2:n.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}};wy.identifier="linear-focus";wy.prototype.availableOptions={controlPoint1:{type:b.VECTOR2,default:new o1(0,.5)},controlPoint2:{type:b.VECTOR2,default:new o1(1,.5)},blurRadius:{type:b.NUMBER,default:.025},highQualityCanvasBlur:{type:b.BOOLEAN,default:!1}};Me.Operations.LinearFocusOperation=wy;Use=wy});var Hse,qse=m(()=>{Hse=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform float u_gradientSize;
uniform float u_size;
uniform vec2 u_start;
uniform vec2 u_end;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));
    float radius = smoothstep(0.0, 1.0,
      (abs(
        dot(v_texCoord * u_texSize - u_start, normal)
      ) - u_size) / u_gradientSize
    ) * u_blurRadius;

    for (float t = -30.0; t <= 30.0; t++) {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
}
`});var Il,lP,n1,jse=m(()=>{re();Bh();qse();({Vector2:Il}=he),lP=class extends $.Filter{constructor(...e){super(...e);this._fragmentSource=Hse,this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastStart=new Il,this._lastEnd=new Il,this._blurFilter=new no,this._blurredRenderTarget=new $.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new $.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}let n=t.getDimensions(),s=!i.getDimensions().equals(n);if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s){let l=new Il(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);let c={blurRadius:this._options.blurRadius,texSize:n},u=(F,N,R)=>Math.min(Math.max(F,N),R),d=(F,N,R)=>{let B=u((R-F)/(N-F),0,1);return B*B*(3-2*B)},{blurRadius:p,gradientSize:h,size:f,start:_,end:x,texSize:y}=this._options,D=new Il(_.y-x.y,x.x-_.x);D.divide(D.len());let E=(F,N)=>d(0,1,(Math.abs(y.clone().multiply(F,N).subtract(_).dot(D))-f)/h)*p;this._blurFilter.set(c),this._blurFilter._applyCanvas(e,t,i,o,E),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,i,o=!1){let n=t.getDimensions(),s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());let a=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||s,l=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;a&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),l&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,i)}_renderMask(){let e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),i=this._maskRenderTarget.getPixelRatio(),o=new Il(e.width,e.height),n=this._options.size*o.min()*i,s=this._options.gradientSize*o.min()*i,a=this._options.start.clone().multiply(o),c=this._options.end.clone().multiply(o).clone().subtract(a),u=a.clone().add(c.clone().divide(2)),d=c.len(),p=c.clone().divide(d),h=u.clone().add((n+s)*p.y,-(n+s)*p.x),f=u.clone().add(-(n+s)*p.y,(n+s)*p.x),_=t.createLinearGradient(h.x,h.y,f.x,f.y),x=f.clone().subtract(h).len();_.addColorStop(0,"#000000"),_.addColorStop(s/2/x,"#FFFFFF"),_.addColorStop(1-s/2/x,"#FFFFFF"),_.addColorStop(1,"#000000"),t.fillStyle=_,t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){let i=t.getContext(),o=e.getCanvas(),n=e.getContext(),s=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),l=n.getImageData(0,0,o.width,o.height),c=l.data,u=s.getImageData(0,0,o.width,o.height).data,d=a.getImageData(0,0,o.width,o.height).data,p;for(let h=0;h<o.width*o.height*4;h+=4)p=d[h]/255,c[h]=p*c[h]+(1-p)*u[h],c[h+1]=p*c[h+1]+(1-p)*u[h+1],c[h+2]=p*c[h+2]+(1-p)*u[h+2];i.putImageData(l,0,0)}dispose(){super.dispose(),this._blurFilter.dispose()}};lP.prototype.availableOptions={blurRadius:{type:b.NUMBER,default:30,uniformType:ne.FLOAT},size:{type:b.NUMBER,default:50,uniformType:ne.FLOAT},gradientSize:{type:b.NUMBER,default:50,uniformType:ne.FLOAT},start:{type:b.VECTOR2,default:new Il(0,.5),uniformType:ne.FLOAT2},end:{type:b.VECTOR2,default:new Il(1,.5),uniformType:ne.FLOAT2},delta:{type:b.VECTOR2,default:new Il(1,1),uniformType:ne.FLOAT2},texSize:{type:b.VECTOR2,default:new Il(100,100),uniformType:ne.FLOAT2}};n1=lP});var s1,Ty,Wse,Gse=m(()=>{re();jse();({Vector2:s1}=he),Ty=class extends lt{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius,this._lastSize=this._options.size,this._lastGradientSize=this._options.gradientSize;let t={blurQuality:{type:b.STRING}};this._horizontalFilter=new n1({},t),this._verticalFilter=new n1({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new s1(.5,.5)),this._verticalFilter.setDelta(new s1(-.5,.5)),this._filter=new n1({},t),this._renderBlur.bind(this)}rotate(e){let{start:t}=this._options,{end:i}=this._options;e===90?(t.flip(),t.x=1-t.x,i.flip(),i.x=1-i.x):e===-90&&(t.flip(),t.y=1-t.y,i.flip(),i.y=1-i.y),this.set({start:t,end:i})}flip(e){let{start:t}=this._options,{end:i}=this._options;switch(e){case"horizontal":t.x=1-t.x,i.x=1-i.x;break;case"vertical":t.y=1-t.y,i.y=1-i.y;break}this.set({start:t,end:i})}transform(e){let t={};["start","end"].forEach(i=>{let o=this.getOption(i);t[i]=e.applyToRelativePoint(o)}),["blurRadius","size","gradientSize"].forEach(i=>{let o=this.getOption(i);t[i]=e.applyToRelativeSize(o)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){let t=e.getDimensions(),i=t.min(),o=this._options.start.clone(),n=this._options.end.clone(),{blurRadius:s,size:a,gradientSize:l}=this._options,c={blurRadius:s*i,size:a*i,gradientSize:l*i,start:o.clone().multiply(t),end:n.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(c),this._verticalFilter.set(c),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){let t=e.getDimensions(),{blurRadius:i,size:o,gradientSize:n,start:s,end:a}=this._options;return this._filter.set({blurRadius:i,gradientSize:n,size:o,start:s.clone(),end:a.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}};Ty.identifier="mirrored-focus";Ty.prototype.availableOptions={start:{type:b.VECTOR2,default:new s1(0,.5)},end:{type:b.VECTOR2,default:new s1(1,.5)},blurRadius:{type:b.NUMBER,default:.025},size:{type:b.NUMBER,default:.1},gradientSize:{type:b.NUMBER,default:.1},highQualityCanvasBlur:{type:b.BOOLEAN,default:!1}};Me.Operations.MirroredFocusOperation=Ty;Wse=Ty});var lWe,ky,Vse,$se=m(()=>{re();({Vector2:lWe}=he),ky=class extends lt{_render(e){let t=this._options.rotation%360,i=t*(Math.PI/180),o=t===90||t===270,n=this._options.flipHorizontally!==this._options.flipVertically,s=o&&n?!this._options.flipVertically:this._options.flipVertically,a=o&&n?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(a?-1:1,s?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();let l=this._sprite.getBounds();return this._renderTexture.resizeTo(new lWe(l.width,l.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e}flip(e){let{rotation:t}=this._options;switch((t===90||t===270)&&(e==="vertical"?e="horizontal":e="vertical"),e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally());break}}};ky.identifier="orientation";ky.prototype.availableOptions={rotation:{type:b.NUMBER,default:0,validation(r){if(r%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:r=>(r+360)%360},flipVertically:{type:b.BOOLEAN,default:!1},flipHorizontally:{type:b.BOOLEAN,default:!1}};Me.Operations.OrientationOperation=ky;Vse=ky});var a1,Ey,Kse,Xse=m(()=>{re();({Vector2:a1}=he),Ey=class extends lt{constructor(...e){super(...e);this._flipContainer=new $.Container}_render(e){let{position:t,rotation:i,scale:o,pivot:n,outputResolution:s}=this._options,a=this._sdk.getTextureScale(),l=s.clone().multiply(a).ceil();return this._renderTexture.resizeTo(l),this._sprite.setRotation(i),this._sprite.setPosition(t),this._sprite.setPivot(n),this._sprite.setScale(o),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){let t=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(t).ceil()}};Ey.identifier="output";Ey.prototype.availableOptions={position:{type:b.VECTOR2,default:new a1(0,0)},rotation:{type:b.NUMBER,default:0},scale:{type:b.VECTOR2,default:new a1(1,1)},pivot:{type:b.VECTOR2,default:new a1(0,0)},outputResolution:{type:b.VECTOR2,default:new a1(100,100)}};Me.Operations.OutputOperation=Ey;Kse=Ey});var l1,Yse,cWe,Hh,Jse,Zse=m(()=>{re();({OverlayFilter:l1}=$.Filters),{Vector2:Yse}=he,cWe=4,Hh=class extends lt{constructor(...e){super(...e);this._overlayTexture=$.Texture.fromImage(this._options.image),this._overlayContainer=new $.Container,this._overlaySprite=new $.Sprite,this._overlaySprite.setTexture(this._overlayTexture),this._overlaySprite.setAnchor(0,0),this._overlayContainer.addChild(this._overlaySprite),this._overlayFilter=new $.Filters.OverlayFilter({overlayImage:this._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayTexture}),this._sprite.setFilters([this._overlayFilter]),this._renderedOverlaySprite=new $.Sprite,this._renderedOverlayContainer=new $.Container,this._renderedOverlayContainer.addChild(this._renderedOverlaySprite),this._overlayRendered=!1,this._lastInputDimensions=new Yse(0,0)}setOption(e,t){if(super.setOption(e,t),e==="image"&&t&&this._sdk){let i=this._sdk.getRenderer(),o=this._overlayTexture.getBaseTexture();o.setSource(t),i.isOfType(Pe.WEBGL)&&i.updateTexture(o),this._overlayRendered=!1}}_render(e){let t=e.getDimensions(),{image:i,alpha:o,blendMode:n}=this._options;return i?((!this._overlayRendered||!this._lastInputDimensions.equals(t))&&(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:n,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:o}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),Promise.resolve())}_renderOverlayToRenderTexture(e){let t=this._sdk.getRenderer(),i=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new $.RenderTexture(t,i.x,i.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));let{width:o,height:n}=this._options.image,s=K.resizeVectorToFill(new Yse(o,n),i),{flipHorizontally:a,flipVertically:l}=this._options,c=a?-1:1,u=l?-1:1;this._overlaySprite.setWidth(s.x*c),this._overlaySprite.setHeight(s.y*u),this._overlaySprite.setPosition(i.x*(1-c)*.5,i.y*(1-u)*.5);let d=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(i),t.isOfType(Pe.WEBGL)&&(d.setGLUnit(cWe),t.updateTexture(d,!1)),this._overlayRenderTexture.render(this._overlayContainer)}dispose(){super.dispose(),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}};Hh.identifier="overlay";Hh.BLEND_MODES=l1.BLEND_MODES;Hh.prototype.availableOptions={identifier:{type:b.STRING},image:{type:b.IMAGE},blendMode:{type:b.NUMBER,default:l1.BLEND_MODES.MULTIPLY,available:Object.keys(l1.BLEND_MODES).map(r=>l1.BLEND_MODES[r])},alpha:{type:b.NUMBER,default:1},flipHorizontally:{type:b.BOOLEAN,default:!1},flipVertically:{type:b.BOOLEAN,default:!1}};Me.Operations.OverlayOperation=Hh;Jse=Hh});var eae,Qse=m(()=>{eae=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_radius;
uniform float u_blurRadius;
uniform float u_gradientRadius;
uniform vec2 u_position;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

const float blurSteps = 30.0;
const float EPSILON = 0.000000001;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    vec2 coord = v_texCoord * u_texSize;
    vec2 diff = coord - u_position;
    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);

    float blurPercentage = smoothstep( 
      0.0, 1.0,
      (abs(dist) - u_radius) / u_gradientRadius
    );

    float radius = blurPercentage * u_blurRadius;
    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    for (float t = -blurSteps; t <= blurSteps; t++) {
        float percent = (t + offset - 0.5) / blurSteps;
        float weight = 1.0 - abs(percent);
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / max(total, EPSILON);
}
`});var jh,cP,c1,tae=m(()=>{re();Bh();Qse();({Vector2:jh}=he),cP=class extends $.Filter{constructor(...e){super(...e);this._fragmentSource=eae,this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastPosition=new jh,this._blurFilter=new no,this._blurredRenderTarget=new $.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new $.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}let n=t.getDimensions(),s=!i.getDimensions().equals(n),{blurRadius:a,position:l,texSize:c,gradientRadius:u}=this._options;if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==a||s){let p=new jh(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(p);let h={blurRadius:a,texSize:n},f=(y,D,E)=>Math.min(Math.max(y,D),E),_=(y,D,E)=>{let F=f((E-y)/(D-y),0,1);return F*F*(3-2*F)},x=(y,D)=>_(0,1,(Math.abs(c.clone().multiply(y,D).subtract(l).len())-this._options.radius)/(u*2))*a;this._blurFilter.set(h),this._blurFilter._applyCanvas(e,t,i,o,x),this._lastBlurRadius=a}}_renderLQBlur(e,t,i,o=!1){let n=t.getDimensions(),s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());let a=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||s,l=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;a&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),l&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,i)}_renderMask(){let e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),i=new jh(e.width,e.height),o=this._maskRenderTarget.getPixelRatio(),n=this._options.position.clone().multiply(i),{radius:s,gradientRadius:a}=this._options;s*=e.height,a*=e.height;let l=t.createRadialGradient(n.x,n.y,0,n.x,n.y,(s+a)*o);l.addColorStop(0,"#FFFFFF"),l.addColorStop(s/(s+a),"#FFFFFF"),l.addColorStop(1,"#000000"),t.fillStyle=l,t.fillRect(0,0,i.x,i.y)}_applyMask(e,t){let i=t.getContext(),o=e.getCanvas(),n=e.getContext(),s=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),l=n.getImageData(0,0,o.width,o.height),c=l.data,u=s.getImageData(0,0,o.width,o.height).data,d=a.getImageData(0,0,o.width,o.height).data,p;for(let h=0;h<o.width*o.height*4;h+=4)p=d[h]/255,c[h]=p*c[h]+(1-p)*u[h],c[h+1]=p*c[h+1]+(1-p)*u[h+1],c[h+2]=p*c[h+2]+(1-p)*u[h+2];i.putImageData(l,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}};cP.prototype.availableOptions={blurRadius:{type:b.NUMBER,default:30,uniformType:ne.FLOAT},radius:{type:b.NUMBER,default:50,uniformType:ne.FLOAT},gradientRadius:{type:b.NUMBER,default:25,uniformType:ne.FLOAT},position:{type:b.VECTOR2,default:new jh(.5,.5),uniformType:ne.FLOAT2},delta:{type:b.VECTOR2,default:new jh(1,1),uniformType:ne.FLOAT2},texSize:{type:b.VECTOR2,default:new jh(100,100),uniformType:ne.FLOAT2}};c1=cP});var uP,Iy,rae,iae=m(()=>{re();tae();({Vector2:uP}=he),Iy=class extends lt{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius,this._lastGradientRadius=this._options.gradientRadius;let t={blurQuality:{type:b.STRING}};this._horizontalFilter=new c1({},t),this._verticalFilter=new c1({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new uP(.5,.5)),this._verticalFilter.setDelta(new uP(-.5,.5)),this._filter=new c1({},t)}rotate(e){let{position:t}=this._options;e===90?(t.flip(),t.x=1-t.x):e===-90&&(t.flip(),t.y=1-t.y),this.set({position:t})}flip(e){let{position:t}=this._options;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y;break}this.set({position:t})}transform(e){let t={},i=this.getPosition();t.position=e.applyToRelativePoint(i),["radius","blurRadius","gradientRadius"].forEach(o=>{let n=this.getOption(o);t[o]=e.applyToRelativeSize(n)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){let t=e.getDimensions(),i=t.min(),{position:o,blurRadius:n,radius:s,gradientRadius:a}=this._options,l={blurRadius:n*i,radius:s*i,gradientRadius:a*i,position:o.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){let{blurRadius:t,radius:i,gradientRadius:o,position:n}=this._options,s=e.getDimensions();return this._filter.set({blurRadius:t,radius:i,gradientRadius:o,position:n,texSize:s,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}};Iy.identifier="radial-focus";Iy.prototype.availableOptions={position:{type:b.VECTOR2,default:new uP(.5,.5)},radius:{type:b.NUMBER,default:.25},gradientRadius:{type:b.NUMBER,default:.125},blurRadius:{type:b.NUMBER,default:.025},highQualityCanvasBlur:{type:b.BOOLEAN,default:!1}};Me.Operations.RadialFocusOperation=Iy;rae=Iy});var nae,oae=m(()=>{nae=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_filterImage;
uniform sampler2D u_maskImage;

void main() {
  vec4 color0 = texture2D(u_image, v_texCoord);
  vec4 color1 = texture2D(u_filterImage, v_texCoord);
  vec4 mask = texture2D(u_maskImage, v_texCoord);
  gl_FragColor = mix(color0, color1, mask);
}
`});var dP,sae,aae=m(()=>{re();oae();dP=class extends $.Filter{constructor(){super();this._fragmentSource=nae}_applyCanvas(e,t,i,o=!1){let n=t.getCanvas(),s=t.getContext(),a=i.getContext(),{maskCanvas:l,filterCanvas:c}=this._options,u=l.getContext("2d"),d=c.getContext("2d"),p=u.getImageData(0,0,n.width,n.height).data,h=s.getImageData(0,0,n.width,n.height),f=h.data,_=d.getImageData(0,0,n.width,n.height).data,x;for(let y=0;y<n.width*n.height*4;y+=4)x=p[y]/255,f[y]=x*_[y]+(1-x)*f[y],f[y+1]=x*_[y+1]+(1-x)*f[y+1],f[y+2]=x*_[y+2]+(1-x)*f[y+2];a.putImageData(h,0,0)}};dP.prototype.availableOptions={maskImage:{type:b.NUMBER,default:1,uniformType:ne.INT},maskCanvas:{type:b.OBJECT,default:null},filterImage:{type:b.NUMBER,default:2,uniformType:ne.INT},filterCanvas:{type:b.OBJECT,default:null}};sae=dP});var u1,lae,ia,Wh=m(()=>{re();({Vector2:u1}=he),lae=class extends qe{constructor(e,t){super(t);this._isDisposed=!1,this._operation=e,this._dirtiness={},this.id=K.getUUID(),this._renderTextures={},this._identitySprite=new $.Sprite,this._sprite=new $.Sprite,this._hitTestSprite=new $.Sprite,this._renderers=[]}applyScale(e){}applyRotation(e){let t=this._operation.getInputDimensions(),i=this.getRotation()*180/Math.PI;i+=e,this.setRotation(i*Math.PI/180);let n=(e+360)%360*Math.PI/180,s=Math.cos(n),a=Math.sin(n),l=this._options.position.clone().subtract(.5).multiply(t),c=new u1(l.x*s-l.y*a,l.x*a+l.y*s).divide(t.clone().flip());this.setPosition(new u1(.5,.5).add(c))}applyFlip(e){let t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y;break}this.setPosition(t)}applyTransform(e){let t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)}getDisplayObject(){return this._sprite}getHitTestDisplayObject(){return this._sprite}_getTexture(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}_prepareRenderTexture(e){if(this._renderTexture)this._renderTexture.clear();else{let t=this._getTexture();this._renderTextureContainer=new $.Container,this._renderTextureSprite=new $.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}}_rendersToRenderTexture(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType(Pe.WEBGL)}_optionEquals(e,t){return e==="type"?!0:super._optionEquals(e,t)}update(e,t){this._isDisposed||(this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t))}_updateSprite(e){[this._sprite,this._hitTestSprite].forEach(i=>{if(!i.getTexture())return;i.setAnchor(this._options.anchor),i.setPosition(this._options.position.clone().multiply(e)),typeof this._options.alpha!="undefined"&&i.setAlpha(this._options.alpha);let{dimensions:o}=this._options;o&&(o=o.clone().multiply(this._operation.getSDK().getTextureScale()),i.setWidth(o.x),i.setHeight(o.y)),i.updateTransform();let n=i.getTexture().getFrame(),s=new u1(n.width,n.height);i.setPivot(this._options.pivot.clone().multiply(s)),i.setRotation(this._options.rotation),i.updateTransform()})}_renderToRenderTexture(e){let t=this._getTexture().getDimensions(),i=this._getRenderTexture(e.getRenderer(),t),o=t.clone();if(this._options.smoothDownscaling&&(o.x=K.nextHighestPOT(o.x),o.y=K.nextHighestPOT(o.y)),this._renderTexture.resizeTo(o),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){let n=o.clone().subtract(t.x,t.y).divide(o),s=i.getUVs().getUVs();s[0].x=s[3].x=0,s[1].x=s[2].x=1-n.x,s[0].y=s[1].y=0,s[2].y=s[3].y=1-n.y}this._sprite.setTexture(i)}isDirtyForRenderer(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e}setDirty(e){for(let t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])}_getRenderTexture(e,t=new u1(100,100)){return this._renderTextures[e.id]||(this._renderTextures[e.id]=new $.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]}dispose(){this._isDisposed=!0;for(let e in this._renderTextures)this._renderTextures[e].dispose()}canBeDuplicated(){return!0}canBeDeleted(){return!0}canMaskCanvas(){return!1}canAdjustPadding(){return!1}canBeTakenToFront(){return!0}canBeFlippedHorizontally(){return!0}},ia=lae});var pWe,nu,pP=m(()=>{re();({Vector2:pWe}=he),nu=class extends qe{constructor(...e){super(...e);this._lastOptions={},this._lastInputDimensions=new pWe(0,0),this._brush=null}getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;let{image:t,size:i}=this._options;t.width=t.height=Math.ceil(i*e.min());let o=K.createCanvas();o.width=t.width,o.height=t.height;let n=o.getContext("2d");n.drawImage(t,0,0,o.width,o.height);let s=this._tintImageData(n.getImageData(0,0,o.width,o.height),o.width,o.height);return n.putImageData(s,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=o,this._lastInputDimensions=e.clone(),o}_tintImageData(e){let{color:t}=this._options;for(let i=0;i<e.data.length;i+=4)e.data[i]+=(t.r*255-e.data[i])*t.a,e.data[i+1]+=(t.g*255-e.data[i+1])*t.a,e.data[i+2]+=(t.b*255-e.data[i+2])*t.a;return e}clone(){let e=this.constructor;return new e(this._options)}};nu.prototype.availableOptions={identifier:{type:b.STRING},image:{type:b.IMAGE},size:{type:b.NUMBER,default:.05},color:{type:b.COLOR,default:ee.RED}}});var Ad,cae=m(()=>{re();pP();Ad=class extends nu{getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;let{size:t,hardness:i,color:o}=this._options,n=K.createCanvas();n.width=n.height=Math.ceil(t*e.min());let s=n.getContext("2d");if(o=o.clone(),o.a=1,n.width===1)s.fillStyle=o.toRGBA(),s.fillRect(0,0,1,1);else{let a=s.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*i),n.width/2,n.height/2,n.width/2);a.addColorStop(0,o.toRGBA());let l=o.clone();l.a=0,a.addColorStop(1,l.toRGBA()),s.fillStyle=a,s.fillRect(0,0,n.width,n.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=n,this._lastInputDimensions=e.clone(),n}};Ad.identifier="imgly_brush_radial";Ad.prototype.availableOptions=U(T({},nu.prototype.availableOptions),{hardness:{type:b.NUMBER,default:1}})});var mWe,hWe,uae,dae,pae=m(()=>{re();({Vector2:mWe,CubicBezierCurve:hWe}=he),uae=class{constructor(e,t,i=3){this._path=e,this._drawnCanvases=[],this._position=t,this._smooth=i}getBezierCurve(e,t,i,o){if(!t)return null;let n,s;o?(n=(o.x-t.x)/this._smooth,s=(o.y-t.y)/this._smooth):(n=(i.x-t.x)/this._smooth,s=(i.y-t.y)/this._smooth);let a,l;e?(a=(i.x-e.x)/this._smooth,l=(i.y-e.y)/this._smooth):(a=(i.x-t.x)/this._smooth,l=(i.y-t.y)/this._smooth);let c=t.clone().add(a,l),u=i.clone().subtract(n,s);return new hWe(t,c,u,i)}renderToCanvas(e,t,i,o,n,s=1){if(this._drawnCanvases.indexOf(t)!==-1)return;let a=new mWe(t.width,t.height),l=t.getContext("2d"),c=this._position.clone().multiply(a),u=o?o.getPosition().clone().multiply(a):null,d=i?i.getPosition().clone().multiply(a):null,p=n?n.getPosition().clone().multiply(a):null,h=c.clone().subtract(u).len(),f=e.width/10,_=this.getBezierCurve(d,u,c,p),x;if(!_)x=[c];else{_.calculateSegments(20);let y=_.getLength();x=_.arcLengthApproxSample(Math.ceil(y/f))}for(let y=0;y<x.length;y++){let D=x[y],E=e.width*.5/(f*2);E*=1-s,E=1/(1+E),l.globalAlpha=E,l.drawImage(e,D.x-e.width/2,D.y-e.height/2,e.width,e.height)}l.globalAlpha=1,this._drawnCanvases.push(t)}setPosition(e){this._position=e}getPosition(){return this._position.clone()}setDirty(){this._drawnCanvases=[]}},dae=uae});var mP,Dy,mae=m(()=>{re();pae();mP=class extends qe{constructor(e,t,i){super(t);this._operation=e,this._canvas=i||K.createCanvas(),this._context=this._canvas.getContext("2d")}serializeOption(e,t=!1){return e==="controlPoints"?this._options.controlPoints.map(i=>{let o=i.getPosition();return t?o.toObject():o.clone()}):super.serializeOption(e,t)}_optionEquals(e,t){if(e==="controlPoints"){let{controlPoints:i}=this._options;for(let o=0,n=i.length;o<n;o++)if(!i[o].getPosition().equals(t[o]))return!1;return!0}return super._optionEquals(e,t)}render(e){let{controlPoints:t,size:i}=this._options;if(t.length<2)return;let o=this.getBrush(),n=o&&o.getHardness?o.getHardness():1;K.ensureCanvasDimensions(this._canvas,e),(!this._brush||this._lastBrushSize!==i||!e.equals(this._brushInputDimensions))&&(this._brushInputDimensions=e.clone(),this._lastBrushSize=i);let s,a,l,c;for(let u=0;u<t.length;u++)s=t[u-2],a=t[u-1],l=t[u],c=t[u+1],l.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,s,a,c,n)}_createBrush(e){let{size:t,hardness:i,color:o}=this._options,n=K.createCanvas();n.width=n.height=Math.ceil(t*e.min());let s=n.getContext("2d");if(o=o.clone(),o.a=1,n.width===1)s.fillStyle=o.toRGBA(),s.fillRect(0,0,1,1);else{let a=s.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*i),n.width/2,n.height/2,n.width/2);a.addColorStop(0,o.toRGBA());let l=o.clone();l.a=0,a.addColorStop(1,l.toRGBA()),s.fillStyle=a,s.fillRect(0,0,n.width,n.height)}return n}addControlPoint(e){let t=new dae(this,e);this._options.controlPoints.push(t),this.emit("update",this)}getCanvas(){return this._canvas}setCanvas(e){this._canvas=e,this._context=e.getContext("2d")}setDirty(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(e=>{e.setDirty()})}forEachControlPoint(e){this._options.controlPoints.forEach(e)}renderToCanvas(e){let t=e.getContext("2d");t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()}getCanvasDimensions(){return this._canvasDimensions}};mP.prototype.availableOptions={id:{type:b.STRING,default:()=>K.getUUID()},brush:{type:b.OBJECT,required:!0},controlPoints:{type:b.ARRAY,default:[]},closed:{type:b.BOOLEAN,default:!1}};Dy=mP});var d1,Pd,Md,hP=m(()=>{re();Wh();pP();cae();mae();({Vector2:d1}=he),Pd=class extends ia{constructor(...e){super(...e);this._persistedPaths=[],this._outputCanvasDirty=!0,this._outputCanvas=K.createCanvas(),this._outputContext=this._outputCanvas.getContext("2d"),this._persistCanvas=K.createCanvas(),this._persistContext=this._persistCanvas.getContext("2d"),this._nextCanvas=K.createCanvas(),this._texture=$.Texture.fromCanvas(this._outputCanvas),this._sprite.setTexture(this._texture),this._onPathUpdate=this._onPathUpdate.bind(this)}applyFlip(e){this._options.paths.forEach(t=>{t.forEachControlPoint(i=>{let o=i.getPosition().clone();switch(e){case"horizontal":o.x=1-o.x;break;case"vertical":o.y=1-o.y;break}i.setPosition(o)}),t.setDirty(!0)}),this._reset()}applyRotation(e){this._options.paths.forEach(t=>{t.forEachControlPoint(i=>{let o=i.getPosition().clone();e===90?(o.flip(),o.x=1-o.x):e===-90&&(o.flip(),o.y=1-o.y),i.setPosition(o)}),t.setDirty(!0)}),this._reset()}applyTransform(e){let t=null;this._options.paths.forEach(i=>{i.forEachControlPoint(n=>{n.setPosition(e.applyToRelativePoint(n.getPosition()))});let o=i.getBrush();o!==t&&(o.setSize(e.applyToRelativeSize(o.getSize())),t=o),i.setDirty(!0)}),this._reset()}clearCanvas(){if(!this._outputCanvas)return;this._outputCanvasDirty=!0;let{width:e,height:t}=this._outputCanvas;this._outputContext.clearRect(0,0,e,t)}clearPersistCanvas(){if(!this._persistCanvas)return;let{width:e,height:t}=this._persistCanvas;this._persistContext.clearRect(0,0,e,t)}serializeOptions(e,t=!1){let i=super.serializeOptions(e,t);return e||(i.type="brush"),i}serializeOption(e,t=!1){return e==="paths"?this._options.paths.map(i=>i.serializeOptions(void 0,t)):super.serializeOption(e,t)}createPath(e){let t=new Dy(this._operation,{brush:e},this._nextCanvas);return t.on("update",this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t}_onPathUpdate(){this._operation.setDirty(!0),this.setDirty(!0)}_onPathPersist(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)}_getTexture(){return this._texture}setDirtyForRenderer(e,t,i=!1){super.setDirtyForRenderer(e,t,i),e&&i&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach(o=>{o.setDirty(!0)}))}setDirty(e,t=!1){for(let i in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[i],t)}render(e){let t=this._operation.getSDK().getRenderer();!this.isDirtyForRenderer(t)||(K.ensureCanvasDimensions(this._outputCanvas,e),K.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach(i=>{i.render(e),i.getClosed()&&this._persistedPaths.indexOf(i)===-1&&this._onPathPersist(i)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(i=>{i.getClosed()||i.renderToCanvas(this._outputCanvas)}),this.setDirtyForRenderer(!1,t))}update(e,t){t&&(K.ensureCanvasDimensions(this._outputCanvas,t),K.ensureCanvasDimensions(this._persistCanvas,t),this._texture.getBaseTexture().update()),this.render(t);let i=e.getRenderer();i.isOfType(Pe.WEBGL)&&i.updateTexture(this._texture.getBaseTexture()),super.update(e,t)}_reset(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}getCanvas(){return this._outputCanvas}_createRadialBrush(){return new Ad}_getTempCanvas(){return this._nextCanvas}dispose(){super.dispose(),this._texture&&this._texture.getBaseTexture().dispose()}};Pd.prototype.availableOptions={id:{type:b.STRING,default:()=>K.getUUID()},position:{type:b.VECTOR2,default:new d1(0,0)},scale:{type:b.VECTOR2,default:new d1(1,1)},anchor:{type:b.VECTOR2,default:new d1(0,0)},pivot:{type:b.VECTOR2,default:new d1(0,0)},rotation:{type:b.NUMBER,default:0},paths:{type:b.ARRAY,default:[],setter(r){return r=r.map(e=>{if(e instanceof Dy)return e;let{brush:t,closed:i}=e,o=new Dy(this._operation,{brush:t,closed:i},this._nextCanvas);return e.controlPoints.forEach(n=>{o.addControlPoint(n)}),o}),this._reset(),r}}};Pd.type="brush";Pd.Brush=nu;Pd.Path=Dy;Pd.Brushes={RadialBrush:Ad};Md=Pd});var hae,Oy,fae,gae=m(()=>{re();Bh();aae();hP();({Vector2:hae}=he),Oy=class extends lt{constructor(...e){super(...e);let t=this._sdk.getRenderer();this._lastBlurRadius=null,this._blurredRenderTexture=new $.RenderTexture(t,100,100,1),this._maskRenderTexture=new $.RenderTexture(t,100,100,1),this._brushSprite=new Md(this),this._brushSpriteContainer=new $.Container;let i=this._brushSprite.getDisplayObject();if(this._brushSpriteContainer.addChild(i),this._outputSprite=new $.Sprite,this._outputContainer=new $.Container,this._outputContainer.addChild(this._outputSprite),this._maskFilter=new sae,t.isOfType(Pe.WEBGL)){this._horizontalFilter=new no,this._verticalFilter=new no,this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new hae(1,1)),this._verticalFilter.setDelta(new hae(-1,1));let o=this._maskRenderTexture.getBaseTexture();o.setGLUnit(this._maskFilter.getMaskImage()),t.updateTexture(o,!1),o=this._blurredRenderTexture.getBaseTexture(),o.setGLUnit(this._maskFilter.getFilterImage()),t.updateTexture(o,!1)}else t.isOfType(Pe.CANVAS)&&(this._blurFilter=new no,this._sprite.setFilters([this._blurFilter]),this._maskFilter.setMaskCanvas(this._maskRenderTexture.getRenderTarget().getCanvas()),this._maskFilter.setFilterCanvas(this._blurredRenderTexture.getRenderTarget().getCanvas()));this._outputSprite.setFilters([this._maskFilter])}flip(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null}rotate(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null}transform(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null}_render(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),Promise.resolve()}_renderMask(e){let t=e.getDimensions();this._maskRenderTexture.getDimensions().equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(ee.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);let o=this._sdk.getRenderer();o.isOfType(Pe.WEBGL)&&o.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}_renderBlur(e){let t=e.getDimensions(),i=this._blurredRenderTexture.getDimensions();i.equals(t)||this._blurredRenderTexture.resizeTo(t);let{blurRadius:o}=this._options;if(this._lastBlurRadius!==o||!i.equals(t)){let s=this._sdk.getRenderer(),a;if(s.isOfType(Pe.WEBGL)){let l=t.min();a={blurRadius:o*l,texSize:t},this._horizontalFilter.set(a),this._verticalFilter.set(a)}else s.isOfType(Pe.CANVAS)&&(a={blurRadius:o},this._blurFilter.set(a));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=o}let n=this._sdk.getRenderer();n.isOfType(Pe.WEBGL)&&n.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}getBrush(){return this._brushSprite}createPath(e,t=1){let i=new Md.Brushes.RadialBrush({size:e,hardness:t,color:ee.WHITE}),o=this._brushSprite.createPath(i);return this._options.paths.push(o),this.setDirty(!0),o}setDirtyForRenderer(e,t,i){super.setDirtyForRenderer(e,t,i),this._brushSprite.setDirtyForRenderer(e,t,i)}dispose(){super.dispose(),this._sdk.getRenderer().isOfType(Pe.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}hasChanges(){return!0}};Oy.identifier="selective-blur";Oy.prototype.availableOptions={blurRadius:{type:b.NUMBER,default:.05},paths:{type:b.ARRAY,default:[],setter(r){return this._brushSprite&&this._brushSprite.setPaths(r),r}}};Me.Operations.SelectiveBlurOperation=Oy;fae=Oy});var Bd,p1,m1,h1,bae=m(()=>{re();sA();Wh();({Vector2:Bd,ColorMatrix:p1}=he),m1=class extends ia{constructor(...e){super(...e);let{image:t}=this._options,i=t.src||t.filePath||t.toDataUrl&&t.toDataURL();this._isSVG=i&&(!!i.match(/\w+\.svg(?=\?|$)/i)||i.match(/data:image\/svg/i)),this._isSVG&&(this._canvas=K.createCanvas(),this._context=this._canvas.getContext("2d"),this._options.smoothDownscaling=!1),t&&this._onImageUpdate(),this._tintFilter=new $.Filters.TintFilter,this._adjustmentsFilter=new OS,this._lastRenderedDimensions=Bd.NULL,this._lastRenderedInputDimensions=Bd.NULL,this._onOptionsChange=this._onOptionsChange.bind(this),this._options.adjustments.on("update",this._onOptionsChange)}applyScale(e){this.setDimensions(this.getDimensions().multiply(e))}serializeOptions(e,t=!1){let i=super.serializeOptions(e,t);return e||(i.type="sticker"),i}_rendersToRenderTexture(e){return this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType(Pe.WEBGL)||this._hasAdjustments()||this._options.tintMode!=="none"}_getTexture(){return this._inputTexture}update(e,t){let{dimensions:i,image:o}=this._options;if(i.equals(Bd.NULL)&&i.set(o.width,o.height),this._sprite.setSmoothDownscaling(this._isSVG?!1:this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(i)||this._lastRenderedImage!==o)&&this._isSVG&&e.getRenderer().isOfType(Pe.WEBGL)){o.width=Math.round(i.x),o.height=Math.round(i.y);let a=4096,l=o.width/o.height;o.width>a&&(o.width=a,o.height=Math.round(o.width/l)),o.height>a&&(o.height=a,o.width=Math.round(o.height*l)),this._canvas.width=o.width,this._canvas.height=o.height,this._context.clearRect(0,0,o.width,o.height),this._context.drawImage(o,0,0,o.width,o.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);let s=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){s.push(this._adjustmentsFilter);let{adjustments:a}=this._options,l=new p1;l.multiply(p1.createBrightnessMatrix(a.getBrightness())),l.multiply(p1.createSaturationMatrix(a.getSaturation())),l.multiply(p1.createContrastMatrix(a.getContrast())),this._adjustmentsFilter.set({colorMatrix:l})}this._options.tintMode&&this._options.tintMode!=="none"&&(s.push(this._tintFilter),this._tintFilter.set({mode:$.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor}),this._sprite.getTexture()&&this._sprite.getTexture()._baseTexture&&this._sprite.getTexture()._baseTexture.setDirty(!0)),this._renderTextureSprite.setFilters(s)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(i),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=o}_applyFlip(){let e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:i}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}applyFlip(e){super.applyFlip(e);let t={rotation:this._options.rotation},o=t.rotation/Math.PI*180*-1;switch(t.rotation=o*Math.PI/180,e){case"horizontal":t.flipHorizontally=!this._options.flipHorizontally,this.set(t);break;case"vertical":t.flipVertically=!this._options.flipVertically,this.set(t);break}}_hasAdjustments(){let{adjustments:e}=this._options;return e.getBrightness()!==0||e.getSaturation()!==1||e.getContrast()!==1}_onImageUpdate(){let e=this._options.image,t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType(Pe.WEBGL)&&(e=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=$.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}scalesUniformly(){return this._options.resizeMode==="keepAspect"}setOption(e,t,i=!0){super.setOption(e,t,i),e==="image"&&this._identitySprite&&this._onImageUpdate()}_onOptionsChange(){let e=this._dirtiness;for(let t in e)e[t]=!0}dispose(){super.dispose(),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}};m1.prototype.availableOptions={id:{type:b.STRING,default:()=>K.getUUID()},identifier:{type:b.STRING,default:""},image:{type:b.IMAGE,required:!0},position:{type:b.VECTOR2,default:Bd.NULL},dimensions:{type:b.VECTOR2,default:Bd.NULL},anchor:{type:b.VECTOR2,default:new Bd(0,0)},pivot:{type:b.VECTOR2,default:new Bd(.5,.5)},rotation:{type:b.NUMBER,default:0},flipHorizontally:{type:b.BOOLEAN,default:!1},flipVertically:{type:b.BOOLEAN,default:!1},smoothDownscaling:{type:b.BOOLEAN,default:!1},tintColor:{type:b.COLOR,default:ee.WHITE},tintMode:{type:b.STRING,default:"none",available:["none","solid","colorized"]},resizeMode:{type:b.STRING,default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:b.NUMBER,default:1},adjustments:{type:b.CONFIGURABLE,structure:{brightness:{type:b.NUMBER,default:0},saturation:{type:b.NUMBER,default:1},contrast:{type:b.NUMBER,default:1}}}};m1.type="sticker";h1=m1});var oa,et,Bo=m(()=>{oa=class{constructor(e){this._seed=e===void 0?oa.TimeSeed():e}seed(e){this._seed=e===void 0?oa.TimeSeed():e}next(){let e=this._seed|0,t=e/oa.SEED_DIVIDER|0,i=e%oa.SEED_DIVIDER|0;return e=oa.SEED_LOW_MULTIPLY*i-oa.SEED_HIGH_MULTIPLY*t,e<=0&&(e+=oa.MAX),e===-1&&(e=oa.MAX-1),this._seed=e,e}nextInRange(e,t){return t===void 0&&(t=e,e=0),e+this.next()%(t-e+1)}nextBool(e=1,t=1){return this.nextInRange(e+t-1)>=e}static TimeSeed(){return Date.now()}pickNext(e){return Array.isArray(e)?e[this.next()%e.length]:null}},et=oa;ce(et,"MAX",2147483647),ce(et,"SEED_DIVIDER",127773),ce(et,"SEED_LOW_MULTIPLY",16807),ce(et,"SEED_HIGH_MULTIPLY",2836)});var fWe,Vt,na=m(()=>{re();({Rectangle:fWe}=he),Vt=class{constructor(e=0,t=0){this.width=e,this.height=t}set(e,t){this.width=e,this.height=t}aspect(){return this.width/this.height}rectangle(e,t){return new fWe(e,t,this.width,this.height)}clone(){return new Vt(this.width,this.height)}scale(e,t){return t===void 0&&(t=e),this.width*=e,this.height*=t,this}copy(e){return this.width=e.width,this.height=e.height,this}fitInWidthWithOther(e,t=new Vt){return this.copy(Vt.fitTwoInWidth(e,this,t)[0]),this}static fitTwoInWidth(e,t,i){let o=t.width*i.height+t.height*i.width,n=i.height*e/o,s=t.width*n,a=t.height*n;return[new Vt(s,a),new Vt(e-s,a)]}}});var yae,fP,_t,Cn=m(()=>{re();yae=v(Ym()),fP=class extends qe{loadImages(e){return de(this,null,function*(){return(0,yae.default)(e,t=>de(this,null,function*(){return this.addImage(t.path,t.fullPath,t.image)}))})}addImage(e,t,i,o="anonymous"){let n=this.getImages();return i?(n[e]={fullPath:t,image:i},Promise.resolve({fullPath:t,image:i})):new Promise((s,a)=>{i=new oo,i.onload=()=>{n[e]={fullPath:t,image:i},s({fullPath:t,image:i})},i.crossOrigin=K.getCrossOriginValue(o),i.onerror=a,i.src=t})}getImage(e){let i=this.getImages()[e];return i?i.image:null}getVariation(e){return this.getFonts()[e]}addFont(e,t){let i=this.getFonts();return i[e]=t,t}};fP.prototype.availableOptions={images:{type:b.OBJECT,default:{}},fonts:{type:b.OBJECT,default:{}}};_t=new fP});var gWe,bWe,_ae,yWe,_We,vWe,xWe,CWe,Ai,Gh=m(()=>{re();na();Cn();gWe=(r,e,t,i)=>{let o=t*(i*4)+e*4;return{r:r[o],g:r[o+1],b:r[o+2],a:r[o+3]}},bWe=r=>r.a<=254,_ae=(r,e,t)=>{let i=!0;for(let o=0;o<t;o++){let n=gWe(r,o,e,t);if(!bWe(n)){i=!1;break}}return i},yWe=(r,e,t,i,o=!1)=>{let n=0;for(let s=i+1;s<t;s++)if(!_ae(r,s,e))n=s-i+1;else if(o)break;return n},_We=(r,e,t,i,o=!1)=>{let n=0;for(let s=i-1;s>=0;s--)if(!_ae(r,s,e))n=i-s;else if(o)break;return n},vWe=(r,e,t,i,o)=>{r.beginPath(),r.moveTo(e,t),r.lineTo(i,o),r.stroke()},xWe=(r,e,t,i,o="red")=>{r.save(),r.strokeStyle=o,vWe(r,t,e,i,e),r.restore()},CWe=(r,e,t,i,o,n="blue")=>{r.save(),r.strokeStyle=n,r.strokeRect(e,t,i,o),r.restore()},Ai=class extends qe{constructor(e){super(e);let t=_t.getVariation(this.getFontIdentifier());t||me.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.set({fontVariation:t}),this._metrics=null,this._canvas=K.createCanvas(),this._context=this._canvas.getContext("2d"),this._isDirty=!0}_onOptionsChange(){this._isDirty=!0}setOption(e,t,i=!0,o=!1){super.setOption(e,t,i,o),e==="fontIdentifier"&&!o&&this.updateFontVariation()}updateFontVariation(){let e=_t.getVariation(this.getFontIdentifier());return e||me.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(e),e}setOptions(e={}){this._options=T(T({},this._options),e),this._isDirty=!0}_applyTextOptions(e=this._context,t={}){let{fontSize:i,fontVariation:o,lineHeight:n,textColor:s,alignment:a}=T(T({},this._options),t),{fontStyle:l,fontWeight:c,fontFamily:u}=o.serializeOptions();e.font=`${l} ${c} ${i}px / ${n} ${u}`,e.fillStyle=s,e.textBaseline="alphabetic",e.textAlign=a||"left"}getTextMetrics(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),T({},this._metrics)}getSizeValue(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),new Vt(this._metrics.width,this._metrics.height)}fitWidth(e){if(!this.getFontVariation()){me.warn("TextDesignFont#fitText: missing font variation");return}this._applyTextOptions(this._context,{fontSize:50});let i=this._context.measureText(this.getText()).width,o=e/i,n=Math.floor(o*50);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}fitHeight(e){if(!this.getFontVariation()){me.warn("TextDesignFont#fitText: missing font variation");return}let i=this._calculateTextMetrics({fontSize:50}).height,o=e/i,n=Math.floor(o*50);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}_calculateTextMetrics(e={}){let t=this._canvas,i=this._context,o=T(T({},this._options),e),n=this.getText();this._applyTextOptions(i,o);let s=Math.ceil(i.measureText(n).width),a=Math.floor(s+o.fontSize*2),l=Math.floor(o.fontSize*3);t.width=a,t.height=l;let c=Math.floor(o.fontSize),u=Math.floor(l*(3/5));this._applyTextOptions(i,o),i.fillText(n,c,u);let d=i.getImageData(0,0,t.width,t.height).data,p=_We(d,a,l,u,this._options.excludeAccents),h=yWe(d,a,l,u,this._options.excludeAccents),f=s,_=p+h;return this._metrics={width:f,height:_,ascender:p,descender:h},this._isDirty=!1,T({},this._metrics)}draw(e=this._context,t=0,i=0,o,n=!1){e.save(),(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),this._applyTextOptions(e,o),e.fillText(this.getText(),t,i+this._metrics.ascender),n&&(CWe(e,t,i,this._metrics.width,this._metrics.height),xWe(e,i+this._metrics.ascender,t,t+this._metrics.width)),e.restore()}};Ai.prototype.availableOptions={text:{type:b.STRING,default:""},fontIdentifier:{type:b.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:b.OBJECT,default:null},lineHeight:{type:b.NUMBER,default:1},fontSize:{type:b.NUMBER,default:22},textColor:{type:b.STRING,default:"black"},strokeStyle:{type:b.STRING,default:"black"},outlineWidth:{type:b.NUMBER,default:0},textBaseline:{type:b.STRING,default:"alphabetic"},excludeAccents:{type:b.BOOLEAN,default:!1}}});var Pi,Ld=m(()=>{re();Pi=class extends qe{};Pi.prototype.availableOptions={text:{type:b.STRING,default:""},frame:{type:b.OBJECT,default:null},font:{type:b.OBJECT,default:null}}});var Sn,Vh=m(()=>{re();Sn=class extends qe{};Sn.prototype.availableOptions={tintColor:{type:b.COLOR,default:ee.BLACK},textColor:{type:b.COLOR,default:ee.BLACK},alignment:{type:b.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:b.NUMBER,default:1},fontIdentifier:{type:b.STRING,default:"imgly_font_open_sans_bold"}}});var SWe,lo,Ry=m(()=>{re();na();Vh();({Rectangle:SWe}=he),lo=class extends qe{constructor(e){super(e);this.setSize(new Vt(this.getWidth(),0)),this.serverImageSmoothingFix=!1}_getFrame(){let e=this.getSize();return new SWe(0,0,e.width,e.height)}_getTextFrame(){return this._getFrame()}_getTextFrameForElement(e){return e.getFrame().clone()}_calculateLayoutElements(){me.warn("TextDesignRow is an abstract class.")}_getLayoutElements(){return this._options.elements.length<=0&&this.layout(),this.getElements()}_fontSize(e){return me.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}layout(){return this.setElements(this._calculateLayoutElements()),this}textFrame(e,t){return e.getFrame().clone()}willRender(e){}didRender(e){}render(e){e.save(),this._getLayoutElements().forEach(t=>{let{text:i,frame:o,font:n}=t.serializeOptions(),s=this.getAttributes();n.draw(e,o.x,o.y,{textColor:s.getTextColor().toRGBA(),alignment:s.getAlignment()})}),e.restore()}};lo.prototype.availableOptions={words:{type:b.OBJECT,default:null},width:{type:b.NUMBER,default:100},attributes:{type:b.CONFIGURABLE,default:new Sn},shearingAngle:{type:b.NUMBER,default:0},elements:{type:b.ARRAY,default:[]},size:{type:b.OBJECT,default:null}}});var wWe,Fy,is,vae=m(()=>{re();Gh();Ld();Ry();({Rectangle:wWe}=he),Fy=class extends lo{_calculateLayoutElements(){if(this.getWords().size()<=0)return[];let{orientation:e,width:t,size:i,relativeRowOffset:o,attributes:n}=this.serializeOptions(),{fontIdentifier:s}=n,a=this.getWords().joined(3),l=e===Fy.Orientations.Left?[a[0],a[1],a[2]]:[a[1],a[2],a[0]],c=K.Array.range(0,2).map(_e=>new Ai({text:l[_e],fontIdentifier:s,fontSize:60})),u=c.map(_e=>_e.getSizeValue()),d=u[0].width>u[1].width?0:1,p=(d+1)%2;c[p].fitWidth(u[d].width),u[p]=c[p].getSizeValue();let h=(u[p].height+u[d].height)/(1-o),f=new Ai({text:l[2],fontIdentifier:s});f.fitHeight(h);let _=f.getSizeValue().width,x=u[d].width,y=t/(_+x),D=y*_,E=y*x,F=y*h,N=o*F;i.set(t,F);let R=K.Array.range(0,3).map(_e=>new Ai({text:l[_e],fontIdentifier:s}));R[0].fitWidth(E),R[1].fitWidth(E),R[2].fitWidth(D);let B=e===Fy.Orientations.Left?0:D,se=e===Fy.Orientations.Left?E:0,A=[B,B,se],q=[0,R[0].getSizeValue().height+N,0],ue=R.map((_e,ye)=>new wWe(A[ye],q[ye],_e.getSizeValue().width,_e.getSizeValue().height));return R.map((_e,ye)=>new Pi({text:l[ye],font:R[ye],frame:ue[ye]}))}},is=Fy;ce(is,"Orientations",{Right:"RIGHT",Left:"LEFT"});is.prototype.availableOptions=U(T({},lo.prototype.availableOptions),{orientation:{type:b.STRING,default:is.Orientations.Left,available:[is.Orientations.Right,is.Orientations.Left]},relativeRowOffset:{type:b.NUMBER,default:.05}})});var TWe,je,Lo=m(()=>{re();({Rectangle:TWe}=he),je=class{constructor(e=0,t=0,i=0,o=0){this.top=e,this.left=t,this.bottom=i,this.right=o}multiply(e){this.top*=e,this.left*=e,this.bottom*=e,this.right*=e}toObject(){return T({},this)}equals(e,t=0){return Math.abs(e.top-this.top)<=t&&Math.abs(e.left-this.left)<=t&&Math.abs(e.bottom-this.bottom)<=t&&Math.abs(e.right-this.right)<=t}scale(e=1,t){return t===void 0&&(t=e),this.top*=t,this.bottom*=t,this.left*=e,this.right*=e,this}clone(){return new je(this.top,this.left,this.bottom,this.right)}applyToRectangle(e){return new TWe(e.x+this.left,e.y+this.top,e.width-this.left-this.right,e.height-this.top-this.bottom)}static get ZERO(){return new je(0,0,0,0)}}});var er,wn=m(()=>{re();Gh();Lo();Ld();Ry();er=class extends lo{_calculateLayoutElements(){let{attributes:e,imageInsets:t,size:i,width:o}=this.serializeOptions(),n=this.getWords().joined(1)[0]||"",{fontIdentifier:s}=e,a=new Ai({text:n,fontIdentifier:s});a.fitWidth(this._getTextFrame().width);let l=a.getTextMetrics().height+t.top+t.bottom;i.height=l;let c=this._getTextFrame();return[new Pi({text:n,frame:c,font:a})]}};er.prototype.availableOptions=U(T({},lo.prototype.availableOptions),{imageInsets:{type:b.OBJECT,default:new je}})});var Dl,hi,gP,Tn,f1,$h,bP,xae,Cae,Ol,su=m(()=>{re();({Rectangle:Dl,Vector2:hi}=he),gP=(r,e,t,i)=>{r.drawImage(e,t.x,t.y,t.width,t.height,i.x,i.y,i.width,i.height)},Tn=(r,e,t,i="source-over",o=!1)=>{r.save(),r.fillStyle=t.toRGBA(),r.globalCompositeOperation=i,r.fillRect(e.x,e.y,e.width,e.height),o&&(r.strokeStyle=t.toRGBA(),r.strokeWith=1,r.strokeRect(e.x,e.y,e.width,e.height)),r.restore()},f1=(r,e,t,i,o="source-over",n=!1)=>{r.save(),r.fillStyle=i.toRGBA(),r.globalCompositeOperation=o,t=Math.min(Math.max(t,0),Math.min(e.height,e.width)*.5);let s=e.x,a=e.x+e.width,l=e.y,c=e.y+e.height;r.beginPath(),r.moveTo(s+t,l),r.arcTo(a,l,a,c,t),r.arcTo(a,c,s,c,t),r.arcTo(s,c,s,l,t),r.arcTo(s,l,a,l,t),r.closePath(),r.fill(),n&&r.stroke(),r.restore()},$h=(r,e,t,i=4)=>{r.save(),r.strokeStyle=t.toRGBA(),r.lineWidth=i,r.strokeRect(e.x,e.y,e.width,e.height),r.restore()},bP=(r,e,t,i="source-over")=>{r.save();let o=e.height/2,n=e.y+o,s=e.x+o,a=e.x+e.width;for(r.fillStyle=t.toRGBA(),r.globalCompositeOperation=i;s<a;)r.beginPath(),r.arc(s,n,o,0,2*Math.PI),r.fill(),s+=o*4;r.restore()},xae=(r,e)=>{let t=e.applyToRectangle(r),{x:i,y:o,width:n,height:s}=r,a=[Dl.FromDiagonalPoints(new hi(0,0),new hi(t.x,t.y)),Dl.FromDiagonalPoints(new hi(0,t.y+t.height),new hi(t.x,s)),Dl.FromDiagonalPoints(new hi(t.x+t.width,t.y+t.height),new hi(n,s)),Dl.FromDiagonalPoints(new hi(t.x+t.width,0),new hi(n,t.y))].map(c=>c.translate(i,o)),l=[Dl.FromDiagonalPoints(new hi(t.x,0),new hi(t.x+t.width,t.y)),Dl.FromDiagonalPoints(new hi(0,t.y),new hi(t.x,t.y+t.height)),Dl.FromDiagonalPoints(new hi(t.x,t.y+t.height),new hi(t.x+t.width,s)),Dl.FromDiagonalPoints(new hi(t.x+t.width,t.y),new hi(n,t.y+t.height))].map(c=>c.translate(i,o));return{corners:a,bars:l,center:t}},Cae=(r,e,t,i)=>{let o=e.naturalWidth||e.width,n=e.naturalHeight||e.height,s=xae(new Dl(0,0,o,n),i),a=xae(t,i);gP(r,e,s.center,a.center),K.Array.zip(s.corners,a.corners).forEach(([l,c])=>gP(r,e,l,c)),K.Array.zip(s.bars,a.bars).forEach(([l,c])=>gP(r,e,l,c))},Ol=(r,e,t,i,o="source-atop")=>{if(r.save(),i&&(r.globalAlpha=i.a),r.drawImage(e,t.x,t.y,t.width,t.height),i&&(r.globalAlpha=1),i){let n=i.clone();n.a=1,Tn(r,t,n,o)}r.restore()}});var Rl,g1=m(()=>{re();su();Lo();wn();Rl=class extends er{_getTextColor(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(ee.WHITE)?ee.BLACK:ee.WHITE:this.getAttributes().getTextColor().clone()}_getTextFrame(){return this.getImageInsets().applyToRectangle(this._getFrame())}_getTextFrameForElement(e){let t=super._getTextFrameForElement(e),i=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(t.y-=i.top),t}willRender(e){this.getAttributes().setTextColor(this._getTextColor());let i=this.getImage();if(i){let o=this.getCapInsets(),n=this._getFrame();o&&!o.equals(je.ZERO)?Cae(e,i,n,o):e.drawImage(i,n.x,n.y,n.width,n.height),Tn(e,n,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&i&&(e.save(),e.globalCompositeOperation="destination-out")}didRender(e){super.didRender(e),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e.restore()}};Rl.prototype.availableOptions=U(T({},er.prototype.availableOptions),{image:{type:b.IMAGE,default:null},capInsets:{type:b.OBJECT,default:new je},backgroundColor:{type:b.COLOR,default:ee.WHITE},autoAdjustTextColor:{type:b.BOOLEAN,default:!0},isMasked:{type:b.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:b.BOOLEAN,default:!1}})});var zo,b1=m(()=>{re();Lo();zo=class extends qe{insetsForWidth(e){return this.getRelativeInsets().clone().scale(e)}static get Small(){return new zo({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new je(.05,.2,.05,.2)})}static get Rectangle(){return new zo({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new je(.05,.05,.05,.05),needsImageSmoothingFix:!0})}static get Celebrate1(){return new zo({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new je(.05,.2,.05,.2)})}static get Celebrate2(){return new zo({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new je(.05,.2,.05,.2)})}};zo.prototype.availableOptions={image:{type:b.IMAGE,default:null},imagePath:{type:b.STRING,default:null},relativeInsets:{type:b.OBJECT,default:new je},fontIdentifier:{type:b.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:b.BOOLEAN,default:!1}}});var y1,Sae=m(()=>{re();Lo();na();y1=class extends qe{getSize(){let e=this.getRows(),t=this.getWidth(),i=e.length-1,o=e.reduce((s,a)=>s+a.getSize().height,0);o+=(i+1)*this.getRelativeLineSpacing()*t;let n=this.getRelativeInsets().clone().scale(t);return o+=n.top+n.bottom,new Vt(t,o)}};y1.prototype.availableOptions={text:{type:b.STRING,default:""},lines:{type:b.ARRAY,default:[]},relativeInsets:{type:b.OBJECT,default:new je},relativeLineSpacing:{type:b.NUMBER,default:0},rows:{type:b.OBJECT,default:[]},background:{type:b.OBJECT,default:null},width:{type:b.NUMBER,default:0}}});var ni,au=m(()=>{re();ni=class{constructor(e){this.words=[],e&&this.splitIntoWords(e)}splitIntoWords(e){return this.words=e.match(/\S+/g)||[],[...this.words]}get(){return[...this.words]}getWord(e){return this.words[e]}set(e){return this.words=[...e],this}slice(e,t){return ni.fromWords(this.words.slice(e,t))}getLowerCase(){return this.words.map(e=>e.toLowerCase())}getUpperCase(){return this.words.map(e=>e.toUpperCase())}size(){return this.words.length}countNumberOfCharacters(){return this.words.reduce((e,t)=>e+t.length,0)}joined(e){let t=this.size(),i=Math.floor(t/e),o=t%e,n=0,s=0;return K.Array.range(0,e).map(a=>{n=s;let l=i+(a<o?1:0);return s=Math.min(n+l,t),K.Array.range(n,s).reduce((c,u)=>c+(u===n?"":" ")+this.words[u],"")})}static fromWords(e){let t=new ni;return t.words=[...e],t}}});var kWe,EWe,IWe,Mr,Kh=m(()=>{re();Bo();Lo();wn();Vh();Sae();au();kWe=10,EWe=4,IWe=.4,Mr=class extends qe{constructor(e){super(e);this._relativeInsets=new je,this._background=null,this._fontRandomizer=new et(0),this._lineNumberRandomizer=new et(0),this._wordsPerLineRandomizer=new et(0),this._seedPool=[this._fontRandomizer,this._lineNumberRandomizer,this._wordsPerLineRandomizer]}seed(e){this._seedPool.forEach(t=>t.seed(e))}getImagePaths(){return[]}onImagesLoaded(){}getMaximumNumberOfTries(){return kWe}getMinLineCountOfRandom(){return EWe}getRandomAdditionalLinePercentage(){return IWe}_fontForRow(e,t){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}_modifiedText(e){return e.replace(`
`," ").replace("	"," ")}_minimumNumberOfLines(e){return Math.ceil(Math.sqrt(e.size()))}_maximumNumberOfLines(e){return e.size()}_calculatedNumberOfLines(e){let t=this._minimumNumberOfLines(e);if(e.size()>=this.getMinLineCountOfRandom()){let i=Math.floor(Math.max(1,t*this.getRandomAdditionalLinePercentage()));t+=this._lineNumberRandomizer.nextInRange(0,i)}return Math.min(t,this._maximumNumberOfLines(e))}_randomizedNumberOfWordsPerLine(e,t){if(e>t)return me.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),t;let i=K.Array.repeat(1,e);return K.Array.range(e,t).forEach(o=>{let n=this._wordsPerLineRandomizer.nextInRange(0,e-1);i[n]+=1}),i}_textLines(e){let t=new ni(e),i=this._calculatedNumberOfLines(t);return this._randomizedNumberOfWordsPerLine(i,t.size()).reduce((n,s)=>({index:n.index+s,lines:[...n.lines,t.slice(n.index,Math.min(n.index+s,t.size()))]}),{index:0,lines:[]}).lines}_validTextLines(e){let t=this._textLines(e),i=0;do if(i=K.Array.findIndex(t,o=>o.countNumberOfCharacters()<3),i>=0){let o=t[i-1],n=t[i+1],s=o?o.countNumberOfCharacters():Number.MAX_SAFE_INTEGER,a=n?n.countNumberOfCharacters():Number.MAX_SAFE_INTEGER;s<a&&o?(o.words=[...o.words,...t[i].words],t=[...t.slice(0,i),...t.slice(i+1)]):n&&(n.words=[...t[i].words,...n.words],t=[...t.slice(0,i),...t.slice(i+1)])}while(i>-1&&t.length>1);return t}_modifiedLines(e){return e}_getBackground(){return this._background}generateLayoutData(e,t){let i=this._modifiedText(e),o=this._modifiedLines(this._validTextLines(i)),n=t*(1-this._relativeInsets.left-this._relativeInsets.right),s=this._layoutRows(o,n);return new y1({text:i,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:o,rows:s,width:t})}_layoutRows(e,t){return e.map((i,o)=>this._randomLayoutRow(i,o,t,new Sn({fontIdentifier:this._fontForRow(o,i)})).layout())}_randomLayoutRow(e,t,i,o){return new er({words:e,width:i,attributes:o})}};ce(Mr,"defaultFontIdentifiers",[]),ce(Mr,"identifier","textdesign");Mr.prototype.availableOptions={fontIdentifiers:{type:b.ARRAY,default:[]},relativeLineSpacing:{type:b.NUMBER,default:0}}});var Kr,Xh=m(()=>{re();Bo();vae();wn();g1();Vh();b1();Cn();Kh();Kr=class extends Mr{constructor(...e){super(...e);ce(this,"getImagePaths",()=>{let e=this.getBanderoles();return e&&e.map(t=>t.getImagePath())||[]});ce(this,"onImagesLoaded",()=>{let e=this.getBanderoles();e&&e.forEach(t=>{let i=_t.getImage(t.getImagePath());if(!i){me.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`);return}t.setImage(i)})});this._rowTypeLessThan3WordsRandomizer=new et(0),this._rowTypeMoreThan3WordsRandomizer=new et(0),this._banderolesRandomizer=new et(0),this._seedPool=[...this._seedPool,this._rowTypeLessThan3WordsRandomizer,this._rowTypeMoreThan3WordsRandomizer,this._banderolesRandomizer]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}generateLayoutData(e,t){return this._options.hasMaskedText=!1,super.generateLayoutData(e,t)}_randomLayoutRow(e,t,i,o){if(e.size()<3){let s=this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2)===0;return this._layoutRow(e,i,o,s)}let n=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(n){case 0:return new is({words:e,width:i,attributes:o,orientation:is.Orientations.Left});case 1:return new is({words:e,width:i,attributes:o,orientation:is.Orientations.Right});case 2:return this._layoutRow(e,i,o,!0);case 3:return new er({words:e,width:i,attributes:o});default:throw new Error(`TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ${n}.`)}}_layoutRow(e,t,i,o){if(this.getHasMaskedText()&&(o=!1),o){this.setHasMaskedText(!0);let n=this._banderolesRandomizer.pickNext(this.getBanderoles()),s=new Rl({words:e,width:t,attributes:new Sn({alignment:"left",fontIdentifier:n.getFontIdentifier()}),image:n.getImage(),imageInsets:n.insetsForWidth(t),capInsets:null,backgroundColor:ee.WHITE});return n.getNeedsImageSmoothingFix()&&(s.serverImageSmoothingFix=!0),s}return new er({words:e,width:t,attributes:i})}};ce(Kr,"defaultFontIdentifiers",["imgly_font_campton_bold"]),ce(Kr,"identifier","imgly_text_design_blocks"),ce(Kr,"defaultBanderoles",[zo.Rectangle,zo.Small]);Kr.prototype.availableOptions=U(T({},Mr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Kr.defaultFontIdentifiers},relativeLineSpacing:{type:b.NUMBER,default:.025/3},hasMaskedText:{type:b.BOOLEAN,default:!1},banderoles:{type:b.ARRAY,default:Kr.defaultBanderoles}})});var zd,wae=m(()=>{re();wn();Xh();zd=class extends Kr{constructor(...e){super(...e);this._exclusiveFont=null}generateLayoutData(e,t){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),super.generateLayoutData(e,t)}_fontForRow(e,t){return this._exclusiveFont||super._fontForRow(e,t)}_layoutRow(e,t,i,o){return new er({words:e,width:t,attributes:i})}};ce(zd,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]),ce(zd,"identifier","imgly_text_design_blocks_condensed");zd.prototype.availableOptions=U(T({},Kr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:zd.defaultFontIdentifiers}})});var Ay,lu,co,yP=m(()=>{re();su();na();Ld();Ry();({Rectangle:Ay}=he),lu=class extends lo{constructor(...e){super(...e);this.setSize(new Vt(this.getWidth(),this.getHeight()))}_calculateLayoutElements(){return[new Pi({frame:this._getTextFrame()})]}render(e){let t=this._getFrame(),i=this.getType(),n=this.getAttributes().getTextColor(),s=t.height/3,a=new Ay(t.x,t.y,t.width,s),l=new Ay(t.x,t.y+s*2,t.width,s);switch(i){case lu.FormType.Rect:Tn(e,t,n);break;case lu.FormType.DoubleRect:Tn(e,a,n),Tn(e,l,n);break;case lu.FormType.DoubleRectFirstPunctuated:bP(e,a,n),Tn(e,l,n);break;case lu.FormType.DoubleRectSecondPunctuated:Tn(e,a,n),bP(e,l,n);break;case lu.FormType.LongLine:{let c=t.height/2,u=new Ay(t.x,t.y,t.width,c);f1(e,u,u.height*.5,n);break}case lu.FormType.LongAndShortLine:{let c=t.height*.2,u=c*.75;a=new Ay(t.x,t.y+c,t.width,c);let d=t.x+t.width*.25,p=t.y+t.height-u;l=new Ay(d,p,t.width*.5,u),f1(e,a,a.height*.5,n),f1(e,l,l.height*.5,n);break}default:break}}},co=lu;ce(co,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"});co.prototype.availableOptions=U(T({},lo.prototype.availableOptions),{height:{type:b.NUMBER,default:100},type:{type:b.STRING,default:co.FormType.Rect,available:K.values(co.FormType)}})});var sa,_P=m(()=>{re();wn();yP();Xh();sa=class extends Kr{_layoutRow(e,t,i,o){return new er({words:e,width:t,attributes:i})}_layoutRows(e,t){let i=super._layoutRows(e,t),o=.032*t,n=.08*t,s=new co({width:t,height:o,type:co.FormType.LongLine,shearingAngle:0}).layout(),a=new co({width:t,height:n,type:co.FormType.LongAndShortLine,shearingAngle:0}).layout();return[s,...i,a]}};ce(sa,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),ce(sa,"identifier","imgly_text_design_blocks_light");sa.prototype.availableOptions=U(T({},Kr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:sa.defaultFontIdentifiers}})});var Ud,Tae=m(()=>{re();wn();Vh();_P();Ud=class extends sa{_layoutRows(e,t){return e.map((i,o)=>this._randomLayoutRow(i,o,t,new Sn({fontIdentifier:this._fontForRow(o,i)})).layout())}_layoutRow(e,t,i,o){return new er({words:e,width:t,attributes:i})}};ce(Ud,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),ce(Ud,"identifier","imgly_text_design_blocks_light-v3_1_0");Ud.prototype.availableOptions=U(T({},sa.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Ud.defaultFontIdentifiers}})});var DWe,_1,aa,v1=m(()=>{re();Gh();su();na();Ld();wn();({Rectangle:DWe}=he),_1=class extends er{getImageSize(){let e=this.getLeftImage(),t=this.getRightImage(),i=this.getWords(),n=this.getAttributes().getFontIdentifier(),s=e?new Vt(e.width,e.height):new Vt,a=i.joined(1)[0];if(!a)return s;let c=new Ai({text:a,fontIdentifier:n,fontSize:50}).getSizeValue(),u=t?2:1;s.scale(u,1);let d=s.clone().fitInWidthWithOther(this._getFrame().width,c);return d.scale(1/u,1),d}_getTextFrame(){let e=super._getTextFrame().clone(),t=this.getImageSize(),i=this.getRightImage(),o=this.getImagePosition();return i?(e.x+=t.width,e.width-=2*t.width):o===_1.ImagePosition.Left&&(e.x+=t.width),e}_calculateLayoutElements(){let e=super._calculateLayoutElements(),t=this._getFrame(),i=this.getRightImage(),o=this.getImageSize(),n=this.getImagePosition(),s=this._getTextFrame(),l=this.getAttributes().getFontIdentifier(),c=new Ai({text:"stickerClock",fontIdentifier:l});c.fitWidth(this._getTextFrame().width);let u=new DWe().set(t.x,t.y,o.width,o.height);if(!i&&n===_1.ImagePosition.Right&&(u.x+=s.width),e.push(new Pi({text:"stickerClock",frame:u,font:c})),i){let d=e[0];if(d){let p=u.clone();p.translate(d.getFrame().width+p.width,0),e.push(new Pi({text:"stickerClock",frame:p,font:c}))}}return e}render(e){let t=this._getLayoutElements(),i=this.getAttributes(),o=i.getTextColor(),n=this.getLeftImage(),s=this.getRightImage(),a=t[0],l=t[1],{font:c}=a.serializeOptions(),u=this._getTextFrameForElement(a);if(c.draw(e,u.x,u.y,{textColor:i.getTextColor().toRGBA(),alignment:i.getAlignment()}),n){let d=l.getFrame();e.drawImage(n,d.x,d.y,d.width,d.height),Tn(e,d,o,"source-atop")}if(t.length>2){let p=t[2].getFrame().clone();e.drawImage(s,p.x,p.y,p.width,p.height),Tn(e,p,o,"source-atop")}}},aa=_1;ce(aa,"ImagePosition",{Left:"LEFT",right:"RIGHT"});aa.prototype.availableOptions=U(T({},er.prototype.availableOptions),{leftImage:{type:b.IMAGE,default:null},rightImage:{type:b.IMAGE,default:null},imagePosition:{type:b.STRING,default:aa.ImagePosition.Left,available:[aa.ImagePosition.Left,aa.ImagePosition.Right]}})});var Py,Uo,vP=m(()=>{re();wn();v1();b1();au();Xh();Py=class extends Kr{_fontForRow(e,t){let i=this.getFontIdentifiers();return i[e%i.length]}_minimumNumberOfLines(e){return Math.max(Math.floor(super._minimumNumberOfLines(e)*.7),1)}_maximumNumberOfLines(e){return Math.max(Math.floor(e.countNumberOfCharacters()/5),1)}_randomLayoutRow(e,t,i,o){return this._createSingleRow(Py.RowType.Single,e,i,o)}_createSingleRow(e,t,i,o){let n=o.getFontIdentifier(),s=n==="imgly_font_amberlight"||n==="imgly_font_handycheera_regular"?new ni().set(t.getLowerCase()):t;switch(e){case Py.RowType.Single:return new er({words:s,width:i,attributes:o});case Py.RowType.SingleImage:return new aa({words:s,width:i,attributes:o});default:return me.warn(`TextDesignCelebrate#_createSingleRow: Invalid row type '${e}'`),null}}},Uo=Py;ce(Uo,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]),ce(Uo,"defaultBanderoles",[zo.Celebrate1,zo.Celebrate2]),ce(Uo,"identifier","imgly_text_design_celebrate"),ce(Uo,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"});Uo.prototype.availableOptions=U(T({},Kr.prototype.availableOptions),{relativeLineSpacing:{type:b.NUMBER,default:.01875},fontIdentifiers:{type:b.ARRAY,default:Uo.defaultFontIdentifiers},banderoles:{type:b.ARRAY,default:Uo.defaultBanderoles}})});var Br,x1=m(()=>{re();Gh();au();su();na();Vh();Ld();Ry();Br=class extends lo{constructor(...e){super(...e);this.setSize(new Vt(this.getWidth(),this.getHeight()))}_getImageFrame(){let e=this._getTextFrame().clone(),t=this.getImage();if(this.getDrawingModeAspectFit()&&t){let i=Math.min(e.width/t.width,e.height/t.height),o=t.width*i,n=t.height*i;e.x+=(e.width-o)/2,e.y+=(e.height-n)/2,e.width=o,e.height=n}return e}_calculateLayoutElements(){return[new Pi({text:"",frame:this._getImageFrame(),font:new Ai})]}render(e){let t=this.getImage(),i=this._getImageFrame(),n=this.getAttributes().getTextColor();Ol(e,t,i,n)}};ce(Br,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"});Br.prototype.availableOptions=U(T({},lo.prototype.availableOptions),{words:{type:b.OBJECT,default:new ni},height:{type:b.NUMBER,default:0},image:{type:b.IMAGE,default:null},imagePath:{type:b.STRING,default:Br.RowImages.decorative1},drawingModeAspectFit:{type:b.BOOLEAN,default:!1},attributes:{type:b.CONFIGURABLE,default:new Sn}})});var Nd,kae=m(()=>{re();Bo();wn();v1();x1();b1();Cn();au();Xh();vP();Nd=class extends Uo{constructor(...e){super(...e);ce(this,"getImagePaths",()=>{let e=this.getBanderoles();return[...e&&e.map(t=>t.getImagePath())||[],...this._celebrateTypes]});ce(this,"onImagesLoaded",()=>{let e=this.getBanderoles();e&&e.forEach(t=>{let i=_t.getImage(t.getImagePath());if(!i){me.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`);return}t.setImage(i)})});this._celebrateTypes=[Br.RowImages.celebrate1,Br.RowImages.celebrate2,Br.RowImages.celebrate3],this._exclusiveFont=null,this._typeRandomizer=new et(0),this._useMaskedRandomizer=new et(0),this._seedPool.push(this._typeRandomizer),this._seedPool.push(this._useMaskedRandomizer)}_fontForRow(e,t){let i=this.getFontIdentifiers();return i[e%(i.length-1)]}_layoutRows(e,t){let i=this._typeRandomizer.pickNext(this._celebrateTypes),o=_t.getImage(i);o||me.warn(`TextDesignCelebrateSimple#_layoutRows: Image not fount '${i}'`);let n=new Br({width:t,height:t*.5,drawingModeAspectFit:!0,image:o}).layout(),s=super._layoutRows(e,t);return[n,...s]}_randomLayoutRow(e,t,i,o){let n=e.countNumberOfCharacters(),s=13;n<4&&o.setFontIdentifier("imgly_font_rasa_regular");let l=this._useMaskedRandomizer.nextBool(2,1);return n<s&&l&&!this.getHasMaskedText()?this._layoutRow(e,i,o,!0):super._randomLayoutRow(e,t,i,o)}};ce(Nd,"identifier","imgly_text_design_celebrate_simple"),ce(Nd,"defaultFontIdentifiers",["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"]);Nd.prototype.availableOptions=U(T({},Uo.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Nd.defaultFontIdentifiers}})});var qd,xP=m(()=>{re();qd=class extends qe{render(e,t,i,o,n){me.warn("TextDesignBackground#render: Abstract class")}};qd.prototype.availableOptions={}});var C1,la,Eae=m(()=>{re();Cn();su();xP();({Rectangle:C1}=he),la=class extends qd{getImagePaths(){let{topImagePath:e,bottomImagePath:t,leftImagePath:i,rightImagePath:o}=this._options;return[e,t,i,o].filter(n=>n!=="")}render(e,t,i,o,n){let s=i.clone().scale(t.width),a=t.rectangle(0,0),l=_t.getImage(this.getTopImagePath()),c=_t.getImage(this.getLeftImagePath()),u=_t.getImage(this.getRightImagePath()),d=_t.getImage(this.getBottomImagePath());if(l){let p=l.width/l.height,h=s.top*this.getTopImageFillRate(),f=h*p,x=a.width/2-f/2,y=new C1(x,0,f,h);Ol(e,l,y,o)}if(d){let p=d.width/d.height,h=s.bottom*this.getBottomImageFillRate(),f=h*p,x=a.width/2-f/2,y=new C1(x,a.height-h,f,h);Ol(e,d,y,o)}if(c){let p=c.width/c.height,h=s.left*this.getLeftImageFillRate(),f=h/p,x=a.height/2-f/2,y=new C1(0,x,h,f);Ol(e,c,y,o)}if(u){let p=u.width/u.height,h=s.right*this.getRightImageFillRate(),f=h/p,x=a.height/2-f/2,y=new C1(a.width-h,x,h,f);Ol(e,u,y,o)}}};la.prototype.availableOptions={topImagePath:{type:b.STRING,default:""},leftImagePath:{type:b.STRING,default:""},bottomImagePath:{type:b.STRING,default:""},rightImagePath:{type:b.STRING,default:""},topImageFillRate:{type:b.NUMBER,default:1},leftImageFillRate:{type:b.NUMBER,default:1},bottomImageFillRate:{type:b.NUMBER,default:1},rightImageFillRate:{type:b.NUMBER,default:1}};la.Backgrounds=[new la({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new la({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new la({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new la({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]});var ca,CP=m(()=>{re();Eae();Bo();Lo();wn();au();Kh();ca=class extends Mr{constructor(...e){super(...e);this._relativeInsets=new je(.1,.1,.1,.1),this._alreadyContainsARowWithScriptFont=!1,this._backgroundsRandomizer=new et(0),this._seedPool.push(this._backgroundsRandomizer)}getImagePaths(){return K.Array.flatten(la.Backgrounds.map(e=>e.getImagePaths()))}_getBackground(){return this._backgroundsRandomizer.pickNext(la.Backgrounds)}generateLayoutData(e,t){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),super.generateLayoutData(e,t)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_fontForRow(e,t){let i=super._fontForRow(e,t);return i==="imgly_font_petit_formal_script"&&(this._alreadyContainsARowWithScriptFont&&(i="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),i}_randomLayoutRow(e,t,i,o){let n=o.getFontIdentifier()==="imgly_font_petit_formal_script";return new er({words:n?new ni().set(e.getLowerCase()):e,width:i,attributes:o})}};ce(ca,"identifier","imgly_text_design_equal_width"),ce(ca,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]);ca.prototype.availableOptions=U(T({},Mr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:ca.defaultFontIdentifiers},relativeLineSpacing:{type:b.NUMBER,default:.025}})});var Hd,Iae=m(()=>{re();Lo();CP();Hd=class extends ca{constructor(...e){super(...e);this._relativeInsets=new je}_getBackground(){return null}};ce(Hd,"defaultFontIdentifiers",["imgly_font_ultra"]),ce(Hd,"identifier","imgly_text_design_equal_width_fat");Hd.prototype.availableOptions=U(T({},ca.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Hd.defaultFontIdentifiers}})});var He,Yh=m(()=>{re();Lo();He=class extends qe{insetsForWidth(e){return this.getRelativeInsets().clone().scale(e)}};He.prototype.availableOptions={imagePath:{type:b.STRING,default:""},minimumHeightRatio:{type:b.NUMBER,default:0},sizeToFitContent:{type:b.BOOLEAN,default:!0},capInsets:{type:b.OBJECT,default:new je},relativeInsets:{type:b.OBJECT,default:new je}};He.Box=new He({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new je(.1,.1,.1,.1)});He.Badge1=new He({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new je(.3,.18,.2,.18)});He.Badge2=new He({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new je(.3,.18,.2,.18)});He.Badge3=new He({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new je(.3,.18,.2,.18)});He.Badge4=new He({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new je(.3,.18,.2,.18)});He.SpeechBubble1=new He({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new je(.04,.07,.12,.07),capInsets:new je(19*3,57*3,41*3,17*3)});He.SpeechBubble2=new He({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new je(.04,.07,.12,.07),capInsets:new je(2*3,35*3,29*3,5*3)});He.SpeechBubble3=new He({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new je(.165664675,.2,.165664675,.2),minimumHeightRatio:.7});He.SpeechBubble4=new He({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new je(.124800224,.2,.291200523,.2),minimumHeightRatio:.7});He.SpeechBubble5=new He({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new je(.114892823,.27,.15984926,.27)});He.Watercolor1=new He({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new je(.2,.25,.2,.25)});He.Watercolor2=new He({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new je(.08,.25,.3,.25)});He.Watercolor3=new He({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new je(.1,.2,.15,.2)})});var Dae=S(S1=>{"use strict";Object.defineProperty(S1,"__esModule",{value:!0});S1.arabic=void 0;var OWe="\u0620-\u064A\u066E-\u066F\u0671-\u06D5\u06EE-\u06EF\u06FA-\u06FF",RWe="\u0750-\u077F",FWe="[".concat(OWe).concat(RWe,"]"),AWe="[\u064B-\u065F\u0670]",PWe="".concat(FWe).concat(AWe,"*");S1.arabic=PWe});var Rae=S(w1=>{"use strict";Object.defineProperty(w1,"__esModule",{value:!0});w1.bengali=void 0;var Oae="[\\u{0980}-\\u{09FF}]",MWe="[\\u{0980}-\\u{0983}\\u{09BC}-\\u{09D7}\\u{09E2}\\u{09E3}\\u{09FE}]",BWe="\\u{09CD}",LWe="".concat(Oae,"(").concat(BWe).concat(Oae,"|").concat(MWe,")*");w1.bengali=LWe});var Aae=S(T1=>{"use strict";Object.defineProperty(T1,"__esModule",{value:!0});T1.devanagari=void 0;var Fae="[\\u{0900}-\\u{097F}]",zWe="[\\u{0900}-\\u{0903}\\u{093A}-\\u{0957}\\u{0962}\\u{0963}]",UWe="\\u{094D}",NWe="".concat(Fae,"(").concat(UWe).concat(Fae,"|").concat(zWe,")*");T1.devanagari=NWe});var Mae=S(k1=>{"use strict";Object.defineProperty(k1,"__esModule",{value:!0});k1.gujarati=void 0;var Pae="[\\u{0A80}-\\u{0AFF}]",qWe="[\\u{0A81}-\\u{0A83}\\u{0ABC}\\u{0ABE}-\\u{0ACD}\\u{0AE2}\\u{0AE3}\\u{0AFA}-\\u{0AFF}]",HWe="\\u{0ACD}",jWe="".concat(Pae,"(").concat(HWe).concat(Pae,"|").concat(qWe,")*");k1.gujarati=jWe});var Bae=S(E1=>{"use strict";Object.defineProperty(E1,"__esModule",{value:!0});E1.hebrew=void 0;var WWe="[\u05D0-\u05EA]",GWe="[\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7]",VWe="".concat(WWe).concat(GWe,"*");E1.hebrew=VWe});var Lae=S(I1=>{"use strict";Object.defineProperty(I1,"__esModule",{value:!0});I1.japaneseKana=void 0;var $We="[\\u{3041}-\\u{3096}\\u{309D}-\\u{309F}]",KWe="[\\u{30A0}-\\u{30FF}]",XWe="[\\u{3099}-\\u{309A}]",YWe="[\\u{309B}-\\u{309C}]",JWe="((".concat(KWe,"|").concat($We,")").concat(XWe,"?|").concat(YWe,")");I1.japaneseKana=JWe});var Uae=S(D1=>{"use strict";Object.defineProperty(D1,"__esModule",{value:!0});D1.kannada=void 0;var zae="[\\u{0C80}-\\u{0CFF}]",ZWe="[\\u{0C81}-\\u{0C83}\\u{0CBC}\\u{0CBE}-\\u{0CCD}\\u{0CD5}\\u{0CD6}\\u{0CE2}\\u{0CE3}]",QWe="\\u{0CCD}",eGe="".concat(zae,"(").concat(QWe).concat(zae,"|").concat(ZWe,")*");D1.kannada=eGe});var qae=S(O1=>{"use strict";Object.defineProperty(O1,"__esModule",{value:!0});O1.khmer=void 0;var Nae="[\\u{1780}-\\u{17FF}]",tGe="[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]",rGe="\\u{17D2}",iGe="".concat(Nae,"(").concat(rGe).concat(Nae,"|").concat(tGe,")*");O1.khmer=iGe});var Hae=S(R1=>{"use strict";Object.defineProperty(R1,"__esModule",{value:!0});R1.lao=void 0;var oGe="[\\u{0E80}-\\u{0EFF}]",nGe="[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]",sGe="".concat(oGe).concat(nGe,"*");R1.lao=sGe});var Wae=S(F1=>{"use strict";Object.defineProperty(F1,"__esModule",{value:!0});F1.malayalam=void 0;var jae="[\\u{0D00}-\\u{0D7F}]",aGe="[\\u{0D00}-\\u{0D03}\\u{0D3B}\\u{0D3C}\\u{0D3E}-\\u{0D4D}\\u{0D57}\\u{0D62}-\\u{0D63}]",lGe="\\u{0D4D}",cGe="".concat(jae,"(").concat(lGe).concat(jae,"|").concat(aGe,")*");F1.malayalam=cGe});var Vae=S(A1=>{"use strict";Object.defineProperty(A1,"__esModule",{value:!0});A1.myanmar=void 0;var Gae="[\\u{1000}-\\u{109F}]",uGe=["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"],dGe="[".concat(uGe.join(""),"]"),pGe="\\u{1039}",mGe="".concat(Gae,"(").concat(pGe).concat(Gae,"|").concat(dGe,")*");A1.myanmar=mGe});var $ae=S(P1=>{"use strict";Object.defineProperty(P1,"__esModule",{value:!0});P1.tamil=void 0;var hGe="[\\u{0B80}-\\u{0BFF}]",fGe="[\\u{0B82}-\\u{0B83}\\u{0BBE}-\\u{0BD7}\\u{0962}\\u{0963}]",gGe="".concat(hGe).concat(fGe,"*");P1.tamil=gGe});var Xae=S(M1=>{"use strict";Object.defineProperty(M1,"__esModule",{value:!0});M1.telugu=void 0;var Kae="[\\u{0C00}-\\u{0C7F}]",bGe="[\\u{0C00}-\\u{0C04}\\u{0C3E}-\\u{0C56}\\u{0C62}\\u{0C63}]",yGe="\\u{0C4D}",_Ge="".concat(Kae,"(").concat(yGe).concat(Kae,"|").concat(bGe,")*");M1.telugu=_Ge});var Yae=S(B1=>{"use strict";Object.defineProperty(B1,"__esModule",{value:!0});B1.thai=void 0;var vGe="[\\u0E00-\\u0E7F]",xGe="[\\u0E31\\u0E33-\\u0E3A\\u0E47-\\u0E4E]",CGe="".concat(vGe).concat(xGe,"*");B1.thai=CGe});var Jae=S(L1=>{"use strict";Object.defineProperty(L1,"__esModule",{value:!0});L1.tibetan=void 0;var SGe="[\\u{0F00}-\\u{0FFF}]",wGe="[\\0F18\\0F19\\0F35\\0F37\\0F39\\0F3E\\0F3F\\u{0F71}-\\u{0F87}\\u{0F8D}-\\u{0FBC}\\u{0FC6}]",TGe="".concat(SGe).concat(wGe,"*");L1.tibetan=TGe});var Qae=S(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.emojiVariation=cu.keyCap=cu.countryFlag=void 0;var kGe="[\\u{1F1E6}-\\u{1F1FF}]{2}";cu.countryFlag=kGe;var EGe="[0-9#\\*][\\u{FE0F}]?\\u{20E3}";cu.keyCap=EGe;var IGe=["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"],Zae="(".concat(IGe.join("|"),")"),DGe="\\u{200D}",OGe="[\\u{FE0E}\\u{FE0F}]",RGe="[\\u{1F3FB}-\\u{1F3FF}]",FGe="".concat(Zae,"(").concat(DGe).concat(Zae,"|").concat(RGe,"|").concat(OGe,")*");cu.emojiVariation=FGe});var tle=S((aBt,ele)=>{"use strict";var AGe=Dae(),PGe=Rae(),MGe=Aae(),BGe=Mae(),LGe=Bae(),zGe=Lae(),UGe=Uae(),NGe=qae(),qGe=Hae(),HGe=Wae(),jGe=Vae(),WGe=$ae(),GGe=Xae(),VGe=Yae(),$Ge=Jae(),SP=Qae(),KGe=[SP.countryFlag,SP.keyCap,SP.emojiVariation,AGe.arabic,PGe.bengali,MGe.devanagari,BGe.gujarati,LGe.hebrew,zGe.japaneseKana,UGe.kannada,NGe.khmer,qGe.lao,HGe.malayalam,jGe.myanmar,WGe.tamil,GGe.telugu,VGe.thai,$Ge.tibetan,"."],XGe=new RegExp("(".concat(KGe.join("|"),")"),"gu");function YGe(r){return r.match(XGe)||[]}ele.exports={splitGraphemes:YGe}});var rle,ile,z1,wP=m(()=>{rle=v(tle()),ile=class{constructor(e){this._context=e,this._lastFontStyle={}}getLines(){let e=[],t=[],i=this._lines.length;for(let o=0;o<i;o++){let n=this._lines[o],s=this._buildWords(n),a=s.length;for(let l=0;l<a;l++){let c=s[l],u=t.concat(c).join("").replace(/\s+$/i,"");if(this._getWidth(u)>this._maxWidth){t.length>0&&(e.push(t.join("")),t=[c]);let p=c.replace(/\s+$/i,"");if(this._getWidth(p)>this._maxWidth){let h=this._splitWord(c);e=e.concat(h.lines),h.rest&&(t=[h.rest])}}else t.push(c)}e.push(t.join("")),t=[]}return e.map(o=>this._trimLine(o,this._context.textAlign))}_trimLine(e,t){return e}_buildWords(e){let t=[],i="",o=e.length;for(let n=0;n<o;n++){let s=e[n];i+=s,(s===" "||s==="-"||n===o-1)&&(t.push(i),i="")}return t}_splitWord(e){let t={lines:[],rest:null},i=(0,rle.splitGraphemes)(e),o=i.length,n=[];for(let s=0;s<o;s++){let a=i[s];this._getWidth(n.concat(a).join(""))>this._maxWidth?(n.length>0&&t.lines.push(n.join("")),n=[a]):n.push(a),s===o-1&&n.length>0&&(t.rest=n.join(""))}return t}_fontStyleChanged(){return this._context.font!==this._lastFontStyle?(this._lastFontStyle=this._context.font,!0):!1}_getWidth(e){return this._context.measureText(e).width}setText(e){this._text=e,this._lines=e.split(`
`)}setMaxWidth(e){this._maxWidth=e}},z1=ile});var TP,ole,nle,kP=m(()=>{re();wP();({Vector2:TP}=he),ole=class{constructor(e,t){this._text=e,this._operation=t,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}_createCanvas(){this._canvas=K.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new z1(this._context),this._finalCanvas=K.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}_createTexture(){this._texture=$.Texture.fromCanvas(this._canvas),this._finalTexture=$.Texture.fromCanvas(this._finalCanvas)}_applyTextOptions(e,t){t.font=`${this._text.getFontStyle()} ${this._text.getFontWeight()} ${e.fontSize}px "${this._text.getFontFamily()}"`,this._text.getTextMetrics()?t.textBaseline="alphabetic":t.textBaseline="top",t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();let i=this._text.getOutlineWidth();i>0&&(t.lineWidth=i)}_buildOutputLines(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines().map(t=>t.replace(/\s+$/i,""))}_renderTextLine(e,t,i){let o=this._text.getAlignment(),n=new TP(0,t);switch(o){case"left":n.x=i;break;case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width-i;break}this._context.save(),this._context.translate(n.x,n.y),this._context.fillText(e,0,0),this._context.restore(),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(e,n.x,n.y))}update(e,t){let i=this.calculateFontStyles(e,t);if(i){let{dimensions:o,lines:n}=this._calculateText(e,i,t);this._renderText(e,o,n,i,t),this._updateFinalTexture()}}_updateFinalTexture(){let{width:e,height:t}=this._canvas,{rotation:i}=this,o=Math.cos(i),n=Math.sin(i),s=new TP(Math.abs(e*o)+Math.abs(t*n),Math.abs(e*n)+Math.abs(t*o));this._finalCanvas.width=s.x,this._finalCanvas.height=s.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(i),this._finalContext.drawImage(this._canvas,-e/2,-t/2),this._finalContext.restore()}_renderText(e,t,i,o,n){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*n.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(o,this._context);let s=this._padding(n),a=this._text.getTextMetrics(),l=this._text.getFontSize()*n.y,c=1/a.unitsPerEm*l,u=a.ascender*c;for(let d=0;d<i.length;d++){let p=i[d];this._renderTextLine(p,o.topPadding+o.lineHeight*d+s+u,s)}}calculateFontStyles(e,t){let i=this._text.getFontFamily(),o=this._text.getFontSize()*t.y,n=this._text.getAbsoluteTextHeight(t),s=n*this._text.getLineHeight(),a=n*(this._text.getLineHeight()-1)/2,l={fontFamily:i,fontSize:o,lineHeight:s,topPadding:a};return(this._textOptions.fontFamily!==i||this._textOptions.fontSize!==o||this._textOptions.lineHeight!==s)&&(this._textOptions=l),l}_calculateText(e,t,i){let o=this._text.getMaxWidth()*i.x;this._applyTextOptions(t,this._context);let n=new TP,s=this._text.getText().split(`
`);typeof o!="undefined"&&(n.x=o,s=this._buildOutputLines(o));for(let c=0;c<s.length;c++){let u=s[c];n.x=Math.max(n.x,this._context.measureText(u).width)}let{lineHeight:a}=t;n.y=s.length*a;let l=this._padding(i);return n.y+=l*2,n.x+=l*2,{dimensions:n,lines:s}}_padding(e){return this._text.getAbsoluteTextHeight(e)*.2}getTexture(){return this._texture}getFinalTexture(){return this._finalTexture}getDimensions(e,t){let i=this.calculateFontStyles(e,t),{dimensions:o}=this._calculateText(e,i,t);return o}dispose(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}},nle=ole});var sle,My,ale=m(()=>{re();wP();na();Cn();({Vector2:sle}=he),My=class extends qe{constructor(e){super(e);this._textOptions={},this._createCanvas()}_createCanvas(){this._canvas=K.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new z1(this._context),this._finalCanvas=K.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}setOption(e,t,i=!0,o=!1){super.setOption(e,t,i,o),e==="fontIdentifier"&&!o&&this.updateFontVariation()}updateFontVariation(){let e=_t.getVariation(this.getFontIdentifier());return e||me.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(e),e}_applyTextOptions(e={},t=this._context){let{fontSize:i,fontVariation:o,lineHeight:n,textColor:s,alignment:a}=T(T({},this._options),e),{fontStyle:l,fontWeight:c,fontFamily:u}=o.serializeOptions();t.font=`${l} ${c} ${i}px "${u}"`,t.fillStyle=s,t.textBaseline="top",t.textAlign=a||"left"}_buildOutputLines(e){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()}_renderTextLine(e,t){let i=this.getAlignment(),o=new sle(0,t);switch(i){case"center":o.x=this._canvas.width/2;break;case"right":o.x=this._canvas.width;break}this._context.fillText(e,o.x,o.y)}update(){let e=this.calculateFontStyles();if(e){let{dimensions:t,lines:i}=this._calculateText(e);this._dimensions=t,this._renderText(t,i,e)}}draw(e,t=0,i=0){this.update(),e.drawImage(this._canvas,t,i,this._dimensions.x,this._dimensions.y)}_renderText(e,t,i){this._canvas.width=e.x,this._canvas.height=e.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(i,this._context);for(let o=0;o<t.length;o++){let n=t[o];this._renderTextLine(n,i.topPadding+i.lineHeight*o)}}getFontFamily(){return this.getFontVariation().getFontFamily()}calculateFontStyles(){let e=this.getFontFamily(),t=this.getFontSize(),i=this.getAbsoluteTextHeight(),o=i*this.getLineHeight(),n=i*(this.getLineHeight()-1)/2,s={fontFamily:e,fontSize:t,textHeight:i,lineHeight:o,topPadding:n};return this._textOptions=T({},s),s}getTextMetrics(){return this.getFontVariation().getTextMetrics()}getAbsoluteTextHeight(){let e=this.getFontSize(),t=this.getTextMetrics();if(t){let i=1/t.unitsPerEm*e,o=t.ascender*i,n=t.descender*i;return o+Math.abs(n)}return e*this.getLineHeight()*1.1}_calculateText(e){this._applyTextOptions(e,this._context);let t=new sle,i=this.getText().split(`
`),o;if(typeof o!="undefined")t.x=o,i=this._buildOutputLines(o);else for(let s=0;s<i.length;s++){let a=i[s];t.x=Math.max(t.x,this._context.measureText(a).width)}let{lineHeight:n}=e;return t.y=i.length*n,{dimensions:t,lines:i}}getDimensions(){let e=this.calculateFontStyles(),{dimensions:t}=this._calculateText(e);return t}fitMaxHeight(){this.update();let e=this.getDimensions(),t=this.getText().split(`
`),i=this.getMaxHeight()/e.y}fitMaxWidth(){let e=this.getDimensions().x,t=this.getMaxWidth()/e;this.setFontSize(this.getFontSize()*t),this._textOptions.fontSize=this.getFontSize()}fitInFrame(e){this.setMaxWidth(e.width),this.setMaxHeight(e.height),this.fitMaxWidth(),this.fitMaxHeight()}getSize(){let e=this.getDimensions();return new Vt(e.x,e.y)}};My.prototype.availableOptions={text:{type:b.STRING,default:""},fontIdentifier:{type:b.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:b.OBJECT,default:null},lineHeight:{type:b.NUMBER,default:1},fontSize:{type:b.NUMBER,default:22},textColor:{type:b.STRING,default:"black"},strokeStyle:{type:b.STRING,default:"black"},outlineWidth:{type:b.NUMBER,default:0},textBaseline:{type:b.STRING,default:"alphabetic"},excludeAccents:{type:b.BOOLEAN,default:!0},maxWidth:{type:b.NUMBER,default:100},maxHeight:{type:b.NUMBER,default:0},alignment:{type:b.STRING,default:"left",available:["left","center","right"]}}});var uu,U1=m(()=>{re();kP();Gh();ale();Ld();g1();uu=class extends Rl{_calculateLayoutElements(){let e=this.getWords(),t=this._getTextFrame(),o=this.getAttributes().getFontIdentifier(),n=this.getImageInsets(),s=new Ai({text:e.getWord(0),fontIdentifier:o});s.fitWidth(t.width);let a=new Pi({text:e.getWord(0),frame:t,font:s});a.setFrame(this._getTextFrameForElement(a));let l=this.getSize();return(this.getSizeToFitContent()||l.height<=1)&&(l.height=n.top+a.getFrame().height+n.bottom),l.height=Math.max(l.height,this.getMinimumHeight()),[a]}_getTextFrameForElement(e){let i=this.getWords().getWord(0),o=this.getAttributes(),n=o.getFontIdentifier(),s=this.getImageInsets(),a=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),l=new My({text:i,fontIdentifier:n,alignment:o.getAlignment(),lineHeight:1});l.fitInFrame(a);let c=l.getSize();a.height=c.height;let u=c.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(u+=s.top+s.bottom);let d=this._getFrame(),p=o.getAlignment();if(this.getCenteredVertically())a.y=d.height/2-u/2+s.top;else switch(p){case"left":a.y=d.height-u-s.bottom;break;case"center":a.y=d.height/2-u/2+u*this.getCenterOffset(),a.x=(d.width-a.width)/2;break;case"right":a.x=d.width-a.width-s.right;break;default:break}return a}render(e){e.save(),this._getLayoutElements().forEach(t=>{let{text:i,frame:o}=t.serializeOptions(),n=this.getAttributes(),s=n.getFontIdentifier(),a=new My({text:i,fontIdentifier:s,alignment:n.getAlignment(),lineHeight:1,textColor:n.getTextColor().toRGBA()});o=this._getTextFrameForElement(t),a.fitInFrame(o),a.draw(e,o.x,o.y)}),e.restore()}};uu.prototype.availableOptions=U(T({},Rl.prototype.availableOptions),{centerOffset:{type:b.NUMBER,default:0},sizeToFitContent:{type:b.BOOLEAN,default:!1},textScaleFactor:{type:b.NUMBER,default:.95},rowScaleFactor:{type:b.NUMBER,default:1},minimumHeight:{type:b.NUMBER,default:0},centeredVertically:{type:b.BOOLEAN,default:!1}})});var Jh,cr,jd=m(()=>{re();Yh();Bo();U1();Cn();au();Kh();Jh=class extends Mr{constructor(...e){super(...e);this._rowType=He.Box,this._alignmentRandomizer=new et(0),this._isMaskedRandomizer=new et(0),this._seedPool.push(this._alignmentRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return[He.Box.getImagePath()]}_modifiedText(e){return super._modifiedText(e).toLowerCase()}_modifiedLines(e){let t=new ni;return t.set([e.reduce((i,o)=>`${i}${i===""?"":`
`}${o.joined(1)[0]}`,"")]),[t]}_layoutRows(e,t){let i=super._layoutRows(e,t),o=i[0];if(o&&this.getSquareLayout()){let n=o.getSize();n.height=n.width}return i}getAlignment(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||Jh.ValidAlignments)}_randomLayoutRow(e,t,i,o){let n=this.getAlignment(),s=this._rowType,a=_t.getImage(s.getImagePath());o.setAlignment(n);let l=new uu({words:e,width:i,attributes:o,image:a,imageInsets:s.insetsForWidth(i),capInsets:s.getCapInsets(),backgroundColor:ee.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===He.Box&&(l.serverImageSmoothingFix=!0);let c=l.getSize();return this.getSquareLayout()?c.height=c.width:c.height=Math.max(c.height,c.width*s.getMinimumHeightRatio()),l}},cr=Jh;ce(cr,"defaultFontIdentifiers",["imgly_font_galano_grotesque_bold"]),ce(cr,"Alignment",{Left:"left",Center:"center",Right:"right"}),ce(cr,"ValidAlignments",[Jh.Alignment.Left,Jh.Alignment.Center,Jh.Alignment.Right]),ce(cr,"identifier","imgly_text_design_masked");cr.prototype.availableOptions=U(T({},Mr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:cr.defaultFontIdentifiers},squareLayout:{type:b.BOOLEAN,default:!0}})});var du,lle=m(()=>{re();Yh();Bo();jd();du=class extends cr{constructor(...e){super(...e);this._possibleRowTypes=[He.Badge1,He.Badge2,He.Badge3,He.Badge4],this._rowTypesRandomizer=new et(0),this._isMaskedRandomizer=new et(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_randomLayoutRow(e,t,i,o){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),o.setLineSpacing(.9);let n=super._randomLayoutRow(e,t,i,o);return n.set({textScaleFactor:.9}),n}};ce(du,"defaultFontIdentifiers",["imgly_font_campton_bold"]),ce(du,"identifier","imgly_text_design_masked_badge"),ce(du,"ValidAlignments",[cr.Alignment.Center]);du.prototype.availableOptions=U(T({},cr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:du.defaultFontIdentifiers}})});var No,N1=m(()=>{re();Yh();Bo();jd();No=class extends cr{constructor(...e){super(...e);this._possibleRowTypes=[He.SpeechBubble1,He.SpeechBubble3],this._rowTypesRandomizer=new et(0),this._isMaskedRandomizer=new et(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_rowTypes(e){return this._possibleRowTypes}_randomLayoutRow(e,t,i,o){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(e)),o.setLineSpacing(.9);let n=super._randomLayoutRow(e,t,i,o);return n.set({textScaleFactor:1,minimumHeight:i*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),n}};ce(No,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]),ce(No,"identifier","imgly_text_design_masked_speech_bubble");No.prototype.availableOptions=U(T({},cr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:No.defaultFontIdentifiers},squareLayout:{type:b.BOOLEAN,default:!1},alignment:{type:b.STRING,default:"left",available:cr.ValidAlignments}})});var Wd,cle=m(()=>{re();Yh();jd();N1();Wd=class extends No{constructor(...e){super(...e);this._possibleRowTypes=[He.SpeechBubble2,He.SpeechBubble4,He.SpeechBubble2,He.SpeechBubble4,He.SpeechBubble5],this._possibleRowTypesForMin15=this._possibleRowTypes.slice(0,2),this._possibleRowTypesForMax14=this._possibleRowTypes.slice(2)}_rowTypes(e){return e.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}};ce(Wd,"defaultFontIdentifiers",["imgly_font_permanent_marker"]),ce(Wd,"identifier","imgly_text_design_masked_speech_bubble_comic");Wd.prototype.availableOptions=U(T({},No.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Wd.defaultFontIdentifiers}})});var Gd,ule=m(()=>{re();U1();jd();Gd=class extends cr{_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,i,o){let n=this._alignmentRandomizer.pickNext(cr.ValidAlignments);return o.setAlignment(n),new uu({words:e,width:i,attributes:o,image:null,backgroundColor:ee.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}};ce(Gd,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]),ce(Gd,"identifier","imgly_text_design_multiline");Gd.prototype.availableOptions=U(T({},cr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Gd.defaultFontIdentifiers}})});var JGe,q1,dle=m(()=>{re();({Rectangle:JGe}=he),q1=class extends qe{getContentFrame(){let e=this.getFrame().clone(),t=e.width*.1;return e.insetBy(t,t)}intersects(e){return this.getFrame().intersects(e.getFrame())}};q1.prototype.availableOptions={frame:{type:b.OBJECT,default:new JGe}}});var ple,os,H1=m(()=>{re();Cn();su();xP();dle();({Rectangle:ple}=he),os=class extends qd{constructor(...e){super(...e);this._MAX_TRIES=1e3,this._PRECISION=1e3}render(e,t,i,o,n){let{imagePaths:s,relativeParticleSize:a}=this._options;if(s.length<=0)return;let l=t.width/t.height,c=new ple(Math.round(i.left*this._PRECISION),Math.round(i.top*this._PRECISION*l),this._PRECISION,this._PRECISION);c.width-=c.x+Math.round(i.right*this._PRECISION),c.height-=c.y+Math.round(i.bottom*this._PRECISION*l);let u=[],d=0,p=0;for(;d<this.getParticleCount()&&p<this._MAX_TRIES;){let h=a/2,f=Math.round(h*this._PRECISION),_=Math.round(h*this._PRECISION*l),x=Math.floor(this._PRECISION)-f,y=Math.floor(this._PRECISION)-_,D=n.nextInRange(f,x),E=n.nextInRange(_,y),F=new ple(D-f,E-_,2*f,2*_);!F.intersects(c)&&!this.hasCollision(u,F)&&(u.push(new q1({frame:F})),d+=1),p+=1}for(let h=0;h<u.length;h++){let f=u[h],_=n.pickNext(s),x=_t.getImage(_),y=n.nextInRange(140,230)/255,D=t.width/this._PRECISION,E=t.height/this._PRECISION,F=f.getContentFrame();F.x*=D,F.y*=E,F.width*=D,F.height*=E;let N=o.clone();N.a=y,Ol(e,x,F,N,"source-atop")}}hasCollision(e,t){for(let i=0;i<e.length;i++)if(t.intersects(e[i].getFrame()))return!0;return!1}};os.prototype.availableOptions=U(T({},qd.prototype.availableOptions),{particleCount:{type:b.NUMBER,default:50},relativeParticleSize:{type:b.NUMBER,default:.08},imagePaths:{type:b.ARRAY,default:[]}})});var Zh,mle=m(()=>{re();H1();Zh=class extends os{};ce(Zh,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]);Zh.prototype.availableOptions=U(T({},os.prototype.availableOptions),{imagePaths:{type:b.ARRAY,default:[...Zh.Images]},relativeParticleSize:{type:b.NUMBER,default:.12}})});var Qh,hle=m(()=>{re();H1();Qh=class extends os{};ce(Qh,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]);Qh.prototype.availableOptions=U(T({},os.prototype.availableOptions),{imagePaths:{type:b.ARRAY,default:[...Qh.Images]},relativeParticleSize:{type:b.NUMBER,default:.12}})});var ef,fle=m(()=>{re();H1();ef=class extends os{};ce(ef,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]);ef.prototype.availableOptions=U(T({},os.prototype.availableOptions),{imagePaths:{type:b.ARRAY,default:[...ef.Images]}})});var pu,si,j1=m(()=>{re();Bo();Lo();wn();v1();x1();Cn();au();Kh();pu=class extends Mr{constructor(...e){super(...e);this._relativeInsets=new je(0,0,0,0),this._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],this._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],this._lineCount=0,this._decorativeRowCreated=!1,this._useImageRowRandomizer=new et(0),this._rowTypeRandomizer=new et(0),this._lineDecorativeTypeRandomizer=new et(0),this._seedPool.push(this._useImageRowRandomizer),this._seedPool.push(this._rowTypeRandomizer),this._seedPool.push(this._lineDecorativeTypeRandomizer)}getImagePaths(){return[...pu.DecoratorImages,...pu.RowImages]}_fontForRow(e,t){let i=t.countNumberOfCharacters(),o=this.getFontIdentifiers();return i<4?o=o.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(n)<0):i<5&&(o=o.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(n)<0)),o[e%o.length]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_modifiedLines(e){return this._lineCount=e.length,e}generateLayoutData(e,t){return this._decorativeRowCreated=!1,super.generateLayoutData(e,t)}_randomLayoutRow(e,t,i,o){let n=o.getFontIdentifier(),s=e;switch(n){case"imgly_font_wolesbro":s=new ni().set(e.getLowerCase());break;case"imgly_font_permanent_marker":s=new ni().set(e.getUpperCase());break;default:break}let a=this.getDecorativeRowsInTheMiddleOnly()&&(t===0||t===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||a)return new er({words:s,width:i,attributes:o});this._decorativeRowCreated=!0;let[l,c]=this._randomDecoratorImages();return new aa({words:e,width:i,attributes:o,leftImage:l,rightImage:c})}_layoutRows(e,t){let i=super._layoutRows(e,t);if(!this.getDecorationsVisible())return i;let o=.0625*t,n=new Br({width:t,height:o,image:_t.getImage(this._rowTypeRandomizer.pickNext(pu.RowImages))}).layout(),s=new Br({width:t,height:o,image:_t.getImage(this._rowTypeRandomizer.pickNext(pu.RowImages))}).layout();return[n,...i,s]}_randomDecoratorImages(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?pu.DecoratorImages.slice(0,2).map(e=>_t.getImage(e)):pu.DecoratorImages.slice(2).map(e=>_t.getImage(e))}},si=pu;ce(si,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),ce(si,"identifier","imgly_text_design_sunshine"),ce(si,"RowImages",[Br.RowImages.decorative1,Br.RowImages.decorative2,Br.RowImages.decorative3,Br.RowImages.decorative4]),ce(si,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]);si.prototype.availableOptions=U(T({},Mr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:si.defaultFontIdentifiers},relativeLineSpacing:{type:b.NUMBER,default:.025/3*4},decorationsVisible:{type:b.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:b.BOOLEAN,default:!1}})});var mu,Fl,gle=m(()=>{re();mle();hle();fle();Bo();Lo();Cn();j1();mu=class extends si{constructor(...e){super(...e);this._relativeInsets=new je(.3,.3,.3,.3),this._backgroundRandomizer=new et(0),this._decoTypeRandomizer=new et(0),this._seedPool.push(this._backgroundRandomizer),this._seedPool.push(this._decoTypeRandomizer)}getImagePaths(){return[...si.RowImages,...K.Array.flatten(mu.Backgrounds.map(e=>e.getImagePaths())),...mu.DecoratorImages]}_getBackground(){return this._backgroundRandomizer.pickNext(mu.Backgrounds)}_randomDecoratorImages(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return mu.DecoratorImages.slice(0,2).map(e=>_t.getImage(e));case 1:case 2:return mu.DecoratorImages.slice(2).map(e=>_t.getImage(e));default:return me.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),mu.DecoratorImages.slice(2).map(e=>_t.getImage(e))}}},Fl=mu;ce(Fl,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),ce(Fl,"identifier","imgly_text_design_particles"),ce(Fl,"Backgrounds",[new Zh,new Qh,new ef]),ce(Fl,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]);Fl.prototype.availableOptions=U(T({},si.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Fl.defaultFontIdentifiers},decorationsVisible:{type:b.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:b.BOOLEAN,default:!0}})});var Vd,ble=m(()=>{re();Bo();Lo();yP();Kh();Vd=class extends Mr{constructor(...e){super(...e);this._relativeInsets=new je(.1,0,0,0),this._rowTypeRandomizer=new et(0),this._seedPool.push(this._rowTypeRandomizer)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,i,o){let n=super._randomLayoutRow(e,t,i,o);return n.setShearingAngle(this.getShearingAngle()),n}_layoutRows(e,t){let i=super._layoutRows(e,t),o=K.values(co.FormType),n=30,s=new co({width:t,height:n,type:this._rowTypeRandomizer.pickNext(o),shearingAngle:this.getShearingAngle()}).layout(),a=new co({width:t,height:n,type:this._rowTypeRandomizer.pickNext(o),shearingAngle:this.getShearingAngle()}).layout();return[s,...i,a]}};ce(Vd,"defaultFontIdentifiers",["imgly_font_campton_bold"]),ce(Vd,"identifier","imgly_text_design_rotated");Vd.prototype.availableOptions=U(T({},Mr.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:Vd.defaultFontIdentifiers},relativeLineSpacing:{type:b.NUMBER,default:.025/3},shearingAngle:{type:b.NUMBER,default:-.1}})});var W1,yle=m(()=>{Lo();x1();Cn();j1();W1=class extends si{constructor(...e){super(...e);this._relativeInsets=new je(0,.3,0,.3)}_layoutRows(e,t){let i=super._layoutRows(e,t);if(!this.getDecorationsVisible())return i;let o=25,n=new Br({width:t,height:o,image:_t.getImage(this._rowTypeRandomizer.pickNext(si.RowImages))}).layout(),s=new Br({width:t,height:o,image:_t.getImage(this._rowTypeRandomizer.pickNext(si.RowImages))}).layout();return[n,...i,s]}};ce(W1,"identifier","imgly_text_design_sunshine-v3_1_0")});var $d,_le=m(()=>{re();Yh();jd();N1();$d=class extends No{constructor(...e){super(...e);this._possibleRowTypes=[He.Watercolor1,He.Watercolor2,He.Watercolor3]}};ce($d,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"]),ce($d,"identifier","imgly_text_design_watercolor");$d.prototype.availableOptions=U(T({},No.prototype.availableOptions),{fontIdentifiers:{type:b.ARRAY,default:$d.defaultFontIdentifiers},alignment:{type:b.STRING,default:cr.Alignment.Center,available:cr.ValidAlignments}})});var ZGe,G1,EP,vle=m(()=>{re();Bo();g1();U1();na();su();({Rectangle:ZGe}=he),G1=1e3,EP=class{constructor(){this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new et}createLayout(e,t,i){this._layout=e,this._text=t,this._seed=i,e.seed(i),this._layoutData=e.generateLayoutData(t,G1)}calculateAspect(){return this._layoutData?this._layoutData.getSize().aspect():(me.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}draw(e,t,i,o){let n=this._layoutData;if(this._layoutData){let s=new Vt(G1,G1/t.aspect()),a=t.width/G1,l=n.getRelativeInsets().clone().scale(s.width),c=n.getRelativeLineSpacing()*s.width,u=l.top;e.save(),this.randomizer.seed(this._seed);let d=n.getBackground();d&&d.render(e,t,n.getRelativeInsets(),o?ee.WHITE:i,this.randomizer),e.scale(a,a),n.getRows().forEach(p=>{e.save();let h=p.getAttributes();if(e.transform(1,p.getShearingAngle(),0,1,l.left,u),h.setTextColor(o?ee.WHITE:i.clone()),h.setTintColor(o?ee.WHITE:i.clone()),(p instanceof Rl||p instanceof uu)&&(p.setBackgroundColor(o?ee.WHITE:i.clone()),p.setIsUsedInInvertedLayout(o)),this._debugMode&&(p._debugMode=!0),p.willRender(e),p.render(e),p.didRender(e),this._debugMode){let f=p._getFrame(),_=p._getTextFrame();$h(e,f,ee.GREEN),$h(e,_,ee.BLUE),p._getLayoutElements().forEach(x=>{let y=x.getFrame(),D=p._getTextFrameForElement(x);$h(e,y,new ee(1,1,0)),$h(e,D,new ee(0,1,1))})}u+=p.getSize().height+c,e.restore()}),this._debugMode&&$h(e,new ZGe(0,0,s.width,s.height),ee.RED),e.restore()}}}});var hu,tf,V1,xle=m(()=>{re();Wh();Xh();wae();_P();Tae();vP();kae();CP();Iae();jd();lle();N1();cle();ule();gle();ble();j1();yle();_le();Bo();na();Cn();vle();({Vector2:hu}=he),tf=class extends ia{constructor(e,t){super(e,t);this._isDisposed=!1,this._renderer=new EP,this._canvas=K.createCanvas(),this._context=this._canvas.getContext("2d"),this._texture=$.Texture.fromCanvas(this._canvas),this._sprite.setTexture(this._texture),this._aspect=1,this._isLayoutDirty=!0,this.getSeed()<0&&this.setSeed(et.TimeSeed())}seed(e){this.setSeed(e||et.TimeSeed()),this._isLayoutDirty=!0}_updateLayout(){let e=this.getLayout();return e?(this._renderer.createLayout(e,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}applyTransform(e){super.applyTransform(e);let t={};this._options.dimensions&&(t.width=e.applyToRelativeSize(this.getWidth())),this.set(t,!1)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2,this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2,this.setRotation(t);break}}update(e,t){let i=this._isLayoutDirty;if(this._isDisposed||i&&!this._updateLayout())return;let o=this.getWidth()*t.min()/e.getTextureScale(),n=o/this._aspect,s=new hu(o,n),a=new hu(Math.round(o*2),Math.round(n*2)).clamp(new hu(1,1),new hu(1/0,1/0)),l=e.getRenderer(),c=l.getMaxDimensions()||1/0;a.x>c&&(a.x=c,a.y=Math.round(a.x/this._aspect)),a.y>c&&(a.y=c,a.x=Math.round(a.y*this._aspect));let u=K.ensureCanvasDimensions(this._canvas,a);(i||u)&&(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new Vt(a.x,a.y),this.getColor(),this.getInverted()),this.setDimensions(s),this._texture.getBaseTexture().update(),l.isOfType(Pe.WEBGL)&&l.updateTexture(this._texture.getBaseTexture())),super.update(e,t),this._applyFlip()}_applyFlip(){let e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:i}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}_optionEquals(e,t){if(e==="layout"){let{layout:i}=this._options;return!(!i&&t||!t&&i||!t.constructor||!i.constructor||i.constructor.identifier!==t.constructor.identifier)}return super._optionEquals(e,t)}serializeOptions(e,t=!1){if(e&&this.getPadding()<0){let o=e.indexOf("padding");o>-1&&e.splice(o,1)}let i=super.serializeOptions(e,t);return e||(i.type="textdesign"),i}_getTexture(){return this._texture}canBeFlippedHorizontally(){return!1}canBeDuplicated(){return!0}canMaskCanvas(){return!0}canAdjustPadding(){return!0}dispose(){this._isDisposed=!0,this._texture.dispose(),this._sprite.dispose()}};tf.Layouts={TextDesignBlocks:Kr,TextDesignBlocksCondensed:zd,TextDesignBlocksLight:sa,TextDesignCelebrate:Uo,TextDesignCelebrateSimple:Nd,TextDesignEqualWidth:ca,TextDesignEqualWidthFat:Hd,TextDesignMasked:cr,TextDesignMaskedBadge:du,TextDesignMaskedSpeechBubble:No,TextDesignMaskedSpeechBubbleComic:Wd,TextDesignMultiline:Gd,TextDesignWatercolor:$d,TextDesignSunshine:si,TextDesignParticles:Fl,TextDesignRotated:Vd};tf.LegacyLayouts={TextDesignBlocksLightV310:Ud,TextDesignSunshineV310:W1};tf.AssetManager=_t;tf.prototype.availableOptions={id:{type:b.STRING,default:()=>K.getUUID()},position:{type:b.VECTOR2,default:new hu(.5,.5)},dimensions:{type:b.VECTOR2,default:hu.NULL},anchor:{type:b.VECTOR2,default:new hu(0,0)},pivot:{type:b.VECTOR2,default:new hu(.5,.5)},rotation:{type:b.NUMBER,default:0},flipHorizontally:{type:b.BOOLEAN,default:!1},flipVertically:{type:b.BOOLEAN,default:!1},layout:{type:b.OBJECT,default:null,setter(r){return this._isLayoutDirty=!0,r}},text:{type:b.STRING,default:"",setter(r){return this._isLayoutDirty=!0,r}},color:{type:b.COLOR,default:ee.BLACK,setter(r){return this._isLayoutDirty=!0,r}},padding:{type:b.NUMBER,default:.01,minValue:.01},width:{type:b.NUMBER,default:.8},inverted:{type:b.BOOLEAN,default:!1,setter(r){return this._isLayoutDirty=!0,r}},seed:{type:b.NUMBER,default:-1}};V1=tf});var IP,$1,K1,Cle=m(()=>{re();Wh();kP();({Vector2:IP}=he),$1=class extends ia{constructor(...e){super(...e);this._textRenderer=new nle(this,this._operation),this._textRenderer.rotation=this.getRotation(),this._sprite.setTexture(this._textRenderer.getFinalTexture()),this._hitTestSprite.setTexture(this._textRenderer.getTexture())}serializeOptions(e,t=!1){let i=super.serializeOptions(e,t);return e||(i.type="text"),i}getDOMStyle(e,t){let i=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:`${i}px`,fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:`${this.getAbsoluteTextHeight(t)*this.getLineHeight()}px`,color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}getAbsoluteTextHeight(e){let t=this.getFontSize()*e.y,i=this.getTextMetrics();if(i){let o=1/i.unitsPerEm*t,n=i.ascender*o,s=i.descender*o;return n+Math.abs(s)}return t*this.getLineHeight()*1.1}getDimensions(e,t){return this._textRenderer.getDimensions(e,t)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2,this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2,this.setRotation(t);break}}applyTransform(e){super.applyTransform(e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)}applyRotation(e){super.applyRotation(e);let t=(e+360)%360,i=this._operation.getInputDimensions();(t===90||t===270)&&(this.setMaxWidth(this.getMaxWidth()/i.x*i.y),this.setFontSize(this.getFontSize()/i.y*i.x))}setOption(e,t){let{flipHorizontally:i,flipVertically:o}=this._options;if(e==="rotation"){let n=t;i&&(n=Math.PI*2-n),o&&(n=Math.PI*2-n),this._options.rotation=n,this._textRenderer&&(this._textRenderer.rotation=n),this._rotation=n,this.emit("update");return}super.setOption(e,t)}getOption(e){return e==="rotation"?this._rotation:super.getOption(e)}getHitTestDisplayObject(){return this._hitTestSprite}update(e,t){if(this._sprite.setVisible(this._options.visible),!this._options.visible)return;this._textRenderer.update(e,t);let i=this._textRenderer.getFinalTexture();i.getBaseTexture().update();let n=e.getRenderer();n.isOfType(Pe.WEBGL)&&n.updateTexture(i.getBaseTexture()),super.update(e,t),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}_applyFlip(){let e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:i}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1,this.setRotation(this._rotation)),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(e)}_getTexture(){return this._textRenderer.getFinalTexture()}dispose(){super.dispose(),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}canBeFlippedHorizontally(){return!1}canAdjustPadding(){return!1}};$1.prototype.availableOptions={id:{type:b.STRING,default:()=>K.getUUID()},fontSize:{type:b.NUMBER,default:.1},characterSpacing:{type:b.NUMBER,default:0},lineHeight:{type:b.NUMBER,default:1.1},fontIdentifier:{type:b.STRING},fontFamily:{type:b.STRING,default:"Times New Roman"},fontWeight:{type:b.ALL,default:"normal"},fontStyle:{type:b.STRING,default:"normal"},textMetrics:{type:b.OBJECT,default:null},outlineWidth:{type:b.NUMBER,default:0},outlineColor:{type:b.COLOR,default:ee.BLACK},alignment:{type:b.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:b.STRING,default:"top",available:["top","center","bottom"]},color:{type:b.COLOR,default:new ee(1,0,0,1)},backgroundColor:{type:b.COLOR,default:ee.TRANSPARENT},position:{type:b.VECTOR2,default:new IP(.5,.5)},anchor:{type:b.VECTOR2,default:new IP(0,0)},pivot:{type:b.VECTOR2,default:new IP(.5,.5)},rotation:{type:b.NUMBER,default:0},text:{type:b.STRING,required:!0},maxWidth:{type:b.NUMBER,default:.5},maxHeight:{type:b.NUMBER,default:0},visible:{type:b.BOOLEAN,default:!0},flipHorizontally:{type:b.BOOLEAN,default:!1},flipVertically:{type:b.BOOLEAN,default:!1}};$1.type="text";K1=$1});var DP,Al,Sle,wle=m(()=>{re();Wh();hP();bae();xle();Cle();({Vector2:DP}=he),Al=class extends lt{constructor(...e){super(...e);this.setSmoothDownscaling(this._sdk.getOptions().smoothDownscaling),this._onSpriteUpdate=this._onSpriteUpdate.bind(this),this._maskCanvas=K.createCanvas(),this._options.sprites.slice().forEach(i=>{this.removeSprite(i),this.addSprite(i)})}getSpritesOfType(e){return this._options.sprites.filter(t=>t instanceof e)}rotate(e){this._options.sprites.forEach(t=>{t.applyRotation(e)})}flip(e){this._options.sprites.forEach(t=>{t.applyFlip(e)})}_onSpriteUpdate(e,t){this.emit("update",this),this.setDirty(!0)}_applyRotation(e,t){this._options.sprites.forEach(i=>i.applyRotation(e,t))}transform(e){this._options.sprites.forEach(t=>t.applyTransform(e))}scale(e){this._options.sprites.forEach(t=>t.applyScale(e))}serializeOption(e,t=!1){return e==="sprites"?this._options.sprites.map(i=>i.serializeOptions(void 0,t)):super.serializeOption(e,t)}createSticker(e){return new h1(this,e)}createText(e){return new K1(this,e)}createBrush(e){return new Md(this,e)}createTextDesign(e){return new V1(this,e)}addSprite(e){this._options.sprites.push(e);let t=this.getSmoothDownscaling();e.setSmoothDownscaling&&e.setSmoothDownscaling(t),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}removeSprite(e){let{sprites:t}=this._options,i=t.indexOf(e);return i!==-1?(e.off("update",this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(i,1),this.setDirty(!0),!0):!1}_getOrientatedStageSize(){let e=this._sdk.getSprite().getTexture().getFrame(),t=this._sdk.getOperationsStack().getByIdentifier("orientation");if(t){let o=t?t.getRotation():0;return o===270||o===90?new DP(e.height,e.width):new DP(e.width,e.height)}let i=this._sdk.getOperationsStack().getByIdentifier("output");return i?i.getOutputResolution():new DP(e.width,e.height)}_render(e){let t=this._container,{sprites:i}=this._options,o=e.getDimensions().clone().floor(),n=new $.Container;return n.addChild(this._sprite),Promise.all(i.map(s=>s.validateSettings())).then(()=>{i.forEach(s=>s.update(this._sdk,o))}).then(()=>{this._renderTexture.clear(),i.forEach(s=>{s.getInverted&&s.getInverted()?(this._renderTexture.render(n),this._renderTexture.render(this._renderMaskedSprite(s.getDisplayObject(),s.getColor?s.getColor():ee.WHITE,s.getPadding?s.getPadding():-1)),n=new $.Container):n.addChild(s.getDisplayObject())}),this._renderTexture.render(n),t.addChild(this._sprite),i.forEach(s=>t.addChild(s.getDisplayObject()))})}_renderMaskedSprite(e,t,i){let o=this._maskCanvas,n=e.getWorldTransform(),s=this._getOrientatedStageSize();K.ensureCanvasDimensions(o,s);let a=o.getContext("2d");if(a.clearRect(0,0,o.width,o.height),a.save(),a.fillStyle=t.toRGBA(),i<0)a.fillRect(0,0,s.x,s.y);else{let u=Math.abs(e.getWidth()/e.getScale().x),d=Math.abs(e.getHeight()/e.getScale().y),p=u*i;a.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),a.fillRect(-p,-p,u+p*2,d+p*2)}a.restore(),a.save(),a.globalCompositeOperation="destination-out",e._renderCanvas({getCurrentRenderTarget:()=>({getPixelRatio:()=>1}),beforeDraw:u=>{let d=e.getWidth(),p=e.getHeight(),h=e.getScale(),f=h.x<0,_=h.y<0;u.translate(d,p),u.scale(f?-1:1,_?-1:1),u.translate(-d,-p)},getContext:()=>a}),a.restore();let l=new $.Container,c=new $.Sprite($.Texture.fromCanvas(o));return l.addChild(c),l}takeSpriteToFront(e){let{sprites:t}=this._options,i=t.indexOf(e);if(i===-1)return;K.moveArrayItem(t,i,t.length-1);let o=e.getDisplayObject();this._container.removeChild(o),this._container.addChild(o),this.setDirty(!0)}getSpritesAtPosition(e,t){let i=[];this._options.sprites.forEach(u=>u.update(this._sdk,t));let o=this._sdk.getSprite(),n=o.getWorldTransform().applyInverseToVector(e),{width:s,height:a}=o.getTexture().getFrame(),l=o.getAnchor().clone().multiply(-s,-a);n.subtract(l);let c=this._options.sprites.slice(0).reverse();for(let u=0,d=c.length;u<d;u++){let p=c[u];p.getHitTestDisplayObject().isAtPosition(n)&&i.push(p)}return i}setDirtyForRenderer(e,t,i){super.setDirtyForRenderer(e,t,i),this._options.sprites.forEach(o=>{o.setDirtyForRenderer(e,t,i)})}dispose(){super.dispose(),this._options.sprites.forEach(e=>{e.dispose()})}};Al.StickerSprite=h1;Al.TextSprite=K1;Al.BrushSprite=Md;Al.TextDesignSprite=V1;Al.identifier="sprite";Al.prototype.availableOptions={sprites:{type:b.ARRAY,default:[],setter(r,e){return r=r.map((t,i)=>{if(t instanceof ia)return t;let o=T({},t);switch(delete o.type,t.type){case"text":return new K1(this,o);case"sticker":return new h1(this,o);case"brush":return new Md(this,o);case"textdesign":return new V1(this,o);default:return me.error(this.constructor.name,`Invalid sprite type: ${t.type}`),null}}),e||(this._options.sprites&&this._options.sprites.slice().forEach(i=>{i.dispose(),this.removeSprite(i)}),r.forEach(t=>{this.addSprite(t)})),r}},smoothDownscaling:{type:b.BOOLEAN,default:!1}};Me.Operations.SpriteOperation=Al;Sle=Al});var Tle,kle,Ele,Ile=m(()=>{re();({Vector2:Tle}=he),kle=class{constructor(e,t){this._options=t,this._oldOptions={start:e.getStart().clone(),end:e.getEnd().clone(),rotation:e.getRotation(),textureScale:e.getTextureScale()},this._inputDimensions=e.getInputDimensions(!1),this._rotationDelta=t.rotation-e.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=t.end.clone().subtract(t.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(t.start).multiply(this._inputDimensions),this._scaleRatio=e.calculateScale(t.rotation)/e.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/e.getTextureScale()}applyToRelativePoint(e){let t=this._oldOptions.start,i=this._oldOptions.end,n=t.clone().add(i.clone().subtract(t).divide(2)).multiply(this._inputDimensions),s=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),l=n.clone().add(s).clone().subtract(this._inputDimensions.clone().divide(2)),c=new Tle(l.x*this._deltaCos-l.y*this._deltaSin,l.x*this._deltaSin+l.y*this._deltaCos),u=this._inputDimensions.clone().divide(2).add(c),d=this._options.start.clone().multiply(this._inputDimensions);return u.clone().subtract(d).divide(this._newAbsoluteSize)}applyToRelativeSize(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}applyToDimensions(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e}scaleSize(e,t="y"){return e/this._sizeFactor[t]}applyToRotation(e){return(e+this._rotationDelta)%(Math.PI*2)}invert(){let e=this._options.start.clone(),t=this._options.end.clone(),i=this._inputDimensions,o=-this._rotationDelta,n=Math.cos(o),s=Math.sin(o),a=this._oldAbsoluteSize,l=this._newAbsoluteSize,c=e.clone().subtract(t).multiply(i),u=1/this._scaleRatio,d=new Tle(1/this._sizeFactor.x,1/this._sizeFactor.y),p=1/this._textureScaleFactor,h=this._oldOptions;return this._oldOptions=this._options,this._options=h,this._inputDimensions=i,this._rotationDelta=o,this._deltaCos=n,this._deltaSin=s,this._oldAbsoluteSize=l,this._newAbsoluteSize=a,this._absoluteStartDiff=c,this._scaleRatio=u,this._sizeFactor=d,this._textureScaleFactor=p,this}},Ele=kle});var OP,rf,Dle,Ole=m(()=>{re();Ile();({Vector2:OP}=he),rf=class extends lt{_render(e){this._sprite.setRotation(0);let t=e.getDimensions(),{start:i,end:o,rotation:n,textureScale:s}=this._options,l=o.clone().subtract(i).clone().divide(2),c=i.clone().add(l),d=this.calculateScale()*s,p=t.clone().multiply(d).multiply(l);return this._sprite.setAnchor(c),this._sprite.setRotation(n),this._sprite.setScale(d,d),this._sprite.setPosition(p),this._renderTexture.render(this._container),Promise.resolve()}calculateScale(e=this._options.rotation){let t=this.getInputDimensions(!1),i=new OP(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e))),o=t.clone().subtract(i.clone()).divide(2).abs(),n=1;return o.y>o.x?n=o.y*2/t.y+1:n=o.x*2/t.x+1,n}getNewDimensions(e){let{start:t,end:i,textureScale:o}=this._options,n=this.calculateScale();return e.clone().multiply(o*n).multiply(i.clone().subtract(t)).round()}flip(e){let{start:t,end:i}=this._options,o=t.clone();e==="horizontal"?(t.set(1-i.x,t.y),i.set(1-o.x,i.y)):e==="vertical"&&(t.set(t.x,1-i.y),i.set(i.x,1-o.y))}rotate(e){let{start:t,end:i}=this._options,o=(e+360)%360,n=Math.floor(o/90);for(let s=0;s<n;s++){let a=t.clone();t.set(1-i.y,a.x),i.set(1-a.y,i.x)}}_onBeforeExport(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}_onAfterExport(){this.setEnabled(this._wasEnabledBeforeExport,!0)}};rf.identifier="transform";rf.prototype.availableOptions={start:{type:b.VECTOR2,default:new OP(0,0)},end:{type:b.VECTOR2,default:new OP(1,1)},textureScale:{type:b.NUMBER,default:1},rotation:{type:b.NUMBER,default:0}};rf.TransformChange=Ele;Me.Operations.TransformOperation=rf;Dle=rf});var By,Rle,Fle=m(()=>{Mt();re();Od();By=class extends lt{constructor(...e){super(...e);this._watermarkImage=null;this._watermarkTexture=null;this._loadWatermarkImage=()=>{if(!this._watermarkImage){if(!(this._options.watermarkURI instanceof window.Image)){let e={value:this._options.crossOrigin,cors:!0};return Ii.loadImage(this._options.watermarkURI,e).then(t=>{this._watermarkImage=t})}this._watermarkImage=this._options.watermarkURI}return Promise.resolve()};this._setWatermarkalignment=(e,t)=>{let i=Math.min(t.x,t.y)*K.clamp(this._options.inset,0,1);switch(this._options.alignment){case"center":this._watermarkSprite.setPosition(new xe(t.x-e.x,t.y-e.y).divide(2));break;case"top-left":this._watermarkSprite.setPosition(new xe(i,i));break;case"top-right":this._watermarkSprite.setPosition(new xe(t.x-e.x-i,i));break;case"bottom-left":this._watermarkSprite.setPosition(new xe(i,t.y-e.y-i));break;case"bottom-right":this._watermarkSprite.setPosition(new xe(t.x-e.x-i,t.y-e.y-i));break;default:this._watermarkSprite.setPosition(new xe(0,0));break}};this._watermarkSprite=new $.Sprite,this._watermarkSprite.setAnchor(0,0),this._container.addChild(this._watermarkSprite)}_render(e){let{alpha:t,size:i}=this._options;return this._loadWatermarkImage().then(()=>{if(this._watermarkImage){this._watermarkTexture||(this._watermarkTexture=$.Texture.fromImage(this._watermarkImage),this._watermarkSprite.setTexture(this._watermarkTexture));let o=e.getDimensions(),{width:n,height:s}=this._watermarkImage,a=K.resizeVectorToFit(new xe(n,s),o.clone().multiply(K.clamp(i,0,1)));this._setWatermarkalignment(a,o),this._watermarkSprite.setWidth(a.x),this._watermarkSprite.setHeight(a.y),this._watermarkSprite.setAlpha(t),this._renderTexture&&this._renderTexture.render(this._container)}return Promise.resolve()})}dispose(){super.dispose(),this._watermarkSprite.dispose()}};By.identifier="watermark";By.prototype.availableOptions={watermarkURI:{type:b.STRING,required:!0},alignment:{type:b.STRING,default:"top-right"},inset:{type:b.NUMBER,default:"0.05"},size:{type:b.NUMBER,default:"0.2"},alpha:{type:b.NUMBER,default:1},crossOrigin:{type:b.STRING,default:"anonymous"}};Me.Operations.WatermarkOperation=By;Rle=By});var QGe,Ale=m(()=>{re();Qie();ooe();wse();kse();Ise();Mse();Nse();Gse();$se();Xse();Zse();iae();gae();wle();Ole();Fle();QGe=[Zie,ioe,Sse,Ese,Pse,Use,Wse,Vse,Jse,rae,fae,Sle,Dle,Rle,Kse,Tse];Me.AllOperations=QGe});var ua=m(()=>{Ale();_y();_y()});var Ple,Mle=m(()=>{Ple=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_campton_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans_regular",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]}]});var Ble,Lle=m(()=>{Ble=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}]}]});var zle,Ule=m(()=>{zle=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}]});var Nle,qle,Hle=m(()=>{ua();Mle();Lle();Ule();Nle=[];typeof Me.Operations.SpriteOperation!="undefined"&&Nle.push(Me.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush);qle={TRANSFORM_RATIO_CATEGORIES:zle,FONTS:Ple,TEXT_DESIGN_FONTS:Ble,BRUSHES:Nle}});var eVe,jle,Wle=m(()=>{py();eVe=U(T({},Oh),{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"}),jle=eVe});var qt,Gle=m(()=>{Hle();Wle();qt={EVENTS:jle,DEFAULTS:qle}});function tVe(){let{userAgent:r,appVersion:e}=navigator;return e.indexOf("MSIE")!==-1?e.match(/MSIE\s+?([0-9]+)/i)[1]:r.indexOf("Trident")!==-1?r.match(/rv:([0-9]+)/i)[1]:!1}var Vle,$le=m(()=>{Vle={getIEVersion:tVe}});var rVe,X1,iVe,Mi,Kle=m(()=>{ua();vh();ts();$le();rVe=Me.Utils,{Vector2:X1}=Me.Math,iVe={getInnerDimensionsForElement(r){let e=new X1(r.offsetWidth,r.offsetHeight),t=window.getComputedStyle(r,null);return e.x-=parseInt(t.getPropertyValue("padding-left"),10),e.x-=parseInt(t.getPropertyValue("padding-right"),10),e.y-=parseInt(t.getPropertyValue("padding-top"),10),e.y-=parseInt(t.getPropertyValue("padding-bottom"),10),e},getEventPosition(r){let e=r.clientX,t=r.clientY;if(r.type.indexOf("touch")!==-1){if(!r.touches.length)return;e=r.touches[0].clientX,t=r.touches[0].clientY}return new X1(e,t)},createTransparentPatternCanvas(){let r=document.createElement("canvas"),e=r.getContext("2d");return r.width=10,r.height=10,e.fillStyle="white",e.fillRect(0,0,r.width,r.height),e.fillStyle="#cccccc",e.fillRect(0,0,r.width/2,r.height/2),e.fillRect(r.width/2,r.height/2,r.width,r.height),r},supportsMSBlob(){return typeof document.createElement("canvas").msToBlob!="undefined"},translate(r,e,t={}){let i=this.fetch(r,e);if(!i)return me.info("Utils#translate",`Unable to translate \`${e}\``),null;for(let o in t)i=i.replace(`\${${o}}`,t[o]);return i},fetch(r,e,t){e=e.replace(/\[(\w+)]/g,".$1"),e=e.replace(/^\./,"");let i=e.split(".");for(let o=0;o<i.length;o++){let n=i[o];if(r=r[n],!r)break}return typeof r=="undefined"?!1:r},isMobile(){let r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))},select(r,e,t=null){t||(t=o=>o);let i=[];return e.forEach(o=>{r.forEach(n=>{t(n)===o&&i.push(n)})}),i},getJSONP(r){return new yn(r).load()},cloneCategories(r,e){return r.map(t=>(t=rVe.clone(t),t[e]=t[e].slice(0),t))},mergeCategories(r,e,t){r=this.cloneCategories(r,t);let i=null;return e.forEach(o=>{r.forEach(n=>{o.identifier===n.identifier&&(i=n)}),i?i[t]=i[t].concat(o[t]):r.push(o)}),r},wrapFiltersInCategories(r,e){return r.map(t=>{let i=t;return e in i||(i={identifier:`imgly_filters_wrapped-${t.identifier}`,displayFlat:!0,[e]:[t]}),i})},getStyleObject(r){let e=window.getComputedStyle(r),t={};for(let i in e){let o=e.getPropertyValue(i),n=i.replace(/-([a-z])/g,(s,a)=>a.toUpperCase());o!==""&&(t[n]=o)}return t},styleElement(r,e){for(let t in e)r.style[t]=e[t]},debounce(r,e,t){let i;return function(...o){let n=()=>{i=null,t||r.apply(this,o)},s=t&&!i;clearTimeout(i),i=setTimeout(n,e),s&&r.apply(this,o)}},getScrollbarWidth(){let r=document.createElement("div");r.style.visibility="hidden",r.style.width="100px",r.style.msOverflowStyle="scrollbar",document.body.appendChild(r);let e=r.offsetWidth;r.style.overflow="scroll";let t=document.createElement("div");t.style.width="100%",r.appendChild(t);let i=t.offsetWidth;return r.parentNode.removeChild(r),e-i},findIntegerFraction(r,e=100){let t=Number.MAX_VALUE,i=0,o=0,n=1,s=1;for(let a=0;a<e;a++){let l=n/s-r;if(l<0)n++;else if(l>0)s++;else return new X1(n,s);let c=Math.abs(n/s-r);c<t&&(t=c,i=n,o=s)}return new X1(i,o)},toFixed(r,e=2){let t=r.toFixed(e);return parseFloat(t)},capitalize(r){return r.charAt(0).toUpperCase()+r.slice(1)},flipObject(r){let e={};for(let t in r)e[r[t]]=t;return e},Browser:Vle},Mi=iVe});var RP,mt,K4t,Ly,At,fu,FP,Se,tt,X4t,Y4t,J4t,Mt=m(()=>{ua();py();bh();ts();Gle();Kle();({Base64:RP}=Me),{Color:mt}=Me,{ColorMatrix:K4t}=Me.Math,{EventEmitter:Ly}=Me,At=Me.Utils,{RenderType:fu}=Me,{ImageFormat:FP}=Me,Se=Me,{Vector2:tt}=Me.Math,{Rectangle:X4t}=Me.Math,{Range:Y4t}=Me.Math,J4t=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oy()});var of,Kd,AP=m(()=>{Mt();of=class{constructor(e,t,i=!1){this._ui=e,this._options=t,this._categoriesById={},this._filtersByIdentifier={identity:Se.Operations.FilterOperation.Filters.IdentityFilter},this._categories=Mi.wrapFiltersInCategories(wl.DEFAULTS.FILTERS.slice(0),of.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=i||e.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=Mi.wrapFiltersInCategories(this._options.categories,of.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}instantiateFilterWithIdentifier(e){let t={value:this._ui._options.crossOrigin,cors:!0},i=this.getFilterByIdentifier(e);if(!i)return Promise.reject(new Error(`Unknown filter with identifier \`${e}\`!`));if(!(i.prototype instanceof Se.Operations.FilterOperation.Filter)){let{lutImage:o,resolution:n,horizontalTileCount:s,verticalTileCount:a}=i,{lightColor:l,darkColor:c}=i;if(l&&c)return l=mt.fromHex(l),c=mt.fromHex(c),Promise.resolve(new Se.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:l,darkColor:c}));let u;this._ui.getPreloader&&(u=this._ui.getPreloader().getAsset(o));let d;return u?d=Promise.resolve(u):d=Ii.loadImage(this._ui.getAssetPath(o),t),d.then(()=>Ii.loadImage(this._ui.getAssetPath(o),t).then(p=>new Se.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:p,resolution:n,horizontalTileCount:s,verticalTileCount:a})))}return Promise.resolve(new i)}_initCategories(){if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=Mi.wrapFiltersInCategories(this._options.categories,of.CATEGORY_ITEMS_PROPERTY):this._categories=Mi.mergeCategories(this._categories,this._options.categories,of.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){let t=[];this._categories.forEach(i=>{let o=i.filters.filter(n=>this._options.availableFilters.indexOf(n.identifier)!==-1);o.length>0&&t.push({identifier:i.identifier,defaultName:i.defaultName,filters:o})}),this._categories=t}let e={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map(t=>t.filters).reduce((t,i)=>t.concat(i))};this._categories.unshift(e),this._categoriesById.all=e,this._categories.forEach(t=>{this._categoriesById[t.identifier]=t}),e.filters.forEach(t=>{this._filtersByIdentifier[t.identifier]=t})}getFiltersForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown filter category '${e}'`);return this._categoriesById[e].filters}getItemsByCategory(e){return this.getFiltersForCategory(e)}getFilterByIdentifier(e){return this._filtersByIdentifier[e]}getCategories(){return this._categories}getCategoryByIdentifier(e){return this._categoriesById[e]}},Kd=of;ce(Kd,"CATEGORY_ITEMS_PROPERTY","filters")});var zy,Xle=m(()=>{ua();zy=class extends qe{};zy.prototype.availableOptions={fontFamily:{type:b.STRING,required:!0},variations:{type:b.ARRAY,required:!0}}});var oVe,Xd,PP=m(()=>{ua();oVe={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},Xd=class extends qe{getLabel(){let e=oVe[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic";break}return e}};Xd.prototype.availableOptions={identifier:{type:b.STRING,required:!0},fontFamily:{type:b.STRING,required:!0},fontWeight:{type:b.ALL,default:400},fontStyle:{type:b.STRING,default:"normal"},textMetrics:{type:b.OBJECT,default:null},provider:{type:b.STRING,available:["google","file"]},filePath:{type:b.STRING},default:{type:b.BOOLEAN,default:!1},font:{type:b.OBJECT}}});var fi,gu=m(()=>{Mt();Xle();PP();ts();NO();fi=class{constructor(e,t){this._ui=e,this._options=t,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}_initFonts(){let{fonts:e,replaceFonts:t,availableVariations:i,isTextDesign:o}=this._options,n=!0;n=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed(),e&&n&&e.forEach(({variations:l},c)=>{l&&l.forEach((u,d)=>{if(Xa[u.identifier]){let p=wc(u.identifier,!0);e[c].variations[d].identifier=p;let{fontFamily:h}=qt.DEFAULTS.FONTS.find(f=>f.variations.some(_=>_.identifier===p));e[c].fontFamily=h}})});let s=o?qt.DEFAULTS.TEXT_DESIGN_FONTS:qt.DEFAULTS.FONTS;n&&(t?s=e:s=s.concat(e||[]));let a;s=s.map(l=>{let{fontFamily:c}=l,{variations:u}=l;if(n&&i&&(u=u.filter(p=>i.indexOf(p.identifier)!==-1)),u.length===0)return null;let d=new zy({fontFamily:c});return u=u.map(p=>{let h=new Xd(p);return h.setFontFamily(c),h.setFont(d),p.default&&!a&&(a=h),h.getTextMetrics()==null&&me.warn(`Missing font metrics for ${h.getIdentifier()}. The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.`),this._variationsByIdentifier[h.getIdentifier()]=h,h}),d.setVariations(u),this._fontsByFontFamily[c]=d,d}).filter(l=>l),a||([a]=s[0].getVariations()),this._defaultVariation=a,this._fonts=s}getFonts(){return this._fonts}getFontByFontFamily(e){return this._fontsByFontFamily[e]}getVariationByIdentifier(e){return this._variationsByIdentifier[wc(e)]}getVariationsByIdentifier(){return T({},this._variationsByIdentifier)}getDefaultVariation(){return this._defaultVariation}}});var kn,nf=m(()=>{Mt();kn=class{constructor(e,t={}){this._ui=e,this._options=t,this._defaultLayouts=Se.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=Se.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}_init(){let{availableLayouts:e}=this._options,t=T(T({},this._defaultLayouts),this._legacyLayouts);this._layouts=Object.keys(t).map(i=>({identifier:t[i].identifier,layout:t[i]})),e&&(e.push(...Object.values(this._legacyLayouts).map(i=>i.identifier)),this._layouts=this._layouts.filter(i=>e.indexOf(i.identifier)>=0))}getLayoutByIdentifier(e){let t=At.Array.find(this._layouts,i=>i.identifier===e);return t&&t.layout}getLayouts(){return[...this._layouts]}getDefaultLayout(){return this.getLayouts()[0]}}});var Yd,MP=m(()=>{Mt();Yd=class{static downloadDataURL(e,t="photoeditorsdk-export"){let i=this.createBlobURLFromDataURL(e),o=this.getExtensionFromDataURL(e),n=document.createElement("a");n.download=`${t}.${o}`,n.href=i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}static downloadMSBlob(e,t="photoeditorsdk-export"){navigator.msSaveBlob&&navigator.msSaveBlob(e,`${t}.png`)}static getExtensionFromDataURL(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}static createBlobURLFromDataURL(e){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array)return e;let t=RP.decode(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),n=new Uint8Array(o);for(let a=0;a<t.length;a++)n[a]=t[a];let s=new window.Blob([o],{type:i});return window.URL.createObjectURL(s)}}});var Y1,Yle=m(()=>{Mt();MP();Y1=class{constructor(e,t,i){this._sdk=e,this._options=t,this._download=i}export(){let e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then(t=>(this._download&&this._downloadData(e,t),t))}_downloadData(e,t){switch(e){case fu.DATAURL:Yd.downloadDataURL(t,this._options.fileBasename);break;case fu.MSBLOB:Yd.downloadMSBlob(t,this._options.fileBasename);break}}_getRenderType(){let e=this._options;return e.type!==fu.IMAGE||!this._download?e.type:Mi.supportsMSBlob()?fu.MSBLOB:fu.DATAURL}}});var J1,Jle=m(()=>{Mt();J1=class{constructor(e,t,i){this._editor=e,this._sdk=t,this._mediator=i,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}exists(e){return!!this._map[e]}add(e){let{identifier:t}=e.constructor;e.on("update",()=>{this._mediator.emit(qt.EVENTS.OPERATION_UPDATED,e)});let i=this._preferredOrder.indexOf(t);if(i===-1)throw new Error(`EditorOperations#add: \`${t}\` does not appear in \`operationsOrder\``);this._stack.set(i,e),this._map[t]=e,this._mediator.emit(qt.EVENTS.OPERATION_CREATED,e)}remove(e,t=!0){let i=typeof e=="object"?e.constructor.identifier:e,o=this._stack.getStack();e=this.get(i),delete this._map[i];let n=o.map(s=>s.constructor.identifier).indexOf(i);if(n!==-1){this._stack.removeAt(n);for(let s=n+1;s<o.length;s++){let a=o[s];!a||a.setDirty(!0)}t&&this._mediator.emit(qt.EVENTS.OPERATION_REMOVED,e)}}get(e){return this._map[e]}getOrCreate(e,t={}){if(this._map[e]){let n=this._map[e];return n.set(t,!1),n}let i=this._available[e],o=new i(this._sdk,t);return this.add(o),o}getStack(){return this._stack}reset(){this._map={}}_fixStack(){let e=this._stack.getStack().slice();this._stack.clear(),e.forEach(t=>{this.add(t)})}}});var Z1,Zle=m(()=>{Mt();Z1=class{constructor(e,t,i){this._image=e,this._maxPixels=t,this._maxDimensions=i}needsResize(){let e=new tt(this._image.width,this._image.height),i=e.x*e.y>this._maxPixels,o=this._maxDimensions!==null&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return i||o}resize(){let e=null,t=null,i=this._maxDimensions;return new Promise((o,n)=>{window.setTimeout(()=>{let a=new tt(this._image.width,this._image.height).clone();if(a.x*a.y>this._maxPixels&&(a.copy(this._getDimensionsByMaxPixels()),e="maxMegaPixels"),i!==null&&(a.x>i||a.y>i)){let l=Math.min(i/a.x,i/a.y);a.multiply(l),e="maxDimensions"}a.floor(),t=this._createResizedImageCanvas(a),o({canvas:t,dimensions:a,reason:e})},1e3)})}_createResizedImageCanvas(e,t=e){let i=this._image,o=document.createElement("canvas");o.width=e.x,o.height=e.y;let n=e.clone().subtract(t).divide(2);return o.getContext("2d").drawImage(i,0,0,i.width,i.height,n.x,n.y,t.x,t.y),o}_getDimensionsByMaxPixels(){let e=this._image,t=this._maxPixels,i=e.width/e.height,o=e.height/e.width;return new tt(Math.sqrt(t*i),Math.sqrt(t*o)).floor()}}});var nVe,sVe,Uy,Qle=m(()=>{PP();nVe=30,sVe="abcdefghijklmnopqrstuvwxzy",Uy=class{constructor(e){this._fontVariation=e||new Xd({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}_createRuler(){this._ruler=document.createElement("div"),this._ruler.innerText=sVe,document.body.appendChild(this._ruler),this._setRulerStyle()}_setRulerStyle(){this._ruler.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      opacity: 0;
      display: inline-block;
      font: ${this._fontVariation.getFontStyle()} ${this._fontVariation.getFontWeight()} ${nVe}px ${this._fontVariation.getFontFamily()};
    `}setFontVariation(e){this._fontVariation=e,this._setRulerStyle()}getWidth(){return this._ruler?this._ruler.offsetWidth:-1}dispose(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}});var ece,aVe,lVe,Q1,tce=m(()=>{Qle();ece=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oy(),aVe=50,lVe=5e3,Q1=class{constructor(e){this._fontVariation=e,this._defaultFontRuler=new Uy,this._customFontRuler=new Uy(this._fontVariation)}observe(){let e=ece();return new Promise((t,i)=>{let o=window.setInterval(()=>{if(this._defaultFontRuler.getWidth()!==this._customFontRuler.getWidth())return window.clearInterval(o),t();if(ece()-e>=lVe){let s=new Error(`Failed to load font ${this._fontVariation.getFontFamily()}.`);return s.font=this._fontVariation,i(s)}},aVe)})}dispose(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}});var sf,BP=m(()=>{ua();tce();sf=class{constructor(e){this._ui=e,this._fonts=[],this._observers=[]}add(e){this._fonts.push(e)}load(){return this._fonts.length===0?Promise.resolve():(this._observers=[],this._fonts.forEach(e=>{this._observers.push(new Q1(e))}),K.executePromises(this._observers.map(e=>e.observe())))}dispose(){this._observers.forEach(e=>e.dispose())}}});var ew,rce=m(()=>{BP();ew=class extends sf{load(){return Promise.resolve()}}});var cVe,tw,ice=m(()=>{BP();cVe={italic:"i"},tw=class extends sf{load(){return this._fonts.length&&this._addStylesheetTag(),super.load()}_addStylesheetTag(){let e=this._getFamiliesString(),t=document.createElement("link");t.rel="stylesheet",t.href=`https://fonts.googleapis.com/css?family=${e}`,document.getElementsByTagName("head")[0].appendChild(t)}_getFamiliesString(){let e={};this._fonts.forEach(i=>{let o=i.getFontFamily(),n=i.getFontStyle(),s=i.getFontWeight();e[o]=e[o]||[],typeof s!="undefined"?e[o].push(`${s}${cVe[n]||""}`):e[o].push(400)});let t=[];for(let i in e){let o=e[i],n=o.length?`:${o.join(",")}`:"",s=i.replace(" ","+")+n;t.push(s)}return t.join("|")}}});var bu,rw=m(()=>{rce();ice();bu=class{constructor(e,t){this._ui=e,this._fonts=t,this._loadedFonts=[]}setFonts(e){this._fonts=e}needsToLoad(){for(let e=0;e<this._fonts.length;e++){let t;if(this._fonts[e].getVariations().forEach(i=>{t=t||i.getProvider()}),!!t)return!0}}fontLoaded(e){let t=e.getFontFamily();return this._loadedFonts.indexOf(t)!==-1}setFontLoaded(e){if(!this.fontLoaded(e)){let t=e.getFontFamily();this._loadedFonts.push(t)}}load(){let e=this._fonts,t={google:new tw(this._ui),file:new ew(this._ui)},i=()=>{for(let n in t)t[n].dispose()};e.filter(n=>!this.fontLoaded(n)).forEach(n=>{n.getVariations().forEach(s=>{let a=s.getProvider();if(!a)return;t[a].add(s)})});let o=[];for(let n in t)o.push(t[n].load());return Promise.all(o).then(()=>{i(),e.forEach(n=>{this.setFontLoaded(n)})}).catch(n=>{throw i(),n})}}});var iw,oce=m(()=>{Mt();iw=class{constructor(e,t){this._ui=e,this._options=t,this._brushes=[],this._brushesById={},this._addBrushes(qt.DEFAULTS.BRUSHES);let{brushes:i,replaceBrushes:o,availableBrushes:n}=this._options;this._options.brushes&&this._addBrushes(i,o),n&&(this._brushes=this._brushes.filter(s=>n.indexOf(s.identifier)!==-1))}_addBrushes(e,t){t&&(this._brushes=[],this._brushesById={}),e.forEach(i=>{this._brushes.push(i),this._brushesById[i.identifier]=i})}getBrushByIdentifier(e){return this._brushesById[e]}getBrushes(){return this._brushes}getFirstBrush(){return this._brushes[0]}}});var nce,sce,ace=m(()=>{nce=class{constructor(){this._assetsByGroupId={}}addAsset(e,t,i=!1){this._assetsByGroupId[e]?i?this._assetsByGroupId[e].unshift(t):this._assetsByGroupId[e].push(t):this._assetsByGroupId[e]=[t]}setAssets(e,t){this._assetsByGroupId[e]=t}getAssets(e){return this._assetsByGroupId[e]=this._assetsByGroupId[e]||[],this._assetsByGroupId[e]}},sce=nce});var LP,yu,ow=m(()=>{Mt();ua();ace();py();vh();LP="imgly_sticker_custom",yu=class{constructor(e,t,i){this._ui=e,this._options=t,this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new sce,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=K.createCanvas(),this.reload()}reload(){this._categoriesById={},this._categories=[],this._stickersById={};let e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(wl.DEFAULTS.STICKER_CATEGORIES);let{categories:t,replaceCategories:i}=this._options;if(e&&this._options.categories?this._addCategories(t,i):(this._updateCategoriesMap(),this._updateAllCategory()),e){let o=this._dynamicAssetsLibrary.getAssets("sticker");if(o.length>0){let n=this._createCustomStickerCategory(o);this._addCategories([n],!1,!0)}}}loadExternal(e){return new yn(e).load().then(i=>{this._addCategories(i.categories,this._options.replaceCategories)})}_addCategories(e,t=!1,i=!1){t?this._categories=e.slice(0):i?this._categories=this._mergeCategories(e,this._categories):this._categories=this._mergeCategories(this._categories,e),this._updateCategoriesMap(),this._updateAllCategory()}_mergeCategories(e,t){e=Mi.cloneCategories(e,"stickers");for(let i of t){let o=!1;for(let n of e)if(i.identifier===n.identifier){for(let s of i.stickers){let a=!1;for(let l of n.stickers)if(s.identifier===l.identifier){Object.assign(l,s),a=!0;break}a||n.stickers.push(s)}o=!0;break}o||e.push(i)}return e}_updateCategoriesMap(){this._categoriesById={},this._categories.forEach(e=>{this._categoriesById[e.identifier]=e}),this._categories.forEach(e=>{e.stickers.forEach(t=>{this._stickersById[t.identifier]=t})}),typeof this._options.availableStickers!="undefined"&&this._options.availableStickers!==null&&(this._categories.forEach(e=>{e.identifier!==LP&&(e.stickers=e.stickers.filter(t=>this._options.availableStickers.indexOf(t.identifier)!==-1))}),this._categories=this._categories.filter(e=>e.stickers.length>0)),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(e=>e.stickers).reduce((e,t)=>e.concat(t),[])},this._categoriesById.all=this._allCategory}renderStickerThumbnailFromImage(e){let t=this._customStickerCanvas,i=t.getContext("2d");i.save();let o=62,n=o/e.width,s=n*e.height;t.width=o,t.height=o,i.clearRect(0,0,e.width,e.height),i.translate(0,.5*(t.height-s)),i.scale(n,n),i.drawImage(e,0,0);let a=t.toDataURL("image/png");return i.restore(),{data:a,width:o,height:s}}addCustomStickerFromImage(e,t,i="none"){let o=y=>{let E=this._ui.getEditor().getSDK().getRenderer(),F=new tt(y.width,y.height),N=this._ui.getEditor().getMaxMegapixels()*1e6,R=E.getMaxDimensions(),B=F.x*F.y>N,se=R!==null&&(F.x>R||F.y>R);if(B){let q=y.width/y.height,ue=y.height/y.width;R=new tt(Math.sqrt(N*q),Math.sqrt(N*ue)).floor().max()}let A=F.clone();return(B||se)&&(F.x/F.y>1?(A.x=R,A.y=R/F.x*F.y):(A.x=R/F.y*F.x,A.y=R)),A},n=(y,D)=>{let E=y.x/y.y;return E>1?new tt(D,D/E):new tt(D*E,D)},s=e.src.substring(0,14)==="data:image/svg";e=this._ui.getEditor().getSDK().correctExifOrientation(e);let l=n(new tt(e.width,e.height),2048),c=s?l:o(e),u=this._customStickerCanvas,d=u.getContext("2d");d.save();let p=this.renderStickerThumbnailFromImage(e);s?(e.width>e.height?(u.width=2048,u.height=2048/e.width*e.height):(u.height=2048,u.width=2048/e.height*e.width),e.width=u.width,e.height=u.height):(u.width=c.x,u.height=c.y,d.scale(c.x/e.width,c.y/e.height)),d.drawImage(e,0,0,e.width,e.height);let h=u.toDataURL();d.restore();let f={identifier:K.generateUUID(),defaultName:t||"",tintMode:i,images:{mediaThumb:{uris:[p.data],rawData:!0,width:p.width,height:p.height},mediaBase:{uris:s?[h,e.src]:[h],rawData:!0,isSVG:s,width:c.x,height:c.y}}},_=this._dynamicAssetsLibrary;_.addAsset("sticker",f,!0);let x=_.getAssets("sticker");if(x.length===1){let y=this._createCustomStickerCategory(x);this._addCategories([y],!1,!0)}else this.getCategory(LP).stickers=x,this._updateAllCategory();this._updateCategoriesMap()}_createCustomStickerCategory(e){return{identifier:LP,defaultName:"Custom",metaData:{backgroundImage:e[e.length-1].images.mediaBase.uris[0],rawData:!0},stickers:e}}getStickersForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown sticker category '${e}'`);return this._categoriesById[e].stickers}getStickerByIdentifier(e){return this._stickersById[e]}getCategories(e=!1){return e?[this._allCategory].concat(this._categories):this._categories}getCategory(e){return this._categoriesById[e]}static getURLForSticker(e,t="base"){let{images:i}=e,o=t==="base"&&i.mediaBase||i.mediaThumb,n=o.uris||[o.uri];if(!Mi.Browser.getIEVersion()){let a=n.filter(l=>/\.svg$/i.test(l));return a.length?a[0]:n[0]}let s=n.filter(a=>!/\.svg$/i.test(a));return s.length?s[0]:n[0]}}});var lce,zP,Jd,UP=m(()=>{Mt();rw();oce();AP();gu();ow();lce=v(Ym());typeof Se.Operations.SpriteOperation!="undefined"&&(zP=Se.Operations.SpriteOperation.BrushSprite);Jd=class{constructor(e,t){this._editor=e,this._ui=this._editor.getUI(),this._data=t,this._filterManager=new Kd(this._ui,this._getOptions("filter")),this._stickerManager=new yu(this._ui,this._getOptions("sticker")),this._brushManager=new iw(this._ui,this._getOptions("brush")),this._fontManager=new fi(this._ui,this._getOptions("text"))}_getOptions(e){let{controls:t}=this._editor,i={};t&&t.get(e)&&(i=t.get(e).defaultOptions);let o=this._editor.getOptions();return At.deepDefaults({},o.editor.controlsOptions[e]||{},i)}deserialize(){return this._validateVersion().then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_validateVersion(){return this._data.version!==this.constructor.version?Promise.reject(new Error(`Invalid version ${this._data.version}, expected ${this.constructor.version}`)):Promise.resolve()}_deserializeInputImage(){return new Promise((e,t)=>{let{data:i,type:o}=this._data.inputImage;if(i&&o){let n=new window.Image;n.addEventListener("load",()=>{this._editor.setImage(n),e()}),n.src=`data:${o};base64,${i}`}else e()})}_deserializeOperations(){return de(this,null,function*(){let{operations:e}=this._data;return(0,lce.default)(e,t=>de(this,null,function*(){return this._deserializeOperation(t)}))})}_deserializeOperation(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}_deserializeCropOperation(e){let{options:t}=e,{rotation:i}=t,o=tt.fromObject(t.start),n=tt.fromObject(t.end);i>Math.PI&&(i-=Math.PI*2);let s={start:o,end:n};typeof i!="undefined"&&(s.rotation=i);let a=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(a,s),a.set(s),Promise.resolve(a)}_deserializeOrientationOperation(e){let{options:t}=e,i=this._editor.operations.getOrCreate("orientation");return i?(i.set(t),Promise.resolve(i)):Promise.resolve()}_deserializeFilterOperation(e){let{options:t}=e;return this._filterManager.getFilterByIdentifier(t.name)?this._filterManager.instantiateFilterWithIdentifier(t.name).then(i=>{let o=this._editor.operations.getOrCreate("filter");return o.set({identifier:t.name,filter:i,intensity:t.intensity}),o}):(me.warn("Deserializer",`Unknown filter \`${t.name}\``),Promise.resolve())}_deserializeAdjustmentsOperation(e){let{AdjustmentsOperation:t}=Se.Operations,{options:i}=e,o=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],n={};return o.forEach(s=>{if(typeof i[s]=="undefined")return;let{minValue:a,midValue:l,maxValue:c}=t.prototype.availableOptions[s],u=i[s];u=u<0?l+(l-a)*u:l+(c-l)*u,n[s]=u}),Promise.resolve(this._editor.operations.getOrCreate("adjustments",n))}_deserializeSpriteOperation(e){let{options:t}=e,i=this._editor.operations.getOrCreate("sprite");if(!i)return Promise.resolve();let o=t.sprites.map(n=>this._deserializeSprite(i,n)).filter(n=>n);return Promise.all(o).then(n=>(i.setSprites(n.filter(s=>s)),i))}_deserializeSprite(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(e,t)}}_deserializeSticker(e,t){let{SpriteOperation:i}=Se.Operations,{options:o}=t,n=this._stickerManager.getStickerByIdentifier(o.name),s=this._stickerManager.getURLForSticker(n);return n?new Promise((a,l)=>{let c=new window.Image;c.addEventListener("load",()=>{let u=i.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:d,flipHorizontally:p,flipVertically:h}=o,f={identifier:o.name,image:c,position:tt.fromObject(o.position),dimensions:tt.fromObject(o.dimensions),rotation:d,flipHorizontally:p,flipVertically:h,adjustments:{}};typeof o.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(_=>{typeof o.adjustments[_]!="undefined"&&(f.adjustments[_]=o.adjustments[_]+u[_].default)}),a(e.createSticker(f))}),c.crossOrigin=this._editor.getCrossOrigin(),c.src=this._editor.getUI().getAssetPath(s)}):(me.warn("Deserializer",`Unknown sticker '${o.name}'. Skipping sprite.`),Promise.resolve())}_deserializeText(e,t){let{options:i}=t,{fontSize:o,lineHeight:n,fontFamily:s,fontWeight:a,alignment:l,rotation:c,maxWidth:u,color:d,backgroundColor:p}=i,h=new bu(this._ui),f=this._fontManager.getFontByFontFamily(s);return f||(f=this._fontManager.getDefaultFont()),h.setFonts([f]),h.load().then(()=>{let _=e.createText({fontSize:o,lineHeight:n,fontFamily:s,fontWeight:a,alignment:l,rotation:c,maxWidth:u,text:i.text,color:mt.fromArray(d),backgroundColor:mt.fromArray(p),position:tt.fromObject(i.position)});return _._edited=!0,_})}_deserializeBrush(e,t){let{options:i}=t,{paths:o}=i,n=e.createBrush();return o.forEach(s=>{this._deserializeBrushPath(n,s)}),Promise.resolve(n)}_deserializeBrushPath(e,t){let{points:i}=t,o=this._createBrushForPath(t),n=e.createPath(o);n.setClosed(!0),i.forEach(s=>{n.addControlPoint(tt.fromObject(s))})}_createBrushForPath(e){let{color:t,size:i}=e,n={color:mt.fromArray(t),size:i},s=this._brushManager.getFirstBrush();if(s.prototype&&s.prototype instanceof zP){let c=s;return new c(n)}let a=T({},s);delete a.image;class l extends zP{}return l.identifier=s.identifier,new l(T(T({},a),n))}_deserializeFocusOperation(e){let{options:t}=e.options;switch(e.options.type){case"radial":{let{position:i,radius:o,gradientRadius:n,blurRadius:s}=t;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:tt.fromObject(i),radius:o,gradientRadius:n,blurRadius:s}))}case"linear":{let{start:i,end:o,size:n,gradientSize:s,blurRadius:a}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:tt.fromObject(i),end:tt.fromObject(o),size:n,gradientSize:s,blurRadius:a}))}}}_getInputDimensionsForOperation(e){let t=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(o=>{o===e&&(t=!0),!t&&(i=o.getNewDimensions(i))}),i}};Jd.version="1.0.0"});var af,Zd,NP=m(()=>{Mt();af=Math.PI*2,Zd=class{constructor(e){this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}serialize(e={}){this._options=U(T({},e),{image:!0});let t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}_serializeInputImage(e){let t=this._editor.getImage(),{width:i,height:o}=t;if(!this._options.image)return e.inputImage={width:i,height:o},Promise.resolve(e);let n=At.createCanvas();n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0);let a=n.toDataURL(FP.PNG);return e.inputImage={type:FP.PNG,data:a.replace(/^data:image\/(.*?);base64,/,""),width:i,height:o},Promise.resolve(e)}_serializeOperations(e){let t=[];return this._editor.operations.getStack().forEach(o=>{let n=this._serializeOperation(o,t);n&&t.push(n)}),e.operations=t.filter(o=>o),Promise.resolve(e)}_serializeOperation(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:me.warn(`Unable to serialize operation of type ${e.constructor.identifier}`)}}_serializeTransformOperation(e){let t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+af)%af,{type:"crop",options:t}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeFilterOperation(e){return e.getIdentifier()==="identity"?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}_serializeAdjustmentsOperation(e){let{availableOptions:t}=e,i=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],o={};return i.forEach(n=>{let s=t[n],a=e.getOption(n),{minValue:l,midValue:c,maxValue:u}=s;o[n]=a<=c?(a-l)/(c-l)-1:(a-c)/(u-c)}),{type:"adjustments",options:o}}_serializeSpriteOperation(e,t){let i=t.filter(s=>s.type==="sprite"),o,n=!0;if(i.length?(o=i.pop(),n=!1):o={type:"sprite",options:{sprites:[]}},e.getSprites().forEach(s=>{let a=null;s instanceof e.constructor.StickerSprite?a=this._serializeSticker(e,s):s instanceof e.constructor.TextSprite?a=this._serializeText(e,s):s instanceof e.constructor.BrushSprite?a=this._serializeBrush(e,s):s instanceof e.constructor.TextDesignSprite&&(a=this._serializeTextDesign&&this._serializeTextDesign(e,s)),a&&o.options.sprites.push(a)}),n)return o}_serializeSticker(e,t){let i=t.getAdjustments(),o=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);o.name=o.identifier,delete o.identifier,o.rotation=(o.rotation+af)%af;let n=i.availableOptions;return o.adjustments={brightness:i.getBrightness()-n.brightness.default,saturation:i.getSaturation()-n.saturation.default,contrast:i.getContrast()-n.contrast.default},{type:"sticker",options:o}}_serializeText(e,t){let i=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return i.rotation=(i.rotation+af)%af,{type:"text",options:i}}_serializeBrush(e,t){return{type:"brush",options:{paths:t.getPaths().map(i=>this._serializePath(i))}}}_serializePath(e){let t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map(i=>i.getPosition().toObject()),t}_serializeRadialFocusOperation(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}_serializeLinearFocusOperation(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_getInputDimensionsForOperation(e){let t=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(o=>{o===e&&(t=!0),!t&&(i=o.getNewDimensions(i))}),i}};Zd.version="1.0.0"});var cce={};Ht(cce,{default:()=>nw});var nw,uce=m(()=>{UP();NP();nw=class{constructor(e){this._editor=e}serialize(...e){return new Zd(this._editor).serialize(...e)}deserialize(e){return new Jd(this._editor,e).deserialize()}};nw.version="1.0.0"});var Qd,qP=m(()=>{Mt();UP();Qd=class extends Jd{_deserializeOperation(e){return e.type==="selective-blur"?this._deserializeSelectiveBlurOperation(e):super._deserializeOperation(e)}_deserializeCropOperation(e){let{options:t}=e,{rotation:i}=t,o=tt.fromObject(t.start),n=tt.fromObject(t.end),s=t.dimensions?tt.fromObject(t.dimensions):null;if(n.x-o.x<=0||n.y-o.y<=0)throw new Error(`A crop should not result in negative or zero dimensions - start: ${o} - end: ${n}`);i>Math.PI&&(i-=Math.PI*2);let a={start:o,end:n};typeof i!="undefined"&&(a.rotation=i);let l=this._editor.operations.getOrCreate("transform");if(!l)return Promise.resolve();if(this._editor.broadcastTransform(l,a),l.set(a),s){let c=n.clone().subtract(o),u=l.getInputDimensions(!1).multiply(c);l.setTextureScale(s.x/u.x)}return Promise.resolve(l)}};Qd.version="1.0.1"});var dce,ep,HP=m(()=>{NP();dce=Math.PI*2,ep=class extends Zd{_serializeTransformOperation(e){let t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+dce)%dce,t.textureScale!==1&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}};ep.version="1.0.1"});var pce={};Ht(pce,{default:()=>sw});var sw,mce=m(()=>{qP();HP();sw=class{constructor(e){this._editor=e}serialize(...e){return new ep(this._editor).serialize(...e)}deserialize(e){return new Qd(this._editor,e).deserialize()}};sw.version="1.0.1"});var lf,Ny,hce=m(()=>{bh();Mt();({OptionType:lf}=Se),Ny=class extends Se.Configurable{constructor(e,t={}){super(t);this._loaded=!1,this._loading=!1,this._ui=e,this._frame=Se.Utils.deepClone(this._options)}load(){if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;let{imageGroups:e}=this._frame,t=[];return["top","left","right","bottom"].forEach(i=>{if(!(i in e))return;let o=e[i];["start","mid","end"].forEach(n=>{n in o&&t.push(this._loadPart(i,n))})}),Promise.all(t).then(()=>{this._loaded=!0,this._loading=!1}).catch(i=>{this._loaded=!1,this._loading=!1})}_loadPart(e,t){let{imageGroups:i}=this._frame,o=i[e][t],n=o;return typeof o!="string"&&"image"in o&&(n=o.image),Ii.load(this._ui.getAssetPath(n)).then(s=>(typeof o!="string"?this._frame.imageGroups[e][t].image=s:this._frame.imageGroups[e][t]=s,s))}getFrame(){return this._frame}};Ny.prototype.availableOptions={identifier:{type:lf.STRING,required:!0},defaultName:{type:lf.STRING},thumbnail:{type:lf.STRING},tintable:{type:lf.BOOLEAN,default:!1},layoutMode:{type:lf.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:lf.OBJECT,required:!0}}});var aw,fce=m(()=>{Mt();aw=class{constructor(e,t){this._ui=e,this._options=t,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(wl.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=e.getEditor().getSDK()._l.areCustomAssetsAllowed();let{categories:i,replaceCategories:o}=this._options;this._customAssetsAllowed&&this._options.categories?this._addCategories(i,o):this._updateAllCategory()}_addCategories(e,t=!1){t?this._categories=e.slice(0):this._categories=Mi.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach(o=>{this._categoriesById[o.identifier]=o});let{availableFrames:i}=this._options;this._customAssetsAllowed&&i&&this._categories.forEach(o=>{o.frames=o.frames.filter(n=>i.indexOf(n.identifier)!==-1)}),this._categories.forEach(o=>{o.frames.forEach(n=>{this._framesById[n.identifier]=n})}),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(e=>e.frames).reduce((e,t)=>e.concat(t),[])},this._categoriesById.all=this._allCategory}getFramesForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown frame category '${e}'`);return this._categoriesById[e].frames}getFrameByIdentifier(e){return this._framesById[e]}getCategories(){return this._categories}getCategory(e){return this._categoriesById[e]}}});var lw,gce=m(()=>{Mt();lw=class{constructor(e,t){this._ui=e,this._options=t,this._overlays=wl.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};let i=e.getEditor().getSDK()._l.areCustomAssetsAllowed();i&&t.overlays&&(t.replaceOverlays?this._overlays=t.overlays:this._overlays=this._overlays.concat(t.overlays)),i&&t.availableOverlays&&(this._overlays=this._overlays.filter(o=>t.availableOverlays.indexOf(o.identifier)!==-1)),this._overlays.forEach(o=>{this._overlaysByIdentifier[o.identifier]=o})}getOverlays(){return this._overlays}getOverlayByIdentifier(e){return this._overlaysByIdentifier[e]}}});var Pl,cf,cw=m(()=>{Mt();({OverlayFilter:Pl}=Se.Engine.Filters),cf={[Pl.BLEND_MODES.NORMAL]:"normal",[Pl.BLEND_MODES.OVERLAY]:"overlay",[Pl.BLEND_MODES.HARD_LIGHT]:"hard light",[Pl.BLEND_MODES.SOFT_LIGHT]:"soft light",[Pl.BLEND_MODES.MULTIPLY]:"multiply",[Pl.BLEND_MODES.DARKEN]:"darken",[Pl.BLEND_MODES.LIGHTEN]:"lighten",[Pl.BLEND_MODES.SCREEN]:"screen",[Pl.BLEND_MODES.COLOR_BURN]:"color burn"}});var uVe,tp,jP=m(()=>{Mt();rw();hce();bh();fce();gce();ow();qP();cw();uVe=At.flipObject(cf),tp=class extends Qd{constructor(...e){super(...e);this._frameManager=new aw(this._ui,this._getOptions("frame"));let t=this._getOptions("overlay");t&&(this._overlayManager=new lw(this._ui,t))}_deserializeSprite(e,t){return t.type==="frame"?this._deserializeFrame(e,t):t.type==="overlay"?this._deserializeOverlay(e,t):super._deserializeSprite(e,t)}_deserializeOperation(e){return e.type==="transform"?this._deserializeTransformOperation(e):super._deserializeOperation(e)}_deserializeOrientationOperation(e){if(this._data.meta&&this._data.meta.platform!=="html5")return super._deserializeOrientationOperation(e);let{rotation:t,flipHorizontally:i,flipVertically:o}=e.options,n=t===90&&!i&&!o;return n|=t===90&&i&&o,n|=t===270&&!i&&!o,n|=t===270&&i&&o,n&&(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),super._deserializeOrientationOperation(e)}_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;let i=At.Array.find(this._data.operations,o=>o.type==="orientation");if(i){let{options:o}=i,{rotation:n,flipHorizontally:s,flipVertically:a}=o;(n===90||n===270)&&(!s&&a||s&&!a)&&(s=!s,a=!a),t.rotate(o.rotation),s&&(t.flip("horizontal"),t.setRotation(t.getRotation()*-1)),a&&(t.flip("vertical"),t.setRotation(t.getRotation()*-1))}return t})}_deserializeFrame(e,t){let{identifier:i}=t.options,o=this._frameManager.getFrameByIdentifier(i);if(!o)return me.warn("Deserializer",`Unknown frame \`${i}\`. Skipping frame.`),Promise.resolve();let n=new Ny(this._ui,o);return n.load().then(()=>{this._editor.operations.getOrCreate("frame",{frame:n.getFrame()})})}_deserializeOverlay(e,t){let{blendMode:i,intensity:o,identifier:n}=t.options,s=this._overlayManager.getOverlayByIdentifier(n);if(!s)return me.warn("Deserializer",`Unknown overlay \`${n}\`. Skipping overlay.`),Promise.resolve();let a=this._editor.getUI().getAssetPath(s.image);return Ii.load(a).then(l=>{this._editor.operations.getOrCreate("overlay",{alpha:o,identifier:n,blendMode:parseInt(uVe[i||s.blendMode],10),image:l})})}_createBrushForPath(e){let t=super._createBrushForPath(e);return typeof e.hardness!="undefined"&&t.hasOption("hardness")&&t.setHardness(e.hardness),t}_deserializeSticker(e,t){let{SpriteOperation:i}=Se.Operations,{options:o}=t,n=this._stickerManager.getStickerByIdentifier(o.identifier),s=yu.getURLForSticker(n,"base");if(!n)return me.warn("Deserializer",`Unknown sticker \`${o.identifier}\`. Skipping sprite.`),Promise.resolve();let a=e.getInputDimensions(!1);return new Promise((l,c)=>{let u=new window.Image;u.addEventListener("load",()=>{let d=i.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:p,flipHorizontally:h,flipVertically:f}=o,_={identifier:o.identifier,image:u,position:tt.fromObject(o.position),dimensions:tt.fromObject(o.dimensions).multiply(a.min()),rotation:p,flipHorizontally:h,flipVertically:f,adjustments:{}};typeof o.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(x=>{typeof o.adjustments[x]!="undefined"&&(_.adjustments[x]=o.adjustments[x]+d[x].default)}),typeof o.tintColor!="undefined"&&typeof n.tintMode!="undefined"&&(_.tintColor=mt.fromArray(o.tintColor),_.tintMode=n.tintMode),l(e.createSticker(_))}),u.crossOrigin=this._editor.getCrossOrigin(),u.src=this._editor.getUI().getAssetPath(s)})}_deserializeFilterOperation(e){let{options:t}=e;return this._filterManager.getFilterByIdentifier(t.identifier)?this._filterManager.instantiateFilterWithIdentifier(t.identifier).then(i=>{let o=this._editor.operations.getOrCreate("filter");if(!!o)return o.set({identifier:t.identifier,filter:i,intensity:t.intensity}),o}):(me.warn("Deserializer",`Unknown filter \`${t.identifier}\``),Promise.resolve())}_deserializeFocusOperation(e){let{options:t,type:i}=e.options;if(i!=="radial")return super._deserializeFocusOperation(e);let o=this._editor.getImage(),n=o.width/o.height,{start:s,end:a,gradientRadius:l,blurRadius:c}=t,u=tt.fromObject(a).subtract(tt.fromObject(s)).multiply(n,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:tt.fromObject(s),radius:u,gradientRadius:l,blurRadius:c}))}_deserializeText(e,t){let{options:i}=t,{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:c,color:u,backgroundColor:d}=i,p=new bu(this._ui),h=this._fontManager.getVariationByIdentifier(s);return h?p.setFonts([h.getFont()]):h=this._fontManager.getDefaultFont(),p.load().then(()=>{let f=e.getInputDimensions(!1),_=c*f.min()/f.x,x=e.createText({fontSize:o,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:a,rotation:l,maxWidth:_,text:i.text,color:mt.fromArray(u),backgroundColor:mt.fromArray(d),position:tt.fromObject(i.position)});return x._edited=!0,x})}};tp.version="2.0.0"});var rp,WP=m(()=>{HP();cw();rp=class extends ep{_serializeSticker(e,t){let i=e.getInputDimensions(!1),o=super._serializeSticker(e,t);return t.getTintMode()!=="none"&&(o.options.tintColor=t.serializeOption("tintColor",!0)),o.options.dimensions=t.getDimensions().clone().divide(i.min()).toObject(),o.options.identifier=o.options.name,delete o.options.name,o}_serializePath(e){let t=super._serializePath(e),i=e.getBrush();return i.hasOption("hardness")&&(t.hardness=i.getOption("hardness")),t}_serializeOperation(e,t){return e.constructor.identifier==="frame"?(this._serializeFrameOperation(e,t),null):e.constructor.identifier==="overlay"?(this._serializeOverlayOperation(e,t),null):super._serializeOperation(e,t)}_serializeFrameOperation(e,t){let i=t.filter(n=>n.type==="sprite"),o;i.length?o=i.pop():(o={type:"sprite",options:{sprites:[]}},t.push(o)),o.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}_serializeOverlayOperation(e,t){if(!e.getIdentifier())return;let i=t.filter(n=>n.type==="sprite"),o;i.length?o=i.pop():(o={type:"sprite",options:{sprites:[]}},t.push(o)),o.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:cf[e.getBlendMode()]}})}_getFrameOptions(e){return{identifier:e.getFrame().identifier}}_serializeOrientationOperation(e){let t=super._serializeOrientationOperation(e);return(t.options.rotation===90||t.options.rotation===270)&&(t.options.flipHorizontally=!t.options.flipHorizontally,t.options.flipVertically=!t.options.flipVertically),t}_serializeTransformOperation(e){let{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();let o=t.get("orientation");e.rotate(-o.getRotation()),o.getFlipVertically()&&(e.flip("vertical"),e.setRotation(e.getRotation()*-1)),o.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(e.getRotation()*-1))}let i=super._serializeTransformOperation(e);return i.type="transform",i}_serializeText(e,t){let i=super._serializeText(e,t),o=e.getInputDimensions(!1);return i.options.fontIdentifier=t.getFontIdentifier(),i.options.maxWidth=i.options.maxWidth*o.x/o.min(),delete i.options.fontFamily,i}_serializeFilterOperation(e){let t=super._serializeFilterOperation(e);return t?(t.options.identifier=t.options.name,delete t.options.name,t):null}_serializeRadialFocusOperation(e){let t=super._serializeRadialFocusOperation(e),i=t.options.options;return i.start=i.position,delete i.position,i.end={x:i.start.x+i.radius,y:i.start.y},delete i.radius,t}};rp.version="2.0.0"});var bce={};Ht(bce,{default:()=>uw});var uw,yce=m(()=>{jP();WP();uw=class{constructor(e){this._editor=e}serialize(...e){return new rp(this._editor).serialize(...e)}deserialize(e){return new tp(this._editor,e).deserialize()}};uw.version="2.0.0"});var GP,ip,VP=m(()=>{Mt();bh();gu();ow();nf();jP();typeof Se.Operations.SpriteOperation!="undefined"&&(GP=Se.Operations.SpriteOperation.BrushSprite.Brush);ip=class extends tp{_deserializeSticker(e,t){let{SpriteOperation:i}=Se.Operations,{options:o}=t,n=this._stickerManager.getStickerByIdentifier(o.identifier);if(!n)return me.warn("Deserializer",`Unknown sticker \`${o.identifier}\`. Skipping sprite.`),Promise.resolve();let{mediaBase:s}=n.images,a=yu.getURLForSticker(n,"base"),l=s.rawData?s.uris[0]:this._editor.getUI().getAssetPath(a),c=e.getInputDimensions(!1);return Ii.load(l).then(u=>{let d=i.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:p,flipHorizontally:h,flipVertically:f}=o,_={identifier:o.identifier,image:u,position:tt.fromObject(o.position),dimensions:tt.fromObject(o.dimensions).multiply(c.min()),rotation:p||0,flipHorizontally:h,flipVertically:f,resizeMode:n.resizeMode||"keepAspect",adjustments:{}};return typeof o.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(x=>{typeof o.adjustments[x]!="undefined"&&(_.adjustments[x]=o.adjustments[x]+d[x].default)}),typeof o.tintMode!="undefined"&&typeof o.tintColor!="undefined"?(_.tintColor=mt.fromArray(o.tintColor.rgba),_.tintMode=o.tintMode):typeof o.tintColor!="undefined"&&typeof n.tintMode!="undefined"&&(_.tintColor=mt.fromArray(o.tintColor.rgba),_.tintMode=n.tintMode),typeof o.alpha!="undefined"&&(_.alpha=o.alpha),e.createSticker(_)})}_deserializeTransformOperation(e){return super._deserializeTransformOperation(e).then(t=>{if(!!t)return t._ratio=null,t})}_deserializeInputImage(){let{data:e,type:t,uri:i}=this._data.image;return e&&t&&(i=`data:${t};base64,${e}`),i?Ii.load(i).then(o=>{this._editor.setImage(o)}):Promise.resolve()}_deserializeAdjustmentsOperation(e){let{AdjustmentsOperation:t}=Se.Operations;return super._deserializeAdjustmentsOperation(e).then(i=>{if(!i)return null;let{options:o}=e,n=["gamma","whites","blacks","temperature"],s={};return n.forEach(a=>{if(typeof o[a]=="undefined")return;let{minValue:l,midValue:c,maxValue:u}=t.prototype.availableOptions[a],d=o[a];d=d<0?c+(c-l)*d:c+(u-c)*d,s[a]=d}),i.set(s),i})}_deserializeFocusOperation(e){let{options:t}=e.options;switch(e.options.type){case"radial":return super._deserializeFocusOperation(e);case"linear":{let{start:i,end:o,blurRadius:n}=t;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:tt.fromObject(i),controlPoint2:tt.fromObject(o),blurRadius:n}))}case"mirrored":{let{start:i,end:o,size:n,gradientSize:s,blurRadius:a}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:tt.fromObject(i),end:tt.fromObject(o),size:n,gradientSize:s,blurRadius:a}))}case"gaussian":{let{blurRadius:i}=t;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:i}))}}}_deserializeText(e,t){let{options:i}=t,{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:c,color:u,backgroundColor:d}=i,p=this._ui.getFontLoader(),h=this._fontManager.getVariationByIdentifier(s);return h?p.setFonts([h.getFont()]):h=this._fontManager.getDefaultVariation(),p.load().then(()=>{let f=e.getInputDimensions(!1),_=c*f.min()/f.x,x=e.createText({fontSize:o,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:l,maxWidth:_,text:i.text,color:mt.fromArray(u.rgba),backgroundColor:mt.fromArray(d.rgba),position:tt.fromObject(i.position)});return x._edited=!0,x})}_createBrushForPath(e){let{identifier:t,color:i,size:o,hardness:n}=e.brush,a={color:mt.fromArray(i.rgba),size:o};typeof n!="undefined"&&(a.hardness=n);let l=this._brushManager.getBrushByIdentifier(t);if(l||(l=this._brushManager.getFirstBrush()),l.prototype&&l.prototype instanceof GP){let d=l;return new d(a)}let c=T({},l);delete c.image;class u extends GP{}return u.identifier=l.identifier,new u(T(T({},c),a))}_deserializeFrame(e,t){return super._deserializeFrame(e,t).then(()=>{let i=this._editor.operations.get("frame"),{size:o,alpha:n,tintColor:s}=t.options,a={};typeof o!="undefined"&&(a.scale=o),typeof n!="undefined"&&(a.alpha=n),typeof s!="undefined"&&(a.tintColor=mt.fromArray(s.rgba)),i.set(a)})}_deserializeTextDesign(e,t){let{options:i}=t,{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:d,inverted:p}=i,{identifier:h}=i;h===Se.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?h=Se.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:h===Se.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(h=Se.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);let f=new kn(this._ui,this._getOptions("textdesign")),_=new fi(this._ui,{fonts:qt.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:x}=e.constructor.TextDesignSprite,y=this._ui.getFontLoader(),D=f.getLayoutByIdentifier(h),E=new D;return y.setFonts(_.getFonts()),x.setFonts(T(T({},x.getFonts()),_.getVariationsByIdentifier())),y.load().then(()=>{let F=E.getImagePaths().map(N=>({path:N,fullPath:this._ui.getAssetPath(N),image:null}));return x.loadImages(F).then(()=>(E.onImagesLoaded(),e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:mt.fromArray(c.rgba),width:u,seed:d,inverted:p,layout:E})))})}};ip.version="3.0.0"});var op,$P=m(()=>{ua();op=class extends qe{};op.prototype.availableOptions={identifier:{type:b.STRING,required:!0},defaultName:{type:b.STRING,required:!0},ratio:{type:b.ALL,required:!1,default:null},selected:{type:b.BOOLEAN,required:!1},dimensions:{type:b.VECTOR2,required:!1},lockDimensions:{type:b.BOOLEAN,required:!1,default:null},forceDimensions:{type:b.BOOLEAN,required:!1,default:null}}});var np,KP=m(()=>{Mt();$P();WP();np=class extends rp{serialize(e={}){return super.serialize(e).then(t=>(t.meta={platform:"html5",version:this._editor.getSDK().version,createdAt:At.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t))}_serializeSticker(e,t){let i=super._serializeSticker(e,t);return i.options.alpha=t.getAlpha(),i.options.tintColor&&(i.options.tintColor={rgba:i.options.tintColor}),i}_serializeText(e,t){let i=super._serializeText(e,t);return i.options.color={rgba:i.options.color},i.options.backgroundColor={rgba:i.options.backgroundColor},i.options.flipHorizontally=!1,i.options.flipVertically=!1,delete i.options.fontWeight,i}_serializePath(e){let t=super._serializePath(e);delete t.hardness,delete t.size,delete t.color;let i=e.getBrush();t.brush=i.serializeOptions(["identifier","size","color"],!0),typeof t.brush.identifier=="undefined"&&delete t.brush.identifier,t.brush.color={rgba:t.brush.color};let o=i.getOption("hardness");return o!=="undefined"&&(t.brush.hardness=o),t}_serializeFrameOperation(e,t){super._serializeFrameOperation(e,t);let i=t.filter(n=>n.type==="sprite"),o;if(i.length){o=i.pop();let n=o.options.sprites.filter(l=>l.type==="frame")[0];e.getTintColor().equals(new mt(1,1,1,0))||(n.options.tintColor={rgba:e.serializeOption("tintColor",!0)});let a=e.serializeOptions(["scale","alpha"],!0);n.options=T(T({},n.options),a),n.options.size=n.options.scale,delete n.options.scale}}_serializeTransformOperation(e){let t=super._serializeTransformOperation(e);if(e._ratio){let i;e._ratio instanceof op?i=e._ratio.getIdentifier():i=e._ratio.identifier,t.options.meta={identifier:i}}return delete t.options.scale,t}_serializeAdjustmentsOperation(e){let t=super._serializeAdjustmentsOperation(e),i=["gamma","whites","blacks","temperature"],{availableOptions:o}=e,n={};return i.forEach(s=>{let a=o[s],l=e.getOption(s),{minValue:c,midValue:u,maxValue:d}=a;n[s]=l<=u?(l-c)/(u-c)-1:(l-u)/(d-u)}),t.options=T(T({},t.options),n),t}_serializeOperation(e,t){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return super._serializeOperation(e,t)}}_serializeMirroredFocusOperation(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_serializeLinearFocusOperation(e){let t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}_serializeBlurOperation(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}};np.version="3.0.0"});var _ce={};Ht(_ce,{default:()=>dw});var dw,vce=m(()=>{VP();KP();dw=class{constructor(e){this._editor=e}serialize(...e){return new np(this._editor).serialize(...e)}deserialize(e){return new ip(this._editor,e).deserialize()}};dw.version="3.0.0"});var sp,XP=m(()=>{Mt();gu();nf();VP();sp=class extends ip{_deserializeTextDesign(e,t){let{options:i}=t,{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:d,inverted:p}=i,{identifier:h}=i;h===Se.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?h=Se.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:h===Se.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(h=Se.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);let f=new kn(this._ui,this._getOptions("textdesign")),_=new fi(this._ui,{fonts:qt.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:x}=e.constructor.TextDesignSprite,y=this._ui.getFontLoader(),D=f.getLayoutByIdentifier(h),E=new D;return y.setFonts(_.getFonts()),x.setFonts(T(T({},x.getFonts()),_.getVariationsByIdentifier())),y.load().then(()=>{let F=E.getImagePaths().map(N=>({path:N,fullPath:this._ui.getAssetPath(N),image:null}));return x.loadImages(F).then(()=>(E.onImagesLoaded(),e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:mt.fromArray(c.rgba),width:u,seed:d,inverted:p,layout:E})))})}};sp.version="3.1.0"});var ap,YP=m(()=>{Mt();KP();ap=class extends np{_serializeTextDesign(e,t){let i=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);i.color={rgba:i.color};let o=t.getLayout();return o&&(i.identifier=o.constructor.identifier),{type:"textdesign",options:i}}};ap.version="3.1.0"});var xce={};Ht(xce,{default:()=>pw});var pw,Cce=m(()=>{XP();YP();pw=class{constructor(e){this._editor=e}serialize(...e){return new ap(this._editor).serialize(...e)}deserialize(e){return new sp(this._editor,e).deserialize()}};pw.version="3.1.0"});var lp,JP=m(()=>{Mt();gu();nf();XP();lp=class extends sp{_deserializeTextDesign(e,t){let{options:i}=t,{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:d,inverted:p}=i,{identifier:h}=i;h===Se.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?h=Se.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:h===Se.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(h=Se.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);let f="padding"in i?i.padding/u:-1,_=new kn(this._ui,this._getOptions("textdesign")),x=new fi(this._ui,{fonts:qt.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:y}=e.constructor.TextDesignSprite,D=this._ui.getFontLoader(),E=_.getLayoutByIdentifier(h),F=new E;return D.setFonts(x.getFonts()),y.setFonts(T(T({},y.getFonts()),x.getVariationsByIdentifier())),D.load().then(()=>{let N=F.getImagePaths().map(R=>({path:R,fullPath:this._ui.getAssetPath(R),image:null}));return y.loadImages(N).then(()=>(F.onImagesLoaded(),e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:mt.fromArray(c.rgba),width:u,seed:d,inverted:p,layout:F,padding:f})))})}};lp.version="3.2.0"});var cp,ZP=m(()=>{YP();cp=class extends ap{_serializeTextDesign(e,t){let i=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);i.color={rgba:i.color};let o=t.getLayout();return o&&(i.identifier=o.constructor.identifier),i.padding*=i.width,{type:"textdesign",options:i}}};cp.version="3.2.0"});var Sce={};Ht(Sce,{default:()=>mw});var mw,wce=m(()=>{JP();ZP();mw=class{constructor(e){this._editor=e}serialize(...e){return new cp(this._editor).serialize(...e)}deserialize(e){return new lp(this._editor,e).deserialize()}};mw.version="3.2.0"});var up,QP=m(()=>{JP();up=class extends lp{_deserializeOperation(e){return super._deserializeOperation(e)}_deserializeOrientationOperation(e){let{options:t}=e,i=this._editor.operations.getOrCreate("orientation");return i?(i.set(t),Promise.resolve(i)):Promise.resolve()}};up.version="3.4.0"});var dp,eM=m(()=>{cw();ZP();dp=class extends cp{_serializeOperation(e,t){switch(e.constructor.identifier){case"artfilter":return this._serializeStyle(e);default:return super._serializeOperation(e,t)}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeStyle(e){let{identifier:t,intensity:i,blendMode:o}=e.getOptions(),{tileEdgeLength:n,overlappingFactor:s}=e.getStyleTransferModel().getOptions();return{type:"artFilter",options:{identifier:t,intensity:i,blendMode:cf[o],tileEdgeLength:n,overlappingFactor:s}}}};dp.version="3.4.0"});var Tce={};Ht(Tce,{default:()=>hw});var hw,kce=m(()=>{QP();eM();hw=class{constructor(e){this._editor=e}serialize(...e){return new dp(this._editor).serialize(...e)}deserialize(e){return new up(this._editor,e).deserialize()}};hw.version="3.4.0"});var pp,tM=m(()=>{Mt();gu();nf();QP();pp=class extends up{_deserializeTextDesign(e,t){let{options:i}=t,{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:d,inverted:p,identifier:h}=i,f="padding"in i?i.padding/u:-1,_=new kn(this._ui,this._getOptions("textdesign")),x=new fi(this._ui,{fonts:qt.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:y}=e.constructor.TextDesignSprite,D=this._ui.getFontLoader(),E=_.getLayoutByIdentifier(h),F=new E;return D.setFonts(x.getFonts()),y.setFonts(T(T({},y.getFonts()),x.getVariationsByIdentifier())),D.load().then(()=>{let N=F.getImagePaths().map(R=>({path:R,fullPath:this._ui.getAssetPath(R),image:null}));return y.loadImages(N).then(()=>(F.onImagesLoaded(),e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:mt.fromArray(c.rgba),width:u,seed:d,inverted:p,layout:F,padding:f})))})}};pp.version="3.5.0"});var mp,rM=m(()=>{eM();mp=class extends dp{};mp.version="3.5.0"});var Ece={};Ht(Ece,{default:()=>fw});var fw,Ice=m(()=>{tM();rM();fw=class{constructor(e){this._editor=e}serialize(...e){return new mp(this._editor).serialize(...e)}deserialize(e){return new pp(this._editor,e).deserialize()}};fw.version="3.5.0"});var hp,iM=m(()=>{Mt();tM();hp=class extends pp{_deserializeAdjustmentsOperation(e){let{AdjustmentsOperation:t}=Se.Operations;return super._deserializeAdjustmentsOperation(e).then(i=>{if(!i)return null;let{options:o}=e,n="sharpness",s={};if(typeof o[n]=="undefined")return;let{minValue:a,midValue:l,maxValue:c}=t.prototype.availableOptions[n],u=o[n];return u=u<0?l+(l-a)*u:l+(c-l)*u,s[n]=u,i.set(s),i})}};hp.version="3.6.0"});var fp,oM=m(()=>{rM();fp=class extends mp{_serializeAdjustmentsOperation(e){let t=super._serializeAdjustmentsOperation(e),i="sharpness",{availableOptions:o}=e,n={},s=o[i],a=e.getOption(i),{minValue:l,midValue:c,maxValue:u}=s;return n[i]=a<=c?(a-l)/(c-l)-1:(a-c)/(u-c),t.options=T(T({},t.options),n),t}};fp.version="3.6.0"});var Dce={};Ht(Dce,{default:()=>gw});var gw,Oce=m(()=>{iM();oM();gw=class{constructor(e){this._editor=e}serialize(...e){return new fp(this._editor).serialize(...e)}deserialize(e){return new hp(this._editor,e).deserialize()}};gw.version="3.6.0"});var gp,nM=m(()=>{ua();iM();gp=class extends hp{deserialize(){return this._validateVersion().then(()=>this._deserializeAssetLibrary()).then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_deserializeAssetLibrary(){return new Promise((e,t)=>{let i=this._data;if(!i.assetLibrary){e();return}let{assets:o}=i.assetLibrary,n=[];for(let s in o)n.push(this._deserializeCustomAssets(s,o[s]));return Promise.all(n).then(()=>{e()}).catch(s=>{console.error(s),t(s)})})}_deserializeCustomAssets(e,t){switch(e){case"stickers":return this._deserializeCustomStickerAssets(t);default:return Promise.reject(new Error(`Unknown asset type: ${e}`))}}_deserializeCustomStickerAssets(e){let t="none",i=this._editor.getOptions().editor;i&&i.controlsOptions&&i.controlsOptions.sticker&&(t=i.controlsOptions.sticker.customStickerTintMode||"none");let o=e.map(n=>new Promise((s,a)=>{let{identifier:l,raster:c}=n,u=n.svg!==void 0,d=`data:${c.type};base64,${c.data}`,p=new oo;p.onload=()=>{p=this._editor.getSDK().correctExifOrientation(p),p.toDataURL&&(d=p.toDataURL());let f={data:"",width:1,height:1};f=this._stickerManager.renderStickerThumbnailFromImage(p);let _={identifier:l,defaultName:n.name||"",tintMode:t,images:{mediaBase:{uris:[d],rawData:!0,isSVG:u,width:p.width,height:p.height},mediaThumb:{uris:[f.data],rawData:!0,width:f.width,height:f.height}}};if(u){let x=`data:image/svg+xml;base64,${n.svg.data}`;_.images.mediaBase.uris.push(x)}s(_)},p.onerror=()=>{a(new Error(`Invalid base64 data: ${d}`))},p.src=d}));return Promise.all(o).then(n=>{this._editor.getDynamicAssetsLibrary().setAssets("sticker",n),this._stickerManager.reload()})}};gp.version="3.7.0"});var bp,sM=m(()=>{oM();bp=class extends fp{serialize(e={}){return super.serialize(e).then(t=>this._serializeAssetLibrary(t).then(i=>i))}_serializeAssetLibrary(e){if(!this._editor.getDynamicAssetsLibrary)return Promise.resolve(e);let t=this._editor.getDynamicAssetsLibrary(),i=this._serializeCustomStickerAssets(e,t);return i.length===0||(e.assetLibrary={assets:{stickers:i}}),Promise.resolve(e)}_serializeCustomStickerAssets(e,t){let i=t.getAssets("sticker");if(i.length===0)return[];let o=e.operations.filter(a=>a.type==="sprite").flatMap(a=>a.options.sprites).filter(a=>a.type==="sticker").map(a=>a.options.identifier),n={};return o.forEach(a=>{n[a]=!0}),i.filter(a=>n[a.identifier]).map(a=>{let{identifier:l,defaultName:c,images:u}=a,d=u.mediaBase.uris[0],{isSVG:p}=u.mediaBase,f=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(d),_=f[1],x=f[3],y={identifier:l,name:c,raster:{type:_,data:x}};return c&&(y.name=c),p&&(y.svg={data:u.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),y})}};bp.version="3.7.0"});var Rce={};Ht(Rce,{default:()=>bw});var bw,Fce=m(()=>{nM();sM();bw=class{constructor(e){this._editor=e}serialize(...e){return new bp(this._editor).serialize(...e)}deserialize(e){return new gp(this._editor,e).deserialize()}};bw.version="3.7.0"});var yp,aM=m(()=>{nM();yp=class extends gp{};yp.version="3.8.0"});var _p,lM=m(()=>{sM();_p=class extends bp{_serializeSticker(e,t){let i=super._serializeSticker(e,t);return i.options.tintMode=t.getTintMode(),i}};_p.version="3.8.0"});var Ace={};Ht(Ace,{default:()=>yw});var yw,Pce=m(()=>{aM();lM();yw=class{constructor(e){this._editor=e}serialize(...e){return new _p(this._editor).serialize(...e)}deserialize(e){return new yp(this._editor,e).deserialize()}};yw.version="3.8.0"});var qy,Mce=m(()=>{Mt();aM();qy=class extends yp{_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;let i=At.Array.find(this._data.operations,o=>o.type==="orientation");if(i){let{options:o}=i;t.rotate(o.rotation),o.flipHorizontally&&(t.flip("horizontal"),t.setRotation(t.getRotation()*-1)),o.flipVertically&&(t.flip("vertical"),t.setRotation(t.getRotation()*-1))}return t._ratio=null,t})}_deserializeText(e,t){let{options:i}=t,{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:c,color:u,backgroundColor:d}=i,p=this._ui.getFontLoader(),h=this._fontManager.getVariationByIdentifier(s);return h?p.setFonts([h.getFont()]):h=this._fontManager.getDefaultVariation(),p.load().then(()=>{let f=e.getInputDimensions(!1),_=f.min(),x=f.x,y=f.y,D=c*_/x,E=o*_/y,F=e.createText({fontSize:E,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:l,maxWidth:D,text:i.text,color:mt.fromArray(u.rgba),backgroundColor:mt.fromArray(d.rgba),position:tt.fromObject(i.position)});return F._edited=!0,F})}};qy.version="3.9.0"});var Bce,Hy,Lce=m(()=>{$P();lM();Bce=Math.PI*2,Hy=class extends _p{_serializeTransformOperation(e){let{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();let n=t.get("orientation");n.getFlipVertically()&&(e.flip("vertical"),e.setRotation(e.getRotation()*-1)),n.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(e.getRotation()*-1)),e.rotate(-n.getRotation())}let i=e.serializeOptions(["start","end","rotation","textureScale"],!0);i.rotation=(i.rotation+Bce)%Bce,i.textureScale!==1&&(i.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete i.textureScale;let o={type:"transform",options:i};if(e._ratio){let n;e._ratio instanceof op?n=e._ratio.getIdentifier():n=e._ratio.identifier,o.options.meta={identifier:n}}return delete o.options.scale,o}_serializeText(e,t){let i=e.getInputDimensions(!1),o=super._serializeText(e,t);return o.options.fontSize=o.options.fontSize*i.y/i.min(),o}};Hy.version="3.9.0"});var zce={};Ht(zce,{default:()=>_w});var _w,Uce=m(()=>{Mce();Lce();_w=class{constructor(e){this._editor=e}serialize(...e){return new Hy(this._editor).serialize(...e)}deserialize(e){return new qy(this._editor,e).deserialize()}};_w.version="3.9.0"});var Nce,qce,Hce=m(()=>{MP();Yle();gu();Mt();Jle();Zle();Nce=class extends Ly{constructor(e,t,i,o=!1){super();this._ui=e,this._options=t,this._mediator=i,this._shallow=o,o||(this._initSDK(),this.operations=new J1(this,this._sdk,this._mediator))}_initFonts(){let e=At.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new fi(this._ui,e);let t=this._fontManager.getFonts(),i=this._ui.getFontLoader();i.setFonts(t),i.load()}setImage(e=this._options.editor.image,t=!0){t&&this.reset();let i=null;i=this._sdk.parseExif(e),this._setImage(e,i)}_initSDK(){let{logLevel:e,displayWelcomeMessage:t,debug:i,license:o,crossOrigin:n,watermark:s}=this._options,{smoothDownscaling:a,smoothUpscaling:l,preferredRenderer:c,pixelRatio:u,transparent:d,clearColor:p}=this._options.editor,h;Array.isArray(p)?h=mt.fromArray(p):typeof p=="string"?h=mt.fromHex(p):p instanceof mt&&(h=p.clone());let f={logLevel:e,debug:i,displayWelcomeMessage:t,pixelRatio:u,smoothDownscaling:a,smoothUpscaling:l,transparent:d,crossOrigin:n,clearColor:h,license:o,watermark:s};this._sdk=new Se(c,f)}getMaxMegapixels(){let{maxMegaPixels:e}=this._options.editor;return e}getCrossOrigin(){return At.getCrossOriginValue(this._options.crossOrigin||"anonymous")}getOutputDimensions(e=!1){return this._sdk.getOutputDimensions(e)}getOutputTextureDimensions(e=!1){return this._sdk.getOutputTextureDimensions(e)}getFinalDimensions(e=!1){return this._sdk.getFinalDimensions(e)}_setImage(e=this._options.editor.image,t=null){this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t)}_ensureImageIsResized(){let e=this._sdk.getImage(),t=this._sdk.getRenderer(),i=this.getMaxMegapixels(),o=i?i*1e6:null,n=t.getMaxDimensions(),s=new Z1(e,o,n);return!this._resizedImage&&s.needsResize()?s.resize().then(({canvas:a,dimensions:l,reason:c})=>(this._resizedImage=a,this._sdk.setImage(a),a)):Promise.resolve(e)}export(e=!1){return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then(t=>{let i=this._options.editor.export;return new Y1(this._sdk,i,e).export().then(n=>(this.emit("export",n),this._mediator.emit(qt.EVENTS.EXPORT,n,this),this._watermarkOperation&&(this._watermarkOperation.setEnabled(!0),this._sdk.render()),this._sdk.setAllOperationsToDirty(),n))})}broadcastTransform(e,t){let i=new Se.Operations.TransformOperation.TransformChange(e,t);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(n=>{let s=this.operations.get(n);!s||s.transform(i)})}broadcastFlip(e){["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach(i=>{let o=this.operations.get(i);!o||o.flip(e)})}broadcastRotate(e){["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach(i=>{let o=this.operations.get(i);!o||o.rotate(e)})}_initSerializers(){this._serializers={"1.0.0":(uce(),cce).default,"1.0.1":(mce(),pce).default,"2.0.0":(yce(),bce).default,"3.0.0":(vce(),_ce).default,"3.1.0":(Cce(),xce).default,"3.2.0":(wce(),Sce).default,"3.4.0":(kce(),Tce).default,"3.5.0":(Ice(),Ece).default,"3.6.0":(Oce(),Dce).default,"3.7.0":(Fce(),Rce).default,"3.8.0":(Pce(),Ace).default,"3.9.0":(Uce(),zce).default}}serialize(e={},t="3.9.0"){let i=this._serializers[t];return i?new i(this).serialize(e):Promise.reject(new Error(`No serializer for version ${t} found.`))}deserialize(e){let t=this._serializers[e.version];return t?new t(this).deserialize(e):Promise.reject(new Error(`No serializer for version ${e.version} found.`))}save(e=!1,t=!1){let i=this._options.editor.save;return this.serialize({image:t}).then(o=>{let n=JSON.stringify(o,null,2);if(e){let s=`data:text/json;charset=utf-8;base64,${window.encodeURI(window.btoa(n))}`;Yd.downloadDataURL(s,i.fileBasename)}return n})}reset(){this._sdk.reset(),this.operations.reset()}dispose(){this.stop(),this._sdk.dispose()}getRenderer(){return this._sdk.getRenderer()}getSDK(){return this._sdk}getInputDimensions(){return this._sdk.getInputDimensions()}getImage(){return this._sdk.getImage()}getOptions(){return this._options}getUI(){return this._ui}getMediator(){return this._mediator}},qce=Nce});var Ml,jce=m(()=>{Mt();vh();AP();gu();nf();Hce();rw();Ml=class extends Ly{constructor(e={}){super();this._mediator=new Ly,this._fontLoader=new bu(this),this._options=e,this._initOptions(),this._initEvents(),this._disposed=!1,this._isReady=!1,this._editor=new qce(this,this._options,this._mediator),this._options.editor.image&&this._editor.setImage(this._options.editor.image),this._mediator.once(qt.EVENTS.EDITOR_READY,()=>{this._isReady=!0}),me.setLevel(this._options.logLevel)}export(...e){return this._editor.export(...e)}serialize(...e){return this._editor.serialize(...e)}deserialize(e){return this._editor.deserialize(e)}getEditor(){return this._editor}isReady(){return this._isReady}onReady(e){this._isReady?e():this._mediator.once(qt.EVENTS.EDITOR_READY,e)}createFilter(e){return new Kd(this,this._getOptions("filter")).instantiateFilterWithIdentifier(e)}getTextDesignLayoutByID(e){let t=new kn(this,this._getOptions("textDesign"));return new(t.getLayoutByIdentifier(e))}getTextDesignAssetManager(){return Se.Operations.SpriteOperation.TextDesignSprite.AssetManager}getTextDesignFontManager(){return new fi(this,{fonts:qt.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0,isTextDesign:!0})}_getOptions(e){let t=this.getEditor(),{controls:i}=t,o={};i&&i.get(e)&&(o=i.get(e).defaultOptions);let n=t.getOptions();return At.deepDefaults({},n.editor.controlsOptions[e]||{},o)}_initOptions(){if(this._options=At.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=At.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:Math.max(typeof window!="undefined"&&window.devicePixelRatio||1,1),preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=At.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=At.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=At.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=At.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=At.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=At.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=At.defaults(this._options.editor.export||{},{format:"image/png",type:fu.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=At.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=At.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=At.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){let e=new window.Image;this._options.editor.image&&(e.src=this._options.editor.image,this._options.editor.image=e)}}_initEvents(){this._mediator.pipeEvents(this)}_disposeEvents(){this._mediator.unpipeEvents(this)}setImage(e){this._editor.setImage(e)}getAssetPath(e,t=!1,i=!1){let{baseUrl:o,resolver:n}=this._options.assets,s=`${o}/${e}`;n=n||(u=>u),e.match(/(ftp|http|https):\/\//)&&(s=e);let a=e.replace(/assets\//,"").split("/"),l=a[0],c={};switch(l){case"art-filters":return c={identifier:a[1],type:a[2].split(".")[0]},n("art-filter",c);case"filters":return c={identifier:a[1].replace(/\.png$/g,"")},n("filter",c);case"fonts":return c={identifier:a[1].replace(/\.(woff|otf|ttf)$/g,"")},n("font",c);case"frames":return c={identifier:a[1],filename:a[2]},n("frame",c);case"overlays":return c={identifier:a[1].replace(/\.(png|jpg|jpeg)$/g,"")},n("overlay",c);case"stickers":{let u=a[3].endsWith(".svg"),d=a[3]==="thumbs";return c={category:a[1],identifier:(u?a[3]:a[4]).replace(/\.(png|svg)$/g,""),variant:u?"svg":d?"thumb":"base"},n("sticker",c)}case"text-design":return c={type:a[1]==="fonts"?"font":"image",identifier:a[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")},n("text-design",c)}return typeof n!="undefined"&&n!==null&&(s=n(s)),s}getFontLoader(){return this._fontLoader}dispose(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}render(e){return this.deserialize(e).then(()=>this.export())}};Ml.prototype.identifier="engine-wrapper";Ml.Constants=qt;Ml.Events=qt.EVENTS;Ml.Utils=Mi;Ml.JSONLoader=yn;Ml.SDK=Se});var jy=m(()=>{jce()});var Ee={};Ht(Ee,{absoluteToRelativePoint:()=>yVe,absoluteToRelativeSize:()=>gVe,getBaseLocalToWorldMatrix:()=>vw,getLocalToParentMatrix:()=>Gce,getLocalToWorldMatrix:()=>uf,getPointInWorldSpace:()=>dM,getRotationBetweenCoordinateSpaces:()=>_Ve,getScalarInWorldSpace:()=>mVe,getSizeInOutputSpace:()=>hVe,getSizeInWorldSpace:()=>Vce,pointFromSpaceToSpace:()=>Wy,rectTransformToAffineTransform:()=>cM,relativeToAbsolutePoint:()=>bVe,relativeToAbsoluteSize:()=>fVe,scalarFromSpaceToSpace:()=>uM,sizeFromSpaceToSpace:()=>pVe});function Wce(r){return r.x!==void 0}function cM(r){return $e.fromTRS(r.position.x,r.position.y,r.rotation,r.scale.x,r.scale.y)}function dVe(r){return r.getBaseLocalToParentMatrix?r.getBaseLocalToParentMatrix():cM(r.getTransform())}function vw(r){let e=r.getParent(),t=dVe(r);if(e===void 0)return t;let i=vw(e);return $e.multiply(i,t)}function Gce(r){return r.getLocalToParentMatrix?r.getLocalToParentMatrix():cM(r.getTransform())}function uf(r){let e=r.getParent(),t=Gce(r);if(e===void 0)return t;let i=uf(e);return $e.multiply(i,t)}function Wy(r,e,t,i=!1){let o=e.type==="output"&&i?vw(e):uf(e),n=t.type==="output"&&i?vw(t):uf(t),s=$e.getInverted(n);return $e.transformPoint(s,$e.transformPoint(o,r))}function uM(r,e,t){let i=new L(r,0),o=new L(Wy(i,e,t)),n=new L(Wy(L.ZERO,e,t));return L.distance(n,o)}function pVe(r,e,t){let i=Wce(r)?r.x:r.width,o=Wce(r)?r.y:r.height,n=uM(i,e,t),s=uM(o,e,t);return{width:n,height:s}}function dM(r,e){let t=uf(e);return $e.transformPoint(t,r)}function mVe(r,e){let t=new L(r,0),i=new L(dM(t,e)),o=new L(dM(L.ZERO,e));return L.distance(i,o)}function Vce(r){let e=uf(r),t=r.getBounds(),i={x:t.width,y:0},o={x:0,y:t.height},n=new L($e.transformPoint(e,L.ZERO)),s=new L($e.transformPoint(e,i)),a=new L($e.transformPoint(e,o)),l=L.distance(n,s),c=L.distance(n,a);return{width:l,height:c}}function hVe(r,e){let t=Vce(r),i=e.getTransform().scale,o={x:1/i.x,y:1/i.y};return{width:t.width*o.x,height:t.height*o.y}}function fVe(r,e){let t=e.getBounds();return{width:r.width*t.width,height:r.height*t.height}}function gVe(r,e){let t=e.getBounds();return{width:r.width/t.width,height:r.height/t.height}}function bVe(r,e,t=!0){let i=e.getBounds();return{x:r.x*i.width+(t?0:i.minX),y:r.y*i.height+(t?0:i.minY)}}function yVe(r,e,t=!0){let i=e.getBounds();return{x:(r.x-(t?0:i.minX))/i.width,y:(r.y-(t?0:i.minY))/i.height}}function _Ve(r,e){let i=Wy({x:1,y:0},r,e,!0),o=Wy(L.ZERO,r,e,!0);return Math.atan2(i.y-o.y,i.x-o.x)}var $ce=m(()=>{Y()});function xw(r){return typeof r!="string"&&!Array.isArray(r)&&r.a===void 0}function Cw(r){return typeof r!="string"&&Array.isArray(r)&&r.length===3}function Sw(r){return typeof r!="string"&&!Array.isArray(r)&&r.a!==void 0}function ww(r){return typeof r!="string"&&Array.isArray(r)&&r.length===4}function Kce(r){return typeof r=="string"}var pM=m(()=>{});var Bl,Xce=m(()=>{(function(i){i.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",i.IMAGE_DOWNSCALED="imageDownscaled",i.WEBGL_CONTEXT_LOST="context-lost"})(Bl||(Bl={}))});var mM,Yce=m(()=>{Y();mM=class{constructor(e,t){this.engine=t;this.transform=Ot.IDENTITY;this.canvasPivot={x:0,y:0};this.previewQuality=1;this.canvas=e}get quality(){return this.previewQuality}setQuality(e){this.previewQuality=Math.min(Math.max(e,.01),1)}getTransform(){return this.transform}setTransform(e){this.transform=e}getPosition(){return this.transform.position}setPosition(e,t){let i;typeof e=="number"?i={x:e,y:t===void 0?e:t}:i=e;let{scale:o}=this.transform,{rotation:n}=this.transform;this.setTransform(new Ot(i,o,n))}getScale(){return this.transform.scale}setScale(e,t){let i;typeof e!="number"?i=e:i={x:e,y:t===void 0?e:t};let{position:o}=this.transform,{rotation:n}=this.transform;this.setTransform(new Ot(o,i,n))}getRotation(){return this.transform.rotation}setRotation(e){let{position:t}=this.transform,{scale:i}=this.transform;this.setTransform(new Ot(t,i,e))}getCanvasPivot(){return this.canvasPivot}setCanvasPivot(e,t){typeof e=="number"?this.canvasPivot={x:e,y:typeof t===void 0?e:t}:this.canvasPivot=e}getCanvasBounds(){let e=this.canvasPivot,{width:t,height:i}=this.canvas;return new Sr(-e.x*t,-e.y*i,t,i)}}});function Tw(r){return r.getTransform!==void 0}function Jce(r){return r.getContainer!==void 0}var Zce=m(()=>{});var Qce=m(()=>{});var eue=m(()=>{});var tue=m(()=>{});var rue=m(()=>{});var iue=m(()=>{});var oue=m(()=>{});var nue=m(()=>{});var sue=m(()=>{});var aue=m(()=>{});var lue=m(()=>{});var cue=m(()=>{});var uue=m(()=>{});var due=m(()=>{});var pue=m(()=>{});var mue=m(()=>{});var hue=m(()=>{});var hM=m(()=>{$ce();V();pM();Xce();Yce();Zce();Qce();eue();tue();rue();iue();oue();nue();sue();aue();lue();cue();uue();due();pue();mue();hue()});var fM,fue=m(()=>{Y();hM();fM=class extends Eo{constructor(e){super();this.config=e}getOutputDimensions(){let e=this.getOutputContainer();return e?e.getResolution():{width:0,height:0}}getSmallerOutputSide(){let e=this.getOutputContainer();if(!e)return 0;let t=e.getResolution();return Math.min(t.width,t.height)}convertPointFromPreviewIntoOutputSpace(e,t){let i=$e.getInverted(Ee.rectTransformToAffineTransform(t));return $e.transformPoint(i,e)}convertPointFromPreviewIntoWorldSpace(e,t,i){let o=$e.getInverted(Ee.rectTransformToAffineTransform(t)),n=i?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),s=$e.multiply(n,o);return $e.transformPoint(s,e)}convertPointFromPreviewIntoFlippedPreviewSpace(e){let t=this.getOutputContainer().getFlipTransformMatrix();return $e.transformPoint(t,e)}convertPointFromWorldIntoPreviewSpace(e,t){let i=Ee.rectTransformToAffineTransform(t),o=$e.getInverted(this.getOutputContainer().getLocalToParentMatrix()),n=$e.multiply(i,o);return $e.transformPoint(n,e)}convertPointFromOutputIntoPreviewSpace(e,t){let i=Ee.rectTransformToAffineTransform(t);return $e.transformPoint(i,e)}getContainersAtPreviewPoint(e,t){let i=new Array,o=this.convertPointFromPreviewIntoWorldSpace(e,t),n=this.getRootContainers();for(let s of n)this.accumulateContainersAtWorldPointInHierarchy(o,s,i);return i}isPreviewPointInContainer(e,t,i){let o=this.convertPointFromPreviewIntoWorldSpace(e,i);return this.isWorldPointInContainer(o,t)}isWorldPointInContainer(e,t){let i=Ee.getLocalToWorldMatrix(t),o=$e.getInverted(i),n=$e.transformPoint(o,e);return Sr.contains(t.getBounds(),n)}accumulateContainersAtWorldPointInHierarchy(e,t,i){this.isWorldPointInContainer(e,t)&&i.push(t);let o=t.getChildren();for(let n of o)Tw(n)&&this.accumulateContainersAtWorldPointInHierarchy(e,n,i)}}});var uo=m(()=>{hM();fue()});var Lr,ns=m(()=>{Y();Lr=class{constructor(e){this.engine=e;this.id=yt()}getID(){return this.id}getContainer(){return this.engine.getRootContainers()[0]}getIndexInParent(){let{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}isValid(){return this.getIndexInParent()!==-1}}});var gM,bM=m(()=>{ns();gM=class extends Lr{constructor(e,t,i){super(t);this.operation=i;this.type="adjustments";this.setProperties(e)}getProperties(){let e=this.operation.getOptions(),t=e.gamma-1;return{brightness:e.brightness||0,saturation:e.saturation||0,contrast:e.contrast||0,gamma:(t<0?2*t:t)||0,clarity:e.clarity||0,exposure:e.exposure||0,shadows:e.shadows*.5||0,highlights:e.highlights||0,whites:e.whites||0,blacks:e.blacks||0,temperature:e.temperature||0,sharpness:e.sharpness||0}}setProperties(e){e.gamma!==void 0&&(e.gamma=1+(e.gamma<0?.5*e.gamma:e.gamma)),e.shadows&&(e.shadows=e.shadows*2),this.operation.set(e)}getOperation(){return this.operation}getTypeIdentifier(){return"adjustments"}}});var po,df=m(()=>{jy();pM();po=r=>{if(Sw(r))return new Se.Color(r.r,r.g,r.b,r.a);if(ww(r))return new Se.Color(r[0],r[1],r[2],r[3]);if(xw(r))return new Se.Color(r.r,r.g,r.b,1);if(Cw(r))return new Se.Color(r[0],r[1],r[2],1);if(Kce(r)){let[e,t,i]=r.match(/[0-9A-fa-f]{1,2}/g);return new Se.Color(parseInt(e,16)/255,parseInt(t,16)/255,parseInt(i,16)/255,1)}throw new Error("Invalid color type")}});var gt,_u=m(()=>{gt=class{get x(){return this._x}get y(){return this._y}constructor(e=0,t=0){this._x=e,this._y=t}set(e,t){return this._x=e,this._y=t,this}clone(){return new gt(this._x,this._y)}copy(e){return this._x=e.x,this._y=e.y,this}clamped(e=this,t=this){let i=typeof e=="number"?{x:e,y:e}:e,o=typeof t=="number"?{x:t,y:t}:t;return this._x=Math.max(i.x,this._x),this._y=Math.max(i.y,this._y),this._x=Math.min(o.x,this._x),this._y=Math.min(o.y,this._y),this}divide(e,t){return typeof e=="number"||e===null?(this._x/=e,this._y/=typeof t=="undefined"?e:t):(this._x/=e.x,this._y/=e.y),this}subtract(e,t){return typeof e=="number"||e===null?(this._x-=e,this._y-=typeof t=="undefined"?e:t):(this._x-=e.x,this._y-=e.y),this}multiply(e,t){return typeof e=="number"||e===null?(this._x*=e,this._y*=typeof t=="undefined"?e:t):(this._x*=e.x,this._y*=e.y),this}add(e,t){return typeof e=="number"||e===null?(this._x+=e,this._y+=typeof t=="undefined"?e:t):(this._x+=e.x,this._y+=e.y),this}dot(e,t){return typeof e=="number"||e===null?this._x*e+this._y*(typeof t=="undefined"?e:t):this._x*e.x+this._y*e.y}equals(e,t){return typeof e=="number"||e===null?e===this._x&&t===this._y:e.x===this._x&&e.y===this._y}flip(){let e=this._x;return this._x=this._y,this._y=e,this}round(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this}ceil(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this}floor(){return this._x=this._x|0,this._y=this._y|0,this}abs(){return this._x=Math.abs(this._x),this._y=Math.abs(this._y),this}len(){return Math.sqrt(this._x*this._x+this._y*this._y)}min(){return Math.min(this._x,this._y)}max(){return Math.max(this._x,this._y)}toObject(){return{x:this._x,y:this._y}}toString(){return`Vector2({ x: ${this._x}, y: ${this._y} })`}roundDecimal(e){return this._x=parseFloat(this._x.toFixed(e)),this._y=parseFloat(this._y.toFixed(e)),this}asArray(e=!1){return e?[this._y,this._x]:[this._x,this._y]}static fromObject(e){return new gt(e.x,e.y)}static fromSize(e){return new gt(e.width,e.height)}static get NULL(){return new gt(0,0)}}});var qo,vu=m(()=>{Y();uo();_u();qo=class{constructor(e){this.engine=e;this.id=yt(),this.transform=Ot.IDENTITY,this.bounds=Sr.ZERO}getID(){return this.id}getParent(){let e=this.engine.getRootContainers();if(!(e.length===0||this.id===e[0].id))return e[0]}getIndexInParent(){let{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}getChildren(){let e=this.engine.getRootContainers();return e.length>0&&(this.id===e[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]}getBounds(){return this.bounds}setPivotOnSelfAndSprite(e,t,i){typeof t=="number"?(this.setPivotInternal(t,i),e.setPivot(new gt(t,i))):(this.setPivotInternal(t),e.setPivot(gt.fromObject(t)))}setPivot(e,t){this.setPivotInternal(e,t)}getPivot(){let e=this.getBounds();return{x:-e.minX/e.width,y:-e.minY/e.height}}getTransform(){return this.transform}setTransform(e){this.transform=e}updateTransform(){this.setTransform(this.transform)}getPosition(){return this.transform.position}setPosition(e,t){let i;typeof e=="number"?i={x:e,y:t===void 0?e:t}:i=e;let{scale:o}=this.transform,{rotation:n}=this.transform;this.setTransform(new Ot(i,o,n))}getScale(){return this.transform.scale}setScale(e,t){let i;typeof e!="number"?i=e:i={x:e,y:t===void 0?e:t};let{position:o,rotation:n}=this.transform;this.setTransform(new Ot(o,i,n))}getRotation(){return this.transform.rotation}setRotation(e){let{position:t,scale:i}=this.transform;this.setTransform(new Ot(t,i,e))}getSizeInWorldSpace(){return Ee.getSizeInWorldSpace(this)}getSizeInOutputSpace(){return Ee.getSizeInOutputSpace(this,this.engine.getOutputContainer())}setSizeInWorldSpace(e){let t=this.getBounds();this.setScale(e.width/t.width,e.height/t.height)}setSizeInOutputSpace(e){let t=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:e.width/t.x,height:e.height/t.y})}isValid(){return this.getIndexInParent()!==-1}setPivotInternal(e,t){let i=this.getBounds();typeof e=="number"?this.setBoundsFromSize(i.width,i.height,{x:e,y:t}):this.setBoundsFromSize(i.width,i.height,e)}setBoundsFromSize(e,t,i=this.getPivot()){this.bounds=new Sr(-i.x*e,-i.y*t,e,t)}}});var yM,gue=m(()=>{Y();uo();df();vu();_u();yM=class extends qo{constructor(e,t){super(t);this.type="drawing";this.drawing=e,this.operation=t.createSpriteOperation(),this.sprite=this.operation.createBrush({}),this.operation.addSprite(this.sprite),this.radialBrush=this.sprite._createRadialBrush();let o=t.getRootContainers()[0].getBounds();this.bounds=new Sr(0,0,o.width,o.height),this.setTransform(Ot.IDENTITY),this.operation.setDirty(!0),this.setData(e)}beginStroke(e){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if(e.id!=="imgly_brush_radial")throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=e,this.currentStroke={brush:e,path:{controlPoints:[]}},this.radialBrush.setColor(po(e.color)),this.radialBrush.setHardness(e.hardness),this.radialBrush.setSize(e.size),this.currentPath=this.sprite.createPath(this.radialBrush.clone())}addPointToCurrentStroke(e,t=!0){if(!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){let l=this.currentStroke.path.controlPoints,c=l[l.length-1],u=this.currentBrush.size/10;if(Math.sqrt(e.x-c.x**2+(e.y-c.y**2))<u)return}let i=this.engine.getOutputContainer(),o=this.engine.getRootContainers()[0],n=Ee.pointFromSpaceToSpace(e,o,i,!0),s=Ee.absoluteToRelativePoint(n,i,!1),a=i.getBounds();this.currentPath.addControlPoint(gt.fromObject(s)),this.currentStroke.path.controlPoints.push(e),t&&this.sprite.render(gt.fromObject({x:a.width,y:a.height}))}endStroke(){if(!this.currentStroke||!this.currentPath||!this.currentBrush)return;this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);let e=this.engine.getOutputContainer().getBounds();this.sprite.render(gt.fromObject({x:e.width,y:e.height})),this.currentPath=void 0}setData(e){this.drawing=T(T({},this.drawing),e),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(e.strokes)}getData(){return this.drawing}updateData(){this.setData(this.getData())}getOperation(){return this.operation}drawStrokes(e){e.forEach(t=>{this.beginStroke(t.brush),t.path.controlPoints.forEach(i=>{this.addPointToCurrentStroke(i,!0)}),this.endStroke()})}}});var _M,vM=m(()=>{ns();_M=class extends Lr{constructor(e,t,i,o){super(o);this.filterOperation=t;this.type="duotone-filter";t.set({intensity:i.colorIntensity}),t.set({filter:e}),o.pesdk.setAllOperationsToDirty()}getProperties(){return{colorIntensity:this.filterOperation.getOptions().intensity}}setProperties(e){let i=this.filterOperation.getOptions().intensity;e.colorIntensity!==void 0&&(i=Math.min(Math.max(e.colorIntensity,0),1)),this.filterOperation.set({intensity:i})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}});var xM,bue=m(()=>{xM=class{constructor(e,t){this.engine=t;this.loaded=!1;this.loading=!1;this.asset=T({},e)}load(){return de(this,null,function*(){if(this.loaded)return Promise.resolve();if(this.loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this.loading=!0;let{imageGroups:e}=this.asset,t=[];return["top","left","right","bottom"].forEach(i=>{if(!e[i])return;let o=e[i];["start","mid","end"].forEach(n=>{n in o&&t.push(this.loadPart(i,n))})}),Promise.all(t).then(()=>{this.loaded=!0,this.loading=!1}).catch(()=>{this.loaded=!1,this.loading=!1})})}getFrame(){return U(T({},this.asset),{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})}getIdentifier(){return this.asset.identifier}getDefaultName(){return this.asset.name}getThumbnail(){return this.asset.thumbnailURI}getTintable(){return this.asset.tintable||!1}getLayoutMode(){return this.asset.layoutMode}getImageGroups(){return this.asset.imageGroups}loadPart(e,t){return de(this,null,function*(){return new Promise((i,o)=>{let{imageGroups:n}=this.asset,s=n[e][t],a=s;typeof s!="string"&&"image"in s&&(a=s.image);let l=new Image;l.addEventListener("load",()=>{typeof s!="string"?this.asset.imageGroups[e][t].image=l:this.asset.imageGroups[e][t]=l,i(l)}),l.addEventListener("error",()=>{o(new Error(`Failed to load image at ${l.src}`))}),l.crossOrigin=this.engine.configuration.crossOrigin||"anonymus",l.src=this.engine.assetProvider.getAssetSource("frame",a)})})}}});var CM,yue=m(()=>{df();ns();CM=class extends Lr{constructor(e,t,i){super(i);this.frameOperation=e;this.type="frame";this.setProperties(t),i.pesdk.setAllOperationsToDirty()}setProperties(e){if(this.props=T(T({},this.props),e),typeof e.opacity=="number"&&this.frameOperation.set({alpha:e.opacity}),e.tintColor&&this.frameOperation.set({tintColor:po(e.tintColor)}),e.width){let t=this.engine.getOutputContainer().getBounds(),i=Math.min(t.width,t.height),o=e.width/i;this.frameOperation.set({scale:o})}this.frameOperation.setDirty(!0)}getProperties(){return this.props}getOperation(){return this.frameOperation}getTypeIdentifier(){return"frame"}}});var SM,wM=m(()=>{uo();ns();SM=class extends Lr{constructor(e,t,i){super(t);this.blurOperation=i;this.type="gaussian-blur";this.setProperties(e)}getProperties(){let e=this.engine.getOutputContainer(),t=e.getBounds(),i=Math.min(t.size.width,t.size.height);return{blurRadius:Ee.scalarFromSpaceToSpace(this.blurOperation.getOptions().blurRadius*i,e,this.getContainer())}}setProperties(e){if(e.blurRadius!==void 0){let t=this.engine.pesdk.getOutputDimensions(),i=Math.min(t.x,t.y),o=this.getContainer(),n=this.engine.getOutputContainer(),a=Ee.scalarFromSpaceToSpace(e.blurRadius,o,n)/i;this.blurOperation.set({blurRadius:a})}}getOperation(){return this.blurOperation}getTypeIdentifier(){return"blur"}}});var kw,TM=m(()=>{Y();uo();vu();kw=class extends qo{constructor(e,t){super(t);this.data=e;this.type="image";let i=t.configuration.downscaleOptions;if(!i)this.downscaleOptions={maxDimensions:{width:t.maxTextureDimension,height:t.maxTextureDimension}};else{let{maxDimensions:n}=i;this.downscaleOptions={maxMegaPixels:i.maxMegaPixels,maxDimensions:{width:Math.min(t.maxTextureDimension,n?n.width:Number.MAX_VALUE),height:Math.min(t.maxTextureDimension,n?n.height:Number.MAX_VALUE)}}}this.setData(e);let{image:o}=this.data;this.bounds=new Sr(L.ZERO,{width:o.width,height:o.height})}setData(e){if(this.data=T(T({},this.data),e),e.image){let{image:t}=e,i;if(t instanceof HTMLImageElement&&(i=this.engine.pesdk.parseExif(t),i)){let n=i.getTags();if(n&&n.Orientation){let s=n.Orientation!==1&&n.Orientation!==2,a=[2,4,5,7].indexOf(n.Orientation)!==-1;if(s||a){if(nr()||un()||!CSS.supports("image-orientation","from-image")){let l=this.engine.pesdk.createOperation("exif-orientation",{},!1);l.setTags(n),t=l.applyTo(t)}i.setOrientation(1),n.Orientation=1}}}let o=new hb(t,this.downscaleOptions);o.on(Ya.IMAGE_DOWNSCALED,({width:n,height:s})=>{this.engine.emit(Bl.IMAGE_DOWNSCALED,{width:n,height:s})}),o.on(Ya.BEGAN_IMAGE_DOWNSCALING,()=>{this.engine.emit(Bl.BEGAN_IMAGE_DOWNSCALING)}),t=o.downscaleIfNecessary(),this.data.image=t,this.engine.pesdk.setImage(t,i),this.setBoundsFromSize(t.width,t.height)}}getData(){return this.data}setPivot(e,t){throw new Error("This container does not support modifying the pivot")}getOperation(){throw new Error("This container has no associated operation")}}});var kM,EM=m(()=>{Y();uo();ns();kM=class extends Lr{constructor(e,t,i){super(t);this.props=e;this.blurOperation=i;this.type="linear-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=T(T({},this.props),e);let t=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),o=i.getBounds(),n=this.getContainer(),s=i.getBaseLocalToParentMatrix(),a=Ee.getBaseLocalToWorldMatrix(n),l=$e.multiply($e.getInverted(s),a),c=Math.min(o.size.width,o.size.height);if(e.blurRadius!==void 0){let u=Ee.scalarFromSpaceToSpace(e.blurRadius,n,i);t.blurRadius=u/c}if(e.start!==void 0){let u=$e.transformPoint(l,e.start),d=Ee.absoluteToRelativePoint(u,i,!1);t.controlPoint1=d}if(e.end!==void 0){let u=$e.transformPoint(l,e.end),d=Ee.absoluteToRelativePoint(u,i,!1);t.controlPoint2=d}this.blurOperation.set(t)}updateProperties(){let e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"linear-focus"}}});var IM,DM=m(()=>{ns();IM=class extends Lr{constructor(e,t,i,o){super(o);this.filter=e;this.filterOperation=t;this.props=i;this.type="lut-filter";t.set({intensity:i.intensity}),t.set({filter:e}),o.pesdk.setAllOperationsToDirty()}getProperties(){return{intensity:this.filterOperation.getOptions().intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}}setProperties(e){let t=this.filterOperation.getOptions(),i=typeof e.intensity=="number"?e.intensity:t.intensity;this.filterOperation.set({intensity:i})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}});var OM,RM=m(()=>{Y();uo();ns();OM=class extends Lr{constructor(e,t,i){super(t);this.props=e;this.blurOperation=i;this.type="mirrored-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=T(T({},this.props),e);let t=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),o=i.getBounds(),n=this.getContainer(),s=i.getBaseLocalToParentMatrix(),a=Ee.getBaseLocalToWorldMatrix(n),l=$e.multiply($e.getInverted(s),a),c=Math.min(o.size.width,o.size.height);if(e.blurRadius!==void 0){let u=Ee.scalarFromSpaceToSpace(e.blurRadius,n,i);t.blurRadius=u/c}if(e.gradientSize!==void 0){let d=Ee.scalarFromSpaceToSpace(e.gradientSize,n,i)/c;t.gradientSize=d}if(e.clearAreaWidth!==void 0){let d=Ee.scalarFromSpaceToSpace(e.clearAreaWidth,n,i)/c;t.size=d*.5}if(e.mirrorAxisOrigin!==void 0){let u=$e.transformPoint(l,e.mirrorAxisOrigin),d=Ee.absoluteToRelativePoint(u,i,!1);t.start=d}if(e.mirrorAxisDirection!==void 0){let u=$e.transformPoint(l,e.mirrorAxisDirection),d=Ee.absoluteToRelativePoint(u,i,!1);t.end=d}this.blurOperation.set(t)}updateProperties(){let e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"mirrored-focus"}}});var Ew,FM=m(()=>{Y();uo();vu();_u();Ew=class extends qo{constructor(e,t,i,o){super(o);this.settings=e;this.operation=t;this.flipOperation=i;this.type="output";this.flipTransform=$e.IDENTITY;this.blockTransformUpdate=!1;this.transformUpdateWhileBlock=!1;this.bounds=new Sr({x:0,y:0},this.settings.resolution),this.setData(e)}pauseChildrenUpdates(){this.transformUpdateWhileBlock=!1,this.blockTransformUpdate=!0}resumeChildrenUpdates(){this.blockTransformUpdate=!1,this.transformUpdateWhileBlock&&this.updateChildrenContainers()}setData(e){if(this.settings=T(T({},this.settings),e),e.resolution&&(this.setBoundsFromSize(e.resolution.width,e.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new gt(e.resolution.width,e.resolution.height)})),e.flipHorizontally!==void 0){let t=e.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:t})}if(e.flipVertically!==void 0){let t=e.flipVertically;this.updateFlipTransform(),this.flipOperation.set({flipVertically:t})}this.operation.setDirty(!0),this.flipOperation.setDirty(!0)}getData(){return this.settings}setResolution(e){this.setData({resolution:e})}getResolution(){return this.getData().resolution}setTransform(e){if(this.transform.rotation!==e.rotation||this.transform.position!==e.position||this.transform.scale!==e.scale){this.transform=e;let t=this.flipTransform;this.flipTransform=$e.IDENTITY;let i=this.engine.getRootContainers()[0],o=Ee.pointFromSpaceToSpace({x:0,y:0},i,this),n=-e.rotation,s=gt.fromObject(o).clone().subtract(gt.fromObject(this.getBounds().origin));this.operation.set({pivot:new gt(0,0),position:s,scale:new gt(1/e.scale.x,1/e.scale.y),rotation:n}),this.flipTransform=t,this.operation.setDirty(!0),this.updateChildrenContainers()}}rotate(e,t){let i=this.getPivot(),o=this.getBounds(),n={x:o.midX,y:o.midY},s=Ee.getPointInWorldSpace(n,this);this.setPivot(.5,.5),this.setPosition(s),this.setRotation(e),this.setResolution(t);let a={x:-t.width*(.5-i.x),y:-t.height*(.5-i.y)},l=Ee.getPointInWorldSpace(a,this);this.setPivot(i),this.setPosition(l),this.updateChildrenContainers()}setPivot(e,t){super.setPivotInternal(e,t),this.setTransform(this.transform)}getTransform(){return this.transform}getBaseLocalToParentMatrix(){return Ee.rectTransformToAffineTransform(this.getTransform())}getLocalToParentMatrix(){let e=Ee.rectTransformToAffineTransform(this.getTransform());return $e.multiply(e,this.flipTransform)}getFlipTransformMatrix(){return this.flipTransform}isValid(){return!0}getOperation(){return this.operation}updateFlipTransform(){let{flipHorizontally:e,flipVertically:t}=this.settings;if(!e&&!t)this.flipTransform=$e.IDENTITY;else{let i=this.getPivot(),o=this.getBounds(),n=e?-1:1,s=e?-2*(i.x-.5)*o.width:0,a=t?-1:1,l=t?-2*(i.y-.5)*o.height:0;this.flipTransform=new $e(n,0,0,a,s,l)}}updateChildrenContainers(){if(this.blockTransformUpdate){this.transformUpdateWhileBlock=!0;return}this.engine.rootOperations.forEach(e=>{Tw(e)?(e.updateTransform(),"updateData"in e&&e.updateData()):"updateProperties"in e&&e.updateProperties()})}}});var Iw,AM=m(()=>{ns();Iw=class extends Lr{constructor(e,t,i){super(i);this.overlayOperation=e;this.type="overlay";let o=t.blendMode||i.mapBlendMode(e.getBlendMode());e.set({blendMode:i.reverseMapBlendMode(o)}),e.set({image:t.image}),i.pesdk.setAllOperationsToDirty()}getProperties(){let e=this.overlayOperation.getOptions();return{image:e.image,blendMode:this.engine.mapBlendMode(e.blendMode),opacity:e.alpha}}setProperties(e){let t=this.overlayOperation.getOptions();typeof e.opacity=="number"&&(t.alpha=e.opacity),e.blendMode!==void 0&&(t.blendMode=this.engine.reverseMapBlendMode(e.blendMode)),this.overlayOperation.set(t),this.overlayOperation.setDirty(!0)}getOperation(){return this.overlayOperation}getTypeIdentifier(){return"overlay"}setFlipHorizontally(e){this.overlayOperation.setFlipHorizontally(e)}setFlipVertically(e){this.overlayOperation.setFlipVertically(e)}getFlipHorizontally(){return this.overlayOperation.getFlipHorizontally()}getFlipVertically(){return this.overlayOperation.getFlipVertically()}}});var PM,MM=m(()=>{Y();uo();ns();PM=class extends Lr{constructor(e,t,i){super(t);this.props=e;this.blurOperation=i;this.type="radial-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=T(T({},this.props),e);let t=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),o=i.getBounds(),n=this.getContainer(),s=i.getBaseLocalToParentMatrix(),a=Ee.getBaseLocalToWorldMatrix(n),l=$e.multiply($e.getInverted(s),a),c=Math.min(o.size.width,o.size.height);if(e.blurRadius!==void 0){let u=Ee.scalarFromSpaceToSpace(e.blurRadius,n,i);t.blurRadius=u/c}if(e.center!==void 0){let u=$e.transformPoint(l,e.center),d=Ee.absoluteToRelativePoint(u,i,!1);t.position=d}if(e.radius!==void 0){let d=Ee.scalarFromSpaceToSpace(e.radius,n,i)/c;t.radius=d}if(e.gradientSize!==void 0){let d=Ee.scalarFromSpaceToSpace(e.gradientSize,n,i)/c;t.gradientRadius=d}this.blurOperation.set(t)}updateProperties(){let e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"radial-focus"}}});var Dw,_ue=m(()=>{Y();uo();df();vu();_u();Dw=class extends qo{constructor(e,t){super(t);this.data=e;this.type="sticker";let i=e.image,o=this.engine.pesdk.parseExif(e.image);if(o){let s=o.getTags();if(s&&s.Orientation){let a=s.Orientation!==1&&s.Orientation!==2,l=[2,4,5,7].indexOf(s.Orientation)!==-1;if(a||l){let c=this.engine.pesdk.createOperation("exif-orientation",{},!1);c.setTags(s),i=c.applyTo(e.image),o.setOrientation(1),s.Orientation=1}}}i=new hb(i,{maxMegaPixels:{desktop:10,mobile:5}}).downscaleImageIfNecessary(),this.operation=t.createSpriteOperation(),this.sprite=this.operation.createSticker({identifier:"",image:i,position:new gt(0,0),dimensions:new gt(1,1),rotation:0,smoothDownscaling:!1}),this.operation.addSprite(this.sprite),this.bounds=new Sr({x:0,y:0},{width:i.width,height:i.height}),this.setTransform(Ot.IDENTITY),this.sprite.setPivot(new gt(0,0)),this.operation.setDirty(!0),this.setData(e)}setData(e){this.data=T(T({},this.data),e),e.id&&(this.id=e.id),dn(e.opacity)&&e.opacity>=0&&this.sprite.setAlpha(e.opacity),e.tintColor&&this.sprite.setTintColor(po(e.tintColor)),e.tintMode&&this.sprite.setTintMode(e.tintMode),this.operation.setDirty(!0)}getData(){return this.data}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);let t=this.engine.getOutputContainer(),i=this.getParent(),o={width:this.bounds.width*e.scale.x,height:this.bounds.height*e.scale.y},n=Ee.sizeFromSpaceToSpace(o,i,t);this.sprite.setDimensions(gt.fromSize(n));let s=Ee.pointFromSpaceToSpace(e.position,i,t,!0),a=Ee.absoluteToRelativePoint(s,t,!1);this.sprite.setPosition(new gt(a.x,a.y));let l=Ee.getRotationBetweenCoordinateSpaces(i,t),c=e.rotation+l;this.sprite.setRotation(c),this.operation.setDirty(!0)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}}});var pf,vVe,Gy,mf=m(()=>{pf=r=>2*Math.PI-r,vVe=r=>-r,Gy=({rotation:r,outputRotation:e=0,flipHorizontally:t,flipVertically:i})=>{let o=r;return t&&(o=pf(o)),i&&(o=vVe(o)),o+e}});function xVe(r,e){if(e){let t=1/e.unitsPerEm*r,i=e.ascender*t,o=e.descender*t;return i+Math.abs(o)}return r*1.1}function vp(r,e,t,i,o,n,s){r.font=`${t.fontStyle||"normal"} ${t.fontWeight||"normal"} ${i}px "${t.fontFamily}"`;let a=new Ow(r);a.setText(e),a.setMaxWidth(n);let l=a.getLines().map(p=>p.replace(/\s+$/i,"")),c=xVe(i,s),u=c*o,d=c/5;return{width:n+d*2,height:l.length*u+d*2}}var Ow,BM=m(()=>{Ow=class{constructor(e){this.context=e;this.sourceLines=[];this.maxWidth=100}static buildWords(e){let t=[],i="",o=e.length;for(let n=0;n<o;n+=1){let s=e[n];i+=s,(s===" "||s==="-"||n===o-1)&&(t.push(i),i="")}return t}getLines(){let e=[],t=[],i=this.sourceLines.length;for(let o=0;o<i;o+=1){let n=this.sourceLines[o],s=Ow.buildWords(n),a=s.length;for(let l=0;l<a;l+=1){let c=s[l],u=t.concat(c).join("").replace(/\s+$/i,"");if(this.getWidth(u)>this.maxWidth){t.length>0&&(e.push(t.join("")),t=[c]);let p=c.replace(/\s+$/i,"");if(this.getWidth(p)>this.maxWidth){let h=this.splitWord(c);e=e.concat(h.lines),h.rest&&(t=[h.rest])}}else t.push(c)}e.push(t.join("")),t=[]}return e}splitWord(e){let t={lines:[],rest:null},i=e.length,o=[];for(let n=0;n<i;n+=1){let s=e[n];this.getWidth(o.concat(s).join(""))>this.maxWidth?(o.length>0&&t.lines.push(o.join("")),o=[s]):o.push(s),n===i-1&&o.length>0&&(t.rest=o.join(""))}return t}getWidth(e){return this.context.measureText(e).width}setText(e){this.sourceLines=e.split(`
`)}setMaxWidth(e){this.maxWidth=e}}});var Ll,vue=m(()=>{Y();mf();uo();df();vu();BM();_u();Ll=class extends qo{constructor(e,t){super(t);this.text=e;this.type="text";if(!Ll.measureContext){let l=document.createElement("canvas");Ll.measureContext=l.getContext("2d")}this.operation=t.createSpriteOperation();let i=this.engine.getOutputContainer(),o=this.getParent(),n=i.getBounds();this.sprite=this.operation.createText({text:e.text,position:new gt(0,0),rotation:0,fontSize:Ee.scalarFromSpaceToSpace(e.fontSize/n.height,o,i),lineHeight:e.lineHeight,fontIdentifier:e.fontIdentifier,alignment:e.alignment,color:po(e.textColor),backgroundColor:po(e.backgroundColor),maxWidth:Ee.scalarFromSpaceToSpace(e.width/n.width,o,i)});let s=t.assetProvider.getFontManager().getFontWithId(e.fontIdentifier);this.sprite.setFontFamily(s.fontFamily),this.sprite.setFontWeight(s.fontWeight||"normal"),this.sprite.setFontStyle(s.fontStyle||"normal"),this.sprite.setFontIdentifier(s.identifier),this.sprite.setTextMetrics(s.textMetrics),this.sprite.setPivot(new gt(0,0)),this.operation.addSprite(this.sprite);let a=vp(Ll.measureContext,e.text,s,e.fontSize,e.lineHeight,e.width,s.textMetrics);this.bounds=new Sr(0,0,a.width,a.height),this.setTransform(Ot.IDENTITY),this.operation.setDirty(!0)}setData(e){this.text=T(T({},this.text),e);let t=this.engine.assetProvider.getFontManager().getFontWithId(e.fontIdentifier||this.text.fontIdentifier);if(e.fontIdentifier&&(this.sprite.setFontFamily(t.fontFamily),this.sprite.setFontWeight(t.fontWeight||"normal"),this.sprite.setFontStyle(t.fontStyle||"normal"),this.sprite.setFontIdentifier(t.identifier),this.sprite.setTextMetrics(t.textMetrics)),e.id&&(this.id=e.id),e.text&&this.sprite.setText(e.text),e.fontSize){let o=this.engine.getOutputContainer(),n=this.getParent(),s=Ee.scalarFromSpaceToSpace(e.fontSize,n,o),a=o.getBounds();this.sprite.setFontSize(s/a.height)}if(e.alignment&&this.sprite.setAlignment(e.alignment),e.lineHeight&&this.sprite.setLineHeight(e.lineHeight),e.textColor&&this.sprite.setColor(po(e.textColor)),e.backgroundColor&&this.sprite.setBackgroundColor(po(e.backgroundColor)),e.width){let o=this.engine.getOutputContainer(),n=this.getParent(),s=Ee.scalarFromSpaceToSpace(e.width,n,o),a=o.getBounds();this.sprite.setMaxWidth(s/a.width)}let i=vp(Ll.measureContext,this.text.text,t,this.text.fontSize,this.text.lineHeight,this.text.width,t.textMetrics);this.setBoundsFromSize(i.width,i.height),this.operation.setDirty(!0)}getData(){return this.text}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);let t=this.engine.getOutputContainer(),i=this.getParent(),o=Ee.pointFromSpaceToSpace(e.position,i,t,!0),n=Ee.absoluteToRelativePoint(o,t,!1);this.sprite.setPosition(new gt(n.x,n.y));let s=Ee.getRotationBetweenCoordinateSpaces(i,t);this.sprite.setRotation(e.rotation+s),this.operation.setDirty(!0)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:e})),this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setRotation(this.getFlippedRotation({flipVertically:e})),this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}getFlippedRotation({flipVertically:e,flipHorizontally:t}){let i=e||this.getFlipVertically(),o=t||this.getFlipHorizontally(),n=this.getRotation();return(i||o)&&(n=pf(n)),n}}});var LM,xp,xue=m(()=>{Y();uo();df();vu();_u();LM=1e3,xp=class extends qo{constructor(e,t,i){super(i);this.textDesign=e;this.layout=t;this.type="text-design";this.currentLayoutSize=void 0;this.layoutID=t.identifier,this.operation=i.createSpriteOperation();let o=this.engine.getOutputContainer(),n=this.getParent(),s=o.getBounds(),a=Math.min(s.width,s.height);t.seed(e.seed),this.bounds=this.calculateBounds(this.textDesign,this.layout);let l=e.width;this.sprite=this.operation.createTextDesign({text:e.text,layout:t,inverted:e.inverted,color:po(e.color),width:Ee.scalarFromSpaceToSpace(e.width/a,n,o),padding:e.padding/l,seed:e.seed}),this.updatePivot(),this.operation.addSprite(this.sprite),this.setTransform(Ot.IDENTITY),this.operation.setDirty(!0)}static stringify(e){return JSON.stringify(e,xp.serializer())}static serializer(){let e=[],t=[],i=(o,n)=>e[0]===n?"[Circular ~]":`[Circular ~.${t.slice(0,e.indexOf(n)).join(".")}]`;return function(n,s){let a=this;if(e.length>0){let l=e.indexOf(a);~l?(e.splice(l+1),t.splice(l,1/0,n)):(e.push(a),t.push(n)),~e.indexOf(s)&&(s=i.call(a,n,s))}else e.push(s);return s}}calculateBounds(e,t,i=!0){let o=e.inverted&&i?Math.max(0,2*e.padding):0,n=e.width/LM;if(this.currentLayoutSize===void 0){t.seed(e.seed);let s=t.generateLayoutData(e.text,LM);this.currentLayoutData=s,this.currentLayoutSize=s.getSize()}return new Sr(0,0,this.currentLayoutSize.width*n+o,this.currentLayoutSize.height*n+o)}findNextUniqueSeed(e,t,i){let o=i,n=this.currentLayoutData?xp.stringify(this.currentLayoutData.getRows()):"",s;for(let a=0;a<20&&(t.seed(o),s=t.generateLayoutData(e.text,LM),n===xp.stringify(s.getRows()));a+=1)o+=1;return t.seed(o),this.currentLayoutData=s,o}setData(e){if(this.textDesign=T(T({},this.textDesign),e),e.id&&(this.id=e.id),e.padding!==void 0){let t=this.textDesign.width;this.sprite.setPadding(e.padding/t)}else e.width&&(this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width);if(e.seed!==void 0&&(e.seed<0&&(e.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now()),this.textDesign.seed=e.seed),this.currentLayoutSize=void 0,this.layout.seed(e.seed),this.sprite.setSeed(e.seed),this.sprite.setLayout(this.layout)),e.color&&this.sprite.setColor(po(e.color)),e.inverted!==void 0&&this.sprite.setInverted(e.inverted),e.text&&(this.currentLayoutSize=void 0,this.sprite.setText(e.text)),e.width){let t=this.engine.getOutputContainer(),i=this.getParent(),o=t.getBounds(),n=Math.min(o.width,o.height),s=Ee.scalarFromSpaceToSpace(e.width/n,i,t);this.sprite.setWidth(s)}if(e.padding!==void 0||e.seed!==void 0||e.inverted!==void 0||e.text||e.width){let t=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(t.width,t.height),this.updatePivot()}this.operation.setDirty(!0)}getData(){return this.textDesign}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);let t=this.engine.getOutputContainer(),i=this.getParent();if(e.scale.x!==1||e.scale.y!==1)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");let o=Ee.pointFromSpaceToSpace(e.position,i,t,!0),n=Ee.absoluteToRelativePoint(o,t,!1);this.sprite.setPosition(new gt(n.x,n.y));let s=Ee.getRotationBetweenCoordinateSpaces(i,t);this.sprite.setRotation(e.rotation+s),this.operation.setDirty(!0)}setPivot(e,t){typeof e=="number"?super.setPivot(e,t):super.setPivot(e),this.updatePivot()}getOperation(){return this.operation}getLayoutID(){return this.layoutID}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}updatePivot(){let e=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,t=new L(this.bounds.width-2*e,this.bounds.height-2*e),i=this.getPivot(),o=new L(i.x*this.bounds.width,i.y*this.bounds.height),n=new L(e,e),a=o.subtract(n).divide(t);this.sprite.setPivot(new gt(a.x,a.y))}}});var zr,Rw,hf,Cue=m(()=>{jy();Ye();V();Y();uo();bM();gue();vM();bue();yue();wM();TM();EM();DM();RM();FM();AM();MM();_ue();vue();xue();_u();({BLEND_MODES:zr}=Se.Operations.OverlayOperation),Rw="imgly_font_open_sans_bold",hf=class extends fM{constructor(e){super(e);this.previews=Array();this.rootOperationStack=[];this.deferredRenderQueue=[];this.operationStackOffset=1;this.enforceOperationOrder=()=>{this.refreshFlipIndex(),this.refreshFrameIndex()};this.isSpriteTop=e=>this.rootOperationStack.findIndex(({id:i})=>e===i)+1===this.rootOperationStack.length;this.setWatermarkOpacity=e=>{let i=this.sdk.getOperationsStack().getByIdentifier("watermark");i&&i.set({alpha:e})};var i,o;this.assetProvider=e.assetProvider||new _b;let t;if(((i=e==null?void 0:e.watermark)==null?void 0:i.watermarkURI)&&typeof e.watermark.watermarkURI=="string"&&e.watermark.watermarkURI.slice(0,5)==="data:"?t=e.watermark.watermarkURI:((o=e==null?void 0:e.watermark)==null?void 0:o.watermarkURI)&&typeof e.watermark.watermarkURI=="string"&&e.watermark.watermarkURI.trim()&&(t=Ls(e.watermark.watermarkURI)?e.watermark.watermarkURI:this.assetProvider.getPath(e.watermark.watermarkURI)),this.wrapper=new Ml({license:e.license,crossOrigin:e.crossOrigin,assets:{resolver:(n,s)=>this.resolveAssetForSDK(n,s)},editor:{preferredRenderer:e.preferredRenderer,pixelRatio:1},watermark:U(T({},ke(e.watermark)),{watermarkURI:t})}),this.editor=this.wrapper.getEditor(),this.sdk=this.editor.getSDK(),this.sdk.setRenderMode("adapter"),this.tempCanvas=document.createElement("canvas"),this.sdk.setCanvas(this.tempCanvas),e.preferredRenderer==="webgl"){let n=document.createElement("canvas"),s=n.getContext("webgl")||n.getContext("experimental-webgl");this.maxTextureDimension=s.getParameter(s.MAX_TEXTURE_SIZE)}else this.maxTextureDimension=1/0}get configuration(){return this.config}get pesdk(){return this.sdk}get rootOperations(){return this.rootOperationStack}dispose(){this.pesdk.dispose(),this.wrapper.dispose()}render(e){return new Promise(t=>{let i=()=>new Promise(o=>{let{canvas:n}=e,s=e.getTransform(),a=this.outputContainer.getPivot(),l=e.getCanvasBounds(),c=e.quality,{tempCanvas:u}=this;this.sdk.setTextureQuality(c);let d=this.sdk.getOutputDimensions();return u.width=d.x,u.height=d.y,this.sdk.getRenderer().resizeTo(new gt(u.width,u.height)),this.sdk.render(!0).then(()=>{let p=n.getContext("2d");p.clearRect(0,0,n.width,n.height),p.save(),p.translate(-l.minX,-l.minY),p.translate(s.position.x,s.position.y),p.rotate(s.rotation),p.scale(s.scale.x,s.scale.y),p.translate(-a.x*u.width,-a.y*u.height),p.scale(1/e.quality,1/e.quality),p.drawImage(u,0,0),p.restore(),t(),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?(this.sdk.setAllOperationsToDirty(),Promise.resolve(this.deferredRenderQueue[0]().then(o))):o()})});this.deferredRenderQueue.push(i),this.deferredRenderQueue.length===1&&i()})}createPreview(e){let t=new mM(e,this);return this.previews.push(t),t}export(){return de(this,arguments,function*(e=Qr.IMAGE,t=Ir.PNG,i=1){return new Promise(o=>{let n=()=>new Promise(s=>this.sdk.export(this.mapToRenderType(e),this.mapToImageFormat(t),i).then(a=>{o(a),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?Promise.resolve(this.deferredRenderQueue[0]().then(s)):s()}));this.deferredRenderQueue.push(n),this.deferredRenderQueue.length===1&&n()})})}getRootContainers(){return[this.rootContainer]}getOutputContainer(){return this.outputContainer}findContainerByID(e){return e===this.rootContainer.getID()?this.rootContainer:this.rootOperationStack.find(t=>t.getID()===e)}findEffectByID(e){return this.rootOperationStack.find(t=>t.getID()===e)}addImage(e,t,i){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");let o=new kw(e,this);if(this.rootContainer=o,!this.outputContainer){let{width:n,height:s}=o.getBounds(),a={resolution:{width:n,height:s},flipHorizontally:!1,flipVertically:!1},l=this.sdk.createOperation("output",{},!1),c=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(l,this.operationStackOffset-1),this.insertIntoOperationsStack(c,this.operationStackOffset),this.outputContainer=new Ew(a,l,c,this)}return o}addSticker(e,t,i){if(!t)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(t);let o=new Dw(e,this);return this.addToStackAtIndex(o,i),o}addStickerFromAssets(e,t,i){if(!t)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(t),new Promise((o,n)=>{let s=new Image;s.onload=()=>{let a={image:s,opacity:1},l=new Dw(a,this);this.addToStackAtIndex(l,i),o(l)},s.onerror=a=>{n(a)},s.crossOrigin=this.config.crossOrigin||null,s.src=this.assetProvider.getAssetSource("sticker",e)})}addText(e,t,i){if(!t)throw new Error("This engine does not support adding text as root elements.");if(!this.assetProvider.getFontManager().isFontLoaded(e.fontIdentifier||Rw))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(t);let n=T({text:"",fontIdentifier:Rw,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),s=new Ll(n,this);return this.addToStackAtIndex(s,i),s}addTextWithFontLoading(e,t,i){if(!t)throw new Error("This engine does not support adding text as root elements.");let o=this.assetProvider.getFontManager(),n=e.fontIdentifier||Rw;return new Promise((s,a)=>{o.loadFontWithIdentifier(n).then(()=>{this.ensureContainerIsRoot(t);let l=T({text:"",fontIdentifier:Rw,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),c=new Ll(l,this);this.addToStackAtIndex(c,i),s(c)}).catch(a)})}addTextDesignAsync(e="imgly_text_design_blocks",t,i,o){return de(this,null,function*(){if(!i)throw new Error("This engine does not support adding TextDesign as a root element.");let n=T({seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},t),s=this.wrapper.getTextDesignLayoutByID(e);if(!s)throw new Error(`The layout could not be loaded for the given id: ${e}`);let a=s.getImagePaths().map(h=>{let f=h.split("/").pop()||"";return{path:h,fullPath:this.assetProvider.getAssetSource("textdesign",f)}}),l=this.wrapper.getTextDesignAssetManager(),u=this.wrapper.getTextDesignFontManager().getVariationsByIdentifier();l.setFonts(u),yield l.loadImages(a),s.onImagesLoaded();let d=Object.keys(u);return this.assetProvider.getFontManager().loadFontsWithIdentifiers(d).then(()=>{this.ensureContainerIsRoot(i);let h=new xp(n,s,this);return this.addToStackAtIndex(h,o),Promise.resolve(h)})})}addDrawing(e,t,i){if(!t)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(t);let o=new yM(e,this);return this.addToStackAtIndex(o,i),o}addGaussianBlur(e,t,i){this.ensureContainerIsRoot(t);let o=new SM(e,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(o,i),o}addRadialBlur(e,t,i){this.ensureContainerIsRoot(t);let o=new PM(e,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(o,i),o}addMirroredBlur(e,t,i){this.ensureContainerIsRoot(t);let o=new OM(e,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(o,i),o}addLinearBlur(e,t,i){this.ensureContainerIsRoot(t);let o=new kM(e,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(o,i),o}addDuoToneFilter(e,t,i){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")}addDuoToneFilterFromAssets(e,t,i){this.ensureContainerIsRoot(t);let n=this.sdk.getOperationsStack().getByIdentifier("filter");n&&n.getIdentifier()!==e&&this.sdk.removeOperation(n);let s=n||this.sdk.createOperation("filter",{identifier:e},!1);return new Promise((a,l)=>{try{let c=this.assetProvider.getDuotoneFilterAsset(e),u={colorIntensity:c.defaultIntensity||0},d=new Se.Operations.FilterOperation.Filters.DuoToneFilter({intensity:u.colorIntensity,lightColor:Se.Color.fromHex(c.lightColor),darkColor:Se.Color.fromHex(c.darkColor)}),p=new _M(d,s,u,this);this.addToStackAtIndex(p,i),a(p)}catch(c){c&&l(c)}})}addLUTFilter(e,t,i){throw new Error("Not supported! Use addLUTFilterFromAssets instead")}addLUTFilterFromAssets(e,t,i){this.ensureContainerIsRoot(t);let n=this.sdk.getOperationsStack().getByIdentifier("filter");n&&n.getIdentifier()!==e&&this.sdk.removeOperation(n);let s=n||this.sdk.createOperation("filter",{identifier:e},!1);return this.getLutFilterImage(e).then(a=>{let l=this.assetProvider.getLUTFilterAsset(e),c={horizontalTileCount:l.horizontalTileCount||5,verticalTileCount:l.verticalTileCount||5,intensity:l.defaultIntensity||1},u=new Se.Operations.FilterOperation.Filters.ThreeDLUTFilter(U(T({},c),{image:a})),d=U(T({},c),{lutImage:new Image}),p=new IM(u,s,d,this);return this.addToStackAtIndex(p,i),p})}getLutFilterImage(e){return new Promise((t,i)=>{XO({src:this.assetProvider.getAssetSource("filter",e),crossOrigin:this.config.crossOrigin||null,key:"filter",resolve:t,reject:i})})}addAdjustments(e,t,i){this.ensureContainerIsRoot(t);let o=new gM(e,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(o,i),o}addOverlay(e,t,i){this.ensureContainerIsRoot(t);let o=new Iw(this.sdk.createOperation("overlay",{},!1),e,this);return this.addToStackAtIndex(o,i),o}addOverlayFromAssets(e,t,i){return this.ensureContainerIsRoot(t),new Promise((o,n)=>{XO({src:this.assetProvider.getAssetSource("overlay",e),crossOrigin:this.config.crossOrigin||null,key:"overlay",resolve:s=>{let a=this.sdk.getOperationsStack(),l=a.getByIdentifier("overlay");l&&l.getIdentifier()!==e&&a.remove(l);let c=l||this.sdk.createOperation("overlay",{},!1),u={image:s,opacity:1,blendMode:Ue.NORMAL},d=new Iw(c,u,this);this.addToStackAtIndex(d,i),o(d)},reject:n})})}addFrame(e,t,i){throw new Error("Not supported!")}addFrameFromAssets(e,t,i){return de(this,null,function*(){this.ensureContainerIsRoot(t);let o=this.assetProvider.getFrameAsset(e);if(!o)throw new Error(`The requested asset does not exist! ${e}`);let n=new xM(o,this);yield n.load();let s=this.getOutputContainer().getBounds(),a=Math.min(s.width,s.height),l=this.sdk.createOperation("frame",{},!1);l.setFrame(n.getFrame());let c={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*a),imageGroups:n.getFrame().imageGroups},u=new CM(l,c,this);return this.addToStackAtIndex(u,i),Promise.resolve(u)})}removeEffect(e){if(!e.isValid())return;let i=e.getOperation();this.sdk.removeOperation(i),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}removeContainer(e){if(!e.isValid()||e.type==="output")return;let i=e.getOperation();this.sdk.removeOperation(i),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}refreshOutputIndex(){let e=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(e,this.operationStackOffset-1)}refreshFlipIndex(){let e=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),t=this.sdk.getOperationsStack().getStack().length-1;e!==t&&this.moveInOperationsStack(e,t)}refreshFrameIndex(){let e=this.sdk.getOperationsStack().getIndexByIdentifier("frame"),t=this.sdk.getOperationsStack().getStack().length-1;e!==-1&&e!==t&&this.moveInOperationsStack(e,t)}mapToRenderType(e){switch(e){case Qr.IMAGE:return Se.RenderType.IMAGE;case Qr.DATA_URL:return Se.RenderType.DATAURL;case Qr.BLOB:return Se.RenderType.BLOB;case Qr.MSBLOB:return Se.RenderType.MSBLOB;default:return Se.RenderType.IMAGE}}mapToImageFormat(e){switch(e){case Ir.PNG:return Se.ImageFormat.PNG;case Ir.JPEG:return Se.ImageFormat.JPEG;default:return null}}mapBlendMode(e){switch(e){case zr.NORMAL:return Ue.NORMAL;case zr.OVERLAY:return Ue.OVERLAY;case zr.HARD_LIGHT:return Ue.HARD_LIGHT;case zr.SOFT_LIGHT:return Ue.SOFT_LIGHT;case zr.MULTIPLY:return Ue.MULTIPLY;case zr.DARKEN:return Ue.DARKEN;case zr.LIGHTEN:return Ue.LIGHTEN;case zr.SCREEN:return Ue.SCREEN;case zr.COLOR_BURN:return Ue.COLOR_BURN;default:return Ue.NORMAL}}reverseMapBlendMode(e){switch(e){case Ue.NORMAL:return zr.NORMAL;case Ue.OVERLAY:return zr.OVERLAY;case Ue.HARD_LIGHT:return zr.HARD_LIGHT;case Ue.SOFT_LIGHT:return zr.SOFT_LIGHT;case Ue.MULTIPLY:return zr.MULTIPLY;case Ue.DARKEN:return zr.DARKEN;case Ue.LIGHTEN:return zr.LIGHTEN;case Ue.SCREEN:return zr.SCREEN;case Ue.COLOR_BURN:return zr.COLOR_BURN;default:return zr.NORMAL}}createSpriteOperation(){return this.sdk.createOperation("sprite",{},!1)}moveIndex(e,t){let i=this.getSiblingIndex(e);if(i===-1)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,i,t);let o=this.operationStackOffset;this.moveInOperationsStack(i+o,t+o),this.enforceOperationOrder()}ensureContainerIsRoot(e){if(e.getID()!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")}addToStackAtIndex(e,t){if(t&&t<0)throw new Error(`The given index may not be negative: ${t}`);t===void 0?this.rootOperationStack.push(e):this.rootOperationStack.splice(t,0,e);let i=this.rootOperationStack.length-1,o=t!==void 0?t:i;o+=this.operationStackOffset,Jce(e)?this.insertIntoOperationsStack(e.getOperation(),o):this.insertIntoOperationsStack(e.getOperation(),o),this.sdk.setAllOperationsToDirty()}insertIntoOperationsStack(e,t){let i=this.sdk.getOperationsStack().getStack(),o=i.length,n=Math.max(Math.min(t,o),0);for(let s=o-1;s>=n;s-=1){let a=i[s];i[s+1]=a}i[n]=e,this.sdk.setAllOperationsToDirty(),this.enforceOperationOrder()}moveInStack(e,t,i){let o=e.length,n=Math.max(Math.min(t,o-1),0),s=Math.max(Math.min(i,o-1),0);if(n===s)return;let a=e[n];if(n<s)for(let l=n+1;l<=s;l+=1)e[l-1]=e[l];else for(let l=n-1;l>=s;l-=1)e[l+1]=e[l];e[s]=a}moveInOperationsStack(e,t){let i=this.sdk.getOperationsStack().getStack(),o=i.length,n=Math.min(Math.max(0,e),o-1),s=Math.min(Math.max(0,t),o-1);if(n===s)return;let a=i[n];if(n<s)for(let l=n+1;l<=s;l+=1)i[l-1]=i[l];else for(let l=n-1;l>=s;l-=1)i[l+1]=i[l];i[s]=a,this.sdk.getOperationsStack().setAllToDirty()}getSiblingIndex(e){return e.getIndexInParent()}resolveAssetForSDK(e,t){switch(t=t,e){case"filter":return this.assetProvider.getAssetSource("filter",t.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",t.identifier);case"font":return this.assetProvider.getAssetSource("font",t.identifier)}return""}}});var Fw,Sue=m(()=>{jy();V();Fw=class{constructor(e){this.isEmpty=!1;this.isValid=!1;this.isWhiteLabel=()=>this.isValid&&this.licenseChecker.isWhiteLabel();this.areCustomAssetsAllowed=()=>this.isEmpty||!this.isValid||this.licenseChecker.areCustomAssetsAllowed();e&&e.length!==0?(this.licenseChecker=new Se.LicenseChecker(e),this.isValid=this.licenseChecker.validate()):e===""&&(this.isEmpty=!0)}isToolAllowed(e){return this.licenseChecker&&this.isValid&&e!==w.CUSTOM?this.licenseChecker.isToolAllowed(e):!0}}});var wue=m(()=>{Cue();vu();ns();TM();FM();wM();MM();RM();EM();vM();DM();bM();AM();BM();Sue()});var zl=m(()=>{wue();uo()});var zM,Tue,Ul,ss,mo,UM,Ho=m(()=>{zl();zM=r=>{let e=Number(r).toString(16);return e.length<2&&(e=`0${e}`),e},Tue=(r,e,t)=>{let i=zM(r*255),o=zM(e*255),n=zM(t*255);return`#${i}${o}${n}`},Ul=r=>{if(ww(r)){let[e,t,i,o]=r;return`rgba(${e*255}, ${t*255}, ${i*255}, ${o})`}if(Sw(r)){let{r:e,g:t,b:i,a:o}=r;return`rgba(${e*255}, ${t*255}, ${i*255}, ${o})`}if(Cw(r)){let[e,t,i]=r;return Tue(e,t,i)}if(xw(r)){let{r:e,g:t,b:i}=r;return Tue(e,t,i)}return r},ss=r=>r.map(e=>({identifier:e.name,color:e.color,colorString:Ul(e.color)})),mo={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]},UM={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]}});var Aw,NM=m(()=>{V();Aw=[w.LIBRARY,[w.TRANSFORM,w.FILTER,w.ADJUSTMENT],[w.FOCUS,w.FRAME,w.OVERLAY],[w.TEXT,w.TEXT_DESIGN,w.STICKER,w.BRUSH]]});var xu,Pw=m(()=>{V();Y();NM();xu={license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[Ve.UNDO,Ve.REDO,Ve.EXPORT,Ve.CLOSE],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,displaySerializationModal:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:X$()?"webgl":"canvas"},enableZoom:!0,scaleImageToFit:!0,restrictZoomOutToDefault:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:w.FILTER,tools:Aw,snapping:new R0,filter:new M0,focus:new L0,adjustment:new P0,library:new j0,overlay:new W0,sticker:new G0,text:new V0,textdesign:new K0,frame:new z0,brush:new $0,transform:new X0,export:{image:{exportType:Qr.IMAGE,format:Ir.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{},watermark:new A0}});var kue=m(()=>{});var Cp,Mw=m(()=>{V();Cp={[Je.BRIGHTNESS]:0,[Je.SATURATION]:0,[Je.CONTRAST]:0,[Je.GAMMA]:0,[Je.CLARITY]:0,[Je.EXPOSURE]:0,[Je.SHADOWS]:0,[Je.HIGHLIGHTS]:0,[Je.WHITES]:0,[Je.BLACKS]:0,[Je.TEMPERATURE]:0,[Je.SHARPNESS]:0}});var ff,Eue=m(()=>{Ye();ff=class{constructor(){this.snapshots=[];this.observeIndex=ge.box(-1)}addSnapshot(e){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(e)):this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(e)],this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[],this.observeIndex.set(-1)}undo(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}redo(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}discardSnapshotsfromIndex(e){e>0&&e<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,e),this.observeIndex.set(this.snapshots.length-1))}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};g([k],ff.prototype,"index",1),g([k],ff.prototype,"canUndo",1),g([k],ff.prototype,"canRedo",1)});var ze,Sp,gf=m(()=>{Ye();V();Eue();(function(i){i.ADD="add",i.EDIT="edit",i.DELETE="delete"})(ze||(ze={}));Sp=class{constructor(e){this.awaitHistoryChange=!1;this.isDirtySinceSave=!1;this.undo=()=>de(this,null,function*(){if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo(),this.awaitHistoryChange=!0;let e=this.appHistoryManager.undo();yield this.applyState(e),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1)}});this.redo=()=>de(this,null,function*(){if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo(),this.awaitHistoryChange=!0;let e=this.appHistoryManager.redo();yield this.applyState(e),this.awaitHistoryChange=!1}});this.editor=e,this.appHistoryManager=new ff}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){let e=ke(this.editor.adjustmentsToolStore.state),t=ke(this.editor.filterToolStore.state),i=this.editor.focusToolStore.getFocusStateForHistory(),o=ke(this.editor.overlayToolStore.state),n=ke(this.editor.frameToolStore.state),{strokes:s}=this.editor.brushToolStore,a=this.editor.spriteStore.getSpriteHistoryState(),l=this.editor.transformToolStore.serializableState;return{[w.ADJUSTMENT]:e,[w.FILTER]:t,[w.FOCUS]:i,[w.OVERLAY]:o,[w.FRAME]:n,[w.BRUSH]:s,sprite:a,[w.TRANSFORM]:l}}addInitialSnapshot(){let e=this.getHistoryState();this.appHistoryManager.addSnapshot({state:e,type:ze.ADD,description:"Initial State"})}addSnapshot(e,t,i){let o;e?e.sprite||e.transform?o=T(T({},this.getHistoryState()),e):o=e:o=this.getHistoryState(),this.appHistoryManager.addSnapshot({state:o,type:t,description:i}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0)}applyState(t){return de(this,arguments,function*({state:e}){try{if(e){let i=Object.keys(e);for(let o of i)switch(o){case w.FILTER:yield this.editor.filterToolStore.updateStateFromHistory(e[o]);break;case w.ADJUSTMENT:yield this.editor.adjustmentsToolStore.updateStateFromHistory(e[o]);break;case w.OVERLAY:yield this.editor.overlayToolStore.updateStateFromHistory(e[o]);break;case w.FRAME:yield this.editor.frameToolStore.updateStateFromHistory(e[o]);break;case w.FOCUS:yield this.editor.focusToolStore.updateStateFromHistory(e[o],this.editor.canvasStore.sizeVector);break;case w.BRUSH:yield this.editor.brushToolStore.updateStateFromHistory(e[o]);break;case"sprite":yield this.editor.spriteStore.updateStateFromHistory(e[o]);break;case w.TRANSFORM:this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e[o]),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),yield this.editor.wait();break}yield this.editor.renderPromise()}}catch(i){console.error(i),this.editor.modalStore.showActionModal({type:St.ERROR,identifier:"unexpectedError",error:i,handleConfirm:()=>{window.location.reload()}})}})}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1}getCurrentSpritesState(){var e,t;return(t=(e=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:e.state)==null?void 0:t.sprite}};g([I],Sp.prototype,"undo",2),g([I],Sp.prototype,"redo",2),g([k],Sp.prototype,"canUndo",1),g([k],Sp.prototype,"canRedo",1)});var yr,da=m(()=>{Y();yr=class{constructor(e,t){this.assets=[];this.entityMapper=e=>"items"in e?this.categoryMapper(e):this.itemMapper(e);this.categoryMapper=e=>e?U(T({},e),{thumbnailURI:this.getCategoryThumbnailURI(e),name:this.config.locale[e.identifier]||e.name,items:e.items.map(this.itemMapper)}):null;this.itemMapper=e=>U(T({},e),{thumbnailURI:this.getItemThumbnailURI(e),name:this.config.locale[e.identifier]||("name"in e?e.name:"")});this.getCategoryThumbnailURI=e=>e.thumbnailURI?Ls(e.thumbnailURI)||e.thumbnailURI.substr(0,10)==="data:image"?e.thumbnailURI:this.config.getAssetPath(e.thumbnailURI||""):"";this.getItemThumbnailURI=e=>{var i;if((i=e.thumbnailURI)==null?void 0:i.trim())return Ls(e.thumbnailURI)||e.thumbnailURI.substr(0,10)==="data:image"?e.thumbnailURI:this.config.getAssetPath(e.thumbnailURI||"");let t=e[this.config.itemFallbackKey];return t?this.config.getAssetPath(t):""};this.config=t,this.assets=e.map(this.entityMapper).filter(Boolean)}static isCategory(e){return Object.prototype.hasOwnProperty.call(e,"items")}get categories(){return this.assets.reduce((e,t)=>{if(yr.isCategory(t))return[...e,t]},[]).filter(Boolean)}get items(){return this.assets.reduce((e,t)=>yr.isCategory(t)?[...e,...t.items]:[...e,t],[]).filter(Boolean)}}});var Nl,Vy=m(()=>{Nl=class{constructor(e,t){this.from=e,this.to=t}contains(e){return this.from<=e&&e<=this.to}clamp(e){return Math.min(Math.max(this.from,e),this.to)}}});var CVe,bf,Iue=m(()=>{Ye();V();Vy();Mw();CVe=new Nl(-1,1),bf=class{constructor(e){this.editAdjustments=({type:e,value:t})=>{let i=CVe.clamp(t);this.state[e]=i};this.reset=()=>{Cr(()=>{this.indexInContainer===-1&&(Object.keys(Cp).forEach(e=>{this.state[e]=Cp[e]}),this.orderHelper.removeIndex(w.ADJUSTMENT))})};this.setAdjustmentEffect=e=>{let t=this.orderHelper.addIndex(w.ADJUSTMENT);return this.effect?this.effect.setProperties(e):this.effect=this.engineMediator.engine.addAdjustments(e,this.engineMediator.image.container,t),this.effect.getProperties()};this.removeAdjustmentEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.engineMediator=e,this.state=Cp}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get orderHelper(){return this.engineMediator.orderHelper}};g([ge],bf.prototype,"state",2),g([I],bf.prototype,"editAdjustments",2),g([I],bf.prototype,"reset",2)});var wt,Due=m(()=>{Ye();V();Y();gf();da();Mw();Iue();wt=class{constructor(e){this.dirty=ge.box(!1);this.editAdjustments=({type:e,value:t})=>{this.pureSetAdjustment({type:e,value:t}),this.editor.render()};this.toolSnapshot=()=>{(0,Pr.default)(this.state,Cp)?this.dirty.set(!1):this.dirty.set(!0),this.addSnapshot(ze.EDIT,w.ADJUSTMENT)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.toggleOptionSelection=e=>{this.selectedOption=e};this.pureSetAdjustment=({type:e,value:t})=>{let i=this.adjustmentsStore.setAdjustmentEffect({[e]:t});this.adjustmentsStore.editAdjustments({type:e,value:i[e]})};this.pureReset=()=>{this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""};this.reset=()=>{this.pureReset(),this.addSnapshot(ze.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=e=>{if(!(0,Pr.default)(e,this.state)){if((0,Pr.default)(e,Cp)){this.pureReset();return}Cr(()=>{this.dirty.set(Object.values(e).some(t=>t!==0)),Object.keys(e).forEach(t=>{this.pureSetAdjustment({type:t,value:e[t]})})})}};this.updateStateFromSerialization=e=>{this.updateStateFromHistory(e)};this.editor=e,this.adjustmentsStore=new bf(this.editor.engineMediator),this.selectedOption="";let t=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new yr(t,U(T({},this.config),{locale:T(T({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){let e=this.items.find(t=>t?t.identifier===this.selectedOption:!1);return e?e.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[w.ADJUSTMENT]}get locale(){return this.editor.configStore.locale[w.ADJUSTMENT]}};g([ge],wt.prototype,"selectedOption",2),g([ge],wt.prototype,"dirty",2),g([I],wt.prototype,"editAdjustments",2),g([I],wt.prototype,"toggleOptionSelection",2),g([I],wt.prototype,"pureSetAdjustment",2),g([I],wt.prototype,"pureReset",2),g([I],wt.prototype,"reset",2),g([I],wt.prototype,"updateStateFromHistory",2),g([I],wt.prototype,"updateStateFromSerialization",2),g([k],wt.prototype,"selectedAdjustmentType",1),g([k],wt.prototype,"isDirty",1),g([k],wt.prototype,"state",1),g([k],wt.prototype,"selectedOptionLabel",1),g([k],wt.prototype,"brightness",1),g([k],wt.prototype,"saturation",1),g([k],wt.prototype,"contrast",1),g([k],wt.prototype,"gamma",1),g([k],wt.prototype,"clarity",1),g([k],wt.prototype,"exposure",1),g([k],wt.prototype,"shadows",1),g([k],wt.prototype,"highlights",1),g([k],wt.prototype,"whites",1),g([k],wt.prototype,"blacks",1),g([k],wt.prototype,"temperature",1),g([k],wt.prototype,"sharpness",1),g([k],wt.prototype,"categories",1),g([k],wt.prototype,"items",1),g([k],wt.prototype,"config",1),g([k],wt.prototype,"locale",1)});var qM=m(()=>{Mw();Due()});var Bw,HM=m(()=>{Bw={identifier:"identity",intensity:1,isDuotone:!1}});var SVe,Cu,Oue=m(()=>{Ye();V();Vy();HM();SVe=new Nl(0,1),Cu=class{constructor(e){this.changeIdentifier=e=>{this.state.identifier=e};this.changeIfDuotone=e=>{this.state.isDuotone=e};this.changeIntensity=e=>{let t=SVe.clamp(e);this.state.intensity=t};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Bw.identifier,this.state.intensity=Bw.intensity,this.removeIndex())};this.setFilterEffect=({identifier:e,intensity:t,isDuotone:i})=>{let o=this.state,n=()=>{this.changeIdentifier(e),this.changeIntensity(t),this.changeIfDuotone(i)};this.removeFilterEffect();let s=this.engineMediator.orderHelper.addIndex(w.FILTER);return i?new Promise((a,l)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(e,this.engineMediator.image.container,s).then(c=>{n(),this.effect=c,this.effect.setProperties({colorIntensity:t}),a()}).catch(c=>{this.fallbackOnError(o),l(c)})}):new Promise((a,l)=>{this.engineMediator.engine.addLUTFilterFromAssets(e,this.engineMediator.image.container,s).then(c=>{n(),this.effect=c,this.effect.setProperties({intensity:t}),a()}).catch(c=>{this.fallbackOnError(o),l(c)})})};this.removeFilterEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.setEffectProperties=({intensity:e})=>this.effect?(this.state.isDuotone?this.effect.setProperties({colorIntensity:e}):this.effect.setProperties({intensity:e}),this.effect.getProperties()):null;this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(w.FILTER)};this.fallbackOnError=e=>{this.changeIdentifier(e.identifier),this.changeIntensity(e.intensity),e.identifier==="identity"&&this.removeIndex()};this.engineMediator=e,this.state=Bw}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};g([ge],Cu.prototype,"state",2),g([I],Cu.prototype,"changeIdentifier",2),g([I],Cu.prototype,"changeIfDuotone",2),g([I],Cu.prototype,"changeIntensity",2),g([I],Cu.prototype,"reset",2)});var Lw,_r,Rue=m(()=>{Ye();V();gf();da();Oue();Lw="identity",_r=class{constructor(e){this.selectFilter=(e,t=1)=>de(this,null,function*(){if(e!==this.identifier){let i=this.selectedCategory;yield this.filterStore.setFilterEffect({identifier:e,intensity:t,isDuotone:this.isOptionDuoTone(e)}),this.selectedCategory===Lw&&(this.selectedCategory=i),this.editor.render(),this.addSnapshot(ze.ADD,w.FILTER)}});this.changeIntensity=e=>{let t=this.isOptionDuoTone(this.identifier),i=this.filterStore.setEffectProperties({intensity:e});if(i){let o=t?i.colorIntensity:i.intensity;this.filterStore.changeIntensity(o),this.editor.render()}};this.setImageAndGetPreviews=()=>de(this,null,function*(){let{image:e}=this.editor.activeStore.state;yield this.editor.previewThumbnails.addImageToContainer(e),yield this.getAllFilterPreview()});this.getAllFilterPreview=()=>de(this,null,function*(){let e=this.entityManager.items.map(n=>({identifier:n.identifier,isDuotone:this.isOptionDuoTone(n.identifier)})),t=yield this.editor.previewThumbnails.getAllFilterPreviewThumbnails(e);yield this.editor.wait();let{config:i}=this,o=this.editor.configStore.assetProvider.getAssets("filter").map(n=>U(T({},n),{items:n.items.map(s=>U(T({},s),{thumbnailURI:t[s.identifier]}))}));this.entityManager=new yr(o,U(T({},i),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))});this.toolSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.controls.sliderIntensity)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.pureReset=()=>{this.selectedCategory=Lw,this.filterStore.removeFilterEffect(),this.filterStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(ze.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory===e?Lw:e};this.updateStateFromSerialization=({identifier:e,intensity:t})=>{let i=this.doesFilterAssetExist(e);if(i){let o=Xm(i);return this.filterStore.setFilterEffect({identifier:e,intensity:t,isDuotone:o})}return new Promise((o,n)=>{n(new Error(`Filter Asset ${e} doesn't exist`))})};this.updateStateFromHistory=e=>de(this,null,function*(){return e.identifier==="identity"?(this.pureReset(),new Promise(t=>{t()})):this.filterStore.setFilterEffect(e)});this.doesFilterAssetExist=e=>this.entityManager.items.find(t=>e===t.identifier);this.isOptionDuoTone=e=>{let t=this.doesFilterAssetExist(e);return t?Xm(t):!1};this.editor=e,this.selectedCategory=Lw,this.filterStore=new Cu(this.editor.engineMediator);let{config:t}=this,i=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new yr(i,U(T({},t),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[w.FILTER]}get locale(){return this.editor.configStore.locale[w.FILTER]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};g([ge],_r.prototype,"selectedCategory",2),g([ge],_r.prototype,"entityManager",2),g([I],_r.prototype,"selectFilter",2),g([I],_r.prototype,"changeIntensity",2),g([I],_r.prototype,"pureReset",2),g([I],_r.prototype,"reset",2),g([I],_r.prototype,"toggleCategorySelection",2),g([I],_r.prototype,"updateStateFromSerialization",2),g([I],_r.prototype,"updateStateFromHistory",2),g([k],_r.prototype,"state",1),g([k],_r.prototype,"identifier",1),g([k],_r.prototype,"intensity",1),g([k],_r.prototype,"isDuotone",1),g([k],_r.prototype,"selectedCategoryIdentifier",1),g([k],_r.prototype,"isOptionSelected",1),g([k],_r.prototype,"config",1),g([k],_r.prototype,"locale",1),g([k],_r.prototype,"categories",1),g([k],_r.prototype,"items",1)});var jM=m(()=>{Rue();HM()});function WM(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)!=="[object RegExp]"&&Object.prototype.toString.call(r)!=="[object Date]"}function wVe(r){return Array.isArray(r)?[]:{}}function GM(r,e){return e&&e.clone===!0&&WM(r)?VM(wVe(r),r,e):r}function TVe(r,e,t){let i={};return WM(r)&&Object.keys(r).forEach(o=>{i[o]=GM(r[o],t)}),Object.keys(e).forEach(o=>{let n=WM(e[o])&&r[o];i[o]=n?VM(r[o],e[o],t):GM(e[o],t)}),i}function VM(r,e,t){return Array.isArray(e)?Array.isArray(r)?e:GM(e,t):TVe(r,e,t)}function ho(r,e=null){if(!Array.isArray(r)||r.length<2)throw new Error("first argument should be an array with at least two elements");return r.reduce((t,i)=>VM(t,i,e))}var wp=m(()=>{});var $M,KM=m(()=>{V();$M=class extends Eo{constructor(){super(...arguments);this.prevDimensions={width:0,height:0}}onExport(e){this.emit(le.EXPORT,e)}onClose(){this.emit(le.CLOSE)}onUndo(){this.emit(le.HISTORY_UNDO)}onRedo(){this.emit(le.HISTORY_REDO)}onHistoryChange(){this.emit(le.HISTORY_CHANGE)}onEditorReady(){this.emit(le.EDITOR_READY)}onErrorImageLoading(e){this.emit(le.ERROR_IMAGE_LOADING,e)}onImageLoaded(){this.emit(le.IMAGE_LOAD)}onStickerUploadedAdd(e){this.emit(le.STICKER_UPLOAD_ADD,e)}onToolChanged(e){this.emit(le.TOOL_ENTER,e)}onErrorWebGLContextLost(){this.emit(le.ERROR_WEBGL_CONTEXT_LOST)}onCropDimensionsChanged(e){(this.prevDimensions.width!==e.width||this.prevDimensions.height!==e.height)&&(this.emit(le.CROP_DIMENSIONS_CHANGE,e),this.prevDimensions=e)}}});var XM,Fue=m(()=>{wp();Pw();XM=ho([xu,{layout:"basic",defaultTool:null}])});var Aue=m(()=>{Pw();Fue()});var YM,Pue=m(()=>{V();YM={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t"},categories:{[Nt.DuoTone]:"DuoTone",[Nt.BW]:"B & W",[Nt.Vintage]:"Vintage",[Nt.Smooth]:"Smooth",[Nt.Cold]:"Cold",[Nt.Warm]:"Warm",[Nt.Legacy]:"Legacy"},items:{[M.Inferno]:"Inferno",[M.Chestnut]:"Chestnut",[M.Fixie]:"Fixie",[M.Fridge]:"Fridge",[M.Sunny70s]:"Sunny 70s",[M.FlatBlack]:"Flat Black",[M.Mellow]:"Mellow",[M.HardStuff]:"Hard Stuff",[M.Oldtimer]:"Oldtimer",[M.AD1920]:"1920 A.D.",[M.Ancient]:"Ancient",[M.Kalmen]:"Kalmen",[M.Joran]:"Joran",[M.Polaroid]:"Polaroid",[M.Zephyr]:"Zephyr",[M.Levante]:"Levante",[M.Greyed]:"Greyed",[M.Classic]:"Classic",[M.Colorful]:"Colorful",[M.Snappy]:"Snappy",[M.Candy]:"Candy",[M.Creamy]:"Creamy",[M.LowFire]:"Low Fire",[M.Colla]:"Colla",[M.Sunrise]:"Sunrise",[M.Moss]:"Moss",[M.Food]:"Food",[M.Glam]:"Glam",[M.Gobblin]:"Gobblin",[M.HighCarb]:"High Carb",[M.Hicon]:"Hicon",[M.K1]:"K1",[M.K6]:"K6",[M.Pebble]:"Pebble",[M.Keen]:"Keen",[M.Lemon]:"Lemon",[M.Litho]:"Litho",[M.Lomo]:"Lomo",[M.Lomo100]:"Lomo 100",[M.Lucid]:"Lucid",[M.Neat]:"Neat",[M.Pumpkin]:"Pumpkin",[M.Solanus]:"Solanus",[M.Pale]:"Pale",[M.Pitched]:"Pitched",[M.Weathered]:"Weathered",[M.GreenGap]:"Green Gap",[M.PolaSX]:"Pola SX",[M.Pro400]:"Pro 400",[M.Quozi]:"Quozi",[M.Sepia]:"Sepia",[M.Settled]:"Settled",[M.Seventies]:"Seventies",[M.Soft]:"Soft",[M.Steel]:"Steel",[M.Summer]:"Summer",[M.Golden]:"Golden",[M.Tender]:"Tender",[M.Twilight]:"Twilight",[M.Softy]:"Softy",[M.Dusty]:"Dusty",[M.Desert]:"Desert",[M.Peach]:"Peach",[M.Clash]:"Clash",[M.Plum]:"Plum",[M.Breezy]:"Breezy",[M.DeepBlue]:"Deep Blue",[M.Frog]:"Frog",[M.Sunset]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{[Fe.Bokeh]:"Bokeh",[Fe.Chop]:"Chop",[Fe.Clouds]:"Clouds",[Fe.Golden]:"Golden",[Fe.Grain]:"Grain",[Fe.Hearts]:"Hearts",[Fe.LightLeak1]:"Light Leak 1",[Fe.LightLeak2]:"Light Leak 2",[Fe.Metal]:"Metal",[Fe.Mosaic]:"Mosaic",[Fe.Painting]:"Painting",[Fe.Paper]:"Paper",[Fe.Rain]:"Rain",[Fe.Vintage]:"Vintage",[Fe.Wall1]:"Wall",[Fe.Wall2]:"Wall 2",[Fe.Wood]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},[w.CUSTOM]:{title:"Benutzerdefiniert"}}});var Tp,Mue=m(()=>{V();Tp={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Reload"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{[Nt.DuoTone]:"DuoTone",[Nt.BW]:"B & W",[Nt.Vintage]:"Vintage",[Nt.Smooth]:"Smooth",[Nt.Cold]:"Cold",[Nt.Warm]:"Warm",[Nt.Legacy]:"Legacy"},items:{[M.Inferno]:"Inferno",[M.Chestnut]:"Chestnut",[M.Fixie]:"Fixie",[M.Fridge]:"Fridge",[M.Sunny70s]:"Sunny 70s",[M.FlatBlack]:"Flat Black",[M.Mellow]:"Mellow",[M.HardStuff]:"Hard Stuff",[M.Oldtimer]:"Oldtimer",[M.AD1920]:"1920 A.D.",[M.Ancient]:"Ancient",[M.Kalmen]:"Kalmen",[M.Joran]:"Joran",[M.Polaroid]:"Polaroid",[M.Zephyr]:"Zephyr",[M.Levante]:"Levante",[M.Greyed]:"Greyed",[M.Classic]:"Classic",[M.Colorful]:"Colorful",[M.Snappy]:"Snappy",[M.Candy]:"Candy",[M.Creamy]:"Creamy",[M.LowFire]:"Low Fire",[M.Colla]:"Colla",[M.Sunrise]:"Sunrise",[M.Moss]:"Moss",[M.Food]:"Food",[M.Glam]:"Glam",[M.Gobblin]:"Gobblin",[M.HighCarb]:"High Carb",[M.Hicon]:"Hicon",[M.K1]:"K1",[M.K6]:"K6",[M.Pebble]:"Pebble",[M.Keen]:"Keen",[M.Lemon]:"Lemon",[M.Litho]:"Litho",[M.Lomo]:"Lomo",[M.Lomo100]:"Lomo 100",[M.Lucid]:"Lucid",[M.Neat]:"Neat",[M.Pumpkin]:"Pumpkin",[M.Solanus]:"Solanus",[M.Pale]:"Pale",[M.Pitched]:"Pitched",[M.Weathered]:"Weathered",[M.GreenGap]:"Green Gap",[M.PolaSX]:"Pola SX",[M.Pro400]:"Pro 400",[M.Quozi]:"Quozi",[M.Sepia]:"Sepia",[M.Settled]:"Settled",[M.Seventies]:"Seventies",[M.Soft]:"Soft",[M.Steel]:"Steel",[M.Summer]:"Summer",[M.Golden]:"Golden",[M.Tender]:"Tender",[M.Twilight]:"Twilight",[M.Softy]:"Softy",[M.Dusty]:"Dusty",[M.Desert]:"Desert",[M.Peach]:"Peach",[M.Clash]:"Clash",[M.Plum]:"Plum",[M.Breezy]:"Breezy",[M.DeepBlue]:"Deep Blue",[M.Frog]:"Frog",[M.Sunset]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{[Fe.Bokeh]:"Bokeh",[Fe.Chop]:"Chop",[Fe.Clouds]:"Clouds",[Fe.Golden]:"Golden",[Fe.Grain]:"Grain",[Fe.Hearts]:"Hearts",[Fe.LightLeak1]:"Light Leak 1",[Fe.LightLeak2]:"Light Leak 2",[Fe.Metal]:"Metal",[Fe.Mosaic]:"Mosaic",[Fe.Painting]:"Painting",[Fe.Paper]:"Paper",[Fe.Rain]:"Rain",[Fe.Vintage]:"Vintage",[Fe.Wall1]:"Wall",[Fe.Wall2]:"Wall 2",[Fe.Wood]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},[w.CUSTOM]:{title:"Custom"}}});var $y=m(()=>{Pue();Mue();V()});var Bue,Lue,zue=m(()=>{wp();$y();Bue=r=>r==="de"?YM:Tp,Lue=(r,e)=>e&&e[r]?ho([Bue(r),e[r]]):Bue(r)||Tp});var Uue=m(()=>{});var kVe,EVe,zw,Ky=m(()=>{Uue();kVe={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},EVe={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},zw=()=>{let r=8,e=230,t=3*r,i=e-2*t,o=(i-2*r)/3,n=(i-r)/2;return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:e,paddingTop:2*r,paddingBottom:2*r,paddingLeft:t,paddingRight:t,marginBottom:0,controls:{gutter:2*r}},advancedCard:{small:{height:o,width:o},medium:{height:n,width:n},large:{height:86,width:i}},advancedSpacer:8,basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:kVe,zIndex:EVe}}});var IVe,Uw,Nue=m(()=>{IVe=({primary:r="#365afc",background:e="#0B0B0B",foreground:t="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{let i="rgba(255, 255, 255, 0.90)",o="rgba(255, 255, 255, 0.60)",n="rgba(255, 255, 255, 0.38)",s="#424242",a="#333333",l="#242424",c="#171717",u="#0B0B0B",d="rgba(255, 255, 255, 0.08)",p="rgba(0, 0, 0, 0.3)",h="rgba(89, 121, 252, 0.20)",f="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:e,foreground:t,primary:r,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:a,activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:i,outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:r,textSecondaryForeground:o,outlinedInactiveOverlayColor:p,textInactiveOpacity:"0.5",hoverOverlayColor:d},checkbox:{background:a,foreground:t,activeForeground:t,activeBackground:r,inactiveOpacity:f,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:r,activeOverlayColor:h,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:i,inactiveOverlayColor:p,hoverOverlayColor:d},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:o,borderColor:a,caretColor:n,listBackground:a,listBorderColor:a,listItemHoverBackground:s,listForeground:o,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:f},textInput:{foreground:i,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:a,inactiveOpacity:f},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:r,thumbBackground:c,thumbBorderColor:r,inactiveOpacity:f,hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:f},toolbar:{foreground:i,background:l,activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:f},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:a,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:t,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},Uw=IVe});var DVe,JM,que=m(()=>{DVe=({primary:r="#1e47fb",background:e="#FBFBFB",foreground:t="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{let i="rgba(0, 0, 0, 0.90)",o="rgba(0, 0, 0, 0.60)",n="rgba(0, 0, 0, 0.38)",s="#CCCCCC",a="#D4D4D4",l="#E6E6E6",c="#EEEEEE",u="#FBFBFB",d="rgba(125, 125, 125, 0.12)",p="rgba(30, 71, 251, 0.2)",h="rgba(0, 0, 0, 0.1)",f="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:e,foreground:t,primary:r,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:a,activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:r,textSecondaryForeground:o,outlinedInactiveOverlayColor:h,textInactiveOpacity:"0.5",hoverOverlayColor:d},checkbox:{background:a,foreground:t,activeForeground:t,activeBackground:r,inactiveOpacity:f,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:r,activeOverlayColor:p,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:h,hoverOverlayColor:d},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:o,borderColor:a,listBackground:a,caretColor:n,listForeground:o,listBorderColor:a,listItemHoverBackground:s,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:f},textInput:{foreground:i,hoverBorderColor:i,background:"transparent",borderColor:a,inactiveOpacity:f},slider:{trackColor:s,activeTrackColor:r,thumbBackground:c,thumbBorderColor:r,inactiveOpacity:f,hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:f},toolbar:{foreground:i,background:a,activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:c,shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:f},mainCanvasActionBar:{background:"transparent",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:t,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},JM=DVe});var Xy,ZM,jo,Yy=m(()=>{Ky();Nue();que();Xy=Uw(),ZM=zw(),jo=U(T({},Xy),{measurements:ZM})});var OVe,Hue,jue=m(()=>{wp();Yy();OVe=r=>r==="light"?JM:Uw,Hue=(r,e)=>{let t=OVe(r);if(e&&e[r]){let{primary:i,background:o,foreground:n}=e[r],s={primary:i,background:o,foreground:n},a=Object.keys(s).reduce((l,c)=>s[c]?U(T({},l),{[c]:s[c]}):l,{});return ho([t(a),e[r]])}return t()||Xy}});var RVe,Wue,Gue=m(()=>{wp();Ky();RVe=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","mainCanvasActionBar","colorItem","fontSystem"],Wue=r=>{let e=zw();if(r){let t={};return Object.keys(r).forEach(i=>{RVe.indexOf(i)!==-1&&(t[i]=r[i])}),ho([e,t])}return e}});var Vue=m(()=>{zue();jue();Gue()});var FVe,Wo,Nw=m(()=>{Ye();V();zl();Y();wp();KM();Aue();NM();$y();Vue();Yy();FVe={config:xu,locale:Tp,theme:Xy,measurements:ZM},Wo=class{constructor(){this.checkDefaultToolAvailability=(e,t)=>t.indexOf(e)!==-1;this.state=ge(FVe),this.events=new $M,this.licenseChecker=null}saveConfig(e){e.mainCanvasActions&&e.mainCanvasActions.length!==4&&(e.mainCanvasActions.length=4);let t=e.layout&&e.layout==="basic"?XM:xu,i=ho([t,e]);this.licenseChecker=new Fw(i.license),this.licenseChecker.areCustomAssetsAllowed()||(i.sticker.enableCustomUpload=!1);let o=Lue(i.language,i.custom.languages),n=Hue(i.theme,i.custom.themes),s=Wue(i.custom.measurements),{provider:a}=i.library,l=[];i.adjustment.categories=i.adjustment.categories.reduce((d,p)=>(d.push(U(T({},p),{items:p.items.filter(h=>RO[h.identifier]?!0:(l.push(h.identifier),!1))})),d),[]),l.length!==0&&console.error(`The following identifier are incorrect for the adjustment tool: ${l.join(", ")}`),delete i.language,delete i.custom.languages,delete i.custom.themes,delete i.library.provider;let c=i.tools.reduce((d,p)=>typeof p=="object"?[...d,...p]:[...d,p],[]);c.length||(console.error("Empty list input for tools"),c=Aw.reduce((d,p)=>typeof p=="object"?[...d,...p]:[...d,p],[])),c=c.filter(d=>this.licenseChecker.isToolAllowed(d)),i.defaultTool&&(this.checkDefaultToolAvailability(i.defaultTool,c)||(this.licenseChecker.isToolAllowed(i.defaultTool)&&console.warn(`Configured default tool ${i.defaultTool} is not a part of configured list of tools: [${c.join(" ")}]`),[i.defaultTool]=c)),i.tools=c,this.state.config=i,this.state.locale=o,this.state.theme=n,this.state.measurements=s;let u=this.buildCustomAssetsConfig();return this.assetProvider=new _b(u,this.licenseChecker.areCustomAssetsAllowed(),i.assetResolver),this.loadThemeFont(),a}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get tools(){return this.config.tools.reduce((e,t)=>typeof t=="string"?[...e,t]:[...e,"",...t],[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf(Ve.CLOSE)!==-1}loadThemeFont(){let{typography:e}=this.theme;e.skipLoading||this.assetProvider.getFontManager().injectFonts([e])}buildCustomAssetsConfig(){let e=this.tools,t=ke(this.state.config),i=this.state.config.assetBaseUrl,{theme:o}=this.state,n=e.indexOf(w.FILTER)!==-1?t[w.FILTER]:void 0,s=e.indexOf(w.FOCUS)!==-1?t[w.FOCUS]:void 0,a=e.indexOf(w.ADJUSTMENT)!==-1?t[w.ADJUSTMENT]:void 0,l=e.indexOf(w.STICKER)!==-1?t[w.STICKER]:void 0,c=e.indexOf(w.FRAME)!==-1?t[w.FRAME]:void 0,u=e.indexOf(w.OVERLAY)!==-1?t[w.OVERLAY]:void 0,d=e.indexOf(w.TRANSFORM)!==-1?t[w.TRANSFORM]:void 0,p=e.indexOf(w.TEXT)!==-1?t[w.TEXT]:void 0,h=e.indexOf(w.TEXT_DESIGN)!==-1?t[w.TEXT_DESIGN]:void 0;return{basePath:i,theme:o,filter:n,focus:s,sticker:l,frame:c,overlay:u,transform:d,text:p,adjustment:a,textdesign:h}}};g([I],Wo.prototype,"saveConfig",1),g([k],Wo.prototype,"config",1),g([k],Wo.prototype,"locale",1),g([k],Wo.prototype,"theme",1),g([k],Wo.prototype,"measurements",1),g([k],Wo.prototype,"tools",1),g([k],Wo.prototype,"defaultTool",1),g([k],Wo.prototype,"isOrderDefault",1),g([k],Wo.prototype,"isLayoutAdvanced",1),g([k],Wo.prototype,"displayCloseButton",1)});var QM,eB=m(()=>{V();IO();QM=class{constructor(e){this.editor=e}setBackgroundImage(e){this.container?this.container.setData({image:e,originalImage:e}):this.container=this.engine.addImage({image:e,originalImage:e,blendMode:Ue.NORMAL,opacity:1})}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((e,t)=>{let{image:i}=this.editor.activeStore;if(Z$(i))this.setBackgroundImage(i),e();else{let o=this.editor.libraryStore.getRawUrl(i);this.getImageElement(o).then(n=>{this.setBackgroundImage(n),e()}).catch(n=>{t({identifier:"imageLoading",message:n.message})})}})}getImageElement(e){return new Promise((t,i)=>{let o=new Image;o.addEventListener("load",()=>{t(o)}),o.addEventListener("error",n=>{i(n)}),o.crossOrigin=this.editor.configStore.config.engine.crossOrigin,o.src=e})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}}});var tB,rB=m(()=>{Y();tB=class{constructor(e){this.applyNewImageTransform=()=>{let{size:e,width:t,height:i}=this.editor.engineMediator.image.container.getBounds(),o=this.container;o.setTransform(Ot.IDENTITY),o.setResolution(e),o.setPivot(.5,.5),o.setPosition({x:t/2,y:i/2})};this.editor=e}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}}});var AVe,$ue,PVe,iB,Kue=m(()=>{AVe=(r,e)=>new Promise((t,i)=>{let o=new XMLHttpRequest;o.onload=()=>{let n=new FileReader;n.onloadend=()=>{typeof n.result=="string"&&n.result.substr(0,10)==="data:image"?t(n.result):i(new Error(`The image could not be loaded from ${r}`))},n.onerror=s=>{i(s)},n.readAsDataURL(o.response)},o.open("GET",r),o.responseType="blob",o.withCredentials=e==="use-credentials",o.send()}),$ue=(r,e)=>new Promise((t,i)=>{let o=new Image;o.onload=()=>{t(o)},o.onerror=()=>{i(new Error(`Failed to load image with src:${r}`))},o.crossOrigin=e,o.src=r}),PVe=(r,e)=>new Promise((t,i)=>{AVe(r,e).then(o=>{let n=new Image;n.addEventListener("load",()=>{t(n)}),n.src=o}).catch(()=>{$ue(r,e).then(o=>t(o)).catch(o=>{i(o)})})}),iB=i=>de(void 0,[i],function*({url:r,image:e,crossOrigin:t="anonymous"}){try{return e&&e.src&&e.src.substr(0,5)==="data:"||e&&e.src&&e.src.includes(".svg")?e:typeof r=="string"&&r.substr(0,5)==="data:"||typeof r=="string"&&r.includes(".svg")?$ue(r,t):PVe(r||e.src,t)}catch(o){throw new Error(o)}})});var MVe,Go,qw=m(()=>{Ye();V();Y();Kue();MVe={tool:null,isWebcam:!1,image:"",imageLoadedToEngine:!1},Go=class{constructor(e){this.setImage=e=>de(this,null,function*(){let{crossOrigin:t}=this.editor.configStore.config.engine;typeof e=="string"&&(this.state.image=yield iB({url:Ls(e)?e:this.editor.assetProvider.getPath(e),crossOrigin:t})),e instanceof HTMLImageElement&&(this.state.image=yield iB({image:e,crossOrigin:t})),this.isWebcam&&(this.state.isWebcam=!1)});this.setImageLoadedToEngine=e=>{this.state.imageLoadedToEngine=e};this.newImage=e=>{this.editor.init(e)};this.editor=e,this.state=ge(MVe)}selectTool(e){let{licenseChecker:t}=this.editor.configStore;if(this.state.tool!==e&&(t==null?void 0:t.isToolAllowed(e)))switch(this.editor.onToolChange(this.state.tool,e),this.state.tool=e,this.editor.configStore.events.onToolChanged(e),e){case w.TEXT:this.editor.configStore.config.text.addDefaultTextOnEnter&&this.editor.spriteStore.textToolStore.addOrselect();break;case w.TEXT_DESIGN:this.editor.configStore.config.textdesign.addDefaultTextOnEnter&&this.editor.spriteStore.textDesignToolStore.addOrselect();break;case w.BRUSH:{this.editor.brushToolStore.initSize();break}case w.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop();break;default:break}}selectWebcam(e){this.state.isWebcam=e}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};g([I],Go.prototype,"selectTool",1),g([I],Go.prototype,"selectWebcam",1),g([I],Go.prototype,"setImage",2),g([I],Go.prototype,"setImageLoadedToEngine",2),g([I],Go.prototype,"newImage",2),g([k],Go.prototype,"webcamLabel",1),g([k],Go.prototype,"tool",1),g([k],Go.prototype,"isWebcam",1),g([k],Go.prototype,"image",1),g([k],Go.prototype,"imageLoadedToEngine",1)});var BVe,oB,nB,Bi,Hw=m(()=>{Ye();V();Y();BVe={height:150,width:150},oB={height:0,width:0},nB=class{constructor(e){this.canvasClickDisabled=ge.box(!1);this.resizeCanvas=(e=null)=>{let t=this.editor.activeStore.tool,i=e===w.TRANSFORM||!e&&t===w.TRANSFORM,{isLayoutAdvanced:o,measurements:n}=this.editor.configStore,{storedSize:s}=this.editor.canvasStore,a=0;!o&&i&&(a=n.basicToolControlBar.controlsBarHeight*-1,e===w.TRANSFORM&&t===w.BRUSH&&(a-=n.basicToolControlBar.itemsBarHeight+4)),this.setCanvasSize({width:s.width,height:s.height+a})};this.setCanvasSize=e=>{this.state.canvasSize=e};this.editor=e,this.state=ge(nB.initialState)}setCanvasElement(e){this.canvas=e,this.editor.engineMediator.preview.createPreview(e),this.editor.init(this.editor.configStore.config.image)}saveDimensions({height:e,width:t,render:i}){let{imageLoadedToEngine:o}=this.editor.activeStore;e>oB.height&&t>oB.width&&(this.state.storedSize={width:t,height:e},this.state.canvasSize.height===0&&(this.state.canvasSize={width:t,height:e}),i&&o&&this.editor.resize())}disableCanvasClick(){this.canvasClickDisabled.set(!0)}enableCanvasClick(){this.canvasClickDisabled.set(!1)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return L.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(e){let t=this.editor.engine.getContainersAtPreviewPoint(e,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(i=>i.getID()).filter(i=>i!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(t)}},Bi=nB;Bi.initialState={canvasSize:oB,storedSize:BVe},g([I],Bi.prototype,"setCanvasElement",1),g([I],Bi.prototype,"saveDimensions",1),g([I],Bi.prototype,"resizeCanvas",2),g([I],Bi.prototype,"disableCanvasClick",1),g([I],Bi.prototype,"enableCanvasClick",1),g([I],Bi.prototype,"setCanvasSize",2),g([k],Bi.prototype,"isCanvasClickable",1),g([k],Bi.prototype,"canvasSize",1),g([k],Bi.prototype,"storedSize",1),g([k],Bi.prototype,"sizeVector",1),g([k],Bi.prototype,"sizeVectorMagnitude",1)});var LVe,En,jw=m(()=>{Ye();V();LVe={type:null,identifier:null,isVisible:!1,error:""},En=class{constructor(e){this.showActionModal=({type:e,identifier:t,error:i,handleConfirm:o,handleDismiss:n})=>{this.resetHandlers(),this.state.isVisible=!0,this.state.identifier=t,this.state.type=e,this.state.error=i||"",this.handleConfirm=o,this.handleDismiss=n};this.hideModal=()=>{this.state.isVisible=!1,this.state.type=null,this.state.error="",this.state.identifier=null,this.resetHandlers()};this.resetHandlers=()=>{this.handleConfirm=null,this.handleDismiss=null};this.configStore=e.configStore,this.state=ge(LVe)}showInfoModal(e){this.resetHandlers(),this.state.isVisible=!0,this.state.type=St.INFO,this.state.identifier=e,this.state.error=""}showTextEditModal(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=St.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""}get modalProps(){let{isVisible:e}=this.state,t=this.getModalLocale();if(t){let{bodyLabel:i,headerLabel:o,buttonYes:n,buttonNo:s}=t;return{headerLabel:o,bodyLabel:i,confirmLabel:n,dismissLabel:s,isVisible:e,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){let{isLayoutAdvanced:e,measurements:{basicCanvasOffset:t,advancedUIToolControlBar:i,advancedUIToolbar:o},isOrderDefault:n}=this.configStore,s=(i.width+o.width)*(n?1:-1);return e?{x:s/2,y:0}:{x:0,y:-t}}getModalLocale(){let{identifier:e,error:t,type:i}=this.state,{locale:o}=this.configStore;if(!i||!e||i===St.TEXT_EDIT)return null;if(i&&e&&o[`${i}Modals`]&&o[`${i}Modals`][e]){let n=o[`${i}Modals`][e],{body:s}=n;s&&typeof t=="object"?Object.keys(t).forEach(l=>{s=s.replace(`\${${l}}`,t[l])}):s&&(s=s.replace("${error}",t));let a=n.heading;if(i===St.ERROR||i===St.WARNING){let l={error:o.common.error,warning:o.common.warning};a=`${i==="error"?l.error:l.warning}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:s,headerLabel:a,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};g([I],En.prototype,"showActionModal",2),g([I],En.prototype,"showInfoModal",1),g([I],En.prototype,"showTextEditModal",1),g([I],En.prototype,"hideModal",2),g([k],En.prototype,"modalProps",1),g([k],En.prototype,"isVisible",1),g([k],En.prototype,"type",1),g([k],En.prototype,"identifier",1),g([k],En.prototype,"positionOffset",1)});var Or,Ww=m(()=>{Ye();Y();pa();Or=class{constructor(e){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(e=>e/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{this.canZoomIn&&(this.state.scaleIndex+=1,this.scaleRender())};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;let{maxOffsetX:e,maxOffsetY:t}=this.checkOffset({x:0,y:0});this.state.scaleIndex===this.defaultIndex&&(this.offset.y=t),this.state.scaleIndex===this.defaultIndex&&(this.offset.x=e),this.savePosition(),this.scaleRender()}};this.setOffset=e=>{let{canDragX:t,canDragY:i}=this.checkOffset(e);t&&(this.offset.x=e.x),i&&(this.offset.y=e.y),this.scaleRender()};this.editor=e}setInitialTransform(e=0){let t=Bt.devicePixelRatio,{scaleImageToFit:i}=this.editor.configStore.config,{transform:o}=this.editor.engineMediator.preview;Cr(()=>{let n=Math.abs(e||o.scale.x);this.setDefaultScale(i?n:Math.min(1*t,n)),this.setPosition(o.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){let{width:e,height:t}=this.editor.canvasStore.canvas;this.setPosition({x:e/2,y:t/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(e){this.state.position.x=e.x,this.state.position.y=e.y}savePosition(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}setDefaultScale(e){if(this.defaultScale!==1){let i=this.SCALE_LEVELS.findIndex(o=>o===this.defaultScale);i!==-1&&(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),...this.SCALE_LEVELS.slice(i+1)])}let t=this.SCALE_LEVELS.findIndex(i=>i===e);if(t!==-1)this.state.scaleIndex=t;else{let i=this.SCALE_LEVELS.findIndex((o,n)=>(n===0||this.SCALE_LEVELS[n-1]<e)&&e<o);i!==-1?(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),e,...this.SCALE_LEVELS.slice(i)],this.state.scaleIndex=i):(this.SCALE_LEVELS=[...this.SCALE_LEVELS,e],this.state.scaleIndex=this.SCALE_LEVELS.length-1)}this.defaultScale=e}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(e){let t=Math.max(window.devicePixelRatio||1,1),{scaledSize:i}=this,{previewSize:o}=this,n=this.editor.engineMediator.preview.initialTransform.position,s=this.getPositionWithOffset(e),a=(i.width-o.width)*t/2,l=(i.height-o.height)*t/2,c=n.x-s.x,u=n.y-s.y,d=Math.abs(c),p=Math.abs(u),h=c>0,f=u>0,_=d-a,x=p-l;return{canDragX:_<0,canDragY:x<0,maxOffsetX:h?-_:_,maxOffsetY:f?-x:x}}calculateScale(e=0,t=this.previewSize,i=this.defaultScale){let{width:o,height:n}=t,s=new L({x:o,y:n}),a=new L(Math.abs(s.x*Math.cos(e))+Math.abs(s.y*Math.sin(e)),Math.abs(s.x*Math.sin(e))+Math.abs(s.y*Math.cos(e))),l=s.subtract(a).divide(2).multiply(i).abs;return l.y>l.x?l.y*2/s.y+i:l.x*2/s.x+i}get defaultIndex(){return this.SCALE_LEVELS.findIndex(e=>e===this.defaultScale)}getPositionWithOffset(e=this.offset){let{position:t}=this;return{x:t.x-e.x,y:t.y-e.y}}scaleRender(e=!1){let t=this.editor.scale.getPositionWithOffset(),i=e?this.defaultScale:this.scale,o={x:i,y:i};this.editor.engineMediator.preview.container.setScale(o),this.editor.engineMediator.preview.container.setPosition(t),this.editor.engineMediator.preview.savePreviewTransform({scale:o,position:t,rotation:0}),e||this.editor.render()}get scale(){let e=this.state.scaleIndex;return e!==-1?this.SCALE_LEVELS[e]:this.defaultScale}get zoomLevel(){let e=Math.max(window.devicePixelRatio||1,1);return(this.scale/e*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){let{restrictZoomOutToDefault:e}=this.editor.configStore.config;return e?this.state.scaleIndex>this.defaultIndex:this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){let e=this.state.scaleIndex,t=e!==-1?this.SCALE_LEVELS[e]:this.defaultScale,{previewSize:i}=this;return{width:i.width*t/this.defaultScale,height:i.height*t/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};g([ge],Or.prototype,"state",2),g([I],Or.prototype,"in",2),g([I],Or.prototype,"out",2),g([I],Or.prototype,"setInitialTransform",1),g([I],Or.prototype,"resetScale",1),g([I],Or.prototype,"resetPosition",1),g([I],Or.prototype,"setPosition",1),g([I],Or.prototype,"savePosition",1),g([I],Or.prototype,"setDefaultScale",1),g([I],Or.prototype,"setScaleToDefault",1),g([k],Or.prototype,"scale",1),g([k],Or.prototype,"zoomLevel",1),g([k],Or.prototype,"canDrag",1),g([k],Or.prototype,"canZoomOut",1),g([k],Or.prototype,"canZoomIn",1),g([k],Or.prototype,"position",1),g([k],Or.prototype,"scaledSize",1)});var zVe,UVe,NVe,qVe,HVe,jVe,WVe,GVe,VVe,$Ve,KVe,XVe,YVe,JVe,ZVe,Yue,Xue=m(()=>{zVe="@photoeditorsdk/root",UVe="5.15.0",NVe="The most comprehensive photo editor SDK for HTML5",qVe="http://github.com/imgly/pesdk-html5",HVe="PhotoEditorSDK (img.ly GmbH) <contact@img.ly>",jVe="SEE LICENSE IN LICENSE.md",WVe=!0,GVe={},VVe={start:"yarn workspace @example/react start",build:"yarn sdk-script build","build:rollup":"yarn sdk-script build rollup","package:release":"cd dist/photoeditorsdk && npm publish","package:pre-release":"cd dist/photoeditorsdk && npm publish --tag next","lint:css":"stylelint './packages/**/*.tsx'","lint:ts":"eslint ./packages/**/*.{ts,tsx}","lint:ts-engine":"eslint ./engine/**/*.ts","lint:types":"tsc --noEmit -p tsconfig.json --skipLibCheck","lint:types-engine":"tsc --noEmit -p engine/tsconfig.json --skipLibCheck",lint:"run-p lint:*",test:"$(npm bin)/jest",e2e:"cypress open","e2e:server":"sdk-script ui -P 3000 -D build","e2e:ci":"CYPRESS_RETRIES=2 cypress run --browser chrome --headless",deploy:"yarn workspace examp run deploy:pages",docs:"rm -rf ./docs && typedoc",postinstall:"yarn sdk-script server:build"},$Ve={"@elv1n/cypress-plugin-snapshots":"1.4.4","@types/jest":"^24.0.11","@types/pixelmatch":"^5.2.2","@types/pngjs":"^3.4.2","@types/react":"^16.8.13","@types/react-dom":"^16.8.4","@types/styled-components":"4.4.0","@typescript-eslint/eslint-plugin":"4.6.0","@typescript-eslint/parser":"4.6.0",autoprefixer:"^9.7.4","cross-env":"^7.0.2",cypress:"6.6.0",eslint:"7.10.0","eslint-config-airbnb":"18.2.0","eslint-config-prettier":"6.12.0","eslint-import-resolver-typescript":"^2.3.0","eslint-plugin-cypress":"^2.11.2","eslint-plugin-import":"2.22.1","eslint-plugin-jsx-a11y":"6.3.1","eslint-plugin-no-only-tests":"^2.4.0","eslint-plugin-prettier":"3.1.4","eslint-plugin-react":"7.21.3",husky:"4.3.0",jest:"24.9.0",jsdoc:"^3.6.3","lint-staged":"10.4.0","lodash.defaults":"^4.2.0","mobx-react-devtools":"^6.1.1","native-url":"0.3.4","npm-run-all":"^4.1.5",prettier:"^2.0.5",react:"16.8.6","react-dom":"16.8.6","start-server-and-test":"1.11.5","styled-components":"4.4.1",stylelint:"^13.7.2","stylelint-config-recommended":"^3.0.0","stylelint-config-standard":"^20.0.0","stylelint-config-styled-components":"^0.1.1","stylelint-processor-styled-components":"^1.10.0","ts-jest":"24.3.0",typedoc:"^0.17.8",typescript:"3.8.3","utility-types":"^3.10.0"},KVe={"@juggle/resize-observer":"3.2.0","@reach/portal":"^0.13.0","can-use-dom":"0.1.0","lodash.debounce":"4.0.8","lodash.memoize":"4.1.2","lodash.throttle":"4.1.1",mobx:"4.15.7","mobx-react":"6.3.1",photoeditorsdk:"1.0.0","react-app-polyfill":"1.0.6","react-transition-group":"^4.4.1"},XVe={node:"10.x || 11.x || 12.x || 13.x || 14.x || 15.x"},YVe={eslint:"7.10.0"},JVe=["examples/server","examples/material-ui","examples/ssr","examples/react","packages/*","!packages/ui","packages/ui/*","!packages/ui/components","packages/ui/components/*","engine/*","test/*","scripts"],ZVe={hooks:{"pre-commit":"lint-staged","pre-push":"true"}},Yue={name:zVe,version:UVe,description:NVe,repository:qVe,author:HVe,license:jVe,private:WVe,bin:GVe,scripts:VVe,devDependencies:$Ve,dependencies:KVe,devEngines:XVe,resolutions:YVe,workspaces:JVe,husky:ZVe}});var kp,sB,Jue=m(()=>{V();zl();Xue();kp=class{constructor(e,t,i,o,n,s){this.mapImagePointToRelativeCropPoint=e=>{let t=Ee.pointFromSpaceToSpace(e,this.imageSpace,this.cropSpace,!1);return Ee.absoluteToRelativePoint(t,this.cropSpace,!1)};this.mapSizeToRelativeUnscaledCropSize=e=>e/Math.min(this.outputSize.height,this.outputSize.width);this.mapSizeToRelativeScaledCropSize=e=>e/Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y);this.getPointInDirection=(e,t=0,i=3)=>{let o=Math.tan(t),n=Math.sqrt(o**2+1);return{x:e.x+i/n,y:e.y+i*o/n}};this.previewPosition=e,this.previewSize=t,this.outputSize=i,this.imageSize=o,this.imageSpace=n,this.cropSpace=s,this.outputScale=s.getScale()}static serializeFilters(e){return{type:"filter",options:{intensity:e.intensity,identifier:e.identifier}}}static serializeAdjustments(e){return{type:"adjustments",options:e}}static serializeOverlay(e){return{type:"overlay",options:{identifier:e.identifier,intensity:e.opacity,blendMode:e.blendMode.replace(/[A-Z]/g,t=>` ${t.toLowerCase()}`)}}}static serializeMetaData(){return{platform:"html5",version:Yue.version,createdAt:new Date().toISOString()}}serialise(e,t,i){let o=kp.serializeMetaData(),n={width:this.imageSize.width,height:this.imageSize.height};t&&(n.type=i,n.data=t);let s=[],a=[],{adjustment:l}=e;Object.keys(l).map(_=>l[_]).filter(Boolean).length&&s.push(kp.serializeAdjustments(l));let{filter:c}=e;c.identifier!=="identity"&&s.push(kp.serializeFilters(c));let{overlay:u}=e;if(u.identifier!=="identity"&&a.push(kp.serializeOverlay(u)),e.transform){let{transform:_,orientation:x}=this.serializeTransform(e.transform),y=[_.options.start.x!==0,_.options.start.y!==0,_.options.end.x!==1,_.options.end.y!==1,_.options.rotation!==0],D=[x.options.rotation!==0,x.options.flipVertically!==!1,x.options.flipHorizontally!==!1];y.some(E=>E)&&s.push(_),D.some(E=>E)&&s.push(x)}let{frame:d}=e;d.identifier!=="identity"&&a.push(this.serialzeFrame(d));let{focus:p}=e;if(p.identifier!=="identity"&&s.push(this.serializeFocus(p)),e.sprite&&e.sprite.spriteIdList.forEach(_=>{let x=e.sprite.common[_];switch(x.tool){case"sticker":let y=e.sprite.sticker[_];a.push(this.serializeSticker(y,x,e.transform));break;case"text":let D=e.sprite.text[_];a.push(this.serializeText(D,x));break;case"textdesign":let E=e.sprite.textdesign[_];a.push(this.serializeTextDesign(E,x));break}}),e.brush.strokes.length&&a.push({type:"brush",options:{paths:e.brush.strokes.map(_=>({points:_.path.controlPoints.map(this.mapImagePointToRelativeCropPoint),brush:{color:{rgba:_.brush.color},size:_.brush.size,hardness:_.brush.hardness}}))}}),a.length){let _={type:"sprite",options:{sprites:a}};s.push(_)}let f={assets:{stickers:e.customStickers}};return{version:kp.version,meta:o,image:n,operations:s,assetLibrary:f}}serialzeFrame(e){return{type:"frame",options:{identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.color},size:this.mapSizeToRelativeUnscaledCropSize(e.width)}}}serializeFocus(e){let t=Math.sqrt(this.previewSize.width**2+this.previewSize.height**2);switch(e.identifier){case Ze.LINEAR:return{type:"focus",options:{type:"linear",options:{start:this.mapImagePointToRelativeCropPoint(e.linear.start),end:this.mapImagePointToRelativeCropPoint(e.linear.end),blurRadius:this.mapSizeToRelativeScaledCropSize(e.linear.blurRadius)}}};case Ze.RADIAL:return{type:"focus",options:{type:"radial",options:{start:this.mapImagePointToRelativeCropPoint(e.radial.center),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(e.radial.center,0,e.radial.radius)),blurRadius:this.mapSizeToRelativeScaledCropSize(e.radial.blurRadius),gradientRadius:.1}}};case Ze.MIRRORED:let{mirrored:i}=e;return{type:"focus",options:{type:"mirrored",options:{start:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(i.origin,i.rotation,t/2)),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(i.origin,i.rotation,-t/2)),size:this.mapSizeToRelativeScaledCropSize(e.mirrored.size),blurRadius:this.mapSizeToRelativeScaledCropSize(e.mirrored.blurRadius),gradientSize:.1}}};default:return{type:"focus",options:{type:"gaussian",options:{blurRadius:this.mapSizeToRelativeScaledCropSize(e.gaussian.blurRadius)}}}}}serializeSticker(e,t,i){return{type:"sticker",options:{position:this.mapImagePointToRelativeCropPoint(t.position),dimensions:{x:this.mapSizeToRelativeScaledCropSize(t.size.width),y:this.mapSizeToRelativeScaledCropSize(t.size.height)},rotation:t.rotation,flipVertically:(t.flipVertically||!1)!==(i.flipVertically||!1),flipHorizontally:(t.flipHorizontally||!1)!==(i.flipHorizontally||!1),identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.tintColor},tintMode:e.tintMode}}}serializeText(e,t){return{type:"text",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:!1,flipHorizontally:!1,fontIdentifier:e.identifier,fontSize:this.mapSizeToRelativeScaledCropSize(e.fontSize),maxWidth:this.mapSizeToRelativeScaledCropSize(e.width),text:e.text,lineHeight:e.lineHeight,color:{rgba:e.textColor},backgroundColor:{rgba:e.backgroundColor},alignment:e.alignment}}}serializeTextDesign(e,t){return{type:"textdesign",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:!1,flipHorizontally:!1,identifier:e.identifier,inverted:e.isInverted,text:e.text,seed:e.seed,width:this.mapSizeToRelativeScaledCropSize(e.width),padding:this.mapSizeToRelativeScaledCropSize(e.padding),color:{rgba:e.color}}}}serializeTransform(e){let{start:t,end:i}=e,o={type:"transform",options:{start:t,end:i,rotation:e.rotation,meta:{identifier:e.identifier}}},n={type:"orientation",options:{rotation:e.outputRotation,flipHorizontally:e.flipHorizontally,flipVertically:e.flipVertically}};return{transform:o,orientation:n}}},sB=kp;sB.version="3.9.0"});var Zue,bi,aB,Que=m(()=>{V();zl();Y();Zue=(r=Ir.PNG)=>`data:${r};base64,`,bi=class{constructor(e){this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=e=>{let t=Ee.relativeToAbsolutePoint(e,this.cropSpace,!1);return Ee.pointFromSpaceToSpace(t,this.cropSpace,this.imageSpace,!1)};this.mapRelativeCropSizeToScaledImageSize=e=>e*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y);this.mapRelativeCropSizeToUnscaledImageSize=e=>e*Math.min(this.outputSize.height,this.outputSize.width);this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return T({},e)}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,t=>t.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:!1,flipVertically:!1,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){return e&&e.rgba?e.rgba:[0,0,0,0]}static validateVersion(e){return bi.version===e}static checkIfPlatformHTML(e){return e==="html5"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||"none",tintColor:bi.deserialzeColor(e.tintColor)}}static checkIsSerialisationValid(e){if(typeof e!="string"&&bi.validateVersion(e.version))return!0;if(typeof e=="string")throw new Error("Invalid input of type string, please provide an object");return!1}static deserializeImage(e){let t={};return e.image&&(t.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(Zue(),""):""},t.image.data=t.image.data?Zue()+t.image.data:""),t}deserializeTransformation(e){let t={},i=e.operations.find(s=>s.type==="orientation"),o=e.operations.find(s=>s.type==="transform"),[n]=this.editor.engine.getRootContainers();return this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition,this.previewSize=this.editor.transformToolStore.maxCropMaskSize,this.imageSpace=n,t.transform=bi.initializeEmptyTransform(),i!=null&&(t.transform.outputRotation=i.options.rotation,t.transform.flipHorizontally=i.options.flipHorizontally||!1,t.transform.flipVertically=i.options.flipVertically||!1),o&&(t.transform.start=o.options.start,t.transform.end=o.options.end,t.transform.rotation=o.options.rotation||0,t.transform.identifier=o.options.meta?o.options.meta.identifier:""),t}deserialize(e){var n,s;let t={};(e.meta?!bi.checkIfPlatformHTML(e.meta.platform):!1)&&console.warn("Read serialisation from another Platform");let i=this.editor.engineMediator.output.container.getResolution(),{size:o}=this.editor.engineMediator.image.container.getBounds();return this.outputSize=i,this.imageSize=o,this.cropSpace=this.editor.engine.getOutputContainer(),this.outputScale=this.cropSpace.getScale(),e.operations.forEach(a=>{switch(a.type){case"filter":t.filter=bi.deserializeFilter(a.options);break;case"adjustments":t.adjustment=bi.deserializeAdjustments(a.options);break;case"focus":t.focus=this.deserializeFocus(a.options);break;case"sprite":let{sprites:l}=a.options;l.forEach(c=>{switch(c.type){case"frame":t.frame=this.deserializeFrame(c.options);break;case"overlay":t.overlay=bi.deserializeOverlay(c.options);break;case"brush":t.brush?t.brush.strokes.push(...this.deserializeBrush(c.options).strokes):t.brush=this.deserializeBrush(c.options);break;case"sticker":case"text":case"textdesign":t.sprite||(t.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}});let u=yt();t.sprite.spriteIdList.push(u),t.sprite.common[u]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(c.options.position),tool:w.STICKER,rotation:c.options.rotation||0,flipHorizontally:c.options.flipHorizontally,flipVertically:c.options.flipVertically},this.spriteOrder+=1,c.type===w.STICKER?(t.sprite.common[u].tool=w.STICKER,t.sprite.common[u].size={width:this.mapRelativeCropSizeToScaledImageSize(c.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(c.options.dimensions.y)},t.sprite.sticker[u]=bi.deserializeStickers(c.options)):c.type===w.TEXT?(t.sprite.common[u].tool=w.TEXT,t.sprite.text[u]=this.deserializeTexts(c.options)):c.type===w.TEXT_DESIGN&&(t.sprite.common[u].tool=w.TEXT_DESIGN,t.sprite.textdesign[u]=this.deserializeTextDesign(c.options));break;default:break}});break;default:break}}),e.assetLibrary&&(t.customStickers=((s=(n=e.assetLibrary)==null?void 0:n.assets)==null?void 0:s.stickers)||[]),t}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:bi.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(e.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(e.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(e.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(e.options)}}}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new L(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new L(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){let t=new L(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new L(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new L(this.mapRelativeCropPointToImageSpace(e.start)).add(new L(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(t.y,t.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:wc(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:bi.deserialzeColor(e.color),backgroundColor:bi.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:bi.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(t=>({path:{controlPoints:t.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:bi.deserialzeColor(t.brush.color),size:t.brush.size,hardness:t.brush.hardness}}))}}},aB=bi;aB.version="3.9.0"});var lB={};Ht(lB,{Deserializer:()=>aB,Serializer:()=>sB});var cB=m(()=>{Jue();Que()});var ede,QVe,e$e,t$e,Jy,tde=m(()=>{Ye();V();ede=/^data:image\/(.+?);base64,/,QVe=r=>ede.test(r),e$e=r=>r.match(/^data:([^;]+)/)[1],t$e=r=>r.replace(ede,""),Jy=class{constructor(e){this.applySerialization=(e,t,i,o)=>de(this,null,function*(){this.editor.resetToolStates();let n=this.editor.activeStore.tool===w.TRANSFORM;n||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),n||this.editor.transformToolStore.onLeave();let s=new t(this.editor),a="Unexpected error occured",l=t.deserializeImage(e);if(l.image&&l.image.data){let d=l.image.data;yield this.editor.setImage(d),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(d),yield this.editor.engineMediator.image.addImageToContainer(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms()}let c=s.deserializeTransformation(e);if(!c){o(a);return}yield this.applyStateOnUI(c);let u=s.deserialize(e);if(!u){o(a);return}yield this.applyStateOnUI(u),this.editor.historyStore.addInitialSnapshot(),yield this.editor.render(),this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),i()});this.editor=e}serialize({image:e}={image:!1}){let t=this.editor.activeStore.tool===w.TRANSFORM,{displaySerializationModal:i}=this.editor.configStore.config;return i&&this.editor.modalStore.showInfoModal("saving"),new Promise((o,n)=>{Promise.resolve().then(()=>(cB(),lB)).then(a=>de(this,[a],function*({Serializer:s}){try{t&&this.editor.transformToolStore.onLeave(),yield this.editor.wait(),this.editor.transformToolStore.applyDefaultCrop(!1);let{originalImage:l}=this.editor.imageContainer.getData(),c=this.editor.engineMediator.output.container.getResolution(),u={width:l.width,height:l.height},d=new s(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,c,u,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),p={[w.ADJUSTMENT]:ke(this.editor.adjustmentsToolStore.state),[w.FILTER]:ke(this.editor.filterToolStore.state),[w.FOCUS]:ke(this.editor.focusToolStore.serializableState),[w.OVERLAY]:ke(this.editor.overlayToolStore.state),[w.FRAME]:ke(this.editor.frameToolStore.state),[w.BRUSH]:this.editor.brushToolStore.strokes||{strokes:[]}},{sprite:h,customStickers:f}=yield this.editor.spriteStore.serializableState();h.spriteIdList=h.spriteIdList.sort((y,D)=>{let E=h.common[y].order,F=h.common[D].order;return E-F}),p.sprite=h,p.customStickers=f,p.transform=this.editor.transformToolStore.serializableState;let _,x;if(e){let y=Jy.getDataURL(l);x=e$e(y),_=t$e(y)}i&&this.editor.modalStore.hideModal(),o(d.serialise(p,_,x)),t&&this.editor.transformToolStore.onEnter()}catch(l){i&&this.editor.modalStore.hideModal(),n(l)}}))})}deserialize(e){return this.editor.modalStore.showInfoModal("loading"),new Promise((t,i)=>{try{Promise.resolve().then(()=>(cB(),lB)).then(({Deserializer:o})=>{o.checkIsSerialisationValid(e)?this.applySerialization(e,o,t,i):(this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({type:St.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(e,o,t,i)}))})}catch(o){this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),i(o)}})}static getDataURL(e){if(e instanceof HTMLImageElement){let{src:o}=e;if(QVe(o))return o}if(e instanceof HTMLCanvasElement)return e.toDataURL(Ir.PNG);let t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL(Ir.PNG)}applyStateOnUI(e){return de(this,null,function*(){let t=this.editor.activeStore.tool===w.TRANSFORM;try{e.transform&&(t||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e.transform),yield this.editor.wait(),t||(this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),yield this.editor.wait(),this.editor.transformToolStore.onLeave())),e.filter&&(yield this.editor.filterToolStore.updateStateFromSerialization(e.filter)),e.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(e.adjustment),e.focus&&(yield this.editor.focusToolStore.updateStateFromSerialization(e.focus)),e.overlay&&(yield this.editor.overlayToolStore.updateStateFromSerialization(e.overlay)),e.sprite&&(e.sprite.spriteIdList=e.sprite.spriteIdList.sort((i,o)=>{let n=e.sprite.common[i].order,s=e.sprite.common[o].order;return n-s}),yield this.editor.spriteStore.updateStateFromSerialization(e.sprite,e.customStickers)),e.brush&&this.editor.brushToolStore.updateStateFromHistory(e.brush),e.frame&&(yield this.editor.frameToolStore.updateStateFromSerialization(e.frame)),this.editor.outputContainer.updateChildrenContainers()}catch(i){console.error(i),this.editor.modalStore.showActionModal({type:St.ERROR,identifier:"unexpectedError",error:i,handleConfirm:()=>{window.location.reload()}})}})}}});var ma,Gw=m(()=>{Ho();ma={identifier:"identity",opacity:1,width:0,color:mo.white}});var r$e,ql,rde=m(()=>{Ye();Vy();Gw();r$e=new Nl(0,1),ql=class{constructor(e){this.changeIdentifier=e=>{this.state.identifier=e};this.changeOpacity=e=>{let t=r$e.clamp(e);this.state.opacity=t};this.changeWidth=e=>{this.state.width=e};this.changeColor=e=>{this.state.color=e};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=ma.identifier,this.state.opacity=ma.opacity,this.state.width=ma.width,this.state.color=ma.color,this.removeIndex())};this.removeFrameEffect=()=>{this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)};this.setEffectProperties=e=>this.effect?(this.removeIndex(),this.effect.setProperties(e),this.effect.getProperties()):null;this.setFrameEffect=({identifier:e,width:t,opacity:i,color:o})=>{let n=T({},this.state);this.changeIdentifier(e),this.changeWidth(t),this.changeOpacity(i),this.changeColor(o),this.removeFrameEffect();let s=this.engineMediator.orderHelper.addSprite(e);return new Promise((a,l)=>{this.engine.addFrameFromAssets(e,this.engineMediator.image.container,s).then(c=>{this.effect=c,this.effect.setProperties({tintColor:o,opacity:i,width:t}),a()}).catch(c=>{this.changeIdentifier(n.identifier),this.changeOpacity(n.opacity),this.changeWidth(n.width),this.changeColor(n.color),n.identifier==="identity"&&this.removeIndex(),l(c)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=e,this.state=ma}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};g([ge],ql.prototype,"state",2),g([I],ql.prototype,"changeIdentifier",2),g([I],ql.prototype,"changeOpacity",2),g([I],ql.prototype,"changeWidth",2),g([I],ql.prototype,"changeColor",2),g([I],ql.prototype,"reset",2)});var ur,ide=m(()=>{Ye();V();Y();as();pa();da();Ho();Gw();rde();ur=class{constructor(e){this.colorList=Bt.defaultColors;this.selectFrame=e=>de(this,null,function*(){if(e!==this.identifier){let t=.1*this.editor.shortestOutputSide;yield this.frameStore.setFrameEffect({identifier:e,width:t,opacity:1,color:ma.color}),this.editor.render(),this.addSnapshot(ze.ADD,w.FRAME)}});this.changeOpacity=e=>{let t=this.frameStore.setEffectProperties({opacity:e});t&&(this.frameStore.changeOpacity(t.opacity),this.editor.render())};this.changeWidth=e=>{let t=this.frameStore.setEffectProperties({width:e});t&&(this.frameStore.changeWidth(t.width),this.editor.render())};this.changeColor=e=>{let t=this.frameStore.setEffectProperties({tintColor:e});t&&(this.frameStore.changeColor(t.tintColor),this.editor.render())};this.colorSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.controls.selectColor)};this.toolSnapshot=e=>{this.addSnapshot(ze.EDIT,e)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.pureReset=()=>{this.frameStore.removeFrameEffect(),this.frameStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(ze.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=e=>e.identifier==="identity"?(this.pureReset(),new Promise(t=>{t()})):this.frameStore.setFrameEffect(e);this.updateStateFromSerialization=e=>de(this,null,function*(){return this.entityManager.items.find(i=>i.identifier===e.identifier)?this.frameStore.setFrameEffect(e).then(()=>{this.editor.transformToolStore.setFrameOpacity(e.opacity)}):new Promise((i,o)=>{o(new Error("Frame Asset doesn't exist"))})});this.editor=e,this.frameStore=new ql(this.editor.engineMediator);let t=this.editor.assetProvider.getAssets("frame"),{config:i}=this;this.entityManager=new yr(t,U(T({},i),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),ma.color=ke(Gn(this.config,"defaultColor",ma.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=ss(ke(this.config.colors)))}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){let e=this.entityManager.items.find(t=>t.identifier===this.identifier);return e&&e.tintable||!1}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config[w.FRAME]}get locale(){return this.editor.configStore.locale[w.FRAME]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};g([I],ur.prototype,"selectFrame",2),g([I],ur.prototype,"changeOpacity",2),g([I],ur.prototype,"changeWidth",2),g([I],ur.prototype,"changeColor",2),g([I],ur.prototype,"pureReset",2),g([I],ur.prototype,"reset",2),g([I],ur.prototype,"updateStateFromHistory",2),g([I],ur.prototype,"updateStateFromSerialization",2),g([k],ur.prototype,"state",1),g([k],ur.prototype,"identifier",1),g([k],ur.prototype,"color",1),g([k],ur.prototype,"size",1),g([k],ur.prototype,"tintable",1),g([k],ur.prototype,"opacity",1),g([k],ur.prototype,"minSize",1),g([k],ur.prototype,"maxSize",1),g([k],ur.prototype,"config",1),g([k],ur.prototype,"locale",1),g([k],ur.prototype,"localeColor",1),g([k],ur.prototype,"items",1),g([k],ur.prototype,"isOptionSelected",1)});var uB=m(()=>{Gw();ide()});var i$e,Vo,dB=m(()=>{Ye();V();i$e={categories:[],query:""},Vo=class{constructor(e){this.initProvider=e=>{e&&(this.libraryProvider=new e)};this.fetchImages=(e="")=>de(this,null,function*(){if(this.libraryProvider){let t=null;try{let i=yield this.libraryProvider.getCategories(),o=yield this.libraryProvider.searchImages(e);t=i.map((n,s)=>{let a=o.filter(l=>l.category===n.name);return{identifier:n.name,name:n.name,thumbnailURI:n.coverImageUrl,items:a.map(l=>({name:l.title||`image${s}`,identifier:`${n.name}-${l.title}-${s}`,thumbnailURI:l.thumbUrl,rawUrl:l.rawUrl,authorName:l.authorName,authorAvatar:l.authorAvatar}))}}).filter(n=>n.items.length)}catch(i){console.log(i)}Cr(()=>{this.state.query=e,this.state.categories=t})}});this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory!==e?e:""};this.getRawUrl=e=>{let t=this.items.findIndex(i=>i.identifier===e);return t!==-1?this.items[t].rawUrl:e};this.configStore=e.configStore,this.state=ge(i$e),this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(e=>e.items).reduce((e,t)=>[...e,...t],[])}get query(){return this.state.query}get config(){return this.configStore.config[w.LIBRARY]}get locale(){return this.configStore.locale[w.LIBRARY]}};g([ge],Vo.prototype,"selectedCategory",2),g([I],Vo.prototype,"initProvider",2),g([I],Vo.prototype,"fetchImages",2),g([I],Vo.prototype,"toggleCategorySelection",2),g([k],Vo.prototype,"selectedCategoryIdentifier",1),g([k],Vo.prototype,"categories",1),g([k],Vo.prototype,"items",1),g([k],Vo.prototype,"query",1),g([k],Vo.prototype,"config",1),g([k],Vo.prototype,"locale",1)});var Zy,pB=m(()=>{V();Zy={identifier:"identity",opacity:1,blendMode:Ue.LIGHTEN}});var o$e,Hl,ode=m(()=>{Ye();V();Vy();pB();o$e=new Nl(0,1),Hl=class{constructor(e,t){this.changeIdentifier=e=>{this.state.identifier=e};this.changeOpacity=e=>{let t=o$e.clamp(e);this.state.opacity=t};this.changeBlendMode=e=>{this.state.blendMode=e};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Zy.identifier,this.state.opacity=Zy.opacity,this.state.blendMode=Zy.blendMode,this.removeIndex())};this.correctOverlayFlip=()=>{let{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();this.effect&&(this.effect.setFlipHorizontally(e),this.effect.setFlipVertically(t))};this.removeOverlayEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.removeIndex(),this.effect=void 0)};this.setEffectProperties=e=>this.effect?(this.effect.setProperties(e),this.effect.getProperties()):null;this.setOverlayEffect=({identifier:e,blendMode:t,opacity:i})=>{let o=T({},this.state);this.removeOverlayEffect();let n=this.engineMediator.orderHelper.addIndex(w.OVERLAY);return new Promise((s,a)=>{this.engineMediator.engine.addOverlayFromAssets(e,this.engineMediator.image.container,n).then(l=>{this.changeIdentifier(e),this.changeOpacity(i),this.changeBlendMode(t),this.effect=l,this.effect.setProperties({blendMode:t,opacity:i}),this.correctOverlayFlip(),s()}).catch(l=>{this.changeIdentifier(o.identifier),this.changeOpacity(o.opacity),this.changeBlendMode(o.blendMode),o.identifier==="identity"&&this.removeIndex(),a(l)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(w.OVERLAY)};this.engineMediator=e,this.editor=t,this.state=Zy}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};g([ge],Hl.prototype,"state",2),g([I],Hl.prototype,"changeIdentifier",2),g([I],Hl.prototype,"changeOpacity",2),g([I],Hl.prototype,"changeBlendMode",2),g([I],Hl.prototype,"reset",2),g([I],Hl.prototype,"correctOverlayFlip",2)});var Rr,nde=m(()=>{Ye();V();as();da();ode();Rr=class{constructor(e){this.selectOverlay=e=>de(this,null,function*(){if(e!==this.identifier){let t=this.defaultBlendModeForIdentifier(e);yield this.overlayStore.setOverlayEffect({identifier:e,opacity:1,blendMode:t}),this.addSnapshot(ze.ADD,w.OVERLAY),this.editor.render()}});this.changeOpacity=e=>{let t=this.overlayStore.setEffectProperties({opacity:e});t&&(this.overlayStore.changeOpacity(t.opacity),this.editor.render())};this.toolSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.controls.sliderOpacity)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.changeBlendMode=e=>{let t=this.overlayStore.setEffectProperties({blendMode:e});t&&(this.overlayStore.changeBlendMode(t.blendMode),this.addSnapshot(ze.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())};this.pureReset=()=>{this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(ze.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromSerialization=e=>de(this,null,function*(){return this.entityManager.items.find(i=>i.identifier===e.identifier)?this.overlayStore.setOverlayEffect(e).then(()=>{this.editor.transformToolStore.setOverlayOpacity(e.opacity)}):new Promise((i,o)=>{o(new Error(`Overlay Asset ${e.identifier} doesn't exist`))})});this.updateStateFromHistory=e=>de(this,null,function*(){return e.identifier==="identity"?(this.pureReset(),new Promise(t=>{t()})):this.overlayStore.setOverlayEffect(e)});this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=e=>{let t=this.entityManager.items.findIndex(i=>i.identifier===e);return t!==-1?this.entityManager.items[t].defaultBlendMode:Ue.LIGHTEN};this.editor=e,this.overlayStore=new Hl(this.editor.engineMediator,e);let t=this.editor.assetProvider.getAssets("overlay"),{config:i}=this;this.entityManager=new yr(t,U(T({},i),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[w.OVERLAY]}get locale(){return this.editor.configStore.locale[w.OVERLAY]}get items(){return this.entityManager.items}get allBlendModes(){let e=this.locale.controls;return Object.keys(Ue).map(t=>{let i=Ue[t],o=`blendMode${i.charAt(0).toUpperCase()}${i.slice(1)}`;return{identifier:i,value:e[o]}})}};g([I],Rr.prototype,"selectOverlay",2),g([I],Rr.prototype,"changeOpacity",2),g([I],Rr.prototype,"changeBlendMode",2),g([I],Rr.prototype,"pureReset",2),g([I],Rr.prototype,"reset",2),g([I],Rr.prototype,"updateStateFromSerialization",2),g([I],Rr.prototype,"updateStateFromHistory",2),g([I],Rr.prototype,"correctOverlayFlip",2),g([k],Rr.prototype,"state",1),g([k],Rr.prototype,"identifier",1),g([k],Rr.prototype,"opacity",1),g([k],Rr.prototype,"blendMode",1),g([k],Rr.prototype,"isOptionSelected",1),g([k],Rr.prototype,"config",1),g([k],Rr.prototype,"locale",1),g([k],Rr.prototype,"items",1),g([k],Rr.prototype,"allBlendModes",1)});var mB=m(()=>{nde();pB()});var n$e,hB,sde=m(()=>{n$e=r=>{let e=atob(r.split(",")[1]),t=r.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),o=new Uint8Array(i);for(let n=0;n<e.length;n+=1)o[n]=e.charCodeAt(n);return new Blob([i],{type:t})},hB=n$e});var ade,lde,cde=m(()=>{V();ade=r=>r.split(",")[0].split(":")[1].split(";")[0],lde=r=>typeof r=="string"?ade(r):r.src.includes(".svg")?Ci.SVG:r.src?ade(r.src):Ci.JPEG});var Vw,Qy,ude=m(()=>{jy();Vw=v(Ym());V();zl();Qy=class{static isImageElement(e){return e instanceof HTMLImageElement}constructor({license:e,assetProvider:t,crossOrigin:i}){this.crossOrigin=i,this.engine=new hf({license:e,crossOrigin:i,assetProvider:t,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(e){return new Promise((t,i)=>{let o=[],n=[];e.forEach(s=>{s.isDuotone?o.push(s.identifier):n.push(s.identifier)}),this.getAllDuotonePreview(o).then(s=>{this.getAllLutPreview(n).then(a=>{t(Object.assign(s,a))})}).catch(s=>{i(s)})})}getAllDuotonePreview(e){return de(this,null,function*(){let t={};if(!e.length)return t;let i=yield this.engine.addDuoToneFilterFromAssets(e[0],this.container);return yield(0,Vw.default)(e,o=>de(this,null,function*(){let n=this.engine.assetProvider.getDuotoneFilterAsset(o);i.filterOperation.getFilter().set({intensity:.5,lightColor:Se.Color.fromHex(n.lightColor),darkColor:Se.Color.fromHex(n.darkColor)});let a=yield this.engine.export(Qr.DATA_URL,Ir.PNG);t[o]=a}),{concurrency:1}),this.engine.removeEffect(i),t})}loadLutAssets(e){return de(this,null,function*(){let t={};return yield(0,Vw.default)(e,i=>de(this,null,function*(){t[i]=yield this.engine.getLutFilterImage(i)})),t})}getAllLutPreview(e){return de(this,null,function*(){let t={};if(!e.length)return t;let i=yield this.loadLutAssets(e),o=yield this.engine.addLUTFilterFromAssets(e[0],this.container);return yield(0,Vw.default)(e,n=>de(this,null,function*(){let s=this.engine.assetProvider.getLUTFilterAsset(n),a=o.filterOperation.getFilter(),l={horizontalTileCount:s.horizontalTileCount||5,verticalTileCount:s.verticalTileCount||5,image:i[n]};a.set(U(T({},l),{intensity:s.defaultIntensity||1})),o.setProperties({intensity:1}),a._lutPrimitive.set(l);let c=yield this.engine.export(Qr.DATA_URL,Ir.PNG);t[n]=c}),{concurrency:1}),this.engine.removeEffect(o),t})}addImageToContainer(e){return new Promise((t,i)=>{let o;Qy.isImageElement(e)?(o=e,this.setBackgroundImage(o),t()):this.getImageElement(e).then(n=>{o=n,this.setBackgroundImage(o),t()}).catch(n=>{i({identifier:"imageLoading",message:n.message})})})}getImageElement(e){return new Promise((t,i)=>{let o=new Image;o.addEventListener("load",()=>{t(o)}),o.addEventListener("error",n=>{i(n)}),o.crossOrigin=this.crossOrigin,o.src=e})}setBackgroundImage(e){this.container?this.container.setData({image:e}):this.container=this.engine.addImage({image:e,blendMode:Ue.NORMAL,opacity:1});let{size:t}=this.container.getBounds();this.engine.getOutputContainer().setResolution(t)}}});var e_,fB=m(()=>{Ho();e_={size:0,color:mo.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0}});var tr,gB=m(()=>{Ye();V();Y();as();pa();Ho();fB();tr=class{constructor(e){this.strokes={strokes:[]};this.colorList=Bt.defaultColors;this.dirty=ge.box(!1);this.id="";this.containerId=()=>this.id;this.initSize=()=>{let{minimumSize:e,maximumSize:t}=this.state,{size:i}=this;i===0&&this.changeSize(KO(this.config,"defaultSize",[e,t]))};this.changeColor=e=>{this.state.color=e};this.changeSize=e=>{this.state.size=e};this.changeRelativeSize=e=>{let{maximumSize:t,minimumSize:i}=this.state;this.state.size=(t-i)*e/100+i};this.changeHardness=e=>{this.state.hardness=e};this.reset=()=>{this.pureReset(),this.addSnapshot(ze.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.editor=e,this.state=U(T({},e_),{hardness:KO(this.config,"defaultHardness",[e_.minimumHardness,e_.maximumHardness]),color:ke(Gn(this.config,"defaultColor",e_.color))}),this.config.colors&&this.config.colors.length>0&&(this.colorList=ss(ke(this.config.colors)))}addSnapshot(e,t){this.editor.addSnapshot(void 0,e,t)}clickableCanvas(e){this.editor.clickableCanvas(e)}beginStroke(e=[]){if(!this.drawingContainer){let t=this.editor.orderHelper.addSprite(w.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:e},this.editor.imageContainer,t)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:ke(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(e){if(this.drawingContainer){let t=this.editor.previewToWorld(e,!1);this.drawingContainer.addPointToCurrentStroke(t),this.editor.render()}}endStroke(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(ze.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))}updateStateFromHistory(e){if(!(0,Pr.default)(e,this.strokes)){if((0,Pr.default)(e,{strokes:[]})||!e){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===e.strokes.length){this.dirty.set(!1);return}this.strokes=e,this.drawingContainer.setData(this.strokes)}else{let t=this.editor.orderHelper.addSprite(w.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:e.strokes},this.editor.imageContainer,t),this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0),this.id=this.drawingContainer.getID()}}pureReset(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}get config(){return this.editor.configStore.config[w.BRUSH]}get locale(){return this.editor.configStore.locale[w.BRUSH]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){let{size:e,maximumSize:t,minimumSize:i}=this.state;return(e-i)*100/(t-i)}get sizeOnScreenSpace(){let e=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*e)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};g([ge],tr.prototype,"state",2),g([ge],tr.prototype,"dirty",2),g([I],tr.prototype,"initSize",2),g([I],tr.prototype,"changeColor",2),g([I],tr.prototype,"changeSize",2),g([I],tr.prototype,"changeRelativeSize",2),g([I],tr.prototype,"changeHardness",2),g([I],tr.prototype,"clickableCanvas",1),g([I],tr.prototype,"beginStroke",1),g([I],tr.prototype,"strokePosition",1),g([I],tr.prototype,"endStroke",1),g([I],tr.prototype,"updateStateFromHistory",1),g([I],tr.prototype,"reset",2),g([k],tr.prototype,"config",1),g([k],tr.prototype,"locale",1),g([k],tr.prototype,"localeColor",1),g([k],tr.prototype,"color",1),g([k],tr.prototype,"size",1),g([k],tr.prototype,"relativeSize",1),g([k],tr.prototype,"sizeOnScreenSpace",1),g([k],tr.prototype,"hardness",1),g([k],tr.prototype,"isDirty",1)});var ls,s$e,ha,bB=m(()=>{Ye();Y();pa();(function(i){i.LEADING="leading",i.CENTER="center",i.TRAILING="trailing"})(ls||(ls={}));s$e={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},ha=class{constructor(e){this.previewTopLeftPosition={x:0,y:0};this.getGuideValue=(e,t)=>{let{height:i,width:o}=this.editor.getPreviewSize(),{snapToLeft:n,snapToRight:s,snapToTop:a,snapToBottom:l}=this.configStore.config.snapping.position,c=Math.min(i,o),u=0;return t==="bottom"?u=Math.round(i-c*l):t==="top"?u=Math.round(c*a):t==="right"?u=Math.round(o-c*s):t==="left"?u=Math.round(c*n):e==="vertical"&&t==="center"?u=Math.round(o/2):e==="horizontal"&&t==="center"&&(u=Math.round(i/2)),u};this.getVerticalGuidesFromConfig=()=>{let{snapToVerticalCenter:e,snapToLeft:t,snapToRight:i}=this.configStore.config.snapping.position,o=[];return e&&o.push({value:this.getGuideValue("vertical","center"),edge:ls.CENTER,isVisible:!1,direction:"vertical"}),t&&o.push({value:this.getGuideValue("vertical","left"),edge:ls.LEADING,isVisible:!1,direction:"vertical"}),i&&o.push({value:this.getGuideValue("vertical","right"),edge:ls.TRAILING,isVisible:!1,direction:"vertical"}),o};this.getHorizontalGuidesFromConfig=()=>{let{snapToHorizontalCenter:e,snapToTop:t,snapToBottom:i}=this.configStore.config.snapping.position,o=[];return e&&o.push({value:this.getGuideValue("horizontal","center"),edge:ls.CENTER,isVisible:!1,direction:"horizontal"}),t&&o.push({value:this.getGuideValue("horizontal","top"),edge:ls.LEADING,isVisible:!1,direction:"horizontal"}),i&&o.push({value:this.getGuideValue("horizontal","bottom"),edge:ls.TRAILING,isVisible:!1,direction:"horizontal"}),o};this.getRotationGuidesFromConfig=()=>{let{angles:e}=this.configStore.config.snapping.rotation,t=[];return e.forEach(o=>{t.push(o),t.push(o+360),t.push(o-360)}),t.filter((o,n)=>t.indexOf(o)===n).map(o=>({value:o*Math.PI/180,edge:ls.CENTER,isVisible:!1,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:e,leftBottom:t,rightTop:i,rightBottom:o})=>{let n=Math.min(e.y,i.y,t.y,o.y),s=Math.max(e.y,i.y,t.y,o.y),a=Math.min(e.x,i.x,t.x,o.x),l=Math.max(e.x,i.x,t.x,o.x);return{height:Math.round(s-n),width:Math.round(l-a)}};this.mapRange=({value:e,fromMin:t,fromLength:i,toMin:o,toLength:n})=>(e-t)*n/i+o;this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(e,t,i,o)=>{if(t.length===0)return e;if(t[0]>e)return e-i;for(let n=0;n<t.length-1;n+=1){let s=t[n],a=t[n+1],l=s+i,c=a-i,u=0;o&&(u=n*i*2,l+=u,c+=u+i*2);let d=1e-5;if(s<=e&&e<=a)return e<=s+d?s+u:e>=a-d?a+u+(o?i*2:0):this.mapRange({value:e,fromMin:s,fromLength:a-s,toMin:l,toLength:c-l})}return o?e+(t.length-1)*i*2+i:e};this.mapFromSnapSystem=(e,t,i,o)=>{if(t.length===0)return e;if(t[0]>e)return e>=t[0]-i?t[0]:e+i;let n=e;for(let a=0;a<t.length-1;a+=1){let l=t[a],c=t[a+1],u=l+i,d=c-i,p=c;if(o&&(d+=i*2,p+=i*2,n=e-a*i*2),l<=n&&n<=p)return u<=n&&n<=d?this.mapRange({value:n,fromMin:u,fromLength:d-u,toMin:l,toLength:c-l}):n<u?l:c}n-=i*3;let s=t[t.length-1];return n<=s?s:n};this.centerSnapValue=(e,t)=>{let i=t*.5,{value:o,edge:n}=e,s=o;return n===ls.LEADING?s+=i:n===ls.TRAILING&&(s-=i),s};this.mapSnappingGuidesToCenter=(e,t)=>{let i=[];return e.forEach(o=>{i.push(this.centerSnapValue(o,t))}),i};this.calcSnapThresholdInRadians=(e,t)=>e===0?0:t/e;this.calculatePreviewTopLeftPosition=()=>{let e=this.editor.engineMediator.preview.container.getPosition(),t=this.editor.getPreviewSize(),i=Bt.devicePixelRatio;this.previewTopLeftPosition={x:e.x/i-t.width/2,y:e.y/i-t.height/2}};this.snapToRotation=(e,t,i)=>{let{rotationGuides:o}=this.state,{enabled:n,threshold:s}=this.configStore.config.snapping.rotation,{x:a,y:l}=this.previewTopLeftPosition,{width:c}=this.editor.getPreviewSize(),u=(e+Math.PI*2)%(Math.PI*2);if(n){let d=new L(t).magnitude,p=o.map(_=>_.value).sort((_,x)=>_-x),h=this.calcSnapThresholdInRadians(d,s);if(!this.rotationOffset){let _=this.mapToSnapSystem(e,p,h,!1);this.rotationOffset=_-u}u=this.mapFromSnapSystem(u+this.rotationOffset,p,h,!1);let f={x:i.position.x-a-c,y:i.position.y-l};return o.forEach(_=>{_.isVisible=_.value===u,_.position=f}),u}return e};this.snapToPosition=(e,t)=>{let{horizontalGuides:i,verticalGuides:o}=this.state,{enabled:n,threshold:s}=this.configStore.config.snapping.position,a=new L(this.previewTopLeftPosition),{height:l,width:c}=this.getSpriteDimensions(t),{x:u,y:d}=new L(e).subtract(a);if(n){let p=this.mapSnappingGuidesToCenter(i,l).sort((x,y)=>x-y),h=this.mapSnappingGuidesToCenter(o,c).sort((x,y)=>x-y);if(!this.positionOffset){let x=this.mapToSnapSystem(u,h,s,!0),y=this.mapToSnapSystem(d,p,s,!0);this.positionOffset=new L(x,y).subtract(new L(u,d))}let f=this.mapFromSnapSystem(u+this.positionOffset.x,h,s,!0),_=this.mapFromSnapSystem(d+this.positionOffset.y,p,s,!0);return f=Math.round(f),_=Math.round(_),i.forEach(x=>{let y=Math.round(this.centerSnapValue(x,l));x.isVisible=y===_}),o.forEach(x=>{let y=Math.round(this.centerSnapValue(x,c));x.isVisible=y===f}),new L(f,_).add(a)}return{x:u,y:d}};this.editor=e,this.configStore=e.configStore,this.state=ge(s$e),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}hidePositionGuides(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map(e=>U(T({},e),{isVisible:!1})),this.state.horizontalGuides=this.state.horizontalGuides.map(e=>U(T({},e),{isVisible:!1}))}hideRotationGuides(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map(e=>U(T({},e),{isVisible:!1}))}get positionGuides(){let{verticalGuides:e,horizontalGuides:t}=this.state;return[...e,...t]}get rotationGuides(){return this.state.rotationGuides}};g([ge],ha.prototype,"state",2),g([I],ha.prototype,"snapToRotation",2),g([I],ha.prototype,"snapToPosition",2),g([I],ha.prototype,"hidePositionGuides",1),g([I],ha.prototype,"hideRotationGuides",1),g([k],ha.prototype,"positionGuides",1),g([k],ha.prototype,"rotationGuides",1)});function $w(r,e=null){return new Promise((t,i)=>{let o=new Image;o.addEventListener("load",()=>{let n=document.createElement("canvas"),s=n.getContext("2d");n.width=o.width,n.height=o.height,e&&(n.width=e,n.height=e*o.height/o.width),s.drawImage(o,0,0,n.width,n.height),t(n.toDataURL(Ci.PNG))}),o.addEventListener("error",()=>{i()}),o.src=r})}var dde,yB=m(()=>{V();Y();dde=r=>new Promise((e,t)=>{let i=new FileReader;i.onload=o=>de(void 0,null,function*(){try{let{result:n}=o.target,s=yield $w(n,150);e({stickerURI:n,thumbnailURI:s,name:r.name||"",type:r.type,identifier:yt()})}catch(n){t(n)}}),i.onerror=o=>{t(o)},i.readAsDataURL(r)})});var a$e,$o,_B,vB=m(()=>{V();Ho();a$e="white",$o={identifier:"identity",opacity:1,tintColor:mo[a$e],tintMode:"none",resizeMode:"keepAspect"},_B={}});var pde,xB,nt,CB=m(()=>{Ye();V();Y();as();pa();da();yB();Ho();vB();pde="identity",xB="imgly_sticker_custom",nt=class{constructor(e){this.state=ge.map(_B);this.customStickers=[];this.colorList=Bt.defaultColors;this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=e=>this.entityManager.items.findIndex(t=>t.identifier===e)!==-1;this.add=e=>{let t=this.entityManager.items.find(n=>n.identifier===e),i=t?t.tintMode:$o.tintMode,o=t?t.resizeMode:$o.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:e,tintMode:i,tintColor:$o.tintColor,opacity:$o.opacity,resizeMode:o}})};this.duplicate=()=>{if(this.id){let e=this.editor.spriteStore.getDuplicateContainerTransform(this.id),t=this.editor.spriteStore.getDuplicateContainerFlip(this.id),{flipHorizontally:i,flipVertically:o}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:ke(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:i!==t.flipHorizontally,flipVertically:o!==t.flipVertically},transform:e})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.flipHorizontally=()=>{this.id&&this.editor.spriteStore.flipHorizontally(this.id)};this.delete=()=>{if(this.id){let e=this.id;this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast()}};this.updateStateFromHistory=(e,t)=>{(0,Pr.default)(t,this.state.get(e))||(this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t))};this.setState=(e,t)=>{let i=this.state.get(e);i?("opacity"in t&&(i.opacity=t.opacity),t.tintColor&&(i.tintColor=t.tintColor),t.tintMode&&(i.tintMode=t.tintMode),t.resizeMode&&(i.resizeMode=t.resizeMode),this.state.set(e,i)):this.state.set(e,{identifier:t.identifier,opacity:t.opacity,tintMode:t.tintMode,resizeMode:t.resizeMode,tintColor:t.tintColor?t.tintColor:$o.tintColor})};this.changeOpacity=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{opacity:e});let i=this.editor.spriteStore.getContainerProperties(this.id);t.opacity=i.opacity,this.state.set(this.id,t)}}};this.changeTintColor=e=>{if(this.id){let t=this.state.get(this.id);if(t){let{tintMode:i}=this.entityManager.items.find(n=>n.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:e,tintMode:i});let o=this.editor.spriteStore.getContainerProperties(this.id);t.tintColor=o.tintColor,t.tintMode=o.tintMode||$o.tintMode,this.state.set(this.id,t)}}};this.tintColorSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.history.color)};this.addFiles=e=>de(this,null,function*(){if(this.editor.modalStore.showInfoModal("loading"),e.length){let t=0,i=[];for(t=0;t<e.length;t+=1)i.push(dde(e[t]));try{let o=yield Promise.all(i);this.addCustomStickerAsset(o),this.editor.configStore.events.onStickerUploadedAdd(o.map(({identifier:n,stickerURI:s},a)=>({identifier:n,stickerURI:s,file:e[a]})))}catch(o){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}}});this.addCustomStickerAsset=e=>de(this,null,function*(){let t=[];e.forEach(({stickerURI:s,thumbnailURI:a,name:l,identifier:c,type:u})=>{t.push({stickerURI:s,thumbnailURI:a,name:l,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:c}),this.customStickers.push({identifier:c,type:u,stickerURI:s,name:l})});let i=this.locale.categories[xB];this.editor.assetProvider.addCustomStickerAsset(t,xB,i);let o=this.editor.assetProvider.getAssets("sticker"),{config:n}=this;this.entityManager=new yr(o,U(T({},n),{itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=xB,this.editor.modalStore.hideModal()});this.toolSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.history.opacity)};this.addSnapshot=(e,t)=>{let i=this.editor.historyStore.getCurrentSpritesState();(i==null?void 0:i.sticker)&&(0,Pr.default)(i.sticker,ke(this.state))||this.currentSticker&&this.editor.spriteStore.addSnapshot(e,t)};this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory===e?pde:e};this.pureReset=()=>{this.state=ge.map(_B)};this.editor=e,this.selectedCategory=pde;let{config:t}=this,i=this.editor.assetProvider.getAssets("sticker");this.entityManager=new yr(i,U(T({},t),{itemFallbackKey:"stickerURI",locale:T(T({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),$o.tintColor=ke(Gn(this.config,"defaultTintColor",$o.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=ss(ke(this.config.colors)))}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){let e=this.state.get(this.id);if(e)return e}}get identifier(){if(this.isStickerSelected){let e=this.state.get(this.id);if(e)return e.identifier}return"none"}get id(){if(this.isStickerSelected)return this.editor.spriteStore.id}get opacity(){return this.currentSticker?this.currentSticker.opacity:$o.opacity}get tintMode(){return this.currentSticker?this.currentSticker.tintMode:$o.tintMode}get resizeMode(){return this.currentSticker?this.currentSticker.resizeMode:$o.resizeMode}get tintable(){return this.currentSticker?this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized":!1}get tintColor(){return this.currentSticker?this.currentSticker.tintColor:$o.tintColor}get config(){return this.editor.configStore.config[w.STICKER]}get locale(){return this.editor.configStore.locale[w.STICKER]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};g([ge],nt.prototype,"selectedCategory",2),g([ge],nt.prototype,"entityManager",2),g([I],nt.prototype,"selectLast",2),g([I],nt.prototype,"add",2),g([I],nt.prototype,"duplicate",2),g([I],nt.prototype,"bringToFront",2),g([I],nt.prototype,"flipHorizontally",2),g([I],nt.prototype,"delete",2),g([I],nt.prototype,"updateStateFromHistory",2),g([I],nt.prototype,"setState",2),g([I],nt.prototype,"changeOpacity",2),g([I],nt.prototype,"changeTintColor",2),g([I],nt.prototype,"addFiles",2),g([I],nt.prototype,"addCustomStickerAsset",2),g([I],nt.prototype,"toggleCategorySelection",2),g([I],nt.prototype,"pureReset",2),g([k],nt.prototype,"isStickerSelected",1),g([k],nt.prototype,"isCustomStickerEnabled",1),g([k],nt.prototype,"customStickerTintMode",1),g([k],nt.prototype,"customStickerResizeMode",1),g([k],nt.prototype,"currentSticker",1),g([k],nt.prototype,"identifier",1),g([k],nt.prototype,"id",1),g([k],nt.prototype,"opacity",1),g([k],nt.prototype,"tintMode",1),g([k],nt.prototype,"resizeMode",1),g([k],nt.prototype,"tintable",1),g([k],nt.prototype,"tintColor",1),g([k],nt.prototype,"config",1),g([k],nt.prototype,"locale",1),g([k],nt.prototype,"localeColor",1),g([k],nt.prototype,"selectedCategoryIdentifier",1),g([k],nt.prototype,"items",1),g([k],nt.prototype,"categories",1)});var l$e,Et,SB,wB=m(()=>{Ho();l$e="imgly_font_open_sans_bold",Et={text:"Write Something",identifier:l$e,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:mo.white,backgroundColor:mo.transparent||[0,0,0,0],width:0},SB={}});var mde,yf,Be,TB=m(()=>{Ye();V();zl();Y();as();pa();Ho();wB();mde={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},yf=class{constructor(e){this.state=ge.map(SB);this.colorList=Bt.defaultColors;this.backgroundColorList=Bt.defaultBackgroundColors;this.fontsLoadStatus=ge.object({pending:!1,loaded:!1});this.doesTextAssetExist=e=>this.editor.assetProvider.getFontAssets().findIndex(t=>t.identifier===e)!==-1;this.validFontWithConfig=e=>this.fonts.find(t=>t.identifier===e)||this.fonts[0];this.addOrselect=()=>{this.state.size?(this.selectLast(),this.loadFonts()):this.add()};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>de(this,null,function*(){let{fontsLoadStatus:e}=this,t=()=>{this.editor.spriteStore.addText({state:{identifier:Et.identifier,text:Et.text,textColor:Et.textColor,backgroundColor:Et.backgroundColor,lineHeight:Et.lineHeight,alignment:Et.alignment,fontSize:0}})};if(!e.pending&&!e.loaded){this.fontsLoadStatus.pending=!0;let i=this.editor.assetProvider.getFontManager();try{yield i.loadFontsWithIdentifiers([Et.identifier]),t()}catch(o){this.editor.modalStore.showActionModal({type:St.ERROR,identifier:"fontLoading",error:Et.identifier})}yield this.loadFonts()}else t()});this.duplicate=()=>{if(this.id){let e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:ke(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:ke(this.backgroundColor),width:this.width},transform:e})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.delete=()=>{if(this.id){let e=this.id;this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast()}};this.setEditMode=e=>{this.editor.spriteStore.setEditMode(e)};this.changeFont=e=>{let t=this.fonts.find(i=>i.identifier===e);this.changeIdentifier(t,this.id),this.id&&this.addSnapshot(ze.EDIT,this.locale.history.fontFamily)};this.changeIdentifier=(e,t)=>{Cr(()=>{if(e&&t){let i=this.state.get(t);if(i){this.editor.spriteStore.setContainerProperties(t,{fontIdentifier:e.identifier},!0);let o=this.editor.spriteStore.getContainerProperties(t);i.identifier=o.fontIdentifier,i.fontFamily=e.fontFamily,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=o.fontSize,i.width=o.width,i.defaultFontSize=i.fontSize,this.state.set(t,i)}}})};this.changeFontSize=(e,t=!1)=>{if(this.id){let i=this.state.get(this.id);i&&(i.fontSize=e,t&&(i.defaultFontSize=e),this.state.set(this.id,i))}};this.updateDefaultFontSize=()=>{if(this.id){let e=this.state.get(this.id);e&&(e.defaultFontSize=e.fontSize,this.state.set(this.id,e))}};this.changeSize=(e,t)=>{let i=this.state.get(e);i&&(i.width=t.width,i.fontSize=t.fontSize,i.defaultFontSize=t.fontSize,this.state.set(e,i))};this.changeWidth=e=>{if(this.id){let t=this.state.get(this.id);t&&(t.width=e,this.state.set(this.id,t))}};this.changeText=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{text:e},!0);let i=this.editor.spriteStore.getContainerProperties(this.id),o=this.editor.outputContainer.getSizeInOutputSpace(),n=this.editor.spriteStore.getSize(this.id);this.config.disableAutoScaling||n.height>o.height&&this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,o.height)},!0),i=this.editor.spriteStore.getContainerProperties(this.id),t.text=i.text,t.fontSize=i.fontSize,t.defaultFontSize=i.fontSize,this.state.set(this.id,t),this.addSnapshot(ze.EDIT,this.locale.history.edit)}}};this.calculateFitFontSize=(e,t)=>{if(!yf.measureContext){let h=document.createElement("canvas");yf.measureContext=h.getContext("2d")}let i=this.editor.spriteStore.getContainerProperties(e),o=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier),n=this.config.minFontSizeForAutoScaling,s=vp(yf.measureContext,i.text,o,i.fontSize,i.lineHeight,i.width,o.textMetrics),a=Math.min(Math.floor(i.fontSize*(t/s.height)),1),l=Math.round(i.fontSize),c=0,u=l-a,d=Math.floor((l-a)*2),p=u;for(;c<=d;){u=c+Math.floor((d-c)/2);let h=vp(yf.measureContext,i.text,o,u,i.lineHeight,i.width,o.textMetrics);if(t<h.height)d=u-1,p=u-1;else if(t>h.height){if(c=u+1,a+u>=l)return l}else{p=u;break}}return n&&p<n?n:p};this.changeLineHeight=e=>{if(this.id){let t=this.state.get(this.id);if(t&&e){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:e},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);t.lineHeight=i.lineHeight,this.state.set(this.id,t)}}};this.changeColor=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{textColor:e});let i=this.editor.spriteStore.getContainerProperties(this.id);t.textColor=i.textColor,this.state.set(this.id,t)}}};this.changeBackgroundColor=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:e});let i=this.editor.spriteStore.getContainerProperties(this.id);t.backgroundColor=i.backgroundColor,this.state.set(this.id,t)}}};this.colorSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.history.backgroundColor)};this.changeAlignment=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{alignment:e});let i=this.editor.spriteStore.getContainerProperties(this.id);t.alignment=i.alignment,this.state.set(this.id,t),this.addSnapshot(ze.EDIT,this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.history.lineSpacing)};this.addSnapshot=(e,t)=>{let i=this.editor.historyStore.getCurrentSpritesState();(i==null?void 0:i.text)&&(0,Pr.default)(i.text,ke(this.state))||this.currentText&&this.editor.spriteStore.addSnapshot(e,t)};this.updateStateFromHistory=(e,t)=>{(0,Pr.default)(t,this.state.get(e))||(this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t))};this.setState=(e,t)=>{let i=this.state.get(e);if(i)t.alignment&&(i.alignment=t.alignment),t.text&&(i.text=t.text),t.lineHeight&&(i.lineHeight=t.lineHeight),t.textColor&&(i.textColor=t.textColor),t.backgroundColor&&(i.backgroundColor=t.backgroundColor),t.fontIdentifier&&(i.identifier=t.fontIdentifier),t.fontSize&&(i.fontSize=t.fontSize,i.defaultFontSize=t.fontSize),t.width&&(i.width=t.width);else{let o=this.validFontWithConfig(t.fontIdentifier);o&&this.state.set(e,{text:t.text,identifier:o.identifier,alignment:t.alignment,textColor:t.textColor?t.textColor:Et.textColor,backgroundColor:t.backgroundColor?t.backgroundColor:Et.backgroundColor,fontFamily:o.fontFamily,fontStyle:o.fontStyle,fontSize:t.fontSize,fontWeight:o.fontWeight,lineHeight:t.lineHeight,width:t.width,defaultFontSize:t.fontSize})}};this.setFontSize=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:e},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);t.fontSize=i.fontSize,t.defaultFontSize=i.fontSize,this.state.set(this.id,t)}}};this.pureReset=()=>{this.state=ge.map(SB)};this.editor=e,this.fonts.find(t=>t.identifier===Et.identifier)||(Et.identifier=this.fonts[0].identifier),Et.textColor=ke(Gn(this.config,"defaultColor",Et.textColor)),Et.backgroundColor=ke(Gn(this.config,"defaultBackgroundColor",Et.backgroundColor)),Et.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=ss(ke(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=ss(ke(this.config.backgroundColors)))}static defaultText(){return Et.text}static getDisplayFontStyle(e){let t=e.fontWeight&&mde[e.fontWeight].toLowerCase()!=="regular"?mde[e.fontWeight]:"",i=e.fontStyle&&e.fontStyle.toLowerCase()!=="normal"?e.fontStyle:"";return`${e.fontFamily.toLowerCase().includes(t.toLowerCase())?"":t} ${i}`.trim()}loadFonts(){return de(this,null,function*(){let{fontsLoadStatus:e}=this;if(e.loaded)return;let t=this.editor.assetProvider.getFontManager(),i=this.editor.assetProvider.getFontAssetsForText().map(o=>o.identifier);try{yield t.loadFontsWithIdentifiers(i)}catch(o){let n=i.filter(s=>!t.isFontLoaded(s)).join(", ");this.editor.modalStore.showActionModal({type:St.ERROR,identifier:"fontLoading",error:n})}e.loaded=!0})}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){let e=this.state.get(this.id);if(e)return e}}get text(){return this.currentText?this.currentText.text:Et.text}get fontSize(){return this.currentText?this.currentText.fontSize:Et.fontSize}get defaultFontSize(){return this.currentText?this.currentText.defaultFontSize:Et.defaultFontSize}get width(){return this.currentText?this.currentText.width:Et.width}get fontFamily(){return this.currentText?this.currentText.fontFamily:Et.fontFamily}get fontStyle(){return this.currentText?this.currentText.fontStyle:Et.fontStyle}get fontWeight(){return this.currentText?this.currentText.fontWeight:Et.fontWeight}get lineHeight(){return this.currentText?this.currentText.lineHeight:Et.lineHeight}get identifier(){return this.currentText?this.currentText.identifier:Et.identifier}get id(){if(this.isTextSelected)return this.editor.spriteStore.id}get alignment(){return this.currentText?this.currentText.alignment:Et.alignment}get textColor(){return this.currentText?this.currentText.textColor:Et.textColor}get backgroundColor(){return this.currentText?this.currentText.backgroundColor:Et.backgroundColor}get config(){return this.editor.configStore.config[w.TEXT]}get locale(){return this.editor.configStore.locale[w.TEXT]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce((e,t)=>this.rawOptions.find(i=>i.identifier===t.identifier)?[...e,{identifier:t.identifier,fontFamily:t.fontFamily,fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||""}]:e,[])}get fontFamilies(){return[...new Set(this.fonts)]}},Be=yf;g([I],Be.prototype,"addOrselect",2),g([I],Be.prototype,"selectLast",2),g([I],Be.prototype,"add",2),g([I],Be.prototype,"duplicate",2),g([I],Be.prototype,"bringToFront",2),g([I],Be.prototype,"delete",2),g([I],Be.prototype,"setEditMode",2),g([I],Be.prototype,"changeFont",2),g([I],Be.prototype,"changeIdentifier",2),g([I],Be.prototype,"changeFontSize",2),g([I],Be.prototype,"updateDefaultFontSize",2),g([I],Be.prototype,"changeSize",2),g([I],Be.prototype,"changeWidth",2),g([I],Be.prototype,"changeText",2),g([I],Be.prototype,"changeLineHeight",2),g([I],Be.prototype,"changeColor",2),g([I],Be.prototype,"changeBackgroundColor",2),g([I],Be.prototype,"changeAlignment",2),g([I],Be.prototype,"updateStateFromHistory",2),g([I],Be.prototype,"setState",2),g([I],Be.prototype,"setFontSize",2),g([I],Be.prototype,"pureReset",2),g([k],Be.prototype,"isEditMode",1),g([k],Be.prototype,"isTextSelected",1),g([k],Be.prototype,"fontsLoaded",1),g([k],Be.prototype,"currentText",1),g([k],Be.prototype,"text",1),g([k],Be.prototype,"fontSize",1),g([k],Be.prototype,"defaultFontSize",1),g([k],Be.prototype,"width",1),g([k],Be.prototype,"fontFamily",1),g([k],Be.prototype,"fontStyle",1),g([k],Be.prototype,"fontWeight",1),g([k],Be.prototype,"lineHeight",1),g([k],Be.prototype,"identifier",1),g([k],Be.prototype,"id",1),g([k],Be.prototype,"alignment",1),g([k],Be.prototype,"textColor",1),g([k],Be.prototype,"backgroundColor",1),g([k],Be.prototype,"config",1),g([k],Be.prototype,"locale",1),g([k],Be.prototype,"localeColor",1),g([k],Be.prototype,"rawOptions",1),g([k],Be.prototype,"fonts",1),g([k],Be.prototype,"fontFamilies",1)});var c$e,Fr,kB,EB,IB=m(()=>{Ho();c$e="imgly_text_design_blocks",Fr={identifier:c$e,color:mo.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},kB={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},EB={}});var st,DB=m(()=>{Ye();V();Y();as();pa();da();Ho();IB();st=class{constructor(e){this.state=ge.map(EB);this.colorList=Bt.defaultColors;this.fontsLoaded=!1;this.doesTextDesignAssetExist=e=>this.entityManager.items.findIndex(t=>t.identifier===e)!==-1;this.addOrselect=()=>de(this,null,function*(){yield this.loadFonts(),this.state.size?this.selectLast():this.add()});this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:Fr.identifier,text:Fr.text,color:Fr.color,isInverted:Fr.isInverted,seed:kB[Fr.identifier]||Fr.seed,padding:0}})};this.updateStateFromHistory=(e,t)=>{if((0,Pr.default)(t,this.state.get(e)))return;let i=this.state.get(e);t.identifier===i.identifier?(this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t)):this.changeIdentifier(t.identifier,!1,t.seed,e)};this.setState=(e,t)=>{let i=this.state.get(e);i?(t.inverted&&(i.isInverted=t.inverted),t.seed&&(i.seed=t.seed),t.color&&(i.color=t.color),t.padding&&(i.padding=t.padding),t.width&&(i.width=t.width)):this.state.set(e,{width:t.width,text:t.text,isInverted:t.inverted,identifier:t.identifier,seed:t.seed,color:t.color?t.color:Fr.color,padding:t.padding})};this.changeText=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{text:e},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);t.text=i.text,this.state.set(this.id,t),this.addSnapshot(ze.EDIT,this.locale.history.edit)}}};this.setEditMode=e=>{this.editor.spriteStore.setEditMode(e)};this.duplicate=()=>{if(this.id){let e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:ke(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:e})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.addSnapshot=(e,t)=>{let i=this.editor.historyStore.getCurrentSpritesState();(i==null?void 0:i.textdesign)&&(0,Pr.default)(i.textdesign,ke(this.state))||this.currentTextDesign&&this.editor.spriteStore.addSnapshot(e,t)};this.delete=(e=this.id)=>{e&&(this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast())};this.changeSeed=()=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},!0);let t=this.editor.spriteStore.getContainerProperties(this.id);e.seed=t.seed,this.state.set(this.id,e),this.addSnapshot(ze.EDIT,this.locale.history.shuffle)}}};this.changeIdentifier=(e,t=!0,i=null,o=this.id)=>{if(o&&e!==this.identifier){let n=this.state.get(o),s=this.editor.spriteStore.getContainerTransform(o);this.editor.spriteStore.addTextDesign({spriteId:o,state:{identifier:e,text:n.text,color:ke(n.color),isInverted:n.isInverted,seed:i||kB[e]||n.seed,padding:n.padding,width:n.width},transform:s},t,!0)}};this.changeColor=e=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{color:e});let i=this.editor.spriteStore.getContainerProperties(this.id);t.color=i.color,this.state.set(this.id,t)}}};this.colorSnapshot=()=>{this.addSnapshot(ze.EDIT,this.locale.history.color)};this.invertBackground=()=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!e.isInverted},!0);let t=this.editor.spriteStore.getContainerProperties(this.id);e.isInverted=t.inverted,this.state.set(this.id,e),this.addSnapshot(ze.EDIT,this.locale.history.invert)}}};this.changeWidth=e=>{if(this.id){let t=this.state.get(this.id);t&&(t.width=e,this.state.set(this.id,t))}};this.changePadding=e=>{if(this.id){let t=this.state.get(this.id);t&&(t.padding=e,this.state.set(this.id,t))}};this.pureReset=()=>{this.state=ge.map(EB)};this.editor=e;let t=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new yr(t,U(T({},this.config),{flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find(i=>i.identifier===Fr.identifier)||(Fr.identifier=this.entityManager.items[0].identifier),Fr.text=this.locale.canvasControls.placeholderText,Fr.color=ke(Gn(this.config,"defaultColor",Fr.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=ss(ke(this.config.colors)))}static defaultText(){return Fr.text}loadFonts(){return de(this,null,function*(){if(this.fontsLoaded)return;let e=this.editor.assetProvider.getFontManager(),t=this.editor.assetProvider.getFontAssetsForTextDesign().map(i=>i.identifier);try{yield e.loadFontsWithIdentifiers(t)}catch(i){let o=t.filter(n=>!e.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:St.ERROR,identifier:"fontLoading",error:o})}this.fontsLoaded=!0})}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){let e=this.state.get(this.id);if(e)return e}}get id(){if(this.isTextDesignSelected)return this.editor.spriteStore.id}get text(){return this.currentTextDesign?this.currentTextDesign.text:Fr.text}get seed(){return this.currentTextDesign?this.currentTextDesign.seed:Fr.seed}get padding(){return this.currentTextDesign?this.currentTextDesign.padding:Fr.padding}get width(){return this.currentTextDesign?this.currentTextDesign.width:Fr.width}get identifier(){return this.currentTextDesign?this.currentTextDesign.identifier:null}get isInverted(){return this.currentTextDesign?this.currentTextDesign.isInverted:Fr.isInverted}get color(){return this.currentTextDesign?this.currentTextDesign.color:Fr.color}get config(){return this.editor.configStore.config[w.TEXT_DESIGN]}get locale(){return this.editor.configStore.locale[w.TEXT_DESIGN]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};g([I],st.prototype,"addOrselect",2),g([I],st.prototype,"selectLast",2),g([I],st.prototype,"add",2),g([I],st.prototype,"updateStateFromHistory",2),g([I],st.prototype,"setState",2),g([I],st.prototype,"changeText",2),g([I],st.prototype,"setEditMode",2),g([I],st.prototype,"duplicate",2),g([I],st.prototype,"bringToFront",2),g([I],st.prototype,"delete",2),g([I],st.prototype,"changeSeed",2),g([I],st.prototype,"changeIdentifier",2),g([I],st.prototype,"changeColor",2),g([I],st.prototype,"invertBackground",2),g([I],st.prototype,"changeWidth",2),g([I],st.prototype,"changePadding",2),g([I],st.prototype,"pureReset",2),g([k],st.prototype,"isTextDesignSelected",1),g([k],st.prototype,"isEditMode",1),g([k],st.prototype,"currentTextDesign",1),g([k],st.prototype,"id",1),g([k],st.prototype,"text",1),g([k],st.prototype,"seed",1),g([k],st.prototype,"padding",1),g([k],st.prototype,"width",1),g([k],st.prototype,"identifier",1),g([k],st.prototype,"isInverted",1),g([k],st.prototype,"color",1),g([k],st.prototype,"config",1),g([k],st.prototype,"locale",1),g([k],st.prototype,"localeColor",1),g([k],st.prototype,"items",1)});var hde,u$e,OB,d$e,t_,Ce,RB=m(()=>{Ye();hde=v(Ym());V();Y();as();mf();yB();CB();TB();DB();u$e={},OB="none",d$e={position:{x:0,y:0},rotation:0},t_=class{constructor(e){this.state=ge.map(u$e);this.selectedId=ge.box(OB);this.editMode=ge.box(!1);this.dragMode=ge.box(!1);this.minLength=0;this.counter=0;this.addSticker=(e,t=!0)=>de(this,null,function*(){yield this.addStickerAsync(e,t)});this.addStickerAsync=(n,...s)=>de(this,[n,...s],function*({spriteId:e,state:t,transform:i},o=!0){return new Promise((a,l)=>{i=this.getInitialTransform(i);let{identifier:c}=t,u=this.editor.orderHelper.addSprite(c);this.editor.engine.addStickerFromAssets(c,this.editor.engineMediator.image.container,u).then(d=>de(this,null,function*(){e&&d.setData({id:e});let p=d.getID();this.container[p]=d,this.editor.orderHelper.renameSprite(c,p);let h=this.getSize(p);h.width*=d.getScale().x,h.height*=d.getScale().y,d.setPivot(.5,.5);let f;if(i.scale)f=i.scale;else if(i.size)f={x:i.size.width/h.width,y:i.size.height/h.height};else{let D=this.editor.shortestOutputSide*.4,E=t_.magnitude(D)/t_.sizeMagnitude(d.getSizeInWorldSpace());f={x:E,y:E}}let{flipHorizontally:_,flipVertically:x}=this.editor.outputContainer.getData();d.setFlipHorizontally(_),d.setFlipVertically(x),d.setTransform({position:i.position,scale:f,rotation:i.rotation}),t.flipHorizontally!==void 0&&d.setFlipHorizontally(t.flipHorizontally!==_),t.flipVertically!==void 0&&d.setFlipVertically(t.flipVertically!==x),this.setContainerProperties(p,T({},t));let y=d.getData();this.setInitialSpriteState(p,w.STICKER),this.stickerToolStore.setState(p,U(T({},y),{identifier:c})),yield this.editor.renderPromise(),o&&(this.setId(p),this.addSnapshot(ze.ADD,this.stickerLocale.add)),a()})).catch(d=>{console.error(d),l()})})});this.addText=(e,t=!0)=>de(this,null,function*(){yield this.addTextAsync(e,t)});this.addTextAsync=({spriteId:e,state:t,transform:i},o=!0)=>new Promise((n,s)=>{i=this.getInitialTransform(i);let a=this.editor.orderHelper.addSprite(t.identifier),l=this.editor.shortestOutputSide,c={fontIdentifier:t.identifier,text:t.text,width:t.width||l*.6,fontSize:t.fontSize||l*.1,lineHeight:t.lineHeight,alignment:t.alignment,textColor:t.textColor,backgroundColor:t.backgroundColor};this.editor.engine.addTextWithFontLoading(c,this.editor.engineMediator.image.container,a).then(u=>de(this,null,function*(){e&&u.setData({id:e});let d=u.getID();this.container[d]=u,this.editor.orderHelper.renameSprite(t.identifier,this.id);let{flipHorizontally:p,flipVertically:h}=this.editor.outputContainer.getData();u.setFlipHorizontally(p),u.setFlipVertically(h),u.setPivot(.5,.5),u.setPosition(i.position),u.setRotation(i.rotation),this.setInitialSpriteState(d,w.TEXT);let f=u.getData();this.textToolStore.setState(d,T({},f)),yield this.editor.renderPromise(),o&&(this.setId(d),this.addSnapshot(ze.ADD,this.textLocale.add)),n()})).catch(u=>{console.error(u),s()})});this.addTextDesign=(e,t=!0,i=!1)=>de(this,null,function*(){yield this.addTextDesignAsync(e,t,i)});this.addTextDesignAsync=({spriteId:e,state:t,transform:i},o=!0,n=!1)=>new Promise((s,a)=>{i=this.getInitialTransform(i);let l=this.editor.orderHelper.addSprite(t.identifier),c=this.editor.shortestOutputSide,u={width:t.width||c*.6,text:t.text,color:t.color,inverted:t.isInverted,seed:t.seed,padding:t.padding};this.editor.engine.addTextDesignAsync(t.identifier,u,this.editor.engineMediator.image.container,l).then(d=>de(this,null,function*(){e&&(n&&(this.pureRemoveSprite(e),this.textDesignToolStore.state.delete(e)),d.setData({id:e}));let p=d.getID();this.container[p]=d,this.editor.orderHelper.renameSprite(t.identifier,this.id);let{flipHorizontally:h,flipVertically:f}=this.editor.outputContainer.getData();d.setFlipHorizontally(h),d.setFlipVertically(f),d.setPivot(.5,.5),d.setPosition(i.position),d.setRotation(i.rotation),this.setInitialSpriteState(p,w.TEXT_DESIGN);let _=d.getData();this.textDesignToolStore.setState(p,U(T({},_),{identifier:t.identifier})),yield this.editor.renderPromise(),o&&(this.setId(p),this.addSnapshot(ze.ADD,this.textDesignLocale.add)),s()})).catch(d=>{console.error(d),a()})});this.spriteLocalTransform=()=>({position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation});this.clickableCanvas=e=>{this.editor.clickableCanvas(e)};this.setContainerProperties=(e,t,i=!1)=>{this.container[e].setData(t),i&&this.updatePositionAndSize(),this.editor.render()};this.setContainerPosition=(e,t)=>{this.container[e].setPosition(t)};this.pureRemoveSprite=e=>(this.editor.engine.removeContainer(this.container[e]),this.container[e].getIndexInParent()===-1?(delete this.container[e],this.state.delete(e),this.editor.orderHelper.removeSprite(e),!0):!1);this.deleteSprite=(e=this.id)=>{let t=this.state.get(e);t.tool===w.STICKER?this.stickerToolStore.delete():t.tool===w.TEXT?this.textToolStore.delete():t.tool===w.TEXT_DESIGN&&this.textDesignToolStore.delete()};this.removeSprite=e=>{this.pureRemoveSprite(e)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.spriteSnapshot=e=>{this.addSnapshot(ze.EDIT,this.historyLocale[e])};this.addNewText=(e,t)=>de(this,null,function*(){if(this.textToolStore.doesTextAssetExist(t.identifier))yield this.addTextAsync(U(T({},e),{state:t}),!1);else throw new Error(`Text identifier ${t.identifier} doesn't exist`)});this.addNewTextDesign=(e,t)=>de(this,null,function*(){if(this.textDesignToolStore.doesTextDesignAssetExist(t.identifier))yield this.addTextDesignAsync(U(T({},e),{state:t}),!1);else throw new Error(`TextDesign identifier ${t.identifier} doesn't exist`)});this.addNewSticker=(e,t)=>de(this,null,function*(){if(this.stickerToolStore.doesStickerAssetExist(t.identifier))yield this.addStickerAsync(U(T({},e),{state:t}),!1);else throw new Error(`Sticker identifier ${t.identifier} doesn't exist`)});this.getSpriteHistoryState=()=>{let e=ke(this.textToolStore.state),t=ke(this.textDesignToolStore.state),i={common:ke(this.state),[w.STICKER]:ke(this.stickerToolStore.state),[w.TEXT]:e,[w.TEXT_DESIGN]:t,spriteIdList:Object.keys(this.container)};return Object.keys(i.common).forEach(o=>{i.common[o].size=this.container[o].getSizeInWorldSpace(),i.common[o].position=this.container[o].getPosition(),i.common[o].order=this.container[o].getIndexInParent()}),i};this.updateStateFromSerialization=(e,t)=>de(this,null,function*(){if(t&&t.length)try{let i=yield Promise.all(t.map(l=>de(this,[l],function*({svg:o,raster:n,name:s,identifier:a}){let c=(o==null?void 0:o.data)?Ci.SVG:n.type,u=`data:${c};base64,${(o==null?void 0:o.data)||n.data}`,d=yield $w(u,150);return{stickerURI:u,thumbnailURI:d,name:s,type:c,identifier:a}})));yield this.stickerToolStore.addCustomStickerAsset(i)}catch(i){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}yield this.updateStateByHistoryState(e.spriteIdList,e)});this.updateStateFromHistory=e=>de(this,null,function*(){Object.keys(this.container).filter(o=>e.spriteIdList.indexOf(o)===-1).forEach(o=>{this.pureRemoveSprite(o)}),yield this.updateStateByHistoryState(e.spriteIdList,e)});this.serializableState=()=>de(this,null,function*(){let e=this.editor.spriteStore.getSpriteHistoryState();Object.keys(e.common).forEach(i=>{let{flipHorizontally:o,flipVertically:n}=this.editor.outputContainer.getData(),s=this.editor.outputContainer.getRotation(),a=n!==o?-e.common[i].rotation:e.common[i].rotation;e.common[i].rotation=n!==o?a+s:a-s});let t=yield Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(a=>de(this,[a],function*({identifier:i,type:o,stickerURI:n,name:s}){let l={identifier:i,name:s,raster:{data:"",type:Ci.JPEG}};if(o===Ci.SVG&&(l.svg={data:n.split(",")[1]}),o===Ci.JPEG||o===Ci.PNG)[,l.raster.data]=n.split(","),l.raster.type=o;else{let c=yield $w(n);[,l.raster.data]=c.split(","),l.raster.type=Ci.PNG}return l})));return{sprite:e,customStickers:t}});this.updateCanvasControls=()=>{Object.keys(this.container).forEach(e=>{this.updatePositionAndSize(e,!0);let t=this.state.get(e);if(t){if(t.tool===w.TEXT){let i=this.getContainerProperties(e);this.textToolStore.changeSize(e,i)}else if(t.tool===w.TEXT_DESIGN){let i=this.getContainerProperties(e);this.textToolStore.changeWidth(i.width)}}})};this.setEditMode=e=>{this.currentSprite&&[w.TEXT,w.TEXT_DESIGN].indexOf(this.tool)!==-1&&(e?this.editor.modalStore.showTextEditModal():this.editor.modalStore.hideModal(),this.editMode.set(e))};this.setDragMode=e=>{this.dragMode.set(e)};this.setPosition=e=>{let t=this.currentSprite,i=this.container[this.id];if(t&&i){i.setPosition(this.editor.previewToWorld(e));let{position:o}=this.getSizePositionFromContainer();t.position.x=o.x,t.position.y=o.y,this.state.set(this.id,t),this.editor.render()}};this.setSize=e=>{let t=this.currentSprite;t&&(t.size.width=e.width,t.size.height=e.height,this.state.set(this.id,t))};this.setRotation=e=>{let t=this.currentSprite;if(t){let{flipHorizontally:i,flipVertically:o}=this.editor.outputContainer.getData(),n=this.editor.outputContainer.getRotation(),s=Gy({rotation:e,outputRotation:n,flipHorizontally:i,flipVertically:o});this.container[this.id].setRotation(s),t.rotation=this.container[this.id].getRotation(),this.state.set(this.id,t),this.editor.render()}};this.onCanvasClick=e=>{this.isEditMode||this.selectHighestOrderSprite(e)};this.select=e=>{let t=this.state.get(e);t&&(this.editor.activeStore.tool!==t.tool&&this.editor.activeStore.selectTool(t.tool),this.setId(e))};this.selectLast=()=>{let e=this.editor.orderHelper.getLastSpriteId();e&&this.select(e)};this.selectNext=()=>{if(this.currentSprite){let t=this.container[this.id].getIndexInParent();if(t){let i=Object.keys(this.container).find(o=>this.container[o].getIndexInParent()===t-1);i&&this.select(i)}}};this.deselect=()=>{this.setId(OB)};this.bringToFront=e=>de(this,null,function*(){let t=this.editor.orderHelper.bringToFront(e);this.container[e].setIndexInParent(t),this.spriteSnapshot("order"),yield this.editor.render(),this.counter+=1});this.flipHorizontally=e=>{let t=this.state.get(e),i=this.container[e];i.setFlipHorizontally(!i.getFlipHorizontally()),t.flipHorizontally=i.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(e,t),this.editor.render()};this.pureReset=()=>{this.deselect(),Array.from(this.state.keys()).forEach(e=>{this.pureRemoveSprite(e)}),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=e=>{let t=this.editor.brushToolStore.containerId();if(e=e.filter(n=>n!==t),e.length<1){this.deselect();return}let i="",o=0;e.forEach(n=>{let s=this.container[n],a=s&&s.getIndexInParent()||0;a>=o&&(o=a,i=n)}),this.select(i)};this.onCornerDrag=({x:e,y:t})=>{if(this.currentSprite){let i=new L(this.currentSprite.position),o=new L(e,t),n=o.subtract(i).magnitude,s=this.getSize(),a=n*2/t_.sizeMagnitude(s);if(n>this.minLength)if(this.isSpriteSticker)if(this.stickerToolStore.resizeMode!=="unrestricted")this.setStickerSize({width:s.width*a,height:s.height*a});else{let l=this.rotationWRTOutputRotation,c=o.subtract(i),u=Math.cos(l),d=Math.sin(l),p=Math.max(Math.abs(c.x*u*2+c.y*d*2),this.minLength),h=Math.max(Math.abs(c.x*-d*2+c.y*u*2),this.minLength);this.setStickerSize({width:p,height:h})}else this.isSpriteText?this.setTextSize(s.width*a):this.isSpriteTextDesign&&this.setTextDesignScale(a);this.editor.render()}};this.onWidthDrag=({x:e,y:t})=>{let i=new L(this.currentSprite.position),n=new L(e,t).subtract(i).magnitude,s=this.editor.previewToWorld(2*n);if(s>this.minLength&&(this.setContainerProperties(this.id,{width:s},!0),this.isSpriteText)){let a=this.getContainerProperties(this.id);this.textToolStore.changeWidth(a.width)}};this.onPaddingDrag=({x:e,y:t})=>{if(this.isSpriteTextDesign){let i=this.getContainerProperties(this.id),o=new L(this.currentSprite.position),s=new L(e,t).subtract(o).magnitude,a=Math.max(this.editor.previewToWorld(s)-i.width/2,0);this.setContainerProperties(this.id,{padding:a},!0),this.isSpriteTextDesign&&(i=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(i.padding))}};this.correctTextFlip=()=>{let{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();Object.values(this.container).forEach(i=>{(i.type==="text"||i.type==="text-design")&&(i.setFlipHorizontally(e),i.setFlipVertically(t))})};this.reverseTextHorizontally=e=>{Object.values(this.container).forEach(t=>{(t.type==="text"||t.type==="text-design")&&t.setFlipHorizontally(e)})};this.reverseTextVertically=e=>{Object.values(this.container).forEach(t=>{(t.type==="text"||t.type==="text-design")&&t.setFlipVertically(e)})};this.getOutputProperties=()=>this.editor.outputContainer.getData();this.getContainerProperties=e=>this.container[e].getData();this.getContainerTransform=e=>this.container[e].getTransform();this.getDuplicateContainerTransform=e=>{let t=this.container[e].getTransform(),i=this.editor.shortestOutputSide*.1,o=new L(t.position).add(new L(i,i));return U(T({},t),{position:o})};this.getDuplicateContainerFlip=e=>{let t=this.container[e].getFlipHorizontally(),i=this.container[e].getFlipVertically();return{flipHorizontally:t,flipVertically:i}};this.updatePositionAndSize=(e=this.id,t=!1)=>{let{position:i,size:o}=this.getSizePositionFromContainer(e),n=this.state.get(e);if(n){if(n.position.x=i.x,n.position.y=i.y,n.size.width=o.width,n.size.height=o.height,t){let s=this.container[e].getRotation();this.container[e].setRotation(s),n.rotation=this.container[e].getRotation()}this.state.set(e,n)}};this.getInitialTransform=e=>{let t=this.editor.outputToWorld(d$e.position);return e?T({position:t},e):{rotation:this.editor.outputContainer.getRotation(),position:t}};this.setInitialSpriteState=(e,t)=>{let i=this.container[e],{position:o,size:n}=this.getSizePositionFromContainer(e),s=i.getRotation(),a=t!==w.STICKER?!1:i.getFlipHorizontally(),l=t!==w.STICKER?!1:i.getFlipVertically();this.state.set(e,{tool:t,position:o,rotation:s,size:n,flipHorizontally:a,flipVertically:l})};this.setStickerSize=e=>{let t=this.container[this.id];t.setSizeInWorldSpace(this.editor.previewSizeToWorld(e));let i=this.currentSprite;i&&(i.size=this.editor.worldSizeToPreview(t.getSizeInWorldSpace()),this.state.set(this.id,i))};this.setTextSize=e=>{let t=this.getContainerProperties(this.id),i={width:this.editor.previewToWorld(e)},o=i.width/t.width,n={fontSize:Math.round(t.fontSize*o)},s=this.isSpriteText?T(T({},i),n):i;i.width>this.minLength&&n.fontSize&&(this.setContainerProperties(this.id,s,!0),t=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(t.fontSize,!0),this.textToolStore.changeWidth(t.width))};this.setTextDesignScale=e=>{let t=this.getContainerProperties(this.id),i=t.width*e;if(i>this.minLength){this.setContainerProperties(this.id,{width:i},!0);let{width:o}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(o),t=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(t.padding)}};this.getSizePositionFromContainer=(e=this.id)=>{let t=this.container[e];if(t){let i=this.editor.worldToPreview(t.getPosition()),o=this.editor.worldSizeToPreview(t.getSizeInWorldSpace());return{position:i,size:o}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(e=this.id)=>{let t=this.container[e];return t?this.editor.worldSizeToPreview(t.getSizeInWorldSpace()):{width:0,height:0}};this.editor=e,this.container={},this.stickerToolStore=new nt(e),this.textToolStore=new Be(e),this.textDesignToolStore=new st(e),this.rect=new gr(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(e,t){return new L(e,t||e).magnitude}static sizeMagnitude(e){return Math.sqrt(e.width*e.width+e.height*e.height)}updateStateByHistoryState(e,t){return de(this,null,function*(){yield(0,hde.default)(e,i=>de(this,null,function*(){let o=t.common[i];if(!o)return;this.state.get(i)?this.updateExistingItem(i,t):yield this.addNewItem(i,t),this.container[i].setIndexInParent(o.order)})),this.counter+=1})}addNewItem(e,t){return de(this,null,function*(){let i=t.common[e],o=i.size?{width:this.editor.worldToPreview(i.size.width),height:this.editor.worldToPreview(i.size.height)}:void 0,{flipHorizontally:n,flipVertically:s}=this.editor.outputContainer.getData(),a=this.editor.outputContainer.getRotation(),l=s!==n?i.rotation-a:i.rotation+a,c=s!==n?-l:l,u={spriteId:e,transform:{size:o,position:new L(i.position),rotation:c}};if(t.text[e]){let d=t.text[e],p=this.textToolStore.validFontWithConfig(d.identifier);d.identifier=p==null?void 0:p.identifier,yield this.addNewText(u,d)}t.textdesign[e]&&(yield this.addNewTextDesign(u,t.textdesign[e])),t.sticker[e]&&(yield this.addNewSticker(u,U(T({},t.sticker[e]),{flipHorizontally:i.flipHorizontally,flipVertically:i.flipVertically})))})}updateExistingItem(e,t){let i=t.common[e],o=this.state.get(e);this.state.set(e,o);let n=this.container[e];if(n.setPosition(new L(i.position)),n.setRotation(i.rotation),o.rotation=n.getRotation(),i.flipHorizontally!==void 0&&n.setFlipHorizontally(i.flipHorizontally),i.flipVertically!==void 0&&n.setFlipVertically(i.flipVertically),t.text[e]){let s=t.text[e];this.textToolStore.updateStateFromHistory(e,U(T({},s),{fontIdentifier:s.identifier}))}if(t.textdesign[e]){let s=t.textdesign[e];this.textDesignToolStore.updateStateFromHistory(e,U(T({},s),{inverted:s.isInverted}))}t.sticker[e]&&(n.setSizeInWorldSpace(i.size),this.stickerToolStore.updateStateFromHistory(e,t.sticker[e])),this.updatePositionAndSize(e)}get currentSprite(){if(this.isSpriteSelected)return this.state.get(this.id)}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==OB}get position(){if(this.currentSprite)return this.currentSprite.position}get tool(){if(this.currentSprite)return this.currentSprite.tool}get size(){if(this.currentSprite)return this.currentSprite.size}get rotation(){if(this.currentSprite)return this.currentSprite.rotation}get rotationWRTOutputRotation(){if(this.currentSprite){let{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData(),i=this.editor.outputContainer.getRotation();return Gy({rotation:this.currentSprite.rotation-i,flipHorizontally:e,flipVertically:t})}}get flipHorizontal(){if(this.currentSprite)return this.currentSprite.flipHorizontally}get isSpriteSticker(){return this.tool===w.STICKER}get isSpriteText(){return this.tool===w.TEXT}get isSpriteTextDesign(){return this.tool===w.TEXT_DESIGN}get isOnTop(){let e=this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){let{x:e,y:t}=this.currentSprite.position,{height:i,width:o}=this.currentSprite.size;return{x:Math.round(e-o/2),y:Math.round(t-i/2)}}}get currentRect(){if(this.currentSprite)return this.rect}get leftTopPosition(){if(this.currentSprite)return this.rect.leftTop}get leftBottomPosition(){if(this.currentSprite)return this.rect.leftBottom}get leftMidPosition(){if(this.currentSprite)return this.rect.leftMid}get leftMidPadPosition(){if(this.currentSprite){let{leftMid:e}=this.rect;return{x:e.x-this.editor.worldToPreview(this.padding),y:e.y}}}get rightTopPosition(){if(this.currentSprite)return this.rect.rightTop}get rightBottomPosition(){if(this.currentSprite)return this.rect.rightBottom}get rightMidPosition(){if(this.currentSprite)return this.rect.rightMid}get rightMidPadPosition(){if(this.currentSprite){let{rightMid:e}=this.rect;return{x:e.x+this.editor.worldToPreview(this.padding),y:e.y}}}get leftBottomHandlePosition(){if(this.currentSprite)return this.rect.leftBottomHandle}get rightBottomHandlePosition(){if(this.currentSprite)return this.rect.rightBottomHandle}get historyLocale(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale}get stickerLocale(){return this.editor.configStore.locale[w.STICKER].history}get textLocale(){return this.editor.configStore.locale[w.TEXT].history}get textDesignLocale(){return this.editor.configStore.locale[w.TEXT_DESIGN].history}setId(e){this.selectedId.set(e)}},Ce=t_;g([ge],Ce.prototype,"counter",2),g([I],Ce.prototype,"addSticker",2),g([I],Ce.prototype,"addStickerAsync",2),g([I],Ce.prototype,"addText",2),g([I],Ce.prototype,"addTextAsync",2),g([I],Ce.prototype,"addTextDesign",2),g([I],Ce.prototype,"addTextDesignAsync",2),g([I],Ce.prototype,"clickableCanvas",2),g([I],Ce.prototype,"setContainerProperties",2),g([I],Ce.prototype,"setContainerPosition",2),g([I],Ce.prototype,"pureRemoveSprite",2),g([I],Ce.prototype,"deleteSprite",2),g([I],Ce.prototype,"removeSprite",2),g([I],Ce.prototype,"addSnapshot",2),g([I],Ce.prototype,"addNewText",2),g([I],Ce.prototype,"addNewTextDesign",2),g([I],Ce.prototype,"addNewSticker",2),g([I],Ce.prototype,"updateStateFromSerialization",2),g([I],Ce.prototype,"updateStateFromHistory",2),g([I],Ce.prototype,"updateCanvasControls",2),g([I],Ce.prototype,"setEditMode",2),g([I],Ce.prototype,"setDragMode",2),g([I],Ce.prototype,"setPosition",2),g([I],Ce.prototype,"setSize",2),g([I],Ce.prototype,"setRotation",2),g([I],Ce.prototype,"onCanvasClick",2),g([I],Ce.prototype,"select",2),g([I],Ce.prototype,"selectLast",2),g([I],Ce.prototype,"selectNext",2),g([I],Ce.prototype,"deselect",2),g([I],Ce.prototype,"bringToFront",2),g([I],Ce.prototype,"flipHorizontally",2),g([I],Ce.prototype,"pureReset",2),g([I],Ce.prototype,"onCornerDrag",2),g([I],Ce.prototype,"onWidthDrag",2),g([I],Ce.prototype,"onPaddingDrag",2),g([I],Ce.prototype,"correctTextFlip",2),g([I],Ce.prototype,"reverseTextHorizontally",2),g([I],Ce.prototype,"reverseTextVertically",2),g([k],Ce.prototype,"currentSprite",1),g([k],Ce.prototype,"padding",1),g([k],Ce.prototype,"isEditMode",1),g([k],Ce.prototype,"isDragMode",1),g([k],Ce.prototype,"id",1),g([k],Ce.prototype,"isSpriteSelected",1),g([k],Ce.prototype,"position",1),g([k],Ce.prototype,"tool",1),g([k],Ce.prototype,"size",1),g([k],Ce.prototype,"rotation",1),g([k],Ce.prototype,"rotationWRTOutputRotation",1),g([k],Ce.prototype,"flipHorizontal",1),g([k],Ce.prototype,"isSpriteSticker",1),g([k],Ce.prototype,"isSpriteText",1),g([k],Ce.prototype,"isSpriteTextDesign",1),g([k],Ce.prototype,"isOnTop",1),g([k],Ce.prototype,"spritePosition",1),g([k],Ce.prototype,"currentRect",1),g([k],Ce.prototype,"leftTopPosition",1),g([k],Ce.prototype,"leftBottomPosition",1),g([k],Ce.prototype,"leftMidPosition",1),g([k],Ce.prototype,"leftMidPadPosition",1),g([k],Ce.prototype,"rightTopPosition",1),g([k],Ce.prototype,"rightBottomPosition",1),g([k],Ce.prototype,"rightMidPosition",1),g([k],Ce.prototype,"rightMidPadPosition",1),g([k],Ce.prototype,"leftBottomHandlePosition",1),g([k],Ce.prototype,"rightBottomHandlePosition",1),g([k],Ce.prototype,"historyLocale",1),g([k],Ce.prototype,"stickerLocale",1),g([k],Ce.prototype,"textLocale",1),g([k],Ce.prototype,"textDesignLocale",1)});var cs,fde,FB=m(()=>{Ye();cs={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},fde={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:ge.map({})}});var ot,gde=m(()=>{Ye();Y();FB();ot=class{constructor(e,t){this.minCropSize=0;this.state=fde,this.configStore=e.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=t}changeIdentifier(e){this.state.identifier=e,this.state.cropState.get(e)||this.state.cropState.set(e,T({},cs))}changeRatio(e){let t=this.state.cropState.get(this.identifier);t&&this.state.cropState.set(this.identifier,U(T({},t),{ratio:e}))}changeSize(e){let t=this.state.cropState.get(this.identifier);t&&(e.width&&e.width>0&&(t.size.width=Math.round(e.width)),e.height&&e.height>0&&(t.size.height=Math.round(e.height)),this.state.cropState.set(this.identifier,t))}changeHeight(e){let t=this.state.cropState.get(this.identifier);t&&e&&(t.size.height=Math.round(e),this.state.cropState.set(this.identifier,t))}changeWidth(e){let t=this.state.cropState.get(this.identifier);t&&e&&(t.size.width=Math.round(e),this.state.cropState.set(this.identifier,t))}changePositionX(e,t){let i=this.state.cropState.get(this.identifier);return i&&e<=t-this.minCropSize&&e>=0?(i.position.x=Math.round(e),this.state.cropState.set(this.identifier,i),!0):!1}changePositionY(e,t){let i=this.state.cropState.get(this.identifier);return i&&e<=t-this.minCropSize&&e>=0?(i.position.y=Math.round(e),this.state.cropState.set(this.identifier,i),!0):!1}changePosition(e,t){let i=this.state.cropState.get(this.identifier);return i&&e.x<=t.width-this.minCropSize&&e.x>=0&&e.y<=t.height-this.minCropSize&&e.y>=0?(i.position.x=Math.round(e.x),i.position.y=Math.round(e.y),this.state.cropState.set(this.identifier,i),!0):!1}changeLockResolution(e){let t=this.state.cropState.get(this.identifier);t&&(t.lockResolution=e!==void 0?e:!t.lockResolution,this.state.cropState.set(this.identifier,t))}changeForceDimensions(e){let t=this.state.cropState.get(this.identifier);t&&(t.forceDimensions=e,this.state.cropState.set(this.identifier,t))}setRotation(e){this.state.rotationInDegrees=e}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=!1,this.state.flipVertically=!1}updateFlip({flipHorizontally:e,flipVertically:t}){this.state.flipHorizontally=e,this.state.flipVertically=t}setOutputRotation(e){this.state.outputRotation=e}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){let{width:e,height:t}=this.defaults.maxCropMaskSize;return new L(e/2,t/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:cs.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:cs.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:cs.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:cs.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:cs.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:cs.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:cs.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:cs.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:cs.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};g([ge],ot.prototype,"state",2),g([I],ot.prototype,"changeIdentifier",1),g([I],ot.prototype,"changeRatio",1),g([I],ot.prototype,"changeSize",1),g([I],ot.prototype,"changeHeight",1),g([I],ot.prototype,"changeWidth",1),g([I],ot.prototype,"changePositionX",1),g([I],ot.prototype,"changePositionY",1),g([I],ot.prototype,"changePosition",1),g([I],ot.prototype,"changeLockResolution",1),g([I],ot.prototype,"changeForceDimensions",1),g([I],ot.prototype,"setRotation",1),g([I],ot.prototype,"resetRotation",1),g([I],ot.prototype,"resetOutputRotation",1),g([I],ot.prototype,"resetFlip",1),g([I],ot.prototype,"updateFlip",1),g([I],ot.prototype,"setOutputRotation",1),g([I],ot.prototype,"flipHorizontally",1),g([I],ot.prototype,"flipVertically",1),g([k],ot.prototype,"flipCenter",1),g([k],ot.prototype,"isFlippedHorizontal",1),g([k],ot.prototype,"isFlippedVertical",1),g([k],ot.prototype,"identifier",1),g([k],ot.prototype,"height",1),g([k],ot.prototype,"width",1),g([k],ot.prototype,"position",1),g([k],ot.prototype,"ratio",1),g([k],ot.prototype,"size",1),g([k],ot.prototype,"x",1),g([k],ot.prototype,"y",1),g([k],ot.prototype,"lockResolution",1),g([k],ot.prototype,"forceDimensions",1),g([k],ot.prototype,"selectedCrop",1),g([k],ot.prototype,"rotationInDegrees",1),g([k],ot.prototype,"outputRotation",1)});var AB,bde=m(()=>{Ye();Y();mf();AB=class{constructor(e){this.transforms={output:JSON.stringify(Ot.IDENTITY),preview:JSON.stringify(Ot.IDENTITY)};this.setFrameOpacity=e=>{this.frameOpacity=e,this.entered&&this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(0)};this.setOverlayOpacity=e=>{this.overlayOpacity=e,this.entered&&this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(0)};this.editor=e,this.overlayOpacity=0,this.frameOpacity=0,this.entered=!1}onLeave(){let{flipHorizontally:e,flipVertically:t,rotation:i,outputRotation:o}=this.transformToolStore.rotateFlipState;this.entered=!1,this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(this.frameOpacity),this.editor.engine.setWatermarkOpacity(1);let n=this.editor.previewToWorld(new L(this.transformToolStore.leftTopRespectFlip).add(new L(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new L(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),s=this.engineMediator.preview.container,{outputContainer:a}=this.editor;a.setResolution(ke(this.transformToolStore.localOutputImageSize)),a.setData({flipVertically:t,flipHorizontally:e});let l=s.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();let c=1;if(this.transformToolStore.lockResolution){let{cropMaskSize:f,defaultImageSize:_}=this.transformToolStore,x=this.transformToolStore.maxCropMaskSize;c={height:f.height*_.height/x.height,width:f.width*_.width/x.width}.width/this.transformToolStore.localOutputImageSize.width}let u=Math.abs(l.x),d=c/(u/this.transformToolStore.defaultScale),p={x:d,y:d},h=-(i-o);a.setTransform({scale:p,position:n,rotation:h}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}resetTransforms(e){this.transforms=e}onEnter(){this.entered=!0,this.editor.overlayToolStore.identifier!=="identity"&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),this.editor.frameToolStore.identifier!=="identity"&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.engine.setWatermarkOpacity(0),this.editor.scale.setScaleToDefault();let e=this.engineMediator.preview.container,{outputContainer:t}=this.editor,i=JSON.parse(this.transforms.preview);t.setResolution(ke(this.transformToolStore.defaultImageSize)),e.setTransform(i),t.setTransform(JSON.parse(this.transforms.output));let o=i.scale;t.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:o.y<0,flipHorizontally:o.x<0}),this.engineMediator.preview.savePreviewTransform(i);let{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(e,t=!0){let{width:i,height:o}=this.editor.engineMediator.image.container.getBounds(),n=EY(e)?{width:o,height:i}:{width:i,height:o};this.editor.outputContainer.rotate(e,n),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());let{rotation:s}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(s),Cr(()=>{this.editor.scale.setInitialTransform();let a=this.getScaleWithFlip(s);this.engineMediator.preview.container.setScale(a),this.transformToolStore.setCropDefaults(!0),this.transformToolStore.updateCropMask()}),t&&this.editor.render()}applyPreviewTransform(){let{rotation:e,flipHorizontally:t,flipVertically:i}=this.transformToolStore.rotateFlipState,o=this.editor.scale.getPositionWithOffset(),n=this.getScaleWithFlip(),s=e;t&&(s=pf(s)),i&&(s=pf(s));let a={position:o,rotation:s,scale:n};this.engineMediator.preview.savePreviewTransform(a),this.engineMediator.preview.container.setTransform(a)}getScaleWithFlip(e=this.transformToolStore.rotateFlipState.rotation){let{flipHorizontally:t,flipVertically:i}=this.transformToolStore.rotateFlipState,o=t?-1:1,n=i?-1:1,s=this.editor.scale.calculateScale(e);return{x:s*o,y:s*n}}saveTransforms(){let e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:e,output:t}}saveTransformsBasedOnFlip(){let e=this.engineMediator.preview.container.getTransform(),{scale:t}=e,{flipVertically:i,flipHorizontally:o}=this.editor.outputContainer.getData(),n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(U(T({},e),{scale:{x:o?-t.x:t.x,y:i?-t.y:t.y}})),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}}});var PB,yde=m(()=>{Y();PB=class{constructor(e){this.store=e;this.initialState={};this.state={}}init(){this.initialState=this.store.serializableState,this.state=T({},this.initialState)}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,Pr.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}}});var _de,Ep,be,MB=m(()=>{Ye();V();Y();as();da();gde();bde();yde();_de="identity",Ep=class{constructor(e){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=ge.box(!1);this.minCropSize=0;this.transformHistory=new PB(this);this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=e=>{if(!e.trim())return!1;let t=this.editor.configStore.config.assetBaseUrl,{length:i}=t;if(t[i-1]!=="/"&&(t+="/"),`${t}transform`===e)return!1;let o=new Image;try{return o.src=e,!0}catch(n){return!1}};this.reset=()=>{this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.resetCrop(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop(),this.editor.render(),this.trackChanges()};this.changeLocalOutputSize=e=>{this.localOutputSize.height=Math.round(e.height),this.localOutputSize.width=Math.round(e.width),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(e.width),height:Math.round(e.height)})};this.changeDefaultScale=e=>{this.defaults.scale=e};this.changeLocalOutputHeight=e=>{this.localOutputSize.height=Math.round(e)};this.changeLocalOutputWidth=e=>{this.localOutputSize.width=Math.round(e)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution(),this.trackChanges()};this.rotateClockwise=()=>{let e=this.editor.outputContainer.getRotation(),t=this.isFlippedVertical?iR:oR;this.rotateOutputContainer(t(e))};this.rotateAntiClockwise=()=>{let e=this.editor.outputContainer.getRotation(),t=this.isFlippedVertical?oR:iR;this.rotateOutputContainer(t(e))};this.flipHorizontally=(e=!0)=>{this.transformStore.flipHorizontally(),this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal),this.transformRender(e),e&&this.trackChanges()};this.flipVertically=(e=!0)=>{this.transformStore.flipVertically(),this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical),this.transformRender(e),e&&this.trackChanges()};this.applyDefaultCrop=(e=!1)=>{if(this.identifier==="identity"){let{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,e)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,!0)};this.onLeftTop=({x:e,y:t})=>{let i=this.getRatio(),o=this.rightBottom,{minCropMaskSize:n,maxCropMaskSize:s}=this,a=Math.min(Math.max(0,e),o.x-n.width),l=Math.min(Math.max(0,t),o.y-n.height),c=o.x-a,u=o.y-l,d={width:Math.max(this.minCropSize,Math.min(c,s.width-a)),height:Math.max(this.minCropSize,Math.min(u,s.height-l))};if(i==="*")this.changePosition({x:a,y:l})&&this.changeCropAndOutputSize(d);else{let p=this.proportionalSize(i,d),h=new L(o).subtract({x:p.width,y:p.height});this.changePosition(h)&&this.changeCropAndOutputSize(p,i)}};this.onLeftBottom=({x:e,y:t})=>{let i=this.getRatio(),o=this.rightTop,{minCropMaskSize:n,maxCropMaskSize:s}=this,a=Math.min(Math.max(0,e),o.x-n.width),l=Math.max(0,t,o.y+n.height),c=o.x-a,u=l-o.y,d={width:Math.max(1,Math.min(c,s.width-a)),height:Math.max(1,Math.min(u,s.height-o.y))};if(i==="*")this.changePositionX(a)&&this.changeCropAndOutputSize(d);else{let p=this.proportionalSize(i,d);this.changePositionX(o.x-p.width)&&this.changeCropAndOutputSize(p,i)}};this.onRightTop=({x:e,y:t})=>{let i=this.getRatio(),o=this.leftBottom,{minCropMaskSize:n,maxCropMaskSize:s}=this,a=Math.max(0,e,o.x+n.width),l=Math.min(Math.max(0,t),o.y-n.height),c=a-o.x,u=o.y-l,d={width:Math.max(1,Math.min(c,s.width-o.x)),height:Math.max(1,Math.min(u,s.height-l))};if(i==="*")this.changePositionY(l)&&this.changeCropAndOutputSize(d);else{let p=this.proportionalSize(i,d);this.changePositionY(o.y-p.height)&&this.changeCropAndOutputSize(p,i)}};this.onRightBottom=({x:e,y:t})=>{let i=this.getRatio(),o=this.leftTop,{minCropMaskSize:n,maxCropMaskSize:s}=this,a=Math.max(0,e,o.x+n.width),l=Math.max(0,t,o.y+n.height),c=a-o.x,u=l-o.y,d={width:Math.max(1,Math.min(c,s.width-o.x)),height:Math.max(1,Math.min(u,s.height-o.y))};if(i==="*")this.changeCropAndOutputSize(d);else{let p=this.proportionalSize(i,d);this.changeCropAndOutputSize(p,i)}};this.onPixelWidth=e=>{let t=JSON.stringify(ke(this.localOutputSize)),i=this.entityManager.items.find(n=>n.identifier===this.identifier),o=this.defaults.imageSize;if(i&&i.ratio){let n=e,s=this.localOutputSize.height,{ratio:a}=i;if(a==="*"&&this.lockResolution&&(a=this.localOutputSize.width/this.localOutputSize.height),a==="*"&&!this.lockResolution)n=Math.max(Math.min(e,o.width),this.minCropSize),this.changeLocalOutputWidth(n),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(n),height:Math.round(s)});else{let l=Ep.placeCropMask(a,o);n=Math.max(Math.min(n,l.width),this.minCropSize),s=n/a,this.changeLocalOutputSize({height:s,width:n})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(t)),Math.round(n)}return e};this.onPixelHeight=e=>{let t=JSON.stringify(ke(this.localOutputSize)),i=this.entityManager.items.find(n=>n.identifier===this.identifier),o=this.defaults.imageSize;if(i&&i.ratio){let n=e,s=this.localOutputSize.width,{ratio:a}=i;if(a==="*"&&this.lockResolution&&(a=this.localOutputSize.width/this.localOutputSize.height),a==="*"&&!this.lockResolution)n=Math.max(Math.min(e,o.height),this.minCropSize),this.changeLocalOutputHeight(n),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(s),height:Math.round(n)});else{let l=Ep.placeCropMask(a,o);n=Math.max(Math.min(n,l.height),this.minCropSize),s=n*a,this.changeLocalOutputSize({height:n,width:s})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(t)),Math.round(n)}return e};this.setFrameOpacity=e=>{this.transformations.setFrameOpacity(e)};this.setOverlayOpacity=e=>{this.transformations.setOverlayOpacity(e)};this.closestRatioReducer=e=>(t,i)=>i===null||Math.abs(e-t.ratio)<Math.abs(e-i.ratio)?-1:1;this.closestDimensionsReducer=e=>(t,i)=>{if(i===null)return-1;let o=Math.abs(t.dimensions.x/t.dimensions.y),n=Math.abs(i.dimensions.x/i.dimensions.y);return o===n?t.dimensions.x*t.dimensions.y>i.dimensions.x*i.dimensions.y?-1:1:Math.abs(e-o)<Math.abs(e-n)?-1:1};this.getMatchingItem=()=>{let e=this.entityManager.items.findIndex(l=>l.identifier==="imgly_transform_common_custom");if(e!==-1)return this.entityManager.items[e];let t=this.entityManager.items.findIndex(l=>l.ratio==="*");if(t!==-1)return this.entityManager.items[t];let i=ke(this.editor.outputContainer.getResolution()),o=Math.abs(i.width/i.height),[n]=this.entityManager.items.filter(l=>l.ratio&&typeof l.ratio=="number").sort(this.closestRatioReducer(o)),[s]=this.entityManager.items.filter(l=>l.dimensions&&!l.ratio).sort(this.closestDimensionsReducer(o));if(!n||!s||!n.ratio&&!s.dimensions)return this.entityManager.items[0];if(!s||!s.dimensions)return n;if(!n||!n.ratio)return s;let a=Math.abs(s.dimensions.x/s.dimensions.y);return a===n.ratio||Math.abs(o-n.ratio)<Math.abs(o-a)?n:s};this.getTransform=e=>{let t=this.entityManager.items.find(i=>i.identifier===e);return t||(t=this.getMatchingItem()),t};this.editor=e,this.selectedCategory=_de,this.transformStore=new ot(e,this.defaults),this.transformations=new AB(e);let s=this.config,{enableRotation:t,enableFlip:i}=s,o=Hi(s,["enableRotation","enableFlip"]),n=this.editor.assetProvider.getAssets("transform");this.entityManager=new yr(n,U(T({},o),{locale:T(T({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new gr(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new gr(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(e){return e*Math.PI/180}static placeCropMask(e,t){if(t.height*e>t.width)return{height:t.width/e,width:t.width,yChanged:!0};let i=t.height*e;return{height:t.height,width:i,yChanged:!1}}changeIdentifier(e,t=!1){this.transformStore.changeIdentifier(e);let i=this.getCropMask(e,this.defaults.imageSize);i&&(this.transformStore.changeRatio(i.ratio),this.changeLocalOutputSize(i),this.updatePreviewSizeWRTImageSize(),i.yChanged!==void 0&&this.updateInitialCropMaskPosition(i.yChanged),i.dimensions&&this.changeLocalOutputSize({width:i.dimensions.x,height:i.dimensions.y}),t&&this.trackChanges())}setDragMode(e){this.dragMode.set(e)}getCropMask(e,t){let i=this.getTransform(e);if(i){let{ratio:o,forceDimensions:n,lockDimensions:s,dimensions:a=null}=i;if(n&&this.transformStore.changeForceDimensions(n),s&&this.transformStore.changeLockResolution(s),o)switch(o){case"*":return this.changePosition({x:0,y:0}),U(T({},t),{yChanged:void 0,ratio:"*",dimensions:a});default:return U(T({},Ep.placeCropMask(i.ratio,t)),{ratio:i.ratio,dimensions:a})}else{let{x:l,y:c}=i.dimensions;return U(T({},Ep.placeCropMask(l/c,t)),{ratio:null,dimensions:a})}}return null}setCropDefaults(e=!1){let t=this.editor.outputContainer.getResolution();this.setDefaultImageSize(t);let i=this.editor.getPreviewSize(),{position:o}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(i),this.setDefaultCropPosition({x:o.x-i.width/2,y:o.y-i.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),e||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}setDefaultImageSize(e){this.defaults.imageSize=T({},ke(e)),this.lockResolution||(this.localOutputSize=T({},ke(e)))}setMaxCropSize(e){this.defaults.maxCropMaskSize.height=e.height,this.defaults.maxCropMaskSize.width=e.width}setDefaultCropPosition(e){this.defaults.cropMaskPosition.x=e.x,this.defaults.cropMaskPosition.y=e.y}resetCrop(){this.state.cropState.clear(),this.transformStore.changeIdentifier("identity")}toggleCategorySelection(e){this.selectedCategory=this.selectedCategory===e?_de:e}pureReset(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();let e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:e,output:t})}changePosition(e){return this.transformStore.changePosition(e,this.defaults.maxCropMaskSize)}changePositionX(e){return this.transformStore.changePositionX(e,this.defaults.maxCropMaskSize.width)}changePositionY(e){return this.transformStore.changePositionY(e,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:e,height:t},i,o=!0){if(this.transformStore.changeWidth(e),this.transformStore.changeHeight(t),!this.lockResolution){let{height:n,width:s}=this.defaults.maxCropMaskSize,{height:a,width:l}=this.defaults.imageSize,c=a/n*t,u=l/s*e;i&&(c=u/i),o&&this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(u),height:Math.round(c)}),t>=this.minCropSize&&this.changeLocalOutputHeight(c),e>=this.minCropSize&&this.changeLocalOutputWidth(u)}}transformRender(e=!0){this.transformations.applyPreviewTransform(),e&&this.editor.render()}addSnapshot(){this.transformHistory.isEqual()||this.editor.addSnapshot({[w.TRANSFORM]:this.serializableState},ze.EDIT,"Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){let{flipHorizontally:e,flipVertically:t}=this.rotateFlipState,{identifier:i,rotationInDegrees:o}=this,n=sd(o),s=rR(aC(this.editor.engineMediator.output.container.getRotation())+o),{start:a,end:l}=this.convertUIToOperationOptions(n,s);return{flipHorizontally:e,flipVertically:t,rotation:n,start:a,end:l,identifier:i,outputRotation:s}}getStartEndForOperation(e){let{leftTop:t,rightBottom:i,maxCropMaskSize:o}=this,n=t.y,s=t.x,a=i.x,l=i.y;switch(e){case 270:return{leftTop:{x:o.height-l,y:s},rightBottom:{x:o.height-n,y:a}};case 180:return{leftTop:{x:o.width-a,y:o.height-l},rightBottom:{x:o.width-s,y:o.height-n}};case 90:return{leftTop:{x:n,y:o.width-a},rightBottom:{x:l,y:o.width-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:a,y:l}}}}getStartEndForUI(e,t,i){let{maxCropMaskSize:o}=this,n=t.y,s=t.x,a=i.x,l=i.y;switch(e){case 90:return{leftTop:{x:o.width-l,y:s},rightBottom:{x:o.width-n,y:a}};case 180:return{leftTop:{x:o.width-a,y:o.height-l},rightBottom:{x:o.width-s,y:o.height-n}};case 270:return{leftTop:{x:n,y:o.height-a},rightBottom:{x:l,y:o.height-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:a,y:l}}}}convertOperationOptionsToUI({start:e,end:t,rotation:i,outputRotation:o}){let n=o===90||o===270,s=n?L.fromSize(this.defaultImageSize).swapped:L.fromSize(this.defaultImageSize),a=Math.cos(i),l=Math.sin(i),c=this.calculateScale(i),u=new L(Math.min(e.x,t.x),Math.min(e.y,t.y)),p=new L(Math.max(e.x,t.x),Math.max(e.y,t.y)).subtract(u).divide(2),f=u.add(p).multiply(s).subtract(s.multiply(.5)),_=new L(f.x*a-f.y*l,f.x*l+f.y*a).multiply(c),y=s.multiply(.5).add(_).divide(s),D=y.subtract(p.multiply(c)),E=y.add(p.multiply(c)),F=n?L.fromSize(this.maxCropMaskSize).swapped:L.fromSize(this.maxCropMaskSize),N=D.multiply(F),R=E.multiply(F),{leftTop:B,rightBottom:se}=this.getStartEndForUI(o,N,R);return{start:new L(B),end:new L(se)}}convertUIToOperationOptions(e,t){let i=t===90||t===270,o=i?L.fromSize(this.defaultImageSize).swapped:L.fromSize(this.defaultImageSize),n=i?L.fromSize(this.maxCropMaskSize).swapped:L.fromSize(this.maxCropMaskSize),s=Math.cos(-e),a=Math.sin(-e),l=this.calculateScale(e,i),{leftTop:c,rightBottom:u}=this.getStartEndForOperation(t),d=new L(c).divide(n),h=new L(u).divide(n).subtract(d).divide(2),_=d.add(h).multiply(o).subtract(o.multiply(.5)),x=new L(_.x*s-_.y*a,_.x*a+_.y*s).divide(l),D=o.multiply(.5).add(x).divide(o),E=D.subtract(h.divide(l)),F=D.add(h.divide(l));return{start:E,end:F}}calculateScale(e,t=!1){let i=t?L.fromSize(this.defaultImageSize).swapped:L.fromSize(this.defaultImageSize),o=new L(Math.abs(i.x*Math.cos(e))+Math.abs(i.y*Math.sin(e)),Math.abs(i.x*Math.sin(e))+Math.abs(i.y*Math.cos(e))),n=i.subtract(o.clone()).divide(2).abs;return n.y>n.x?n.y*2/i.y+1:n.x*2/i.x+1}updateStateFromSerialization(e){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();let t=Math.round(aC(e.rotation));if(this.transformStore.setRotation(t>180?t-360:t),this.transformations.rotateOutputContainer(sd(rR(e.outputRotation||eo.Top))),e.identifier&&this.transformStore.changeIdentifier(e.identifier),e.start&&e.end){(e.end.x===0||e.end.y===0)&&(e.end.x=1,e.end.y=1);let{start:i,end:o}=this.convertOperationOptionsToUI({start:new L(e.start),end:new L(e.end),rotation:e.rotation,outputRotation:e.outputRotation});this.changePositionX(i.x),this.changePositionY(i.y);let n=o.x-i.x,s=o.y-i.y;this.transformStore.changeSize({width:n,height:s});let{maxCropMaskSize:a,imageSize:l}=this.defaults,c={height:s*l.height/a.height,width:n*l.width/a.width};this.changeLocalOutputSize(c)}e.flipHorizontally&&this.flipHorizontally(!1),e.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(e){this.defaultAngle=e}updateCanvasControls(e){let t=ke(this.cropMaskPosition),i=ke(this.cropMaskSize),o=ke(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:o.height*i.height/e.height,width:o.width*i.width/e.width},void 0,!1),this.changePosition({y:o.height*t.y/e.height,x:o.width*t.x/e.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter(),this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(e){this.transformStore.setRotation(e),this.transformRender()}rotateOutputContainer(e,t=!0){return de(this,null,function*(){this.setDragMode(!0),this.transformations.rotateOutputContainer(e,t),yield this.editor.wait(),this.setDragMode(!1)})}applyInitialCrop(){let{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,!1)}clickableCanvas(e){this.editor.clickableCanvas(e)}proportionalSize(e,t,i=this.defaults.maxCropMaskSize,o=this.minCropSize){let n=t.height*e,{height:s}=t;return(n>i.width||n<o||s<o)&&(n=t.width,s=t.width/e),{width:Math.round(n),height:Math.round(s)}}checkAndAddSnapshot(e){let t=ke(this.localOutputSize);(e.width!==t.width||e.height!==t.height)&&this.trackChanges()}updateInitialCropMaskPosition(e){let{cropMaskSize:t}=this,i=this.defaults.maxCropMaskSize;e?this.changePosition({x:0,y:Math.abs(i.height-t.height)/2}):this.changePosition({x:Math.abs(i.width-t.width)/2,y:0})}updatePreviewSizeWRTImageSize(){let e=ke(this.localOutputSize),t=ke(this.defaults.imageSize),i=ke(this.defaults.maxCropMaskSize),o={height:i.height*e.height/t.height,width:i.width*e.width/t.width};this.transformStore.changeSize(o)}getScaleWithFlip(e=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(e)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){let{flipHorizontally:e,flipVertically:t,rotationInDegrees:i,outputRotation:o}=this.transformStore.state;return{flipHorizontally:e,flipVertically:t,rotation:Ep.inRadians(i),outputRotation:o}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[w.TRANSFORM]}get locale(){return this.editor.configStore.locale[w.TRANSFORM]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){let e=this.getRatio();return e==="*"||e===1?{width:this.minCropSize,height:this.minCropSize}:e>1?{width:this.minCropSize*e,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*e}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){let e=this.getTransform(this.identifier);if(e){if(Object.prototype.hasOwnProperty.call(e,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:e.ratio;let{x:t,y:i}=e.dimensions;return t/i}return"*"}},be=Ep;g([ge],be.prototype,"selectedCategory",2),g([ge],be.prototype,"defaults",2),g([ge],be.prototype,"localOutputSize",2),g([I],be.prototype,"changeIdentifier",1),g([I],be.prototype,"setDragMode",1),g([I],be.prototype,"setCropDefaults",1),g([I],be.prototype,"setDefaultImageSize",1),g([I],be.prototype,"setMaxCropSize",1),g([I],be.prototype,"setDefaultCropPosition",1),g([I],be.prototype,"resetCrop",1),g([I],be.prototype,"toggleCategorySelection",1),g([I],be.prototype,"pureReset",1),g([I],be.prototype,"reset",2),g([I],be.prototype,"changePosition",1),g([I],be.prototype,"changePositionX",1),g([I],be.prototype,"changePositionY",1),g([I],be.prototype,"changeCropAndOutputSize",1),g([I],be.prototype,"onLeave",1),g([I],be.prototype,"onEnter",1),g([I],be.prototype,"changeLocalOutputSize",2),g([I],be.prototype,"changeDefaultScale",2),g([I],be.prototype,"changeLocalOutputHeight",2),g([I],be.prototype,"changeLocalOutputWidth",2),g([I],be.prototype,"changeLockResolution",2),g([I],be.prototype,"setRotation",1),g([I],be.prototype,"rotateClockwise",2),g([I],be.prototype,"rotateAntiClockwise",2),g([I],be.prototype,"rotateOutputContainer",1),g([I],be.prototype,"flipHorizontally",2),g([I],be.prototype,"flipVertically",2),g([I],be.prototype,"applyDefaultCrop",2),g([I],be.prototype,"applyInitialCrop",1),g([I],be.prototype,"updateCropMask",2),g([I],be.prototype,"clickableCanvas",1),g([I],be.prototype,"onLeftTop",2),g([I],be.prototype,"onLeftBottom",2),g([I],be.prototype,"onRightTop",2),g([I],be.prototype,"onRightBottom",2),g([I],be.prototype,"proportionalSize",1),g([I],be.prototype,"onPixelWidth",2),g([I],be.prototype,"onPixelHeight",2),g([I],be.prototype,"updateInitialCropMaskPosition",1),g([I],be.prototype,"updatePreviewSizeWRTImageSize",1),g([k],be.prototype,"cropState",1),g([k],be.prototype,"identifier",1),g([k],be.prototype,"ratio",1),g([k],be.prototype,"height",1),g([k],be.prototype,"width",1),g([k],be.prototype,"localOutputImageSize",1),g([k],be.prototype,"localOutputHeight",1),g([k],be.prototype,"localOutputWidth",1),g([k],be.prototype,"lockResolution",1),g([k],be.prototype,"forceDimensions",1),g([k],be.prototype,"rotationInDegrees",1),g([k],be.prototype,"outputRotation",1),g([k],be.prototype,"isDragMode",1),g([k],be.prototype,"rotateFlipState",1),g([k],be.prototype,"selectedCategoryIdentifier",1),g([k],be.prototype,"categories",1),g([k],be.prototype,"items",1),g([k],be.prototype,"config",1),g([k],be.prototype,"locale",1),g([k],be.prototype,"isOptionSelected",1),g([k],be.prototype,"leftTop",1),g([k],be.prototype,"leftBottom",1),g([k],be.prototype,"rightTop",1),g([k],be.prototype,"rightBottom",1),g([k],be.prototype,"isFlippedHorizontal",1),g([k],be.prototype,"isFlippedVertical",1),g([k],be.prototype,"leftTopRespectFlip",1),g([k],be.prototype,"leftBottomRespectFlip",1),g([k],be.prototype,"rightTopRespectFlip",1),g([k],be.prototype,"rightBottomRespectFlip",1),g([k],be.prototype,"cropMaskPosition",1),g([k],be.prototype,"cropMaskSize",1),g([k],be.prototype,"state",1),g([k],be.prototype,"defaultImageSize",1),g([k],be.prototype,"maxCropMaskSize",1),g([k],be.prototype,"minCropMaskSize",1),g([k],be.prototype,"defaultCropMaskPosition",1),g([k],be.prototype,"defaultScale",1)});var Bt,pa=m(()=>{Ye();V();zl();Y();qw();Hw();Nw();LB();gf();jw();Ww();tde();qM();jM();zB();uB();dB();mB();sde();cde();ude();Ho();gB();bB();RB();MB();Bt=class{constructor(e){this.checkImageResize=()=>{this.engine.on(Bl.BEGAN_IMAGE_DOWNSCALING,()=>{this.modalStore.showInfoModal("resizing")}),this.engine.on(Bl.IMAGE_DOWNSCALED,({width:e,height:t})=>{let{maxMegaPixels:i}=this.configStore.config.engine.downscaleOptions,o=iC.isMobile()?i.mobile:i.desktop;this.modalStore.hideModal(),this.modalStore.showActionModal({type:St.WARNING,identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${o}`,width:`${e}`,height:`${t}`}})})};this.init=e=>{this.historyStore.isDirty()?this.modalStore.showActionModal({type:St.WARNING,identifier:"discardChanges",handleConfirm:()=>{this.setImage(e),this.resetToolStates()},handleDismiss:()=>{this.setImage(e,!0)}}):(this.historyStore.reset(),this.setImage(e,!0).then(()=>{let{engine:i,displayCanvasRendererWarning:o}=this.configStore.config;i.preferredRenderer==="canvas"&&o&&this.modalStore.showActionModal({type:St.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})})),this.libraryStore.fetchImages()};this.setImage=(e,t=!1)=>de(this,null,function*(){try{this.activeStore.setImageLoadedToEngine(!1),this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),yield this.activeStore.setImage(e),yield this.engineMediator.image.addImageToContainer(),this.canvasStore.resizeCanvas(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults();let{flipHorizontally:i,flipVertically:o,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:o,flipHorizontally:i}),yield this.transformToolStore.rotateOutputContainer(vb(n),!1),t?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransforms(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),this.historyStore.addInitialSnapshot(),yield this.renderPromise(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"&&this.filterToolStore.setImageAndGetPreviews(),this.activeStore.tool?this.configStore.events.onImageLoaded():this.onReady(),this.modalStore.identifier!=="imageResized"&&this.modalStore.hideModal(),this.activeStore.setImageLoadedToEngine(!0),this.resize()}catch(i){this.configStore.events.onErrorImageLoading(i),this.modalStore.hideModal(),this.modalStore.showActionModal({type:St.ERROR,identifier:i.identifier?i.identifier:"rendering",error:i,handleConfirm:()=>{window.location.reload()}})}});this.onToolChange=(e,t=null,i=!0)=>{e!==t&&this.engineMediator.preview.container&&([e,t].indexOf(w.TRANSFORM)!==-1?(e===w.TRANSFORM?(this.transformToolStore.onLeave(),this.transformToolStore.addSnapshot(),this.snappingStore.calculatePreviewTopLeftPosition()):t===w.TRANSFORM&&this.transformToolStore.onEnter(),this.resize(t)):(this.scale.resetOffset(),this.scale.resetPosition(),this.scale.setScaleToDefault(),this.scale.scaleRender(!0)),i&&this.render())};this.resize=(e=null)=>{try{let t=this.activeStore.tool,i=e===w.TRANSFORM||!e&&t===w.TRANSFORM;this.canvasStore.resizeCanvas(e),this.transformToolStore.applyDefaultCrop();let o=ke(this.transformToolStore.maxCropMaskSize);i||this.transformToolStore.onEnter();let n=this.engineMediator.preview.container.getRotation();if(this.engineMediator.preview.updateTransform(n)){this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.transformToolStore.updateCanvasControls(o),this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls();let a=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(a),i||(this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()),this.snappingStore.calculatePreviewTopLeftPosition(),this.render()}}catch(t){this.configStore.events.onErrorImageLoading(t),this.modalStore.showActionModal({type:St.ERROR,identifier:"rendering",handleConfirm:()=>{window.location.reload()}})}};this.export=(i={})=>{var o=i,{preventExportEvent:e}=o,t=Hi(o,["preventExportEvent"]);return new Promise((n,s)=>{this.modalStore.showInfoModal("exporting");let a=this.activeStore.tool===w.TRANSFORM;a&&this.transformToolStore.onLeave();let{config:l}=this.configStore,c=T(T({},l.export.image),t),{exportType:u,format:d,quality:p,enableDownload:h}=c;this.engineMediator.engine.export(u,d,p).then(f=>{h&&this.triggerFileDownload(l.export.filename,d,u,f),e||this.configStore.events.onExport(f),this.historyStore.isDirtySinceSave=!1,n(f)}).catch(f=>{s(f)}).finally(()=>{a&&(this.transformToolStore.onEnter(),this.render()),this.modalStore.hideModal()})})};this.serialize=({image:e}={image:!0})=>this.serializationMediator.serialize({image:e});this.deserialize=e=>this.serializationMediator.deserialize(e);this.close=()=>{this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning?this.modalStore.showActionModal({type:St.WARNING,identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}}):this.configStore.events.onClose()};this.hasChanges=()=>this.historyStore.isDirtySinceSave;this.getImageDimensions=()=>{let{width:e,height:t}=this.engine.getOutputDimensions();return{width:e,height:t}};this.wait=(e=0)=>new Promise(t=>setTimeout(t,e));this.clickableCanvas=e=>de(this,null,function*(){e?(yield new Promise(t=>setTimeout(t,0)),this.canvasStore.enableCanvasClick()):this.canvasStore.disableCanvasClick()});this.onReady=()=>de(this,null,function*(){let{forceCrop:e}=this.configStore.config;if(this.activeStore.selectTool(this.configStore.defaultTool),e){let t=this.transformToolStore.localOutputImageSize,i=t.width/t.height,o=this.transformToolStore.entityManager.items.map(n=>n.ratio?n.ratio:n.dimensions.x/n.dimensions.y);o.indexOf("*")!==-1?console.error('ForceCrop will not work if "*" is one of the ratios'):o.indexOf(parseFloat(i.toFixed(2)))===-1&&this.activeStore.selectTool(w.TRANSFORM)}this.configStore.events.onEditorReady()});this.addSnapshot=(e,t,i)=>{this.historyStore.addSnapshot(e,t,i)};this.resetToolStates=()=>{this.transformToolStore.pureReset(),this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.historyStore.reset(),this.render()};this.getAssetPath=e=>this.assetProvider.getPathForCategory(e);this.render=()=>de(this,null,function*(){yield this.renderPromise()});this.applyFlipToPreview=e=>this.engineMediator.previewSpaceToFlippedPreviewSpace(e);this.getPreviewSize=()=>{let{width:e,height:t}=this.engine.getOutputDimensions();return e&&t?{width:Math.round(this.worldToPreview(this.outputToWorld(e))),height:Math.round(this.worldToPreview(this.outputToWorld(t)))}:{height:t,width:e}};this.getImageMimeType=()=>lde(this.activeStore.image);this.triggerFileDownload=(e,t,i,o)=>{let n=t===Ir.JPEG&&i!==Qr.MSBLOB?".jpeg":".png",s=e+n,a=this.blobFromExportData(o);this.triggerBlobDownload(s,a)};this.triggerBlobDownload=(e,t)=>{if(navigator.msSaveBlob)navigator.msSaveBlob(t,e);else{let i=document.createElement("a"),o=URL.createObjectURL(t);i.href=o,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),K$()||URL.revokeObjectURL(o)}};this.blobFromExportData=e=>typeof e=="string"?hB(e):e instanceof HTMLImageElement?hB(e.src):e;this.configStore=new Wo;let t=this.configStore.saveConfig(e);if(this.engineMediator=new BB(this),this.serializationMediator=new Jy(this),this.spriteStore=new Ce(this),this.scale=new Or(this),this.filterToolStore=new _r(this),this.adjustmentsToolStore=new wt(this),this.focusToolStore=new it(this),this.overlayToolStore=new Rr(this),this.frameToolStore=new ur(this),this.brushToolStore=new tr(this),this.transformToolStore=new be(this),this.libraryStore=new Vo(this),this.modalStore=new En(this),this.snappingStore=new ha(this),this.activeStore=new Go(this),this.canvasStore=new Bi(this),this.historyStore=new Sp(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(t),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){let i=this.configStore.config.engine;this.previewThumbnails=new Qy(U(T({},i),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}this.engine.pesdk.on(Bl.WEBGL_CONTEXT_LOST,()=>{this.configStore.events.onErrorWebGLContextLost()})}static get defaultColors(){return Object.keys(mo).map(e=>{let t=mo[e];return{identifier:e,color:t,colorString:Ul(t)}})}static get defaultBackgroundColors(){return Object.keys(UM).map(e=>{let t=UM[e];return{identifier:e,color:t,colorString:Ul(t)}})}static get devicePixelRatio(){return Math.max(window.devicePixelRatio||1,1)}get shortestOutputSide(){let e=this.outputContainer.getBounds();return Math.min(e.width,e.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get orderHelper(){return this.engineMediator.orderHelper}renderPromise(){return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(e,t){return dn(e)?this.engineMediator.previewSpaceToWorldSpace(e,t):this.engineMediator.previewSpaceToWorldSpace(e,t)}worldToPreview(e){return dn(e)?this.engineMediator.worldSpaceToPreviewSpace(e):this.engineMediator.worldSpaceToPreviewSpace(e)}worldSizeToPreview(e){return{width:this.engineMediator.worldSpaceToPreviewSpace(e.width),height:this.engineMediator.worldSpaceToPreviewSpace(e.height)}}previewSizeToWorld(e,t){return{width:this.engineMediator.previewSpaceToWorldSpace(e.width,t),height:this.engineMediator.previewSpaceToWorldSpace(e.height,t)}}outputToWorld(e){return dn(e)?this.engineMediator.outputSpaceToWorldSpace(e):this.engineMediator.outputSpaceToWorldSpace(e)}previewToOutput(e){return dn(e)?this.engineMediator.previewSpaceToOutputSpace(e):this.engineMediator.previewSpaceToOutputSpace(e)}get outputContainer(){return this.engineMediator.output.container}};g([I],Bt.prototype,"resize",2),g([I],Bt.prototype,"export",2),g([I],Bt.prototype,"clickableCanvas",2)});function r_(r,e){let t=r.width/r.height,i=e.width/e.height;return t>i?r.height/e.height:r.width/e.width}var vde=m(()=>{});var p$e,jl,UB=m(()=>{Ye();Y();pa();vde();p$e={transform:Ot.IDENTITY},jl=class{constructor(e){this.initialTransform=Ot.IDENTITY;this.editor=e,this.state=ge(p$e)}createPreview(e){this.container=this.editor.engine.createPreview(e)}updateTransform(e=0,t=!0){let i=this.calculateTransform(e);return i.scale.x?(t?this.saveInitialTransform(i):this.savePreviewTransform(i),this.container.setTransform(this.state.transform),!0):!1}saveInitialTransform(e){this.initialTransform=e,this.savePreviewTransform(e)}savePreviewTransform(e){Cr(()=>{this.state.transform.position=e.position,this.state.transform.scale=e.scale,this.state.transform.rotation=e.rotation;let t=Bt.devicePixelRatio,i=new L(e.scale).divide(t);this.previewTransformWithoutDpr={position:new L(e.position).divide(t),scale:i,rotation:e.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(e=0){let t=Bt.devicePixelRatio,{scaleImageToFit:i}=this.editor.configStore.config,{width:o,height:n}=this.editor.canvasStore.canvasSize,s=this.editor.engine.getOutputDimensions(),a=r_({width:o,height:n},s),l=i?a:Math.min(1,a),c=n-s.height*l,u=this.editor.configStore.measurements.mainCanvasActionBar.height*2;c<u&&(l=r_({width:o,height:n-u},s));let d=.95;s.height*l>n*d&&(l=r_({width:o,height:n*d},s)),s.width*l>o*d&&(l=r_({width:o*d,height:n},s)),l*=t;let p={x:o*t/2,y:n*t/2},h={x:l,y:l};return new Ot(p,h,e)}};g([I],jl.prototype,"updateTransform",1),g([I],jl.prototype,"savePreviewTransform",1),g([k],jl.prototype,"transform",1),g([k],jl.prototype,"position",1),g([k],jl.prototype,"scale",1),g([k],jl.prototype,"rotation",1)});var Su,Kw,NB=m(()=>{V();Su=class{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(e){if([w.STICKER,w.TEXT,w.TEXT_DESIGN,w.BRUSH,w.FRAME].indexOf(e)!==-1)throw new Error("addIndex is used for non sprites, for sprites use addSprite")}static remove(e,t){let i=t.findIndex(o=>o===e);i!==-1&&t.splice(i,1)}static indexForOrder(e,t,i){let o=e[i],n=t.findIndex(a=>a===i);if(n!==-1)return{index:n,order:t};let{length:s}=t;if(s){let a;for(a=0;a<s;a+=1){let l=t[a],c=e[l];if(o<c)return t=[...t.slice(0,a),i,...t.slice(a)],{index:a,order:t}}}return t.push(i),{index:t.length-1,order:t}}addIndex(e){Su.checkTool(e);let{index:t,order:i}=Su.indexForOrder(Su.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,e);return this.imageContainerOrder=i,t}removeIndex(e){Su.checkTool(e),Su.remove(e,this.imageContainerOrder)}addSprite(e){return this.spriteContainerOrder.push(e),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(e){Su.remove(e,this.spriteContainerOrder)}renameSprite(e,t){let i=this.spriteContainerOrder.findIndex(o=>o===e);i!==-1&&(this.spriteContainerOrder[i]=t)}bringToFront(e){let t=this.spriteContainerOrder.findIndex(i=>i===e);return t!==-1&&(this.spriteContainerOrder.splice(t,1),this.spriteContainerOrder.push(e)),this.getLastSpriteIndex()}getLastSpriteId(){let{length:e}=this.spriteContainerOrder;return this.spriteContainerOrder[e-1]}getSpriteIndex(e){return this.spriteContainerOrder.findIndex(i=>i===e)+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}},Kw=Su;Kw.IMAGE_CONTAINER_INDEX={[w.FILTER]:0,[w.ADJUSTMENT]:1,[w.FOCUS]:2,[w.OVERLAY]:3}});var BB,LB=m(()=>{zl();Y();eB();rB();UB();NB();BB=class{constructor(e){this.orderHelper=new Kw;let t=e.configStore.config.engine;this.engine=new hf(U(T({},t),{license:e.configStore.config.license,assetProvider:e.configStore.assetProvider,watermark:e.configStore.config.watermark})),this.image=new QM(e),this.output=new tB(e),this.preview=new jl(e),this.editor=e}render(e){return this.engine.render(e)}previewSpaceToWorldSpace(e,t){let i=this.preview.previewTransformWithoutDpr;if(dn(e)){let o=this.editor.engine.convertPointFromPreviewIntoWorldSpace(L.ZERO,i,t),n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:e,y:0},i,t);return L.distance(new L(o),new L(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(e,i,t)}worldSpaceToPreviewSpace(e){let t=this.preview.previewTransformWithoutDpr;if(dn(e)){let i=this.editor.engine.convertPointFromWorldIntoPreviewSpace(L.ZERO,t),o=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:e,y:0},t);return L.distance(new L(i),new L(o))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(e,t)}outputSpaceToWorldSpace(e){return dn(e)?Ee.getScalarInWorldSpace(e,this.editor.engine.getOutputContainer()):Ee.getPointInWorldSpace(e,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(e){let t=this.preview.previewTransformWithoutDpr;if(dn(e)){let i=this.editor.engine.convertPointFromPreviewIntoOutputSpace(L.ZERO,t),o=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:e,y:0},t);return L.distance(new L(i),new L(o))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(e,t)}previewSpaceToFlippedPreviewSpace(e){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(e)}}});var xde,m$e,fa,gr,Cde=m(()=>{Ye();Y();xde=[[0,0],[0,1],[1,0],[1,1]],m$e=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],fa=class{constructor(e,t,i="center",o=!0,n=!1){this.considerRotation=!0;this.considerFlip=!0;this.store=t,this.m=i==="center"?fa.movePivotTo([.5,.5]):xde,this.considerRotation=o,this.considerFlip=n,this.configStore=e.configStore}static getFlippedEdgeIndex(e,t,i){return m$e[(t?1:0)+(i?2:0)][e]}static movePivotTo(e){return xde.map(t=>[t[0]-e[0],t[1]-e[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:!1}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:!1}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(e,t,i){let o=fa.getFlippedEdgeIndex(e,t,i),n=this.m[o][0]*this.size.width,s=this.m[o][1]*this.size.height;return{width:n,height:s}}get leftTop(){let{position:e,flipHorizontally:t,flipVertically:i}=this,o=this.handleOrigin(0,t,i);return fa.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottom(){let{position:e,flipHorizontally:t,flipVertically:i}=this,o=this.handleOrigin(1,t,i);return fa.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightTop(){let{position:e,flipHorizontally:t,flipVertically:i}=this,o=this.handleOrigin(2,t,i);return fa.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottom(){let{position:e,flipHorizontally:t,flipVertically:i}=this,o=this.handleOrigin(3,t,i);return fa.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottomHandle(){let{position:e,flipHorizontally:t,flipVertically:i}=this,o=this.handleOrigin(1,t,i);return o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,fa.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottomHandle(){let{position:e,flipHorizontally:t,flipVertically:i}=this,o=this.handleOrigin(3,t,i);return o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,fa.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftMid(){let e=new L(this.leftTop),t=new L(this.leftBottom);return e.add(t).divide(2)}get rightMid(){let e=new L(this.rightTop),t=new L(this.rightBottom);return e.add(t).divide(2)}},gr=fa;gr.coordinatesWithRotation=({width:e,height:t},i,o,n,s,a)=>{let l=e*Math.cos(i)-t*Math.sin(i)+a.x,c=e*Math.sin(i)+t*Math.cos(i)+a.y;return o&&(l=s.x*2-l),n&&(c=s.y*2-c),new L({x:l,y:c}).rounded},g([k],gr.prototype,"position",1),g([k],gr.prototype,"size",1),g([k],gr.prototype,"rotation",1),g([k],gr.prototype,"flipHorizontally",1),g([k],gr.prototype,"flipVertically",1),g([k],gr.prototype,"flipCenter",1),g([k],gr.prototype,"leftTop",1),g([k],gr.prototype,"leftBottom",1),g([k],gr.prototype,"rightTop",1),g([k],gr.prototype,"rightBottom",1),g([k],gr.prototype,"leftBottomHandle",1),g([k],gr.prototype,"rightBottomHandle",1),g([k],gr.prototype,"leftMid",1),g([k],gr.prototype,"rightMid",1)});var as=m(()=>{Nw();$y();Yy();Ky();LB();NB();eB();rB();UB();gf();qw();Hw();jw();Ww();Cde()});var _f,Sde=m(()=>{_f=(r,e=0,t=3)=>{let i=Math.tan(e),o=Math.sqrt(i**2+1);return{x:r.x+t/o,y:r.y+t*i/o}}});var Xw,h$e,f$e,g$e,b$e,Ip,Yw=m(()=>{Xw={blurRadius:40,gradientSize:.2},h$e=T({start:{x:0,y:0},end:{x:0,y:0}},Xw),f$e=T({center:{x:0,y:0},radius:0},Xw),g$e=T({origin:{x:0,y:0},rotation:0,size:0},Xw),b$e=Xw,Ip={identifier:"identity",linear:h$e,radial:f$e,mirrored:g$e,gaussian:b$e}});var yi,wde=m(()=>{Ye();V();Y();Yw();yi=class{constructor(e){this.selectFocus=(e,t)=>{Cr(()=>{this.state.identifier=e,t&&(this.state[e].blurRadius=t)})};this.changeBlurRadius=(e,t)=>{e!=="identity"&&(this.state[e].blurRadius=t)};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Ip.identifier,this.state.identifier!=="identity"&&(this.state[this.state.identifier].blurRadius=Ip[this.state.identifier].blurRadius))};this.setLinear=({start:e,end:t})=>{this.state.linear.start.x=e.x,this.state.linear.start.y=e.y,this.state.linear.end.x=t.x,this.state.linear.end.y=t.y};this.setLinearStart=e=>{this.state.linear.start.x=e.x,this.state.linear.start.y=e.y};this.setLinearEnd=e=>{this.state.linear.end.x=e.x,this.state.linear.end.y=e.y};this.setRadialCenter=e=>{this.state.radial.center.x=e.x,this.state.radial.center.y=e.y};this.setRadialRadius=e=>{this.state.radial.radius=e};this.setMirroredOrigin=e=>{this.state.mirrored.origin.x=e.x,this.state.mirrored.origin.y=e.y};this.setMirroredRotation=e=>{this.state.mirrored.rotation=e};this.setMirroredSize=e=>{this.state.mirrored.size=e};this.getEffectProperties=()=>this.effect?this.effect.getProperties():null;this.setLinearFocus=e=>{this.effect=this.engineMediator.engine.addLinearBlur(e,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=e=>{this.effect=this.engineMediator.engine.addGaussianBlur(e,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=e=>{this.effect=this.engineMediator.engine.addRadialBlur(e,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=e=>{this.effect=this.engineMediator.engine.addMirroredBlur(e,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=e=>{let t=this.getEffectProperties();if(t&&e!=="identity")switch(e){case Ze.LINEAR:this.updateLinearState(t);break;case Ze.RADIAL:this.updateRadialState(t);break;case Ze.MIRRORED:this.updateMirroredState(t);break;default:break}};this.updateGaussianState=e=>{this.changeBlurRadius(Ze.GAUSSIAN,e.blurRadius)};this.updateMirroredState=e=>{let t=this.editor.worldToPreview(e.mirrorAxisOrigin),o=new L(this.editor.worldToPreview(e.mirrorAxisDirection)).subtract(t),n=Math.atan2(o.y,o.x);this.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.setMirroredRotation(n),this.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.changeBlurRadius(Ze.MIRRORED,e.blurRadius)};this.updateRadialState=e=>{this.setRadialCenter(this.editor.worldToPreview(e.center)),this.setRadialRadius(this.editor.worldToPreview(e.radius)),this.changeBlurRadius(Ze.RADIAL,e.blurRadius)};this.updateLinearState=e=>{this.setLinearStart(this.editor.worldToPreview(e.start)),this.setLinearEnd(this.editor.worldToPreview(e.end)),this.changeBlurRadius(Ze.LINEAR,e.blurRadius)};this.setEffectProperties=e=>this.effect?(this.effect.setProperties(e),this.effect.getProperties()):null;this.removeFocus=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(w.FOCUS))};this.editor=e,this.engineMediator=this.editor.engineMediator,this.state=Ip}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get order(){return this.engineMediator.orderHelper.addIndex(w.FOCUS)}get imageContainer(){return this.engineMediator.image.container}};g([ge],yi.prototype,"state",2),g([I],yi.prototype,"selectFocus",2),g([I],yi.prototype,"changeBlurRadius",2),g([I],yi.prototype,"reset",2),g([I],yi.prototype,"setLinear",2),g([I],yi.prototype,"setLinearStart",2),g([I],yi.prototype,"setLinearEnd",2),g([I],yi.prototype,"setRadialCenter",2),g([I],yi.prototype,"setRadialRadius",2),g([I],yi.prototype,"setMirroredOrigin",2),g([I],yi.prototype,"setMirroredRotation",2),g([I],yi.prototype,"setMirroredSize",2),g([I],yi.prototype,"updateFromEngineState",2)});var Dp,it,Tde=m(()=>{Ye();V();Y();as();mf();da();Sde();Yw();wde();Dp=class{constructor(e){this.selectFocus=e=>{if(e!==this.identifier){this.focusStore.removeFocus();let t=this.maxIntensity*.2,{width:i}=this.editor.engine.getOutputContainer().getBounds(),o=this.editor.shortestOutputSide*.2;switch(e){case Ze.LINEAR:let n=this.editor.outputToWorld({x:-i/2,y:0}),s=this.editor.outputToWorld({x:i/2,y:0});this.setLinearFocus({start:n,end:s,blurRadius:t});break;case Ze.RADIAL:let a=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:a,radius:o,blurRadius:t});break;case Ze.MIRRORED:let l=this.editor.outputToWorld({x:0,y:0}),c=o,u=this.editor.outputToWorld(_f({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:l,clearAreaWidth:c,blurRadius:t,mirrorAxisDirection:u});break;case Ze.GAUSSIAN:this.setGaussianFocus({blurRadius:t});break;default:break}this.focusStore.selectFocus(e,t),this.editor.render(),this.addSnapshot(ze.ADD,w.FOCUS)}};this.changeIntensity=e=>{let t=this.focusStore.setEffectProperties({blurRadius:e});t&&(this.focusStore.changeBlurRadius(this.identifier,t.blurRadius),this.editor.render())};this.changeRelativeIntensity=e=>{let t=(this.maxIntensity-Dp.minIntensity)*e/100+Dp.minIntensity,i=this.focusStore.setEffectProperties({blurRadius:t});i&&(this.focusStore.changeBlurRadius(this.identifier,i.blurRadius),this.editor.render())};this.toolSnapshot=e=>{this.addSnapshot(ze.EDIT,e)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.clickableCanvas=e=>{this.editor.clickableCanvas(e)};this.pureReset=()=>{this.focusStore.removeFocus(),this.focusStore.reset()};this.reset=()=>{this.pureReset(),this.editor.render(),this.addSnapshot(ze.DELETE,this.locale.controls.buttonReset)};this.setStart=e=>{let t=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(e)});t&&(this.focusStore.setLinearStart(this.editor.worldToPreview(t.start)),this.editor.render())};this.setEnd=e=>{let t=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(e)});t&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(t.end)),this.editor.render())};this.setCenter=e=>{let t=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(e)});t&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(t.center)),this.editor.render())};this.setRadius=e=>{let t=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(e)});t&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(t.radius)),this.editor.render())};this.setOrigin=e=>{let t=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(e),mirrorAxisDirection:this.editor.previewToWorld(_f(e,this.rotation))});t&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.editor.render())};this.setSize=e=>{let t=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(e)});t&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.editor.render())};this.setRotation=e=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(_f(this.origin,e))}),this.focusStore.setMirroredRotation(e),this.editor.render()};this.updateStateFromHistory=(e,t)=>{this.focusStore.removeFocus();let{magnitude:i}=t;Cr(()=>{switch(this.focusStore.selectFocus(e.identifier),e.identifier){case Ze.LINEAR:this.setLinearFocus({start:this.editor.previewToWorld(new L(e.linear.start).multiply(t)),end:this.editor.previewToWorld(new L(e.linear.end).multiply(t)),blurRadius:e.linear.blurRadius});break;case Ze.GAUSSIAN:this.setGaussianFocus({blurRadius:e.gaussian.blurRadius});break;case Ze.RADIAL:this.setRadialFocus({center:this.editor.previewToWorld(new L(e.radial.center).multiply(t)),radius:this.editor.previewToWorld(e.radial.radius*i),blurRadius:e.radial.blurRadius});break;case Ze.MIRRORED:{let o=new L(e.mirrored.origin).multiply(t);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(o),mirrorAxisDirection:this.editor.previewToWorld(_f(o,e.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(e.mirrored.size*i),blurRadius:e.mirrored.blurRadius});break}case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=e=>de(this,null,function*(){if(Dp.doesFocusIdentifierExist(e.identifier))this.focusStore.removeFocus(),Cr(()=>{switch(this.focusStore.selectFocus(e.identifier),e.identifier){case Ze.LINEAR:this.setLinearFocus(e.linear);break;case Ze.GAUSSIAN:this.setGaussianFocus(e.gaussian);break;case Ze.RADIAL:this.setRadialFocus(e.radial);break;case Ze.MIRRORED:this.setMirroredFocus({mirrorAxisOrigin:e.mirrored.origin,clearAreaWidth:e.mirrored.size,blurRadius:e.mirrored.blurRadius,mirrorAxisDirection:_f(e.mirrored.origin,e.mirrored.rotation)});break;default:break}});else throw new Error(`Focus identifier ${e.identifier} doesn't exist`)});this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{let e=this.editor.canvasStore.sizeVector,{linear:t}=this.focusStore.state,{radial:i}=this.focusStore.state,{mirrored:o}=this.focusStore.state,n=e,{magnitude:s}=n;return U(T({},this.focusStore.state),{linear:U(T({},t),{start:new L(t.start).divide(n),end:new L(t.end).divide(n)}),radial:U(T({},i),{center:new L(i.center).divide(n),radius:i.radius/s}),mirrored:U(T({},o),{origin:new L(o.origin).divide(n),size:o.size/s}),gaussian:T({},this.focusStore.state.gaussian)})};this.editor=e,this.focusStore=new yi(this.editor);let t=this.editor.assetProvider.getAssets("focus");this.entityManager=new yr(t,U(T({},this.config),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}static get minIntensity(){return 0}static doesFocusIdentifierExist(e){return Object.keys(Ze).map(t=>Ze[t]).findIndex(t=>t===e)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case Ze.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case Ze.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case Ze.MIRRORED:let e=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:e.blurRadius,origin:e.mirrorAxisOrigin,rotation:ke(this.state.mirrored.rotation),size:e.clearAreaWidth}};case Ze.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return Ip}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){let e=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){let e=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){let{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();return Gy({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:e,flipVertically:t})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){let{width:e,height:t}=this.editor.canvasStore.canvasSize;return Math.sqrt(e**2+t**2)*2}get identifier(){return this.state.identifier}get intensity(){return this.identifier==="identity"?Ip.gaussian.blurRadius:this.state[this.identifier].blurRadius}get relativeIntensity(){let{blurRadius:e}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(e-Dp.minIntensity)*100/(this.maxIntensity-Dp.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[w.FOCUS]}get locale(){return this.editor.configStore.locale[w.FOCUS]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:e}){this.focusStore.setGaussianFocus({blurRadius:e})}setLinearFocus({start:e,end:t,blurRadius:i}){this.focusStore.setLinearFocus({start:e,end:t,blurRadius:i})}setRadialFocus({center:e,radius:t,blurRadius:i}){this.focusStore.setRadialFocus({center:e,radius:t,blurRadius:i})}setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:i,mirrorAxisDirection:o}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:i,mirrorAxisDirection:o})}},it=Dp;g([I],it.prototype,"selectFocus",2),g([I],it.prototype,"changeIntensity",2),g([I],it.prototype,"changeRelativeIntensity",2),g([I],it.prototype,"clickableCanvas",2),g([I],it.prototype,"pureReset",2),g([I],it.prototype,"reset",2),g([I],it.prototype,"setStart",2),g([I],it.prototype,"setEnd",2),g([I],it.prototype,"setCenter",2),g([I],it.prototype,"setRadius",2),g([I],it.prototype,"setOrigin",2),g([I],it.prototype,"setSize",2),g([I],it.prototype,"setRotation",2),g([I],it.prototype,"updateStateFromHistory",2),g([I],it.prototype,"updateStateFromSerialization",2),g([I],it.prototype,"updateCanvasControls",2),g([k],it.prototype,"state",1),g([k],it.prototype,"start",1),g([k],it.prototype,"startOnPreview",1),g([k],it.prototype,"end",1),g([k],it.prototype,"endOnPreview",1),g([k],it.prototype,"center",1),g([k],it.prototype,"radius",1),g([k],it.prototype,"origin",1),g([k],it.prototype,"rotation",1),g([k],it.prototype,"rotationOnPreview",1),g([k],it.prototype,"size",1),g([k],it.prototype,"mirroredAreaWidth",1),g([k],it.prototype,"identifier",1),g([k],it.prototype,"intensity",1),g([k],it.prototype,"relativeIntensity",1),g([k],it.prototype,"maxIntensity",1),g([k],it.prototype,"isOptionSelected",1),g([k],it.prototype,"config",1),g([k],it.prototype,"locale",1),g([k],it.prototype,"items",1)});var zB=m(()=>{Tde();Yw()});var kde=m(()=>{vB();CB()});var Ede=m(()=>{wB();TB()});var Ide=m(()=>{IB();DB()});var Dde=m(()=>{fB();gB()});var Ode=m(()=>{FB();MB()});var Rde=m(()=>{RB()});var Fde=m(()=>{dB()});var vt=m(()=>{Y();Ho();Pw();kue();qM();jM();zB();mB();kde();Ede();Ide();uB();Dde();Ode();Rde();Fde();Ww();gf();pa();KM();Nw();qw();Hw();jw();bB();$y();Yy();Ky();wp();da();mf()});var i_,Ade,Pde,Mde,y$e,Bde,Lde=m(()=>{i_=v(C("react"));j();Ade=v(C("styled-components"));V();vt();Y();wr();Pde=Oe.Button.TextSecondary,Mde=Ade.default.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${r=>r.theme.canvasActionBar.foreground};
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`,y$e=({scale:r,active:e})=>{let{canZoomIn:t}=r,{canZoomOut:i}=r,{zoomLevel:o}=r;return[w.TRANSFORM,w.BRUSH,w.FOCUS,w.STICKER,w.TEXT,w.TEXT_DESIGN].indexOf(e.tool)!==-1?null:i_.default.createElement(Oe.Bar.ButtonGroup,null,i_.default.createElement(Pde,{"data-test":X.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!i,onClick:r.out},"-"),i_.default.createElement(Mde,{"data-test":X.ZoomLevel},o," %"),i_.default.createElement(Pde,{ariaLabel:"Zoom in",isDisabled:!t,onClick:r.in},"+"))},Bde=fe("scale","active")(O(y$e));Mde.defaultProps={theme:jo}});var Ko,zde,Ude,_$e,vf,Nde=m(()=>{Ko=v(C("react"));j();zde=v(C("styled-components"));V();Zt();Y();wr();Lde();Ude=(0,zde.default)(Oe.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`,_$e=({config:r,editor:e,history:t,custom:i})=>{let o=r.locale.mainCanvasActions,{canUndo:n}=t,{canRedo:s}=t,a=r.config.mainCanvasActions,l=()=>{e.export()},c=()=>{if(e.activeStore.tool===w.TRANSFORM)return null;let f=i.getButton("mainCanvasActionUndo");return Ko.default.createElement(f,{key:"mainCanvasActionUndo","data-test":X.MainBarButtonUndo,onClick:t.undo,isDisabled:!n,label:o.buttonUndo,ariaLabel:o.buttonUndo,icon:Ko.default.createElement($b.undo,null)})},u=()=>{if(e.activeStore.tool===w.TRANSFORM)return null;let f=i.getButton("mainCanvasActionRedo");return Ko.default.createElement(f,{key:"mainCanvasActionRedo","data-test":X.MainBarButtonRedo,onClick:t.redo,isDisabled:!s,label:o.buttonRedo,ariaLabel:o.buttonRedo,icon:Ko.default.createElement($b.redo,null)})},d=()=>{let f=i.getButton("mainCanvasActionExport");return Ko.default.createElement(f,{key:"mainCanvasActionExport","data-test":X.MainBarButtonExport,onClick:l,label:o.buttonExport,ariaLabel:o.buttonExport,icon:Ko.default.createElement($b.export,null)})},p=()=>{if(!r.displayCloseButton)return null;let f=i.getButton("mainCanvasActionClose");return Ko.default.createElement(f,{key:"mainCanvasActionClose","data-test":X.MainBarButtonClose,onClick:e.close,label:o.buttonClose,ariaLabel:o.buttonClose,icon:Ko.default.createElement($b.close,null)})},h=a.map(f=>{switch(f){case Ve.UNDO:return c;case Ve.REDO:return u;case Ve.EXPORT:return d;case Ve.CLOSE:return p;default:return null}});return Ko.default.createElement(Oe.Bar.Index,null,Ko.default.createElement(Ude,null,h[0]&&h[0]()||null,h[1]&&h[1]()||null),r.config.enableZoom?Ko.default.createElement(Bde,null):null,Ko.default.createElement(Ude,null,h[2]&&h[2]()||null,h[3]&&h[3]()||null))},vf=fe("config","editor","history","custom")(O(_$e))});function v$e(r){return typeof r=="string"&&r.includes("%")}function x$e(r){return typeof r=="string"&&r.includes(".")&&parseFloat(r)===1}function Ur(r,e){x$e(r)&&(r="100%");let t=v$e(r);return r=e===360?r:Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(String(r*e),10)/100),Math.abs(r-e)<1e-6?1:(e===360?r=(r<0?r%e+e:r%e)/parseFloat(String(e)):r=r%e/parseFloat(String(e)),r)}function Jw(r){return r=parseFloat(r),(Number.isNaN(r)||r<0||r>1)&&(r=1),r}function o_(r){return r<=1?`${Number(r)*100}%`:r}function wu(r){return r.length===1?`0${r}`:String(r)}var Zw=m(()=>{});function qB(r,e,t){return{r:Ur(r,255)*255,g:Ur(e,255)*255,b:Ur(t,255)*255}}function HB(r,e,t){r=Ur(r,255),e=Ur(e,255),t=Ur(t,255);let i=Math.max(r,e,t),o=Math.min(r,e,t),n=0,s=0,a=(i+o)/2;if(i===o)s=0,n=0;else{let l=i-o;switch(s=a>.5?l/(2-i-o):l/(i+o),i){case r:n=(e-t)/l+(e<t?6:0);break;case e:n=(t-r)/l+2;break;case t:n=(r-e)/l+4;break;default:break}n/=6}return{h:n,s,l:a}}function qde(r,e,t){let i,o,n;r=Ur(r,360),e=Ur(e,100),t=Ur(t,100);function s(a,l,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(l-a)*(6*c):c<1/2?l:c<2/3?a+(l-a)*(2/3-c)*6:a}if(e===0)o=t,n=t,i=t;else{let a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=s(l,a,r+1/3),o=s(l,a,r),n=s(l,a,r-1/3)}return{r:i*255,g:o*255,b:n*255}}function jB(r,e,t){r=Ur(r,255),e=Ur(e,255),t=Ur(t,255);let i=Math.max(r,e,t),o=Math.min(r,e,t),n=0,s=i,a=i-o,l=i===0?0:a/i;if(i===o)n=0;else{switch(i){case r:n=(e-t)/a+(e<t?6:0);break;case e:n=(t-r)/a+2;break;case t:n=(r-e)/a+4;break;default:break}n/=6}return{h:n,s:l,v:s}}function Hde(r,e,t){r=Ur(r,360)*6,e=Ur(e,100),t=Ur(t,100);let i=Math.floor(r),o=r-i,n=t*(1-e),s=t*(1-o*e),a=t*(1-(1-o)*e),l=i%6,c=[t,s,n,n,a,t][l],u=[a,t,t,s,n,n][l],d=[n,n,a,t,t,s][l];return{r:c*255,g:u*255,b:d*255}}function WB(r,e,t,i){let o=[wu(Math.round(r).toString(16)),wu(Math.round(e).toString(16)),wu(Math.round(t).toString(16))];return i&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function C$e(r){return Math.round(parseFloat(r)*255).toString(16)}function fo(r){return parseInt(r,16)}function GB(r){return fo(r)/255}function jde(r,e,t,i,o){let n=[wu(Math.round(r).toString(16)),wu(Math.round(e).toString(16)),wu(Math.round(t).toString(16)),wu(C$e(i))];return o&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}var VB=m(()=>{Zw()});var xf,$B=m(()=>{xf={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}});function In(r){return Boolean(us.CSS_UNIT.exec(String(r)))}function T$e(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;let e=!1;if(xf[r])r=xf[r],e=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let t=us.rgb.exec(r);return t?{r:t[1],g:t[2],b:t[3]}:(t=us.rgba.exec(r),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=us.hsl.exec(r),t?{h:t[1],s:t[2],l:t[3]}:(t=us.hsla.exec(r),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=us.hsv.exec(r),t?{h:t[1],s:t[2],v:t[3]}:(t=us.hsva.exec(r),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=us.hex8.exec(r),t?{r:fo(t[1]),g:fo(t[2]),b:fo(t[3]),a:GB(t[4]),format:e?"name":"hex8"}:(t=us.hex6.exec(r),t?{r:fo(t[1]),g:fo(t[2]),b:fo(t[3]),format:e?"name":"hex"}:(t=us.hex4.exec(r),t?{r:fo(t[1]+t[1]),g:fo(t[2]+t[2]),b:fo(t[3]+t[3]),a:GB(t[4]+t[4]),format:e?"name":"hex8"}:(t=us.hex3.exec(r),t?{r:fo(t[1]+t[1]),g:fo(t[2]+t[2]),b:fo(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Wde(r){let e={r:0,g:0,b:0},t=1,i=null,o=null,n=null,s=!1,a=!1;if(typeof r=="string"&&(r=T$e(r)),Array.isArray(r)){let[l,c,u]=r;In(l)&&In(c)&&In(u)&&(e=qB(l*255,c*255,u*255),s=!0,a="rgb"),r.length===4&&(t=r[3])}return typeof r=="object"&&(In(r.r)&&In(r.g)&&In(r.b)?(e=qB(r.r,r.g,r.b),s=!0,a=String(r.r).substr(-1)==="%"?"prgb":"rgb"):In(r.h)&&In(r.s)&&In(r.v)?(i=o_(r.s),o=o_(r.v),e=Hde(r.h,i,o),s=!0,a="hsv"):In(r.h)&&In(r.s)&&In(r.l)&&(i=o_(r.s),n=o_(r.l),e=qde(r.h,i,n),s=!0,a="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(t=r.a)),t=Jw(t),{ok:s,format:r.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var S$e,w$e,Tu,KB,XB,us,Gde=m(()=>{VB();$B();Zw();S$e="[-\\+]?\\d+%?",w$e="[-\\+]?\\d*\\.\\d+%?",Tu=`(?:${w$e})|(?:${S$e})`,KB=`[\\s|\\(]+(${Tu})[,|\\s]+(${Tu})[,|\\s]+(${Tu})\\s*\\)?`,XB=`[\\s|\\(]+(${Tu})[,|\\s]+(${Tu})[,|\\s]+(${Tu})[,|\\s]+(${Tu})\\s*\\)?`,us={CSS_UNIT:new RegExp(Tu),rgb:new RegExp(`rgb${KB}`),rgba:new RegExp(`rgba${XB}`),hsl:new RegExp(`hsl${KB}`),hsla:new RegExp(`hsla${XB}`),hsv:new RegExp(`hsv${KB}`),hsva:new RegExp(`hsva${XB}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}});var Xo,YB=m(()=>{VB();$B();Gde();Zw();Xo=class{constructor(e="",t={}){if(e instanceof Xo)return e;this.originalInput=e;let i=Wde(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=t.format||i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}getAlpha(){return this.a}setAlpha(e){return this.a=Jw(e),this.roundA=Math.round(100*this.a)/100,this}toHsv(){let e=jB(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}}toHsvString(){let e=jB(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.v*100);return this.a===1?`hsv(${t}, ${i}%, ${o}%)`:`hsva(${t}, ${i}%, ${o}%, ${this.roundA})`}toHsl(){let e=HB(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}}toHslString(){let e=HB(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.l*100);return this.a===1?`hsl(${t}, ${i}%, ${o}%)`:`hsla(${t}, ${i}%, ${o}%, ${this.roundA})`}toHex(e=!1){return WB(this.r,this.g,this.b,e)}toHexString(e=!1){return`#${this.toHex(e)}`}toHex8(e=!1){return jde(this.r,this.g,this.b,this.a,e)}toHex8String(e=!1){return`#${this.toHex8(e)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){let e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return`rgba(${e}, ${t}, ${i}, ${this.roundA})`}toPercentageRgb(){let e=t=>`${Math.round(Ur(t,255)*100)}%`;return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}}toPercentageRgbString(){let e=t=>Math.round(Ur(t,255)*100);return this.a===1?`rgb(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%)`:`rgba(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%, ${this.roundA})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;let e=`#${WB(this.r,this.g,this.b,!1)}`;for(let t of Object.keys(xf))if(xf[t]===e)return t;return!1}toString(e){let t=Boolean(e);e=e||this.format;let i=this.a<1&&this.a>=0;if(!t&&i&&e&&(e.startsWith("hex")||e==="name"))return e==="name"&&this.a===0?this.toName():this.toRgbString();switch(e){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(!0);case"hex4":return this.toHex8String(!0);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new Xo(this.toString())}}});var Op,k$e,Vde,$de=m(()=>{Op=v(C("styled-components")),k$e=Op.default.div`
  position: absolute;
  width: ${r=>r.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${r=>r.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${r=>r.direction==="bottom"?Op.css`
          bottom: 100%;
        `:Op.css`
          top: 100%;
        `}
  left: ${r=>r.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${r=>r.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${r=>r.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${r=>r.direction==="bottom"?Op.css`
            transform: translate(-50%, 50%) rotate(45deg);
          `:Op.css`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${r=>r.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`,Vde=k$e});var Qw,JB,E$e,I$e,D$e,eT,Kde=m(()=>{Qw=v(C("react")),JB=v(C("styled-components"));pe();E$e=JB.default.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`,I$e=(0,JB.default)(z.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${r=>r.theme.colorPicker.inputBorderColor};
  }
`,D$e=({value:r,label:e,onChange:t})=>Qw.default.createElement(E$e,null,Qw.default.createElement(z.Input.Label,{label:e}),Qw.default.createElement(I$e,{min:0,max:255,value:r,onChange:t})),eT=D$e});var tT,ZB,O$e,R$e,F$e,Xde,Yde=m(()=>{tT=v(C("react")),ZB=v(C("styled-components"));pe();O$e=ZB.default.div`
  text-align: left;
  width: 62px;
`,R$e=(0,ZB.default)(z.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${r=>r.theme.colorPicker.inputBorderColor};
  }
`,F$e=({value:r,label:e,onChange:t})=>tT.default.createElement(O$e,null,tT.default.createElement(z.Input.Label,{label:e}),tT.default.createElement(R$e,{value:r.toUpperCase(),onChange:t})),Xde=F$e});function P(){return(0,Jde.useContext)(nb)}var Jde,ie=m(()=>{Jde=v(C("react"));j()});var Zde,Rp,rT=m(()=>{Zde=v(C("styled-components"));vt();Rp=Zde.default.div.attrs(r=>({style:{left:r.position[0]||`${0}px`,top:r.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${r=>r.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${r=>r.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${r=>r.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;Rp.defaultProps={theme:jo}});var Yo,Qde,epe,A$e,P$e,Cf,iT=m(()=>{Yo=v(C("react")),Qde=v(D0()),epe=v(C("styled-components"));pe();ie();A$e=epe.default.div`
  position: relative;
  height: 14px;
  width: 100%;
`,P$e=r=>e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})},Cf=(0,Yo.forwardRef)(({surface:r,onChange:e,className:t,children:i},o)=>{let n=(0,Yo.useRef)(null),s=(0,Yo.useRef)(null),{config:a}=P(),[l,c]=(0,Yo.useState)(!1),u=f=>{let _=a.measurements.color.colorPicker.thumb.size/2,x=a.measurements.color.colorPicker.thumb.size,y=0,D=0;y=f.clientX,D=f.clientY;let{top:E,left:F,width:N,height:R}=n.current.getBoundingClientRect(),B=y-F-_,se=D-E-_;B=Math.max(0,Math.min(N-x,B)),se=Math.max(0,Math.min(R-x,se)),e&&e([B,se])},d=f=>{c(!0),u(f)},p=(0,Yo.useCallback)((0,Qde.default)(f=>{l&&u(f)},10),[l]),h=()=>{l&&c(!1)};return Yo.default.createElement(A$e,{ref:P$e([n,o]),className:t},Yo.default.createElement(z.DraggableCore,{nodeRef:s,onStart:d,onDrag:p,onStop:h},Yo.default.createElement("div",{ref:s},r)),i)})});var tpe,M$e,Fp,oT=m(()=>{tpe=v(C("styled-components")),M$e=tpe.css`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`,Fp=M$e});var ga,rpe,B$e,ipe,ope=m(()=>{ga=v(C("react")),rpe=v(C("styled-components"));ie();rT();iT();oT();B$e=rpe.default.div`
  ${Fp}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`,ipe=({hue:r,onChange:e})=>{let[t,i]=(0,ga.useState)(0),o=(0,ga.useRef)(null),{config:n}=P(),s=a=>{if(o.current){let[l]=a,{offsetWidth:c}=o.current,u=c-n.measurements.color.colorPicker.thumb.size,d=l*c/u,p=Math.max(0,Math.min(360,d/c*360));e(p),i(l)}};return(0,ga.useEffect)(()=>{if(o.current){let{offsetWidth:a}=o.current,l=0,c=a-n.measurements.color.colorPicker.thumb.size;l=r*a/360,i(l*c/a)}},[r]),ga.default.createElement(Cf,{surface:ga.default.createElement(B$e,null),ref:o,onChange:s},ga.default.createElement(Rp,{position:[t,0]}))}});var ds,QB,L$e,z$e,npe,spe=m(()=>{ds=v(C("react")),QB=v(C("styled-components"));ie();rT();iT();oT();L$e=QB.default.div.attrs(r=>({style:{background:`linear-gradient(to left, ${r.transparentColor} 0%, ${r.opaqueColor} 100%)`}}))`
  ${Fp}
  z-index: 1;
`,z$e=QB.default.div.attrs(r=>({style:{backgroundImage:`url(${r.url})`}}))`
  ${Fp}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`,npe=({color:r,opaqueColor:e,transparentColor:t,onChange:i})=>{let{config:o}=P(),[n,s]=(0,ds.useState)(0),a=(0,ds.useRef)(null),l=o.assetProvider.getPath("controls","/tiled-background.png"),c=u=>{if(a.current){let{offsetWidth:d}=a.current,[p]=u,h=d-o.measurements.color.colorPicker.thumb.size,f=p*d/h,_=(d-f)/d,x=Math.round((_+Number.EPSILON)*100)/100,y=Math.min(1,Math.max(0,x));i(y),s(p)}};return(0,ds.useEffect)(()=>{if(a.current){let{offsetWidth:u}=a.current,d=0,p=u-o.measurements.color.colorPicker.thumb.size;d=(1-r.toHsv().a)*u,s(d*p/u)}},[r.toString()]),ds.default.createElement(Cf,{ref:a,surface:ds.default.createElement(L$e,{opaqueColor:e,transparentColor:t}),onChange:c},ds.default.createElement(z$e,{url:l}),ds.default.createElement(Rp,{position:[n,0]}))}});var ba,e5,U$e,N$e,ape,lpe=m(()=>{ba=v(C("react")),e5=v(C("styled-components"));ie();rT();iT();oT();U$e=e5.default.div.attrs(r=>({style:{backgroundColor:`hsl(${r.hue}, 100%, 50%)`}}))`
  ${Fp}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${r=>r.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`,N$e=(0,e5.default)(Cf)`
  height: ${r=>r.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`,ape=({color:r,hue:e,onChange:t})=>{let[i,o]=(0,ba.useState)([0,0]),n=(0,ba.useRef)(null),{config:s}=P();return(0,ba.useEffect)(()=>{let{s:l,v:c}=r.toHsv();if(n.current){let{offsetWidth:u,offsetHeight:d}=n.current,p=u-s.measurements.color.colorPicker.thumb.size,h=d-s.measurements.color.colorPicker.thumb.size,f=l*u,_=(1-c)*d;o([f*p/u,_*h/d])}},[r.toString()]),ba.default.createElement(N$e,{ref:n,surface:ba.default.createElement(U$e,{hue:e}),onChange:l=>{if(n.current){let[c,u]=l,{offsetHeight:d,offsetWidth:p}=n.current,h=p-s.measurements.color.colorPicker.thumb.size,f=d-s.measurements.color.colorPicker.thumb.size,_=c*p/h,x=u*d/f,y=Math.min(1,Math.max(0,_/p)),D=Math.min(1,Math.max(0,(d-x)/d));t(y,D),o([c,u])}}},ba.default.createElement(Rp,{position:i}))}});var Ar,ya,q$e,cpe,H$e,j$e,W$e,G$e,n_,upe=m(()=>{Ar=v(C("react")),ya=v(C("styled-components"));pe();vt();YB();$de();Kde();Yde();ope();spe();lpe();q$e=ya.default.div`
  position: absolute;
  left: ${r=>r.leftOffset}px;
  top: ${r=>r.topOffset}px;
  z-index: ${r=>r.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${r=>r.show&&ya.css`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`,cpe=ya.default.div`
  &&& {
    position: absolute;
    ${r=>r.direction==="top"&&ya.css`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${r=>r.theme.colorPicker.listShadow};
    background: ${r=>r.theme.colorPicker.listBackground};
    border-radius: ${r=>r.theme.shape.radiusMedium}px;
    width: ${r=>r.theme.measurements.color.colorPicker.width}px;
    height: ${r=>r.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`,H$e=(0,ya.default)(ipe)`
  margin-top: 8px;
`,j$e=(0,ya.default)(npe)`
  margin-top: 8px;
`,W$e=ya.default.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`,G$e=ya.default.div`
  display: flex;
`,n_=class extends Ar.default.Component{constructor(e){super(e);this.node=Ar.default.createRef();this.checkId=(e,t,i)=>{let o=e,n=0;for(;o.parentElement&&n<i;)if(o=o.parentElement,n+=1,o.id===t)return!0;return!1};this.handleOutsideClick=e=>{var s;let{onRequestClose:t,onAddSnapshot:i,show:o}=this.props,{color:n}=this.state;if(o){if((s=this.node.current)==null?void 0:s.contains(e.target))return;this.setState({hexInputValue:n.toHexString()}),t&&t(),i&&i()}};this.onChange=e=>{let{onChange:t}=this.props;t({color:e.toRgbArray(),colorString:e.toRgbString()})};this.onHexValueChange=e=>{if(e.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){let t=new Xo(e);this.onChange(t),this.setState({color:t,hue:t.toHsl().h})}this.setState({hexInputValue:e})};this.onAlphaChange=e=>{let{color:t}=this.state,i=t.setAlpha(e);this.onChange(i),this.setState({color:i,hexInputValue:i.toHexString()})};this.onHueChange=e=>{let{color:t}=this.state,{s:i,v:o,a:n}=t.toHsv(),s=new Xo({h:e,s:i,v:o,a:n});this.onChange(s),this.setState({color:s,hexInputValue:s.toHexString(),hue:e})};this.onSaturationBrightnessChange=(e,t)=>{let{color:i,hue:o}=this.state,{a:n}=i.toHsv(),s=new Xo({h:o,s:e,v:t,a:n});this.onChange(s),this.setState({color:s,hexInputValue:s.toHexString()})};this.onInputChange=e=>t=>{let{color:i}=this.state;if(t.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!t.trim()){let o=i.toRgb();o[e]=parseInt(t,10)||0;let n=new Xo(o);this.onChange(n),this.setState({color:n,hexInputValue:n.toHexString(),hue:n.toHsl().h})}};let{color:t}=this.props,i=new Xo(t);this.state={color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1),document.addEventListener("keydown",this.handleOutsideClick,!1)}componentDidUpdate(e){let{color:t,show:i}=this.props;if(i&&!e.show){let o=new Xo(t);this.setState({color:o,hue:o.toHsl().h,hexInputValue:o.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1),document.removeEventListener("keydown",this.handleOutsideClick,!1)}render(){let{show:e,showArrow:t,direction:i,arrowOffset:o,topOffset:n,leftOffset:s,labelHex:a,labelR:l,labelG:c,labelB:u,labelSliderHue:d,labelSliderOpacity:p}=this.props,{color:h,hexInputValue:f,hue:_}=this.state,{r:x,g:y,b:D}=h.toRgb(),E=h.clone().setAlpha(1).toRgbString(),F=h.clone().setAlpha(0).toRgbString();return Ar.default.createElement("div",{ref:this.node},Ar.default.createElement(q$e,{show:e,direction:i,leftOffset:s,topOffset:n},Ar.default.createElement(cpe,{direction:i},t&&Ar.default.createElement(Vde,{direction:i,arrowOffset:o}),Ar.default.createElement(ape,{color:h,hue:_,onChange:this.onSaturationBrightnessChange}),Ar.default.createElement(z.Spacer,{count:2}),Ar.default.createElement(z.Input.Label,{label:d}),Ar.default.createElement(H$e,{hue:_,onChange:this.onHueChange}),Ar.default.createElement(z.Spacer,{count:2}),Ar.default.createElement(z.Input.Label,{label:p}),Ar.default.createElement(j$e,{color:h,opaqueColor:E,transparentColor:F,onChange:this.onAlphaChange}),Ar.default.createElement(W$e,null,Ar.default.createElement(Xde,{value:f,label:a,onChange:this.onHexValueChange}),Ar.default.createElement(G$e,null,Ar.default.createElement(eT,{value:x,label:l,onChange:this.onInputChange("r")}),Ar.default.createElement(eT,{value:y,label:c,onChange:this.onInputChange("g")}),Ar.default.createElement(eT,{value:D,label:u,onChange:this.onInputChange("b")}))))))}};n_.defaultProps={direction:"bottom",showArrow:!0};cpe.defaultProps={theme:jo}});var dpe=m(()=>{YB();upe()});var Sf,ppe,V$e,t5,mpe,hpe=m(()=>{Sf=v(C("react"));Ye();j();ppe=v(C("styled-components"));dpe();vt();Y();V$e=ppe.default.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`,t5=class extends Sf.default.Component{constructor(e){super(e);this.containerRef=null;this.onClick=e=>t=>{let{onAddSnapshot:i,config:o,onChange:n,colorPickerDirection:s,rect:a}=this.props,{activeIdentifier:l,showColorPicker:c,colorList:u}=this.state,d=u.find(p=>p.identifier===e);if(l===d.identifier&&!c){let{left:p,width:h,top:f,height:_}=t.currentTarget.getBoundingClientRect(),{left:x,top:y}=this.containerRef.current.getBoundingClientRect(),{colorPicker:D}=o.measurements.color,E=D.arrow.width/2,F=p-x+h/2-2,N=s==="bottom"?f-y+_+E:f-y-E,R=-24,B=D.width-D.arrow.width-12;F>B&&(R+=F-B,F-=R);let se=!0;if(s==="bottom"&&a){let A=a.height,q=a.top,ue=f-q,_e=A-(ue+_),ye=o.measurements.color.colorPicker.height+E;_e<ye&&(N=_e-ye),ue+N<ue+_/2&&(N+=E,se=!1)}this.setState({showColorPicker:!0,showColorPickerArrow:se,arrowOffset:F,topOffset:N,leftOffset:R})}else c?this.setState({showColorPicker:!1}):(n(d.color),this.setState({activeIdentifier:e}),i&&i())};this.onChange=({color:e,colorString:t})=>{let{onChange:i}=this.props,{activeIdentifier:o,colorList:n}=this.state,s=n.findIndex(a=>a.identifier===o);if(s!==-1){let a=[...n];a[s]={identifier:n[s].identifier,colorString:t,color:e},this.setState({colorList:a})}i(e)};this.onChangeColorPicker=({color:e,colorString:t})=>{this.onChange({color:[e[0]/255,e[1]/255,e[2]/255,e[3]],colorString:t})};this.closeColorPicker=()=>{this.setState({showColorPicker:!1})};this.getColorPicker=()=>{let{activeColor:e,labelsColor:t,colorPickerDirection:i,onAddSnapshot:o}=this.props,{showColorPicker:n,showColorPickerArrow:s,arrowOffset:a,leftOffset:l,topOffset:c}=this.state;return Sf.default.createElement(n_,{color:ke(e),show:n,showArrow:s,direction:i,arrowOffset:a,leftOffset:l,topOffset:c,labelHex:t.hex,labelR:t.r,labelG:t.g,labelB:t.b,labelSliderOpacity:t.sliderOpacity,labelSliderHue:t.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:o})};let{colors:t}=this.props;this.containerRef=Sf.default.createRef(),this.state={activeIdentifier:"",activeSprite:"",colorList:[...t],showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:e,activeColor:t},{activeSprite:i,colorList:o}){if(e!==i||!e){let n=Ul(ke(t)),s=o.find(({colorString:a})=>a===n);return{activeSprite:e,activeIdentifier:s?s.identifier:""}}return null}render(){let{tool:e,isDisabled:t,custom:i,config:o}=this.props,{activeIdentifier:n,colorList:s}=this.state,a=i.getColorItem(),l=o.assetProvider.getPath("controls","/tiled-background.png"),c=s.map(u=>Sf.default.createElement(a,{tool:e,key:`${u.colorString}-item-${u.identifier}`,isActive:u.identifier===n,isDisabled:t,onClick:this.onClick(u.identifier),color:u.colorString,label:u.identifier,tiledBackgroundUrl:l}));return Sf.default.createElement(V$e,{"data-test":X.ColorList,ref:this.containerRef},c,this.getColorPicker())}};t5.defaultProps={colorPickerDirection:"bottom",isDisabled:!1};mpe=fe("config","custom")(O(t5))});var r5,rr,fpe=m(()=>{r5=v(C("react"));TO();hpe();rr=r=>r5.default.createElement(O0.Consumer,null,({rect:e})=>r5.default.createElement(mpe,U(T({},r),{rect:e})))});var s_,i5,$$e,K$e,gpe,bpe,ype=m(()=>{s_=v(C("react"));j();i5=v(C("styled-components"));vt();Y();wr();$$e=(0,i5.default)(Oe.Controls.Container)`
  cursor: none;
`,K$e=i5.default.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${r=>r.theme.foreground};
`,gpe=class extends s_.default.Component{constructor(e){super(e);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=U(T({},this.INITIAL_POSITION),{isDrawing:!1});this.containerElementRef=null;this.getCursorCoordinates=e=>{let t=0,i=0;if(e.type.indexOf("touch")!==-1){let a=e;if(!a.touches.length)return U(T({},this.INITIAL_POSITION),{height:0,width:0});t=a.touches[0].clientX,i=a.touches[0].clientY}else{let a=e;t=a.clientX,i=a.clientY}let o=this.containerElementRef.current.getBoundingClientRect(),n=t-o.left,s=i-o.top;return{x:n,y:s,height:o.height,width:o.width}};this.draw=e=>{e.preventDefault(),e.stopPropagation(),this.touchDraw(e)};this.touchDraw=e=>{let{x:t,y:i}=this.getCursorCoordinates(e);t!==void 0&&i!==void 0&&(this.setState({x:t,y:i}),this.state.isDrawing&&this.brushTool.strokePosition({x:t,y:i}))};this.touchStart=()=>{this.brushTool.clickableCanvas(!1),this.setState({isDrawing:!0}),this.brushTool.beginStroke()};this.start=e=>{e.button===0?this.touchStart():this.stop(e)};this.stop=e=>{this.state.isDrawing&&(e.preventDefault(),e.stopPropagation(),this.setState({isDrawing:!1}),this.brushTool.endStroke(),this.brushTool.clickableCanvas(!0))};this.setInitialPosition=()=>{this.setState(T({},this.INITIAL_POSITION))};this.mouseOut=e=>{let{config:t}=this.props;e.preventDefault(),e.stopPropagation();let i=this.brushTool.sizeOnScreenSpace/2,{x:o,y:n,height:s,width:a}=this.getCursorCoordinates(e);o&&n&&(o<0||n<0||o>a-i||n>s-i||n<t.measurements.mainCanvasActionBar.height)&&this.setInitialPosition()};this.touchEnd=e=>{e.preventDefault(),e.stopPropagation();let{x:t,y:i}=this.state;t&&i&&this.setInitialPosition()};this.getCursor=()=>{let{x:e,y:t}=this.state;if(e&&t){let i=Ul(this.brushTool.color),o=`${this.brushTool.sizeOnScreenSpace}px`,n={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:i,height:o,width:o};return s_.default.createElement(K$e,{style:n,"data-test":X.Cursor})}return null};this.containerElementRef=s_.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get brushTool(){return this.props.brushTool}render(){return s_.default.createElement($$e,{ref:this.containerElementRef,"data-test":X.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}},bpe=fe("brushTool","config")(O(gpe))});var Dn,nT=m(()=>{Dn=(r,e)=>r!==void 0&&e!==void 0&&!Number.isNaN(r)&&!Number.isNaN(e)});var On,_pe,o5,X$e,vpe,xpe,Cpe=m(()=>{On=v(C("react"));j();_pe=v(C("styled-components"));pe();vt();wr();nT();o5=(0,_pe.default)(Oe.Controls.Knob)`
  margin-top: -${r=>r.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${r=>r.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`,{Container:X$e}=Oe.Controls,vpe=class extends On.default.Component{constructor(e){super(e);this.start=(e,{x:t,y:i})=>{Dn(t,i)&&this.focusTool.setStart({x:t,y:i})};this.end=(e,{x:t,y:i})=>{Dn(t,i)&&this.focusTool.setEnd({x:t,y:i})};this.onKnob1DragStart=(e,t)=>{this.focusTool.clickableCanvas(!1),this.start(e,t)};this.onKnob1DragStop=(e,t)=>{this.addSnapshot(t,this.historyLocale.focusPosition),this.start(e,t),this.focusTool.clickableCanvas(!0)};this.onKnob2DragStart=(e,t)=>{this.focusTool.clickableCanvas(!1),this.end(e,t)};this.onKnob2DragStop=(e,t)=>{this.addSnapshot(t,this.historyLocale.focusPosition),this.end(e,t),this.focusTool.clickableCanvas(!0)};this.addSnapshot=({x:e,y:t},i)=>{Dn(e,t)&&this.focusTool.toolSnapshot(i)};this.getLine=()=>{let{height:e,width:t}=this.props.canvas.canvasSize,i=this.focusTool.startOnPreview,o=this.focusTool.endOnPreview;return On.default.createElement("svg",{focusable:"false",height:e,width:t},On.default.createElement("line",{x1:i.x,y1:i.y,x2:o.x,y2:o.y,strokeWidth:"2",stroke:"currentColor"}))};this.startRef=On.default.createRef(),this.endRef=On.default.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return On.default.createElement(X$e,null,On.default.createElement(Oe.Controls.Line,null,this.getLine()),On.default.createElement(z.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},On.default.createElement(o5,{ref:this.startRef})),On.default.createElement(z.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},On.default.createElement(o5,{ref:this.endRef})))}};o5.defaultProps={theme:jo};xpe=fe("canvas","focusTool")(O(vpe))});var Wl,a_,Spe=m(()=>{Wl=v(C("react"));j();pe();vt();Y();wr();nT();a_=class extends Wl.default.Component{constructor(e){super(e);this.getKnobPosition=()=>{let{focusTool:e}=this.props,{origin:t,size:i}=e,o=i/2,n=Math.PI/2+e.rotation;return{x:t.x+o*Math.cos(n),y:t.y+o*Math.sin(n)}};this.onArea=(e,{x:t,y:i})=>{let{editor:o}=this.props,n=o.configStore.measurements.canvasControls.knob.size;if(Dn(t,i)){let{canvas:s,focusTool:a}=this.props,{size:l,mirroredAreaWidth:c}=a,u=t+c/2,d=i+l/2,p=new L(this.getKnobPosition()),f=new L({x:t,y:i}).subtract(new L(this.areaPosition)),_=p.add(f);_.x>n&&_.x<s.canvasSize.width-n&&_.y>n&&_.y<s.canvasSize.height-n&&a.setOrigin({x:u,y:d})}};this.onKnob=(e,{x:t,y:i})=>{let{focusTool:o}=this.props;if(Dn(t,i)){o.clickableCanvas(!1);let n=new L(o.origin),s=new L(t,i),a=n.subtract(s),l=a.magnitude,c=Math.PI/2+Math.atan2(a.y,a.x);o.setSize(l*2),o.setRotation(c)}};this.onAreaDragStop=(e,t)=>{let{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusPosition),this.onArea(e,t),i.clickableCanvas(!0)};this.onKnobDragStop=(e,t)=>{let{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusSize),this.onKnob(e,t),i.clickableCanvas(!0)};this.addSnapshot=({x:e,y:t},i)=>{let{focusTool:o}=this.props;Dn(e,t)&&o.toolSnapshot(i)};this.knobRef=Wl.default.createRef(),this.areaRef=Wl.default.createRef()}get areaPosition(){let{focusTool:e}=this.props,{origin:t,size:i,mirroredAreaWidth:o}=e;return{x:t.x-o/2,y:t.y-i/2}}render(){let{x:e,y:t}=this.areaPosition,{focusTool:i}=this.props;return Wl.default.createElement(Oe.Controls.Container,null,Wl.default.createElement(z.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},Wl.default.createElement(Oe.Controls.Knob,{ref:this.knobRef})),Wl.default.createElement(z.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:e,y:t},rotation:i.rotation},Wl.default.createElement(Oe.Controls.Area,{ref:this.areaRef,"data-test":X.Focus,height:i.size,width:i.mirroredAreaWidth})))}};a_=g([fe("focusTool","canvas","editor"),O],a_)});var Gl,l_,wpe=m(()=>{Gl=v(C("react"));j();pe();vt();Y();wr();nT();l_=class extends Gl.default.Component{constructor(e){super(e);this.state={knobAngle:2.35};this.onCircle=(e,{x:t,y:i})=>{if(Dn(t,i)){let{focusTool:o}=this.props;o.setCenter({x:t+o.radius,y:i+o.radius})}};this.onKnob=(e,{x:t,y:i})=>{if(Dn(t,i)){let{focusTool:o}=this.props,n=new L(t,i),a=new L(o.center.x,o.center.y).subtract(n),l=a.magnitude,c=-Math.atan2(a.y,a.x);this.setState({knobAngle:c}),o.setRadius(l)}};this.onCircleDragStart=(e,t)=>{let{focusTool:i}=this.props;i.clickableCanvas(!1),this.onCircle(e,t)};this.onCircleDragStop=(e,t)=>{let{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusPosition),this.onCircle(e,t),i.clickableCanvas(!0)};this.onKnobDragStart=(e,t)=>{let{focusTool:i}=this.props;i.clickableCanvas(!1),this.onKnob(e,t)};this.onKnobDragStop=(e,t)=>{let{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusSize),this.onKnob(e,t),i.clickableCanvas(!0)};this.addSnapshot=({x:e,y:t},i)=>{let{focusTool:o}=this.props;Dn(e,t)&&o.toolSnapshot(i)};this.knobRef=Gl.default.createRef(),this.circleRef=Gl.default.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){let{focusTool:e}=this.props,{knobAngle:t}=this.state,{center:i,radius:o}=e,n={x:i.x-o,y:i.y-o},s=Math.PI-t,a={x:i.x+o*Math.cos(s),y:i.y+o*Math.sin(s)};return Gl.default.createElement(Oe.Controls.Container,null,Gl.default.createElement(z.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:a},Gl.default.createElement(Oe.Controls.Knob,{ref:this.knobRef})),Gl.default.createElement(z.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},Gl.default.createElement(Oe.Controls.Circle,{ref:this.circleRef,"data-test":X.Focus,radius:o})))}};l_=g([fe("focusTool","canvas"),O],l_)});var Tpe,kpe,Epe=m(()=>{Tpe=v(C("react"));j();V();ie();Cpe();Spe();wpe();kpe=O(()=>{let{focusTool:r}=P(),{state:e}=r,i=(()=>{switch(e.identifier){case Ze.LINEAR:return xpe;case Ze.RADIAL:return l_;case Ze.MIRRORED:return a_;default:return null}})();return r.isOptionSelected&&i?Tpe.default.createElement(i,null):null})});var Ipe,Dpe,Ope=m(()=>{Ipe=v(C("react"));ie();Dpe=({customButtonKey:r,onClick:e,label:t,icon:i,disabled:o})=>{let{custom:n}=P(),s=n.getButton(r);return Ipe.default.createElement(s,{onClick:e,label:t,ariaLabel:t,icon:i,isDisabled:o})}});var Rpe=m(()=>{Ope()});var n5,wf,Fpe=m(()=>{n5=v(C("react"));Y();wr();Rpe();wf=({availableKeys:r,actions:e})=>n5.default.createElement(Oe.Bar.ButtonGroup,{onClick:GX},r.map(t=>{let i=e[t];return i?n5.default.createElement(Dpe,T({key:t},i)):null}))});var sT=m(()=>{Fpe()});var Tf,Y$e,Ape,Ppe=m(()=>{Tf=v(C("react"));j();V();Zt();sT();Y$e=({sprite:r,stickerTool:e})=>{let t=e.locale.canvasActions,i={[Ve.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:t.buttonBringToFront,icon:Tf.default.createElement(ft.bringToFront,null),disabled:r.isOnTop},[Ve.FLIP]:{customButtonKey:"canvasActionFlip",onClick:e.flipHorizontally,label:t.buttonFlipHorizontal,icon:Tf.default.createElement(ft.flipHorizontal,null)},[Ve.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:()=>e.duplicate(),label:t.buttonDuplicate,icon:Tf.default.createElement(ft.duplicate,null)},[Ve.DELETE]:{customButtonKey:"canvasActionDelete",onClick:e.delete,label:t.buttonDelete,icon:Tf.default.createElement(ft.delete,null)}};return e.isStickerSelected?Tf.default.createElement(wf,{availableKeys:e.config.canvasActions,actions:i}):null},Ape=fe("sprite","stickerTool")(O(Y$e))});var kf,J$e,Mpe,Bpe=m(()=>{kf=v(C("react"));j();V();Zt();sT();J$e=({textTool:r,sprite:e})=>{let t=r.locale.canvasActions,i={[Ve.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>r.setEditMode(!0),label:t.buttonEdit,icon:kf.default.createElement(ft.edit,null)},[Ve.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:r.bringToFront,label:t.buttonBringToFront,icon:kf.default.createElement(ft.bringToFront,null),disabled:e.isOnTop},[Ve.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:r.duplicate,label:t.buttonDuplicate,icon:kf.default.createElement(ft.duplicate,null)},[Ve.DELETE]:{customButtonKey:"canvasActionDelete",onClick:r.delete,label:t.buttonDelete,icon:kf.default.createElement(ft.delete,null)}};return e.isSpriteText?kf.default.createElement(wf,{availableKeys:r.config.canvasActions,actions:i}):null},Mpe=fe("textTool","sprite")(O(J$e))});var Ap,Z$e,Lpe,zpe=m(()=>{Ap=v(C("react"));j();V();Zt();sT();Z$e=({sprite:r,textDesignTool:e})=>{let t=e.locale.canvasActions,i={[Ve.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>e.setEditMode(!0),label:t.buttonEdit,icon:Ap.default.createElement(ft.edit,null)},[Ve.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:t.buttonBringToFront,icon:Ap.default.createElement(ft.bringToFront,null),disabled:r.isOnTop},[Ve.INVERT]:{customButtonKey:"canvasActionInvert",onClick:e.invertBackground,label:t.buttonInvert,icon:Ap.default.createElement(ft.flipHorizontal,null)},[Ve.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:e.duplicate,label:t.buttonDuplicate,icon:Ap.default.createElement(ft.duplicate,null)},[Ve.DELETE]:{customButtonKey:"canvasActionDelete",onClick:()=>e.delete(),label:t.buttonDelete,icon:Ap.default.createElement(ft.delete,null)}};return e.isTextDesignSelected?Ap.default.createElement(wf,{availableKeys:e.config.canvasActions,actions:i}):null},Lpe=fe("sprite","textDesignTool")(O(Z$e))});var Pp,c_,Upe=m(()=>{Pp=v(C("react"));j();V();Y();wr();Ppe();Bpe();zpe();c_=class extends Pp.default.Component{constructor(e){super(e);this.actionsRef=null;this.spriteControlPosition=()=>{let{config:e,sprite:t,canvas:{canvasSize:i}}=this.props,{controlPadding:o,controlOffset:n}=e.measurements.canvasControls.sprite,{x:s,y:a}=t.position,{height:l,width:c}=t.currentSprite.size,u=t.rotationWRTOutputRotation,d=this.actionsRef.current,p=new L(0,0);if(d){let _=d.getBoundingClientRect();p=new L(_.width/2+n,_.height+n)}let h=Math.abs(c*Math.sin(u))+Math.abs(l*Math.cos(u)),f=new L(s,a-h/2-o-n).clamp(p,new L(i.width,i.height).subtract(p));return{left:f.x,top:f.y}};this.getSpriteControls=()=>{let{sprite:e}=this.props;switch(e.tool){case w.TEXT:return Pp.default.createElement(Mpe,null);case w.TEXT_DESIGN:return Pp.default.createElement(Lpe,null);case w.STICKER:return Pp.default.createElement(Ape,null);default:return null}};this.actionsRef=Pp.default.createRef(),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0})}render(){let{sprite:e}=this.props,{isMounted:t}=this.state,i=!e.isDragMode&&!e.isEditMode,o=this.spriteControlPosition();return Pp.default.createElement(Oe.Controls.SpriteActionsWrapper,{"data-test":X.SpriteActions,ref:this.actionsRef,show:i&&t,style:T({},o)},this.getSpriteControls())}};c_=g([fe("sprite","config","editor","canvas"),O],c_)});var _i,aT,lT,s5,a5,Npe,qpe=m(()=>{_i=v(C("react"));j();pe();vt();ie();Y();wr();({Corner:aT}=Oe.Controls),{Draggable:lT}=z,s5=new L(0,0),a5=new L(0,0),Npe=O(()=>{let r=(0,_i.useRef)(null),e=(0,_i.useRef)(null),t=(0,_i.useRef)(null),i=(0,_i.useRef)(null),{config:o,sprite:n}=P(),{leftTopPosition:s,leftBottomPosition:a,rightTopPosition:l,rightBottomPosition:c}=n,{borderWidth:u}=o.measurements.canvasControls.corner,d=({clientX:_,clientY:x})=>{_!==void 0&&x!==void 0&&n.onCornerDrag(a5.subtract(s5.subtract(new L(_,x))))},p=_=>{switch(_){case"leftTop":return s;case"leftBottom":return a;case"rightTop":return l;case"rightBottom":return c;default:return s}},h=(_,x)=>{let{clientX:y,clientY:D}=_;s5=new L(y,D),a5=new L(p(x)),n.clickableCanvas(!1),n.setDragMode(!0)},f=()=>{n.clickableCanvas(!0),n.setDragMode(!1),n.spriteSnapshot("size"),s5=new L(0,0),a5=new L(0,0)};return _i.default.createElement(_i.default.Fragment,null,_i.default.createElement(lT,{nodeRef:r,onStop:f,onDrag:d,onStart:_=>h(_,"leftTop")},_i.default.createElement(aT,{ref:r,"data-test":X.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:u})),_i.default.createElement(lT,{nodeRef:t,onStop:f,onDrag:d,onStart:_=>h(_,"leftBottom")},_i.default.createElement(aT,{ref:t,"data-test":X.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:u})),_i.default.createElement(lT,{nodeRef:e,onStop:f,onDrag:d,onStart:_=>h(_,"rightTop")},_i.default.createElement(aT,{ref:e,"data-test":X.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:u})),_i.default.createElement(lT,{nodeRef:i,onStop:f,onDrag:d,onStart:_=>h(_,"rightBottom")},_i.default.createElement(aT,{ref:i,"data-test":X.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:u})))})});var _a,l5,Q$e,eKe,c5,u5,tKe,Hpe,jpe=m(()=>{_a=v(C("react"));j();l5=v(C("styled-components"));pe();vt();Q$e=l5.default.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,eKe=l5.default.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,c5=new L(0,0),u5=new L(0,0),tKe=({sprite:r,config:e})=>{let t=(0,_a.useRef)(null),i=(0,_a.useRef)(null),o=r.leftMidPosition,n=r.rightMidPosition,s=e.assetProvider.getPath("controls","/arrow-left.png"),a=e.assetProvider.getPath("controls","/arrow-right.png"),l=(d,p)=>{r.setDragMode(!0),r.clickableCanvas(!1);let{clientX:h,clientY:f}=d;c5=new L(h,f),u5=new L(p==="left"?o:n)},c=()=>{r.clickableCanvas(!0),r.setDragMode(!1),r.addSnapshot(ze.EDIT,r.textDesignLocale.padding),c5=new L(0,0),u5=new L(0,0)},u=({clientX:d,clientY:p})=>{if(d!==void 0&&p!==void 0){let h=u5.subtract(c5.subtract(new L(d,p)));r.onPaddingDrag(h)}};return _a.default.createElement(_a.default.Fragment,null,_a.default.createElement(z.Draggable,{nodeRef:t,onStart:d=>l(d,"left"),onDrag:u,onStop:c},_a.default.createElement(Q$e,{ref:t,src:s})),_a.default.createElement(z.Draggable,{nodeRef:i,onStart:d=>l(d,"right"),onDrag:u,onStop:c},_a.default.createElement(eKe,{ref:i,src:a})))},Hpe=fe("sprite","config")(O(tKe))});var u_,Wpe,Gpe,d5,p5,rKe,Vpe,$pe=m(()=>{u_=v(C("react"));j();Wpe=v(C("styled-components"));pe();vt();Y();wr();Gpe=(0,Wpe.default)(Oe.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${r=>r.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${r=>r.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`,d5=new L(0,0),p5=new L(0,0),rKe=({config:r,sprite:e,snapping:t})=>{let i=(0,u_.useRef)(null),o=e.rightBottomHandlePosition,n=e.leftBottomHandlePosition,s={x:(o.x+n.x)/2,y:(o.y+n.y)/2},a=({clientX:p,clientY:h})=>{d5=new L(p,h),p5=new L(s),e.setDragMode(!0),e.clickableCanvas(!1)},l=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.spriteSnapshot("rotation"),t.hideRotationGuides(),d5=new L(0,0),p5=new L(0,0)},c=({clientX:p,clientY:h})=>{if(p!==void 0&&h!==void 0){let f=p5.subtract(d5.subtract(new L(p,h))),_=e.position,x=new L(_.x,_.y),y=f.subtract(x),D=Math.atan2(y.y,y.x)-Math.PI/2,E=t.snapToRotation(D,y,e.currentRect);e.setRotation(E)}},u=p=>{c(p)},d=r.assetProvider.getPath("controls",`/${V$()?"rotate-windows":"rotate-osx"}.png`);return u_.default.createElement(z.Draggable,{nodeRef:i,onStart:a,onDrag:u,onStop:l},u_.default.createElement(Gpe,{ref:i,url:d}))};Gpe.defaultProps={theme:jo};Vpe=fe("sprite","snapping","config")(O(rKe))});var va,cT,Kpe,Xpe,Ype,m5,h5,iKe,Jpe,Zpe=m(()=>{va=v(C("react"));j();cT=v(C("styled-components"));pe();vt();wr();Kpe=(0,cT.default)(Oe.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`,Xpe=(0,cT.default)(Kpe)`
  left: -3px;
  top: calc(
    50% - ${r=>r.theme.measurements.canvasControls.width.size/2}px
  );
`,Ype=(0,cT.default)(Kpe)`
  right: -3px;
  top: calc(
    50% - ${r=>r.theme.measurements.canvasControls.width.size/2}px
  );
`,m5=new L(0,0),h5=new L(0,0),iKe=({sprite:r,textTool:e})=>{let t=(0,va.useRef)(null),i=(0,va.useRef)(null),o=r.leftMidPadPosition,n=r.rightMidPadPosition,s=(c,u)=>{r.setDragMode(!0),r.clickableCanvas(!1);let{clientX:d,clientY:p}=c;m5=new L(d,p),h5=new L(u==="left"?o:n)},a=()=>{r.clickableCanvas(!0),r.setDragMode(!1),r.addSnapshot(ze.EDIT,r.textLocale.width),e.updateDefaultFontSize(),m5=new L(0,0),h5=new L(0,0)},l=({clientX:c,clientY:u})=>{if(c!==void 0&&u!==void 0){let d=h5.subtract(m5.subtract(new L(c,u)));r.onWidthDrag(d)}};return va.default.createElement(va.default.Fragment,null,va.default.createElement(z.Draggable,{nodeRef:t,onStart:c=>s(c,"left"),onDrag:l,onStop:a},va.default.createElement(Xpe,{ref:t})),va.default.createElement(z.Draggable,{nodeRef:i,onStart:c=>s(c,"right"),onDrag:l,onStop:a},va.default.createElement(Ype,{ref:i})))};Xpe.defaultProps={theme:jo};Ype.defaultProps={theme:jo};Jpe=fe("sprite","textTool")(O(iKe))});var Rn,oKe,uT,f5,Qpe,eme=m(()=>{Rn=v(C("react"));j();pe();vt();ie();Y();wr();Upe();qpe();jpe();$pe();Zpe();({Draggable:oKe}=z),uT=new L(0,0),f5=new L(0,0),Qpe=O(()=>{let r=(0,Rn.useRef)(),{active:e,config:t,snapping:i,sprite:o}=P(),n=({clientX:y,clientY:D})=>{let E=f5.subtract(uT.subtract(new L(y,D))),{x:F,y:N}=i.snapToPosition({x:E.x,y:E.y},o.currentRect);o.setPosition({x:F,y:N})},s=y=>{let{clientX:D,clientY:E}=y;uT=new L(D,E),f5=new L(o.position),o.setDragMode(!0),i.updateGuides()},a=y=>{let{clientX:D,clientY:E}=y,{x:F,y:N}=uT;uT=new L(0,0),f5=new L(0,0),o.setDragMode(!1),F!==D&&N!==E&&o.spriteSnapshot("position"),i.hidePositionGuides()},l=y=>{y.preventDefault(),y.stopPropagation(),o.setEditMode(!0)};if(!(()=>{let y=e.tool,D=o.tool;return o.isSpriteSelected&&y===D})())return null;let{isSpriteText:u}=o,d=o.isSpriteTextDesign&&o.textDesignToolStore.isInverted,{height:p,width:h}=o.size,f=o.spritePosition,_=o.rotationWRTOutputRotation,{controlPadding:x}=t.measurements.canvasControls.sprite;return Rn.default.createElement(Oe.Controls.Container,null,Rn.default.createElement(oKe,{nodeRef:r,onStart:s,onDrag:n,onStop:a,rotation:_,position:f},Rn.default.createElement(Oe.Controls.Sprite,{ref:r,"data-test":X.Sprite,onDoubleClick:l,height:p,width:h},u&&Rn.default.createElement(Jpe,null)||null,d&&Rn.default.createElement(Hpe,null)||null,Rn.default.createElement(Npe,null),Rn.default.createElement(Oe.Controls.RotateHandle,{x:h/2+x/2},Rn.default.createElement(Vpe,null)))),Rn.default.createElement(c_,null))})});var vr,Vl,dT,nKe,d_,ku,sKe,aKe,lKe,cKe,uKe,tme,rme=m(()=>{vr=v(C("react"));j();Vl=v(C("styled-components"));pe();Y();as();wr();tF();({GridLine:dT}=Oe.Crop),nKe=Oe.Crop.Mask,{Draggable:d_}=z,ku=3,sKe=(0,Vl.default)(_d)`
  left: ${ku}px;
  top: ${ku}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`,aKe=(0,Vl.default)(_d)(r=>{let{desktop:e}=r.theme.measurements.canvasControls.corner.touchable,t=e/4-r.borderWidth;return Vl.css`
    left: ${t-e}px;
    top: ${ku}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `}),lKe=(0,Vl.default)(_d)(r=>{let{desktop:e}=r.theme.measurements.canvasControls.corner.touchable,t=e/4-r.borderWidth;return Vl.css`
    left: ${t-e}px;
    top: ${t-e}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `}),cKe=(0,Vl.default)(_d)(r=>{let{desktop:e}=r.theme.measurements.canvasControls.corner.touchable,t=e/4-r.borderWidth;return Vl.css`
    top: ${t-e}px;
    left: ${ku}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `}),uKe=({transformTool:r})=>{let e=(0,vr.useRef)(null),t=(0,vr.useRef)(null),i=(0,vr.useRef)(null),o=(0,vr.useRef)(null),n=(0,vr.useRef)(null),{leftTopRespectFlip:s,leftBottomRespectFlip:a,rightTopRespectFlip:l,rightBottomRespectFlip:c}=r,{height:u,width:d}=r.cropMaskSize,{maxCropMaskSize:p,defaultCropMaskPosition:h}=r,{isFlippedHorizontal:f,isFlippedVertical:_}=r,x=p.width/2,y=p.height/2,D=U(T({},p),{left:h.x,top:h.y}),E={height:u,width:d},F=r.isDragMode?{transition:"unset"}:{},N=at=>f?x*2-at:at,R=at=>_?y*2-at:at,B=(at,Ge,rt)=>{let Kp=N(at),rv=R(Ge);switch(gr.getFlippedEdgeIndex(rt,f,_)){case 0:r.onLeftTop({x:Kp,y:rv});break;case 1:r.onLeftBottom({x:Kp,y:rv});break;case 2:r.onRightTop({x:Kp,y:rv});break;case 3:r.onRightBottom({x:Kp,y:rv});break;default:break}},se=(at,Ge,rt)=>{r.setDragMode(!0),r.clickableCanvas(!1),B(at,Ge,rt)},A=(at,Ge,rt)=>{B(at,Ge,rt)},q=(at,Ge,rt)=>{r.setDragMode(!1),B(at,Ge,rt),r.clickableCanvas(!0),r.trackChanges()},ue=(at,{x:Ge,y:rt})=>{se(Ge,rt,0)},_e=(at,{x:Ge,y:rt})=>{A(Ge,rt,0)},ye=(at,{x:Ge,y:rt})=>{q(Ge,rt,0)},De=(at,{x:Ge,y:rt})=>{se(Ge,rt,1)},Kt=(at,{x:Ge,y:rt})=>{A(Ge,rt,1)},oe=(at,{x:Ge,y:rt})=>{q(Ge,rt,1)},J=(at,{x:Ge,y:rt})=>{se(Ge,rt,2)},Z=(at,{x:Ge,y:rt})=>{A(Ge,rt,2)},we=(at,{x:Ge,y:rt})=>{q(Ge,rt,2)},ve=(at,{x:Ge,y:rt})=>{se(Ge,rt,3)},Ne=(at,{x:Ge,y:rt})=>{A(Ge,rt,3)},Ae=(at,{x:Ge,y:rt})=>{q(Ge,rt,3)},Ke=(at,Ge)=>{let rt=N(at+d/2)-d/2,Kp=R(Ge+u/2)-u/2;r.changePosition({x:rt,y:Kp})},Tt=(at,{x:Ge,y:rt})=>{r.setDragMode(!0),r.clickableCanvas(!1),Ke(Ge,rt)},Xt=(at,{x:Ge,y:rt})=>{Ke(Ge,rt)},qi=(at,{x:Ge,y:rt})=>{r.setDragMode(!1),Ke(Ge,rt),r.clickableCanvas(!0),r.trackChanges()};return vr.default.createElement("div",{style:U(T({},D),{position:"absolute"})},vr.default.createElement(d_,{nodeRef:n,bounds:"parent",position:s,onStart:Tt,onDrag:Xt,onStop:qi},vr.default.createElement(nKe,{ref:n,style:T(T({},E),F)})),vr.default.createElement(dT,{style:T({left:s.x+d/3,top:s.y,height:u,width:1},F)}),vr.default.createElement(dT,{style:T({left:s.x+d/3*2,top:s.y,height:u,width:1},F)}),vr.default.createElement(dT,{style:T({left:s.x,top:s.y+u/3,height:1,width:d},F)}),vr.default.createElement(dT,{style:T({left:s.x,top:s.y+u/3*2,height:1,width:d},F)}),vr.default.createElement(d_,{nodeRef:e,bounds:"parent",position:T({},s),onStart:ue,onDrag:_e,onStop:ye},vr.default.createElement(sKe,{ref:e,"data-test":X.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:ku,style:F})),vr.default.createElement(d_,{nodeRef:i,bounds:"parent",position:a,onStart:De,onDrag:Kt,onStop:oe},vr.default.createElement(cKe,{ref:i,"data-test":X.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:ku,style:F})),vr.default.createElement(d_,{nodeRef:t,bounds:"parent",position:l,onStart:J,onDrag:Z,onStop:we},vr.default.createElement(aKe,{ref:t,"data-test":X.CropTopRight,vertical:"top",horizontal:"right",borderWidth:ku,style:F})),vr.default.createElement(d_,{nodeRef:o,bounds:"parent",position:c,onStart:ve,onDrag:Ne,onStop:Ae},vr.default.createElement(lKe,{ref:o,"data-test":X.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:ku,style:F})))},tme=fe("transformTool")(O(uKe))});var ps,Eu,ime,dKe,pKe,mKe,ome,nme,sme=m(()=>{ps=v(C("react"));j();Eu=v(C("styled-components"));pe();Zt();Y();ime=Eu.default.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${r=>r.isVisible&&Eu.css`
      display: inline-block;
    `}

  svg {
    color: ${r=>r.theme.foreground};
  }
`,dKe=Eu.default.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`,pKe=Eu.default.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${r=>r.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${r=>r.isVisible&&Eu.css`
      display: inline-block;
    `}
`,mKe=Eu.default.div`
  transform: translate(0, 0) !important;
`,ome=class extends ps.default.Component{constructor(e){super(e);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(e,{x:t})=>{let{flipHorizontally:i,flipVertically:o}=this.transformTool.rotateFlipState;i!==o&&(t*=-1);let n=this.transformTool.defaultAngle-t*this.DEGREES_PER_PIXEL,s=Math.min(this.MAX_ROTATION,Math.max(n,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${s}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees),this.transformTool.trackChanges()};this.rotateRef=ps.default.createRef()}get transformTool(){return this.props.transformTool}render(){let{config:e,canvasWidth:t,transformTool:i}=this.props,{flipHorizontally:o,flipVertically:n}=this.transformTool.rotateFlipState,s=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minSliderWidth,a=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minValueWidth,l=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,c=o===n?l*-1:l,u=o!==n?i.rotationInDegrees*-1:i.rotationInDegrees;return ps.default.createElement(dKe,{"data-test":X.RotateSlider},ps.default.createElement(z.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!s},ps.default.createElement(mKe,{ref:this.rotateRef},ps.default.createElement(ime,{isVisible:s},ps.default.createElement(ft.dots,{width:90,height:15,x:c})),ps.default.createElement(pKe,{isVisible:a},u,"\xB0"),ps.default.createElement(ime,{isVisible:s},ps.default.createElement(ft.dots,{width:90,height:15,x:c})))))}},nme=fe("transformTool","config")(O(ome))});var Iu,Ef,hKe,fKe,gKe,bKe,yKe,_Ke,p_,g5=m(()=>{Iu=v(C("react"));j();Ef=v(C("styled-components"));Zt();Y();sme();hKe=(0,Ef.default)(ft.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`,fKe=(0,Ef.default)(ft.rotate)`
  height: 16px;
  width: 16px;
`,gKe=(0,Ef.default)(ft.flipHorizontal)`
  height: 16px;
  width: 16px;
`,bKe=(0,Ef.default)(ft.flipVertical)`
  height: 16px;
  width: 16px;
`,yKe=Ef.default.div`
  display: inline-flex;
  transform: scale(0.9);

  svg {
    color: ${r=>r.theme.foreground};
  }
`,_Ke=({transformTool:r,config:e,custom:t,canvas:i})=>{let o=r.locale.transformActions,n=i.canvasSize.width,s=!e.isLayoutAdvanced||e.isLayoutAdvanced&&n>e.measurements.canvas.transform.minFlipWidth,a=({customButtonKey:h,onClick:f,label:_,icon:x})=>{let y=t.getButton(h);return Iu.default.createElement(y,{key:_,onClick:f,label:_,ariaLabel:_,icon:x,style:{margin:"0 5px"}})},l=a({label:o.buttonFlipHorizontal,icon:Iu.default.createElement(gKe,null),onClick:()=>{r.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),c=a({label:o.buttonFlipVertical,icon:Iu.default.createElement(bKe,null),onClick:()=>{r.flipVertically()},customButtonKey:"transformActionFlipVertical"}),u=a({label:o.buttonRotateClockwise,icon:Iu.default.createElement(hKe,null),onClick:r.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),d=a({label:o.buttonRotateAntiClockwise,icon:Iu.default.createElement(fKe,null),onClick:r.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),p=e.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return Iu.default.createElement(yKe,{style:p,"data-test":X.FlipRotateControls},r.config.enableFlip&&s&&l||null,r.config.enableFlip&&s&&c||null,r.config.enableRotation&&Iu.default.createElement(nme,{canvasWidth:n})||null,r.config.enableRotation&&d||null,r.config.enableRotation&&u||null)},p_=fe("transformTool","config","custom","canvas")(O(_Ke))});var $l,vKe,pT,xKe,ame,lme=m(()=>{$l=v(C("react"));j();wr();rme();g5();vKe=Oe.Bar.Index,{Backdrop:pT}=Oe.Crop,xKe=({transformTool:r,canvas:e,config:t})=>{let{leftTopRespectFlip:i,leftBottomRespectFlip:o,rightTopRespectFlip:n}=r,{height:s}=r.cropMaskSize,{height:a,width:l}=e.canvasSize,{defaultCropMaskPosition:c}=r,u=r.isDragMode?{transition:"unset"}:{};return $l.default.createElement(Oe.Controls.Container,null,$l.default.createElement(pT,{style:T({left:0,top:0,width:l,height:i.y+c.y},u)}),$l.default.createElement(pT,{style:T({left:0,top:i.y+c.y,width:c.x+i.x,height:s},u)}),$l.default.createElement(pT,{style:T({left:n.x+c.x,top:n.y+c.y,width:l-n.x-c.x,height:s},u)}),$l.default.createElement(pT,{style:T({left:0,top:o.y+c.y,width:l,height:a-o.y-c.y+t.measurements.basicToolControlBar.controlsBarHeight},u)}),$l.default.createElement(tme,null),t.isLayoutAdvanced?$l.default.createElement(vKe,{bottom:!0},$l.default.createElement(p_,null)):null)},ame=fe("transformTool","canvas","config")(O(xKe))});var mT,hT,CKe,cme,ume,dme=m(()=>{mT=v(C("react"));j();hT=v(C("styled-components"));wr();CKe=(0,hT.default)(Oe.Controls.Container)`
  ${r=>r.activeCursor?hT.css`
          cursor: move;
        `:""}
  z-index: ${r=>r.theme.measurements.zIndex.canvas.crop.dragImage};
`,cme=class extends mT.default.Component{constructor(e){super(e);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=U(T({},this.INITIAL_POSITION),{isDragging:!1});this.containerRef=null;this.getCursorCoordinates=e=>{let t=0,i=0;if(e.type.indexOf("touch")!==-1){let a=e;if(!a.touches.length)return this.INITIAL_POSITION;t=a.touches[0].clientX,i=a.touches[0].clientY}else{let a=e;t=a.clientX,i=a.clientY}let o=this.containerRef.current.getBoundingClientRect(),n=t-o.left,s=i-o.top;return{x:n,y:s}};this.move=e=>{if(this.scale.canDrag){let{x:t,y:i}=this.getCursorCoordinates(e);if(t!==void 0&&i!==void 0&&this.state.isDragging){let o={x:this.state.x-t,y:this.state.y-i};this.scale.setOffset(o)}}};this.touchDrag=e=>{if(this.scale.canDrag){let{x:t,y:i}=this.getCursorCoordinates(e);t!==void 0&&i!==void 0&&this.setState({x:t,y:i,isDragging:!0})}};this.drag=e=>{e.preventDefault(),this.touchDrag(e)};this.stop=()=>{this.scale.canDrag&&(this.scale.savePosition(),this.setState(U(T({},this.INITIAL_POSITION),{isDragging:!1})))};this.touchEnd=e=>{e.preventDefault(),e.stopPropagation();let{x:t,y:i}=this.state;t&&i&&this.setState(U(T({},this.INITIAL_POSITION),{isDragging:!1}))};this.containerRef=mT.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get scale(){return this.props.scale}render(){return mT.default.createElement(CKe,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}},ume=fe("scale")(O(cme))});var xa,pme,mme=m(()=>{xa=v(C("react"));j();V();ie();ype();wr();Epe();eme();lme();dme();pme=O(({children:r})=>{let e=(0,xa.useRef)(null),{active:t,sprite:i,canvas:o}=P(),n=()=>{switch(t.tool){case w.FOCUS:return xa.default.createElement(kpe,null);case w.TEXT:case w.TEXT_DESIGN:case w.STICKER:return xa.default.createElement(Qpe,null);case w.BRUSH:return xa.default.createElement(bpe,null);case w.TRANSFORM:return xa.default.createElement(ame,null);default:return xa.default.createElement(Oe.Controls.Container,null,xa.default.createElement(ume,null))}},s=c=>{if(c.preventDefault(),c.stopPropagation(),o.isCanvasClickable){let{clientX:u}=c,{clientY:d}=c;if(c.type.indexOf("touch")!==-1){let _=c;if(!_.touches.length)return;u=_.touches[0].clientX,d=_.touches[0].clientY}let p=e.current.getBoundingClientRect(),h=u-p.left,f=d-p.top;o.getContainersAtPreviewPoint({x:h,y:f})}},a=c=>{c.code==="Tab"&&i.selectLast()},{canvasSize:l}=o;return xa.default.createElement(Oe.Controls.Wrapper,{"aria-hidden":!0,ref:e,onClick:s,onKeyDown:a,height:l.height,width:l.width},r,n())})});var hme,fme,SKe,wKe,b5,gme=m(()=>{hme=v(C("react")),fme=v(C("styled-components")),SKe=fme.default.div`
  display: ${({isVisible:r})=>r?"block":"none"};
  position: absolute;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.snappingGuide};
`,wKe=({isVisible:r,className:e})=>hme.default.createElement(SKe,{isVisible:r,className:e}),b5=wKe});var fT,Mp,TKe,kKe,EKe,IKe,bme,yme=m(()=>{fT=v(C("react"));j();Mp=v(C("styled-components"));Y();gme();TKe=(0,Mp.default)(b5)`
  background: ${r=>r.theme.snapping.positionGuideColor};
  ${r=>r.direction==="horizontal"?Mp.css`
        width: 100%;
        height: 2px;
        top: ${()=>r.position}px;
      `:Mp.css`
      width: 2px;
      height: 100%;
      left: ${()=>r.position}px;
    `}
`,kKe=(0,Mp.default)(b5)`
  border: none;
  border-top: 2px dashed ${r=>r.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:r})=>r.x}px;
  top: ${({position:r})=>r.y}px;
  transform: rotate(${({rotation:r})=>r}rad);
  width: 200%;
`,EKe=Mp.default.div`
  position: absolute;
  width: ${({width:r})=>r}px;
  height: ${({height:r})=>r}px;
  top: ${({top:r})=>r}px;
  left: ${({left:r})=>r}px;
  overflow: hidden;
`,IKe=({snapping:r,editor:e})=>{let{width:t,height:i}=e.getPreviewSize(),{x:o,y:n}=r.previewTopLeftPosition,s=r.positionGuides.map(({direction:l,value:c,isVisible:u},d)=>fT.default.createElement(TKe,{key:`positionGuide-${d}`,direction:l,position:c,isVisible:u})),a=r.rotationGuides.find(({isVisible:l})=>l);return fT.default.createElement(EKe,{"data-test":X.SnappingLine,width:t,height:i,left:o,top:n},s,fT.default.createElement(kKe,{key:"rotationGuide",rotation:a?a.value:0,position:a?a.position:{x:0,y:0},isVisible:!!a}))},bme=fe("snapping","editor")(O(IKe))});var _me,vme,DKe,xme,Cme=m(()=>{_me=v(C("react")),vme=v(C("styled-components"));Y();DKe=vme.default.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`,xme=()=>_me.default.createElement(DKe,{alt:"watermark","data-test":X.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="})});var Kl,y5,Sme,wme,Tme=m(()=>{Kl=v(C("react"));j();V();pe();wr();y5=24,Sme=class extends Kl.default.Component{constructor(e){super(e);this.init=()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{this.video.srcObject=e}).catch(()=>{this.props.modal.showActionModal({type:St.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})}):this.props.modal.showActionModal({type:St.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})};this.stop=()=>{let{active:e}=this.props;this.video.srcObject.getTracks().forEach(o=>{o.stop()}),this.video.srcObject=null,e.selectWebcam(!1)};this.captureAndCloseWebcam=()=>{this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0),this.props.active.newImage(this.canvas.toDataURL("image/webp")),this.stop()};this.videoRef=Kl.default.createRef()}componentDidMount(){this.canvas=document.createElement("canvas"),this.video=this.videoRef.current,this.init()}render(){let{editor:e}=this.props,{height:t,width:i}=e.getPreviewSize(),{measurements:o}=e.configStore,n=this.props.canvas.canvasSize.height,s=(n-t)/2,a=s<y5+o.buttons.float.size?n-y5*2-o.buttons.float.size/2:n-s+y5,l=this.props.active.webcamLabel;return Kl.default.createElement(Oe.Wrapper,null,Kl.default.createElement(Oe.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},Kl.default.createElement(Oe.Bar.ButtonGroup,null,Kl.default.createElement(Oc,{ariaLabel:l,onClick:this.stop},l))),Kl.default.createElement(Oe.Webcam,{style:{height:t,width:i},autoPlay:!0,ref:this.videoRef}),Kl.default.createElement(Oe.Button.Float,{ariaLabel:"Click and Save",style:{top:a},onClick:this.captureAndCloseWebcam}))}},wme=fe("active","canvas","modal","editor")(O(Sme))});var kme,Eme,Ime=m(()=>{kme=v(C("react"));Y();wr();Eme=({children:r})=>kme.default.createElement(Oe.Container,{"data-test":X.CanvasContainer},r)});var Jo,Dme,If,Ome=m(()=>{Jo=v(C("react"));CO();Dme=v(D0());j();vt();ie();Y();wr();mme();yme();Cme();Tme();Ime();If=O(()=>{let r=(0,Jo.useRef)(null),{canvas:e,active:t,config:i}=P(),o=(a=!0)=>{if(r==null?void 0:r.current){let{clientWidth:l,clientHeight:c}=r.current,u=Bt.devicePixelRatio;r.current.width=l*u,r.current.height=c*u,e.saveDimensions({width:l,height:c,render:a})}},n=new ub((0,Dme.default)(()=>o(),100,{trailing:!0}));(0,Jo.useEffect)(()=>{let a=r.current;return e.setCanvasElement(a),()=>{n.disconnect()}},[]),(0,Jo.useLayoutEffect)(()=>{o(!1),n.observe(r.current)});let{licenseChecker:s}=i;return Jo.default.createElement(Eme,null,s&&s.isWhiteLabel()?null:Jo.default.createElement(xme,null),t.isWebcam?Jo.default.createElement(wme,null):null,Jo.default.createElement(Oe.Element,{ref:r,"aria-label":"Canvas","data-test":X.Canvas}),Jo.default.createElement(pme,null,Jo.default.createElement(bme,null)))})});var Df,Rme=m(()=>{pe();vt();wr();Df=class{constructor(e={},t={}){this.getAdvancedCategoryCard=()=>this.components.advancedUICategoryCard;this.getAdvancedItemCard=()=>this.components.advancedUIItemCard;this.getAdvancedToolbarItem=()=>this.components.advancedUIToolbarItem;this.getDialog=()=>this.components.dialog;this.getButton=e=>this.components.buttons[e];this.getColorItem=()=>this.components.colorItem;this.getCheckbox=()=>this.components.checkbox;let i={dialog:z.Dialog,colorItem:z.ColorItem,checkbox:z.Input.Checkbox,buttons:{mainCanvasActionUndo:Oe.Button.TextSecondary,mainCanvasActionRedo:Oe.Button.TextSecondary,mainCanvasActionExport:Ub,mainCanvasActionClose:Oc,canvasActionEdit:Oe.Controls.SpriteActionButton,canvasActionBringToFront:Oe.Controls.SpriteActionButton,canvasActionDuplicate:Oe.Controls.SpriteActionButton,canvasActionDelete:Oe.Controls.SpriteActionButton,canvasActionInvert:Oe.Controls.SpriteActionButton,canvasActionFlip:Oe.Controls.SpriteActionButton,transformActionFlipHorizontal:el,transformActionFlipVertical:el,transformActionRotateClockwise:el,transformActionRotateAntiClockwise:el,textAlignment:el,toolControlBarPrimaryButton:zb,toolControlBarSecondaryButton:Oc}};this.components=ho([i,t,e])}}});var Xl,OKe,Of,Fme=m(()=>{Xl=v(C("react"));j();V();pe();vt();OKe=({modal:r,textTool:e,textDesignTool:t,custom:i})=>{let{type:o,identifier:n,isVisible:s,modalProps:a,positionOffset:l}=r,{headerLabel:c,bodyLabel:u,confirmLabel:d,dismissLabel:p,handleClose:h,handleConfirm:f,handleDismiss:_}=a,x=i.getDialog();if(o===St.INFO)return Xl.default.createElement(z.InfoModal,{headerLabel:c,bodyLabel:u},Xl.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,headerLabel:c,bodyLabel:u}));if(o===St.TEXT_EDIT){let{buttonSave:y,buttonClose:D}=e.locale.canvasControls,E={type:o,isVisible:r.isVisible,confirmLabel:y,dismissLabel:D,headerLabel:e.locale.canvasControls.inputText};if(e.isTextSelected)return Xl.default.createElement(z.TextEditModal,U(T({},E),{defaultText:Be.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text,maxLength:e.config.maxCharacterLimit,allowEmojis:e.config.allowEmojis}),Xl.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,confirmLabel:y,dismissLabel:D,headerLabel:e.locale.canvasControls.inputText}));if(t.isTextDesignSelected)return Xl.default.createElement(z.TextEditModal,U(T({},E),{defaultText:st.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis}),Xl.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,confirmLabel:y,dismissLabel:D,headerLabel:e.locale.canvasControls.inputText}))}return Xl.default.createElement(z.ActionModal,{type:o,headerLabel:c,bodyLabel:u,confirmLabel:d,dismissLabel:p,handleClose:h,handleConfirm:f,handleDismiss:_},Xl.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,confirmLabel:d,dismissLabel:p,headerLabel:c,bodyLabel:u,handleClose:h}))},Of=fe("textTool","textDesignTool","modal","custom")(O(OKe))});var m_,Ame,RKe,Pme,_5,Mme=m(()=>{m_=v(C("react")),Ame=v(C("styled-components"));pe();Y();RKe=Ame.default.div`
  position: absolute;
  right: 8px;
  top: 8px;
`,Pme=class extends m_.default.Component{constructor(e){super(e);this.onChange=e=>{this.setState({value:e.replace(/[^\d.,-]/g,""),isSubmitted:!1})};this.onSubmit=()=>{let{getCorrectValue:e}=this.props,{isSubmitted:t,value:i}=this.state;t||this.setState({value:e(parseInt(i,10)||0).toString(),isSubmitted:!0})};this.state={isSubmitted:!1,value:e.value.toString()}}componentDidUpdate(e){let{value:t}=this.props;e.value!==t&&this.setState({value:t.toString()})}render(){let{id:e,isDisabled:t,label:i}=this.props,{value:o}=this.state;return m_.default.createElement(z.Input.Text,{id:e,value:o,isDisabled:t,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:YX(this.onSubmit)},m_.default.createElement(RKe,null,m_.default.createElement(z.Input.Label,{label:i,htmlFor:e})))}},_5=Pme});var Bp,v5,FKe,AKe,PKe,MKe,BKe,h_,Bme=m(()=>{Bp=v(C("react")),v5=v(C("styled-components"));pe();Mme();FKe=v5.default.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${r=>r.theme.measurements.advancedUIToolControlBar.width}px;
`,AKe=v5.default.span`
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  color: ${r=>r.theme.textInput.foreground};
  margin-top: 10px;
  margin-right: 13px;
`,PKe="photoeditorsdk-transformScaleWidth",MKe="photoeditorsdk-transformScaleHeight",BKe=({showLabel:r=!0,label:e,isDisabled:t,valueHeight:i,valueWidth:o,labelWidth:n,labelHeight:s,onSubmitWidth:a,onSubmitHeight:l})=>Bp.default.createElement("div",null,Bp.default.createElement(z.Input.Label,{label:e,show:r}),Bp.default.createElement(FKe,null,Bp.default.createElement(_5,{id:PKe,value:o,getCorrectValue:a,label:n,isDisabled:t}),Bp.default.createElement(AKe,null,"x"),Bp.default.createElement(_5,{id:MKe,value:i,getCorrectValue:l,label:s,isDisabled:t}))),h_=BKe});var xr=m(()=>{ZC();Nde();fpe();QR();Ome();Rme();Fme();g5();Bme()});var Yme=S((qor,Xme)=>{"use strict";var NKe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Xme.exports=NKe});var ehe=S((Hor,Qme)=>{"use strict";var qKe=Yme();function Jme(){}function Zme(){}Zme.resetWarningCache=Jme;Qme.exports=function(){function r(i,o,n,s,a,l){if(l!==qKe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}r.isRequired=r;function e(){return r}var t={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Zme,resetWarningCache:Jme};return t.PropTypes=t,t}});var rhe=S((Gor,the)=>{the.exports=ehe()();var jor,Wor});var xhe=S((Anr,vhe)=>{"use strict";var ZKe=!1,yhe=function(){};ZKe&&(_he=function(e,t){var i=arguments.length;t=new Array(i>1?i-1:0);for(var o=1;o<i;o++)t[o-1]=arguments[o];var n=0,s="Warning: "+e.replace(/%s/g,function(){return t[n++]});typeof console!="undefined"&&console.error(s);try{throw new Error(s)}catch(a){}},yhe=function(r,e,t){var i=arguments.length;t=new Array(i>2?i-2:0);for(var o=2;o<i;o++)t[o-2]=arguments[o];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");r||_he.apply(null,[e].concat(t))});var _he;vhe.exports=yhe});var wT,ffe,gfe=m(()=>{wT=v(C("react")),ffe=()=>{let[r,e]=(0,wT.useState)([]);return(0,wT.useEffect)(()=>{var t;if(typeof window!==void 0&&((t=window.navigator)==null?void 0:t.mediaDevices)){let i=!0,o=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{i&&e(n.map(({deviceId:s,groupId:a,kind:l,label:c})=>({deviceId:s,groupId:a,kind:l,label:c})))}).catch(()=>null)};return window.navigator.mediaDevices.addEventListener("devicechange",o),o(),()=>{i=!1,window.navigator.mediaDevices.removeEventListener("devicechange",o)}}return null},[]),r}});var bfe,TT,yfe=m(()=>{bfe=v(C("react"));j();gfe();ie();Y();TT=O(({tool:r,fullWidth:e=!1,icon:t,label:i,onClick:o})=>{let{custom:n}=P();if(!ffe().some(({kind:l})=>l==="videoinput"))return null;let a=n.getButton("toolControlBarSecondaryButton");return bfe.default.createElement(a,{"data-test":X.LibraryWebcamButton,tool:r,label:i,ariaLabel:i,onClick:o,fullWidth:e,icon:t})})});var _fe=m(()=>{yfe()});var O5=m(()=>{_fe()});var Ige,Dge,Oge=m(()=>{Ige=v(C("styled-components"));pe();Dge=(0,Ige.default)(Oo)`
  margin: 2px;
  min-width: ${r=>r.theme.measurements.basicCard.large.width}px;
  height: ${r=>r.theme.measurements.basicCard.large.height}px;
  color: ${r=>r.theme.card.foreground};
`});var Rge,Fge,Age=m(()=>{Rge=v(C("styled-components"));pe();Fge=(0,Rge.default)(Oo)`
  margin: 2px;
  min-width: ${r=>r.theme.measurements.basicCard.medium.width}px;
  height: ${r=>r.theme.measurements.basicCard.medium.height}px;
  color: ${r=>r.theme.card.foreground};
`});var Pge,z5,Mge=m(()=>{Pge=v(C("react"));V();Oge();Age();z5=r=>{let e=r.type===Le.LARGE,t=Fge;return e&&(t=Dge),Pge.default.createElement(t,T({},r))};z5.defaultProps={type:Le.MEDIUM}});var Bge,Lge,zge=m(()=>{Bge=v(C("styled-components"));pe();Y();Lge=(0,Bge.default)($n).attrs(()=>({"data-test":X.CardContainer}))`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${r=>r.theme.measurements.basicToolControlBar.itemsBarHeight}px;
`});var Uge,Nge,qge=m(()=>{Uge=v(C("styled-components"));pe();Nge=(0,Uge.default)(Jt)`
  &&& {
    min-height: 32px;
    font-size: ${r=>r.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${r=>r.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${r=>r.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`});var Hge=m(()=>{Mge();zge();qge()});var jge,Wge,Gge=m(()=>{jge=v(C("styled-components")),Wge=jge.default.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`});var U_,Vge,$ge,Kge=m(()=>{U_=v(C("styled-components")),Vge=U_.default.div`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${r=>r.show?U_.css`
          max-height: 80px;
        `:U_.css`
          max-height: 0px;
        `}
`,$ge=Vge;Vge.defaultProps={show:!0}});var Xge,vXe,Yge,Jge=m(()=>{Xge=v(C("styled-components")),vXe=Xge.default.div`
  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  margin: 0 10vw;
  height: auto;
  box-shadow: ${r=>r.theme.toolControlBar.shadow};
  @media all and (min-width: 0) and (max-width: 599px) {
    margin: 0 5vw;
  }
`,Yge=vXe});var Zge,xXe,Qge,ebe=m(()=>{Zge=v(C("styled-components")),xXe=Zge.default.div`
  width: 100px;
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 42px;
  }
`,Qge=xXe});var IT,tbe,rbe=m(()=>{IT=v(C("styled-components"));Y();tbe=IT.default.div.attrs(()=>({"data-test":X.ToolControlBarExpandableControls}))`
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 90%;
  height: ${r=>r.theme.measurements.basicToolControlBar.controlsBarHeight}px;
  display: flex;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${r=>r.theme.measurements.zIndex.controlsBar};
  background: ${r=>r.theme.toolControlBar.background};
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};

  ${({show:r})=>r&&IT.css`
      transform: translateY(-100%) scaleY(1);
    `}
`});var ibe,obe,CXe,SXe,Ql,nbe=m(()=>{ibe=v(C("react")),obe=v(C("styled-components")),CXe=obe.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
`,SXe=({label:r,className:e,children:t})=>ibe.default.createElement(CXe,{"aria-label":r,className:e},t),Ql=SXe});var sbe,wXe,abe,lbe=m(()=>{sbe=v(C("styled-components"));pe();wXe=sbe.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${CZ.scale} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;
  @media all and (min-width: 0) and (max-width: 599px) {
    min-width: 280px;
  }
`,abe=wXe});var U5,DT,cbe,TXe,OT,ube=m(()=>{U5=v(C("react")),DT=v(C("styled-components"));xr();cbe=DT.css`
  background: ${r=>r.theme.tabTitle.activeBackground};
  color: ${r=>r.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${r=>r.theme.tabTitle.activeBorderColor};
`,TXe=(0,DT.default)(Gs)`
  display: inline-flex;
  align-items: center;
  font-size: ${r=>r.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${r=>r.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${r=>r.theme.tabTitle.background};

  ${({isActive:r})=>r&&cbe}

  &:active {
    ${cbe}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,OT=class extends U5.default.Component{constructor(){super(...arguments);this.onClick=()=>{let{label:e,onClick:t}=this.props;t(e)}}render(){let{activeTab:e,label:t}=this.props;return U5.default.createElement(TXe,{ariaLabel:t,isActive:e===t,onClick:this.onClick},t)}}});var zi,N5,kXe,EXe,dbe,N_,pbe=m(()=>{zi=v(C("react")),N5=v(C("styled-components"));xr();pe();lbe();ube();kXe=(0,N5.default)(Kn)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`,EXe=(0,N5.default)(qb)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);
  @media all and (min-width: 0) and (max-width: 499px) {
    left: 0;
    right: 0;
    transform: translateY(-120%);
    background: transparent;
    button {
      &:first-child {
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
      }
      &:last-child {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
      }
      &:not(:first-child):not(:last-child) {
        border-radius: 0;
      }
    }
  }
`,dbe=class extends zi.default.Component{constructor(e){super(e);this.onTabClick=e=>{this.setState({activeTab:e,toggleExtend:!1})};this.getDropUp=()=>{let{length:e}=this.props,{toggleExtend:t}=this.state,i=zi.default.Children.toArray(this.props.children),o=zi.default.Children.count(this.props.children),n=i.slice(e,o);return zi.default.createElement(EXe,{show:t},n.map(s=>{let a=s.props.label||"";return zi.default.createElement(Gs,{onClick:()=>this.onTabClick(a),key:a,ariaLabel:"More Options"},a)}))};this.extend=()=>{this.setState(({toggleExtend:e})=>({toggleExtend:!e}))};this.getExtension=()=>zi.default.createElement(kXe,{onClick:this.extend,ariaLabel:"Select Next"},"...");let t=zi.default.Children.count(this.props.children),i=zi.default.Children.toArray(this.props.children);this.state={activeTab:t&&i[0].props&&i[0].props.label||"",toggleExtend:!1}}render(){let{length:e}=this.props,{activeTab:t,toggleExtend:i}=this.state,o=zi.default.Children.toArray(this.props.children).slice(0,e),n=zi.default.Children.count(this.props.children)>e;return zi.default.createElement("div",null,o.map(s=>{if(s){let a=s.props.label||"";return zi.default.createElement(OT,{activeTab:t,key:a,label:a,onClick:this.onTabClick})}return null}),n?this.getExtension():null,i?this.getDropUp():null,zi.default.Children.map(this.props.children,s=>!s||s.props&&s.props.label!==t?null:zi.default.createElement(abe,{key:s.props.label},s.props.children)))}},N_=dbe});var RT=m(()=>{nbe();pbe()});var Nf,mbe,IXe,AT,FT,hbe=m(()=>{Nf=v(C("react")),mbe=v(C("styled-components"));RT();IXe=mbe.default.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  transition: all 0.2s linear;
`,AT=class extends Nf.default.Component{constructor(e){super(e);this.updateLength=()=>{let{maxWidth:e,children:t}=this.props,i=0;if(e)i=e;else{let s=window.innerWidth,a=s>600?300:200;i=s-a}let o=Nf.default.Children.count(t),n=i-o*AT.TAB_WIDTH;if(n<0){let s=Math.round(Math.abs(n/AT.TAB_WIDTH));this.setState({length:o-s})}};this.state={length:Nf.default.Children.count(this.props.children)}}componentDidMount(){window.addEventListener("resize",this.updateLength),this.updateLength()}componentWillUnmount(){window.removeEventListener("resize",this.updateLength)}render(){let{children:e}=this.props,{length:t}=this.state;return t?Nf.default.createElement(IXe,null,Nf.default.createElement(N_,{length:t},e)):null}},FT=AT;FT.TAB_WIDTH=120});var PT,DXe,fbe,gbe=m(()=>{PT=v(C("styled-components")),DXe=PT.default.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${r=>r.full?PT.css`
            left: -24px;
            width: calc(100% + 48px);
          `:`
      left: 24px;
      width: calc(100% - 48px);
    `}
    border-bottom: 1px solid ${r=>r.theme.toolControlBar.separatorColor};
  }
`,fbe=DXe});var bbe,OXe,ybe,_be=m(()=>{bbe=v(C("styled-components"));pe();OXe=(0,bbe.default)(z.Input.Slider).attrs(()=>({centerSlider:!0}))`
  max-width: 224px;
`,ybe=OXe});var MT,RXe,vbe,xbe=m(()=>{MT=v(C("styled-components"));Y();RXe=MT.default.div.attrs(()=>({"data-test":X.CategoryItemsContainer}))`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:r})=>r&&MT.css`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`,vbe=RXe});var q_,q5,Cbe=m(()=>{q_=v(C("styled-components")),q5=q_.default.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  z-index: ${r=>r.theme.measurements.zIndex.toolControlBar};

  ${r=>r.show?q_.css`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          background: ${r.theme.toolControlBar.background};
          color: ${r.theme.toolControlBar.inputLabelForeground};
        `:q_.css`
          max-height: 0px;
        `}
`;q5.defaultProps={show:!0}});var Sbe,FXe,wbe,Tbe=m(()=>{Sbe=v(C("styled-components")),FXe=Sbe.default.div`
  height: ${r=>r.theme.measurements.basicToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${r=>r.theme.toolControlBar.separatorColor};
  }
`,wbe=FXe});var Pu,kbe,Ebe,BT,Ibe,LT,H5=m(()=>{Pu=v(C("styled-components"));pe();kbe=Pu.default.span`
  display: flex;
  cursor: pointer;
  z-index: ${r=>r.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;

  color: ${r=>r.theme.toolbar.foreground};
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing};
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;

  ${({isActive:r})=>r&&Pu.css`
      color: ${e=>e.theme.toolbar.activeForeground};
    `}

  &:active {
    color: ${r=>r.theme.toolbar.activeForeground};
  }
`,Ebe=Pu.css`
  background-color: ${r=>r.theme.toolbar.activeBackground};
  color: ${r=>r.theme.toolbar.activeForeground};

  svg {
    color: ${r=>r.theme.toolbar.activeForeground};
  }
`,BT=(0,Pu.default)(ti)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${r=>r.theme.toolbar.foreground};
  background-color: ${r=>r.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;

  ${({isActive:r})=>r&&Ebe}

  &:active {
    ${Ebe}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`,Ibe=Pu.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  svg {
    color: ${r=>r.theme.toolbar.foreground};
  }
`,LT=Pu.default.div.attrs({role:"none"})`
  display: flex;
  height: ${r=>r.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`});var j5,H_,AXe,Dbe,Obe=m(()=>{j5=v(C("react")),H_=v(C("styled-components"));pe();Y();H5();AXe=H_.default.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${r=>r.theme.toolbar.background};
  color: ${r=>r.theme.toolbar.foreground};
  z-index: ${r=>r.theme.measurements.zIndex.toolbar};

  ${r=>r.show?H_.css`
          height: ${r.theme.measurements.basicUIToolbar.closeHeight}px;
          ${BT} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${LT} {
            height: ${r.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:H_.css`
          height: ${r.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`,Dbe=({show:r=!1,children:e})=>j5.default.createElement(AXe,{"data-test":X.Toolbar,show:r},j5.default.createElement($n,null,e))});var j_,Rbe,Fbe=m(()=>{j_=v(C("react"));Y();H5();Rbe=({children:r,label:e,isActive:t,onClick:i})=>j_.default.createElement(LT,{"aria-haspopup":!0,"aria-expanded":t},j_.default.createElement(BT,{"data-test":X.ToolbarItem,ariaLabel:e,onClick:i,isActive:t},j_.default.createElement(Ibe,null,r,j_.default.createElement(kbe,{isActive:t},e))))});var W_,PXe,Abe,Pbe=m(()=>{W_=v(C("styled-components")),PXe=W_.default.li.attrs({role:"none"})`
  ${r=>r.active?W_.css`
          height: ${r.theme.measurements.basicUIToolbar.closeHeight}px;
        `:W_.css`
          height: ${r.theme.measurements.basicUIToolbar.openHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${r=>r.theme.toolControlBar.separatorColor};
  }
`,Abe=PXe});var H,xt=m(()=>{pe();Hge();Gge();Kge();Jge();ebe();rbe();hbe();gbe();_be();RT();xbe();Cbe();Tbe();Obe();Fbe();Pbe();H={CardContainer:Lge,ExpandableContainer:vbe,CategoryContainer:Wge,Card:z5,CardAvatar:fd,CardLabel:Nge,Toolbar:{Index:Dbe,Item:Rbe,Separator:Abe},BarSeparator:fbe,ItemsSeparator:wbe,Itemsbar:q5,Controlsbar:$ge,ControlsbarContainer:tbe,ResponsiveTabWrapper:FT,Slider:ybe,TabWrapper:N_,Tab:Ql,Other:{ControlsWrapper:Yge,EmptyDiv:Qge}}});var qf,MXe,Mbe,Bbe=m(()=>{qf=v(C("react"));j();Zt();xt();MXe=({config:r,active:e})=>{let{tools:t}=r,i=e.tool,o=a=>{let l=r.state.config[a];if("icon"in l){let u=l.icon;return qf.default.createElement(u,null)}let c=tS[a];return qf.default.createElement(c,null)||null},n=a=>r.locale[a].title,s=(a,l)=>a&&qf.default.createElement(H.Toolbar.Item,{onClick:()=>e.selectTool(a),key:a,label:n(a),isActive:i===a},o(a))||qf.default.createElement(H.Toolbar.Separator,{key:a+l,active:!!i});return qf.default.createElement(H.Toolbar.Index,{show:!!i},t.map(s))},Mbe=fe("config","active")(O(MXe))});var Zo,BXe,Lbe,zbe=m(()=>{Zo=v(C("react"));j();V();pe();Zt();xt();BXe=({adjustmentsTool:r,custom:e})=>{let t=r.selectedAdjustmentType.toLowerCase(),i=r[t],o=(0,Zo.useRef)(!1),n=(0,Zo.useRef)(i),s=e.getButton("toolControlBarSecondaryButton"),a=l=>{o.current&&l!==n.current&&(r.toolSnapshot(),o.current=!1,n.current=l)};return Zo.default.createElement(H.ControlsbarContainer,{show:Boolean(t)},Zo.default.createElement(s,{tool:w.ADJUSTMENT,ariaLabel:r.locale.controls.buttonReset,onClick:r.reset,icon:Zo.default.createElement(ar.reset,null),label:r.locale.controls.buttonReset}),Zo.default.createElement(H.Other.ControlsWrapper,null,Zo.default.createElement(z.Spacer,{count:2}),Zo.default.createElement(H.Slider,{"aria-hidden":!t,adjust:!0,style:{width:"280px"},label:r.selectedOptionLabel,value:i,onChange:l=>{r.editAdjustments({type:t,value:l}),o.current=i!==l},onMouseUp:a,onTouchEnd:a,snap:0}),Zo.default.createElement(z.Spacer,{count:2}),Zo.default.createElement(H.BarSeparator,null)),Zo.default.createElement(H.Other.EmptyDiv,null))},Lbe=fe("adjustmentsTool","custom")(O(BXe))});var G_,Ube,Nbe=m(()=>{G_=v(C("react"));j();V();xr();pe();ie();Ube=O(()=>{let{brushTool:r}=P(),{colorList:e,locale:t,localeColor:i}=r,o=t.controls,n=i.colorPicker;return G_.default.createElement(G_.default.Fragment,null,G_.default.createElement(z.Input.Selection,{showLabel:!1,label:o.selectColor},G_.default.createElement(rr,{tool:w.BRUSH,activeColor:r.color,colors:e,labelsColor:n,colorPickerDirection:"top",onChange:r.changeColor})))})});var qbe=m(()=>{Nbe()});var Hbe,jbe,Wbe=m(()=>{Hbe=v(C("react"));j();ie();Y();xt();jbe=O(()=>{let{brushTool:r}=P(),{locale:e}=r,t=e.controls;return Hbe.default.createElement(H.Slider,{"data-test":X.BrushHardness,style:{width:"280px"},showLabel:!1,label:t.sliderHardness,value:r.hardness,min:0,max:1,onChange:r.changeHardness})})});var Gbe=m(()=>{Wbe()});var Vbe,$be,Kbe=m(()=>{Vbe=v(C("react"));j();ie();Y();xt();$be=O(()=>{let{brushTool:r}=P(),{locale:e}=r,t=e.controls;return Vbe.default.createElement(H.Slider,{"data-test":X.BrushSize,style:{width:"280px"},showLabel:!1,label:t.sliderSize,value:r.relativeSize,min:1,max:100,divider:1,onChange:r.changeRelativeSize})})});var Xbe=m(()=>{Kbe()});var Qo,LXe,W5,Ybe,Jbe=m(()=>{Qo=v(C("react"));j();V();pe();ie();Zt();xt();qbe();Gbe();Xbe();LXe=H.TabWrapper,{Tab:W5}=H,Ybe=O(()=>{let{brushTool:r,custom:e}=P(),{locale:t,config:i}=r,{basicUIToolControlBarTabsOrder:o}=i,n=t.controls,s=e.getButton("toolControlBarSecondaryButton"),a=l=>{switch(l){case Us.BrushColor:return Qo.default.createElement(W5,{key:l,label:n.tabColor},Qo.default.createElement(Ube,null));case Us.BrushSize:return Qo.default.createElement(W5,{key:l,label:n.tabSize},Qo.default.createElement($be,null));case Us.BrushHardness:return Qo.default.createElement(W5,{key:l,label:n.tabHardness},Qo.default.createElement(jbe,null));default:return null}};return Qo.default.createElement(H.ControlsbarContainer,{style:{justifyContent:"center"},show:!0},Qo.default.createElement(s,{tool:w.BRUSH,ariaLabel:n.buttonReset,onClick:r.reset,icon:Qo.default.createElement(ar.reset,null),isDisabled:!r.isDirty,label:n.buttonReset}),Qo.default.createElement(H.Other.ControlsWrapper,null,Qo.default.createElement(z.Input.Form,null,Qo.default.createElement(LXe,null,o.map(l=>a(l))))))})});var Hf,Zbe,Qbe=m(()=>{Hf=v(C("react"));j();pe();ie();xt();Zbe=O(()=>{let{filterTool:r}=P(),{state:e}=r,t=r.locale.controls,i=()=>{r.toolSnapshot()};return Hf.default.createElement(H.Other.ControlsWrapper,null,Hf.default.createElement(z.Spacer,{count:2}),Hf.default.createElement(H.Slider,{"aria-hidden":!r.isOptionSelected,style:{width:"280px"},label:t.sliderIntensity,value:e.intensity,min:0,max:1,onMouseUp:i,onTouchEnd:i,onChange:r.changeIntensity,snap:e.isDuotone?.5:null}),Hf.default.createElement(z.Spacer,{count:2}),Hf.default.createElement(H.BarSeparator,null))})});var eye=m(()=>{Qbe()});var jf,tye,rye=m(()=>{jf=v(C("react"));j();V();ie();Zt();xt();eye();tye=O(()=>{let{filterTool:r,custom:e}=P(),{config:t}=r,{basicUIToolControlBarTabsOrder:i}=t,o=e.getButton("toolControlBarSecondaryButton"),n=s=>{switch(s){case Km.FilterIntensity:return jf.default.createElement(Zbe,{key:s});default:return null}};return jf.default.createElement(H.ControlsbarContainer,{show:r.isOptionSelected},jf.default.createElement(o,{tool:w.FILTER,ariaLabel:r.locale.controls.buttonReset,onClick:r.reset,icon:jf.default.createElement(ar.reset,null),label:r.locale.controls.buttonReset}),i.map(s=>n(s)),jf.default.createElement(H.Other.EmptyDiv,null))})});var Ca,iye,oye=m(()=>{Ca=v(C("react"));j();V();pe();ie();Zt();xt();iye=O(()=>{let{focusTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.toolSnapshot(t.sliderIntensity)};return Ca.default.createElement(H.ControlsbarContainer,{show:r.isOptionSelected},Ca.default.createElement(i,{tool:w.FOCUS,ariaLabel:t.buttonReset,onClick:r.reset,icon:Ca.default.createElement(ar.reset,null),label:t.buttonReset}),Ca.default.createElement(H.Other.ControlsWrapper,null,Ca.default.createElement(z.Spacer,{count:2}),Ca.default.createElement(H.Slider,{"aria-hidden":!r.isOptionSelected,style:{width:"280px"},label:t.sliderIntensity,value:r.relativeIntensity,min:0,max:100,divider:1,onChange:r.changeRelativeIntensity,onMouseUp:o,onTouchEnd:o}),Ca.default.createElement(z.Spacer,{count:2}),Ca.default.createElement(H.BarSeparator,null)),Ca.default.createElement(H.Other.EmptyDiv,null))})});var G5,nye,sye=m(()=>{G5=v(C("react"));j();V();xr();pe();ie();nye=O(()=>{let{frameTool:r}=P(),e=r.locale.controls,t=r.localeColor.colorPicker,{colorList:i}=r;return G5.default.createElement(z.Input.Selection,{label:e.selectColor,showLabel:!1},G5.default.createElement(rr,{tool:w.FRAME,activeColor:r.color,colors:i,labelsColor:t,colorPickerDirection:"top",onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))})});var aye=m(()=>{sye()});var lye,cye,uye=m(()=>{lye=v(C("react"));j();ie();xt();cye=O(()=>{let{frameTool:r}=P(),e=r.locale.controls,t=()=>{r.toolSnapshot(e.sliderOpacity)};return lye.default.createElement(H.Slider,{"aria-hidden":!r.isOptionSelected,showLabel:!1,style:{width:"280px"},label:e.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:t,onTouchEnd:t})})});var dye=m(()=>{uye()});var pye,mye,hye=m(()=>{pye=v(C("react"));j();ie();xt();mye=O(()=>{let{frameTool:r}=P(),e=r.locale.controls,t=()=>{r.toolSnapshot(e.sliderSize)};return pye.default.createElement(H.Slider,{"aria-hidden":!r.isOptionSelected,showLabel:!1,style:{width:"280px"},label:e.sliderSize,value:r.size,min:r.minSize,max:r.maxSize,divider:1,onChange:r.changeWidth,onMouseUp:t,onTouchEnd:t})})});var fye=m(()=>{hye()});var Ui,zXe,V5,gye,bye=m(()=>{Ui=v(C("react"));j();V();pe();ie();Zt();xt();aye();dye();fye();zXe=H.TabWrapper,{Tab:V5}=H,gye=O(()=>{let{frameTool:r,custom:e}=P(),t=r.locale.controls,{tintable:i,config:o}=r,{basicUIToolControlBarTabsOrder:n}=o,s=e.getButton("toolControlBarSecondaryButton"),a=l=>{switch(l){case zs.FrameOpacity:return Ui.default.createElement(V5,{key:l,label:t.tabOpacity},Ui.default.createElement(cye,null));case zs.FrameSize:return Ui.default.createElement(V5,{key:l,label:t.tabSize},Ui.default.createElement(mye,null));case zs.FrameColor:return i&&Ui.default.createElement(V5,{key:l,label:t.tabColor},Ui.default.createElement(nye,null));default:return null}};return Ui.default.createElement(H.ControlsbarContainer,{show:r.isOptionSelected},Ui.default.createElement(s,{tool:w.FRAME,ariaLabel:t.buttonReset,onClick:r.reset,icon:Ui.default.createElement(ar.reset,null),label:t.buttonReset}),Ui.default.createElement(H.Other.ControlsWrapper,null,Ui.default.createElement(z.Spacer,null),Ui.default.createElement(zXe,null,n.map(l=>a(l))),Ui.default.createElement(H.BarSeparator,null)),Ui.default.createElement(H.Other.EmptyDiv,null))})});var Sa,zT,UXe,NXe,yye,_ye=m(()=>{Sa=v(C("react"));j();zT=v(C("styled-components"));V();pe();Zt();Y();O5();xt();UXe=(0,zT.default)(H.ControlsbarContainer)`
  ${r=>r.firstChildMargin&&zT.css`
      > :first-child {
        margin-right: 16px;
      }
    `}
`,NXe=({library:r,active:e,custom:t})=>{let i=r.locale.controls.placeholderSearch,{config:o}=r,n=t.getButton("toolControlBarPrimaryButton"),s=u=>{r.fetchImages(u)},a=u=>{let{files:d}=u.target;if(d.length){let p=new FileReader;p.onload=h=>{e.newImage(h.target.result)},p.readAsDataURL(d[0])}},l=()=>{e.selectWebcam(!0)},c=()=>{let u=document.getElementById("fileUpload");u&&u.click()};return Sa.default.createElement(UXe,{firstChildMargin:o.enableWebcam&&!r.libraryProvider,show:!0},o.enableUpload&&Sa.default.createElement(n,{tool:w.LIBRARY,"data-test":X.LibraryUploadButton,ariaLabel:r.locale.controls.buttonUpload,onClick:c,icon:Sa.default.createElement(ar.uploadImage,null),label:r.locale.controls.buttonUpload},Sa.default.createElement(z.Input.File,{onChange:a})),r.libraryProvider&&Sa.default.createElement(H.Other.ControlsWrapper,null,Sa.default.createElement(z.Input.Search,{onChange:s,placeholder:i})),o.enableWebcam&&Sa.default.createElement(TT,{tool:w.LIBRARY,onClick:l,icon:Sa.default.createElement(ar.openWebcam,null),label:r.locale.controls.buttonWebcamOpen}),Sa.default.createElement(H.BarSeparator,null))},yye=fe("library","active","custom")(O(NXe))});var vye,xye,Cye=m(()=>{vye=v(C("react"));j();pe();ie();xye=O(()=>{let{overlayTool:r}=P(),e=r.locale.controls,{blendMode:t,allBlendModes:i}=r,o=n=>{r.changeBlendMode(n)};return vye.default.createElement(z.Input.CarouselSlider,{showLabel:!1,label:e.carouselBlendMode,defaultIdentifier:t,onSelect:o,list:i})})});var Sye=m(()=>{Cye()});var wye,Tye,kye=m(()=>{wye=v(C("react"));j();ie();xt();Tye=O(()=>{let{overlayTool:r}=P(),e=r.locale.controls,{state:t}=r,i=()=>{r.toolSnapshot()};return wye.default.createElement(H.Slider,{"aria-hidden":!r.isOptionSelected,showLabel:!1,style:{width:"280px"},label:e.sliderOpacity,value:t.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:i,onTouchEnd:i})})});var Eye=m(()=>{kye()});var en,qXe,Iye,Dye,Oye=m(()=>{en=v(C("react"));j();V();pe();ie();Zt();xt();Sye();Eye();qXe=H.TabWrapper,{Tab:Iye}=H,Dye=O(()=>{let{overlayTool:r,custom:e}=P(),{config:t}=r,{basicUIToolControlBarTabsOrder:i}=t,o=r.locale.controls,n=e.getButton("toolControlBarSecondaryButton"),s=a=>{switch(a){case Cc.OverlayBlendMode:return en.default.createElement(Iye,{key:a,label:o.tabBlendMode},en.default.createElement(xye,null));case Cc.OverlayOpacity:return en.default.createElement(Iye,{key:a,label:o.tabOpacity},en.default.createElement(Tye,null));default:return null}};return en.default.createElement(H.ControlsbarContainer,{show:r.isOptionSelected},en.default.createElement(n,{tool:w.OVERLAY,ariaLabel:o.buttonReset,onClick:r.reset,icon:en.default.createElement(ar.reset,null),label:o.buttonReset}),en.default.createElement(H.Other.ControlsWrapper,null,en.default.createElement(z.Spacer,null),en.default.createElement(qXe,null,i.map(a=>s(a))),en.default.createElement(H.BarSeparator,null)),en.default.createElement(H.Other.EmptyDiv,null))})});var V_,Rye,Fye=m(()=>{V_=v(C("react"));j();V();xr();pe();ie();Rye=O(()=>{let{stickerTool:r}=P(),e=r.locale.controls,t=r.localeColor.colorPicker,{colorList:i}=r;return V_.default.createElement(V_.default.Fragment,null,V_.default.createElement(z.Input.Selection,{isDisabled:!r.isStickerSelected,showLabel:!1,label:e.selectColor},V_.default.createElement(rr,{tool:w.STICKER,activeSprite:r.id,activeColor:r.tintColor,colors:i,labelsColor:t,isDisabled:!r.isStickerSelected,colorPickerDirection:"top",onChange:r.changeTintColor,onAddSnapshot:r.tintColorSnapshot})))})});var Aye=m(()=>{Fye()});var Pye,Mye,Bye=m(()=>{Pye=v(C("react"));j();ie();xt();Mye=O(()=>{let{stickerTool:r}=P(),e=r.locale.controls,t=()=>{r.toolSnapshot()};return Pye.default.createElement(H.Slider,{isDisabled:!r.isStickerSelected,showLabel:!1,style:{width:"280px"},label:e.sliderOpacity,value:r.opacity,min:0,max:1,onMouseUp:t,onTouchEnd:t,onChange:r.changeOpacity})})});var Lye=m(()=>{Bye()});var tn,zye,HXe,Uye,jXe,Nye,qye=m(()=>{tn=v(C("react"));j();zye=v(C("styled-components"));V();pe();ie();Zt();xt();Aye();Lye();HXe=H.TabWrapper,{Tab:Uye}=H,jXe=zye.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${YC.VisuallyHidden}
`,Nye=O(()=>{let{stickerTool:r,custom:e}=P(),{config:t}=r,{basicUIToolControlBarTabsOrder:i}=t,o=r.locale.controls,n=e.getButton("toolControlBarPrimaryButton"),s=()=>{let u=document.getElementById("fileUpload");u&&(u.value=null,u.click())},a=u=>{let{files:d}=u.target;r.addFiles(d)},l=u=>{switch(u){case Sc.StickerColor:return r.tintable?tn.default.createElement(Uye,{key:u,label:o.tabColor},tn.default.createElement(Rye,null)):null;case Sc.StickerOpacity:return tn.default.createElement(Uye,{key:u,label:o.tabOpacity},tn.default.createElement(Mye,null));default:return null}},c=()=>r.isCustomStickerEnabled?tn.default.createElement(n,{tool:w.STICKER,ariaLabel:o.buttonUpload,onClick:s,icon:tn.default.createElement(ar.uploadImage,null),label:o.buttonUpload},tn.default.createElement(jXe,{onChange:a})):null;return tn.default.createElement(H.ControlsbarContainer,{show:!0},c(),tn.default.createElement(H.Other.ControlsWrapper,null,tn.default.createElement(HXe,null,i.map(u=>l(u))),tn.default.createElement(H.BarSeparator,null)),tn.default.createElement(H.Other.EmptyDiv,null))})});var $5,Hye,jye=m(()=>{$5=v(C("react"));j();V();xr();pe();ie();Hye=O(()=>{let{textTool:r}=P(),{backgroundColorList:e}=r,t=r.locale.controls,i=r.localeColor.colorPicker;return $5.default.createElement(z.Input.Selection,{isDisabled:!r.isTextSelected,showLabel:!1,label:t.selectBackgroundColor},$5.default.createElement(rr,{tool:w.TEXT,activeSprite:r.id,activeColor:r.backgroundColor,colors:e,labelsColor:i,colorPickerDirection:"top",isDisabled:!r.isTextSelected,onChange:r.changeBackgroundColor,onAddSnapshot:r.backgroundColorSnapshot}))})});var Wye=m(()=>{jye()});var Gye,Vye,WXe,$ye,Kye=m(()=>{Gye=v(C("react"));j();Vye=v(C("styled-components"));pe();ie();WXe=(0,Vye.default)(z.Input.NumericInput)`
  max-width: 55px;
  > div > input {
    text-align: center;
  }
`,$ye=O(()=>{let{textTool:r}=P(),e=t=>{let i=t?parseFloat(t):0;r.setFontSize(Math.max(10,Math.min(690,i)))};return Gye.default.createElement(WXe,{value:r.fontSize.toFixed(0),onSubmit:e,isDisabled:!r.isTextSelected})})});var Xye=m(()=>{Kye()});var Yye,Jye,Zye=m(()=>{Yye=v(C("react"));j();ie();xt();Jye=O(()=>{let{textTool:r}=P(),e=r.locale.controls,t=()=>{r.toolSnapshot()};return Yye.default.createElement(H.Slider,{isDisabled:!r.isTextSelected,showLabel:!1,label:e.sliderLineSpacing,value:r.lineHeight,min:.5,max:3,onChange:r.changeLineHeight,onMouseUp:t,onTouchEnd:t,snap:1,divider:1,decimal:1})})});var Qye=m(()=>{Zye()});var UT,e_e,t_e=m(()=>{UT=v(C("react"));j();pe();ie();Zt();Y();e_e=O(()=>{let{textTool:r,custom:e}=P(),t=r.locale.controls,i=["left","center","right"],o=e.getButton("textAlignment");return UT.default.createElement(z.Input.Selection,{isDisabled:!r.isTextSelected,showLabel:!1,label:t.selectAlignment,"data-test":X.TextAlignment},i.map(n=>{let s=rS[n];return UT.default.createElement(o,{tool:n,isDisabled:!r.isTextSelected,ariaLabel:`Align ${n}`,isActive:n===r.alignment,key:n,icon:UT.default.createElement(s,null),onClick:()=>r.changeAlignment(n)})}))})});var r_e=m(()=>{t_e()});var K5,i_e,o_e=m(()=>{K5=v(C("react"));j();V();xr();pe();ie();i_e=O(()=>{let{textTool:r}=P(),{colorList:e}=r,t=r.locale.controls,i=r.localeColor.colorPicker;return K5.default.createElement(z.Input.Selection,{isDisabled:!r.isTextSelected,showLabel:!1,label:t.selectFontColor},K5.default.createElement(rr,{tool:w.TEXT,activeSprite:r.id,activeColor:r.textColor,colors:e,labelsColor:i,colorPickerDirection:"top",isDisabled:!r.isTextSelected,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))})});var n_e=m(()=>{o_e()});var qr,GXe,s_e,a_e=m(()=>{qr=v(C("react"));j();V();pe();ie();Zt();xt();RT();Wye();Xye();Qye();r_e();n_e();GXe=H.ResponsiveTabWrapper,s_e=O(()=>{let{textTool:r,custom:e}=P(),{config:t}=r,{basicUIToolControlBarTabsOrder:i}=t,o=r.locale.controls,n=e.getButton("toolControlBarPrimaryButton"),s=a=>{switch(a){case Ji.FontSize:return qr.default.createElement(Ql,{key:a,label:o.tabFontSize},qr.default.createElement($ye,null));case Ji.TextAligment:return qr.default.createElement(Ql,{key:a,label:o.tabAlignment},qr.default.createElement(e_e,null));case Ji.TextColor:return qr.default.createElement(Ql,{key:a,label:o.tabColor},qr.default.createElement(i_e,null));case Ji.BackgroundColor:return qr.default.createElement(Ql,{key:a,label:o.tabBgColor},qr.default.createElement(Hye,null));case Ji.LineSpacing:return qr.default.createElement(Ql,{key:a,label:o.tabLineHeight},qr.default.createElement(Jye,null));default:return null}};return qr.default.createElement(H.ControlsbarContainer,{show:!0},qr.default.createElement(n,{tool:w.TEXT,ariaLabel:o.buttonNew,onClick:r.add,icon:qr.default.createElement(ar.addText,null),label:o.buttonNew}),qr.default.createElement(H.Other.ControlsWrapper,null,qr.default.createElement(z.Spacer,null),qr.default.createElement(GXe,null,i.map(a=>s(a))),qr.default.createElement(H.BarSeparator,null)),qr.default.createElement(H.Other.EmptyDiv,null))})});var wa,VXe,l_e,c_e=m(()=>{wa=v(C("react"));j();V();xr();pe();Zt();xt();VXe=({textDesignTool:r,custom:e})=>{let t=r.locale.controls,i=r.localeColor.colorPicker,{colorList:o}=r,n=e.getButton("toolControlBarSecondaryButton"),s=e.getButton("toolControlBarPrimaryButton");return wa.default.createElement(H.ControlsbarContainer,{show:!0},wa.default.createElement(s,{tool:w.TEXT_DESIGN,ariaLabel:t.buttonNew,onClick:r.add,icon:wa.default.createElement(ar.addText,null),label:t.buttonNew}),wa.default.createElement(H.Other.ControlsWrapper,null,wa.default.createElement(z.Input.Selection,{isDisabled:!r.isTextDesignSelected,label:t.selectColor},wa.default.createElement(rr,{tool:w.TEXT_DESIGN,activeSprite:r.id,activeColor:r.color,colors:o,labelsColor:i,colorPickerDirection:"top",isDisabled:!r.isTextDesignSelected,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))),wa.default.createElement(n,{tool:w.TEXT_DESIGN,ariaLabel:t.buttonShuffle,onClick:r.changeSeed,icon:wa.default.createElement(ar.shuffle,null),label:t.buttonShuffle}),wa.default.createElement(H.BarSeparator,null))},l_e=fe("textDesignTool","custom")(O(VXe))});var u_e,d_e,p_e=m(()=>{u_e=v(C("react"));j();xr();ie();d_e=O(()=>{let{transformTool:r}=P(),e=r.locale.controls,{forceDimensions:t}=r;return u_e.default.createElement(h_,{isDisabled:t,showLabel:!1,valueHeight:r.localOutputHeight,valueWidth:r.localOutputWidth,onSubmitWidth:r.onPixelWidth,onSubmitHeight:r.onPixelHeight,label:e.inputCropSize,labelHeight:e.inputHeight,labelWidth:e.inputWidth})})});var m_e=m(()=>{p_e()});var h_e,f_e,g_e=m(()=>{h_e=v(C("react"));xr();f_e=()=>h_e.default.createElement(p_,null)});var b_e=m(()=>{g_e()});var y_e,__e,v_e=m(()=>{y_e=v(C("react"));j();V();ie();__e=O(()=>{let{transformTool:r,custom:e}=P(),t=r.locale.controls,{forceDimensions:i}=r,o=e.getCheckbox();return y_e.default.createElement(o,{tool:w.TRANSFORM,isDisabled:i,style:{paddingTop:"5px",justifyContent:"center"},value:r.lockResolution,checkMarkPosition:"left",label:t.checkboxKeepResolution,onClick:r.changeLockResolution})})});var x_e=m(()=>{v_e()});var Ni,$Xe,X5,C_e,S_e=m(()=>{Ni=v(C("react"));j();V();pe();ie();Zt();xt();m_e();b_e();x_e();$Xe=H.ResponsiveTabWrapper,{Tab:X5}=H,C_e=O(()=>{let{transformTool:r,custom:e}=P(),{config:t}=r,{basicUIToolControlBarTabsOrder:i}=t,o=r.locale.controls,n=e.getButton("toolControlBarSecondaryButton"),s=a=>{switch(a){case Ns.FlipRotate:return Ni.default.createElement(X5,{key:a,label:o.tabFlipAndRotate},Ni.default.createElement(f_e,null));case Ns.Resolution:return Ni.default.createElement(X5,{key:a,label:o.tabResolution},Ni.default.createElement(__e,null));case Ns.CropSize:return Ni.default.createElement(X5,{key:a,label:o.tabCropSize},Ni.default.createElement(d_e,null));default:return null}};return Ni.default.createElement(H.ControlsbarContainer,{show:!0},Ni.default.createElement(n,{tool:w.TRANSFORM,ariaLabel:r.locale.controls.buttonReset,onClick:r.reset,icon:Ni.default.createElement(ar.reset,null),label:r.locale.controls.buttonReset}),Ni.default.createElement(H.Other.ControlsWrapper,null,Ni.default.createElement(z.Spacer,null),Ni.default.createElement($Xe,null,i.map(a=>s(a))),Ni.default.createElement(H.BarSeparator,null)),Ni.default.createElement(H.Other.EmptyDiv,null))})});var $t,$_,w_e=m(()=>{$t=v(C("react"));j();V();pe();xt();zbe();Jbe();rye();oye();bye();_ye();Oye();qye();a_e();c_e();S_e();$_=class extends $t.default.Component{render(){let{active:e}=this.props,t=e.tool;return $t.default.createElement(H.Controlsbar,{show:!!t},$t.default.createElement(z.Switch.Index,{type:t},$t.default.createElement(z.Switch.Case,{value:w.FILTER},$t.default.createElement(tye,null)),$t.default.createElement(z.Switch.Case,{value:w.FOCUS},$t.default.createElement(iye,null)),$t.default.createElement(z.Switch.Case,{value:w.ADJUSTMENT},$t.default.createElement(Lbe,null)),$t.default.createElement(z.Switch.Case,{value:w.OVERLAY},$t.default.createElement(Dye,null)),$t.default.createElement(z.Switch.Case,{value:w.STICKER},$t.default.createElement(Nye,null)),$t.default.createElement(z.Switch.Case,{value:w.TEXT},$t.default.createElement(s_e,null)),$t.default.createElement(z.Switch.Case,{value:w.TEXT_DESIGN},$t.default.createElement(l_e,null)),$t.default.createElement(z.Switch.Case,{value:w.LIBRARY},$t.default.createElement(yye,null)),$t.default.createElement(z.Switch.Case,{value:w.FRAME},$t.default.createElement(gye,null)),$t.default.createElement(z.Switch.Case,{value:w.BRUSH},$t.default.createElement(Ybe,null)),$t.default.createElement(z.Switch.Case,{value:w.TRANSFORM},$t.default.createElement(C_e,null))))}};$_=g([fe("active","config"),O],$_)});var Wf,T_e,KXe,XXe,k_e,E_e=m(()=>{Wf=v(C("react"));j();T_e=v(C("styled-components"));V();Zt();Y();xt();KXe=T_e.default.div`
  position: relative;
  top: -8px;
  color: ${r=>r.theme.card.foreground};
`,XXe=({adjustmentsTool:r})=>{let e=(t,i)=>{let o=Kee[t.identifier];return Wf.default.createElement(H.Card,{"data-test":t.identifier,tool:w.ADJUSTMENT,type:Le.MEDIUM,onClick:()=>r.toggleOptionSelection(t.identifier),isActive:t.identifier===r.selectedAdjustmentType,key:`${t.identifier}-${i}`,label:t.name,style:{animationDelay:`${Qe(i)}s`}},Wf.default.createElement(KXe,null,Wf.default.createElement(o,null)),Wf.default.createElement(H.CardLabel,null,r.locale.items[t.identifier]||t.name))};return Wf.default.createElement(H.CardContainer,null,r.items.map(e))},k_e=fe("adjustmentsTool")(O(XXe))});var I_e,D_e,O_e=m(()=>{I_e=v(C("react"));V();ie();D_e=()=>{let{config:r}=P(),e=r.state.config[w.CUSTOM].toolControlBar;return I_e.default.createElement(e,{language:r.state.locale[w.CUSTOM]})}});var R_e=m(()=>{O_e()});var Ta,K_,F_e=m(()=>{Ta=v(C("react"));j();V();Y();xt();K_=class extends Ta.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{let{filterTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{let{filterTool:i}=this.props;return Ta.default.createElement(H.Card,{tool:w.FILTER,type:Le.MEDIUM,onClick:()=>i.selectFilter(e.identifier,e.defaultIntensity),isActive:i.identifier===e.identifier,key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Qe(t)}s`}},Ta.default.createElement(H.CardLabel,{withBackground:!0},i.locale.categories[e.identifier]||i.locale.items[e.identifier]||e.name))};this.renderCategory=(e,t)=>{let{filterTool:i}=this.props,{selectedCategoryIdentifier:o}=i,n=o===e.identifier;return e.items?Ta.default.createElement(H.CategoryContainer,{key:e.identifier},Ta.default.createElement(H.Card,{tool:w.FILTER,type:Le.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Qe(t)}s`}},Ta.default.createElement(H.CardLabel,{withBackground:!0},e.name)),Ta.default.createElement(H.ExpandableContainer,{show:n},e.items.map(this.renderItem))):null}}render(){let{filterTool:e}=this.props,{categories:t,config:i,items:o}=e;return i.flattenCategories?Ta.default.createElement(H.CardContainer,null,o.map(this.renderItem)):Ta.default.createElement(H.CardContainer,null,t.map(this.renderCategory))}};K_=g([fe("filterTool","active"),O],K_)});var NT,YXe,A_e,P_e=m(()=>{NT=v(C("react"));j();V();Y();xt();YXe=({focusTool:r})=>{let e=i=>{r.selectFocus(i)},t=(i,o)=>NT.default.createElement(H.Card,{isActive:i.identifier===r.identifier,tool:w.FOCUS,type:Le.MEDIUM,onClick:()=>e(i.identifier),key:`${i.identifier}-${o}`,image:i.thumbnailURI,label:i.name,style:{animationDelay:`${Qe(o)}s`}},NT.default.createElement(H.CardLabel,{withBackground:!0},r.locale.items[i.identifier]||i.name));return NT.default.createElement(H.CardContainer,null,r.items.map(t))},A_e=fe("focusTool")(O(YXe))});var qT,JXe,M_e,B_e=m(()=>{qT=v(C("react"));j();V();Y();xt();JXe=({frameTool:r})=>{let e=r.identifier,t=(i,o)=>qT.default.createElement(H.Card,{tool:w.FRAME,type:Le.MEDIUM,onClick:()=>r.selectFrame(i.identifier),isActive:i.identifier===e,key:`${i.identifier}-${o}`,image:i.thumbnailURI,label:i.name,style:{animationDelay:`${Qe(o)}s`,backgroundSize:"60%"}}," ",qT.default.createElement(H.CardLabel,{hidden:!0},r.locale.items[i.identifier]||i.name));return qT.default.createElement(H.CardContainer,null,r.items.map(t))},M_e=fe("frameTool")(O(JXe))});var L_e,z_e,U_e=m(()=>{L_e=v(C("styled-components")),z_e=L_e.default.p`
  height: ${r=>r.theme.measurements.basicToolControlBar.itemsBarHeight}px;
`});var N_e=m(()=>{U_e()});var hs,X_,q_e=m(()=>{hs=v(C("react"));j();V();Y();xt();N_e();X_=class extends hs.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{let{library:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{let{active:i}=this.props;return hs.default.createElement(H.Card,{tool:w.LIBRARY,type:Le.MEDIUM,onClick:()=>i.newImage(e.rawUrl),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Qe(t)}s`}})};this.renderCategory=(e,t)=>{let{library:i}=this.props,{selectedCategoryIdentifier:o}=i,n=o===e.identifier;return e.items?hs.default.createElement(H.CategoryContainer,{key:e.identifier},hs.default.createElement(H.Card,{tool:w.LIBRARY,type:Le.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Qe(t)}s`}},hs.default.createElement(H.CardLabel,{withBackground:!0},e.name)),hs.default.createElement(H.ExpandableContainer,{show:n},e.items.map(this.renderItem))):null}}render(){let{library:e}=this.props,{query:t,categories:i,items:o,locale:n,config:s}=e;return t?o.length?hs.default.createElement(H.CardContainer,null,o.map(this.renderItem)):hs.default.createElement(z_e,{"data-test":X.NoResult},n.controls.noResults):s.flattenCategories?hs.default.createElement(H.CardContainer,null,o.map(this.renderItem)):hs.default.createElement(H.CardContainer,null,i.map(this.renderCategory))}};X_=g([fe("library","active"),O],X_)});var HT,ZXe,H_e,j_e=m(()=>{HT=v(C("react"));j();V();Y();xt();ZXe=({overlayTool:r})=>{let{identifier:e,items:t,selectOverlay:i,locale:o}=r,n=(s,a)=>HT.default.createElement(H.Card,{tool:w.OVERLAY,type:Le.MEDIUM,onClick:()=>i(s.identifier),isActive:s.identifier===e,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,style:{animationDelay:`${Qe(a)}s`}},HT.default.createElement(H.CardLabel,{withBackground:!0},o.items[s.identifier]||s.name));return HT.default.createElement(H.CardContainer,null,t.map(n))},H_e=fe("overlayTool")(O(ZXe))});var ka,Y_,W_e=m(()=>{ka=v(C("react"));j();V();Y();xt();Y_=class extends ka.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{let{stickerTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{let{stickerTool:i}=this.props;return ka.default.createElement(H.Card,{tool:w.STICKER,type:Le.MEDIUM,onClick:()=>i.add(e.identifier),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{backgroundSize:"55%",animationDelay:`${sC(t)}s`}},ka.default.createElement(H.CardLabel,{hidden:!0},i.locale.items[e.identifier]||e.name))};this.renderCategory=(e,t)=>{let{stickerTool:i}=this.props,{selectedCategoryIdentifier:o,locale:n}=i,s=o===e.identifier;return e.items?ka.default.createElement(H.CategoryContainer,{key:e.identifier},ka.default.createElement(H.Card,{tool:w.STICKER,type:Le.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Qe(t)}s`}},ka.default.createElement(H.CardLabel,{withBackground:!0},n.categories[e.identifier]||e.name)),ka.default.createElement(H.ExpandableContainer,{show:s},e.items.map(this.renderItem))):null}}render(){let{stickerTool:e}=this.props,{categories:t,items:i,config:o}=e;return o.flattenCategories?ka.default.createElement(H.CardContainer,null,i.map(this.renderItem)):ka.default.createElement(H.CardContainer,null,t.map(this.renderCategory))}};Y_=g([fe("stickerTool","active"),O],Y_)});var J_,G_e,QXe,V_e,$_e,K_e=m(()=>{J_=v(C("react"));j();G_e=v(C("styled-components"));V();vt();Y();xt();QXe=G_e.default.div`
  font-size: 20px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: left top;
`,V_e=class extends J_.default.Component{constructor(){super(...arguments);this.getWidth=({fontFamily:e,fontStyle:t,fontWeight:i},o)=>{let s=document.createElement("canvas").getContext("2d");return s.font=`${t} ${i} 20px ${e}`,s.fillText(o,0,0),s.measureText(o).width};this.renderItem=(e,t)=>{let{config:i,textTool:o}=this.props,{fontFamily:n,fontWeight:s,fontStyle:a,identifier:l}=e,c=`${e.fontFamily} ${Be.getDisplayFontStyle(e)}`,u=this.getWidth(e,c),d=(i.measurements.basicCard.medium.width-20)/u;return J_.default.createElement(H.Card,{tool:w.TEXT,type:Le.MEDIUM,onClick:()=>o.changeFont(l),isDisabled:!this.textTool.isTextSelected,isActive:o.identifier===l,key:`${e.identifier}-${t}`,label:c,style:{animationDelay:`${Qe(t)}s`}},J_.default.createElement(QXe,{style:{transform:`scale(${d}) translate(-50%, -50%)`,fontFamily:n,fontStyle:a,fontWeight:s}},c))}}get textTool(){return this.props.textTool}render(){let{textTool:e}=this.props,{fontsLoaded:t,fontFamilies:i}=e;return t?J_.default.createElement(H.CardContainer,null,i.map(this.renderItem)):null}},$_e=fe("textTool","config")(O(V_e))});var jT,eYe,X_e,Y_e=m(()=>{jT=v(C("react"));j();V();Y();xt();eYe=({textDesignTool:r})=>{let{items:e,changeIdentifier:t,isTextDesignSelected:i,identifier:o}=r,n=(s,a)=>jT.default.createElement(H.Card,{tool:w.TEXT_DESIGN,type:Le.MEDIUM,onClick:()=>t(s.identifier),isDisabled:!i,isActive:o===s.identifier,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,style:{animationDelay:`${Qe(a)}s`,backgroundSize:"60%"}},jT.default.createElement(H.CardLabel,{hidden:!0},s.name));return jT.default.createElement(H.CardContainer,null,e.map(n))},X_e=fe("textDesignTool")(O(eYe))});var go,Y5,tYe,rYe,Z_,J_e=m(()=>{go=v(C("react"));j();Y5=v(C("styled-components"));V();Zt();Y();xt();tYe=Y5.default.div`
  svg {
    margin-bottom: 12px;
  }
`,rYe=Y5.default.div`
  svg {
    width: ${r=>r.theme.measurements.basicCard.medium.height}px;
    height: ${r=>r.theme.measurements.basicCard.medium.height}px;
  }

  ${ki} {
    width: ${r=>r.theme.measurements.basicCard.medium.width-32}px;
    height: ${r=>r.theme.measurements.basicCard.medium.height-32}px;
    padding: 6px 0px 24px;
  }
`,Z_=class extends go.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{let{transformTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{let{transformTool:i,config:o}=this.props,{locale:n,identifier:s}=i,a=i.checkIfTransformThumbnailExits(e.thumbnailURI),l=ft.crops[e.identifier]||ft.crops.imgly_transform_common_custom,c=go.default.createElement(H.CardLabel,null,n.items[e.identifier]||e.name),u=a?c:go.default.createElement(rYe,null,go.default.createElement(l,{main:o.theme.transform.crops.main,highlight:o.theme.transform.crops.highlight,shadow:o.theme.transform.crops.shadow}),c);return go.default.createElement(H.Card,{tool:w.TRANSFORM,type:Le.MEDIUM,onClick:()=>i.changeIdentifier(e.identifier,!0),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,isActive:e.identifier===s,style:{backgroundSize:"55%",animationDelay:`${Qe(t)}s`}},u)};this.renderCategory=(e,t)=>{let{transformTool:i}=this.props,{selectedCategoryIdentifier:o,locale:n}=i,s=o===e.identifier;if(!e.items)return null;let a=i.checkIfTransformThumbnailExits(e.thumbnailURI),l=go.default.createElement(H.CardLabel,null,n.categories[e.identifier]||e.name),c=a?l:go.default.createElement(tYe,null,ft.categories[e.identifier]&&go.default.createElement(ft.categories[e.identifier]),l);return go.default.createElement(H.CategoryContainer,{key:e.identifier},go.default.createElement(H.Card,{tool:w.TRANSFORM,type:Le.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:a?e.thumbnailURI:"",label:e.name,style:{animationDelay:`${Qe(t)}s`}},c),go.default.createElement(H.ExpandableContainer,{show:s},e.items.map(this.renderItem)))}}render(){let{transformTool:e}=this.props,{categories:t,config:i,items:o}=e;return i.flattenCategories?go.default.createElement(H.CardContainer,null,o.map(this.renderItem)):go.default.createElement(H.CardContainer,null,t.map(this.renderCategory))}};Z_=g([fe("transformTool","config"),O],Z_)});var bo,Q_,Z_e=m(()=>{bo=v(C("react"));j();V();Y();xt();E_e();R_e();F_e();P_e();B_e();q_e();j_e();W_e();K_e();Y_e();J_e();Q_=class extends bo.default.Component{constructor(){super(...arguments);this.getToolItemsComponent=e=>{switch(e){case w.LIBRARY:return bo.default.createElement(X_,null);case w.FILTER:return bo.default.createElement(K_,null);case w.FOCUS:return bo.default.createElement(A_e,null);case w.ADJUSTMENT:return bo.default.createElement(k_e,null);case w.OVERLAY:return bo.default.createElement(H_e,null);case w.STICKER:return bo.default.createElement(Y_,null);case w.TEXT:return bo.default.createElement($_e,null);case w.TEXT_DESIGN:return bo.default.createElement(X_e,null);case w.FRAME:return bo.default.createElement(M_e,null);case w.TRANSFORM:return bo.default.createElement(Z_,null);case w.CUSTOM:return bo.default.createElement(D_e,null);default:return null}}}render(){let{library:e,active:t}=this.props,i=t.tool;return i===w.BRUSH||i===w.LIBRARY&&!e.libraryProvider?null:bo.default.createElement(H.Itemsbar,{"data-test":X.ToolControlBar,show:!!i},this.getToolItemsComponent(i))}};Q_=g([fe("active","library"),O],Q_)});var fs,Q_e,iYe,ev,eve=m(()=>{fs=v(C("react"));j();Q_e=v(C("styled-components"));xr();pe();Y();Bbe();w_e();Z_e();iYe=Q_e.default.div`
  position: absolute;
  width: 100%;
  height: ${r=>r.theme.measurements.basicToolControlBar.maxHeight}px;
  bottom: 0;
  left: 0;
  background: ${r=>r.theme.webcam.backdrop};
  z-index: ${r=>r.theme.measurements.zIndex.disable};
`,ev=class extends fs.default.Component{static getDerivedStateFromError(e){return console.error(e),{hasError:!0}}render(){let{active:e}=this.props;return fs.default.createElement(z.Container,{"data-test":X.EditorContainer},e.isWebcam?fs.default.createElement(iYe,null):null,fs.default.createElement(Of,null),fs.default.createElement(Vc,null,fs.default.createElement(vf,null),fs.default.createElement(If,null),fs.default.createElement($_,null),fs.default.createElement(Q_,null),fs.default.createElement(Mbe,null)))}};ev=g([fe("active"),O],ev)});var tv,tve,J5,rve=m(()=>{tv=v(C("react"));j();tve=v(C("styled-components"));xr();eve();J5=class extends tv.default.Component{componentDidMount(){let{editor:e,storeProps:t}=this.props;this.editor=e,this.storeProps=t;let i=new Df(this.editor.configStore.config.custom.components,{}),o={getDialog:i.getDialog,getButton:i.getButton,getColorItem:i.getColorItem,getCheckbox:i.getCheckbox};this.storeProps.custom=o,this.forceUpdate()}render(){return this.storeProps?tv.default.createElement(sb,T({},this.storeProps),tv.default.createElement(tve.ThemeProvider,{theme:U(T({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},tv.default.createElement(ev,null))):null}}});var ive={};Ht(ive,{default:()=>J5});var ove=m(()=>{rve()});var FYe={};Ht(FYe,{AdjustmentConfiguration:()=>P0,AdjustmentIdentifier:()=>Je,AdjustmentIdentifierKeys:()=>RO,AdvancedAdjustmentControlBarItem:()=>Wn,AdvancedBrushControlBarItem:()=>wi,AdvancedFilterControlBarItem:()=>To,AdvancedFocusControlBarItem:()=>ko,AdvancedFrameControlBarItem:()=>ei,AdvancedLibraryControlBarItem:()=>Xi,AdvancedOverlayControlBarItem:()=>Si,AdvancedStickerControlBarItem:()=>Yi,AdvancedTextControlBarItem:()=>br,AdvancedTextDesignControlBarItem:()=>Zi,AdvancedTransformControlBarItem:()=>Qi,AdvancedUICardLabel:()=>Jt,AdvancedUICategoryCard:()=>DYe,AdvancedUIItemCard:()=>OYe,AdvancedUIToolbarItem:()=>L_,AlignmentMode:()=>F0,BasicBrushControlBarTabs:()=>Us,BasicFilterControlBarTabs:()=>Km,BasicFocusControlBarTabs:()=>B0,BasicFrameControlBarTabs:()=>zs,BasicOverlayControlBarTabs:()=>Cc,BasicStickerControlBarTabs:()=>Sc,BasicTextControlBarTabs:()=>Ji,BasicTransformControlBarTabs:()=>Ns,BlendMode:()=>Ue,BrushConfiguration:()=>$0,CanvasAction:()=>Ve,CanvasBarTextSecondaryButton:()=>JC,CardAvatar:()=>fd,CardType:()=>Le,CategoryHeaderType:()=>hr,Checkbox:()=>TYe,CheckboxBase:()=>kYe,CheckboxCheckMark:()=>IYe,CheckboxInput:()=>EYe,ColorItem:()=>uYe,ColorItemActiveOverlay:()=>hYe,ColorItemBackground:()=>pYe,ColorItemBase:()=>dYe,ColorItemTiledBackground:()=>mYe,Configuration:()=>PK,ContainedPrimaryButton:()=>Ub,Container:()=>lYe,CustomToolConfiguration:()=>qK,Dialog:()=>fYe,DialogBackdrop:()=>yYe,DialogBase:()=>gYe,DialogBody:()=>vYe,DialogContainer:()=>bYe,DialogFooter:()=>xYe,DialogHeader:()=>_Ye,DialogSpinner:()=>CYe,EventEmitter:()=>Eo,ExportConfiguration:()=>TK,ExportFormat:()=>Qr,FilterCategoryIdentifier:()=>Nt,FilterConfiguration:()=>M0,FilterIdentifier:()=>M,FocusConfiguration:()=>L0,FocusIdentifier:()=>Ze,FrameConfiguration:()=>z0,IconButton:()=>el,ImageFormat:()=>Ir,ImageMimeType:()=>Ci,Label:()=>wYe,LibraryCategory:()=>U0,LibraryConfiguration:()=>j0,LibraryImage:()=>N0,LibraryProvider:()=>H0,ModalType:()=>St,OutlinedPrimaryButton:()=>zb,OutlinedSecondaryButton:()=>Oc,OverlayConfiguration:()=>W0,OverlayIdentifier:()=>Fe,PhotoEditorSDKUI:()=>lve,PhotoEditorSDKUIComponent:()=>uve,SearchField:()=>RYe,SerializationExportType:()=>OO,SnappingConfiguration:()=>R0,SpriteActionButton:()=>Gs,StickerConfiguration:()=>G0,TextConfiguration:()=>V0,TextDesignConfiguration:()=>K0,TextPrimaryButton:()=>pd,TextSecondaryButton:()=>Kn,Tool:()=>w,TransformConfiguration:()=>X0,TransformIdentifier:()=>sr,UIEvent:()=>le,WatermarkConfiguration:()=>A0,deepmergeAll:()=>ho,defaultConfig:()=>xu,isDuoToneFilterAsset:()=>Xm,isExistingCategory:()=>bUe,isExistingItem:()=>gUe,isGoogleFontAsset:()=>zO,isLUTFilterAsset:()=>FO,isWebFontAsset:()=>LO,useIsLayoutAdvanced:()=>aYe,useSetImage:()=>sYe});var rL={react:"React","react-dom":"ReactDOM","react-dom/server":"ReactDOMServer","styled-components":"styled"};window.require=r=>{if(Object.hasOwnProperty.call(rL,r)){let e=rL[r];if(Object.hasOwnProperty.call(window,e))return window[e];console.log(`Cannot find umd script for ${r}`)}};"use strict";typeof Promise=="undefined"&&(gL().enable(),self.Promise=yL());typeof window!="undefined"&&vL();Object.assign=SL();J3();Mz();"use strict";EG();DG();var PSr=v(PG()),MSr=v(zG());Ye();var z_=v(C("react"));j();var Ege=v(C("styled-components"));xr();var Wme=v(C("react"));V();var Lme=v(C("react")),zme=v(C("styled-components"));pe();var LKe=(0,zme.default)(Oo)`
  width: ${r=>r.theme.measurements.advancedCard.large.width}px;
  height: ${r=>r.theme.measurements.advancedCard.large.height}px;
  margin-bottom: ${r=>r.theme.measurements.advancedSpacer}px;
  color: ${r=>r.theme.card.foreground};
`,zKe=t=>{var i=t,{isActive:r}=i,e=Hi(i,["isActive"]);return Lme.default.createElement(LKe,T({},e))},Ume=zKe;var Nme=v(C("styled-components"));pe();var qme=(0,Nme.default)(Oo)`
  width: ${r=>r.theme.measurements.advancedCard.medium.width}px;
  height: ${r=>r.theme.measurements.advancedCard.medium.height}px;
  margin-bottom: ${r=>r.theme.measurements.advancedSpacer}px;
  color: ${r=>r.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${r=>r.theme.measurements.advancedSpacer}px;
  }
`;var Hme=v(C("styled-components"));pe();var jme=(0,Hme.default)(Oo)`
  width: ${r=>r.theme.measurements.advancedCard.small.width}px;
  height: ${r=>r.theme.measurements.advancedCard.small.height}px;
  margin-bottom: ${r=>r.theme.measurements.advancedSpacer}px;
  color: ${r=>r.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${r=>r.theme.measurements.advancedSpacer}px;
  }
`;var f_=r=>{let e=r.type===Le.LARGE,t=r.type===Le.SMALL,i=qme;return e?i=Ume:t&&(i=jme),Wme.default.createElement(i,T({},r))};var Gme=v(C("styled-components"));Y();var gT=Gme.default.div.attrs(r=>({"data-test":r["data-test"]||X.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${r=>r.theme.measurements.advancedUIToolControlBar.width-48}px;
`;var Vme=v(C("react")),g_=v(C("styled-components"));Y();var UKe=g_.default.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${r=>r.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${r=>r.theme.measurements.zIndex.toolControlBar};

  background: ${r=>r.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${r=>r.reverse?g_.css`
          border-left: 1px solid ${r.theme.toolControlBar.borderColor};
        `:g_.css`
          border-right: 1px solid ${r.theme.toolControlBar.borderColor};
        `}
`,$me=({reverse:r=!1,children:e})=>Vme.default.createElement(UKe,{"data-test":X.ToolControlBar,reverse:r},e);var Rf=v(C("styled-components"));Y();var Kme=Rf.default.div.attrs(()=>({"data-test":X.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${r=>r.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:r})=>r&&Rf.css`
      opacity: 1;
      visibility: visible;
      ${nr()?Rf.css`
            display: block;
          `:Rf.css`
            display: flex;
          `}
    `}
`;var v_=v(C("react"));function x5(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,n;for(n=0;n<i.length;n++)o=i[n],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function C5(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Yor=v(rhe()),b_=v(C("react")),bT=v(C("react-dom"));var S5={disabled:!1};var ihe=v(C("react")),w5=ihe.default.createContext(null);var y_="unmounted",Lp="exited",zp="entering",Ff="entered",T5="exiting",Yl=function(r){C5(e,r);function e(i,o){var n;n=r.call(this,i,o)||this;var s=o,a=s&&!s.isMounting?i.enter:i.appear,l;return n.appearStatus=null,i.in?a?(l=Lp,n.appearStatus=zp):l=Ff:i.unmountOnExit||i.mountOnEnter?l=y_:l=Lp,n.state={status:l},n.nextCallback=null,n}e.getDerivedStateFromProps=function(o,n){var s=o.in;return s&&n.status===y_?{status:Lp}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(o){var n=null;if(o!==this.props){var s=this.state.status;this.props.in?s!==zp&&s!==Ff&&(n=zp):(s===zp||s===Ff)&&(n=T5)}this.updateStatus(!1,n)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var o=this.props.timeout,n,s,a;return n=s=a=o,o!=null&&typeof o!="number"&&(n=o.exit,s=o.enter,a=o.appear!==void 0?o.appear:s),{exit:n,enter:s,appear:a}},t.updateStatus=function(o,n){o===void 0&&(o=!1),n!==null?(this.cancelNextCallback(),n===zp?this.performEnter(o):this.performExit()):this.props.unmountOnExit&&this.state.status===Lp&&this.setState({status:y_})},t.performEnter=function(o){var n=this,s=this.props.enter,a=this.context?this.context.isMounting:o,l=this.props.nodeRef?[a]:[bT.default.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),p=a?d.appear:d.enter;if(!o&&!s||S5.disabled){this.safeSetState({status:Ff},function(){n.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:zp},function(){n.props.onEntering(c,u),n.onTransitionEnd(p,function(){n.safeSetState({status:Ff},function(){n.props.onEntered(c,u)})})})},t.performExit=function(){var o=this,n=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:bT.default.findDOMNode(this);if(!n||S5.disabled){this.safeSetState({status:Lp},function(){o.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:T5},function(){o.props.onExiting(a),o.onTransitionEnd(s.exit,function(){o.safeSetState({status:Lp},function(){o.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(o,n){n=this.setNextCallback(n),this.setState(o,n)},t.setNextCallback=function(o){var n=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,n.nextCallback=null,o(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},t.onTransitionEnd=function(o,n){this.setNextCallback(n);var s=this.props.nodeRef?this.props.nodeRef.current:bT.default.findDOMNode(this),a=o==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}o!=null&&setTimeout(this.nextCallback,o)},t.render=function(){var o=this.state.status;if(o===y_)return null;var n=this.props,s=n.children,a=n.in,l=n.mountOnEnter,c=n.unmountOnExit,u=n.appear,d=n.enter,p=n.exit,h=n.timeout,f=n.addEndListener,_=n.onEnter,x=n.onEntering,y=n.onEntered,D=n.onExit,E=n.onExiting,F=n.onExited,N=n.nodeRef,R=x5(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return b_.default.createElement(w5.Provider,{value:null},typeof s=="function"?s(o,R):b_.default.cloneElement(b_.default.Children.only(s),R))},e}(b_.default.Component);Yl.contextType=w5;Yl.propTypes={};function Af(){}Yl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Af,onEntering:Af,onEntered:Af,onExit:Af,onExiting:Af,onExited:Af};Yl.UNMOUNTED=y_;Yl.EXITED=Lp;Yl.ENTERING=zp;Yl.ENTERED=Ff;Yl.EXITING=T5;var __=Yl;var ohe=v(C("styled-components"));Y();var HKe=ohe.default.div`
  display: flex;
  flex-direction: column;

  position: relative;
  transition: opacity 500ms ease-in, max-height 400ms ease-in-out;
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};

  /* note: this is important to avoid issues with the animation */
  margin: 0 !important;
  padding: 0 !important;

  > * {
    margin-left: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingRight}px;
    margin-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,nhe=({show:r,children:e})=>{let t=(0,v_.useRef)(null),i={entering:{opacity:0,maxHeight:0,overflow:"hidden"},entered:{opacity:1,maxHeight:"100%",overflow:"visible"},exiting:{opacity:0,maxHeight:0,overflow:"hidden"},exited:{opacity:0,maxHeight:0,overflow:"hidden"}};return v_.default.createElement(__,{nodeRef:t,in:r,timeout:{exit:200},mountOnEnter:!0},o=>v_.default.createElement(HKe,{style:i[o],"data-test":X.ToolControlBarExpandableControls,ref:t},e))};var yT=v(C("styled-components"));pe();Y();var x_=(0,yT.default)($n)`
  position: relative;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>nr()||un()?yT.css`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `:""}
`;x_.defaultProps={direction:"vertical"};var _T=v(C("styled-components")),jKe=_T.default.div`
  position: relative;
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${r=>r.full?_T.css`
            left: -${3*r.theme.measurements.advancedSpacer/2}px;
            width: calc(
              100% + ${3*r.theme.measurements.advancedSpacer}px
            );
          `:`
      left: ${3*r.theme.measurements.advancedSpacer/2}px;
      width: calc(100% - ${3*r.theme.measurements.advancedSpacer}px);
    `}
    border-bottom: 2px solid ${r=>r.theme.toolControlBar.separatorColor};
  }
`,vT=jKe;var she=v(C("styled-components")),WKe=she.default.h2`
  color: ${r=>r.theme.toolControlBar.titleForeground};
  font-size: ${r=>r.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${r=>2*r.theme.measurements.advancedSpacer}px;
  margin-top: 0;
`,xT=WKe;var Jl=v(C("react")),ahe=v(C("styled-components"));pe();Y();var GKe=ahe.default.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`,lhe=({name:r,isFirstCategory:e,isLastCategory:t,children:i})=>Jl.default.createElement(GKe,null,!e&&Jl.default.createElement(z.Spacer,{count:2}),Jl.default.createElement(xT,{"data-test":r},r),Jl.default.createElement(gT,{"data-test":X.CategoryItemsContainer},i),!t&&Jl.default.createElement(Jl.default.Fragment,null,Jl.default.createElement(z.Spacer,{count:2}),Jl.default.createElement(vT,{full:!0})));var che=v(C("styled-components")),VKe=che.default.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${r=>r.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${r=>r.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.headline1.case};
  background: ${r=>r.theme.toolControlBar.background};
  color: ${r=>r.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${r=>r.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
  /* prevent the padding from leaving the width of the parent  */
  box-sizing: border-box;
`,uhe=VKe;var dhe=v(C("react")),phe=v(C("styled-components"));ie();var $Ke=phe.default.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;

  overflow-y: auto;
  overflow-x: hidden;

  /* calculate the max-height based on the padding and if the heading is used */
  max-height: calc(
    100% -
      ${r=>r.theme.measurements.advancedUIToolControlBar.paddingBottom+r.theme.measurements.advancedUIToolControlBar.paddingTop}px -
      ${r=>r.displayTitle?r.theme.measurements.mainCanvasActionBar.height-2:"0"}px
  );

  padding-top: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingTop}px;
  padding-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingBottom}px;

  > * {
    margin-left: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  /* The scrollable content needs a padding for the scrollbar position */
  > ${x_} {
    margin-left: 0px;
    margin-right: 0px;
    padding-left: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    padding-right: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  > :not(:last-child) {
    margin-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,mhe=({children:r})=>{let{config:e}=P(),t=e.config.displayToolControlBarTitle;return dhe.default.createElement($Ke,{displayTitle:t},r)};var k5=v(C("react")),Pf=v(C("styled-components"));pe();Y();var KKe=Pf.default.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${r=>r.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${r=>r.theme.measurements.zIndex.toolbar};

  background-color: ${r=>r.theme.toolbar.background};
  color: ${r=>r.theme.toolbar.foreground};
  ${r=>{let e=r.theme.toolbar.border?r.theme.toolbar.border:Pf.css`
          1px solid ${r.theme.toolbar.borderColor};
        `;return r.reverse?Pf.css`
          border-left: ${e};
        `:Pf.css`
          border-right: ${e};
        `}}
  margin-bottom: ${r=>r.theme.measurements.advancedUIToolbar.marginBottom}px;
`,hhe=({reverse:r,children:e})=>k5.default.createElement(KKe,{reverse:r,"data-test":X.Toolbar},k5.default.createElement($n,{direction:"vertical"},e));var E5=v(C("react")),Up=v(C("styled-components"));pe();Y();var XKe=(0,Up.default)(Kn)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${nr()?Up.css`
        background-color: transparent;
      `:Up.css`
        background-color: inherit;
      `}

  ${r=>r.isActive&&Up.css`
      background-color: ${r.theme.toolbar.activeBackground};
      color: ${r.theme.toolbar.activeForeground};

      svg {
        color: ${r.theme.toolbar.activeForeground};
      }
    `}
`,YKe=Up.default.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})`
  height: ${r=>r.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`,fhe=r=>E5.default.createElement(YKe,null,E5.default.createElement(XKe,U(T({},r),{"data-test":X.ToolbarItem})));var ghe=v(C("styled-components")),JKe=ghe.default.li.attrs({role:"none"})`
  height: ${r=>r.theme.measurements.advancedUIToolbar.seperatorHeight}px;
  cursor: pointer;
  position: relative;
`,bhe=JKe;var Np=v(C("react"));var C_=v(C("react"));var Pnr=v(C("react")),Li=v(C("react")),QKe=v(xhe()),Che=eXe()?Li.useLayoutEffect:Li.useEffect;var Mnr=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();function eXe(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function She(){var r=(0,Li.useState)(Object.create(null)),e=r[1];return(0,Li.useCallback)(function(){e(Object.create(null))},[])}var whe=v(C("react-dom")),tXe=function(e){var t=e.children,i=e.type,o=i===void 0?"reach-portal":i,n=(0,C_.useRef)(null),s=(0,C_.useRef)(null),a=She();return Che(function(){if(!!n.current){var l=n.current.ownerDocument;return s.current=l==null?void 0:l.createElement(o),l.body.appendChild(s.current),a(),function(){s.current&&s.current.ownerDocument&&s.current.ownerDocument.body.removeChild(s.current)}}},[o,a]),s.current?(0,whe.createPortal)(t,s.current):(0,C_.createElement)("span",{ref:n})},The=tXe;var qp=v(C("styled-components"));ie();Y();var rXe=qp.default.div`
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* added line-height reset from appContainer */
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;

  ${nr()?qp.css`
        position: -ms-device-fixed;
      `:qp.css`
        position: fixed;
      `}
  top: ${r=>r.position.y-5}px;
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out;
  z-index: ${r=>r.theme.measurements.zIndex.toolbar};
  pointer-events: none;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${r=>r.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${r=>r.label}';
    position: absolute;
    color: ${r=>r.theme.tooltip.foreground};
    background: ${r=>r.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
    border-radius: ${r=>r.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${r=>r.reverse&&qp.css`
      direction: rtl;

      &:before {
        border-left: 8px solid ${r.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}
`,iXe=qp.default.span`
  display: none;
`,khe=({show:r=!0,reverse:e,position:t,children:i})=>{let o=(0,Np.useRef)(null),{config:n}=P(),{measurements:s}=n,a=typeof i=="string"?i:"",l=t.x+s.advancedUIToolbar.width-10,c=t.x+s.advancedUIToolbar.width+16,u=e?"right":"left",d={entering:{opacity:0,[u]:`${l}px`},entered:{opacity:1,[u]:`${c}px`},exiting:{opacity:0,[u]:`${l}px`},exited:{opacity:0,[u]:`${l}px`}};return Np.default.createElement(__,{nodeRef:o,in:r,timeout:{exit:500}},p=>p!=="exited"&&Np.default.createElement(The,null,Np.default.createElement(rXe,{ref:o,style:d[p],"data-test":X.Tooltip,reverse:e,position:t,label:a},Np.default.createElement(iXe,null,a))))};var te={Card:f_,CardContainer:gT,Toolbar:{Index:hhe,Item:fhe,Separator:bhe,Tooltip:khe},Itemsbar:x_,BarSeparator:"",ItemsSeparator:vT,Controlsbar:nhe,ToolControlBarItems:mhe,Sidebar:{Index:$me,Heading:uhe,SubHeading:xT,TextCategory:lhe,ExpandableContainer:Kme}};var Xr=v(C("react"));j();var Sge=v(C("styled-components"));xr();pe();var ST=v(C("react"));j();var Mf=v(C("react"));j();Zt();var CT=class extends Mf.default.Component{constructor(){super(...arguments);this.renderIcon=e=>{let{tool:t,config:i}=this.props,o=i.state.config[t];if("icon"in o){let s=o.icon;return Mf.default.createElement(s,null)}let n=tS[e];return Mf.default.createElement(n,null)||null};this.update=e=>{this.props.active.selectTool(e)}}getToolTitle(e){return this.props.config.locale[e].title}render(){let e=this.props.active.tool,{tool:t,custom:i}=this.props;if(t){let o=i.getAdvancedToolbarItem();return Mf.default.createElement(o,{key:t,isActive:t===e,isReverse:this.props.isReverse,icon:this.renderIcon(t),onClick:()=>this.update(t),tool:t,label:this.getToolTitle(t)})}return Mf.default.createElement(te.Toolbar.Separator,null)}};CT=g([fe("active","config","custom"),O],CT);var Ehe=CT;var Bf=class extends ST.default.Component{render(){let{config:e}=this.props,t=e.config.order==="reverse";return ST.default.createElement(te.Toolbar.Index,{reverse:t},e.tools.map((i,o)=>ST.default.createElement(Ehe,{key:i||o,tool:i,isReverse:t})))}};Bf=g([fe("config"),O],Bf);var Lt=v(C("react"));j();V();pe();var S_=v(C("react"));j();ie();var Lf=v(C("react"));j();V();vt();ie();var Fn=v(C("react"));j();var Ihe=v(C("styled-components"));pe();ie();var oXe=(0,Ihe.default)(z.Input.Slider)`
  padding-bottom: 16px;
`,nXe=O(()=>{let{adjustmentsTool:r}=P(),{categories:e,items:t,config:i,locale:o}=r,n=(0,Fn.useRef)(!1),s=l=>{let c=r[l.identifier],u=(0,Fn.useRef)(c),d=r.locale.categories[l.identifier]||l.name,p=h=>{n.current&&h!==u.current&&(r.toolSnapshot(),n.current=!1,u.current=h)};return Fn.default.createElement(oXe,{identifier:l.identifier,adjust:!0,key:l.identifier,label:d,value:c,onChange:h=>{r.editAdjustments({type:l.identifier,value:h}),n.current=c!==h},onMouseUp:p,onTouchEnd:p,snap:0})},a=(l,c)=>{let u=o.categories[l.identifier]||l.name;return l.items?Fn.default.createElement(te.Sidebar.TextCategory,{key:l.identifier,name:u,isFirstCategory:c===0,isLastCategory:c===e.length-1},l.items.map(s)):null};return i.flattenCategories?Fn.default.createElement(Fn.default.Fragment,null,t.map(s)):Fn.default.createElement(Fn.default.Fragment,null,e.map(a))}),Dhe=()=>Fn.default.createElement(te.Itemsbar,null,Fn.default.createElement(nXe,null));var Ohe=v(C("react"));j();V();ie();var Rhe=O(()=>{let{adjustmentsTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.reset()};return Ohe.default.createElement(i,{tool:w.ADJUSTMENT,label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isDirty,onClick:o})});var Fhe=O(()=>{let{adjustmentsTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{if(typeof o=="string")switch(o){case Wn.Items:return Lf.default.createElement(Dhe,{key:o});case Wn.Separator:return Lf.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case Wn.RemoveAdjustmentButton:return Lf.default.createElement(Rhe,{key:o});default:return null}else if(typeof o=="object")return Lf.default.createElement(te.Controlsbar,{key:o.type,show:r.isDirty},o.children.map(n=>i(n)));return null};return Lf.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var Ahe=O(({displayTitle:r})=>{let{adjustmentsTool:e}=P();return S_.default.createElement(S_.default.Fragment,null,r&&S_.default.createElement(te.Sidebar.Heading,null,e.locale.title),S_.default.createElement(Fhe,null))});var w_=v(C("react"));j();var Du=v(C("react"));j();V();vt();ie();var I5=v(C("react"));j();V();xr();pe();ie();var Phe=O(()=>{let{brushTool:r}=P(),e=r.locale.controls,t=r.localeColor.colorPicker,{colorList:i}=r;return I5.default.createElement(z.Input.Selection,{label:e.selectColor},I5.default.createElement(rr,{tool:w.BRUSH,activeColor:r.color,colors:i,labelsColor:t,onChange:r.changeColor}))});var Mhe=v(C("react"));j();pe();ie();Y();var Bhe=O(()=>{let{brushTool:r}=P(),e=r.locale.controls;return Mhe.default.createElement(z.Input.Slider,{"data-test":X.BrushHardness,label:e.sliderHardness,value:r.hardness,min:0,max:1,onChange:r.changeHardness})});var Lhe=v(C("react"));j();pe();ie();Y();var zhe=O(()=>{let{brushTool:r}=P(),e=r.locale.controls;return Lhe.default.createElement(z.Input.Slider,{"data-test":X.BrushSize,label:e.sliderSize,value:r.relativeSize,min:1,max:100,divider:1,onChange:r.changeRelativeSize})});var Uhe=v(C("react"));j();V();ie();var Nhe=O(()=>{let{brushTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.reset()};return Uhe.default.createElement(i,{tool:w.BRUSH,label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isDirty,onClick:o})});var qhe=O(()=>{let{brushTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{if(typeof o=="string")switch(o){case wi.BrushColorList:return Du.default.createElement(Phe,{key:o});case wi.BrushHardnessSlider:return Du.default.createElement(Bhe,{key:o});case wi.BrushSizeSlider:return Du.default.createElement(zhe,{key:o});case wi.Separator:return Du.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case wi.RemoveBrushButton:return Du.default.createElement(Nhe,{key:o});default:return null}else if(typeof o=="object")return Du.default.createElement(te.Controlsbar,{key:o.type,show:r.isDirty},o.children.map(n=>i(n)));return null};return Du.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var sXe=({brushTool:r,displayTitle:e})=>w_.default.createElement(w_.default.Fragment,null,e&&w_.default.createElement(te.Sidebar.Heading,null,r.locale.title),w_.default.createElement(qhe,null)),Hhe=fe("brushTool")(O(sXe));var T_=v(C("react"));V();ie();var jhe=({displayTitle:r})=>{let{config:e}=P(),t=e.state.config[w.CUSTOM].toolControlBar,{title:i}=e.state.locale[w.CUSTOM];return T_.default.createElement(T_.default.Fragment,null,r&&T_.default.createElement(te.Sidebar.Heading,null,i),T_.default.createElement(t,{language:e.state.locale[w.CUSTOM]}))};var k_=v(C("react"));j();ie();var Hp=v(C("react"));j();V();vt();ie();var Whe=v(C("react"));j();pe();ie();var Ghe=O(()=>{let{filterTool:r}=P(),e=r.locale.controls,t=r.state,i=()=>{r.toolSnapshot()};return Whe.default.createElement(z.Input.Slider,{"aria-hidden":!r.isOptionSelected,label:e.sliderIntensity,value:t.intensity,min:0,max:1,onChange:r.changeIntensity,onMouseUp:i,onTouchEnd:i,snap:t.isDuotone?.5:null,isDisabled:!r.isOptionSelected})});var ai=v(C("react"));j();V();pe();ie();Y();var aXe=O(()=>{let{filterTool:r,custom:e}=P(),{categories:t,config:i,items:o,locale:n}=r,s=e.getAdvancedItemCard(),a=e.getAdvancedCategoryCard(),l=(d,p)=>{let h=n.items[d.identifier]||d.name;return ai.default.createElement(s,{tool:w.FILTER,type:Le.MEDIUM,onClick:()=>r.selectFilter(d.identifier,d.defaultIntensity),key:d.identifier,image:d.thumbnailURI,label:h,style:{animationDelay:`${Qe(p)}s`},isActive:r.identifier===d.identifier},ai.default.createElement(Jt,{withBackground:!0},h))},c=(d,p)=>{let{selectedCategoryIdentifier:h}=r,f=h===d.identifier,_=n.categories[d.identifier]||d.name;return d.items?ai.default.createElement("div",{key:d.identifier},ai.default.createElement(a,{isActive:f,tool:w.FILTER,type:Le.LARGE,onClick:()=>r.toggleCategorySelection(d.identifier),image:d.thumbnailURI,label:_,style:{animationDelay:`${Qe(p)}s`}},ai.default.createElement(Jt,{withBackground:!0,caret:!0,isActive:f},_)),ai.default.createElement(te.Sidebar.ExpandableContainer,{show:f},d.items.map(l))):null},u=(d,p)=>{let h=n.categories[d.identifier]||d.name;return d.items?ai.default.createElement(te.Sidebar.TextCategory,{key:d.identifier,name:h,isFirstCategory:p===0,isLastCategory:p===t.length-1},d.items.map(l)):null};return i.flattenCategories?ai.default.createElement(ai.default.Fragment,null,o.map(l)):i.categoryHeaderType===hr.CARD?ai.default.createElement(ai.default.Fragment,null,t.map(c)):i.categoryHeaderType===hr.TEXT?ai.default.createElement(ai.default.Fragment,null,t.map(u)):null}),Vhe=()=>ai.default.createElement(te.Itemsbar,null,ai.default.createElement(te.CardContainer,null,ai.default.createElement(aXe,null)));var $he=v(C("react"));j();V();ie();var Khe=O(()=>{let{filterTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.reset()};return $he.default.createElement(i,{tool:w.FILTER,label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isOptionSelected,onClick:o})});var Xhe=O(()=>{let{filterTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{if(typeof o=="string")switch(o){case To.Items:return Hp.default.createElement(Vhe,{key:o});case To.Separator:return Hp.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case To.RemoveFilterButton:return Hp.default.createElement(Khe,{key:o});case To.FilterIntensitySlider:return Hp.default.createElement(Ghe,{key:o});default:return null}else if(typeof o=="object")return Hp.default.createElement(te.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)));return null};return Hp.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var Yhe=O(({displayTitle:r})=>{let{filterTool:e}=P();return k_.default.createElement(k_.default.Fragment,null,r&&k_.default.createElement(te.Sidebar.Heading,null,e.locale.title),k_.default.createElement(Xhe,null))});var E_=v(C("react"));j();ie();var jp=v(C("react"));j();V();vt();ie();var Jhe=v(C("react"));j();pe();ie();var Zhe=O(()=>{let{focusTool:r}=P(),e=r.locale.controls,t=()=>{r.toolSnapshot(e.sliderIntensity)};return Jhe.default.createElement(z.Input.Slider,{"aria-hidden":!r.isOptionSelected,label:e.sliderIntensity,value:r.relativeIntensity,min:0,max:100,divider:1,onChange:r.changeRelativeIntensity,onMouseUp:t,onTouchEnd:t,isDisabled:!r.isOptionSelected})});var Ou=v(C("react"));j();V();pe();ie();Y();var lXe=O(()=>{let{focusTool:r,custom:e}=P(),{items:t}=r,i=(o,n)=>{let s=r.locale.items[o.identifier]||o.name,a=e.getAdvancedItemCard();return Ou.default.createElement(a,{tool:w.FOCUS,type:Le.LARGE,onClick:()=>r.selectFocus(o.identifier),key:o.identifier,image:o.thumbnailURI,label:s,style:{animationDelay:`${Qe(n)}s`},isActive:o.identifier===r.identifier},Ou.default.createElement(Jt,{withBackground:!0},s))};return Ou.default.createElement(Ou.default.Fragment,null,t.map(i))}),Qhe=()=>Ou.default.createElement(te.Itemsbar,null,Ou.default.createElement(te.CardContainer,null,Ou.default.createElement(lXe,null)));var efe=v(C("react"));j();V();ie();var tfe=O(()=>{let{focusTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.reset()};return efe.default.createElement(i,{tool:w.FOCUS,label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isOptionSelected,onClick:o})});var rfe=O(()=>{let{focusTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{if(typeof o=="string")switch(o){case ko.Separator:return jp.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case ko.RemoveFocusButton:return jp.default.createElement(tfe,{key:o});case ko.FocusIntensitySlider:return jp.default.createElement(Zhe,{key:o});case ko.Items:return jp.default.createElement(Qhe,{key:o});default:return null}else if(typeof o=="object")return jp.default.createElement(te.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)));return null};return jp.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var ife=O(({displayTitle:r})=>{let{focusTool:e}=P();return E_.default.createElement(E_.default.Fragment,null,r&&E_.default.createElement(te.Sidebar.Heading,null,e.locale.title),E_.default.createElement(rfe,null))});var D_=v(C("react"));j();ie();var Zl=v(C("react"));j();V();vt();ie();var D5=v(C("react"));j();V();xr();pe();ie();var ofe=O(()=>{let{frameTool:r}=P(),e=r.locale.controls,t=r.localeColor.colorPicker,{colorList:i,tintable:o}=r;return D5.default.createElement(z.Input.Selection,{isDisabled:!o,label:e.selectColor},D5.default.createElement(rr,{tool:w.FRAME,activeColor:r.color,colors:i,labelsColor:t,isDisabled:!o,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))});var I_=v(C("react"));j();V();pe();ie();Y();var nfe=O(()=>{let{frameTool:r,custom:e}=P(),{items:t}=r,i=r.state?r.state.identifier:null,o=(n,s)=>{let a=r.locale.items[n.identifier]||n.name,l=e.getAdvancedItemCard();return I_.default.createElement(l,{tool:w.FRAME,type:Le.MEDIUM,onClick:()=>r.selectFrame(n.identifier),key:n.identifier,image:n.thumbnailURI,label:a,style:{backgroundSize:"75%",animationDelay:`${Qe(s)}s`},isActive:n.identifier===i},I_.default.createElement(Jt,{hidden:!0},a))};return I_.default.createElement(te.Itemsbar,null,I_.default.createElement(te.CardContainer,null,t.map(o)))});var sfe=v(C("react"));j();pe();ie();var afe=O(()=>{let{frameTool:r}=P(),e=r.locale.controls,t=i=>{r.toolSnapshot(i)};return sfe.default.createElement(z.Input.Slider,{"aria-hidden":!r.isOptionSelected,label:e.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:()=>{t(e.sliderOpacity)},onTouchEnd:()=>{t(e.sliderOpacity)},isDisabled:!r.isOptionSelected})});var lfe=v(C("react"));j();pe();ie();var cfe=O(()=>{let{frameTool:r}=P(),e=r.locale.controls,t=i=>{r.toolSnapshot(i)};return lfe.default.createElement(z.Input.Slider,{"aria-hidden":!r.isOptionSelected,label:e.sliderSize,value:r.size,min:r.minSize,max:r.maxSize,divider:1,onChange:r.changeWidth,onMouseUp:()=>{t(e.sliderSize)},onTouchEnd:()=>{t(e.sliderSize)},isDisabled:!r.isOptionSelected})});var ufe=v(C("react"));j();V();ie();var dfe=O(()=>{let{frameTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.reset()};return ufe.default.createElement(i,{tool:w.FRAME,ariaLabel:t.buttonReset,onClick:o,isDisabled:!r.isOptionSelected,label:t.buttonReset})});var pfe=O(()=>{let{frameTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{if(typeof o=="string")switch(o){case ei.Items:return Zl.default.createElement(nfe,{key:o});case ei.Separator:return Zl.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case ei.FrameOpacitySlider:return Zl.default.createElement(afe,{key:o});case ei.FrameSizeSlider:return Zl.default.createElement(cfe,{key:o});case ei.FrameColorList:return Zl.default.createElement(ofe,{key:o});case ei.RemoveFrameButton:return Zl.default.createElement(dfe,{key:o});default:return null}else if(typeof o=="object")return Zl.default.createElement(te.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)));return null};return Zl.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var mfe=O(({displayTitle:r})=>{let{frameTool:e}=P();return D_.default.createElement(D_.default.Fragment,null,r&&D_.default.createElement(te.Sidebar.Heading,null,e.locale.title),D_.default.createElement(pfe,null))});var O_=v(C("react"));j();ie();var Wp=v(C("react"));j();V();vt();ie();var Tr=v(C("react"));j();V();pe();ie();Y();var cXe=O(()=>{let{active:r,library:e,custom:t}=P(),{query:i,config:o,selectedCategoryIdentifier:n,categories:s,items:a}=e,l=t.getAdvancedCategoryCard(),c=t.getAdvancedItemCard(),u=(h,f)=>Tr.default.createElement(c,{tool:w.LIBRARY,type:Le.MEDIUM,onClick:()=>r.newImage(h.rawUrl),key:`${h.identifier}-${f}`,image:h.thumbnailURI,label:h.name,style:{animationDelay:`${Qe(f)}s`},authorAvatar:h.authorAvatar,authorName:h.authorName},h.authorAvatar&&Tr.default.createElement(fd,{url:h.authorAvatar}),h.authorName&&Tr.default.createElement(Jt,{withBackground:!0},h.authorName)),d=(h,f)=>{let _=n===h.identifier;return h.items?Tr.default.createElement("div",{key:h.identifier},Tr.default.createElement(l,{isActive:_,tool:w.LIBRARY,type:Le.LARGE,onClick:()=>e.toggleCategorySelection(h.identifier),image:h.thumbnailURI,label:h.name,style:{animationDelay:`${Qe(f)}s`}},Tr.default.createElement(Jt,{withBackground:!0,caret:!0,isActive:_},h.name)),Tr.default.createElement(te.Sidebar.ExpandableContainer,{show:_},h.items.map(u))):null},p=(h,f)=>h.items?Tr.default.createElement(te.Sidebar.TextCategory,{key:h.identifier,name:h.name,isFirstCategory:f===0,isLastCategory:f===s.length-1},h.items.map(u)):null;return i?a.length?Tr.default.createElement(Tr.default.Fragment,null,a.map(u)):Tr.default.createElement("p",{"data-test":X.NoResult},e.locale.controls.noResults):o.flattenCategories?Tr.default.createElement(Tr.default.Fragment,null,a.map(u)):o.categoryHeaderType===hr.CARD?Tr.default.createElement(Tr.default.Fragment,null,s.map(d)):o.categoryHeaderType===hr.TEXT?Tr.default.createElement(Tr.default.Fragment,null,s.map(p)):null}),hfe=()=>Tr.default.createElement(te.Itemsbar,null,Tr.default.createElement(te.CardContainer,null,Tr.default.createElement(cXe,null)));var vfe=v(C("react"));j();V();ie();O5();var xfe=O(()=>{let{library:r,active:e}=P(),{config:t}=r,i=r.locale.controls,o=()=>{e.selectWebcam(!0)};return t.enableWebcam?vfe.default.createElement(TT,{tool:w.LIBRARY,onClick:o,label:i.buttonWebcamOpen}):null});var Cfe=v(C("react"));j();pe();ie();var Sfe=O(()=>{let{library:r}=P(),{libraryProvider:e}=r,t=r.locale.controls,i=o=>{r.fetchImages(o)};return e?Cfe.default.createElement(z.Input.Search,{onChange:i,placeholder:t.placeholderSearch}):null});var R5=v(C("react"));j();V();pe();ie();Y();var wfe=O(()=>{let{library:r,active:e,custom:t}=P(),{config:i}=r,o=r.locale.controls,n=t.getButton("toolControlBarPrimaryButton"),s=l=>{let{files:c}=l.target;if(c.length){let u=new FileReader;u.onload=d=>{e.newImage(d.target.result)},u.readAsDataURL(c[0])}},a=()=>{let l=document.getElementById("fileUpload");l&&l.click()};return i.enableUpload?R5.default.createElement(n,{"data-test":X.LibraryUploadButton,tool:w.LIBRARY,ariaLabel:o.buttonUpload,onClick:a,label:o.buttonUpload},R5.default.createElement(z.Input.File,{onChange:s})):null});var Tfe=O(()=>{let{library:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{switch(o){case Xi.Items:return Wp.default.createElement(hfe,{key:o});case Xi.OpenWebcamButton:return Wp.default.createElement(xfe,{key:o});case Xi.SearchFieldInput:return Wp.default.createElement(Sfe,{key:o});case Xi.Separator:return Wp.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case Xi.UploadImageButton:return Wp.default.createElement(wfe,{key:o});default:return null}};return Wp.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var kfe=O(({displayTitle:r})=>{let{library:e}=P();return O_.default.createElement(O_.default.Fragment,null,r&&O_.default.createElement(te.Sidebar.Heading,null,e.locale.title),O_.default.createElement(Tfe,null))});var R_=v(C("react"));j();ie();var Fu=v(C("react"));j();V();vt();ie();var Efe=v(C("react"));j();pe();ie();var Ife=O(()=>{let{overlayTool:r}=P(),{allBlendModes:e,blendMode:t}=r,i=r.locale.controls,o=n=>{r.changeBlendMode(n)};return Efe.default.createElement(z.Input.CarouselSlider,{label:i.carouselBlendMode,defaultIdentifier:t,onSelect:o,list:e})});var Ru=v(C("react"));j();V();pe();ie();Y();var uXe=O(()=>{let{overlayTool:r,custom:e}=P(),{items:t,locale:i,identifier:o,selectOverlay:n}=r,s=(a,l)=>{let c=i.items[a.identifier]||a.name,u=e.getAdvancedItemCard();return Ru.default.createElement(u,{tool:w.OVERLAY,type:Le.MEDIUM,onClick:()=>n(a.identifier),key:a.identifier,image:a.thumbnailURI,label:c,style:{animationDelay:`${Qe(l)}s`},isActive:a.identifier===o},Ru.default.createElement(Jt,{withBackground:!0},c))};return Ru.default.createElement(Ru.default.Fragment,null,t.map(s))}),Dfe=()=>Ru.default.createElement(te.Itemsbar,null,Ru.default.createElement(te.CardContainer,null,Ru.default.createElement(uXe,null)));var Ofe=v(C("react"));j();pe();ie();var Rfe=O(()=>{let{overlayTool:r}=P(),e=r.locale.controls,t=()=>{r.toolSnapshot()};return Ofe.default.createElement(z.Input.Slider,{"aria-hidden":!r.isOptionSelected,label:e.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:t,onTouchEnd:t,isDisabled:!r.isOptionSelected})});var Ffe=v(C("react"));j();V();ie();var Afe=O(()=>{let{overlayTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.reset()};return Ffe.default.createElement(i,{tool:w.OVERLAY,label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isOptionSelected,onClick:o})});var Pfe=O(()=>{let{overlayTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{if(typeof o=="string")switch(o){case Si.Items:return Fu.default.createElement(Dfe,{key:o});case Si.Separator:return Fu.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case Si.OverlayBlendModeCarousel:return Fu.default.createElement(Ife,{key:o});case Si.OverlayOpacitySlider:return Fu.default.createElement(Rfe,{key:o});case Si.RemoveOverlayButton:return Fu.default.createElement(Afe,{key:o});default:return null}else if(typeof o=="object")return Fu.default.createElement(te.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)));return null};return Fu.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var Mfe=O(({displayTitle:r})=>{let{overlayTool:e}=P();return R_.default.createElement(R_.default.Fragment,null,r&&R_.default.createElement(te.Sidebar.Heading,null,e.locale.title),R_.default.createElement(Pfe,null))});var F_=v(C("react"));j();ie();var Gp=v(C("react"));j();V();vt();ie();var F5=v(C("react"));j();V();xr();pe();ie();var Bfe=O(()=>{let{stickerTool:r}=P(),{colorList:e}=r,t=r.locale.controls,i=r.localeColor.colorPicker,o=!r.isStickerSelected||!r.tintable&&r.isStickerSelected;return F5.default.createElement(z.Input.Selection,{isDisabled:o,label:t.selectColor},F5.default.createElement(rr,{tool:w.STICKER,activeSprite:r.id,activeColor:r.tintColor,colors:e,labelsColor:i,isDisabled:o,onChange:r.changeTintColor,onAddSnapshot:r.tintColorSnapshot}))});var li=v(C("react"));j();V();pe();ie();Y();var dXe=O(()=>{let{stickerTool:r,custom:e}=P(),{categories:t,selectedCategoryIdentifier:i,config:o,items:n,locale:s}=r,a=e.getAdvancedCategoryCard(),l=e.getAdvancedItemCard(),c=(p,h)=>{let f=s.items[p.identifier]||p.name;return li.default.createElement(l,{key:p.identifier,tool:w.STICKER,type:Le.SMALL,onClick:()=>r.add(p.identifier),image:p.thumbnailURI,label:f,style:{backgroundSize:"75%",animationDelay:`${sC(h)}s`}},li.default.createElement(Jt,{hidden:!0},f))},u=(p,h)=>{let f=i===p.identifier,_=s.categories[p.identifier]||p.name;return p.items?li.default.createElement("div",{key:p.identifier},li.default.createElement(a,{isActive:f,tool:w.STICKER,type:Le.LARGE,onClick:()=>r.toggleCategorySelection(p.identifier),image:p.thumbnailURI,label:_,style:{animationDelay:`${Qe(h)}s`}},li.default.createElement(Jt,{withBackground:!0,caret:!0,isActive:f},_)),li.default.createElement(te.Sidebar.ExpandableContainer,{show:f,key:`${p.identifier}-items`},p.items.map(c))):null},d=(p,h)=>{let f=s.categories[p.identifier]||p.name;return p.items?li.default.createElement(te.Sidebar.TextCategory,{key:p.identifier,name:f,isFirstCategory:h===0,isLastCategory:h===t.length-1},p.items.map(c)):null};return o.flattenCategories?li.default.createElement(li.default.Fragment,null,n.map(c)):o.categoryHeaderType===hr.CARD?li.default.createElement(li.default.Fragment,null,t.map(u)):o.categoryHeaderType===hr.TEXT?li.default.createElement(li.default.Fragment,null,t.map(d)):null}),Lfe=()=>li.default.createElement(te.Itemsbar,null,li.default.createElement(te.CardContainer,null,li.default.createElement(dXe,null)));var zfe=v(C("react"));j();pe();ie();var Ufe=O(()=>{let{stickerTool:r}=P(),e=r.locale.controls,t=()=>{r.toolSnapshot()};return zfe.default.createElement(z.Input.Slider,{isDisabled:!r.isStickerSelected,label:e.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:t,onTouchEnd:t})});var A5=v(C("react"));j();var Nfe=v(C("styled-components"));V();pe();ie();var pXe=Nfe.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${YC.VisuallyHidden}
`,qfe=O(()=>{let{stickerTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarPrimaryButton"),o=()=>{let s=document.getElementById("fileUpload");s&&(s.value=null,s.click())},n=s=>{let{files:a}=s.target;r.addFiles(a)};return r.isCustomStickerEnabled?A5.default.createElement(i,{tool:w.STICKER,ariaLabel:t.buttonUpload,onClick:o,label:t.buttonUpload},A5.default.createElement(pXe,{onChange:n})):null});var Hfe=O(()=>{let{stickerTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{switch(o){case Yi.Items:return Gp.default.createElement(Lfe,{key:o});case Yi.Separator:return Gp.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case Yi.UploadStickerButton:return Gp.default.createElement(qfe,{key:o});case Yi.StickerColorList:return Gp.default.createElement(Bfe,{key:o});case Yi.StickerOpacitySlider:return Gp.default.createElement(Ufe,{key:o});default:return null}};return Gp.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var jfe=O(({displayTitle:r})=>{let{stickerTool:e}=P();return F_.default.createElement(F_.default.Fragment,null,r&&F_.default.createElement(te.Sidebar.Heading,null,e.locale.title),F_.default.createElement(Hfe,null))});var A_=v(C("react"));j();ie();var ms=v(C("react"));j();var ige=v(C("styled-components"));V();vt();var P5=v(C("react"));j();V();xr();pe();ie();var Wfe=O(()=>{let{textTool:r}=P(),e=r.locale.controls,t=r.localeColor.colorPicker,{isTextSelected:i,backgroundColorList:o}=r;return P5.default.createElement(z.Input.Selection,{isDisabled:!i,label:e.selectBackgroundColor},P5.default.createElement(rr,{tool:w.TEXT,activeSprite:r.id,activeColor:r.backgroundColor,colors:o,labelsColor:t,isDisabled:!i,onChange:r.changeBackgroundColor,onAddSnapshot:r.backgroundColorSnapshot}))});var Gfe=v(C("react"));j();pe();vt();ie();var Vfe=O(()=>{let{textTool:r}=P(),e=r.locale.controls,{fontFamily:t,fontStyle:i,fontWeight:o,fontFamilies:n,isTextSelected:s}=r,a=n.map(c=>({label:`${c.fontFamily} ${Be.getDisplayFontStyle(c)}`,fontWeight:c.fontWeight,fontStyle:c.fontStyle,fontFamily:c.fontFamily,value:c.identifier})),l=a.filter(({value:c})=>c===r.identifier)[0];return Gfe.default.createElement(z.Input.Dropdown,{isDisabled:!s,style:{fontFamily:t,fontStyle:i,fontWeight:o},itemStyle:c=>({fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight}),label:e.dropdownFontFamily,list:a,onSelect:r.changeFont,selectedItem:l.label})});var $fe=v(C("react"));j();var Kfe=v(C("styled-components"));pe();ie();var mXe=(0,Kfe.default)(z.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`,Xfe=O(()=>{let{textTool:r}=P(),e=r.locale.controls,{isTextSelected:t}=r,i=o=>{let n=o?parseFloat(o):0;r.setFontSize(Math.max(10,Math.min(690,n)))};return $fe.default.createElement(mXe,{value:r.fontSize.toFixed(0),onSubmit:i,label:e.textFontSize,isDisabled:!t})});var Yfe=v(C("react"));j();pe();ie();var Jfe=O(()=>{let{textTool:r}=P(),e=r.locale.controls,{isTextSelected:t}=r,i=()=>{r.toolSnapshot()};return Yfe.default.createElement(z.Input.Slider,{isDisabled:!t,label:e.sliderLineSpacing,value:r.lineHeight,min:.5,max:3,onChange:r.changeLineHeight,onMouseUp:i,onTouchEnd:i,snap:1,divider:1,decimal:1})});var Zfe=v(C("react"));j();V();ie();var Qfe=O(()=>{let{textTool:r,custom:e}=P(),t=r.locale.controls,i=()=>{r.add()},o=e.getButton("toolControlBarPrimaryButton");return Zfe.default.createElement(o,{tool:w.TEXT,ariaLabel:t.buttonNew,onClick:i,label:t.buttonNew})});var kT=v(C("react"));j();var ege=v(C("styled-components"));pe();ie();Zt();Y();var hXe=(0,ege.default)(z.Input.Selection)`
  width: 50%;
`,tge=O(()=>{let{textTool:r,custom:e}=P(),t=r.locale.controls,{isTextSelected:i,alignment:o}=r,n=["left","center","right"],s=e.getButton("textAlignment");return kT.default.createElement(hXe,{isDisabled:!i,inline:!0,label:t.selectAlignment,"data-test":X.TextAlignment},n.map(a=>{let l=rS[a];return kT.default.createElement(s,{tool:a,isDisabled:!i,ariaLabel:`Align ${a}`,isActive:a===o,key:a,style:{padding:"1px 3px 2px"},icon:kT.default.createElement(l,null),onClick:()=>r.changeAlignment(a)})}))});var M5=v(C("react"));j();V();xr();pe();ie();var rge=O(()=>{let{textTool:r}=P(),e=r.locale.controls,t=r.localeColor.colorPicker,{isTextSelected:i,colorList:o}=r;return M5.default.createElement(z.Input.Selection,{isDisabled:!i,label:e.selectFontColor},M5.default.createElement(rr,{tool:w.TEXT,activeSprite:r.id,activeColor:r.textColor,colors:o,labelsColor:t,isDisabled:!i,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))});var fXe=ige.default.div`
  display: flex;
  justify-content: space-between;
`,gXe=({textTool:r})=>{let{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{if(typeof o=="string")switch(o){case br.NewTextButton:return ms.default.createElement(Qfe,{key:o});case br.FontFamilyDropdown:return ms.default.createElement(Vfe,{key:o});case br.Separator:return ms.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case br.TextColorList:return ms.default.createElement(rge,{key:o});case br.BackgroundColorList:return ms.default.createElement(Wfe,{key:o});case br.LineSpacingSlider:return ms.default.createElement(Jfe,{key:o});case br.TextAligmentList:return ms.default.createElement(tge,{key:o});case br.FontSizeInput:return ms.default.createElement(Xfe,{key:o});default:return null}else if(typeof o=="object")return ms.default.createElement(fXe,{key:o.type},o.children.map(n=>i(n)));return null};return ms.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))},oge=fe("textTool")(O(gXe));var nge=O(({displayTitle:r})=>{let{textTool:e}=P();return A_.default.createElement(A_.default.Fragment,null,r&&A_.default.createElement(te.Sidebar.Heading,null,e.locale.title),A_.default.createElement(oge,null))});var P_=v(C("react"));j();ie();var Vp=v(C("react"));j();V();vt();ie();var sge=v(C("react"));j();V();ie();var age=O(()=>{let{textDesignTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarPrimaryButton"),o=()=>{r.add()};return sge.default.createElement(i,{tool:w.TEXT_DESIGN,ariaLabel:t.buttonNew,onClick:o,label:t.buttonNew})});var lge=v(C("react"));j();V();ie();var cge=O(()=>{let{textDesignTool:r,custom:e}=P(),t=r.locale.controls,{isTextDesignSelected:i}=r,o=e.getButton("toolControlBarSecondaryButton"),n=()=>{r.changeSeed()};return lge.default.createElement(o,{tool:w.TEXT_DESIGN,ariaLabel:t.buttonShuffle,isDisabled:!i,onClick:n,label:t.buttonShuffle})});var B5=v(C("react"));j();V();xr();pe();ie();var uge=O(()=>{let{textDesignTool:r}=P(),e=r.locale.controls,t=r.localeColor.colorPicker,{isTextDesignSelected:i,colorList:o}=r;return B5.default.createElement(z.Input.Selection,{isDisabled:!i,label:e.selectColor},B5.default.createElement(rr,{tool:w.TEXT_DESIGN,activeSprite:r.id,activeColor:r.color,colors:o,labelsColor:t,isDisabled:!i,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))});var Au=v(C("react"));j();V();pe();ie();Y();var bXe=O(()=>{let{textDesignTool:r,custom:e}=P(),{items:t,identifier:i}=r,o=s=>{r.changeIdentifier(s)},n=(s,a)=>{let l=e.getAdvancedItemCard();return Au.default.createElement(l,{key:s.identifier,tool:w.TEXT_DESIGN,type:Le.MEDIUM,onClick:()=>o(s.identifier),image:s.thumbnailURI,label:s.name||"",style:{animationDelay:`${Qe(a)}s`,backgroundSize:"60%"},isDisabled:!r.isTextDesignSelected,isActive:i===s.identifier},Au.default.createElement(Jt,{hidden:!0},s.name))};return Au.default.createElement(Au.default.Fragment,null,t.map(n))}),dge=()=>Au.default.createElement(te.Itemsbar,null,Au.default.createElement(te.CardContainer,null,Au.default.createElement(bXe,null)));var pge=O(()=>{let{textDesignTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{switch(o){case Zi.Items:return Vp.default.createElement(dge,{key:o});case Zi.Separator:return Vp.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case Zi.NewTextDesignButton:return Vp.default.createElement(age,{key:o});case Zi.ShuffleLayoutButton:return Vp.default.createElement(cge,{key:o});case Zi.TextDesignColorList:return Vp.default.createElement(uge,{key:o});default:return null}};return Vp.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var mge=O(({displayTitle:r})=>{let{textDesignTool:e}=P();return P_.default.createElement(P_.default.Fragment,null,r&&P_.default.createElement(te.Sidebar.Heading,null,e.locale.title),P_.default.createElement(pge,null))});var M_=v(C("react"));j();ie();var $p=v(C("react"));j();V();vt();ie();var hge=v(C("react"));j();xr();ie();var fge=O(()=>{let{transformTool:r}=P(),e=r.locale.controls,{forceDimensions:t,localOutputHeight:i,localOutputWidth:o}=r;return hge.default.createElement(h_,{isDisabled:t,showLabel:!0,valueHeight:i,valueWidth:o,onSubmitWidth:r.onPixelWidth,onSubmitHeight:r.onPixelHeight,label:e.inputCropSize,labelHeight:e.inputHeight,labelWidth:e.inputWidth})});var gge=v(C("react"));j();V();ie();var bge=O(()=>{let{transformTool:r,custom:e}=P(),t=r.locale.controls,{forceDimensions:i,lockResolution:o}=r,n=e.getCheckbox();return gge.default.createElement(n,{tool:w.TRANSFORM,isDisabled:i,value:o,label:t.checkboxKeepResolution,checkMarkPosition:"right",onClick:r.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}})});var yge=v(C("react"));j();V();ie();var _ge=O(()=>{let{transformTool:r,custom:e}=P(),t=r.locale.controls,i=e.getButton("toolControlBarSecondaryButton"),o=()=>{r.reset()};return yge.default.createElement(i,{tool:w.TRANSFORM,ariaLabel:t.buttonReset,onClick:o,label:t.buttonReset})});var Nr=v(C("react"));j();var L5=v(C("react-dom/server"));V();pe();ie();Zt();Y();var yXe=O(()=>{let{transformTool:r,custom:e,editor:t}=P(),{categories:i,items:o,identifier:n,config:s,locale:a}=r,l=e.getAdvancedItemCard(),c=e.getAdvancedCategoryCard(),u=(h,f)=>{let{theme:_,measurements:x}=t.configStore,y=a.items[h.identifier]||h.name,D=h.thumbnailURI||"",E="80%";if(!r.checkIfTransformThumbnailExits(h.thumbnailURI)){let F=h.identifier.includes("imgly_transform_common"),N=ft.crops[h.identifier]||ft.crops.imgly_transform_common_custom,R=Nr.default.createElement(N,{width:x.advancedCard.medium.width-(F?42:0),height:x.advancedCard.medium.height-(F?42:0),main:_.transform.crops.main,highlight:_.transform.crops.highlight,shadow:_.transform.crops.shadow});D=`'data:image/svg+xml,${encodeURIComponent((0,L5.renderToStaticMarkup)(R))}'`,E=nr()||un()?"auto":"unset"}return Nr.default.createElement(l,{key:h.identifier,tool:w.TRANSFORM,type:Le.MEDIUM,onClick:()=>r.changeIdentifier(h.identifier,!0),image:D,label:y,style:{backgroundSize:E,animationDelay:`${Qe(f)}s`},isActive:h.identifier===n},Nr.default.createElement(Jt,null,y))},d=(h,f)=>{let{theme:_,measurements:x}=t.configStore,y=r.selectedCategoryIdentifier===h.identifier,D=a.categories[h.identifier]||h.name,E=h.thumbnailURI||"";if(!h.items)return null;if(!r.checkIfTransformThumbnailExits(h.thumbnailURI)){let F=ft.categories[h.identifier]||ft.crops.imgly_transform_common_custom,N=Nr.default.createElement(F,{width:x.advancedCard.large.width-42,height:x.advancedCard.large.height-42,main:_.transform.crops.main,highlight:_.transform.crops.highlight,shadow:_.transform.crops.shadow});E=`'data:image/svg+xml,${encodeURIComponent((0,L5.renderToStaticMarkup)(N))}'`}return Nr.default.createElement("div",{key:h.identifier},Nr.default.createElement(c,{type:Le.LARGE,onClick:()=>r.toggleCategorySelection(h.identifier),key:h.identifier,image:E,style:{animationDelay:`${Qe(f)}s`},label:h.name,tool:w.TRANSFORM},Nr.default.createElement(Jt,{caret:!0,isActive:y},D)),Nr.default.createElement(te.Sidebar.ExpandableContainer,{show:y},h.items.map(u)))},p=(h,f)=>{let _=a.categories[h.identifier]||h.name;return h.items?Nr.default.createElement(te.Sidebar.TextCategory,{key:h.identifier,name:_,isFirstCategory:f===0,isLastCategory:f===i.length-1},h.items.map(u)):null};return s.flattenCategories?Nr.default.createElement(Nr.default.Fragment,null,o.map(u)):s.categoryHeaderType===hr.CARD?Nr.default.createElement(Nr.default.Fragment,null,i.map(d)):s.categoryHeaderType===hr.TEXT?Nr.default.createElement(Nr.default.Fragment,null,i.map(p)):null}),vge=()=>Nr.default.createElement(te.Itemsbar,null,Nr.default.createElement(te.CardContainer,null,Nr.default.createElement(yXe,null)));var xge=O(()=>{let{transformTool:r}=P(),{config:e}=r,{advancedUIToolControlBarOrder:t}=e,i=o=>{switch(o){case Qi.Items:return $p.default.createElement(vge,{key:o});case Qi.Separator:return $p.default.createElement(te.ItemsSeparator,{full:!0,key:yt()});case Qi.ResetTransformButton:return $p.default.createElement(_ge,{key:o});case Qi.KeepResolutionCheckbox:return $p.default.createElement(bge,{key:o});case Qi.CropSizeInput:return $p.default.createElement(fge,{key:o});default:return null}};return $p.default.createElement(te.ToolControlBarItems,null,t.map(o=>i(o)))});var Cge=O(({displayTitle:r})=>{let{transformTool:e}=P();return M_.default.createElement(M_.default.Fragment,null,r&&M_.default.createElement(te.Sidebar.Heading,null,e.locale.title),M_.default.createElement(xge,null))});var zf=class extends Lt.default.Component{render(){let{config:e,active:t}=this.props,i=t.tool,o=e.config.displayToolControlBarTitle;return Lt.default.createElement(te.Sidebar.Index,{reverse:e.config.order==="reverse"},Lt.default.createElement(z.Switch.Index,{type:i},Lt.default.createElement(z.Switch.Case,{value:w.LIBRARY},Lt.default.createElement(kfe,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.FILTER},Lt.default.createElement(Yhe,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.FOCUS},Lt.default.createElement(ife,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.ADJUSTMENT},Lt.default.createElement(Ahe,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.OVERLAY},Lt.default.createElement(Mfe,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.STICKER},Lt.default.createElement(jfe,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.TEXT},Lt.default.createElement(nge,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.TEXT_DESIGN},Lt.default.createElement(mge,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.FRAME},Lt.default.createElement(mfe,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.BRUSH},Lt.default.createElement(Hhe,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.TRANSFORM},Lt.default.createElement(Cge,{displayTitle:o})),Lt.default.createElement(z.Switch.Case,{value:w.CUSTOM},Lt.default.createElement(jhe,{displayTitle:o}))))}};zf=g([fe("active","config"),O],zf);var wge=Sge.default.div`
  position: absolute;
  height: 100%;
  width: ${r=>r.theme.measurements.advancedUIToolbar.width+r.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${r=>r.theme.webcam.backdrop};
  z-index: ${r=>r.theme.measurements.zIndex.disable};
`,B_=class extends Xr.default.Component{static getDerivedStateFromError(e){return console.error(e),{hasError:!0}}render(){let{config:e,active:t}=this.props;return e.isOrderDefault?Xr.default.createElement(z.Container,null,t.isWebcam?Xr.default.createElement(wge,{style:{left:0}}):null,Xr.default.createElement(Of,null),Xr.default.createElement(Bf,null),Xr.default.createElement(zf,null),Xr.default.createElement(Vc,null,Xr.default.createElement(vf,null),Xr.default.createElement(If,null))):Xr.default.createElement(z.Container,null,t.isWebcam?Xr.default.createElement(wge,{style:{right:0}}):null,Xr.default.createElement(Of,null),Xr.default.createElement(Vc,null,Xr.default.createElement(vf,null),Xr.default.createElement(If,null)),Xr.default.createElement(zf,null),Xr.default.createElement(Bf,null))}};B_=g([fe("config","active"),O],B_);var Uf=v(C("react")),Tge=v(C("styled-components"));var kge=class extends Uf.default.Component{constructor(e){super(e);this.ref=null;this.updatePosition=()=>{let{isReverse:e}=this.props,t={x:0,y:0};if(this.ref.current){let{top:i,height:o,left:n,right:s}=this.ref.current.getBoundingClientRect();t.y=i+o/4,t.x=e?window.innerWidth-s:n}this.setState({tooltipPosition:t})};this.mouseOver=e=>{this.updatePosition(),this.setState({hoverTool:e})};this.mouseOut=()=>{this.setState({hoverTool:null})};this.state={hoverTool:null,tooltipPosition:{x:0,y:0}},this.ref=Uf.default.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(e){let{isReverse:t}=this.props;t!==e.isReverse&&this.updatePosition()}render(){let{tool:e,isActive:t,isReverse:i,icon:o,label:n,onClick:s,className:a,children:l}=this.props,{hoverTool:c,tooltipPosition:u}=this.state;return Uf.default.createElement(_Xe,{ref:this.ref,onMouseOver:()=>this.mouseOver(e),onMouseOut:()=>this.mouseOut(),className:a},Uf.default.createElement(te.Toolbar.Item,{ariaLabel:n,isActive:t,onClick:()=>s(e)},o,l),Uf.default.createElement(te.Toolbar.Tooltip,{position:u,reverse:i,show:c===e},n))}},L_=kge,_Xe=Tge.default.div`
  position: relative;
`;var ET=class extends z_.default.Component{componentDidMount(){let{editor:e,storeProps:t}=this.props;this.editor=e,this.storeProps=t;let i=new Df(this.editor.configStore.config.custom.components,{advancedUICategoryCard:te.Card,advancedUIItemCard:te.Card,advancedUIToolbarItem:L_}),o={getAdvancedCategoryCard:i.getAdvancedCategoryCard,getAdvancedItemCard:i.getAdvancedItemCard,getAdvancedToolbarItem:i.getAdvancedToolbarItem,getDialog:i.getDialog,getButton:i.getButton,getColorItem:i.getColorItem,getCheckbox:i.getCheckbox};this.storeProps.custom=o,this.forceUpdate()}render(){return this.storeProps?z_.default.createElement(sb,T({},this.storeProps),z_.default.createElement(Ege.ThemeProvider,{theme:U(T({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},z_.default.createElement(B_,null))):null}};pe();ZC();var GT=v(C("react")),Z5=v(C("react-dom"));V();vt();var Ea=v(C("react"));var oYe=Ea.default.lazy(()=>Promise.resolve().then(()=>(ove(),ive))),nYe=r=>({filterTool:r.filterToolStore,focusTool:r.focusToolStore,adjustmentsTool:r.adjustmentsToolStore,overlayTool:r.overlayToolStore,frameTool:r.frameToolStore,brushTool:r.brushToolStore,transformTool:r.transformToolStore,scale:r.scale,sprite:r.spriteStore,stickerTool:r.spriteStore.stickerToolStore,textTool:r.spriteStore.textToolStore,textDesignTool:r.spriteStore.textDesignToolStore,library:r.libraryStore,modal:r.modalStore,snapping:r.snappingStore,config:r.configStore,active:r.activeStore,canvas:r.canvasStore,history:r.historyStore,editor:r}),WT=({editor:r})=>{let e=(0,Ea.useMemo)(()=>nYe(r),[r]);return r.configStore.config.layout==="basic"?Ea.default.createElement(Ea.Suspense,{fallback:Ea.default.createElement("div",null)},Ea.default.createElement(oYe,{editor:r,storeProps:e})):Ea.default.createElement(ET,{editor:r,storeProps:e})};var nve=class extends Eo{constructor(e,t){super();this.dispose=()=>{this.container&&(Z5.default.unmountComponentAtNode(this.container),this.removeAllListeners(le.EXPORT),this.removeAllListeners(le.HISTORY_UNDO),this.removeAllListeners(le.HISTORY_REDO),this.removeAllListeners(le.HISTORY_CHANGE),this.removeAllListeners(le.EDITOR_READY),this.removeAllListeners(le.ERROR_IMAGE_LOADING),this.removeAllListeners(le.IMAGE_LOAD),this.removeAllListeners(le.TOOL_ENTER),this.removeAllListeners(le.STICKER_UPLOAD_ADD),this.removeAllListeners(le.ERROR_WEBGL_CONTEXT_LOST),this.removeAllListeners(le.CROP_DIMENSIONS_CHANGE))};this.serialize=e=>this.editor.serialize(e);this.deserialize=e=>this.editor.deserialize(e);this.export=e=>this.editor.export(e);this.close=()=>this.editor.close();this.setImage=e=>this.editor.setImage(e,!0);this.getImageDimensions=()=>this.editor.getImageDimensions();this.getImageMimeType=()=>this.editor.getImageMimeType();this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.container=t,this.editor=new Bt(T({},e)),this.editor.configStore.events.on(le.EXPORT,i=>{this.emit(le.EXPORT,i)}),this.editor.configStore.events.on(le.CLOSE,()=>{this.dispose(),this.emit(le.CLOSE)}),this.editor.configStore.events.on(le.HISTORY_UNDO,()=>{this.emit(le.HISTORY_UNDO)}),this.editor.configStore.events.on(le.HISTORY_REDO,()=>{this.emit(le.HISTORY_REDO)}),this.editor.configStore.events.on(le.HISTORY_CHANGE,()=>{this.emit(le.HISTORY_CHANGE)}),this.editor.configStore.events.on(le.STICKER_UPLOAD_ADD,i=>{this.emit(le.STICKER_UPLOAD_ADD,i)}),this.editor.configStore.events.on(le.CROP_DIMENSIONS_CHANGE,i=>{this.emit(le.CROP_DIMENSIONS_CHANGE,i)})}hasChanges(){return this.editor.hasChanges()}},sve=class{constructor(){this.container=null}init(e){return new Promise((t,i)=>{if(typeof window=="undefined"){t();return}this.container=typeof e.container=="string"?document.querySelector(e.container):e.container,this.container?(this.editorApi=new nve(e,this.container),Z5.default.render(GT.default.createElement(ave,{editor:this.editorApi.editor}),this.container),this.editorApi.editor.configStore.events.on(le.EDITOR_READY,()=>{setTimeout(()=>{this.editorApi.emit(le.EDITOR_READY)},0),t(this.editorApi)}),this.editorApi.editor.configStore.events.on(le.ERROR_IMAGE_LOADING,o=>{setTimeout(()=>{this.editorApi.emit(le.ERROR_IMAGE_LOADING,o)},0),t(this.editorApi)}),this.editorApi.editor.configStore.events.on(le.ERROR_WEBGL_CONTEXT_LOST,o=>{setTimeout(()=>{this.editorApi.emit(le.ERROR_WEBGL_CONTEXT_LOST,o)},0),t(this.editorApi)}),this.editorApi.editor.configStore.events.on(le.IMAGE_LOAD,()=>{setTimeout(()=>{this.editorApi.emit(le.IMAGE_LOAD)},0),t(this.editorApi)}),this.editorApi.editor.configStore.events.on(le.TOOL_ENTER,o=>{setTimeout(()=>{this.editorApi.emit(le.TOOL_ENTER,o)},0),t(this.editorApi)})):i(new Error("Provide a container"))})}},ave=class extends GT.default.Component{componentWillUnmount(){let{editor:e}=this.props;e.engine.dispose(),e.configStore.events.removeAllListeners(le.EXPORT),e.configStore.events.removeAllListeners(le.CLOSE),e.configStore.events.removeAllListeners(le.HISTORY_UNDO),e.configStore.events.removeAllListeners(le.HISTORY_REDO),e.configStore.events.removeAllListeners(le.HISTORY_CHANGE),e.configStore.events.removeAllListeners(le.EDITOR_READY),e.configStore.events.removeAllListeners(le.ERROR_IMAGE_LOADING),e.configStore.events.removeAllListeners(le.IMAGE_LOAD),e.configStore.events.removeAllListeners(le.TOOL_ENTER),e.configStore.events.removeAllListeners(le.STICKER_UPLOAD_ADD),e.configStore.events.removeAllListeners(le.ERROR_WEBGL_CONTEXT_LOST),e.configStore.events.removeAllListeners(le.CROP_DIMENSIONS_CHANGE)}render(){let{editor:e}=this.props;return GT.default.createElement(WT,{editor:e})}},lve={init:r=>new sve().init(r)};V();var VT=v(C("react"));V();vt();var cve=class extends VT.default.Component{constructor(e){super(e);this.ui=new Eo;this.serialize=e=>this.editor.serialize(e);this.deserialize=e=>this.editor.deserialize(e);this.export=e=>this.editor.export(e);this.close=()=>this.editor.close();this.setImage=e=>this.editor.setImage(e,!0);this.getImageDimensions=()=>this.editor.getImageDimensions();this.dispose=()=>{this.ui.removeAllListeners(le.EXPORT),this.ui.removeAllListeners(le.HISTORY_UNDO),this.ui.removeAllListeners(le.HISTORY_REDO),this.ui.removeAllListeners(le.HISTORY_CHANGE),this.ui.removeAllListeners(le.EDITOR_READY),this.ui.removeAllListeners(le.ERROR_IMAGE_LOADING),this.ui.removeAllListeners(le.IMAGE_LOAD),this.ui.removeAllListeners(le.TOOL_ENTER),this.ui.removeAllListeners(le.STICKER_UPLOAD_ADD),this.ui.removeAllListeners(le.ERROR_WEBGL_CONTEXT_LOST),this.ui.removeAllListeners(le.CROP_DIMENSIONS_CHANGE)};this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.editor=new Bt(T({},e)),this.editor.configStore.events.on(le.EXPORT,t=>{this.ui.emit(le.EXPORT,t)}),this.editor.configStore.events.on(le.CLOSE,()=>{this.componentWillUnmount(),this.ui.emit(le.CLOSE)}),this.editor.configStore.events.on(le.HISTORY_UNDO,()=>{this.ui.emit(le.HISTORY_UNDO)}),this.editor.configStore.events.on(le.HISTORY_REDO,()=>{this.ui.emit(le.HISTORY_REDO)}),this.editor.configStore.events.on(le.HISTORY_CHANGE,()=>{this.ui.emit(le.HISTORY_CHANGE)}),this.editor.configStore.events.on(le.EDITOR_READY,()=>{this.ui.emit(le.EDITOR_READY)}),this.editor.configStore.events.on(le.ERROR_IMAGE_LOADING,t=>{this.ui.emit(le.ERROR_IMAGE_LOADING,t)}),this.editor.configStore.events.on(le.IMAGE_LOAD,()=>{this.ui.emit(le.IMAGE_LOAD)}),this.editor.configStore.events.on(le.TOOL_ENTER,t=>{this.ui.emit(le.TOOL_ENTER,t)}),this.editor.configStore.events.on(le.STICKER_UPLOAD_ADD,t=>{this.ui.emit(le.STICKER_UPLOAD_ADD,t)}),this.editor.configStore.events.on(le.CROP_DIMENSIONS_CHANGE,t=>{this.ui.emit(le.CROP_DIMENSIONS_CHANGE,t)}),this.editor.configStore.events.on(le.ERROR_WEBGL_CONTEXT_LOST,()=>{this.ui.emit(le.ERROR_WEBGL_CONTEXT_LOST)})}componentWillUnmount(){this.dispose()}hasChanges(){return this.editor.hasChanges()}render(){return VT.default.createElement(WT,{editor:this.editor})}},uve=r=>typeof window=="undefined"?null:VT.default.createElement(cve,T({},r));vt();ie();var sYe=()=>{let{active:r}=P();return r.newImage};ie();var aYe=()=>P().config.isLayoutAdvanced;n0({isolateGlobalState:!0});var{Container:lYe,Input:cYe,ColorItem:uYe,ColorItemBase:dYe,ColorItemBackground:pYe,ColorItemTiledBackground:mYe,ColorItemActiveOverlay:hYe,Dialog:fYe,DialogBase:gYe,DialogContainer:bYe,DialogBackdrop:yYe,DialogHeader:_Ye,DialogBody:vYe,DialogFooter:xYe,DialogSpinner:CYe}=z,{Search:SYe,Label:wYe,Checkbox:TYe,CheckboxBase:kYe,CheckboxInput:EYe,CheckboxCheckMark:IYe}=cYe,DYe=f_,OYe=f_,RYe=SYe;return FYe;})();
/*
 * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
 * Licensed under MIT
 * @license
 */
/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
