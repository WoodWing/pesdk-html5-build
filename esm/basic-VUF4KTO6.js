import{A as Fo,D as Lo,E as v,F as Oo,G as Ao,H as wo,I as Eo,J as Do,K as Mo,L as Po,M as $o,N,O as r,a,b as So,c as f,n as Io,o as p,r as c,s as go,t as yo,u as xo,v as h,w as V,x as vo,y as Uo}from"./chunk-P3RRCKHM.js";import{Ba as to,E as i,G as b,Ga as eo,Sa as x,Wa as S,X as Bo,Xa as ko,c as E,ga as oo,oa as lo,ta as mo,wa as H}from"./chunk-J7RPI7SH.js";import io from"react";import{ThemeProvider as ye}from"styled-components";import A from"react";import Ie from"styled-components";import X from"react";var Wo=a(function o(){const{config:t,active:e,custom:n}=c();const{tools:s}=t;const l=e.tool;const m=d=>{const w=t.state.config[d];if("icon"in w){const ao=w.icon;return X.createElement(ao,null)}const R=yo[d];return X.createElement(R,null)||null};const C=d=>{return t.locale[d].title};const u=(d,w)=>d&&X.createElement(r.Toolbar.Item,{onClick:()=>e.selectTool(d),key:d,label:C(d),isActive:l===d,isDisabled:!(e.image||d===i.LIBRARY||d===i.CUSTOM)},m(d))||X.createElement(r.Toolbar.Separator,{key:d+w,active:!!l});const k=n.getBasicToolbar();if(!k){return null}return X.createElement(k,{show:!!l},s.map(u))});import T from"react";import M,{useRef as zo}from"react";var Dt=({adjustmentsTool:o,custom:t})=>{const e=o.selectedAdjustmentType.toLowerCase();const n=o[e];const s=zo(false);const l=zo(n);const m=t.getButton("toolControlBarSecondaryButton");const C=u=>{if(s.current&&u!==l.current){o.toolSnapshot();s.current=false;l.current=u}};return M.createElement(r.ControlsbarContainer,{show:Boolean(e)},m&&M.createElement(m,{tool:i.ADJUSTMENT,ariaLabel:o.locale.controls.buttonReset,onClick:o.reset,icon:M.createElement(h.reset,null),label:o.locale.controls.buttonReset}),M.createElement(r.Other.ControlsWrapper,null,M.createElement(p.Spacer,{count:2}),M.createElement(r.Slider,{"aria-hidden":!e,adjust:true,style:{width:"280px"},label:o.selectedOptionLabel,value:n,onChange:u=>{o.editAdjustments({type:e,value:u});s.current=n!==u},onMouseUp:C,onTouchEnd:C,snap:0}),M.createElement(p.Spacer,{count:2}),M.createElement(r.BarSeparator,null)),M.createElement(r.Other.EmptyDiv,null))};var jo=f("adjustmentsTool","custom")(a(Dt));import U from"react";import ro from"react";var Ho=a(()=>{const{brushTool:o}=c();const{colorList:t,locale:e,localeColor:n}=o;const s=e.controls;const l=n.colorPicker;return ro.createElement(ro.Fragment,null,ro.createElement(p.Input.Selection,{showLabel:false,label:s.selectColor},ro.createElement(v,{tool:i.BRUSH,activeColor:o.color,colors:t,labelsColor:l,colorPickerDirection:"top",onChange:o.changeColor})))});import Mt from"react";var No=a(()=>{const{brushTool:o}=c();const{locale:t}=o;const e=t.controls;return Mt.createElement(r.Slider,{"data-test":x.BrushHardness,style:{width:"280px"},showLabel:false,label:e.sliderHardness,value:o.hardness,min:0,max:1,onChange:o.changeHardness})});import Pt from"react";var Vo=a(()=>{const{brushTool:o}=c();const{locale:t}=o;const e=t.controls;return Pt.createElement(r.Slider,{"data-test":x.BrushSize,style:{width:"280px"},showLabel:false,label:e.sliderSize,value:o.relativeSize,min:1,max:100,divider:1,onChange:o.changeRelativeSize})});var $t=r.TabWrapper;var{Tab:co}=r;var Xo=a(()=>{const{brushTool:o,custom:t}=c();const{locale:e,config:n}=o;const{basicUIToolControlBarTabsOrder:s}=n;const l=e.controls;const m=t.getButton("toolControlBarSecondaryButton");const C=u=>{switch(u){case to.BrushColor:return U.createElement(co,{key:u,label:l.tabColor},U.createElement(Ho,null));case to.BrushSize:return U.createElement(co,{key:u,label:l.tabSize},U.createElement(Vo,null));case to.BrushHardness:return U.createElement(co,{key:u,label:l.tabHardness},U.createElement(No,null));default:return null}};return U.createElement(r.ControlsbarContainer,{style:{justifyContent:"center"},show:true},m&&U.createElement(m,{tool:i.BRUSH,ariaLabel:l.buttonReset,onClick:o.reset,icon:U.createElement(h.reset,null),isDisabled:!o.isDirty,label:l.buttonReset}),U.createElement(r.Other.ControlsWrapper,null,U.createElement(p.Input.Form,null,U.createElement($t,null,s.map(u=>C(u))))))});import G from"react";import Y from"react";var Yo=a(()=>{const{filterTool:o}=c();const{state:t}=o;const e=o.locale.controls;const n=()=>{o.toolSnapshot()};return Y.createElement(r.Other.ControlsWrapper,null,Y.createElement(p.Spacer,{count:2}),Y.createElement(r.Slider,{"aria-hidden":!o.isOptionSelected,style:{width:"280px"},label:e.sliderIntensity,value:t.intensity,min:0,max:1,onMouseUp:n,onTouchEnd:n,onChange:o.changeIntensity,snap:t.isDuotone?.5:null}),Y.createElement(p.Spacer,{count:2}),Y.createElement(r.BarSeparator,null))});var Go=a(()=>{const{filterTool:o,custom:t}=c();const{config:e}=o;const{basicUIToolControlBarTabsOrder:n}=e;const s=t.getButton("toolControlBarSecondaryButton");const l=m=>{switch(m){case Bo.FilterIntensity:return G.createElement(Yo,{key:m});default:return null}};return G.createElement(r.ControlsbarContainer,{show:o.isOptionSelected},s&&G.createElement(s,{tool:i.FILTER,ariaLabel:o.locale.controls.buttonReset,onClick:o.reset,icon:G.createElement(h.reset,null),label:o.locale.controls.buttonReset}),n.map(m=>l(m)),G.createElement(r.Other.EmptyDiv,null))});import P from"react";var _o=a(()=>{const{focusTool:o,custom:t}=c();const e=o.locale.controls;const n=t.getButton("toolControlBarSecondaryButton");const s=()=>{o.toolSnapshot(e.sliderIntensity)};return P.createElement(r.ControlsbarContainer,{show:o.isOptionSelected},n&&P.createElement(n,{tool:i.FOCUS,ariaLabel:e.buttonReset,onClick:o.reset,icon:P.createElement(h.reset,null),label:e.buttonReset}),P.createElement(r.Other.ControlsWrapper,null,P.createElement(p.Spacer,{count:2}),P.createElement(r.Slider,{"aria-hidden":!o.isOptionSelected,style:{width:"280px"},label:e.sliderIntensity,value:o.relativeIntensity,min:0,max:100,divider:1,onChange:o.changeRelativeIntensity,onMouseUp:s,onTouchEnd:s}),P.createElement(p.Spacer,{count:2}),P.createElement(r.BarSeparator,null)),P.createElement(r.Other.EmptyDiv,null))});import I from"react";import Ko from"react";var Jo=a(()=>{const{frameTool:o}=c();const t=o.locale.controls;const e=o.localeColor.colorPicker;const{colorList:n}=o;return Ko.createElement(p.Input.Selection,{label:t.selectColor,showLabel:false},Ko.createElement(v,{tool:i.FRAME,activeColor:o.color,colors:n,labelsColor:e,colorPickerDirection:"top",onChange:o.changeColor,onAddSnapshot:o.colorSnapshot}))});import Wt from"react";var qo=a(()=>{const{frameTool:o}=c();const t=o.locale.controls;const e=()=>{o.toolSnapshot(t.sliderOpacity)};return Wt.createElement(r.Slider,{"aria-hidden":!o.isOptionSelected,showLabel:false,style:{width:"280px"},label:t.sliderOpacity,value:o.opacity,min:0,max:1,onChange:o.changeOpacity,onMouseUp:e,onTouchEnd:e})});import zt from"react";var Qo=a(()=>{const{frameTool:o}=c();const t=o.locale.controls;const e=()=>{o.toolSnapshot(t.sliderSize)};return zt.createElement(r.Slider,{"aria-hidden":!o.isOptionSelected,showLabel:false,style:{width:"280px"},label:t.sliderSize,value:o.size,min:o.minSize,max:o.maxSize,divider:1,onChange:o.changeWidth,onMouseUp:e,onTouchEnd:e})});var jt=r.TabWrapper;var{Tab:po}=r;var Zo=a(()=>{const{frameTool:o,custom:t}=c();const e=o.locale.controls;const{tintable:n,config:s}=o;const{basicUIToolControlBarTabsOrder:l}=s;const m=t.getButton("toolControlBarSecondaryButton");const C=u=>{switch(u){case oo.FrameOpacity:return I.createElement(po,{key:u,label:e.tabOpacity},I.createElement(qo,null));case oo.FrameSize:return I.createElement(po,{key:u,label:e.tabSize},I.createElement(Qo,null));case oo.FrameColor:return n&&I.createElement(po,{key:u,label:e.tabColor},I.createElement(Jo,null));default:return null}};return I.createElement(r.ControlsbarContainer,{show:o.isOptionSelected},m&&I.createElement(m,{tool:i.FRAME,ariaLabel:e.buttonReset,onClick:o.reset,icon:I.createElement(h.reset,null),label:e.buttonReset}),I.createElement(r.Other.ControlsWrapper,null,I.createElement(p.Spacer,null),I.createElement(jt,null,l.map(u=>C(u))),I.createElement(r.BarSeparator,null)),I.createElement(r.Other.EmptyDiv,null))});import $ from"react";import Ht,{css as Nt}from"styled-components";var Vt=Ht(r.ControlsbarContainer)`
  ${o=>o.firstChildMargin&&Nt`
      > :first-child {
        margin-right: 16px;
      }
    `}
`;var Xt=({library:o,active:t,custom:e})=>{const n=o.locale.controls.placeholderSearch;const{config:s}=o;const l=e.getButton("toolControlBarPrimaryButton");const m=d=>{o.fetchImages(d)};const C=d=>{const{files:w}=d.target;if(w.length){const R=new FileReader;R.onload=ao=>{t.newImage(ao.target.result)};R.readAsDataURL(w[0])}};const u=()=>{t.selectWebcam(true)};const k=()=>{const d=document.getElementById("fileUpload");if(d){d.click()}};return $.createElement(Vt,{firstChildMargin:s.enableWebcam&&!o.libraryProvider,show:true},s.enableUpload&&l&&$.createElement(l,{tool:i.LIBRARY,"data-test":x.LibraryUploadButton,ariaLabel:o.locale.controls.buttonUpload,onClick:k,icon:$.createElement(h.uploadImage,null),label:o.locale.controls.buttonUpload},$.createElement(p.Input.File,{onChange:C})),o.libraryProvider&&$.createElement(r.Other.ControlsWrapper,null,$.createElement(p.Input.Search,{onChange:m,placeholder:n})),s.enableWebcam&&$.createElement($o,{tool:i.LIBRARY,onClick:u,icon:$.createElement(h.openWebcam,null),label:o.locale.controls.buttonWebcamOpen}),$.createElement(r.BarSeparator,null))};var Ro=f("library","active","custom")(a(Xt));import F from"react";import Yt from"react";var ot=a(()=>{const{overlayTool:o}=c();const t=o.locale.controls;const{blendMode:e,allBlendModes:n}=o;const s=l=>{o.changeBlendMode(l)};return Yt.createElement(p.Input.CarouselSlider,{showLabel:false,label:t.carouselBlendMode,defaultIdentifier:e,onSelect:s,list:n})});import Gt from"react";var tt=a(()=>{const{overlayTool:o}=c();const t=o.locale.controls;const{state:e}=o;const n=()=>{o.toolSnapshot()};return Gt.createElement(r.Slider,{"aria-hidden":!o.isOptionSelected,showLabel:false,style:{width:"280px"},label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:o.changeOpacity,onMouseUp:n,onTouchEnd:n})});var _t=r.TabWrapper;var{Tab:et}=r;var rt=a(()=>{const{overlayTool:o,custom:t}=c();const{config:e}=o;const{basicUIToolControlBarTabsOrder:n}=e;const s=o.locale.controls;const l=t.getButton("toolControlBarSecondaryButton");const m=C=>{switch(C){case lo.OverlayBlendMode:return F.createElement(et,{key:C,label:s.tabBlendMode},F.createElement(ot,null));case lo.OverlayOpacity:return F.createElement(et,{key:C,label:s.tabOpacity},F.createElement(tt,null));default:return null}};return F.createElement(r.ControlsbarContainer,{show:o.isOptionSelected},l&&F.createElement(l,{tool:i.OVERLAY,ariaLabel:s.buttonReset,onClick:o.reset,icon:F.createElement(h.reset,null),label:s.buttonReset}),F.createElement(r.Other.ControlsWrapper,null,F.createElement(p.Spacer,null),F.createElement(_t,null,n.map(C=>m(C))),F.createElement(r.BarSeparator,null)),F.createElement(r.Other.EmptyDiv,null))});import L from"react";import Jt from"styled-components";import no from"react";var nt=a(()=>{const{stickerTool:o}=c();const t=o.locale.controls;const e=o.localeColor.colorPicker;const{colorList:n}=o;return no.createElement(no.Fragment,null,no.createElement(p.Input.Selection,{isDisabled:!o.isStickerSelected,showLabel:false,label:t.selectColor},no.createElement(v,{tool:i.STICKER,activeSprite:o.id,activeColor:o.tintColor,colors:n,labelsColor:e,isDisabled:!o.isStickerSelected,colorPickerDirection:"top",onChange:o.changeTintColor,onAddSnapshot:o.tintColorSnapshot})))});import Kt from"react";var st=a(()=>{const{stickerTool:o}=c();const t=o.locale.controls;const e=()=>{o.toolSnapshot()};return Kt.createElement(r.Slider,{isDisabled:!o.isStickerSelected,showLabel:false,style:{width:"280px"},label:t.sliderOpacity,value:o.opacity,min:0,max:1,onMouseUp:e,onTouchEnd:e,onChange:o.changeOpacity})});var qt=r.TabWrapper;var{Tab:it}=r;var Qt=Jt.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:true})`
  ${Io.VisuallyHidden}
`;var at=a(()=>{const{stickerTool:o,custom:t}=c();const{config:e}=o;const{basicUIToolControlBarTabsOrder:n}=e;const s=o.locale.controls;const l=t.getButton("toolControlBarPrimaryButton");const m=()=>{const d=document.getElementById("fileUpload");if(d){d.value=null;d.click()}};const C=d=>{const{files:w}=d.target;o.addFiles(w)};const u=d=>{switch(d){case mo.StickerColor:if(!o.tintable)return null;return L.createElement(it,{key:d,label:s.tabColor},L.createElement(nt,null));case mo.StickerOpacity:return L.createElement(it,{key:d,label:s.tabOpacity},L.createElement(st,null));default:return null}};const k=()=>{if(o.isCustomStickerEnabled&&l){return L.createElement(l,{tool:i.STICKER,ariaLabel:s.buttonUpload,onClick:m,icon:L.createElement(h.uploadImage,null),label:s.buttonUpload},L.createElement(Qt,{onChange:C}))}return null};return L.createElement(r.ControlsbarContainer,{show:true},k(),L.createElement(r.Other.ControlsWrapper,null,L.createElement(qt,null,n.map(d=>u(d))),L.createElement(r.BarSeparator,null)),L.createElement(r.Other.EmptyDiv,null))});import B from"react";import lt from"react";var mt=a(()=>{const{textTool:o}=c();const{backgroundColorList:t}=o;const e=o.locale.controls;const n=o.localeColor.colorPicker;return lt.createElement(p.Input.Selection,{isDisabled:!o.isTextSelected,showLabel:false,label:e.selectBackgroundColor},lt.createElement(v,{tool:i.TEXT,activeSprite:o.id,activeColor:o.backgroundColor,colors:t,labelsColor:n,colorPickerDirection:"top",isDisabled:!o.isTextSelected,onChange:o.changeBackgroundColor,onAddSnapshot:o.backgroundColorSnapshot}))});import Zt from"react";import Rt from"styled-components";var oe=Rt(p.Input.NumericInput)`
  max-width: 55px;
  > div > input {
    text-align: center;
  }
`;var ct=a(()=>{const{textTool:o}=c();const t=e=>{const n=e?parseFloat(e):0;o.setFontSize(Math.max(10,Math.min(690,n)))};return Zt.createElement(oe,{value:o.fontSize.toFixed(0),onSubmit:t,isDisabled:!o.isTextSelected})});import te from"react";var pt=a(()=>{const{textTool:o}=c();const t=o.locale.controls;const e=()=>{o.toolSnapshot()};return te.createElement(r.Slider,{isDisabled:!o.isTextSelected,showLabel:false,label:t.sliderLineSpacing,value:o.lineHeight,min:.5,max:3,onChange:o.changeLineHeight,onMouseUp:e,onTouchEnd:e,snap:1,divider:1,decimal:1})});import Co from"react";var Ct=a(()=>{const{textTool:o,custom:t}=c();const e=o.locale.controls;const n=["left","center","right"];const s=t.getButton("textAlignment");return Co.createElement(p.Input.Selection,{isDisabled:!o.isTextSelected,showLabel:false,label:e.selectAlignment,"data-test":x.TextAlignment},n.map(l=>{const m=xo[l];return Co.createElement(s,{tool:l,isDisabled:!o.isTextSelected,ariaLabel:`Align ${l}`,isActive:l===o.alignment,key:l,icon:Co.createElement(m,null),onClick:()=>o.changeAlignment(l)})}))});import dt from"react";var ut=a(()=>{const{textTool:o}=c();const{colorList:t}=o;const e=o.locale.controls;const n=o.localeColor.colorPicker;return dt.createElement(p.Input.Selection,{isDisabled:!o.isTextSelected,showLabel:false,label:e.selectFontColor},dt.createElement(v,{tool:i.TEXT,activeSprite:o.id,activeColor:o.textColor,colors:t,labelsColor:n,colorPickerDirection:"top",isDisabled:!o.isTextSelected,onChange:o.changeColor,onAddSnapshot:o.colorSnapshot}))});var ee=r.ResponsiveTabWrapper;var ft=a(()=>{const{textTool:o,custom:t}=c();const{config:e}=o;const{basicUIToolControlBarTabsOrder:n}=e;const s=o.locale.controls;const l=t.getButton("toolControlBarPrimaryButton");const m=C=>{switch(C){case H.FontSize:return B.createElement(N,{key:C,label:s.tabFontSize},B.createElement(ct,null));case H.TextAligment:return B.createElement(N,{key:C,label:s.tabAlignment},B.createElement(Ct,null));case H.TextColor:return B.createElement(N,{key:C,label:s.tabColor},B.createElement(ut,null));case H.BackgroundColor:return B.createElement(N,{key:C,label:s.tabBgColor},B.createElement(mt,null));case H.LineSpacing:return B.createElement(N,{key:C,label:s.tabLineHeight},B.createElement(pt,null));default:return null}};return B.createElement(r.ControlsbarContainer,{show:true},B.createElement(l,{tool:i.TEXT,ariaLabel:s.buttonNew,onClick:o.add,icon:B.createElement(h.addText,null),label:s.buttonNew}),B.createElement(r.Other.ControlsWrapper,null,B.createElement(p.Spacer,null),B.createElement(ee,null,n.map(C=>m(C))),B.createElement(r.BarSeparator,null)),B.createElement(r.Other.EmptyDiv,null))});import W from"react";var re=({textDesignTool:o,custom:t})=>{const e=o.locale.controls;const n=o.localeColor.colorPicker;const{colorList:s}=o;const l=t.getButton("toolControlBarSecondaryButton");const m=t.getButton("toolControlBarPrimaryButton");return W.createElement(r.ControlsbarContainer,{show:true},m&&W.createElement(m,{tool:i.TEXT_DESIGN,ariaLabel:e.buttonNew,onClick:o.add,icon:W.createElement(h.addText,null),label:e.buttonNew}),W.createElement(r.Other.ControlsWrapper,null,W.createElement(p.Input.Selection,{isDisabled:!o.isTextDesignSelected,label:e.selectColor},W.createElement(v,{tool:i.TEXT_DESIGN,activeSprite:o.id,activeColor:o.color,colors:s,labelsColor:n,colorPickerDirection:"top",isDisabled:!o.isTextDesignSelected,onChange:o.changeColor,onAddSnapshot:o.colorSnapshot}))),l&&W.createElement(l,{tool:i.TEXT_DESIGN,ariaLabel:e.buttonShuffle,onClick:o.changeSeed,icon:W.createElement(h.shuffle,null),label:e.buttonShuffle}),W.createElement(r.BarSeparator,null))};var bt=f("textDesignTool","custom")(a(re));import g from"react";import ne from"react";var ht=a(()=>{const{transformTool:o}=c();const t=o.locale.controls;const{forceDimensions:e}=o;return ne.createElement(Do,{isDisabled:e,showLabel:false,valueHeight:o.localOutputHeight,valueWidth:o.localOutputWidth,onSubmitWidth:o.onPixelWidth,onSubmitHeight:o.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth})});import se from"react";var Tt=()=>se.createElement(Oo,null);import ie from"react";var St=a(()=>{const{transformTool:o,custom:t}=c();const e=o.locale.controls;const{forceDimensions:n}=o;const s=t.getCheckbox();if(!s){return null}return ie.createElement(s,{tool:i.TRANSFORM,isDisabled:n,style:{paddingTop:"5px",justifyContent:"center"},value:o.lockResolution,checkMarkPosition:"left",label:e.checkboxKeepResolution,onClick:o.changeLockResolution})});var ae=r.ResponsiveTabWrapper;var{Tab:uo}=r;var Bt=a(()=>{const{transformTool:o,custom:t}=c();const{config:e}=o;const{basicUIToolControlBarTabsOrder:n}=e;const s=o.locale.controls;const l=t.getButton("toolControlBarSecondaryButton");const m=C=>{switch(C){case eo.FlipRotate:return g.createElement(uo,{key:C,label:s.tabFlipAndRotate},g.createElement(Tt,null));case eo.Resolution:return g.createElement(uo,{key:C,label:s.tabResolution},g.createElement(St,null));case eo.CropSize:return g.createElement(uo,{key:C,label:s.tabCropSize},g.createElement(ht,null));default:return null}};return g.createElement(r.ControlsbarContainer,{show:true},l&&g.createElement(l,{tool:i.TRANSFORM,ariaLabel:o.locale.controls.buttonReset,onClick:o.reset,icon:g.createElement(h.reset,null),label:o.locale.controls.buttonReset}),g.createElement(r.Other.ControlsWrapper,null,g.createElement(p.Spacer,null),g.createElement(ae,null,n.map(C=>m(C))),g.createElement(r.BarSeparator,null)),g.createElement(r.Other.EmptyDiv,null))});var kt=a(function o(){const{active:t,custom:e}=c();const n=t.tool;const s=e.getBasicToolControlBar();if(!s){return null}return T.createElement(s,{show:!!n},T.createElement(p.Switch.Index,{type:n},T.createElement(p.Switch.Case,{value:i.FILTER},T.createElement(Go,null)),T.createElement(p.Switch.Case,{value:i.FOCUS},T.createElement(_o,null)),T.createElement(p.Switch.Case,{value:i.ADJUSTMENT},T.createElement(jo,null)),T.createElement(p.Switch.Case,{value:i.OVERLAY},T.createElement(rt,null)),T.createElement(p.Switch.Case,{value:i.STICKER},T.createElement(at,null)),T.createElement(p.Switch.Case,{value:i.TEXT},T.createElement(ft,null)),T.createElement(p.Switch.Case,{value:i.TEXT_DESIGN},T.createElement(bt,null)),T.createElement(p.Switch.Case,{value:i.LIBRARY},T.createElement(Ro,null)),T.createElement(p.Switch.Case,{value:i.FRAME},T.createElement(Zo,null)),T.createElement(p.Switch.Case,{value:i.BRUSH},T.createElement(Xo,null)),T.createElement(p.Switch.Case,{value:i.TRANSFORM},T.createElement(Bt,null))))});import O,{useMemo as ke}from"react";import _ from"react";import le from"styled-components";var me=le.div`
  position: relative;
  top: -8px;
  color: ${o=>o.theme.card.foreground};
`;var ce=({adjustmentsTool:o})=>{const t=(e,n)=>{const s=vo[e.identifier];return _.createElement(r.Card,{"data-test":e.identifier,tool:i.ADJUSTMENT,type:b.MEDIUM,onClick:()=>o.toggleOptionSelection(e.identifier),isActive:e.identifier===o.selectedAdjustmentType,key:`${e.identifier}-${n}`,label:e.name,style:{animationDelay:`${S(n)}s`}},_.createElement(me,null,_.createElement(s,null)),_.createElement(r.CardLabel,null,o.locale.items[e.identifier]||e.name))};return _.createElement(r.CardContainer,null,o.items.map(t))};var It=f("adjustmentsTool")(a(ce));import pe from"react";var gt=()=>{const{config:o}=c();const t=o.state.config[i.CUSTOM].toolControlBar;return pe.createElement(t,{language:o.state.locale[i.CUSTOM]})};import z from"react";var K=class extends z.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{filterTool:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{const{filterTool:n}=this.props;return z.createElement(r.Card,{tool:i.FILTER,type:b.MEDIUM,onClick:()=>n.selectFilter(t.identifier,t.defaultIntensity),isActive:n.identifier===t.identifier,key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,style:{animationDelay:`${S(e)}s`}},z.createElement(r.CardLabel,{withBackground:true},n.locale.categories[t.identifier]||n.locale.items[t.identifier]||t.name))};this.renderCategory=(t,e)=>{const{filterTool:n}=this.props;const{selectedCategoryIdentifier:s}=n;const l=s===t.identifier;if(!t.items)return null;return z.createElement(r.CategoryContainer,{key:t.identifier},z.createElement(r.Card,{tool:i.FILTER,type:b.LARGE,onClick:()=>this.onCategoryClick(t.identifier),image:t.thumbnailURI,label:t.name,style:{animationDelay:`${S(e)}s`}},z.createElement(r.CardLabel,{withBackground:true},t.name)),z.createElement(r.ExpandableContainer,{show:l},t.items.map(this.renderItem)))}}render(){const{filterTool:t}=this.props;const{categories:e,config:n,items:s}=t;if(n.flattenCategories)return z.createElement(r.CardContainer,null,s.map(this.renderItem));return z.createElement(r.CardContainer,null,e.map(this.renderCategory))}};K=E([f("filterTool","active"),a],K);import fo from"react";var Ce=({focusTool:o})=>{const t=n=>{o.selectFocus(n)};const e=(n,s)=>fo.createElement(r.Card,{isActive:n.identifier===o.identifier,tool:i.FOCUS,type:b.MEDIUM,onClick:()=>t(n.identifier),key:`${n.identifier}-${s}`,image:n.thumbnailURI,label:n.name,style:{animationDelay:`${S(s)}s`}},fo.createElement(r.CardLabel,{withBackground:true},o.locale.items[n.identifier]||n.name));return fo.createElement(r.CardContainer,null,o.items.map(e))};var yt=f("focusTool")(a(Ce));import bo from"react";var de=({frameTool:o})=>{const t=o.identifier;const e=(n,s)=>bo.createElement(r.Card,{tool:i.FRAME,type:b.MEDIUM,onClick:()=>o.selectFrame(n.identifier),isActive:n.identifier===t,key:`${n.identifier}-${s}`,image:n.thumbnailURI,label:n.name,style:{animationDelay:`${S(s)}s`,backgroundSize:"60%"}}," ",bo.createElement(r.CardLabel,{hidden:true},o.locale.items[n.identifier]||n.name));return bo.createElement(r.CardContainer,null,o.items.map(e))};var xt=f("frameTool")(a(de));import D from"react";import ue from"styled-components";var vt=ue.p`
  height: ${o=>o.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`;var J=class extends D.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{library:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{const{active:n}=this.props;return D.createElement(r.Card,{tool:i.LIBRARY,type:b.MEDIUM,onClick:()=>n.newImage(t.rawUrl),key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,style:{animationDelay:`${S(e)}s`}})};this.renderCategory=(t,e)=>{const{library:n}=this.props;const{selectedCategoryIdentifier:s}=n;const l=s===t.identifier;if(!t.items)return null;return D.createElement(r.CategoryContainer,{key:t.identifier},D.createElement(r.Card,{tool:i.LIBRARY,type:b.LARGE,onClick:()=>this.onCategoryClick(t.identifier),image:t.thumbnailURI,label:t.name,style:{animationDelay:`${S(e)}s`}},D.createElement(r.CardLabel,{withBackground:true},t.name)),D.createElement(r.ExpandableContainer,{show:l},t.items.map(this.renderItem)))}}render(){const{library:t}=this.props;const{query:e,categories:n,items:s,locale:l,config:m}=t;if(e){return s.length?D.createElement(r.CardContainer,null,s.map(this.renderItem)):D.createElement(vt,{"data-test":x.NoResult},l.controls.noResults)}if(m.flattenCategories)return D.createElement(r.CardContainer,null,s.map(this.renderItem));return D.createElement(r.CardContainer,null,n.map(this.renderCategory))}};J=E([f("library","active"),a],J);import ho from"react";var fe=({overlayTool:o})=>{const{identifier:t,items:e,selectOverlay:n,locale:s}=o;const l=(m,C)=>ho.createElement(r.Card,{tool:i.OVERLAY,type:b.MEDIUM,onClick:()=>n(m.identifier),isActive:m.identifier===t,key:`${m.identifier}-${C}`,image:m.thumbnailURI,label:m.name,style:{animationDelay:`${S(C)}s`}},ho.createElement(r.CardLabel,{withBackground:true},s.items[m.identifier]||m.name));return ho.createElement(r.CardContainer,null,e.map(l))};var Ut=f("overlayTool")(a(fe));import j from"react";var q=class extends j.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{stickerTool:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{const{stickerTool:n}=this.props;return j.createElement(r.Card,{tool:i.STICKER,type:b.MEDIUM,onClick:()=>n.add(t.identifier),key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,style:{backgroundSize:"55%",animationDelay:`${ko(e)}s`}},j.createElement(r.CardLabel,{hidden:true},n.locale.items[t.identifier]||t.name))};this.renderCategory=(t,e)=>{const{stickerTool:n}=this.props;const{selectedCategoryIdentifier:s,locale:l}=n;const m=s===t.identifier;if(!t.items)return null;return j.createElement(r.CategoryContainer,{key:t.identifier},j.createElement(r.Card,{tool:i.STICKER,type:b.LARGE,onClick:()=>this.onCategoryClick(t.identifier),image:t.thumbnailURI,label:t.name,style:{animationDelay:`${S(e)}s`}},j.createElement(r.CardLabel,{withBackground:true},l.categories[t.identifier]||t.name)),j.createElement(r.ExpandableContainer,{show:m},t.items.map(this.renderItem)))}}render(){const{stickerTool:t}=this.props;const{categories:e,items:n,config:s}=t;if(s.flattenCategories)return j.createElement(r.CardContainer,null,n.map(this.renderItem));return j.createElement(r.CardContainer,null,e.map(this.renderCategory))}};q=E([f("stickerTool","active"),a],q);import so from"react";import be from"styled-components";var he=be.div`
  font-size: 20px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: left top;
`;var Ft=class extends so.Component{constructor(){super(...arguments);this.getWidth=({fontFamily:t,fontStyle:e,fontWeight:n},s)=>{const l=document.createElement("canvas");const m=l.getContext("2d");m.font=`${e} ${n} 20px ${t}`;m.fillText(s,0,0);return m.measureText(s).width};this.renderItem=(t,e)=>{const{config:n,textTool:s}=this.props;const{fontFamily:l,fontWeight:m,fontStyle:C,identifier:u}=t;const k=`${t.fontFamily} ${Fo.getDisplayFontStyle(t)}`;const d=this.getWidth(t,k);const w=(n.measurements.basicCard.medium.width-20)/d;return so.createElement(r.Card,{tool:i.TEXT,type:b.MEDIUM,onClick:()=>s.changeFont(u),isDisabled:!this.textTool.isTextSelected,isActive:s.identifier===u,key:`${t.identifier}-${e}`,label:k,style:{animationDelay:`${S(e)}s`}},so.createElement(he,{style:{transform:`scale(${w}) translate(-50%, -50%)`,fontFamily:l,fontStyle:C,fontWeight:m}},k))}}get textTool(){return this.props.textTool}render(){const{textTool:t}=this.props;const{fontsLoaded:e,fontFamilies:n}=t;if(!e)return null;return so.createElement(r.CardContainer,null,n.map(this.renderItem))}};var Lt=f("textTool","config")(a(Ft));import To from"react";var Te=({textDesignTool:o})=>{const{items:t,changeIdentifier:e,isTextDesignSelected:n,identifier:s}=o;const l=(m,C)=>{return To.createElement(r.Card,{tool:i.TEXT_DESIGN,type:b.MEDIUM,onClick:()=>e(m.identifier),isDisabled:!n,isActive:s===m.identifier,key:`${m.identifier}-${C}`,image:m.thumbnailURI,label:m.name,style:{animationDelay:`${S(C)}s`,backgroundSize:"60%"}},To.createElement(r.CardLabel,{hidden:true},m.name))};return To.createElement(r.CardContainer,null,t.map(l))};var Ot=f("textDesignTool")(a(Te));import y from"react";import At from"styled-components";var Se=At.div`
  svg {
    margin-bottom: 12px;
  }
`;var Be=At.div`
  svg {
    width: ${o=>o.theme.measurements.basicCard.medium.height}px;
    height: ${o=>o.theme.measurements.basicCard.medium.height}px;
  }

  ${go} {
    width: ${o=>o.theme.measurements.basicCard.medium.width-32}px;
    height: ${o=>o.theme.measurements.basicCard.medium.height-32}px;
    padding: 6px 0px 24px;
  }
`;var Q=class extends y.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{transformTool:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{const{transformTool:n,config:s}=this.props;const{locale:l,identifier:m}=n;const C=n.checkIfTransformThumbnailExits(t.thumbnailURI);const u=V.crops[t.identifier]||V.crops.imgly_transform_common_custom;const k=y.createElement(r.CardLabel,null,l.items[t.identifier]||t.name);const d=C?k:y.createElement(Be,null,y.createElement(u,{main:s.theme.transform.crops.main,highlight:s.theme.transform.crops.highlight,shadow:s.theme.transform.crops.shadow}),k);return y.createElement(r.Card,{tool:i.TRANSFORM,type:b.MEDIUM,onClick:()=>n.changeIdentifier(t.identifier,true),key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,isActive:t.identifier===m,style:{backgroundSize:"55%",animationDelay:`${S(e)}s`}},d)};this.renderCategory=(t,e)=>{const{transformTool:n}=this.props;const{selectedCategoryIdentifier:s,locale:l}=n;const m=s===t.identifier;if(!t.items)return null;const C=n.checkIfTransformThumbnailExits(t.thumbnailURI);const u=y.createElement(r.CardLabel,null,l.categories[t.identifier]||t.name);const k=C?u:y.createElement(Se,null,V.categories[t.identifier]&&y.createElement(V.categories[t.identifier]),u);return y.createElement(r.CategoryContainer,{key:t.identifier},y.createElement(r.Card,{tool:i.TRANSFORM,type:b.LARGE,onClick:()=>this.onCategoryClick(t.identifier),image:C?t.thumbnailURI:"",label:t.name,style:{animationDelay:`${S(e)}s`}},k),y.createElement(r.ExpandableContainer,{show:m},t.items.map(this.renderItem)))}}render(){const{transformTool:t}=this.props;const{categories:e,config:n,items:s}=t;if(n.flattenCategories)return y.createElement(r.CardContainer,null,s.map(this.renderItem));return y.createElement(r.CardContainer,null,e.map(this.renderCategory))}};Q=E([f("transformTool","config"),a],Q);var wt=a(function o(){const{active:t,library:e,custom:n}=c();const s=t.tool;const l=ke(()=>{switch(s){case i.LIBRARY:return O.createElement(J,null);case i.FILTER:return O.createElement(K,null);case i.FOCUS:return O.createElement(yt,null);case i.ADJUSTMENT:return O.createElement(It,null);case i.OVERLAY:return O.createElement(Ut,null);case i.STICKER:return O.createElement(q,null);case i.TEXT:return O.createElement(Lt,null);case i.TEXT_DESIGN:return O.createElement(Ot,null);case i.FRAME:return O.createElement(xt,null);case i.TRANSFORM:return O.createElement(Q,null);case i.CUSTOM:return O.createElement(gt,null);default:return null}},[s]);const m=n.getBasicToolItemsBar();if(!m||s===i.BRUSH||s===i.LIBRARY&&!e.libraryProvider){return null}return O.createElement(m,{show:!!s},l)});var ge=Ie.div`
  position: absolute;
  width: 100%;
  height: ${o=>o.theme.measurements.basicUIToolControlBar.maxHeight}px;
  bottom: 0;
  left: 0;
  background: ${o=>o.theme.webcam.backdrop};
  z-index: ${o=>o.theme.measurements.zIndex.disable};
`;var Z=class extends A.Component{static getDerivedStateFromError(t){console.error(t);return{hasError:true}}render(){const{active:t}=this.props;return A.createElement(p.Container,{"data-test":x.EditorContainer},t.isWebcam?A.createElement(ge,null):null,A.createElement(Eo,null),A.createElement(Uo,null,A.createElement(Lo,null),A.createElement(Po,null,t.isWebcam?A.createElement(Mo,null):null,t.image&&A.createElement(Ao,null)),A.createElement(kt,null),A.createElement(wt,null),A.createElement(Wo,null)))}};Z=E([f("active"),a],Z);var Et=class extends io.Component{constructor(){super(...arguments);this.componentWillUnmount=()=>{this.editor.cleanUpCanvasMemory()}}componentDidMount(){const{editor:t,storeProps:e}=this.props;this.editor=t;this.storeProps=e;const n=new wo(this.editor.configStore.config.custom.components,{basicUIToolbar:r.Toolbar.Index,basicUIToolControlBar:r.Controlsbar,basicUIToolItemsBar:r.Itemsbar});const s={getDialog:n.getDialog,getButton:n.getButton,getColorItem:n.getColorItem,getCheckbox:n.getCheckbox,getBasicToolbar:n.getBasicToolbar,getBasicToolControlBar:n.getBasicToolControlBar,getBasicToolItemsBar:n.getBasicToolItemsBar};this.storeProps.custom=s;this.forceUpdate()}render(){return this.storeProps?io.createElement(So,{...this.storeProps},io.createElement(ye,{theme:{...this.editor.configStore.theme,measurements:this.editor.configStore.measurements}},io.createElement(Z,null))):null}};export{Et as default};
