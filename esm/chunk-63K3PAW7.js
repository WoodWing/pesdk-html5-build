import{$ as Pd,$a as Jd,A as nr,Aa as zo,B as ke,Ba as $d,C as je,Ca as v,Da as Vd,E as lt,Ea as Wd,F as Id,Fa as I,Ga as Da,H as Md,Ha as le,Ia as It,L as Dd,La as Ud,M as Ma,Ma as jd,Na as Ie,O as y,Oa,P as zt,Pa as Aa,Qa as Gd,Ra as Xd,S as Od,Sa as Pa,T as Q,Ta as za,Ua as La,Va as Kd,W as Ad,Wa as Ge,Xa as Ba,Ya as _a,Za as Yd,_a as qd,a as b,ab as Zd,b as k,bb as Bn,c as Zt,ca as zd,cb as Fa,d as yd,da as Te,db as Lo,e as jr,ea as K,eb as Ra,f as a,fb as _n,g as D,gb as Qd,h as Gr,ha as Ld,i as we,j as xd,k as Sd,ka as Bd,l as Cd,m as wd,n as kd,o as Po,p as Td,pa as _d,ra as Fd,s as st,t as m,ua as Rd,va as yt,w as rt,wa as Ee,x as Ed,xa as Hd,za as Nd}from"./chunk-46PZSA2B.js";var fs=yd((Wk,lp)=>{var Qv="Expected a function",sp=0/0,t0="[object Symbol]",e0=/^\s+|\s+$/g,i0=/^[-+]0x[0-9a-f]+$/i,r0=/^0b[01]+$/i,o0=/^0o[0-7]+$/i,n0=parseInt,s0=typeof global=="object"&&global&&global.Object===Object&&global,a0=typeof self=="object"&&self&&self.Object===Object&&self,l0=s0||a0||Function("return this")(),c0=Object.prototype,d0=c0.toString,u0=Math.max,p0=Math.min,wl=function(){return l0.Date.now()};function h0(e,t,i){var r,o,n,s,l,c,d=0,h=!1,f=!1,g=!0;if(typeof e!="function")throw new TypeError(Qv);t=ap(t)||0,kl(i)&&(h=!!i.leading,f="maxWait"in i,n=f?u0(ap(i.maxWait)||0,t):n,g="trailing"in i?!!i.trailing:g);function x(B){var q=r,et=o;return r=o=void 0,d=B,s=e.apply(et,q),s}function S(B){return d=B,l=setTimeout(E,t),h?x(B):s}function C(B){var q=B-c,et=B-d,Ot=t-q;return f?p0(Ot,n-et):Ot}function O(B){var q=B-c,et=B-d;return c===void 0||q>=t||q<0||f&&et>=n}function E(){var B=wl();if(O(B))return R(B);l=setTimeout(E,C(B))}function R(B){return l=void 0,g&&r?x(B):(r=o=void 0,s)}function $(){l!==void 0&&clearTimeout(l),d=0,r=c=o=l=void 0}function V(){return l===void 0?s:R(wl())}function nt(){var B=wl(),q=O(B);if(r=arguments,o=this,c=B,q){if(l===void 0)return S(c);if(f)return l=setTimeout(E,t),x(c)}return l===void 0&&(l=setTimeout(E,t)),s}return nt.cancel=$,nt.flush=V,nt}function kl(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function f0(e){return!!e&&typeof e=="object"}function m0(e){return typeof e=="symbol"||f0(e)&&d0.call(e)==t0}function ap(e){if(typeof e=="number")return e;if(m0(e))return sp;if(kl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=kl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(e0,"");var i=r0.test(e);return i||o0.test(e)?n0(e.slice(2),i?2:8):i0.test(e)?sp:+e}lp.exports=h0});var nh=yd((p3,oh)=>{var eh="Expected a function",ih=0/0,P1="[object Symbol]",z1=/^\s+|\s+$/g,L1=/^[-+]0x[0-9a-f]+$/i,B1=/^0b[01]+$/i,_1=/^0o[0-7]+$/i,F1=parseInt,R1=typeof global=="object"&&global&&global.Object===Object&&global,H1=typeof self=="object"&&self&&self.Object===Object&&self,N1=R1||H1||Function("return this")(),$1=Object.prototype,V1=$1.toString,W1=Math.max,U1=Math.min,Xl=function(){return N1.Date.now()};function j1(e,t,i){var r,o,n,s,l,c,d=0,h=!1,f=!1,g=!0;if(typeof e!="function")throw new TypeError(eh);t=rh(t)||0,Ns(i)&&(h=!!i.leading,f="maxWait"in i,n=f?W1(rh(i.maxWait)||0,t):n,g="trailing"in i?!!i.trailing:g);function x(B){var q=r,et=o;return r=o=void 0,d=B,s=e.apply(et,q),s}function S(B){return d=B,l=setTimeout(E,t),h?x(B):s}function C(B){var q=B-c,et=B-d,Ot=t-q;return f?U1(Ot,n-et):Ot}function O(B){var q=B-c,et=B-d;return c===void 0||q>=t||q<0||f&&et>=n}function E(){var B=Xl();if(O(B))return R(B);l=setTimeout(E,C(B))}function R(B){return l=void 0,g&&r?x(B):(r=o=void 0,s)}function $(){l!==void 0&&clearTimeout(l),d=0,r=c=o=l=void 0}function V(){return l===void 0?s:R(Xl())}function nt(){var B=Xl(),q=O(B);if(r=arguments,o=this,c=B,q){if(l===void 0)return S(c);if(f)return l=setTimeout(E,t),x(c)}return l===void 0&&(l=setTimeout(E,t)),s}return nt.cancel=$,nt.flush=V,nt}function G1(e,t,i){var r=!0,o=!0;if(typeof e!="function")throw new TypeError(eh);return Ns(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),j1(e,t,{leading:r,maxWait:t,trailing:o})}function Ns(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function X1(e){return!!e&&typeof e=="object"}function K1(e){return typeof e=="symbol"||X1(e)&&V1.call(e)==P1}function rh(e){if(typeof e=="number")return e;if(K1(e))return ih;if(Ns(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ns(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(z1,"");var i=B1.test(e);return i||_1.test(e)?F1(e.slice(2),i?2:8):L1.test(e)?ih:+e}oh.exports=G1});var sb="An invariant failed, however the error is obfuscated because this is an production build.",Fn=[];Object.freeze(Fn);var tu={};Object.freeze(tu);var ab={};function Xr(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:ab}function Wt(){return++A.mobxGuid}function at(e){throw gi(!1,e),"X"}function gi(e,t){if(!e)throw new Error("[mobx] "+(t||sb))}var eu=[];function Xe(e,t){return!1}function Ha(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var iu=function(){};function lb(e){var t=[];return e.forEach(function(i){t.indexOf(i)===-1&&t.push(i)}),t}function Na(e){return e!==null&&typeof e=="object"}function Kr(e){if(e===null||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function cb(e){if(Yr(e)||Pe(e))return e;if(Array.isArray(e))return new Map(e);if(Kr(e)){var t=new Map;for(var i in e)t.set(i,e[i]);return t}else return at("Cannot convert to map from '"+e+"'")}function db(e,t){for(var i=0;i<t.length;i++)Ke(e,t[i],e[t[i]])}function Ke(e,t,i){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:i})}function Bo(e,t,i){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:i})}function ub(e,t){}function bi(e,t){var i="isMobX"+e;return t.prototype[i]=!0,function(r){return Na(r)&&r[i]===!0}}function pb(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)}function Yr(e){return Xr().Map!==void 0&&e instanceof Xr().Map}function _o(e){return e instanceof Set}function Ye(e){for(var t=[];;){var i=e.next();if(i.done)break;t.push(i.value)}return t}function ru(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function ou(e){return e===null?null:typeof e=="object"?""+e:e}function nu(e,t){for(var i=e.next();!i.done;)t(i.value),i=e.next()}function su(){return typeof Symbol=="function"&&Symbol.iterator||"@@iterator"}function $a(e,t){Bo(e,su(),t)}function Fo(e){return e[su()]=hb,e}function Va(){return typeof Symbol=="function"&&Symbol.toStringTag||"@@toStringTag"}function hb(){return this}var Rn=function(){function e(t){t===void 0&&(t="Atom@"+Wt()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=J.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return Su(this)},e.prototype.reportChanged=function(){Ze(),Fb(this),Qe()},e.prototype.toString=function(){return this.name},e}(),Wa=bi("Atom",Rn);function Hn(e,t,i){t===void 0&&(t=iu),i===void 0&&(i=iu);var r=new Rn(e);return Yb(r,t),Iu(r,i),r}function au(e,t){return e===t}function fb(e,t){return nl(e,t)}function mb(e,t){return nl(e,t,1)}function gb(e,t){return pb(e,t)||au(e,t)}var Nn={identity:au,structural:fb,default:gb,shallow:mb};var Ua=function(e,t){return Ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},Ua(e,t)};function lu(e,t){Ua(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var dt=function(){return dt=Object.assign||function(t){for(var i,r=1,o=arguments.length;r<o;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},dt.apply(this,arguments)};function ja(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),o,n=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)n.push(o.value)}catch(l){s={error:l}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return n}function Ga(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ja(arguments[t]));return e}var bb={},vb={};function yb(e,t){var i=t?bb:vb;return i[e]||(i[e]={configurable:!0,enumerable:t,get:function(){return sr(this),this[e]},set:function(r){sr(this),this[e]=r}})}function sr(e){if(e.__mobxDidRunLazyInitializers!==!0){var t=e.__mobxDecorators;if(t){Ke(e,"__mobxDidRunLazyInitializers",!0);for(var i in t){var r=t[i];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}}function cu(e,t){return function(){var r,o=function(s,l,c,d){if(d===!0)return t(s,l,c,s,r),null;if(!Object.prototype.hasOwnProperty.call(s,"__mobxDecorators")){var h=s.__mobxDecorators;Ke(s,"__mobxDecorators",dt({},h))}return s.__mobxDecorators[l]={prop:l,propertyCreator:t,descriptor:c,decoratorTarget:s,decoratorArguments:r},yb(l,e)};return xb(arguments)?(r=Fn,o.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),o)}}function xb(e){return(e.length===2||e.length===3)&&typeof e[1]=="string"||e.length===4&&e[3]===!0}function Ro(e,t,i){return Jn(e)?e:Array.isArray(e)?w.array(e,{name:i}):Kr(e)?w.object(e,void 0,{name:i}):Yr(e)?w.map(e,{name:i}):_o(e)?w.set(e,{name:i}):e}function Sb(e,t,i){return e==null||ur(e)||dr(e)||Pe(e)||wi(e)?e:Array.isArray(e)?w.array(e,{name:i,deep:!1}):Kr(e)?w.object(e,void 0,{name:i,deep:!1}):Yr(e)?w.map(e,{name:i,deep:!1}):_o(e)?w.set(e,{name:i,deep:!1}):at(!1)}function $n(e){return e}function Cb(e,t,i){return nl(e,t)?t:e}function Vn(e){gi(e);var t=cu(!0,function(r,o,n,s,l){var c=n?n.initializer?n.initializer.call(r):n.value:void 0;uv(r,o,c,e)}),i=(typeof process!="undefined"&&process.env,t);return i.enhancer=e,i}var du={deep:!0,name:void 0,defaultDecorator:void 0},wb={deep:!1,name:void 0,defaultDecorator:void 0};Object.freeze(du);Object.freeze(wb);function qr(e){return e==null?du:typeof e=="string"?{name:e,deep:!0}:e}function Wn(e){return e.defaultDecorator?e.defaultDecorator.enhancer:e.deep===!1?$n:Ro}var Xa=Vn(Ro),kb=Vn(Sb),uu=Vn($n),Tb=Vn(Cb);function Eb(e,t,i){if(typeof arguments[1]=="string")return Xa.apply(null,arguments);if(Jn(e))return e;var r=Kr(e)?w.object(e,t,i):Array.isArray(e)?w.array(e,t):Yr(e)?w.map(e,t):_o(e)?w.set(e,t):e;if(r!==e)return r;at(!1)}var pu={box:function(e,t){arguments.length>2&&qe("box");var i=qr(t);return new yi(e,Wn(i),i.name,!0,i.equals)},shallowBox:function(e,t){return arguments.length>2&&qe("shallowBox"),Xe("observable.shallowBox","observable.box(value, { deep: false })"),w.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&qe("array");var i=qr(t);return new Ae(e,Wn(i),i.name)},shallowArray:function(e,t){return arguments.length>2&&qe("shallowArray"),Xe("observable.shallowArray","observable.array(values, { deep: false })"),w.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&qe("map");var i=qr(t);return new Zn(e,Wn(i),i.name)},shallowMap:function(e,t){return arguments.length>2&&qe("shallowMap"),Xe("observable.shallowMap","observable.map(values, { deep: false })"),w.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&qe("set");var i=qr(t);return new ts(e,Wn(i),i.name)},object:function(e,t,i){typeof arguments[1]=="string"&&qe("object");var r=qr(i);return qb({},e,t,r)},shallowObject:function(e,t){return typeof arguments[1]=="string"&&qe("shallowObject"),Xe("observable.shallowObject","observable.object(values, {}, { deep: false })"),w.object(e,{},{name:t,deep:!1})},ref:uu,shallow:kb,deep:Xa,struct:Tb},w=Eb;Object.keys(pu).forEach(function(e){return w[e]=pu[e]});function qe(e){at("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}var Un=cu(!1,function(e,t,i,r,o){var n=i.get,s=i.set,l=o[0]||{};pv(e,t,dt({get:n,set:s},l))}),Ib=Un({equals:Nn.structural}),u=function(t,i,r){if(typeof i=="string"||t!==null&&typeof t=="object"&&arguments.length===1)return Un.apply(null,arguments);var o=typeof i=="object"?i:{};return o.get=t,o.set=typeof i=="function"?i:o.set,o.name=o.name||t.name||"",new xi(o)};u.struct=Ib;var J;(function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"})(J||(J={}));var ce;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(ce||(ce={}));var jn=function(){function e(t){this.cause=t}return e}();function Ho(e){return e instanceof jn}function Ka(e){switch(e.dependenciesState){case J.UP_TO_DATE:return!1;case J.NOT_TRACKING:case J.STALE:return!0;case J.POSSIBLY_STALE:{for(var t=ar(!0),i=Zr(),r=e.observing,o=r.length,n=0;n<o;n++){var s=r[n];if(Xn(s)){if(A.disableErrorBoundaries)s.get();else try{s.get()}catch(l){return vi(i),Je(t),!0}if(e.dependenciesState===J.STALE)return vi(i),Je(t),!0}}return fu(e),vi(i),Je(t),!1}}}function Jr(e){var t=e.observers.length>0;A.computationDepth>0&&t&&at(!1),!A.allowStateChanges&&(t||A.enforceActions==="strict")&&at(!1)}function Mb(e){}function hu(e,t,i){var r=ar(!0);fu(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++A.runId;var o=A.trackingDerivation;A.trackingDerivation=e;var n;if(A.disableErrorBoundaries===!0)n=t.call(i);else try{n=t.call(i)}catch(s){n=new jn(s)}return A.trackingDerivation=o,Ob(e),e.observing.length===0&&Db(e),Je(r),n}function Db(e){}function Ob(e){for(var t=e.observing,i=e.observing=e.newObserving,r=J.UP_TO_DATE,o=0,n=e.unboundDepsCount,s=0;s<n;s++){var l=i[s];l.diffValue===0&&(l.diffValue=1,o!==s&&(i[o]=l),o++),l.dependenciesState>r&&(r=l.dependenciesState)}for(i.length=o,e.newObserving=null,n=t.length;n--;){var l=t[n];l.diffValue===0&&yu(l,e),l.diffValue=0}for(;o--;){var l=i[o];l.diffValue===1&&(l.diffValue=0,_b(l,e))}r!==J.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}function Ya(e){var t=e.observing;e.observing=[];for(var i=t.length;i--;)yu(t[i],e);e.dependenciesState=J.NOT_TRACKING}function qa(e){var t=Zr(),i=e();return vi(t),i}function Zr(){var e=A.trackingDerivation;return A.trackingDerivation=null,e}function vi(e){A.trackingDerivation=e}function ar(e){var t=A.allowStateReads;return A.allowStateReads=e,t}function Je(e){A.allowStateReads=e}function fu(e){if(e.dependenciesState!==J.UP_TO_DATE){e.dependenciesState=J.UP_TO_DATE;for(var t=e.observing,i=t.length;i--;)t[i].lowestObserverState=J.UP_TO_DATE}}var Gn=0,Ab=1,mu=Object.getOwnPropertyDescriptor(function(){},"name"),Ow=mu&&mu.configurable;function lr(e,t){var i=function(){return gu(e,t,this,arguments)};return i.isMobxAction=!0,i}function gu(e,t,i,r){var o=Pb(e,i,r);try{return t.apply(i,r)}catch(n){throw o.error=n,n}finally{zb(o)}}function Pb(e,t,i){var r=At()&&!!e,o=0;if(r){o=Date.now();var n=i&&i.length||0,s=new Array(n);if(n>0)for(var l=0;l<n;l++)s[l]=i[l];de({type:"action",name:e,object:t,arguments:s})}var c=Zr();Ze();var d=No(!0),h=ar(!0),f={prevDerivation:c,prevAllowStateChanges:d,prevAllowStateReads:h,notifySpy:r,startTime:o,actionId:Ab++,parentActionId:Gn};return Gn=f.actionId,f}function zb(e){Gn!==e.actionId&&at("invalid action stack. did you forget to finish an action?"),Gn=e.parentActionId,e.error!==void 0&&(A.suppressReactionErrors=!0),$o(e.prevAllowStateChanges),Je(e.prevAllowStateReads),Qe(),vi(e.prevDerivation),e.notifySpy&&ue({time:Date.now()-e.startTime}),A.suppressReactionErrors=!1}function bu(e,t){var i=No(e),r;try{r=t()}finally{$o(i)}return r}function No(e){var t=A.allowStateChanges;return A.allowStateChanges=e,t}function $o(e){A.allowStateChanges=e}var yi=function(e){lu(t,e);function t(i,r,o,n,s){o===void 0&&(o="ObservableValue@"+Wt()),n===void 0&&(n=!0),s===void 0&&(s=Nn.default);var l=e.call(this,o)||this;return l.enhancer=r,l.name=o,l.equals=s,l.hasUnreportedChange=!1,l.value=r(i,void 0,o),n&&At()&&cr({type:"create",name:l.name,newValue:""+l.value}),l}return t.prototype.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.prototype.set=function(i){var r=this.value;if(i=this.prepareNewValue(i),i!==A.UNCHANGED){var o=At();o&&de({type:"update",name:this.name,newValue:i,oldValue:r}),this.setNewValue(i),o&&ue()}},t.prototype.prepareNewValue=function(i){if(Jr(this),De(this)){var r=Oe(this,{object:this,type:"update",newValue:i});if(!r)return A.UNCHANGED;i=r.newValue}return i=this.enhancer(i,this.value,this.name),this.equals(this.value,i)?A.UNCHANGED:i},t.prototype.setNewValue=function(i){var r=this.value;this.value=i,this.reportChanged(),pe(this)&&he(this,{type:"update",object:this,newValue:i,oldValue:r})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(i){return Vo(this,i)},t.prototype.observe=function(i,r){return r&&i({object:this,type:"update",newValue:this.value,oldValue:void 0}),Wo(this,i)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return ou(this.get())},t}(Rn);yi.prototype[ru()]=yi.prototype.valueOf;var Lb=bi("ObservableValue",yi),xi=function(){function e(t){this.dependenciesState=J.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=J.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Wt(),this.value=new jn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ce.NONE,gi(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+Wt(),t.set&&(this.setter=lr(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?Nn.structural:Nn.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return e.prototype.onBecomeStale=function(){Hb(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&at("Cycle detected in computation "+this.name+": "+this.derivation),A.inBatch===0&&this.observers.length===0&&!this.keepAlive?Ka(this)&&(this.warnAboutUntrackedRead(),Ze(),this.value=this.computeValue(!1),Qe()):(Su(this),Ka(this)&&this.trackAndCompute()&&Rb(this));var t=this.value;if(Ho(t))throw t.cause;return t},e.prototype.peek=function(){var t=this.computeValue(!1);if(Ho(t))throw t.cause;return t},e.prototype.set=function(t){if(this.setter){gi(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else gi(!1,!1)},e.prototype.trackAndCompute=function(){At()&&cr({object:this.scope,type:"compute",name:this.name});var t=this.value,i=this.dependenciesState===J.NOT_TRACKING,r=this.computeValue(!0),o=i||Ho(t)||Ho(r)||!this.equals(t,r);return o&&(this.value=r),o},e.prototype.computeValue=function(t){this.isComputing=!0,A.computationDepth++;var i;if(t)i=hu(this,this.derivation,this.scope);else if(A.disableErrorBoundaries===!0)i=this.derivation.call(this.scope);else try{i=this.derivation.call(this.scope)}catch(r){i=new jn(r)}return A.computationDepth--,this.isComputing=!1,i},e.prototype.suspend=function(){this.keepAlive||(Ya(this),this.value=void 0)},e.prototype.observe=function(t,i){var r=this,o=!0,n=void 0;return Gb(function(){var s=r.get();if(!o||i){var l=Zr();t({type:"update",object:r,newValue:s,oldValue:n}),vi(l)}o=!1,n=s})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return ou(this.get())},e}();xi.prototype[ru()]=xi.prototype.valueOf;var Xn=bi("ComputedValue",xi);var Kn=function(){function e(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return e}(),Yn=!0,vu=!1,A=function(){var e=Xr();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Yn=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Kn().version&&(Yn=!1),Yn?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Kn):(setTimeout(function(){vu||at("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Kn)}();function Bb(){(A.pendingReactions.length||A.inBatch||A.isRunningReactions)&&at("isolateGlobalState should be called before MobX is running any reactions"),vu=!0,Yn&&(--Xr().__mobxInstanceCount==0&&(Xr().__mobxGlobals=void 0),A=new Kn)}function _b(e,t){var i=e.observers.length;i&&(e.observersIndexes[t.__mapid]=i),e.observers[i]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function yu(e,t){if(e.observers.length===1)e.observers.length=0,xu(e);else{var i=e.observers,r=e.observersIndexes,o=i.pop();if(o!==t){var n=r[t.__mapid]||0;n?r[o.__mapid]=n:delete r[o.__mapid],i[n]=o}delete r[t.__mapid]}}function xu(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,A.pendingUnobservations.push(e))}function Ze(){A.inBatch++}function Qe(){if(--A.inBatch==0){Tu();for(var e=A.pendingUnobservations,t=0;t<e.length;t++){var i=e[t];i.isPendingUnobservation=!1,i.observers.length===0&&(i.isBeingObserved&&(i.isBeingObserved=!1,i.onBecomeUnobserved()),i instanceof xi&&i.suspend())}A.pendingUnobservations=[]}}function Su(e){Mb(e);var t=A.trackingDerivation;return t!==null?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(e.observers.length===0&&A.inBatch>0&&xu(e),!1)}function Fb(e){if(e.lowestObserverState!==J.STALE){e.lowestObserverState=J.STALE;for(var t=e.observers,i=t.length;i--;){var r=t[i];r.dependenciesState===J.UP_TO_DATE&&(r.isTracing!==ce.NONE&&Cu(r,e),r.onBecomeStale()),r.dependenciesState=J.STALE}}}function Rb(e){if(e.lowestObserverState!==J.STALE){e.lowestObserverState=J.STALE;for(var t=e.observers,i=t.length;i--;){var r=t[i];r.dependenciesState===J.POSSIBLY_STALE?r.dependenciesState=J.STALE:r.dependenciesState===J.UP_TO_DATE&&(e.lowestObserverState=J.UP_TO_DATE)}}}function Hb(e){if(e.lowestObserverState===J.UP_TO_DATE){e.lowestObserverState=J.POSSIBLY_STALE;for(var t=e.observers,i=t.length;i--;){var r=t[i];r.dependenciesState===J.UP_TO_DATE&&(r.dependenciesState=J.POSSIBLY_STALE,r.isTracing!==ce.NONE&&Cu(r,e),r.onBecomeStale())}}}function Cu(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===ce.BREAK){var i=[];wu(tl(e),i,1),new Function(`debugger;
/*
Tracing '`+e.name+`'

You are entering this break point because derivation '`+e.name+"' is being traced and '"+t.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(e instanceof xi?e.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+i.join(`
`)+`
*/
    `)()}}function wu(e,t,i){if(t.length>=1e3){t.push("(and many more)");return}t.push(""+new Array(i).join("	")+e.name),e.dependencies&&e.dependencies.forEach(function(r){return wu(r,t,i+1)})}var Si=function(){function e(t,i,r,o){t===void 0&&(t="Reaction@"+Wt()),o===void 0&&(o=!1),this.name=t,this.onInvalidate=i,this.errorHandler=r,this.requiresObservable=o,this.observing=[],this.newObserving=[],this.dependenciesState=J.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Wt(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ce.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,A.pendingReactions.push(this),Tu())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Ze(),this._isScheduled=!1,Ka(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&At()&&cr({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}Qe()}},e.prototype.track=function(t){Ze();var i=At(),r;i&&(r=Date.now(),de({name:this.name,type:"reaction"})),this._isRunning=!0;var o=hu(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ya(this),Ho(o)&&this.reportExceptionInDerivation(o.cause),i&&ue({time:Date.now()-r}),Qe()},e.prototype.reportExceptionInDerivation=function(t){var i=this;if(this.errorHandler){this.errorHandler(t,this);return}if(A.disableErrorBoundaries)throw t;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";A.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,t),At()&&cr({type:"error",name:this.name,message:r,error:""+t}),A.globalReactionErrorHandlers.forEach(function(o){return o(t,i)})},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ze(),Ya(this),Qe()))},e.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(t){t===void 0&&(t=!1),ev(this,t)},e}();var ku=100,Ja=function(e){return e()};function Tu(){A.inBatch>0||A.isRunningReactions||Ja(Nb)}function Nb(){A.isRunningReactions=!0;for(var e=A.pendingReactions,t=0;e.length>0;){++t===ku&&(console.error("Reaction doesn't converge to a stable state after "+ku+" iterations."+(" Probably there is a cycle in the reactive function: "+e[0])),e.splice(0));for(var i=e.splice(0),r=0,o=i.length;r<o;r++)i[r].runReaction()}A.isRunningReactions=!1}var qn=bi("Reaction",Si);function $b(e){var t=Ja;Ja=function(i){return e(function(){return t(i)})}}function At(){return!!A.spyListeners.length}function cr(e){if(!!A.spyListeners.length)for(var t=A.spyListeners,i=0,r=t.length;i<r;i++)t[i](e)}function de(e){var t=dt(dt({},e),{spyReportStart:!0});cr(t)}var Vb={spyReportEnd:!0};function ue(e){cr(e?dt(dt({},e),{spyReportEnd:!0}):Vb)}function Za(e){return A.spyListeners.push(e),Ha(function(){A.spyListeners=A.spyListeners.filter(function(t){return t!==e})})}function Wb(){at(!1)}function Eu(e){return function(t,i,r){if(r){if(r.value)return{value:lr(e,r.value),enumerable:!1,configurable:!0,writable:!0};var o=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return lr(e,o.call(this))}}}return Ub(e).apply(this,arguments)}}function Ub(e){return function(t,i,r){Object.defineProperty(t,i,{configurable:!0,enumerable:!1,get:function(){},set:function(o){Ke(this,i,p(e,o))}})}}function jb(e,t,i,r){return r===!0?(Qa(e,t,i.value),null):i?{configurable:!0,enumerable:!1,get:function(){return Qa(this,t,i.value||i.initializer.call(this)),this[t]},set:Wb}:{enumerable:!1,configurable:!0,set:function(o){Qa(this,t,o)},get:function(){}}}var p=function(t,i,r,o){if(arguments.length===1&&typeof t=="function")return lr(t.name||"<unnamed action>",t);if(arguments.length===2&&typeof i=="function")return lr(t,i);if(arguments.length===1&&typeof t=="string")return Eu(t);if(o===!0)t[i]=lr(t.name||i,r.value);else return Eu(i).apply(null,arguments)};p.bound=jb;function xt(e,t){var i=typeof e=="string"?e:e.name||"<unnamed action>",r=typeof e=="function"?e:t;return gu(i,r,this,void 0)}function Qa(e,t,i){Ke(e,t,lr(t,i.bind(e)))}function Gb(e,t){t===void 0&&(t=tu);var i=t&&t.name||e.name||"Autorun@"+Wt(),r=!t.scheduler&&!t.delay,o;if(r)o=new Si(i,function(){this.track(l)},t.onError,t.requiresObservable);else{var n=Kb(t),s=!1;o=new Si(i,function(){s||(s=!0,n(function(){s=!1,o.isDisposed||o.track(l)}))},t.onError,t.requiresObservable)}function l(){e(o)}return o.schedule(),o.getDisposer()}var Xb=function(e){return e()};function Kb(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Xb}function Yb(e,t,i){return Mu("onBecomeObserved",e,t,i)}function Iu(e,t,i){return Mu("onBecomeUnobserved",e,t,i)}function Mu(e,t,i,r){var o=typeof r=="function"?ki(t,i):ki(t),n=typeof r=="function"?r:i,s=o[e];return typeof s!="function"?at(!1):(o[e]=function(){s.call(this),n.call(this)},function(){o[e]=s})}function Du(e){var t=e.enforceActions,i=e.computedRequiresReaction,r=e.computedConfigurable,o=e.disableErrorBoundaries,n=e.arrayBuffer,s=e.reactionScheduler,l=e.reactionRequiresObservable,c=e.observableRequiresReaction;if(e.isolateGlobalState===!0&&Bb(),t!==void 0){(typeof t=="boolean"||t==="strict")&&Xe(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);var d=void 0;switch(t){case!0:case"observed":d=!0;break;case!1:case"never":d=!1;break;case"strict":case"always":d="strict";break;default:at("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}A.enforceActions=d,A.allowStateChanges=!(d===!0||d==="strict")}i!==void 0&&(A.computedRequiresReaction=!!i),l!==void 0&&(A.reactionRequiresObservable=!!l),c!==void 0&&(A.observableRequiresReaction=!!c,A.allowStateReads=!A.observableRequiresReaction),r!==void 0&&(A.computedConfigurable=!!r),o!==void 0&&(o===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),A.disableErrorBoundaries=!!o),typeof n=="number"&&rl(n),s&&$b(s)}function qb(e,t,i,r){if(!1&&i)for(var o in i);r=qr(r);var n=r.defaultDecorator||(r.deep===!1?uu:Xa);sr(e),ol(e,r.name,n.enhancer),Ze();try{for(var s=Object.getOwnPropertyNames(t),l=0,c=s.length;l<c;l++){var o=s[l],d=Object.getOwnPropertyDescriptor(t,o),h=i&&o in i?i[o]:d.get?Un:n,f=h(e,o,d,!0);f&&Object.defineProperty(e,o,f)}}finally{Qe()}return e}function tl(e,t){return Ou(ki(e,t))}function Ou(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=lb(e.observing).map(Ou)),t}function Jb(){this.message="FLOW_CANCELLED"}Jb.prototype=Object.create(Error.prototype);function Zb(e,t){if(e==null)return!1;if(t!==void 0){if(ur(e)){var i=e.$mobx;return i.values&&!!i.values[t]}return!1}return ur(e)||!!e.$mobx||Wa(e)||qn(e)||Xn(e)}function Jn(e){return arguments.length!==1&&at(!1),Zb(e)}function Qb(e){return ur(e)?e.$mobx.getKeys():Pe(e)||wi(e)?Ye(e.keys()):dr(e)?e.map(function(t,i){return i}):at(!1)}var tv={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Qr(e,t,i,r){return r.detectCycles&&e.set(t,i),i}function Ci(e,t,i){if(!t.recurseEverything&&!Jn(e)||typeof e!="object")return e;if(e===null)return null;if(e instanceof Date)return e;if(Lb(e))return Ci(e.get(),t,i);Jn(e)&&Qb(e);var r=t.detectCycles===!0;if(r&&e!==null&&i.has(e))return i.get(e);if(dr(e)||Array.isArray(e)){var o=Qr(i,e,[],t),n=e.map(function(S){return Ci(S,t,i)});o.length=n.length;for(var s=0,l=n.length;s<l;s++)o[s]=n[s];return o}if(wi(e)||Object.getPrototypeOf(e)===Set.prototype)if(t.exportMapsAsObjects===!1){var c=Qr(i,e,new Set,t);return e.forEach(function(S){c.add(Ci(S,t,i))}),c}else{var d=Qr(i,e,[],t);return e.forEach(function(S){d.push(Ci(S,t,i))}),d}if(Pe(e)||Object.getPrototypeOf(e)===Map.prototype)if(t.exportMapsAsObjects===!1){var h=Qr(i,e,new Map,t);return e.forEach(function(S,C){h.set(C,Ci(S,t,i))}),h}else{var f=Qr(i,e,{},t);return e.forEach(function(S,C){f[C]=Ci(S,t,i)}),f}var g=Qr(i,e,{},t);for(var x in e)g[x]=Ci(e[x],t,i);return g}function P(e,t){typeof t=="boolean"&&(t={detectCycles:t}),t||(t=tv),t.detectCycles=t.detectCycles===void 0?t.recurseEverything===!0:t.detectCycles===!0;var i;return t.detectCycles&&(i=new Map),Ci(e,t,i)}function ev(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=!1;typeof e[e.length-1]=="boolean"&&(i=e.pop());var r=iv(e);if(!r)return at(!1);r.isTracing===ce.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=i?ce.BREAK:ce.LOG}function iv(e){switch(e.length){case 0:return A.trackingDerivation;case 1:return ki(e[0]);case 2:return ki(e[0],e[1])}}function Me(e,t){t===void 0&&(t=void 0),Ze();try{return e.apply(t)}finally{Qe()}}function De(e){return e.interceptors!==void 0&&e.interceptors.length>0}function Vo(e,t){var i=e.interceptors||(e.interceptors=[]);return i.push(t),Ha(function(){var r=i.indexOf(t);r!==-1&&i.splice(r,1)})}function Oe(e,t){var i=Zr();try{var r=e.interceptors;if(r)for(var o=0,n=r.length;o<n&&(t=r[o](t),gi(!t||t.type,"Intercept handlers should return nothing or a change object"),!!t);o++);return t}finally{vi(i)}}function pe(e){return e.changeListeners!==void 0&&e.changeListeners.length>0}function Wo(e,t){var i=e.changeListeners||(e.changeListeners=[]);return i.push(t),Ha(function(){var r=i.indexOf(t);r!==-1&&i.splice(r,1)})}function he(e,t){var i=Zr(),r=e.changeListeners;if(!!r){r=r.slice();for(var o=0,n=r.length;o<n;o++)r[o](t);vi(i)}}var rv=1e4,ov=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)["0"]=1,e===!1}(),el=0,il=function(){function e(){}return e}();function nv(e,t){typeof Object.setPrototypeOf!="undefined"?Object.setPrototypeOf(e.prototype,t):typeof e.prototype.__proto__!="undefined"?e.prototype.__proto__=t:e.prototype=t}nv(il,Array.prototype);Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(e){Object.defineProperty(il.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})});var Au=function(){function e(t,i,r,o){this.array=r,this.owned=o,this.values=[],this.lastKnownLength=0,this.atom=new Rn(t||"ObservableArray@"+Wt()),this.enhancer=function(n,s){return i(n,s,t+"[..]")}}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.dehanceValues=function(t){return this.dehancer!==void 0&&t.length>0?t.map(this.dehancer):t},e.prototype.intercept=function(t){return Vo(this,t)},e.prototype.observe=function(t,i){return i===void 0&&(i=!1),i&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Wo(this,t)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(t){if(typeof t!="number"||t<0)throw new Error("[mobx.array] Out of range: "+t);var i=this.values.length;if(t!==i)if(t>i){for(var r=new Array(t-i),o=0;o<t-i;o++)r[o]=void 0;this.spliceWithArray(i,0,r)}else this.spliceWithArray(t,i-t)},e.prototype.updateArrayLength=function(t,i){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=i,i>0&&t+i+1>el&&rl(t+i+1)},e.prototype.spliceWithArray=function(t,i,r){var o=this;Jr(this.atom);var n=this.values.length;if(t===void 0?t=0:t>n?t=n:t<0&&(t=Math.max(0,n+t)),arguments.length===1?i=n-t:i==null?i=0:i=Math.max(0,Math.min(i,n-t)),r===void 0&&(r=Fn),De(this)){var s=Oe(this,{object:this.array,type:"splice",index:t,removedCount:i,added:r});if(!s)return Fn;i=s.removedCount,r=s.added}r=r.length===0?r:r.map(function(d){return o.enhancer(d,void 0)});var l=r.length-i;this.updateArrayLength(n,l);var c=this.spliceItemsIntoValues(t,i,r);return(i!==0||r.length!==0)&&this.notifyArraySplice(t,r,c),this.dehanceValues(c)},e.prototype.spliceItemsIntoValues=function(t,i,r){var o;if(r.length<rv)return(o=this.values).splice.apply(o,Ga([t,i],r));var n=this.values.slice(t,t+i);return this.values=this.values.slice(0,t).concat(r,this.values.slice(t+i)),n},e.prototype.notifyArrayChildUpdate=function(t,i,r){var o=!this.owned&&At(),n=pe(this),s=n||o?{object:this.array,type:"update",index:t,newValue:i,oldValue:r}:null;o&&de(dt(dt({},s),{name:this.atom.name})),this.atom.reportChanged(),n&&he(this,s),o&&ue()},e.prototype.notifyArraySplice=function(t,i,r){var o=!this.owned&&At(),n=pe(this),s=n||o?{object:this.array,type:"splice",index:t,removed:r,added:i,removedCount:r.length,addedCount:i.length}:null;o&&de(dt(dt({},s),{name:this.atom.name})),this.atom.reportChanged(),n&&he(this,s),o&&ue()},e}(),Ae=function(e){lu(t,e);function t(i,r,o,n){o===void 0&&(o="ObservableArray@"+Wt()),n===void 0&&(n=!1);var s=e.call(this)||this,l=new Au(o,r,s,n);if(Bo(s,"$mobx",l),i&&i.length){var c=No(!0);s.spliceWithArray(0,0,i),$o(c)}return ov&&Object.defineProperty(l.array,"0",sv),s}return t.prototype.intercept=function(i){return this.$mobx.intercept(i)},t.prototype.observe=function(i,r){return r===void 0&&(r=!1),this.$mobx.observe(i,r)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),i.map(function(o){return dr(o)?o.peek():o}))},t.prototype.replace=function(i){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,i)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(i,r,o){o===void 0&&(o=0),arguments.length===3&&Xe("The array.find fromIndex argument to find will not be supported anymore in the next major");var n=this.findIndex.apply(this,arguments);return n===-1?void 0:this.get(n)},t.prototype.findIndex=function(i,r,o){o===void 0&&(o=0),arguments.length===3&&Xe("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");for(var n=this.peek(),s=n.length,l=o;l<s;l++)if(i.call(r,n[l],l,this))return l;return-1},t.prototype.splice=function(i,r){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(i);case 2:return this.$mobx.spliceWithArray(i,r)}return this.$mobx.spliceWithArray(i,r,o)},t.prototype.spliceWithArray=function(i,r,o){return this.$mobx.spliceWithArray(i,r,o)},t.prototype.push=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=this.$mobx;return o.spliceWithArray(o.values.length,0,i),o.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=this.$mobx;return o.spliceWithArray(0,0,i),o.values.length},t.prototype.reverse=function(){var i=this.slice();return i.reverse.apply(i,arguments)},t.prototype.sort=function(i){var r=this.slice();return r.sort.apply(r,arguments)},t.prototype.remove=function(i){var r=this.$mobx.dehanceValues(this.$mobx.values).indexOf(i);return r>-1?(this.splice(r,1),!0):!1},t.prototype.move=function(i,r){Xe("observableArray.move is deprecated, use .slice() & .replace() instead");function o(l){if(l<0)throw new Error("[mobx.array] Index out of bounds: "+l+" is negative");var c=this.$mobx.values.length;if(l>=c)throw new Error("[mobx.array] Index out of bounds: "+l+" is not smaller than "+c)}if(o.call(this,i),o.call(this,r),i!==r){var n=this.$mobx.values,s;i<r?s=Ga(n.slice(0,i),n.slice(i+1,r+1),[n[i]],n.slice(r+1)):s=Ga(n.slice(0,r),[n[i]],n.slice(r,i),n.slice(i+1)),this.replace(s)}},t.prototype.get=function(i){var r=this.$mobx;if(r){if(i<r.values.length)return r.atom.reportObserved(),r.dehanceValue(r.values[i]);console.warn("[mobx.array] Attempt to read an array index ("+i+") that is out of bounds ("+r.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(i,r){var o=this.$mobx,n=o.values;if(i<n.length){Jr(o.atom);var s=n[i];if(De(o)){var l=Oe(o,{type:"update",object:this,index:i,newValue:r});if(!l)return;r=l.newValue}r=o.enhancer(r,s);var c=r!==s;c&&(n[i]=r,o.notifyArrayChildUpdate(i,r,s))}else if(i===n.length)o.spliceWithArray(i,0,[r]);else throw new Error("[mobx.array] Index out of bounds, "+i+" is larger than "+n.length)},t}(il);$a(Ae.prototype,function(){this.$mobx.atom.reportObserved();var e=this,t=0;return Fo({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})});Object.defineProperty(Ae.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}});Ke(Ae.prototype,Va(),"Array");["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(e){var t=Array.prototype[e];gi(typeof t=="function","Base function not defined on Array prototype: '"+e+"'"),Ke(Ae.prototype,e,function(){return t.apply(this.peek(),arguments)})});["every","filter","forEach","map","some"].forEach(function(e){var t=Array.prototype[e];gi(typeof t=="function","Base function not defined on Array prototype: '"+e+"'"),Ke(Ae.prototype,e,function(i,r){var o=this,n=this.$mobx;n.atom.reportObserved();var s=n.dehanceValues(n.values);return s[e](function(l,c){return i.call(r,l,c,o)},r)})});["reduce","reduceRight"].forEach(function(e){Ke(Ae.prototype,e,function(){var t=this,i=this.$mobx;i.atom.reportObserved();var r=arguments[0];return arguments[0]=function(o,n,s){return n=i.dehanceValue(n),r(o,n,s,t)},i.values[e].apply(i.values,arguments)})});db(Ae.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var sv=Pu(0);function Pu(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function av(e){Object.defineProperty(Ae.prototype,""+e,Pu(e))}function rl(e){for(var t=el;t<e;t++)av(t);el=e}rl(1e3);var lv=bi("ObservableArrayAdministration",Au);function dr(e){return Na(e)&&lv(e.$mobx)}var cv={},Zn=function(){function e(t,i,r){if(i===void 0&&(i=Ro),r===void 0&&(r="ObservableMap@"+Wt()),this.enhancer=i,this.name=r,this.$mobx=cv,this._keysAtom=Hn(this.name+".keys()"),typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return e.prototype._has=function(t){return this._data.has(t)},e.prototype.has=function(t){var i=this;if(!A.trackingDerivation)return this._has(t);var r=this._hasMap.get(t);if(!r){var o=r=new yi(this._has(t),$n,this.name+"."+Qn(t)+"?",!1);this._hasMap.set(t,o),Iu(o,function(){return i._hasMap.delete(t)})}return r.get()},e.prototype.set=function(t,i){var r=this._has(t);if(De(this)){var o=Oe(this,{type:r?"update":"add",object:this,newValue:i,name:t});if(!o)return this;i=o.newValue}return r?this._updateValue(t,i):this._addValue(t,i),this},e.prototype.delete=function(t){var i=this;if(Jr(this._keysAtom),De(this)){var r=Oe(this,{type:"delete",object:this,name:t});if(!r)return!1}if(this._has(t)){var o=At(),n=pe(this),r=n||o?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return o&&de(dt(dt({},r),{name:this.name,key:t})),Me(function(){i._keysAtom.reportChanged(),i._updateHasMapEntry(t,!1);var l=i._data.get(t);l.setNewValue(void 0),i._data.delete(t)}),n&&he(this,r),o&&ue(),!0}return!1},e.prototype._updateHasMapEntry=function(t,i){var r=this._hasMap.get(t);r&&r.setNewValue(i)},e.prototype._updateValue=function(t,i){var r=this._data.get(t);if(i=r.prepareNewValue(i),i!==A.UNCHANGED){var o=At(),n=pe(this),s=n||o?{type:"update",object:this,oldValue:r.value,name:t,newValue:i}:null;o&&de(dt(dt({},s),{name:this.name,key:t})),r.setNewValue(i),n&&he(this,s),o&&ue()}},e.prototype._addValue=function(t,i){var r=this;Jr(this._keysAtom),Me(function(){var l=new yi(i,r.enhancer,r.name+"."+Qn(t),!1);r._data.set(t,l),i=l.value,r._updateHasMapEntry(t,!0),r._keysAtom.reportChanged()});var o=At(),n=pe(this),s=n||o?{type:"add",object:this,name:t,newValue:i}:null;o&&de(dt(dt({},s),{name:this.name,key:t})),n&&he(this,s),o&&ue()},e.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var t=this,i=this.keys();return Fo({next:function(){var r=i.next(),o=r.done,n=r.value;return{done:o,value:o?void 0:t.get(n)}}})},e.prototype.entries=function(){var t=this,i=this.keys();return Fo({next:function(){var r=i.next(),o=r.done,n=r.value;return{done:o,value:o?void 0:[n,t.get(n)]}}})},e.prototype.forEach=function(t,i){var r=this;this._keysAtom.reportObserved(),this._data.forEach(function(o,n){return t.call(i,r.get(n),n,r)})},e.prototype.merge=function(t){var i=this;return Pe(t)&&(t=t.toJS()),Me(function(){var r=No(!0);try{Kr(t)?Object.keys(t).forEach(function(o){return i.set(o,t[o])}):Array.isArray(t)?t.forEach(function(o){var n=ja(o,2),s=n[0],l=n[1];return i.set(s,l)}):Yr(t)?t.constructor!==Map?at("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach(function(o,n){return i.set(n,o)}):t!=null&&at("Cannot initialize map from "+t)}finally{$o(r)}}),this},e.prototype.clear=function(){var t=this;Me(function(){qa(function(){t._data.forEach(function(i,r){return t.delete(r)})})})},e.prototype.replace=function(t){var i=this;return Me(function(){var r=cb(t),o=new Map,n=!1;if(nu(i._data.keys(),function(h){if(!r.has(h)){var f=i.delete(h);if(f)n=!0;else{var g=i._data.get(h);o.set(h,g)}}}),nu(r.entries(),function(h){var f=ja(h,2),g=f[0],x=f[1],S=i._data.has(g);if(i.set(g,x),i._data.has(g)){var C=i._data.get(g);o.set(g,C),S||(n=!0)}}),!n)if(i._data.size!==o.size)i._keysAtom.reportChanged();else for(var s=i._data.keys(),l=o.keys(),c=s.next(),d=l.next();!c.done;){if(c.value!==d.value){i._keysAtom.reportChanged();break}c=s.next(),d=l.next()}i._data=o}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var t=this,i={};return this.forEach(function(r,o){return i[typeof o=="symbol"?o:Qn(o)]=t.get(o)}),i},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var t=this;return this.name+"[{ "+Ye(this.keys()).map(function(i){return Qn(i)+": "+(""+t.get(i))}).join(", ")+" }]"},e.prototype.observe=function(t,i){return Wo(this,t)},e.prototype.intercept=function(t){return Vo(this,t)},e}();function Qn(e){return e&&e.toString?e.toString():new String(e).toString()}$a(Zn.prototype,function(){return this.entries()});Bo(Zn.prototype,Va(),"Map");var Pe=bi("ObservableMap",Zn),dv={},ts=function(){function e(t,i,r){if(i===void 0&&(i=Ro),r===void 0&&(r="ObservableSet@"+Wt()),this.name=r,this.$mobx=dv,this._data=new Set,this._atom=Hn(this.name),typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(o,n){return i(o,n,r)},t&&this.replace(t)}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.clear=function(){var t=this;Me(function(){qa(function(){t._data.forEach(function(i){t.delete(i)})})})},e.prototype.forEach=function(t,i){var r=this;this._atom.reportObserved(),this._data.forEach(function(o){t.call(i,o,o,r)})},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(t){var i=this;if(Jr(this._atom),De(this)){var r=Oe(this,{type:"add",object:this,newValue:t});if(!r)return this}if(!this.has(t)){Me(function(){i._data.add(i.enhancer(t,void 0)),i._atom.reportChanged()});var o=At(),n=pe(this),r=n||o?{type:"add",object:this,newValue:t}:null;n&&he(this,r)}return this},e.prototype.delete=function(t){var i=this;if(De(this)){var r=Oe(this,{type:"delete",object:this,oldValue:t});if(!r)return!1}if(this.has(t)){var o=At(),n=pe(this),r=n||o?{type:"delete",object:this,oldValue:t}:null;return Me(function(){i._atom.reportChanged(),i._data.delete(t)}),n&&he(this,r),!0}return!1},e.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},e.prototype.entries=function(){var t=0,i=Ye(this.keys()),r=Ye(this.values());return Fo({next:function(){var o=t;return t+=1,o<r.length?{value:[i[o],r[o]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var t=this,i=0,r;return this._data.values!==void 0?r=Ye(this._data.values()):(r=[],this._data.forEach(function(o){return r.push(o)})),Fo({next:function(){return i<r.length?{value:t.dehanceValue(r[i++]),done:!1}:{done:!0}}})},e.prototype.replace=function(t){var i=this;return wi(t)&&(t=t.toJS()),Me(function(){var r=No(!0);try{Array.isArray(t)?(i.clear(),t.forEach(function(o){return i.add(o)})):_o(t)?(i.clear(),t.forEach(function(o){return i.add(o)})):t!=null&&at("Cannot initialize set from "+t)}finally{$o(r)}}),this},e.prototype.observe=function(t,i){return Wo(this,t)},e.prototype.intercept=function(t){return Vo(this,t)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Ye(this.keys()).join(", ")+" ]"},e}();$a(ts.prototype,function(){return this.values()});Bo(ts.prototype,Va(),"Set");var wi=bi("ObservableSet",ts),zu=function(){function e(t,i,r){this.target=t,this.name=i,this.defaultEnhancer=r,this.values={}}return e.prototype.read=function(t,i){if(!(this.target!==t&&(this.illegalAccess(t,i),!this.values[i])))return this.values[i].get()},e.prototype.write=function(t,i,r){var o=this.target;o!==t&&this.illegalAccess(t,i);var n=this.values[i];if(n instanceof xi){n.set(r);return}if(De(this)){var s=Oe(this,{type:"update",object:o,name:i,newValue:r});if(!s)return;r=s.newValue}if(r=n.prepareNewValue(r),r!==A.UNCHANGED){var l=pe(this),c=At(),s=l||c?{type:"update",object:o,oldValue:n.value,name:i,newValue:r}:null;c&&de(dt(dt({},s),{name:this.name,key:i})),n.setNewValue(r),l&&he(this,s),c&&ue()}},e.prototype.remove=function(t){if(!!this.values[t]){var i=this.target;if(De(this)){var r=Oe(this,{object:i,name:t,type:"remove"});if(!r)return}try{Ze();var o=pe(this),n=At(),s=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var r=o||n?{type:"remove",object:i,oldValue:s,name:t}:null;n&&de(dt(dt({},r),{name:this.name,key:t})),o&&he(this,r),n&&ue()}finally{Qe()}}},e.prototype.illegalAccess=function(t,i){console.warn("Property '"+i+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(t,i){return Wo(this,t)},e.prototype.intercept=function(t){return Vo(this,t)},e.prototype.getKeys=function(){var t=this;return this.keys===void 0&&(this.keys=new Ae(Object.keys(this.values).filter(function(i){return t.values[i]instanceof yi}),$n,"keys("+this.name+")",!0)),this.keys.slice()},e}();function ol(e,t,i){t===void 0&&(t=""),i===void 0&&(i=Ro);var r=e.$mobx;return r||(Kr(e)||(t=(e.constructor.name||"ObservableObject")+"@"+Wt()),t||(t="ObservableObject@"+Wt()),r=new zu(e,t,i),Bo(e,"$mobx",r),r)}function uv(e,t,i,r){var o=ol(e);if(ub(e,t),De(o)){var n=Oe(o,{object:e,name:t,type:"add",newValue:i});if(!n)return;i=n.newValue}var s=o.values[t]=new yi(i,r,o.name+"."+t,!1);i=s.value,Object.defineProperty(e,t,hv(t)),o.keys&&o.keys.push(t),mv(o,e,t,i)}function pv(e,t,i){var r=ol(e);i.name=r.name+"."+t,i.context=e,r.values[t]=new xi(i),Object.defineProperty(e,t,fv(t))}var Lu=Object.create(null),Bu=Object.create(null);function hv(e){return Lu[e]||(Lu[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}function _u(e){var t=e.$mobx;return t||(sr(e),e.$mobx)}function fv(e){return Bu[e]||(Bu[e]={configurable:A.computedConfigurable,enumerable:!1,get:function(){return _u(this).read(this,e)},set:function(t){_u(this).write(this,e,t)}})}function mv(e,t,i,r){var o=pe(e),n=At(),s=o||n?{type:"add",object:t,name:i,newValue:r}:null;n&&de(dt(dt({},s),{name:e.name,key:i})),o&&he(e,s),n&&ue()}var gv=bi("ObservableObjectAdministration",zu);function ur(e){return Na(e)?(sr(e),gv(e.$mobx)):!1}function ki(e,t){if(typeof e=="object"&&e!==null){if(dr(e))return t!==void 0&&at(!1),e.$mobx.atom;if(wi(e))return e.$mobx;if(Pe(e)){var i=e;if(t===void 0)return i._keysAtom;var r=i._data.get(t)||i._hasMap.get(t);return r||at(!1),r}if(sr(e),t&&!e.$mobx&&e[t],ur(e)){if(!t)return at(!1);var r=e.$mobx.values[t];return r||at(!1),r}if(Wa(e)||Xn(e)||qn(e))return e}else if(typeof e=="function"&&qn(e.$mobx))return e.$mobx;return at(!1)}function Fu(e,t){if(e||at("Expecting some object"),t!==void 0)return Fu(ki(e,t));if(Wa(e)||Xn(e)||qn(e)||Pe(e)||wi(e))return e;if(sr(e),e.$mobx)return e.$mobx;at(!1)}function bv(e,t){var i;return t!==void 0?i=ki(e,t):ur(e)||Pe(e)||wi(e)?i=Fu(e):i=ki(e),i.name}var Ru=Object.prototype.toString;function nl(e,t,i){return i===void 0&&(i=-1),sl(e,t,i)}function sl(e,t,i,r,o){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var n=typeof e;if(n!=="function"&&n!=="object"&&typeof t!="object")return!1;e=Hu(e),t=Hu(t);var s=Ru.call(e);if(s!==Ru.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var l=s==="[object Array]";if(!l){if(typeof e!="object"||typeof t!="object")return!1;var c=e.constructor,d=t.constructor;if(c!==d&&!(typeof c=="function"&&c instanceof c&&typeof d=="function"&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}if(i===0)return!1;i<0&&(i=-1),r=r||[],o=o||[];for(var h=r.length;h--;)if(r[h]===e)return o[h]===t;if(r.push(e),o.push(t),l){if(h=e.length,h!==t.length)return!1;for(;h--;)if(!sl(e[h],t[h],i-1,r,o))return!1}else{var f=Object.keys(e),g=void 0;if(h=f.length,Object.keys(t).length!==h)return!1;for(;h--;)if(g=f[h],!(vv(t,g)&&sl(e[g],t[g],i-1,r,o)))return!1}return r.pop(),o.pop(),!0}function Hu(e){return dr(e)?e.peek():Yr(e)||Pe(e)||_o(e)||wi(e)?Ye(e.entries()):e}function vv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}try{}catch(e){al=Xr(),typeof process=="undefined"&&(al.process={}),al.process.env={}}var al;(function(){function e(){}if(e.name!=="testCodeMinification"&&!1)var t})();var ll="$mobx";typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Za,extras:{getDebugName:bv},$mobx:ll});import Tv from"styled-components";import jo from"react";import Cv,{css as wv}from"styled-components";import{css as yv}from"styled-components";var Mt=yv`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${e=>e.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${e=>e.theme.focusOutlineColor};
  }
`;import{css as xv}from"styled-components";var to=xv`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`;import Uo from"styled-components";import{keyframes as Sv}from"styled-components";var es=Sv`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`;var is=Uo.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,cl=Uo(is)``,_t=Uo(is)``,eo=Uo(is)``,rs={display:"none",left:0,top:0},os=Uo(is)`
  display: ${({display:e})=>e};
  left: ${({left:e})=>e}px;
  top: ${({top:e})=>e}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${es} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`;var fe=wv`
  color: ${e=>e.theme.button.activeForeground};
  border-color: ${e=>e.theme.button.activeForeground};
`,kv=Cv.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  font-size: ${e=>e.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button1.case};
  font-family: ${e=>e.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${Mt}

  /* Active */

  &:active {
    ${fe}
  }

  ${({isActive:e})=>e&&fe}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${_t} {
      background-color: ${e=>e.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${eo} {
      background-color: ${e=>e.theme.button.hoverOverlayColor};
    }
  }
`,Ft=class extends jo.Component{constructor(){super(...arguments);this.state=rs;this.timeout=null;this.onClick=t=>{let i=t.currentTarget.getBoundingClientRect(),r=t.pageX-i.left,o=t.pageY-i.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(r,o)}):this.setRippleState(r,o),this.props.onClick(t)};this.setRippleState=(t,i)=>{this.setState({left:t,top:i,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){let f=this.props,{isActive:t,isDisabled:i,label:r,ariaLabel:o,children:n,className:s}=f,l=Zt(f,["isActive","isDisabled","label","ariaLabel","children","className"]),{left:c,top:d,display:h}=this.state;return jo.createElement(kv,k(b({"data-test":o,className:s,isActive:t,disabled:i,"aria-label":o},l),{onClick:this.onClick}),r,n,jo.createElement(os,{display:h,left:c,top:d}),jo.createElement(_t,null),jo.createElement(eo,null))}};Ft.defaultProps={type:"button",isDisabled:!1,isActive:!1};var Go=Tv(Ft)`
  color: ${e=>e.theme.button.textPrimaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&fe}

  ${_t} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`;import Ev from"styled-components";var Xo=Ev(Ft)`
  color: ${e=>e.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&fe}

  ${_t} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`;import Ov from"styled-components";import dl from"react";import ul,{css as pl}from"styled-components";var Iv=ul(Ft)`
  ${({fullWidth:e})=>e&&pl`
      width: 100%;
    `}
`,Mv=ul.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`,Dv=ul.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }

  ${({isDisabled:e})=>e&&pl`
      opacity: ${t=>t.theme.button.textInactiveOpacity};
    `}
  ${({hasIcon:e})=>e&&pl`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`,me=s=>{var l=s,{label:e,children:t,icon:i,fullWidth:r,isDisabled:o}=l,n=Zt(l,["label","children","icon","fullWidth","isDisabled"]);let c=dl.createElement(Dv,{hasIcon:!!i,isDisabled:o},e,t);return dl.createElement(Iv,b({fullWidth:r,isDisabled:o},n),i&&dl.createElement(Mv,null,i),(t||e)&&c)};var hl=Ov(me)`
  background: ${e=>e.theme.button.outlinedPrimaryBackground};
  color: ${e=>e.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${e=>e.theme.button.outlinedBorderColor};
  min-width: 32px;
`;import Av from"styled-components";var io=Av(me)`
  background: ${e=>e.theme.button.outlinedSecondaryBackground};
  color: ${e=>e.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${e=>e.theme.button.outlinedBorderColor};

  ${({isActive:e})=>e&&fe}
`;import Nu from"react";import $u from"styled-components";var Pv=$u(Ft)`
  color: ${e=>e.theme.foreground};
  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&fe}

  ${_t} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`,zv=$u.div`
  display: flex;
  &:focus {
    outline: none;
  }
`,pr=o=>{var n=o,{label:e,icon:t,children:i}=n,r=Zt(n,["label","icon","children"]);return Nu.createElement(Pv,b({},r),Nu.createElement(zv,null,t))};import Lv from"styled-components";var fl=Lv(me)`
  background: ${e=>e.theme.button.containedPrimaryBackground};
  color: ${e=>e.theme.button.containedPrimaryForeground};
  border: 1px solid ${e=>e.theme.button.containedPrimaryBackground};

  &:active {
    color: ${e=>e.theme.button.containedPrimaryForeground};
  }
`;import Ko from"react";import Yo,{css as ns}from"styled-components";var Bv=Yo.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
`,_v=Yo.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  left: 0;
  ${e=>e.withBackground?ns`
          color: ${e.theme.card.labelForeground};
          height: 40px;
          background: ${e.theme.card.labelBackground};
        `:ns`
          color: ${e.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`,Fv=Yo.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${e=>e.theme.card.labelForeground};
  ${e=>e.withBackground?ns`
          border-top-color: ${e.theme.card.labelForeground};
        `:ns`
          border-top-color: ${e.theme.card.foreground};
        `}
  transform: rotate(${e=>e.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`,Rv=Yo.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`,Hv=Yo.div`
  ${to}
`,Nv=({children:e,className:t,caret:i,isActive:r,style:o,withBackground:n,hidden:s})=>{if(s)return Ko.createElement(Hv,null,e);let l=()=>Ko.createElement(Rv,null,Ko.createElement(Fv,{"aria-hidden":!0,rotation:r?180:0,withBackground:n}));return Ko.createElement(_v,{className:t,withBackground:n,style:o},Ko.createElement(Bv,{"data-test":I.CardLabel},e,i&&l()))};import $v from"styled-components";var Vv=$v.div.attrs(e=>({"data-test":I.CardAvatar,style:{backgroundImage:`url(${e.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`;import{keyframes as Wv}from"styled-components";var Vu=Wv`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`;import{keyframes as Uv}from"styled-components";var ss=Uv`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`;import mr from"react";var Qt=[];var Wu=function(){return Qt.some(function(e){return e.activeTargets.length>0})};var Uu=function(){return Qt.some(function(e){return e.skippedTargets.length>0})};var ju="ResizeObserver loop completed with undelivered notifications.",Gu=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:ju}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=ju),window.dispatchEvent(e)};var hr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(hr||(hr={}));var ml=function(){function e(t,i,r,o){return this.x=t,this.y=i,this.width=r,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var t=this,i=t.x,r=t.y,o=t.top,n=t.right,s=t.bottom,l=t.left,c=t.width,d=t.height;return{x:i,y:r,top:o,right:n,bottom:s,left:l,width:c,height:d}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}();var qo=function(e){return e instanceof SVGElement&&"getBBox"in e},as=function(e){if(qo(e)){var t=e.getBBox(),i=t.width,r=t.height;return!i&&!r}var o=e,n=o.offsetWidth,s=o.offsetHeight;return!(n||s||e.getClientRects().length)},gl=function(e){var t,i,r=(i=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||i===void 0?void 0:i.defaultView;return!!(r&&e instanceof r.Element)},Xu=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};var fr=typeof window!="undefined"?window:{};var ls=new WeakMap,Ku=/auto|scroll/,jv=/^tb|vertical/,Gv=/msie|trident/i.test(fr.navigator&&fr.navigator.userAgent),ze=function(e){return parseFloat(e||"0")},ro=function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=!1),Object.freeze({inlineSize:(i?t:e)||0,blockSize:(i?e:t)||0})},Yu=Object.freeze({devicePixelContentBoxSize:ro(),borderBoxSize:ro(),contentBoxSize:ro(),contentRect:new ml(0,0,0,0)}),bl=function(e,t){if(t===void 0&&(t=!1),ls.has(e)&&!t)return ls.get(e);if(as(e))return ls.set(e,Yu),Yu;var i=getComputedStyle(e),r=qo(e)&&e.ownerSVGElement&&e.getBBox(),o=!Gv&&i.boxSizing==="border-box",n=jv.test(i.writingMode||""),s=!r&&Ku.test(i.overflowY||""),l=!r&&Ku.test(i.overflowX||""),c=r?0:ze(i.paddingTop),d=r?0:ze(i.paddingRight),h=r?0:ze(i.paddingBottom),f=r?0:ze(i.paddingLeft),g=r?0:ze(i.borderTopWidth),x=r?0:ze(i.borderRightWidth),S=r?0:ze(i.borderBottomWidth),C=r?0:ze(i.borderLeftWidth),O=f+d,E=c+h,R=C+x,$=g+S,V=l?e.offsetHeight-$-e.clientHeight:0,nt=s?e.offsetWidth-R-e.clientWidth:0,B=o?O+R:0,q=o?E+$:0,et=r?r.width:ze(i.width)-B-nt,Ot=r?r.height:ze(i.height)-q-V,mi=et+O+nt+R,rr=Ot+E+V+$,or=Object.freeze({devicePixelContentBoxSize:ro(Math.round(et*devicePixelRatio),Math.round(Ot*devicePixelRatio),n),borderBoxSize:ro(mi,rr,n),contentBoxSize:ro(et,Ot,n),contentRect:new ml(f,c,et,Ot)});return ls.set(e,or),or},cs=function(e,t,i){var r=bl(e,i),o=r.borderBoxSize,n=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case hr.DEVICE_PIXEL_CONTENT_BOX:return s;case hr.BORDER_BOX:return o;default:return n}};var vl=function(){function e(t){var i=bl(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=[i.borderBoxSize],this.contentBoxSize=[i.contentBoxSize],this.devicePixelContentBoxSize=[i.devicePixelContentBoxSize]}return e}();var ds=function(e){if(as(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t};var qu=function(){var e=1/0,t=[];Qt.forEach(function(s){if(s.activeTargets.length!==0){var l=[];s.activeTargets.forEach(function(d){var h=new vl(d.target),f=ds(d.target);l.push(h),d.lastReportedSize=cs(d.target,d.observedBox),f<e&&(e=f)}),t.push(function(){s.callback.call(s.observer,l,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var i=0,r=t;i<r.length;i++){var o=r[i];o()}return e};var yl=function(e){Qt.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(o){o.isActive()&&(ds(o.target)>e?i.activeTargets.push(o):i.skippedTargets.push(o))})})};var Ju=function(){var e=0;for(yl(e);Wu();)e=qu(),yl(e);return Uu()&&Gu(),e>0};var xl,Zu=[],Xv=function(){return Zu.splice(0).forEach(function(e){return e()})},Qu=function(e){if(!xl){var t=0,i=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return Xv()}).observe(i,r),xl=function(){i.textContent=""+(t?t--:t++)}}Zu.push(e),xl()};var tp=function(e){Qu(function(){requestAnimationFrame(e)})};var us=0,Kv=function(){return!!us},Yv=250,qv={attributes:!0,characterData:!0,childList:!0,subtree:!0},ep=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ip=function(e){return e===void 0&&(e=0),Date.now()+e},Sl=!1,Jv=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var i=this;if(t===void 0&&(t=Yv),!Sl){Sl=!0;var r=ip(t);tp(function(){var o=!1;try{o=Ju()}finally{if(Sl=!1,t=r-ip(),!Kv())return;o?i.run(1e3):t>0?i.run(t):i.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,qv)};document.body?i():fr.addEventListener("DOMContentLoaded",i)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ep.forEach(function(i){return fr.addEventListener(i,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),ep.forEach(function(i){return fr.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},e}(),ps=new Jv,Cl=function(e){!us&&e>0&&ps.start(),us+=e,!us&&ps.stop()};var Zv=function(e){return!qo(e)&&!Xu(e)&&getComputedStyle(e).display==="inline"},rp=function(){function e(t,i){this.target=t,this.observedBox=i||hr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=cs(this.target,this.observedBox,!0);return Zv(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}();var op=function(){function e(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}return e}();var hs=new WeakMap,np=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1},Jo=function(){function e(){}return e.connect=function(t,i){var r=new op(t,i);hs.set(t,r)},e.observe=function(t,i,r){var o=hs.get(t),n=o.observationTargets.length===0;np(o.observationTargets,i)<0&&(n&&Qt.push(o),o.observationTargets.push(new rp(i,r&&r.box)),Cl(1),ps.schedule())},e.unobserve=function(t,i){var r=hs.get(t),o=np(r.observationTargets,i),n=r.observationTargets.length===1;o>=0&&(n&&Qt.splice(Qt.indexOf(r),1),r.observationTargets.splice(o,1),Cl(-1))},e.disconnect=function(t){var i=this,r=hs.get(t);r.observationTargets.slice().forEach(function(o){return i.unobserve(t,o.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}();var Zo=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Jo.connect(this,t)}return e.prototype.observe=function(t,i){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gl(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Jo.observe(this,t,i)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gl(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Jo.unobserve(this,t)},e.prototype.disconnect=function(){Jo.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();var cp=jr(fs());import b0 from"styled-components";import g0 from"react";var ms=g0.createContext({});var v0=b0.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${e=>e.theme.background};
  color: ${e=>e.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;
    /* todo: fix the issue with these settings */
    font-size: inherit;
    color: inherit;
    line-height: normal;

    scrollbar-width: thin;
    scrollbar-color: ${e=>e.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${e=>e.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${e=>e.theme.scrollbar.handleColor};
    }
  }
`,Tl=class extends mr.Component{constructor(t){super(t);this.node=mr.createRef();this.saveEditorDimensions=t=>{this.setState({contextValue:{element:t,rect:t.getBoundingClientRect()}})};var i;if((i=mr)==null?void 0:i.version){let r=Number.parseInt(mr.version.split(".")[0],10),o=Number.parseInt(mr.version.split(".")[1],10);(r<16||r===16&&o<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,cp.default)(this.saveEditorDimensions,100),this.resizeObserver=new Zo(([r])=>{this.saveEditorDimensions(r.target)}),this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var t;((t=this.node)==null?void 0:t.current)&&this.resizeObserver.observe(this.node.current)}componentWillUnmount(){var t;((t=this.node)==null?void 0:t.current)&&this.resizeObserver.unobserve(this.node.current)}render(){let{children:t}=this.props,{contextValue:i}=this.state;return mr.createElement(v0,{ref:this.node,"data-test":I.EditorContainer},mr.createElement(ms.Provider,{value:i},t))}};import Es from"react";import gr,{PureComponent as R0,Component as zl,forwardRef as Ll,memo as Sp,createElement as H0}from"react";import{useState as y0}from"react";if(!y0)throw new Error("mobx-react-lite requires React with Hooks support");if(!Za)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");import{unstable_batchedUpdates as dp}from"react-dom";import{useCallback as S0,useEffect as o4,useState as C0}from"react";var x0=function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),o,n=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)n.push(o.value)}catch(l){s={error:l}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return n};function El(){var e=x0(C0(0),2),t=e[1],i=S0(function(){t(function(r){return r+1})},[]);return i}function up(e){return typeof Symbol=="function"?Symbol.for(e):"__$mobx-react "+e+"__"}var w0={};function pp(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:w0}var k0=up("observerBatching");function T0(e){e()}function gs(e){e||(e=T0),Du({reactionScheduler:e}),pp()[k0]=!0}var E0=!1;function Le(){return E0}import{forwardRef as P0,memo as yp}from"react";import Ol from"react";function hp(e){return tl(e)}function fp(e){var t={cleanAt:Date.now()+I0,reaction:e};return t}var I0=1e4,M0=1e4,Qo=new Set,Il;function mp(){Il===void 0&&(Il=setTimeout(D0,M0))}function gp(e){Qo.add(e),mp()}function bp(e){Qo.delete(e)}function D0(){Il=void 0;var e=Date.now();Qo.forEach(function(t){var i=t.current;i&&e>=i.cleanAt&&(i.reaction.dispose(),t.current=null,Qo.delete(t))}),Qo.size>0&&mp()}import O0 from"react";var bs=!1,vs=[];function Ml(e){return function(){bs?vs.push(e):e()}}function Dl(e){bs=!0,vs=[];try{var t=e();bs=!1;var i=vs.length>0?vs:void 0;return O0.useLayoutEffect(function(){i&&i.forEach(function(r){return r()})},[i]),t}finally{bs=!1}}var A0={};function vp(e){return"observer"+e}function oo(e,t,i){if(t===void 0&&(t="observed"),i===void 0&&(i=A0),Le())return e();var r=i.useForceUpdate||El,o=r(),n=Ml(o),s=Ol.useRef(null);if(!s.current){var l=new Si(vp(t),function(){c.mounted?n():(l.dispose(),s.current=null)}),c=fp(l);s.current=c,gp(s)}var d=s.current.reaction;return Ol.useDebugValue(d,hp),Ol.useEffect(function(){return bp(s),s.current?s.current.mounted=!0:(s.current={reaction:new Si(vp(t),function(){n()}),cleanAt:1/0},n()),function(){s.current.reaction.dispose(),s.current=null}},[]),Dl(function(){var h,f;if(d.track(function(){try{h=e()}catch(g){f=g}}),f)throw f;return h})}var Al=function(){return Al=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Al.apply(this,arguments)};function Pl(e,t){if(Le())return e;var i=Al({forwardRef:!1},t),r=e.displayName||e.name,o=function(s,l){return oo(function(){return e(s,l)},r)};o.displayName=r;var n;return i.forwardRef?n=yp(P0(o)):n=yp(o),L0(e,n),n.displayName=r,n}var z0={$$typeof:!0,render:!0,compare:!0,type:!0};function L0(e,t){Object.keys(e).forEach(function(i){z0[i]||Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}function no(e){var t=e.children,i=e.render,r=t||i;return typeof r!="function"?null:oo(r)}no.propTypes={children:xp,render:xp};no.displayName="Observer";function xp(e,t,i,r,o){var n=t==="children"?"render":"children",s=typeof e[t]=="function",l=typeof e[n]=="function";return s&&l?new Error("MobX Observer: Do not use children and render in the same time in`"+i):s||l?null:new Error("Invalid prop `"+o+"` of type `"+typeof e[t]+"` supplied to `"+i+"`, expected `function`.")}import A4 from"react";import H4 from"react";gs(dp);var Cp=0;function N0(e){if(typeof Symbol=="function")return Symbol(e);var t="__$mobx-react "+e+" ("+Cp+")";return Cp++,t}var Bl={};function Ti(e){return Bl[e]||(Bl[e]=N0(e)),Bl[e]}function wp(e,t){if(kp(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(var o=0;o<i.length;o++)if(!Object.hasOwnProperty.call(t,i[o])||!kp(e[i[o]],t[i[o]]))return!1;return!0}function kp(e,t){return e===t?e!==0||1/e==1/t:e!==e&&t!==t}var $0={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function V0(e,t){var i=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Object.getOwnPropertyNames(e).forEach(function(r){!$0[r]&&i.indexOf(r)===-1&&Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}function ti(e,t,i){Object.hasOwnProperty.call(e,t)?e[t]=i:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:i})}var Tp=Ti("patchMixins"),Ep=Ti("patchedDefinition");function W0(e,t){var i=e[Tp]=e[Tp]||{},r=i[t]=i[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}function Ip(e,t){for(var i=this,r=arguments.length,o=new Array(r>2?r-2:0),n=2;n<r;n++)o[n-2]=arguments[n];t.locks++;try{var s;return e!=null&&(s=e.apply(this,o)),s}finally{t.locks--,t.locks===0&&t.methods.forEach(function(l){l.apply(i,o)})}}function Mp(e,t){var i=function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];Ip.call.apply(Ip,[this,e,t].concat(n))};return i}function U0(e,t,i){var r=W0(e,t);r.methods.indexOf(i)<0&&r.methods.push(i);var o=Object.getOwnPropertyDescriptor(e,t);if(!(o&&o[Ep])){var n=e[t],s=Dp(e,t,o?o.enumerable:void 0,r,n);Object.defineProperty(e,t,s)}}function Dp(e,t,i,r,o){var n,s=Mp(o,r);return n={},n[Ep]=!0,n.get=function(){return s},n.set=function(c){if(this===e)s=Mp(c,r);else{var d=Dp(this,t,i,r,c);Object.defineProperty(this,t,d)}},n.configurable=!0,n.enumerable=i,n}var _l=ll||"$mobx",Op=Ti("isMobXReactObserver"),Ap=Ti("isUnmounted"),ys=Ti("skipRender"),xs=Ti("isForcingUpdate");function j0(e){var t=e.prototype;if(e[Op]){var i=Fl(t);console.warn("The provided component class ("+i+`) 
                has already been declared as an observer component.`)}else e[Op]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==R0){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=Pp;else if(t.shouldComponentUpdate!==Pp)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}zp(t,"props"),zp(t,"state");var r=t.render;return t.render=function(){return G0.call(this,r)},U0(t,"componentWillUnmount",function(){var o;if(Le()!==!0&&((o=this.render[_l])===null||o===void 0||o.dispose(),this[Ap]=!0,!this.render[_l])){var n=Fl(this);console.warn("The reactive render of an observer class component ("+n+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),e}function Fl(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function G0(e){var t=this;if(Le()===!0)return e.call(this);ti(this,ys,!1),ti(this,xs,!1);var i=Fl(this),r=e.bind(this),o=!1,n=new Si(i+".render()",function(){if(!o&&(o=!0,t[Ap]!==!0)){var l=!0;try{ti(t,xs,!0),t[ys]||zl.prototype.forceUpdate.call(t),l=!1}finally{ti(t,xs,!1),l&&n.dispose()}}});n.reactComponent=this,s[_l]=n,this.render=s;function s(){o=!1;var l=void 0,c=void 0;if(n.track(function(){try{c=bu(!1,r)}catch(d){l=d}}),l)throw l;return c}return s.call(this)}function Pp(e,t){return Le()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t?!0:!wp(this.props,e)}function zp(e,t){var i=Ti("reactProp_"+t+"_valueHolder"),r=Ti("reactProp_"+t+"_atomHolder");function o(){return this[r]||ti(this,r,Hn("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var s=!1;return ar&&Je&&(s=ar(!0)),o.call(this).reportObserved(),ar&&Je&&Je(s),this[i]},set:function(s){!this[xs]&&!wp(this[i],s)?(ti(this,i,s),ti(this,ys,!0),o.call(this).reportChanged(),ti(this,ys,!1)):ti(this,i,s)}})}var Lp=typeof Symbol=="function"&&Symbol.for,Bp=Lp?Symbol.for("react.forward_ref"):typeof Ll=="function"&&Ll(function(e){return null}).$$typeof,_p=Lp?Symbol.for("react.memo"):typeof Sp=="function"&&Sp(function(e){return null}).$$typeof;function L(e){if(e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),_p&&e.$$typeof===_p)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Bp&&e.$$typeof===Bp){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Ll(function(){var r=arguments;return H0(no,null,function(){return t.apply(void 0,r)})})}return typeof e=="function"&&(!e.prototype||!e.prototype.render)&&!e.isReactClass&&!Object.prototype.isPrototypeOf.call(zl,e)?Pl(e):j0(e)}function Ss(){return Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Ss.apply(this,arguments)}function X0(e,t){if(e==null)return{};var i={},r=Object.keys(e),o,n;for(n=0;n<r.length;n++)o=r[n],!(t.indexOf(o)>=0)&&(i[o]=e[o]);return i}var tn=gr.createContext({});function K0(e){var t=e.children,i=X0(e,["children"]),r=gr.useContext(tn),o=gr.useRef(Ss({},r,i)),n=o.current;if(!1)var s;return gr.createElement(tn.Provider,{value:n},t)}K0.displayName="MobXProvider";function Fp(e,t,i,r){var o=gr.forwardRef(function(n,s){var l=Ss({},n),c=gr.useContext(tn);return Object.assign(l,e(c||{},l)||{}),s&&(l.ref=s),gr.createElement(t,l)});return r&&(o=L(o)),o.isMobxInjector=!0,V0(t,o),o.wrappedComponent=t,o.displayName=Y0(t,i),o}function Y0(e,t){var i,r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t?i="inject-with-"+t+"("+r+")":i="inject("+r+")",i}function q0(e){return function(t,i){return e.forEach(function(r){if(!(r in i)){if(!(r in t))throw new Error("MobX injector: Store '"+r+"' is not available! Make sure it is provided by some Provider");i[r]=t[r]}}),i}}function N(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(typeof arguments[0]=="function"){var r=arguments[0];return function(o){return Fp(r,o,r.name,!0)}}else return function(o){return Fp(q0(t),o,t.join("-"),!1)}}if(!zl)throw new Error("mobx-react requires React to be available");if(!w)throw new Error("mobx-react requires mobx to be available");import so from"react";import Rp,{css as t1}from"styled-components";import J0,{css as Z0}from"styled-components";var en=Z0`
  position: absolute;
  top: 0;
  left: 0;
  height: ${e=>e.theme.measurements.colorItem.size}px;
  width: ${e=>e.theme.measurements.colorItem.size}px;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};
  pointer-events: none;
`,Q0=J0.div.attrs(e=>({style:{background:e.color}}))`
  ${en}
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.background};
`,Cs=Q0;var e1=Rp.div`
  ${en}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${e=>e.isActive&&t1`
      border-color: ${e.theme.selectColor.activeBorderColor};
    `}
`,Rl=Rp.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`,i1=({isActive:e,className:t,style:i})=>so.createElement(e1,{isActive:e,className:t,style:i},e&&so.createElement(so.Fragment,null,so.createElement(Rl,null),so.createElement(Rl,null),so.createElement(Rl,null))),ws=i1;import r1 from"styled-components";var o1=r1.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${e=>e.theme.measurements.colorItem.size}px;
  width: ${e=>e.theme.measurements.colorItem.size}px;
  margin: ${e=>e.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${Mt}

  &:disabled {
    opacity: ${e=>e.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`,ks=o1;import n1 from"styled-components";var s1=n1.div.attrs(e=>{let t=e.url?{backgroundImage:`url(${e.url})`}:{};return b({style:t},e.style)})`
  ${en}
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.tiledBackground};
`,Ts=s1;var a1=({isActive:e,onClick:t,color:i,label:r,isDisabled:o,tiledBackgroundUrl:n,className:s,style:l,children:c})=>Es.createElement(ks,{disabled:o,onClick:t,"aria-label":r,className:s,style:l},Es.createElement(Ts,{url:n}),Es.createElement(Cs,{color:i}),Es.createElement(ws,{isActive:e}),c),Hp=N("config")(L(a1));import Hl from"react";import l1 from"styled-components";var c1=l1.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${e=>e.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${e=>e.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`,Is=c1;import d1 from"react";import u1,{css as p1}from"styled-components";var h1=u1.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${e=>e.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${e=>e.isVisible&&p1`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`,Ms=({isVisible:e,className:t,children:i})=>d1.createElement(h1,{isVisible:e,className:t},i);import f1 from"styled-components";var m1=f1.div.attrs(({style:e})=>({role:"dialog","aria-hidden":!1,style:e}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${e=>e.top}px);
  left: calc(50% + ${e=>e.left}px);
  width: ${e=>e.width};
  height: ${e=>e.height};
  transform: translate(-50%, -50%);
  border-radius: ${e=>e.theme.shape.radiusLarge}px;
  background: ${e=>e.theme.modal.background};
  color: ${e=>e.theme.modal.bodyForeground};
  z-index: ${e=>e.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`,Ds=m1;var g1=({isVisible:e=!1,width:t="350px",height:i="fit-content",position:r,header:o,body:n,footer:s,className:l,style:c,children:d})=>Hl.createElement(Ms,{isVisible:e},Hl.createElement(Is,null),Hl.createElement(Ds,{height:i,width:t,left:r.x,top:r.y,className:l,style:c,"data-test":I.Dialog},o,n,d,s)),Np=g1;import b1 from"styled-components";var v1=b1.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`,ei=v1;import y1 from"styled-components";var x1=y1.div`
  display: flex;
  border-top: 2px solid
    ${e=>e.type==="error"?e.theme.error:e.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`,ao=x1;import S1 from"styled-components";var C1=S1.h3`
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  color: ${e=>e.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`,lo=C1;import rn from"react";import $p,{keyframes as w1}from"styled-components";var k1=w1`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,T1=$p.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`,Os=$p.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${e=>e.theme.primary};
  border-radius: 50%;
  animation: ${k1} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${e=>e.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`,E1=({className:e,style:t})=>rn.createElement(T1,{className:e,style:t},rn.createElement(Os,null),rn.createElement(Os,null),rn.createElement(Os,null),rn.createElement(Os,null)),As=E1;import Rs from"react";import jl from"react";var Nl=["Moz","Webkit","O","ms"];function I1(e){let t="",i=!0,r;for(r=0;r<e.length;r+=1)i?(t+=e[r].toUpperCase(),i=!1):e[r]==="-"?i=!0:t+=e[r];return t}function $l(e,t){return t?`${t}${I1(e)}`:e}function M1(e="transform"){if(typeof window=="undefined"||typeof window.document=="undefined")return"";let{style:t}=window.document.documentElement;if(e in t)return"";let i;for(i=0;i<Nl.length;i+=1)if($l(e,Nl[i])in t)return Nl[i];return""}var Vp=M1();function Ps(e,t){for(let i=0,{length:r}=e;i<r;i+=1)if(t.apply(t,[e[i],i,e]))return e[i];return null}function Vl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function co(e){return typeof e=="number"&&!Number.isNaN(e)}function Dt(e){return parseInt(e,10)}var zs="";function D1(e,t){return zs||(zs=Ps(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],i=>Vl(e[i]))),Vl(e[zs])?e[zs](t):!1}function Wl(e,t,i){let r=e;do{if(D1(r,t))return!0;if(r===i)return!1;r=r.parentNode}while(r);return!1}function Ls(e,t,i){!e||(e.attachEvent?e.attachEvent(`on${t}`,i):e.addEventListener?e.addEventListener(t,i,!0):e[`on${t}`]=i)}function Ei(e,t,i){!e||(e.detachEvent?e.detachEvent(`on${t}`,i):e.removeEventListener?e.removeEventListener(t,i,!0):e[`on${t}`]=null)}function Wp(e){let t=e.clientHeight,i=e.ownerDocument.defaultView.getComputedStyle(e);return t+=Dt(i.borderTopWidth),t+=Dt(i.borderBottomWidth),t}function Up(e){let t=e.clientWidth,i=e.ownerDocument.defaultView.getComputedStyle(e);return t+=Dt(i.borderLeftWidth),t+=Dt(i.borderRightWidth),t}function jp(e){let t=e.clientHeight,i=e.ownerDocument.defaultView.getComputedStyle(e);return t-=Dt(i.paddingTop),t-=Dt(i.paddingBottom),t}function Gp(e){let t=e.clientWidth,i=e.ownerDocument.defaultView.getComputedStyle(e);return t-=Dt(i.paddingLeft),t-=Dt(i.paddingRight),t}function Xp(e,t){let r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=e.clientX+t.scrollLeft-r.left,n=e.clientY+t.scrollTop-r.top;return{x:o,y:n}}function Kp({x:e,y:t,rotation:i}){let r=`translate(${e}px,${t}px) rotate(${i}rad)`;return{[$l("transform",Vp)]:r}}function Yp(e,t){let i=null;return e.targetTouches&&(i=Ps(e.targetTouches,r=>t===r.identifier)),e.changedTouches&&!i&&(i=Ps(e.changedTouches,r=>t===r.identifier)),i}function qp(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:null}function Ul(e){let t=e.findDOMNode();return t||null}function O1(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Jp(e,t,i){if(!e.props.bounds)return[t,i];let{bounds:r}=e.props;r=typeof r=="string"?r:O1(r);let o=Ul(e);if(!o)return[t,i];if(typeof r=="string"){let{ownerDocument:n}=o,s=n.defaultView,l;r==="parent"?l=o.parentNode:l=n.querySelector(r);let c=s.getComputedStyle(o),d=s.getComputedStyle(l);r={left:-o.offsetLeft+Dt(d.paddingLeft)+Dt(c.marginLeft),top:-o.offsetTop+Dt(d.paddingTop)+Dt(c.marginTop),right:Gp(l)-Up(o)-o.offsetLeft+Dt(d.paddingRight)-Dt(c.marginRight),bottom:jp(l)-Wp(o)-o.offsetTop+Dt(d.paddingBottom)-Dt(c.marginBottom)}}return co(r.right)&&(t=Math.min(t,r.right)),co(r.bottom)&&(i=Math.min(i,r.bottom)),co(r.left)&&(t=Math.max(t,r.left)),co(r.top)&&(i=Math.max(i,r.top)),[t,i]}function Bs(e,t,i){let{state:r}=e,o=!co(r.lastX),n=Ul(e);return o?{node:n,deltaX:0,deltaY:0,lastX:t,lastY:i,x:t,y:i}:{node:n,deltaX:t-r.lastX,deltaY:i-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:i}}function _s(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function Zp(e){return e.props.axis==="both"||e.props.axis==="x"}function Qp(e){return e.props.axis==="both"||e.props.axis==="y"}function Fs(e,t){let i=Ul(t);if(!i)return{x:0,y:0};let{offsetParent:r}=t.props;return!r&&i instanceof HTMLElement&&(r=i.offsetParent||i.ownerDocument.body),Xp(e,r)}var Be={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Ut=Be.mouse,Gl={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}},br=class extends jl.Component{constructor(){super(...arguments);this.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.findDOMNode=()=>{let{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.getTouchFromEvent=t=>{let i=qp(t);return this.setState({touchIdentifier:i}),Yp(t,i)};this.preventDefault=t=>{t.stopPropagation&&t.stopPropagation()};this.handleDragStart=t=>{let i=this.findDOMNode();if(!i||!i.ownerDocument||!i.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:r}=i;if(this.props.disabled||!(t.target instanceof Node)||this.props.handle&&!Wl(t.target,this.props.handle,i)||this.props.cancel&&Wl(t.target,this.props.cancel,i))return!1;let o=Fs(t,this);if(o==null)return!1;let{x:n,y:s}=o,l=Bs(this,n,s);if(this.props.onStart(t,l)===!1)return!1;this.setState({dragging:!0,lastX:n,lastY:s}),Ut.move==="touchmove"?Ls(r,Ut.move,this.onTouchDrag):Ls(r,Ut.move,this.onMouseDrag),Ls(r,Ut.stop,this.handleDragStop)};this.handleDrag=t=>{let i=Fs(t,this);if(i==null)return;let{x:r,y:o}=i,n=Bs(this,r,o);if(this.props.onDrag(t,n)===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(l){let c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.setState({lastX:r,lastY:o})};this.handleDragStop=t=>{if(!this.state.dragging)return;let i=Fs(t,this);if(i==null)return;let{x:r,y:o}=i,n=Bs(this,r,o),s=this.findDOMNode();this.setState({dragging:!1,lastX:NaN,lastY:NaN}),this.props.onStop(t,n),s&&(Ut.move==="touchmove"?Ei(s.ownerDocument,Ut.move,this.onTouchDrag):Ei(s.ownerDocument,Ut.move,this.onMouseDrag),Ei(s.ownerDocument,Ut.stop,this.handleDragStop))};this.onMouseDown=t=>(this.preventDefault(t),Ut=Be.mouse,this.props.onMouseDown(t),t.button&&typeof t.button=="number"&&t.button!==0?!1:this.handleDragStart(t));this.onMouseDrag=t=>(this.preventDefault(t),this.handleDrag(t));this.onMouseUp=t=>(this.preventDefault(t),Ut=Be.mouse,this.handleDragStop(t));this.onTouchStart=t=>{this.preventDefault(t),Ut=Be.touch;let i=this.getTouchFromEvent(t);return this.handleDragStart(i)};this.onTouchDrag=t=>{this.preventDefault(t),Ut=Be.touch;let i=this.getTouchFromEvent(t);return this.handleDrag(i)};this.onTouchEnd=t=>{this.preventDefault(t),Ut=Be.touch;let i=this.getTouchFromEvent(t);return this.handleDragStop(i)}}componentWillUnmount(){let t=this.findDOMNode();if(t){let{ownerDocument:i}=t;Ei(i,Be.mouse.move,this.onMouseDrag),Ei(i,Be.touch.move,this.onTouchDrag),Ei(i,Be.mouse.stop,this.handleDragStop),Ei(i,Be.touch.stop,this.handleDragStop)}}render(){return jl.cloneElement(jl.Children.only(this.props.children),{style:b({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};br.defaultProps=Gl,br.displayName="DraggableCore";var A1=k(b({},Gl),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),Hs=class extends Rs.Component{constructor(t){super(t);this.onDragStart=(t,i)=>{if(this.props.onStart(t,_s(this,i))===!1)return!1;this.setState({dragging:!0,dragged:!0})};this.onDrag=(t,i)=>{let{position:r,defaultPosition:o,onDrag:n,bounds:s}=this.props;if(!this.state.dragging)return!1;let l=_s(this,i),c=Boolean(r),d={x:c?l.x:o.x,y:c?l.y:o.y,slackX:0,slackY:0};if(s){let{x:f,y:g}=d;d.x+=this.state.slackX,d.y+=this.state.slackY;let[x,S]=Jp(this,d.x,d.y);d.x=x,d.y=S,d.slackX=this.state.slackX+(f-d.x),d.slackY=this.state.slackY+(g-d.y),l.x=d.x,l.y=d.y,l.deltaX=d.x-this.state.x,l.deltaY=d.y-this.state.y}if(n(t,l)===!1)return!1;this.setState(d)};this.onDragStop=(t,i)=>{if(!this.state.dragging||this.props.onStop(t,_s(this,i))===!1)return!1;let o={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(this.props.position)){let{x:s,y:l}=this.props.position;o.x=s,o.y=l}this.setState(o)};this.findDOMNode=()=>{let{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(t){Boolean(this.props.position)&&(this.props.updateOnPosition?(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}componentWillUnmount(){this.setState({dragging:!1})}render(){let V=this.props,{position:t,defaultPosition:i,rotation:r,defaultClassName:o,defaultClassNameDragging:n,defaultClassNameDragged:s}=V,l=Zt(V,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),{x:c,y:d,dragging:h,dragged:f}=this.state,g={},S=!Boolean(t)||h,C=t||i,O={x:Zp(this)&&S?c:C.x,y:Qp(this)&&S?d:C.y,rotation:r};g=Kp(O);let E=Rs.Children.only(this.props.children),R=[E.props.className||"",o,h?n:"",f?s:""].join(" ").trim(),$=Rs.cloneElement(E,{className:R,style:b(b({},E.props.style),g)});return Rs.createElement(br,k(b({},l),{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),$)}};Hs.defaultProps=A1,Hs.displayName="Draggable";var th=Hs;var ah=jr(nh());import ge from"react";import Ii,{css as lh}from"styled-components";import Y1 from"react";import sh,{css as q1}from"styled-components";var J1=sh.label`
  ${to}
`,Z1=sh.label`
  display: block;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:e})=>e&&q1`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`,Pt=({label:e,htmlFor:t,show:i,style:r,isDisabled:o,className:n})=>{let s=i?Z1:J1,l=t||(e?e.replace(" ","-"):void 0);return Y1.createElement(s,{style:r,isDisabled:o,htmlFor:l,className:n},e)};Pt.defaultProps={show:!0};var Q1=Ii.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,ty=Ii(Pt)`
  align-self: flex-start;
`,ch=Ii(Ft)`
  color: ${e=>e.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`,ey=Ii.div`
  display: flex;
  justify-content: space-between;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`,iy=Ii.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${e=>.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
`,ry=Ii.div`
  width: ${e=>.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`,oy=Ii.span`
  width: ${e=>Math.round(e.length*.6*e.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${e=>e.activeIndex*.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
`,dh=Ii.div`
  border: solid ${e=>e.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:e})=>e==="left"?lh`
          margin-left: 2px;
          transform: rotate(135deg);
        `:lh`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`,Kl=class extends ge.PureComponent{constructor(t){super(t);this.updateIndex=(t,i=!1)=>{let r=t+(i?-1:1),o=this.props.list.length-1;r>o&&(r=0),r<0&&(r=o),this.props.onSelect(this.props.list[r].identifier)};this.getActiveIndex=t=>{let{list:i}=this.props,r=i.findIndex(o=>o.identifier===t);return r!==-1?r:0};this.throttledUpdateIndex=(0,ah.default)(this.updateIndex,600)}render(){let{list:t,label:i,showLabel:r=!0}=this.props,o=this.getActiveIndex(this.props.defaultIdentifier),n=t.length<=1;return ge.createElement(Q1,{"data-test":I.CarouselSlider},ge.createElement(ty,{show:r,label:i}),ge.createElement(ey,{id:`photoeditorsdk-${i.replace(" ","-")}`},ge.createElement(ch,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o,!0)},ge.createElement(dh,{direction:"left"})),ge.createElement(ry,null,ge.createElement(oy,{activeIndex:o,length:t.length},t.map(s=>ge.createElement(iy,{key:s.identifier},s.value)))),ge.createElement(ch,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o)},ge.createElement(dh,{direction:"right"}))))}};Kl.defaultProps={showLabel:!0};var uh=Kl;import nn from"react";import ny from"styled-components";var sy=ny.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${e=>e.theme.measurements.basicToolControlBar.maxWidth}px;
`,$s=sy;import ay,{css as ph}from"styled-components";var ly=ay.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${e=>e.theme.checkbox.background};
  border-radius: ${e=>e.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${Mt}

  &:hover {
    opacity: ${e=>e.theme.checkbox.hoverOpacity};
  }
  ${e=>e.isChecked&&ph`
      background-color: ${e.theme.checkbox.activeBackground};
      &::after {
        color: ${e.theme.checkbox.activeForeground};
        border-color: ${e.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${e.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${e=>e.isDisabled&&ph`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`,on=ly;import cy from"styled-components";var dy=cy.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${Mt}
`,Vs=dy;var hh=({label:e,value:t,checkMarkPosition:i,onClick:r,isDisabled:o,className:n,style:s})=>{let l=`photoeditorsdk-${e.replace(" ","-")}`;return nn.createElement($s,{"data-test":I.Checkbox,className:n,style:s},i==="left"&&nn.createElement(on,{onClick:r,isDisabled:o,isChecked:t}),nn.createElement(Pt,{isDisabled:o,label:e,htmlFor:l}),nn.createElement(Vs,{id:l,disabled:o,checked:t,onChange:r}),i==="right"&&nn.createElement(on,{onClick:r,isDisabled:o,isChecked:t}))},fh=hh;hh.defaultProps={value:!1,checkMarkPosition:"left"};import{css as uy}from"styled-components";var vr=uy`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  width: 100%;
  min-height: 26px;
  color: ${e=>e.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${e=>e.theme.textInput.borderColor};
  background: ${e=>e.theme.textInput.background};
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &:focus {
    outline: none;
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${e=>e.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
`;import ii from"react";import Ch from"styled-components";import py,{css as hy}from"styled-components";var mh=hy`
  opacity: ${e=>e.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`,gh=py.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${mh}
  }

  ${({isDisabled:e})=>e&&mh}
`;import fy,{css as my}from"styled-components";var bh=fy.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${e=>e.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${e=>e.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:e})=>e&&my`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${Mt}
`;import vy,{css as xh}from"styled-components";import vh from"react";import yh,{css as uo}from"styled-components";var gy=yh.div`
  display: flex;
  ${e=>we()||Gr()?uo`
        overflow: hidden;
      `:e.direction==="vertical"?uo`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `:uo`
      overflow-y: hidden;
      overflow-x: auto;
    `};
`,by=yh.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${e=>e.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${e=>we()||Gr()?uo`
        ${()=>e.direction==="vertical"?uo`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `:uo`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}

        scrollbar-face-color: ${e.theme.scrollbar.handleColor};
        scrollbar-track-color: ${e.theme.toolbar.background};
        scrollbar-base-color: ${e.theme.toolbar.background};
        scrollbar-3dlight-color: ${e.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${e.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${e.theme.toolbar.background};
        scrollbar-shadow-color: ${e.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${e.theme.scrollbar.handleColor};
      `:""}
`,Yl=({direction:e="horizontal","data-test":t,className:i,children:r})=>vh.createElement(gy,{direction:e,className:i},vh.createElement(by,{direction:e,"data-test":t},r));var ql=vy(Yl)`
  position: absolute;

  background: ${e=>e.theme.dropdown.listBackground};
  color: ${e=>e.theme.dropdown.listForeground};
  border: 1px solid ${e=>e.theme.dropdown.listBorderColor};
  box-shadow: ${e=>e.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${e=>e.isOpen?xh`
        visibility: visible;
        opacity: 1;
        display: flex;
      `:""}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>we()?xh`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `:""}

  border-radius: 0 0 ${e=>e.theme.shape.radiusMedium}px
    ${e=>e.theme.shape.radiusMedium}px;
  z-index: ${e=>e.theme.measurements.zIndex.input.list};
`;ql.defaultProps={direction:"vertical"};import yy from"styled-components";var Sh=yy.div`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.dropdown.foreground};
  background-color: ${e=>e.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${e=>e.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${e=>e.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${e=>e.theme.dropdown.hoverBorderColor};
  }

  ${Mt}
`;var xy=Ch.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${e=>e.theme.dropdown.caretColor};
  transform: rotate(${e=>e.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`,Sy=Ch.div``,Jl=class extends ii.PureComponent{constructor(t){super(t);this.state={isOpen:!1};this.handleOutsideClick=t=>{this.node&&this.node.contains(t.target)||this.setState({isOpen:!1})};this.onSelect=t=>{let{onSelect:i}=this.props;i(t),this.setState({isOpen:!1})};this.onClick=()=>{this.setState(t=>({isOpen:!t.isOpen}))};this.listItem=t=>{let{itemStyle:i,selectedItem:r}=this.props,{isOpen:o}=this.state,{value:n,label:s}=t,l={};return typeof i=="function"?l=i(t):i!==null&&typeof i=="object"&&(l=i),ii.createElement(bh,{"aria-hidden":!o,tabIndex:0,style:l,onClick:()=>this.onSelect(n),key:n,isActive:r===n},s)};this.onKeyDown=t=>{(t.code==="Space"||t.code==="Enter")&&this.onClick()};this.nodeRef=i=>{this.node=i}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}render(){let{selectedItem:t,list:i,label:r,style:o,isDisabled:n}=this.props,{isOpen:s}=this.state,l=i.length>1,c=n?{}:{tabIndex:0};return ii.createElement(Sy,null,ii.createElement(Pt,{isDisabled:n,style:{paddingLeft:"0px"},label:r}),ii.createElement("div",{ref:this.nodeRef},ii.createElement(gh,{isOpen:s,isDisabled:n},ii.createElement(Sh,k(b({"data-test":I.Dropdown,"aria-hidden":n},c),{showList:l,style:o,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown}),t,l&&ii.createElement(xy,{rotation:s?180:0})),ii.createElement(ql,{"data-test":I.DropdownList,isOpen:s},l&&i.map(this.listItem)))))}};import Cy from"styled-components";var wh=Cy.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`;import wy from"react";var ky=({children:e})=>wy.createElement("form",{onSubmit:i=>{i.preventDefault()}},e),kh=ky;import sn from"react";import Iy,{css as Eh}from"styled-components";import Zl from"react";import Th from"styled-components";var Ty=Th.input`
  ${vr}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${e=>e.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`,Ey=Th.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`,Ql=class extends Zl.Component{constructor(){super(...arguments);this.onChange=t=>{let{onChange:i}=this.props;i&&i(t.target.value)}}render(){let{id:t,testId:i,value:r,type:o,min:n,max:s,onBlur:l,onFocus:c,onKeyUp:d,onKeyDown:h,onMouseUp:f,onTouchEnd:g,isDisabled:x,className:S,children:C}=this.props;return Zl.createElement(Ey,{className:S},Zl.createElement(Ty,{id:t,"data-test":i,"aria-hidden":x,disabled:x,value:r,type:o,min:n,max:s,onChange:this.onChange,onBlur:l,onFocus:c,onKeyUp:d,onKeyDown:h,onMouseUp:f,onTouchEnd:g}),C)}};Ql.defaultProps={type:"text"};var Ws=Ql;var My=Iy.div`
  ${we()?Eh``:Eh`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`,an=class extends sn.Component{constructor(t){super(t);this.node=null;this.handleOutsideClick=t=>{this.node&&this.node.current&&this.node.current.contains(t.target)||this.onSubmit()};this.onSubmit=()=>{let{onSubmit:t}=this.props,{value:i,isActive:r}=this.state;if(t){let o=parseFloat(an.cleanValue(i));!Number.isNaN(o)&&r&&t(`${o}`)}this.setState({isActive:!1})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:!0})};this.onKeyDown=t=>{let{value:i}=this.state;if(t.key==="Enter")this.onSubmit();else if(t.key==="ArrowUp"){let r=parseFloat(an.cleanValue(i));typeof r=="number"&&this.setState({value:(r+1).toString(),isActive:!0})}else if(t.key==="ArrowDown"){let r=parseFloat(an.cleanValue(i));typeof r=="number"&&this.setState({value:(r-1).toString(),isActive:!0})}};this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:!0})};this.state={value:this.props.value||"",isActive:!1},this.node=sn.createRef()}static getDerivedStateFromProps({value:t},{value:i,isActive:r}){return t!==i&&!r?{value:t}:null}static cleanValue(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)}render(){let{id:t,label:i,isDisabled:r,ariaHidden:o,onMouseUp:n,onTouchEnd:s,className:l}=this.props,{value:c}=this.state;return sn.createElement(My,{ref:this.node,"data-test":I.NummericInput,className:l},sn.createElement(Pt,{htmlFor:t,label:i,show:!!i,isDisabled:r}),sn.createElement(Ws,{id:t,value:c,isDisabled:r,"aria-hidden":o,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:n,onTouchEnd:s}))}},tc=an;tc.defaultProps={showLabel:!0};var Us=tc;import ec,{forwardRef as Dy}from"react";import Oy from"styled-components";var Ay=Oy.input.attrs({type:"search"})`
  ${vr}
`,Ih=Dy(({onChange:e,onKeyDown:t,placeholder:i,className:r,style:o},n)=>ec.createElement("div",{className:r,style:o},ec.createElement(Pt,{show:!1,label:"photoeditorsdk-Search"}),ec.createElement(Ay,{ref:n,id:"photoeditorsdk-Search",onChange:l=>{e&&e(l.target.value)},onKeyDown:t,placeholder:i,autoComplete:"off"})));import ic from"react";import Mh,{css as Py}from"styled-components";var zy=Mh.div``,Dh=({label:e,children:t,inline:i,showLabel:r,isDisabled:o,"data-test":n})=>ic.createElement(zy,{"data-test":n},ic.createElement(Pt,{isDisabled:o,label:e,show:r}),ic.createElement(Ly,{id:`photoeditorsdk-${e.replace(" ","-")}`,inline:!!i},t)),Ly=Mh.div`
  display: inline-flex;
  ${e=>!e.inline&&Py`
        flex-wrap: wrap;
      `||""}
`;Dh.defaultProps={showLabel:!0};var Oh=Dh;import po from"react";import ln,{css as cn}from"styled-components";var By=ln.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`,_y=ln(Pt)`
  padding-bottom: 2px;
`,rc=cn`
  ${Gr()||we()?cn`
        width: 16px;
        height: 16px;
      `:cn`
        width: 20px;
        height: 20px;
      `}
  background: ${e=>e.theme.slider.thumbBackground};
  border: 2px solid ${e=>e.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`,Fy=e=>{let t=(e.value-e.min)*100/(e.max-e.min);return e.adjust?e.value>0?(t=e.value*(e.max/2)*100,`${e.theme.slider.trackColor} 0%,
      ${e.theme.slider.trackColor} 50%,
      ${e.theme.slider.activeTrackColor} 50%,
      ${e.theme.slider.activeTrackColor} ${50+t}%,
      ${e.theme.slider.trackColor} ${50+t}%,
      ${e.theme.slider.trackColor} 100%
      `):e.value<0?(t=e.value*(e.min/2)*100,`${e.theme.slider.trackColor} 0%,
      ${e.theme.slider.trackColor} ${50-t}%,
      ${e.theme.slider.activeTrackColor} ${50-t}%,
      ${e.theme.slider.activeTrackColor} 50%,
      ${e.theme.slider.trackColor} 50%,
      ${e.theme.slider.trackColor} 100%
      `):`${e.theme.slider.trackColor} 0%,
    ${e.theme.slider.trackColor} 100%`:`${e.theme.slider.activeTrackColor} 0%,
    ${e.theme.slider.activeTrackColor} ${t}%,
    ${e.theme.slider.trackColor} ${t}%,
    ${e.theme.slider.trackColor} 100%`},Ry=ln.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  ${Mt}

  ${Gr()||we()?cn`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:cn`
        height: 2px;
        background: ${e=>`linear-gradient(to right, ${Fy(e)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${e=>e.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${e=>e.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${rc}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${rc}
  }
  &::-ms-thumb {
    appearance: none;
    ${rc}
  }
  &::-ms-fill-lower {
    background: ${e=>`${e.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${e=>`${e.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`,Hy=ln.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${e=>e.centerSlider?-56:0}px;
`,Ny=ln(Us)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`,oc=class extends po.Component{constructor(t){super(t);this.onSubmit=t=>{let{onChange:i,suffix:r,divider:o,min:n,max:s,value:l}=this.props,c=t.replace(r,""),d=c?parseFloat(c)/o:l,h=Math.max(n,Math.min(s,d));Number.isNaN(h)||(i(h),this.props.onMouseUp?this.props.onMouseUp(h):this.props.onTouchEnd&&this.props.onTouchEnd(h))};this.onSliderChange=t=>{let{onChange:i}=this.props,r=parseFloat(t.target.value);i(r)};this.onTouchOrMouseUp=t=>{let{value:i}=t.target,{onMouseUp:r,onTouchEnd:o}=this.props,n=parseFloat(i);r&&r(n),o&&o(n)};this.randomId=zo()}render(){let{"data-test":t,identifier:i,value:r,min:o,max:n,divider:s,suffix:l,decimal:c,showLabel:d,showInput:h,style:f,centerSlider:g,adjust:x,label:S,isDisabled:C,step:O,"aria-hidden":E,className:R}=this.props,$=`photoeditorsdk-slider-${this.randomId}`,V=`${$}-input`,nt=`${(r*s).toFixed(c)}${l}`,B=h&&po.createElement(Ny,{id:V,value:nt,isDisabled:C,"aria-hidden":E,onSubmit:this.onSubmit});return po.createElement(By,{className:R,"data-test":t||i||$},po.createElement(_y,{isDisabled:C,label:S,show:d}),po.createElement(Hy,{centerSlider:h&&g},po.createElement(Ry,{type:"range",role:"slider","aria-hidden":E,tabIndex:0,value:r,min:o,max:n,step:O,style:f,disabled:C,id:$,onChange:this.onSliderChange,adjust:x,name:S,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:this.onTouchOrMouseUp,onTouchEnd:this.onTouchOrMouseUp}),B))}};oc.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};var Ah=oc;import ri from"react";var nc=class extends ri.Component{constructor(){super(...arguments);this.onDismiss=()=>{let{handleClose:t,handleDismiss:i}=this.props;t&&t(),i&&i()};this.onConfirm=()=>{let{handleClose:t,handleConfirm:i}=this.props;t&&t(),i&&i()}}render(){let{headerLabel:t,bodyLabel:i,confirmLabel:r,dismissLabel:o,type:n,children:s}=this.props,l=ri.Children.toArray(s)[0];if(!ri.isValidElement(l))throw new Error("Child is not a valid react element");return ri.cloneElement(l,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:ri.createElement(lo,null,t),body:ri.createElement(ei,{"data-test":I.DialogBody},i),footer:ri.createElement(ao,{type:n},o&&ri.createElement(Xo,{label:o,ariaLabel:o,onClick:this.onDismiss}),r&&ri.createElement(Go,{label:r,ariaLabel:r,onClick:this.onConfirm}))})}};import _e from"react";import js from"styled-components";var $y=js.div`
  display: flex;
`,Vy=js(lo)`
  padding: 0;
`,Wy=js.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`,Uy=js(ei)`
  padding: 0;
  margin: 0;
`,sc=class extends _e.PureComponent{render(){let{headerLabel:t,bodyLabel:i,children:r}=this.props,o=_e.Children.toArray(r)[0];if(!_e.isValidElement(o))throw new Error("Child is not a valid react element");return _e.cloneElement(o,{height:"90px",body:_e.createElement(ei,{"data-test":I.DialogBody},_e.createElement($y,null,_e.createElement(As,null),_e.createElement(Wy,null,_e.createElement(Vy,null,t),_e.createElement(Uy,null,i))))})}};import te from"react";import dn from"styled-components";var jy=dn.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,Gy=dn.textarea`
  display: flex;
  caret-color: ${e=>e.theme.primary};
  ${vr}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${e=>e.theme.modal.bodyForeground};
  resize: none;
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${e=>e.theme.primary};
    color: ${e=>e.theme.foreground};
  }
`,Xy=dn.label`
  padding: 11px 20px 8px;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  color: ${e=>e.theme.modal.headerForeground};
`,Ky=dn(ei)`
  height: 100%;
`,Yy=dn(ao)`
  border-top: none;
`,ac=class extends te.Component{constructor(){super(...arguments);this.state={value:""};this.input=te.createRef();this.handleKeydown=t=>{Wd(this.handleDismiss)(t)};this.handleDismiss=()=>{let{handleDismiss:t}=this.props;t&&t(!1)};this.handleConfirm=()=>{let{handleConfirm:t}=this.props,{value:i}=this.input.current;i&&(t&&t(i),this.handleDismiss())};this.onChange=t=>{let{allowEmojis:i}=this.props,r=i?t.target.value:kd(t.target.value);this.input.current.value=r,this.setState({value:r})};this.onSubmit=t=>{t.preventDefault()}}componentDidMount(){let{text:t,defaultText:i}=this.props;this.input.current.focus(),this.input.current.value=t||i||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),t===i&&this.input.current.select()}componentDidUpdate(t){let{isVisible:i}=this.props;t.isVisible!==i&&i&&this.input.current.focus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,!1)}render(){let{headerLabel:t,dismissLabel:i,confirmLabel:r,maxLength:o,type:n,children:s}=this.props,{value:l}=this.state,c=te.Children.toArray(s)[0];if(!te.isValidElement(c))throw new Error("Child is not a valid react element");return te.cloneElement(c,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!l,height:"150px",header:te.createElement(Xy,{htmlFor:"photoeditorsdk-TextInput"},t),body:te.createElement(Ky,null,te.createElement(jy,{onSubmit:this.onSubmit},te.createElement(Gy,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:o}))),footer:te.createElement(Yy,{type:n},te.createElement(Xo,{label:i,ariaLabel:i,onClick:this.handleDismiss}),te.createElement(Go,{label:r,ariaLabel:r,isDisabled:!l,onClick:this.handleConfirm}))})}};ac.defaultProps={defaultText:"Write Something",allowEmojis:!1};var Ph=ac;import qy from"styled-components";var lc=qy.div`
  padding-bottom: ${e=>(e.count||1)*8}px;
`;lc.defaultProps={count:1};import ho from"react";var cc=class extends ho.Component{getChildren(){let t=[],i=[];return ho.Children.forEach(this.props.children,r=>{switch(r.type.componentName){case"case":this.props.type===r.props.value&&t.push(r);break;case"default":i.push(r);break}}),t.length>0?t:i}render(){let t=this.getChildren();return t.length===0?null:ho.createElement(ho.Fragment,null,t)}},Gs=class extends ho.Component{render(){return this.props.children}};Gs.componentName="case";var Xs=class extends ho.Component{render(){return this.props.children}};Xs.componentName="default";import Jy,{keyframes as Zy,css as Qy}from"styled-components";var tx=Zy`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`,ex=Jy.div`
  position: absolute;
  top: ${e=>e.position.y}px;
  left: ${e=>e.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${e=>e.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:e})=>e&&Qy`
      visibility: visible;
      animation: ${tx} 0.5s, fadeout 0.5s 2.5s;
    `}
`,zh=ex;import fo from"react";import ix,{css as Lh}from"styled-components";var rx=()=>Lh`
    animation: ${ss} 0.2s linear;
  `,ox=Lh`
  border: 1px solid ${e=>e.theme.card.activeBorderColor};
  ${cl} {
    background-color: ${e=>e.theme.card.activeOverlayColor};
  }
`,nx=ix.button.attrs(e=>{let t={};return e.image&&(t.backgroundImage=`url(${e.image})`),b({style:t},e.style)})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${e=>e.theme.card.background};
  color: ${e=>e.theme.card.foreground};
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  ${rx};
  animation-fill-mode: both;
  overflow: hidden;

  ${Mt}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:e})=>e&&ox}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${_t} {
      background-color: ${e=>e.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${eo} {
      background-color: ${e=>e.theme.card.hoverOverlayColor};
    }
  }
`,dc=class extends fo.Component{constructor(){super(...arguments);this.state=rs;this.timeout=null;this.onKeyDown=t=>{(t.key==="Space"||t.key==="Enter")&&this.props.onClick&&this.props.onClick()};this.onClick=t=>{let i=t.currentTarget.getBoundingClientRect(),r=t.pageX-i.left,o=t.pageY-i.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(r,o)}):this.setRippleState(r,o),this.props.onClick(t)};this.setRippleState=(t,i)=>{this.setState({left:t,top:i,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){let{children:t,label:i,isActive:r,isDisabled:o,image:n,style:s,className:l}=this.props,{left:c,top:d,display:h}=this.state;return fo.createElement(nx,{isActive:r,"aria-label":i,"data-test":i,disabled:o,image:n,onClick:this.onClick,onKeyDown:this.onKeyDown,style:s,className:l},t,fo.createElement(os,{display:h,left:c,top:d}),fo.createElement(cl,null),fo.createElement(_t,null),fo.createElement(eo,null))}};dc.defaultProps={isActive:!1};var gI={Focused:Mt,VisuallyHidden:to},bI={ripple:es,scale:Vu,slide:ss},F={Container:Tl,ColorItem:Hp,ColorItemBase:ks,ColorItemBackground:Cs,ColorItemTiledBackground:Ts,ColorItemActiveOverlay:ws,Dialog:Np,DialogBase:Ms,DialogContainer:Ds,DialogBackdrop:Is,DialogHeader:lo,DialogBody:ei,DialogFooter:ao,DialogSpinner:As,TextEditModal:Ph,ActionModal:nc,InfoModal:sc,Spacer:lc,Draggable:th,DraggableCore:br,Toast:zh,Input:{Label:Pt,File:wh,Search:Ih,Slider:Ah,CarouselSlider:uh,Selection:Oh,Checkbox:fh,CheckboxBase:$s,CheckboxInput:Vs,CheckboxCheckMark:on,Dropdown:Jl,Text:Ws,NumericInput:Us,Form:kh},Switch:{Index:cc,Case:Gs,Default:Xs}};import sx from"styled-components";var Bh=sx(me)`
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  color: ${e=>e.theme.button.textSecondaryForeground};

  ${_t} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`;import uc,{css as _h}from"styled-components";var Fh=uc.div`
  display: inline-flex;
`,Ks=uc(me)`
  background: ${e=>e.theme.canvasActionBar.background};
  color: ${e=>e.theme.canvasActionBar.foreground};
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`,pc=uc.div`
  ${({show:e})=>e?_h`
          opacity: 1;
        `:_h`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${e=>e.theme.canvasActionBar.background};
  color: ${e=>e.theme.canvasActionBar.foreground};
  border-radius: ${e=>e.theme.canvasActionBar.borderRadius?e.theme.canvasActionBar.borderRadius:e.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.buttonGroup};

  ${Ks} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${e=>e.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`;import Rh from"react";import Hh from"styled-components";var ax=Hh(Ft)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${e=>e.theme.measurements.zIndex.button.float};
  padding: 2px;
`,lx=Hh.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${e=>e.theme.webcam.floatButton};
`,Nh=e=>Rh.createElement(ax,b({},e),Rh.createElement(lx,null));var Ys=[m.LIBRARY,[m.TRANSFORM,m.FILTER,m.ADJUSTMENT],[m.FOCUS,m.FRAME,m.OVERLAY],[m.TEXT,m.TEXT_DESIGN,m.STICKER,m.BRUSH]];var mo={license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[st.UNDO,st.REDO,st.EXPORT,st.CLOSE],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,displaySerializationModal:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:wd()?"webgl":"canvas"},enableZoom:!0,scaleImageToFit:!0,restrictZoomOutToDefault:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:m.FILTER,tools:Ys,snapping:new Ed,filter:new Dd,focus:new Od,adjustment:new Md,library:new Pd,overlay:new zd,sticker:new Ld,text:new Bd,textdesign:new Fd,frame:new Ad,brush:new _d,transform:new Rd,export:{image:{exportType:nr.IMAGE,format:ke.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{}};function hc(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)!=="[object RegExp]"&&Object.prototype.toString.call(e)!=="[object Date]"}function cx(e){return Array.isArray(e)?[]:{}}function fc(e,t){return t&&t.clone===!0&&hc(e)?mc(cx(e),e,t):e}function dx(e,t,i){let r={};return hc(e)&&Object.keys(e).forEach(o=>{r[o]=fc(e[o],i)}),Object.keys(t).forEach(o=>{let n=hc(t[o])&&e[o];r[o]=n?mc(e[o],t[o],i):fc(t[o],i)}),r}function mc(e,t,i){return Array.isArray(t)?Array.isArray(e)?t:fc(t,i):dx(e,t,i)}function ee(e,t=null){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((i,r)=>mc(i,r,t))}var gc=e=>{let t=Number(e).toString(16);return t.length<2&&(t=`0${t}`),t},$h=(e,t,i)=>{let r=gc(e*255),o=gc(t*255),n=gc(i*255);return`#${r}${o}${n}`},oi=e=>{if(Zd(e)){let[t,i,r,o]=e;return`rgba(${t*255}, ${i*255}, ${r*255}, ${o})`}if(Jd(e)){let{r:t,g:i,b:r,a:o}=e;return`rgba(${t*255}, ${i*255}, ${r*255}, ${o})`}if(qd(e)){let[t,i,r]=e;return $h(t,i,r)}if(Yd(e)){let{r:t,g:i,b:r}=e;return $h(t,i,r)}return e},be=e=>e.map(t=>({identifier:t.name,color:t.color,colorString:oi(t.color)})),Nt={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]},bc={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};var yr={[lt.BRIGHTNESS]:0,[lt.SATURATION]:0,[lt.CONTRAST]:0,[lt.GAMMA]:0,[lt.CLARITY]:0,[lt.EXPOSURE]:0,[lt.SHADOWS]:0,[lt.HIGHLIGHTS]:0,[lt.WHITES]:0,[lt.BLACKS]:0,[lt.TEMPERATURE]:0,[lt.SHARPNESS]:0};var go=class{constructor(){this.snapshots=[];this.observeIndex=w.box(-1)}addSnapshot(t){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(t)):this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(t)],this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[],this.observeIndex.set(-1)}undo(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}redo(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}discardSnapshotsfromIndex(t){t>0&&t<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,t),this.observeIndex.set(this.snapshots.length-1))}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};a([u],go.prototype,"index",1),a([u],go.prototype,"canUndo",1),a([u],go.prototype,"canRedo",1);var _;(function(r){r.ADD="add",r.EDIT="edit",r.DELETE="delete"})(_||(_={}));var xr=class{constructor(t){this.awaitHistoryChange=!1;this.isDirtySinceSave=!1;this.undo=()=>D(this,null,function*(){if(!this.awaitHistoryChange){this.awaitHistoryChange=!0;let t=this.appHistoryManager.undo();yield this.applyState(t),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1)}});this.redo=()=>D(this,null,function*(){if(!this.awaitHistoryChange){this.awaitHistoryChange=!0;let t=this.appHistoryManager.redo();yield this.applyState(t),this.awaitHistoryChange=!1}});this.editor=t,this.appHistoryManager=new go}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){let t=P(this.editor.adjustmentsToolStore.state),i=P(this.editor.filterToolStore.state),r=this.editor.focusToolStore.getFocusStateForHistory(),o=P(this.editor.overlayToolStore.state),n=P(this.editor.frameToolStore.state),{strokes:s}=this.editor.brushToolStore,l=this.editor.spriteStore.getSpriteHistoryState(),c=this.editor.transformToolStore.serializableState;return{[m.ADJUSTMENT]:t,[m.FILTER]:i,[m.FOCUS]:r,[m.OVERLAY]:o,[m.FRAME]:n,[m.BRUSH]:s,sprite:l,[m.TRANSFORM]:c}}addInitialSnapshot(){let t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:_.ADD,description:"Initial State"})}addSnapshot(t,i,r){let o;t?t.sprite||t.transform?o=b(b({},this.getHistoryState()),t):o=t:o=this.getHistoryState(),this.appHistoryManager.addSnapshot({state:o,type:i,description:r}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0)}applyState(i){return D(this,arguments,function*({state:t}){try{if(t){let r=Object.keys(t);for(let o of r)switch(o){case m.FILTER:yield this.editor.filterToolStore.updateStateFromHistory(t[o]);break;case m.ADJUSTMENT:yield this.editor.adjustmentsToolStore.updateStateFromHistory(t[o]);break;case m.OVERLAY:yield this.editor.overlayToolStore.updateStateFromHistory(t[o]);break;case m.FRAME:yield this.editor.frameToolStore.updateStateFromHistory(t[o]);break;case m.FOCUS:yield this.editor.focusToolStore.updateStateFromHistory(t[o],this.editor.canvasStore.sizeVector);break;case m.BRUSH:yield this.editor.brushToolStore.updateStateFromHistory(t[o]);break;case"sprite":yield this.editor.spriteStore.updateStateFromHistory(t[o]);break;case m.TRANSFORM:this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t[o]),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),yield this.editor.wait();break}yield this.editor.renderPromise()}}catch(r){console.error(r),this.editor.modalStore.showActionModal({type:rt.ERROR,identifier:"unexpectedError",error:r,handleConfirm:()=>{window.location.reload()}})}})}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1}getCurrentSpritesState(){var t,i;return(i=(t=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:t.state)==null?void 0:i.sprite}};a([p],xr.prototype,"undo",2),a([p],xr.prototype,"redo",2),a([u],xr.prototype,"canUndo",1),a([u],xr.prototype,"canRedo",1);var mt=class{constructor(t,i){this.assets=[];this.entityMapper=t=>"items"in t?this.categoryMapper(t):this.itemMapper(t);this.categoryMapper=t=>t?k(b({},t),{thumbnailURI:this.getCategoryThumbnailURI(t),name:this.config.locale[t.identifier]||t.name,items:t.items.map(this.itemMapper)}):null;this.itemMapper=t=>k(b({},t),{thumbnailURI:this.getItemThumbnailURI(t),name:this.config.locale[t.identifier]||("name"in t?t.name:"")});this.getCategoryThumbnailURI=t=>t.thumbnailURI?Po(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"?t.thumbnailURI:this.config.getAssetPath(t.thumbnailURI||""):"";this.getItemThumbnailURI=t=>{var r;if((r=t.thumbnailURI)==null?void 0:r.trim())return Po(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"?t.thumbnailURI:this.config.getAssetPath(t.thumbnailURI||"");let i=t[this.config.itemFallbackKey];return i?this.config.getAssetPath(i):""};this.config=i,this.assets=t.map(this.entityMapper).filter(Boolean)}static isCategory(t){return Object.prototype.hasOwnProperty.call(t,"items")}get categories(){return this.assets.reduce((t,i)=>{if(mt.isCategory(i))return[...t,i]},[]).filter(Boolean)}get items(){return this.assets.reduce((t,i)=>mt.isCategory(i)?[...t,...i.items]:[...t,i],[]).filter(Boolean)}};var ni=class{constructor(t,i){this.from=t,this.to=i}contains(t){return this.from<=t&&t<=this.to}clamp(t){return Math.min(Math.max(this.from,t),this.to)}};var ux=new ni(-1,1),bo=class{constructor(t){this.editAdjustments=({type:t,value:i})=>{let r=ux.clamp(i);this.state[t]=r};this.reset=()=>{xt(()=>{this.indexInContainer===-1&&(Object.keys(yr).forEach(t=>{this.state[t]=yr[t]}),this.orderHelper.removeIndex(m.ADJUSTMENT))})};this.setAdjustmentEffect=t=>{let i=this.orderHelper.addIndex(m.ADJUSTMENT);return this.effect?this.effect.setProperties(t):this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,i),this.effect.getProperties()};this.removeAdjustmentEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.engineMediator=t,this.state=yr}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get orderHelper(){return this.engineMediator.orderHelper}};a([w],bo.prototype,"state",2),a([p],bo.prototype,"editAdjustments",2),a([p],bo.prototype,"reset",2);var Z=class{constructor(t){this.dirty=w.box(!1);this.editAdjustments=({type:t,value:i})=>{this.pureSetAdjustment({type:t,value:i}),this.editor.render()};this.toolSnapshot=()=>{(0,It.default)(this.state,yr)?this.dirty.set(!1):this.dirty.set(!0),this.addSnapshot(_.EDIT,m.ADJUSTMENT)};this.addSnapshot=(t,i)=>{this.editor.addSnapshot(void 0,t,i)};this.toggleOptionSelection=t=>{this.selectedOption=t};this.pureSetAdjustment=({type:t,value:i})=>{let r=this.adjustmentsStore.setAdjustmentEffect({[t]:i});this.adjustmentsStore.editAdjustments({type:t,value:r[t]})};this.pureReset=()=>{this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""};this.reset=()=>{this.pureReset(),this.addSnapshot(_.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=t=>{if(!(0,It.default)(t,this.state)){if((0,It.default)(t,yr)){this.pureReset();return}xt(()=>{this.dirty.set(Object.values(t).some(i=>i!==0)),Object.keys(t).forEach(i=>{this.pureSetAdjustment({type:i,value:t[i]})})})}};this.updateStateFromSerialization=t=>{this.updateStateFromHistory(t)};this.editor=t,this.adjustmentsStore=new bo(this.editor.engineMediator),this.selectedOption="";let i=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new mt(i,k(b({},this.config),{locale:b(b({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){let t=this.items.find(i=>i?i.identifier===this.selectedOption:!1);return t?t.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[m.ADJUSTMENT]}get locale(){return this.editor.configStore.locale[m.ADJUSTMENT]}};a([w],Z.prototype,"selectedOption",2),a([w],Z.prototype,"dirty",2),a([p],Z.prototype,"editAdjustments",2),a([p],Z.prototype,"toggleOptionSelection",2),a([p],Z.prototype,"pureSetAdjustment",2),a([p],Z.prototype,"pureReset",2),a([p],Z.prototype,"reset",2),a([p],Z.prototype,"updateStateFromHistory",2),a([p],Z.prototype,"updateStateFromSerialization",2),a([u],Z.prototype,"selectedAdjustmentType",1),a([u],Z.prototype,"isDirty",1),a([u],Z.prototype,"state",1),a([u],Z.prototype,"selectedOptionLabel",1),a([u],Z.prototype,"brightness",1),a([u],Z.prototype,"saturation",1),a([u],Z.prototype,"contrast",1),a([u],Z.prototype,"gamma",1),a([u],Z.prototype,"clarity",1),a([u],Z.prototype,"exposure",1),a([u],Z.prototype,"shadows",1),a([u],Z.prototype,"highlights",1),a([u],Z.prototype,"whites",1),a([u],Z.prototype,"blacks",1),a([u],Z.prototype,"temperature",1),a([u],Z.prototype,"sharpness",1),a([u],Z.prototype,"categories",1),a([u],Z.prototype,"items",1),a([u],Z.prototype,"config",1),a([u],Z.prototype,"locale",1);var qs={identifier:"identity",intensity:1,isDuotone:!1};var px=new ni(0,1),Mi=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeIfDuotone=t=>{this.state.isDuotone=t};this.changeIntensity=t=>{let i=px.clamp(t);this.state.intensity=i};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=qs.identifier,this.state.intensity=qs.intensity,this.removeIndex())};this.setFilterEffect=({identifier:t,intensity:i,isDuotone:r})=>{let o=this.state,n=()=>{this.changeIdentifier(t),this.changeIntensity(i),this.changeIfDuotone(r)};this.removeFilterEffect();let s=this.engineMediator.orderHelper.addIndex(m.FILTER);return r?new Promise((l,c)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,s).then(d=>{n(),this.effect=d,this.effect.setProperties({colorIntensity:i}),l()}).catch(d=>{this.fallbackOnError(o),c(d)})}):new Promise((l,c)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,s).then(d=>{n(),this.effect=d,this.effect.setProperties({intensity:i}),l()}).catch(d=>{this.fallbackOnError(o),c(d)})})};this.removeFilterEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.setEffectProperties=({intensity:t})=>this.effect?(this.state.isDuotone?this.effect.setProperties({colorIntensity:t}):this.effect.setProperties({intensity:t}),this.effect.getProperties()):null;this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(m.FILTER)};this.fallbackOnError=t=>{this.changeIdentifier(t.identifier),this.changeIntensity(t.intensity),t.identifier==="identity"&&this.removeIndex()};this.engineMediator=t,this.state=qs}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};a([w],Mi.prototype,"state",2),a([p],Mi.prototype,"changeIdentifier",2),a([p],Mi.prototype,"changeIfDuotone",2),a([p],Mi.prototype,"changeIntensity",2),a([p],Mi.prototype,"reset",2);var Js="identity",gt=class{constructor(t){this.selectFilter=(t,i=1)=>D(this,null,function*(){if(t!==this.identifier){let r=this.selectedCategory;yield this.filterStore.setFilterEffect({identifier:t,intensity:i,isDuotone:this.isOptionDuoTone(t)}),this.selectedCategory===Js&&(this.selectedCategory=r),this.editor.render(),this.addSnapshot(_.ADD,m.FILTER)}});this.changeIntensity=t=>{let i=this.isOptionDuoTone(this.identifier),r=this.filterStore.setEffectProperties({intensity:t});if(r){let o=i?r.colorIntensity:r.intensity;this.filterStore.changeIntensity(o),this.editor.render()}};this.setImageAndGetPreviews=()=>D(this,null,function*(){let{image:t}=this.editor.activeStore.state;yield this.editor.previewThumbnails.addImageToContainer(t),yield this.getAllFilterPreview()});this.getAllFilterPreview=()=>D(this,null,function*(){let t=this.entityManager.items.map(n=>({identifier:n.identifier,isDuotone:this.isOptionDuoTone(n.identifier)})),i=yield this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);yield this.editor.wait();let{config:r}=this,o=this.editor.configStore.assetProvider.getAssets("filter").map(n=>k(b({},n),{items:n.items.map(s=>k(b({},s),{thumbnailURI:i[s.identifier]}))}));this.entityManager=new mt(o,k(b({},r),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))});this.toolSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.controls.sliderIntensity)};this.addSnapshot=(t,i)=>{this.editor.addSnapshot(void 0,t,i)};this.pureReset=()=>{this.selectedCategory=Js,this.filterStore.removeFilterEffect(),this.filterStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(_.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Js:t};this.updateStateFromSerialization=({identifier:t,intensity:i})=>{let r=this.doesFilterAssetExist(t);if(r){let o=Ma(r);return this.filterStore.setFilterEffect({identifier:t,intensity:i,isDuotone:o})}return new Promise((o,n)=>{n(new Error(`Filter Asset ${t} doesn't exist`))})};this.updateStateFromHistory=t=>D(this,null,function*(){return t.identifier==="identity"?(this.pureReset(),new Promise(i=>{i()})):this.filterStore.setFilterEffect(t)});this.doesFilterAssetExist=t=>this.entityManager.items.find(i=>t===i.identifier);this.isOptionDuoTone=t=>{let i=this.doesFilterAssetExist(t);return i?Ma(i):!1};this.editor=t,this.selectedCategory=Js,this.filterStore=new Mi(this.editor.engineMediator);let{config:i}=this,r=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new mt(r,k(b({},i),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[m.FILTER]}get locale(){return this.editor.configStore.locale[m.FILTER]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};a([w],gt.prototype,"selectedCategory",2),a([w],gt.prototype,"entityManager",2),a([p],gt.prototype,"selectFilter",2),a([p],gt.prototype,"changeIntensity",2),a([p],gt.prototype,"pureReset",2),a([p],gt.prototype,"reset",2),a([p],gt.prototype,"toggleCategorySelection",2),a([p],gt.prototype,"updateStateFromSerialization",2),a([p],gt.prototype,"updateStateFromHistory",2),a([u],gt.prototype,"state",1),a([u],gt.prototype,"identifier",1),a([u],gt.prototype,"intensity",1),a([u],gt.prototype,"isDuotone",1),a([u],gt.prototype,"selectedCategoryIdentifier",1),a([u],gt.prototype,"isOptionSelected",1),a([u],gt.prototype,"config",1),a([u],gt.prototype,"locale",1),a([u],gt.prototype,"categories",1),a([u],gt.prototype,"items",1);var vc=class extends Hd{onExport(t){this.emit(Ee.EXPORT,t)}onClose(){this.emit(Ee.CLOSE)}onHistoryChange(){this.emit(Ee.HISTORY_CHANGE)}onEditorReady(){this.emit(Ee.EDITOR_READY)}onErrorImageLoading(t){this.emit(Ee.ERROR_IMAGE_LOADING,t)}onImageLoaded(){this.emit(Ee.IMAGE_LOAD)}onStickerUploadedAdd(t){this.emit(Ee.STICKER_UPLOAD_ADD,t)}onToolChanged(t){this.emit(Ee.TOOL_ENTER,t)}onErrorWebGLContextLost(){this.emit(Ee.ERROR_WEBGL_CONTEXT_LOST)}};var yc=ee([mo,{layout:"basic",defaultTool:null}]);var xc={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t"},categories:{[zt.DuoTone]:"DuoTone",[zt.BW]:"B & W",[zt.Vintage]:"Vintage",[zt.Smooth]:"Smooth",[zt.Cold]:"Cold",[zt.Warm]:"Warm",[zt.Legacy]:"Legacy"},items:{[y.Inferno]:"Inferno",[y.Chestnut]:"Chestnut",[y.Fixie]:"Fixie",[y.Fridge]:"Fridge",[y.Sunny70s]:"Sunny 70s",[y.FlatBlack]:"Flat Black",[y.Mellow]:"Mellow",[y.HardStuff]:"Hard Stuff",[y.Oldtimer]:"Oldtimer",[y.AD1920]:"1920 A.D.",[y.Ancient]:"Ancient",[y.Kalmen]:"Kalmen",[y.Joran]:"Joran",[y.Polaroid]:"Polaroid",[y.Zephyr]:"Zephyr",[y.Levante]:"Levante",[y.Greyed]:"Greyed",[y.Classic]:"Classic",[y.Colorful]:"Colorful",[y.Snappy]:"Snappy",[y.Candy]:"Candy",[y.Creamy]:"Creamy",[y.LowFire]:"Low Fire",[y.Colla]:"Colla",[y.Sunrise]:"Sunrise",[y.Moss]:"Moss",[y.Food]:"Food",[y.Glam]:"Glam",[y.Gobblin]:"Gobblin",[y.HighCarb]:"High Carb",[y.Hicon]:"Hicon",[y.K1]:"K1",[y.K6]:"K6",[y.Pebble]:"Pebble",[y.Keen]:"Keen",[y.Lemon]:"Lemon",[y.Litho]:"Litho",[y.Lomo]:"Lomo",[y.Lomo100]:"Lomo 100",[y.Lucid]:"Lucid",[y.Neat]:"Neat",[y.Pumpkin]:"Pumpkin",[y.Solanus]:"Solanus",[y.Pale]:"Pale",[y.Pitched]:"Pitched",[y.Weathered]:"Weathered",[y.GreenGap]:"Green Gap",[y.PolaSX]:"Pola SX",[y.Pro400]:"Pro 400",[y.Quozi]:"Quozi",[y.Sepia]:"Sepia",[y.Settled]:"Settled",[y.Seventies]:"Seventies",[y.Soft]:"Soft",[y.Steel]:"Steel",[y.Summer]:"Summer",[y.Golden]:"Golden",[y.Tender]:"Tender",[y.Twilight]:"Twilight",[y.Softy]:"Softy",[y.Dusty]:"Dusty",[y.Desert]:"Desert",[y.Peach]:"Peach",[y.Clash]:"Clash",[y.Plum]:"Plum",[y.Breezy]:"Breezy",[y.DeepBlue]:"Deep Blue",[y.Frog]:"Frog",[y.Sunset]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{[K.Bokeh]:"Bokeh",[K.Chop]:"Chop",[K.Clouds]:"Clouds",[K.Golden]:"Golden",[K.Grain]:"Grain",[K.Hearts]:"Hearts",[K.LightLeak1]:"Light Leak 1",[K.LightLeak2]:"Light Leak 2",[K.Metal]:"Metal",[K.Mosaic]:"Mosaic",[K.Painting]:"Painting",[K.Paper]:"Paper",[K.Rain]:"Rain",[K.Vintage]:"Vintage",[K.Wall1]:"Wall",[K.Wall2]:"Wall 2",[K.Wood]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},[m.CUSTOM]:{title:"Benutzerdefiniert"}};var Sr={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Reload"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{[zt.DuoTone]:"DuoTone",[zt.BW]:"B & W",[zt.Vintage]:"Vintage",[zt.Smooth]:"Smooth",[zt.Cold]:"Cold",[zt.Warm]:"Warm",[zt.Legacy]:"Legacy"},items:{[y.Inferno]:"Inferno",[y.Chestnut]:"Chestnut",[y.Fixie]:"Fixie",[y.Fridge]:"Fridge",[y.Sunny70s]:"Sunny 70s",[y.FlatBlack]:"Flat Black",[y.Mellow]:"Mellow",[y.HardStuff]:"Hard Stuff",[y.Oldtimer]:"Oldtimer",[y.AD1920]:"1920 A.D.",[y.Ancient]:"Ancient",[y.Kalmen]:"Kalmen",[y.Joran]:"Joran",[y.Polaroid]:"Polaroid",[y.Zephyr]:"Zephyr",[y.Levante]:"Levante",[y.Greyed]:"Greyed",[y.Classic]:"Classic",[y.Colorful]:"Colorful",[y.Snappy]:"Snappy",[y.Candy]:"Candy",[y.Creamy]:"Creamy",[y.LowFire]:"Low Fire",[y.Colla]:"Colla",[y.Sunrise]:"Sunrise",[y.Moss]:"Moss",[y.Food]:"Food",[y.Glam]:"Glam",[y.Gobblin]:"Gobblin",[y.HighCarb]:"High Carb",[y.Hicon]:"Hicon",[y.K1]:"K1",[y.K6]:"K6",[y.Pebble]:"Pebble",[y.Keen]:"Keen",[y.Lemon]:"Lemon",[y.Litho]:"Litho",[y.Lomo]:"Lomo",[y.Lomo100]:"Lomo 100",[y.Lucid]:"Lucid",[y.Neat]:"Neat",[y.Pumpkin]:"Pumpkin",[y.Solanus]:"Solanus",[y.Pale]:"Pale",[y.Pitched]:"Pitched",[y.Weathered]:"Weathered",[y.GreenGap]:"Green Gap",[y.PolaSX]:"Pola SX",[y.Pro400]:"Pro 400",[y.Quozi]:"Quozi",[y.Sepia]:"Sepia",[y.Settled]:"Settled",[y.Seventies]:"Seventies",[y.Soft]:"Soft",[y.Steel]:"Steel",[y.Summer]:"Summer",[y.Golden]:"Golden",[y.Tender]:"Tender",[y.Twilight]:"Twilight",[y.Softy]:"Softy",[y.Dusty]:"Dusty",[y.Desert]:"Desert",[y.Peach]:"Peach",[y.Clash]:"Clash",[y.Plum]:"Plum",[y.Breezy]:"Breezy",[y.DeepBlue]:"Deep Blue",[y.Frog]:"Frog",[y.Sunset]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{[K.Bokeh]:"Bokeh",[K.Chop]:"Chop",[K.Clouds]:"Clouds",[K.Golden]:"Golden",[K.Grain]:"Grain",[K.Hearts]:"Hearts",[K.LightLeak1]:"Light Leak 1",[K.LightLeak2]:"Light Leak 2",[K.Metal]:"Metal",[K.Mosaic]:"Mosaic",[K.Painting]:"Painting",[K.Paper]:"Paper",[K.Rain]:"Rain",[K.Vintage]:"Vintage",[K.Wall1]:"Wall",[K.Wall2]:"Wall 2",[K.Wood]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},[m.CUSTOM]:{title:"Custom"}};var Vh=e=>e==="de"?xc:Sr,Wh=(e,t)=>t&&t[e]?ee([Vh(e),t[e]]):Vh(e)||Sr;var hx={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:12,letterSpacing:1.2,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},fx={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},Zs=()=>{let e=8,t=230,i=3*e,r=t-2*i,o=(r-2*e)/3,n=(r-e)/2;return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:t,paddingTop:2*e,paddingBottom:2*e,paddingLeft:i,paddingRight:i,marginBottom:0,controls:{gutter:2*e}},advancedCard:{small:{height:o,width:o},medium:{height:n,width:n},large:{height:86,width:r}},advancedSpacer:8,basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:hx,zIndex:fx}};var mx=({primary:e="#365afc",background:t="#0B0B0B",foreground:i="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{let r="rgba(255, 255, 255, 0.90)",o="rgba(255, 255, 255, 0.60)",n="rgba(255, 255, 255, 0.38)",s="#424242",l="#333333",c="#242424",d="#171717",h="#0B0B0B",f="rgba(255, 255, 255, 0.08)",g="rgba(0, 0, 0, 0.3)",x="rgba(89, 121, 252, 0.20)",S="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:t,foreground:i,primary:e,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:l,activeForeground:e,containedPrimaryBackground:e,containedPrimaryForeground:r,outlinedPrimaryBackground:c,outlinedPrimaryForeground:r,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:e,textSecondaryForeground:o,outlinedInactiveOverlayColor:g,textInactiveOpacity:"0.5",hoverOverlayColor:f},checkbox:{background:l,foreground:i,activeForeground:i,activeBackground:e,inactiveOpacity:S,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:r,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:r,activeBorderColor:e,activeOverlayColor:x,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:r,inactiveOverlayColor:g,hoverOverlayColor:f},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:e,activeForeground:r},dropdown:{background:"transparent",foreground:r,hoverBorderColor:o,borderColor:l,caretColor:n,listBackground:l,listBorderColor:l,listItemHoverBackground:s,listForeground:o,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:S},textInput:{foreground:r,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:l,inactiveOpacity:S},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:e,thumbBackground:d,thumbBorderColor:e,inactiveOpacity:S,hoverOpacity:"0.7"},selectColor:{activeBorderColor:e,inactiveOpacity:S},toolbar:{foreground:r,background:c,activeBackground:"transparent",activeForeground:e,borderColor:"transparent"},tooltip:{background:s,foreground:r},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:l,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:S},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:r,borderColor:"none"},canvasActionBar:{background:s,foreground:r,separatorColor:n},canvas:{background:h,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:l,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:i,background:h},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},Qs=mx;var gx=({primary:e="#1e47fb",background:t="#FBFBFB",foreground:i="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{let r="rgba(0, 0, 0, 0.90)",o="rgba(0, 0, 0, 0.60)",n="rgba(0, 0, 0, 0.38)",s="#CCCCCC",l="#D4D4D4",c="#E6E6E6",d="#EEEEEE",h="#FBFBFB",f="rgba(125, 125, 125, 0.12)",g="rgba(30, 71, 251, 0.2)",x="rgba(0, 0, 0, 0.1)",S="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:t,foreground:i,primary:e,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:l,activeForeground:e,containedPrimaryBackground:e,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:c,outlinedPrimaryForeground:r,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:e,textSecondaryForeground:o,outlinedInactiveOverlayColor:x,textInactiveOpacity:"0.5",hoverOverlayColor:f},checkbox:{background:l,foreground:i,activeForeground:i,activeBackground:e,inactiveOpacity:S,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:r,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:r,activeBorderColor:e,activeOverlayColor:g,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:x,hoverOverlayColor:f},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:e,activeForeground:r},dropdown:{background:"transparent",foreground:r,hoverBorderColor:o,borderColor:l,listBackground:l,caretColor:n,listForeground:o,listBorderColor:l,listItemHoverBackground:s,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:S},textInput:{foreground:r,hoverBorderColor:r,background:"transparent",borderColor:l,inactiveOpacity:S},slider:{trackColor:s,activeTrackColor:e,thumbBackground:d,thumbBorderColor:e,inactiveOpacity:S,hoverOpacity:"0.7"},selectColor:{activeBorderColor:e,inactiveOpacity:S},toolbar:{foreground:r,background:l,activeBackground:"transparent",activeForeground:e,borderColor:"transparent"},tooltip:{background:s,foreground:r},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:d,shadow:"none",separatorColor:l,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:S},mainCanvasActionBar:{background:"transparent",foreground:r,borderColor:"none"},canvasActionBar:{background:s,foreground:r,separatorColor:n},canvas:{background:h,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:l,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:i,background:h},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},Sc=gx;var un=Qs(),Cc=Zs(),jt=k(b({},un),{measurements:Cc});var bx=e=>e==="light"?Sc:Qs,Uh=(e,t)=>{let i=bx(e);if(t&&t[e]){let{primary:r,background:o,foreground:n}=t[e],s={primary:r,background:o,foreground:n},l=Object.keys(s).reduce((c,d)=>s[d]?k(b({},c),{[d]:s[d]}):c,{});return ee([i(l),t[e]])}return i()||un};var vx=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","mainCanvasActionBar","colorItem","fontSystem"],jh=e=>{let t=Zs();if(e){let i={};return Object.keys(e).forEach(r=>{vx.indexOf(r)!==-1&&(i[r]=e[r])}),ee([t,i])}return t};var yx={config:mo,locale:Sr,theme:un,measurements:Cc},Gt=class{constructor(){this.checkDefaultToolAvailability=(t,i)=>i.indexOf(t)!==-1;this.state=w(yx),this.events=new vc,this.licenseChecker=null}saveConfig(t){t.mainCanvasActions&&t.mainCanvasActions.length!==4&&(t.mainCanvasActions.length=4);let i=t.layout&&t.layout==="basic"?yc:mo,r=ee([i,t]);this.licenseChecker=new Qd(r.license),this.licenseChecker.areCustomAssetsAllowed()||(r.sticker.enableCustomUpload=!1);let o=Wh(r.language,r.custom.languages),n=Uh(r.theme,r.custom.themes),s=jh(r.custom.measurements),{provider:l}=r.library,c=[];r.adjustment.categories=r.adjustment.categories.reduce((f,g)=>(f.push(k(b({},g),{items:g.items.filter(x=>Id[x.identifier]?!0:(c.push(x.identifier),!1))})),f),[]),c.length!==0&&console.error(`The following identifier are incorrect for the adjustment tool: ${c.join(", ")}`),delete r.language,delete r.custom.languages,delete r.custom.themes,delete r.library.provider;let d=r.tools.reduce((f,g)=>typeof g=="object"?[...f,...g]:[...f,g],[]);d.length||(console.error("Empty list input for tools"),d=Ys.reduce((f,g)=>typeof g=="object"?[...f,...g]:[...f,g],[])),d=d.filter(f=>this.licenseChecker.isToolAllowed(f)),r.defaultTool&&(this.checkDefaultToolAvailability(r.defaultTool,d)||(this.licenseChecker.isToolAllowed(r.defaultTool)&&console.warn(`Configured default tool ${r.defaultTool} is not a part of configured list of tools: [${d.join(" ")}]`),[r.defaultTool]=d)),r.tools=d,this.state.config=r,this.state.locale=o,this.state.theme=n,this.state.measurements=s;let h=this.buildCustomAssetsConfig();return this.assetProvider=new jd(h,this.licenseChecker.areCustomAssetsAllowed(),r.assetResolver),this.loadThemeFont(),l}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get tools(){return this.config.tools.reduce((t,i)=>typeof i=="string"?[...t,i]:[...t,"",...i],[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf(st.CLOSE)!==-1}loadThemeFont(){let{typography:t}=this.theme;t.skipLoading||this.assetProvider.getFontManager().injectFonts([t])}buildCustomAssetsConfig(){let t=this.tools,i=P(this.state.config),r=this.state.config.assetBaseUrl,{theme:o}=this.state,n=t.indexOf(m.FILTER)!==-1?i[m.FILTER]:void 0,s=t.indexOf(m.FOCUS)!==-1?i[m.FOCUS]:void 0,l=t.indexOf(m.ADJUSTMENT)!==-1?i[m.ADJUSTMENT]:void 0,c=t.indexOf(m.STICKER)!==-1?i[m.STICKER]:void 0,d=t.indexOf(m.FRAME)!==-1?i[m.FRAME]:void 0,h=t.indexOf(m.OVERLAY)!==-1?i[m.OVERLAY]:void 0,f=t.indexOf(m.TRANSFORM)!==-1?i[m.TRANSFORM]:void 0,g=t.indexOf(m.TEXT)!==-1?i[m.TEXT]:void 0,x=t.indexOf(m.TEXT_DESIGN)!==-1?i[m.TEXT_DESIGN]:void 0;return{basePath:r,theme:o,filter:n,focus:s,sticker:c,frame:d,overlay:h,transform:f,text:g,adjustment:l,textdesign:x}}};a([p],Gt.prototype,"saveConfig",1),a([u],Gt.prototype,"config",1),a([u],Gt.prototype,"locale",1),a([u],Gt.prototype,"theme",1),a([u],Gt.prototype,"measurements",1),a([u],Gt.prototype,"tools",1),a([u],Gt.prototype,"defaultTool",1),a([u],Gt.prototype,"isOrderDefault",1),a([u],Gt.prototype,"isLayoutAdvanced",1),a([u],Gt.prototype,"displayCloseButton",1);var wc=class{constructor(t){this.editor=t}setBackgroundImage(t){this.container?this.container.setData({image:t,originalImage:t}):this.container=this.engine.addImage({image:t,originalImage:t,blendMode:Te.NORMAL,opacity:1})}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((t,i)=>{let{image:r}=this.editor.activeStore;if(Td(r))this.setBackgroundImage(r),t();else{let o=this.editor.libraryStore.getRawUrl(r);this.getImageElement(o).then(n=>{this.setBackgroundImage(n),t()}).catch(n=>{i({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((i,r)=>{let o=new Image;o.addEventListener("load",()=>{i(o)}),o.addEventListener("error",n=>{r(n)}),o.crossOrigin=this.editor.configStore.config.engine.crossOrigin,o.src=t})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}};var kc=class{constructor(t){this.applyNewImageTransform=()=>{let{size:t,width:i,height:r}=this.editor.engineMediator.image.container.getBounds(),o=this.container;o.setTransform(Ge.IDENTITY),o.setResolution(t),o.setPivot(.5,.5),o.setPosition({x:i/2,y:r/2})};this.editor=t}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}};var xx=(e,t)=>new Promise((i,r)=>{let o=new XMLHttpRequest;o.onload=()=>{let n=new FileReader;n.onloadend=()=>{typeof n.result=="string"&&n.result.substr(0,10)==="data:image"?i(n.result):r(new Error(`The image could not be loaded from ${e}`))},n.onerror=s=>{r(s)},n.readAsDataURL(o.response)},o.open("GET",e),o.responseType="blob",o.withCredentials=t==="use-credentials",o.send()}),Gh=(e,t)=>new Promise((i,r)=>{let o=new Image;o.onload=()=>{i(o)},o.onerror=()=>{r(new Error(`Failed to load image with src:${e}`))},o.crossOrigin=t,o.src=e}),Sx=(e,t)=>new Promise((i,r)=>{xx(e,t).then(o=>{let n=new Image;n.addEventListener("load",()=>{i(n)}),n.src=o}).catch(()=>{Gh(e,t).then(o=>i(o)).catch(o=>{r(o)})})}),Tc=r=>D(void 0,[r],function*({url:e,image:t,crossOrigin:i="anonymous"}){try{return t&&t.src&&t.src.substr(0,5)==="data:"||t&&t.src&&t.src.includes(".svg")?t:typeof e=="string"&&e.substr(0,5)==="data:"||typeof e=="string"&&e.includes(".svg")?Gh(e,i):Sx(e||t.src,i)}catch(o){throw new Error(o)}});var Cx={tool:null,isWebcam:!1,image:"",imageLoadedToEngine:!1},Xt=class{constructor(t){this.setImage=t=>D(this,null,function*(){let{crossOrigin:i}=this.editor.configStore.config.engine;typeof t=="string"&&(this.state.image=yield Tc({url:Po(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:i})),t instanceof HTMLImageElement&&(this.state.image=yield Tc({image:t,crossOrigin:i})),this.isWebcam&&(this.state.isWebcam=!1)});this.setImageLoadedToEngine=t=>{this.state.imageLoadedToEngine=t};this.newImage=t=>{this.editor.init(t)};this.editor=t,this.state=w(Cx)}selectTool(t){let{licenseChecker:i}=this.editor.configStore;if(this.state.tool!==t&&(i==null?void 0:i.isToolAllowed(t)))switch(this.editor.onToolChange(this.state.tool,t),this.state.tool=t,this.editor.configStore.events.onToolChanged(t),t){case m.TEXT:this.editor.configStore.config.text.addDefaultTextOnEnter&&this.editor.spriteStore.textToolStore.addOrselect();break;case m.TEXT_DESIGN:this.editor.configStore.config.textdesign.addDefaultTextOnEnter&&this.editor.spriteStore.textDesignToolStore.addOrselect();break;case m.BRUSH:{this.editor.brushToolStore.initSize();break}case m.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop();break;default:break}}selectWebcam(t){this.state.isWebcam=t}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};a([p],Xt.prototype,"selectTool",1),a([p],Xt.prototype,"selectWebcam",1),a([p],Xt.prototype,"setImage",2),a([p],Xt.prototype,"setImageLoadedToEngine",2),a([p],Xt.prototype,"newImage",2),a([u],Xt.prototype,"webcamLabel",1),a([u],Xt.prototype,"tool",1),a([u],Xt.prototype,"isWebcam",1),a([u],Xt.prototype,"image",1),a([u],Xt.prototype,"imageLoadedToEngine",1);var wx={height:150,width:150},Ec={height:0,width:0},Ic=class{constructor(t){this.canvasClickDisabled=w.box(!1);this.resizeCanvas=(t=null)=>{let i=this.editor.activeStore.tool,r=t===m.TRANSFORM||!t&&i===m.TRANSFORM,{isLayoutAdvanced:o,measurements:n}=this.editor.configStore,{storedSize:s}=this.editor.canvasStore,l=0;!o&&r&&(l=n.basicToolControlBar.controlsBarHeight*-1,t===m.TRANSFORM&&i===m.BRUSH&&(l-=n.basicToolControlBar.itemsBarHeight+4)),this.setCanvasSize({width:s.width,height:s.height+l})};this.setCanvasSize=t=>{this.state.canvasSize=t};this.editor=t,this.state=w(Ic.initialState)}setCanvasElement(t){this.canvas=t,this.editor.engineMediator.preview.createPreview(t),this.editor.init(this.editor.configStore.config.image)}saveDimensions({height:t,width:i,render:r}){let{imageLoadedToEngine:o}=this.editor.activeStore;t>Ec.height&&i>Ec.width&&(this.state.storedSize={width:i,height:t},this.state.canvasSize.height===0&&(this.state.canvasSize={width:i,height:t}),r&&o&&this.editor.resize())}disableCanvasClick(){this.canvasClickDisabled.set(!0)}enableCanvasClick(){this.canvasClickDisabled.set(!1)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return v.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(t){let i=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(r=>r.getID()).filter(r=>r!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(i)}},Rt=Ic;Rt.initialState={canvasSize:Ec,storedSize:wx},a([p],Rt.prototype,"setCanvasElement",1),a([p],Rt.prototype,"saveDimensions",1),a([p],Rt.prototype,"resizeCanvas",2),a([p],Rt.prototype,"disableCanvasClick",1),a([p],Rt.prototype,"enableCanvasClick",1),a([p],Rt.prototype,"setCanvasSize",2),a([u],Rt.prototype,"isCanvasClickable",1),a([u],Rt.prototype,"canvasSize",1),a([u],Rt.prototype,"storedSize",1),a([u],Rt.prototype,"sizeVector",1),a([u],Rt.prototype,"sizeVectorMagnitude",1);var kx={type:null,identifier:null,isVisible:!1,error:""},ie=class{constructor(t){this.showActionModal=({type:t,identifier:i,error:r,handleConfirm:o,handleDismiss:n})=>{this.resetHandlers(),this.state.isVisible=!0,this.state.identifier=i,this.state.type=t,this.state.error=r||"",this.handleConfirm=o,this.handleDismiss=n};this.hideModal=()=>{this.state.isVisible=!1,this.state.type=null,this.state.error="",this.state.identifier=null,this.resetHandlers()};this.resetHandlers=()=>{this.handleConfirm=null,this.handleDismiss=null};this.configStore=t.configStore,this.state=w(kx)}showInfoModal(t){this.resetHandlers(),this.state.isVisible=!0,this.state.type=rt.INFO,this.state.identifier=t,this.state.error=""}showTextEditModal(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=rt.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""}get modalProps(){let{isVisible:t}=this.state,i=this.getModalLocale();if(i){let{bodyLabel:r,headerLabel:o,buttonYes:n,buttonNo:s}=i;return{headerLabel:o,bodyLabel:r,confirmLabel:n,dismissLabel:s,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){let{isLayoutAdvanced:t,measurements:{basicCanvasOffset:i,advancedUIToolControlBar:r,advancedUIToolbar:o},isOrderDefault:n}=this.configStore,s=(r.width+o.width)*(n?1:-1);return t?{x:s/2,y:0}:{x:0,y:-i}}getModalLocale(){let{identifier:t,error:i,type:r}=this.state,{locale:o}=this.configStore;if(!r||!t||r===rt.TEXT_EDIT)return null;if(r&&t&&o[`${r}Modals`]&&o[`${r}Modals`][t]){let n=o[`${r}Modals`][t],{body:s}=n;s&&typeof i=="object"?Object.keys(i).forEach(c=>{s=s.replace(`\${${c}}`,i[c])}):s&&(s=s.replace("${error}",i));let l=n.heading;if(r===rt.ERROR||r===rt.WARNING){let c={error:o.common.error,warning:o.common.warning};l=`${r==="error"?c.error:c.warning}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:s,headerLabel:l,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};a([p],ie.prototype,"showActionModal",2),a([p],ie.prototype,"showInfoModal",1),a([p],ie.prototype,"showTextEditModal",1),a([p],ie.prototype,"hideModal",2),a([u],ie.prototype,"modalProps",1),a([u],ie.prototype,"isVisible",1),a([u],ie.prototype,"type",1),a([u],ie.prototype,"identifier",1),a([u],ie.prototype,"positionOffset",1);var St=class{constructor(t){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(t=>t/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{this.canZoomIn&&(this.state.scaleIndex+=1,this.scaleRender())};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;let{maxOffsetX:t,maxOffsetY:i}=this.checkOffset({x:0,y:0});this.state.scaleIndex===this.defaultIndex&&(this.offset.y=i),this.state.scaleIndex===this.defaultIndex&&(this.offset.x=t),this.savePosition(),this.scaleRender()}};this.setOffset=t=>{let{canDragX:i,canDragY:r}=this.checkOffset(t);i&&(this.offset.x=t.x),r&&(this.offset.y=t.y),this.scaleRender()};this.editor=t}setInitialTransform(t=0){let i=ut.devicePixelRatio,{scaleImageToFit:r}=this.editor.configStore.config,{transform:o}=this.editor.engineMediator.preview;xt(()=>{let n=Math.abs(t||o.scale.x);this.setDefaultScale(r?n:Math.min(1*i,n)),this.setPosition(o.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){let{width:t,height:i}=this.editor.canvasStore.canvas;this.setPosition({x:t/2,y:i/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(t){this.state.position.x=t.x,this.state.position.y=t.y}savePosition(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}setDefaultScale(t){if(this.defaultScale!==1){let r=this.SCALE_LEVELS.findIndex(o=>o===this.defaultScale);r!==-1&&(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,r),...this.SCALE_LEVELS.slice(r+1)])}let i=this.SCALE_LEVELS.findIndex(r=>r===t);if(i!==-1)this.state.scaleIndex=i;else{let r=this.SCALE_LEVELS.findIndex((o,n)=>(n===0||this.SCALE_LEVELS[n-1]<t)&&t<o);r!==-1?(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,r),t,...this.SCALE_LEVELS.slice(r)],this.state.scaleIndex=r):(this.SCALE_LEVELS=[...this.SCALE_LEVELS,t],this.state.scaleIndex=this.SCALE_LEVELS.length-1)}this.defaultScale=t}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(t){let i=Math.max(window.devicePixelRatio||1,1),{scaledSize:r}=this,{previewSize:o}=this,n=this.editor.engineMediator.preview.initialTransform.position,s=this.getPositionWithOffset(t),l=(r.width-o.width)*i/2,c=(r.height-o.height)*i/2,d=n.x-s.x,h=n.y-s.y,f=Math.abs(d),g=Math.abs(h),x=d>0,S=h>0,C=f-l,O=g-c;return{canDragX:C<0,canDragY:O<0,maxOffsetX:x?-C:C,maxOffsetY:S?-O:O}}calculateScale(t=0,i=this.previewSize,r=this.defaultScale){let{width:o,height:n}=i,s=new v({x:o,y:n}),l=new v(Math.abs(s.x*Math.cos(t))+Math.abs(s.y*Math.sin(t)),Math.abs(s.x*Math.sin(t))+Math.abs(s.y*Math.cos(t))),c=s.subtract(l).divide(2).multiply(r).abs;return c.y>c.x?c.y*2/s.y+r:c.x*2/s.x+r}get defaultIndex(){return this.SCALE_LEVELS.findIndex(t=>t===this.defaultScale)}getPositionWithOffset(t=this.offset){let{position:i}=this;return{x:i.x-t.x,y:i.y-t.y}}scaleRender(t=!1){let i=this.editor.scale.getPositionWithOffset(),r=t?this.defaultScale:this.scale,o={x:r,y:r};this.editor.engineMediator.preview.container.setScale(o),this.editor.engineMediator.preview.container.setPosition(i),this.editor.engineMediator.preview.savePreviewTransform({scale:o,position:i,rotation:0}),t||this.editor.render()}get scale(){let t=this.state.scaleIndex;return t!==-1?this.SCALE_LEVELS[t]:this.defaultScale}get zoomLevel(){let t=Math.max(window.devicePixelRatio||1,1);return(this.scale/t*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){let{restrictZoomOutToDefault:t}=this.editor.configStore.config;return t?this.state.scaleIndex>this.defaultIndex:this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){let t=this.state.scaleIndex,i=t!==-1?this.SCALE_LEVELS[t]:this.defaultScale,{previewSize:r}=this;return{width:r.width*i/this.defaultScale,height:r.height*i/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};a([w],St.prototype,"state",2),a([p],St.prototype,"in",2),a([p],St.prototype,"out",2),a([p],St.prototype,"setInitialTransform",1),a([p],St.prototype,"resetScale",1),a([p],St.prototype,"resetPosition",1),a([p],St.prototype,"setPosition",1),a([p],St.prototype,"savePosition",1),a([p],St.prototype,"setDefaultScale",1),a([p],St.prototype,"setScaleToDefault",1),a([u],St.prototype,"scale",1),a([u],St.prototype,"zoomLevel",1),a([u],St.prototype,"canDrag",1),a([u],St.prototype,"canZoomOut",1),a([u],St.prototype,"canZoomIn",1),a([u],St.prototype,"position",1),a([u],St.prototype,"scaledSize",1);var Xh=/^data:image\/(.+?);base64,/,Tx=e=>Xh.test(e),Ex=e=>e.match(/^data:([^;]+)/)[1],Ix=e=>e.replace(Xh,""),pn=class{constructor(t){this.applySerialization=(t,i,r,o)=>D(this,null,function*(){this.editor.resetToolStates();let n=this.editor.activeStore.tool===m.TRANSFORM;n||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),n||this.editor.transformToolStore.onLeave();let s=new i(this.editor),l="Unexpected error occured",c=i.deserializeImage(t);if(c.image&&c.image.data){let f=c.image.data;yield this.editor.setImage(f),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(f),yield this.editor.engineMediator.image.addImageToContainer(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms()}let d=s.deserializeTransformation(t);if(!d){o(l);return}yield this.applyStateOnUI(d);let h=s.deserialize(t);if(!h){o(l);return}yield this.applyStateOnUI(h),this.editor.historyStore.addInitialSnapshot(),yield this.editor.render(),this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),r()});this.editor=t}serialize({image:t}={image:!1}){let i=this.editor.activeStore.tool===m.TRANSFORM,{displaySerializationModal:r}=this.editor.configStore.config;return r&&this.editor.modalStore.showInfoModal("saving"),new Promise((o,n)=>{import("./serialization-Y63JU3AE.js").then(l=>D(this,[l],function*({Serializer:s}){try{i&&this.editor.transformToolStore.onLeave(),yield this.editor.wait(),this.editor.transformToolStore.applyDefaultCrop(!1);let{originalImage:c}=this.editor.imageContainer.getData(),d=this.editor.engineMediator.output.container.getResolution(),h={width:c.width,height:c.height},f=new s(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,d,h,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),g={[m.ADJUSTMENT]:P(this.editor.adjustmentsToolStore.state),[m.FILTER]:P(this.editor.filterToolStore.state),[m.FOCUS]:P(this.editor.focusToolStore.serializableState),[m.OVERLAY]:P(this.editor.overlayToolStore.state),[m.FRAME]:P(this.editor.frameToolStore.state),[m.BRUSH]:this.editor.brushToolStore.strokes||{strokes:[]}},{sprite:x,customStickers:S}=yield this.editor.spriteStore.serializableState();x.spriteIdList=x.spriteIdList.sort((E,R)=>{let $=x.common[E].order,V=x.common[R].order;return $-V}),g.sprite=x,g.customStickers=S,g.transform=this.editor.transformToolStore.serializableState;let C,O;if(t){let E=pn.getDataURL(c);O=Ex(E),C=Ix(E)}r&&this.editor.modalStore.hideModal(),o(f.serialise(g,C,O)),i&&this.editor.transformToolStore.onEnter()}catch(c){r&&this.editor.modalStore.hideModal(),n(c)}}))})}deserialize(t){return this.editor.modalStore.showInfoModal("loading"),new Promise((i,r)=>{try{import("./serialization-Y63JU3AE.js").then(({Deserializer:o})=>{o.checkIsSerialisationValid(t)?this.applySerialization(t,o,i,r):(this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({type:rt.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(t,o,i,r)}))})}catch(o){this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),r(o)}})}static getDataURL(t){if(t instanceof HTMLImageElement){let{src:o}=t;if(Tx(o))return o}if(t instanceof HTMLCanvasElement)return t.toDataURL(ke.PNG);let i=document.createElement("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0),i.toDataURL(ke.PNG)}applyStateOnUI(t){return D(this,null,function*(){let i=this.editor.activeStore.tool===m.TRANSFORM;try{t.transform&&(i||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t.transform),yield this.editor.wait(),i||(this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),yield this.editor.wait(),this.editor.transformToolStore.onLeave())),t.filter&&(yield this.editor.filterToolStore.updateStateFromSerialization(t.filter)),t.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment),t.focus&&(yield this.editor.focusToolStore.updateStateFromSerialization(t.focus)),t.overlay&&(yield this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)),t.sprite&&(t.sprite.spriteIdList=t.sprite.spriteIdList.sort((r,o)=>{let n=t.sprite.common[r].order,s=t.sprite.common[o].order;return n-s}),yield this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers)),t.brush&&this.editor.brushToolStore.updateStateFromHistory(t.brush),t.frame&&(yield this.editor.frameToolStore.updateStateFromSerialization(t.frame)),this.editor.outputContainer.updateChildrenContainers()}catch(r){console.error(r),this.editor.modalStore.showActionModal({type:rt.ERROR,identifier:"unexpectedError",error:r,handleConfirm:()=>{window.location.reload()}})}})}};var Fe={identifier:"identity",opacity:1,width:0,color:Nt.white};var Mx=new ni(0,1),si=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{let i=Mx.clamp(t);this.state.opacity=i};this.changeWidth=t=>{this.state.width=t};this.changeColor=t=>{this.state.color=t};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Fe.identifier,this.state.opacity=Fe.opacity,this.state.width=Fe.width,this.state.color=Fe.color,this.removeIndex())};this.removeFrameEffect=()=>{this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)};this.setEffectProperties=t=>this.effect?(this.removeIndex(),this.effect.setProperties(t),this.effect.getProperties()):null;this.setFrameEffect=({identifier:t,width:i,opacity:r,color:o})=>{let n=b({},this.state);this.changeIdentifier(t),this.changeWidth(i),this.changeOpacity(r),this.changeColor(o),this.removeFrameEffect();let s=this.engineMediator.orderHelper.addSprite(t);return new Promise((l,c)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container,s).then(d=>{this.effect=d,this.effect.setProperties({tintColor:o,opacity:r,width:i}),l()}).catch(d=>{this.changeIdentifier(n.identifier),this.changeOpacity(n.opacity),this.changeWidth(n.width),this.changeColor(n.color),n.identifier==="identity"&&this.removeIndex(),c(d)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=t,this.state=Fe}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};a([w],si.prototype,"state",2),a([p],si.prototype,"changeIdentifier",2),a([p],si.prototype,"changeOpacity",2),a([p],si.prototype,"changeWidth",2),a([p],si.prototype,"changeColor",2),a([p],si.prototype,"reset",2);var pt=class{constructor(t){this.colorList=ut.defaultColors;this.selectFrame=t=>D(this,null,function*(){if(t!==this.identifier){let i=.1*this.editor.shortestOutputSide;yield this.frameStore.setFrameEffect({identifier:t,width:i,opacity:1,color:Fe.color}),this.editor.render(),this.addSnapshot(_.ADD,m.FRAME)}});this.changeOpacity=t=>{let i=this.frameStore.setEffectProperties({opacity:t});i&&(this.frameStore.changeOpacity(i.opacity),this.editor.render())};this.changeWidth=t=>{let i=this.frameStore.setEffectProperties({width:t});i&&(this.frameStore.changeWidth(i.width),this.editor.render())};this.changeColor=t=>{let i=this.frameStore.setEffectProperties({tintColor:t});i&&(this.frameStore.changeColor(i.tintColor),this.editor.render())};this.colorSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.controls.selectColor)};this.toolSnapshot=t=>{this.addSnapshot(_.EDIT,t)};this.addSnapshot=(t,i)=>{this.editor.addSnapshot(void 0,t,i)};this.pureReset=()=>{this.frameStore.removeFrameEffect(),this.frameStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(_.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=t=>t.identifier==="identity"?(this.pureReset(),new Promise(i=>{i()})):this.frameStore.setFrameEffect(t);this.updateStateFromSerialization=t=>D(this,null,function*(){return this.entityManager.items.find(r=>r.identifier===t.identifier)?this.frameStore.setFrameEffect(t).then(()=>{this.editor.transformToolStore.setFrameOpacity(t.opacity)}):new Promise((r,o)=>{o(new Error("Frame Asset doesn't exist"))})});this.editor=t,this.frameStore=new si(this.editor.engineMediator);let i=this.editor.assetProvider.getAssets("frame"),{config:r}=this;this.entityManager=new mt(i,k(b({},r),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),Fe.color=P(le(this.config,"defaultColor",Fe.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=be(P(this.config.colors)))}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){let t=this.entityManager.items.find(i=>i.identifier===this.identifier);return t&&t.tintable||!1}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config[m.FRAME]}get locale(){return this.editor.configStore.locale[m.FRAME]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};a([p],pt.prototype,"selectFrame",2),a([p],pt.prototype,"changeOpacity",2),a([p],pt.prototype,"changeWidth",2),a([p],pt.prototype,"changeColor",2),a([p],pt.prototype,"pureReset",2),a([p],pt.prototype,"reset",2),a([p],pt.prototype,"updateStateFromHistory",2),a([p],pt.prototype,"updateStateFromSerialization",2),a([u],pt.prototype,"state",1),a([u],pt.prototype,"identifier",1),a([u],pt.prototype,"color",1),a([u],pt.prototype,"size",1),a([u],pt.prototype,"tintable",1),a([u],pt.prototype,"opacity",1),a([u],pt.prototype,"minSize",1),a([u],pt.prototype,"maxSize",1),a([u],pt.prototype,"config",1),a([u],pt.prototype,"locale",1),a([u],pt.prototype,"localeColor",1),a([u],pt.prototype,"items",1),a([u],pt.prototype,"isOptionSelected",1);var Dx={categories:[],query:""},Kt=class{constructor(t){this.initProvider=t=>{t&&(this.libraryProvider=new t)};this.fetchImages=(t="")=>D(this,null,function*(){if(this.libraryProvider){let i=null;try{let r=yield this.libraryProvider.getCategories(),o=yield this.libraryProvider.searchImages(t);i=r.map((n,s)=>{let l=o.filter(c=>c.category===n.name);return{identifier:n.name,name:n.name,thumbnailURI:n.coverImageUrl,items:l.map(c=>({name:c.title||`image${s}`,identifier:`${n.name}-${c.title}-${s}`,thumbnailURI:c.thumbUrl,rawUrl:c.rawUrl,authorName:c.authorName,authorAvatar:c.authorAvatar}))}}).filter(n=>n.items.length)}catch(r){console.log(r)}xt(()=>{this.state.query=t,this.state.categories=i})}});this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""};this.getRawUrl=t=>{let i=this.items.findIndex(r=>r.identifier===t);return i!==-1?this.items[i].rawUrl:t};this.configStore=t.configStore,this.state=w(Dx),this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(t=>t.items).reduce((t,i)=>[...t,...i],[])}get query(){return this.state.query}get config(){return this.configStore.config[m.LIBRARY]}get locale(){return this.configStore.locale[m.LIBRARY]}};a([w],Kt.prototype,"selectedCategory",2),a([p],Kt.prototype,"initProvider",2),a([p],Kt.prototype,"fetchImages",2),a([p],Kt.prototype,"toggleCategorySelection",2),a([u],Kt.prototype,"selectedCategoryIdentifier",1),a([u],Kt.prototype,"categories",1),a([u],Kt.prototype,"items",1),a([u],Kt.prototype,"query",1),a([u],Kt.prototype,"config",1),a([u],Kt.prototype,"locale",1);var hn={identifier:"identity",opacity:1,blendMode:Te.LIGHTEN};var Ox=new ni(0,1),ai=class{constructor(t,i){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{let i=Ox.clamp(t);this.state.opacity=i};this.changeBlendMode=t=>{this.state.blendMode=t};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=hn.identifier,this.state.opacity=hn.opacity,this.state.blendMode=hn.blendMode,this.removeIndex())};this.correctOverlayFlip=()=>{let{flipHorizontally:t,flipVertically:i}=this.editor.outputContainer.getData();this.effect&&(this.effect.setFlipHorizontally(t),this.effect.setFlipVertically(i))};this.removeOverlayEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.removeIndex(),this.effect=void 0)};this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null;this.setOverlayEffect=({identifier:t,blendMode:i,opacity:r})=>{let o=b({},this.state);this.removeOverlayEffect();let n=this.engineMediator.orderHelper.addIndex(m.OVERLAY);return new Promise((s,l)=>{this.engineMediator.engine.addOverlayFromAssets(t,this.engineMediator.image.container,n).then(c=>{this.changeIdentifier(t),this.changeOpacity(r),this.changeBlendMode(i),this.effect=c,this.effect.setProperties({blendMode:i,opacity:r}),this.correctOverlayFlip(),s()}).catch(c=>{this.changeIdentifier(o.identifier),this.changeOpacity(o.opacity),this.changeBlendMode(o.blendMode),o.identifier==="identity"&&this.removeIndex(),l(c)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(m.OVERLAY)};this.engineMediator=t,this.editor=i,this.state=hn}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};a([w],ai.prototype,"state",2),a([p],ai.prototype,"changeIdentifier",2),a([p],ai.prototype,"changeOpacity",2),a([p],ai.prototype,"changeBlendMode",2),a([p],ai.prototype,"reset",2),a([p],ai.prototype,"correctOverlayFlip",2);var Ct=class{constructor(t){this.selectOverlay=t=>D(this,null,function*(){if(t!==this.identifier){let i=this.defaultBlendModeForIdentifier(t);yield this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:i}),this.addSnapshot(_.ADD,m.OVERLAY),this.editor.render()}});this.changeOpacity=t=>{let i=this.overlayStore.setEffectProperties({opacity:t});i&&(this.overlayStore.changeOpacity(i.opacity),this.editor.render())};this.toolSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.controls.sliderOpacity)};this.addSnapshot=(t,i)=>{this.editor.addSnapshot(void 0,t,i)};this.changeBlendMode=t=>{let i=this.overlayStore.setEffectProperties({blendMode:t});i&&(this.overlayStore.changeBlendMode(i.blendMode),this.addSnapshot(_.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())};this.pureReset=()=>{this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(_.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromSerialization=t=>D(this,null,function*(){return this.entityManager.items.find(r=>r.identifier===t.identifier)?this.overlayStore.setOverlayEffect(t).then(()=>{this.editor.transformToolStore.setOverlayOpacity(t.opacity)}):new Promise((r,o)=>{o(new Error(`Overlay Asset ${t.identifier} doesn't exist`))})});this.updateStateFromHistory=t=>D(this,null,function*(){return t.identifier==="identity"?(this.pureReset(),new Promise(i=>{i()})):this.overlayStore.setOverlayEffect(t)});this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=t=>{let i=this.entityManager.items.findIndex(r=>r.identifier===t);return i!==-1?this.entityManager.items[i].defaultBlendMode:Te.LIGHTEN};this.editor=t,this.overlayStore=new ai(this.editor.engineMediator,t);let i=this.editor.assetProvider.getAssets("overlay"),{config:r}=this;this.entityManager=new mt(i,k(b({},r),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[m.OVERLAY]}get locale(){return this.editor.configStore.locale[m.OVERLAY]}get items(){return this.entityManager.items}get allBlendModes(){let t=this.locale.controls;return Object.keys(Te).map(i=>{let r=Te[i],o=`blendMode${r.charAt(0).toUpperCase()}${r.slice(1)}`;return{identifier:r,value:t[o]}})}};a([p],Ct.prototype,"selectOverlay",2),a([p],Ct.prototype,"changeOpacity",2),a([p],Ct.prototype,"changeBlendMode",2),a([p],Ct.prototype,"pureReset",2),a([p],Ct.prototype,"reset",2),a([p],Ct.prototype,"updateStateFromSerialization",2),a([p],Ct.prototype,"updateStateFromHistory",2),a([p],Ct.prototype,"correctOverlayFlip",2),a([u],Ct.prototype,"state",1),a([u],Ct.prototype,"identifier",1),a([u],Ct.prototype,"opacity",1),a([u],Ct.prototype,"blendMode",1),a([u],Ct.prototype,"isOptionSelected",1),a([u],Ct.prototype,"config",1),a([u],Ct.prototype,"locale",1),a([u],Ct.prototype,"items",1),a([u],Ct.prototype,"allBlendModes",1);var Ax=e=>{let t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r);for(let n=0;n<t.length;n+=1)o[n]=t.charCodeAt(n);return new Blob([r],{type:i})},Mc=Ax;var ta=jr(Ud());var fn=class{static isImageElement(t){return t instanceof HTMLImageElement}constructor({license:t,assetProvider:i,crossOrigin:r}){this.crossOrigin=r,this.engine=new _n({license:t,crossOrigin:r,assetProvider:i,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(t){return new Promise((i,r)=>{let o=[],n=[];t.forEach(s=>{s.isDuotone?o.push(s.identifier):n.push(s.identifier)}),this.getAllDuotonePreview(o).then(s=>{this.getAllLutPreview(n).then(l=>{i(Object.assign(s,l))})}).catch(s=>{r(s)})})}getAllDuotonePreview(t){return D(this,null,function*(){let i={};if(!t.length)return i;let r=yield this.engine.addDuoToneFilterFromAssets(t[0],this.container);return yield(0,ta.default)(t,o=>D(this,null,function*(){let n=this.engine.assetProvider.getDuotoneFilterAsset(o);r.filterOperation.getFilter().set({intensity:.5,lightColor:Ba.Color.fromHex(n.lightColor),darkColor:Ba.Color.fromHex(n.darkColor)});let l=yield this.engine.export(nr.DATA_URL,ke.PNG);i[o]=l}),{concurrency:1}),this.engine.removeEffect(r),i})}loadLutAssets(t){return D(this,null,function*(){let i={};return yield(0,ta.default)(t,r=>D(this,null,function*(){i[r]=yield this.engine.getLutFilterImage(r)})),i})}getAllLutPreview(t){return D(this,null,function*(){let i={};if(!t.length)return i;let r=yield this.loadLutAssets(t),o=yield this.engine.addLUTFilterFromAssets(t[0],this.container);return yield(0,ta.default)(t,n=>D(this,null,function*(){let s=this.engine.assetProvider.getLUTFilterAsset(n),l=o.filterOperation.getFilter(),c={horizontalTileCount:s.horizontalTileCount||5,verticalTileCount:s.verticalTileCount||5,image:r[n]};l.set(k(b({},c),{intensity:s.defaultIntensity||1})),o.setProperties({intensity:1}),l._lutPrimitive.set(c);let d=yield this.engine.export(nr.DATA_URL,ke.PNG);i[n]=d}),{concurrency:1}),this.engine.removeEffect(o),i})}addImageToContainer(t){return new Promise((i,r)=>{let o;fn.isImageElement(t)?(o=t,this.setBackgroundImage(o),i()):this.getImageElement(t).then(n=>{o=n,this.setBackgroundImage(o),i()}).catch(n=>{r({identifier:"imageLoading",message:n.message})})})}getImageElement(t){return new Promise((i,r)=>{let o=new Image;o.addEventListener("load",()=>{i(o)}),o.addEventListener("error",n=>{r(n)}),o.crossOrigin=this.crossOrigin,o.src=t})}setBackgroundImage(t){this.container?this.container.setData({image:t}):this.container=this.engine.addImage({image:t,blendMode:Te.NORMAL,opacity:1});let{size:i}=this.container.getBounds();this.engine.getOutputContainer().setResolution(i)}};var mn={size:0,color:Nt.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0};var ct=class{constructor(t){this.strokes={strokes:[]};this.colorList=ut.defaultColors;this.dirty=w.box(!1);this.id="";this.containerId=()=>this.id;this.initSize=()=>{let{minimumSize:t,maximumSize:i}=this.state,{size:r}=this;r===0&&this.changeSize(Da(this.config,"defaultSize",[t,i]))};this.changeColor=t=>{this.state.color=t};this.changeSize=t=>{this.state.size=t};this.changeRelativeSize=t=>{let{maximumSize:i,minimumSize:r}=this.state;this.state.size=(i-r)*t/100+r};this.changeHardness=t=>{this.state.hardness=t};this.reset=()=>{this.pureReset(),this.addSnapshot(_.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.editor=t,this.state=k(b({},mn),{hardness:Da(this.config,"defaultHardness",[mn.minimumHardness,mn.maximumHardness]),color:P(le(this.config,"defaultColor",mn.color))}),this.config.colors&&this.config.colors.length>0&&(this.colorList=be(P(this.config.colors)))}addSnapshot(t,i){this.editor.addSnapshot(void 0,t,i)}clickableCanvas(t){this.editor.clickableCanvas(t)}beginStroke(t=[]){if(!this.drawingContainer){let i=this.editor.orderHelper.addSprite(m.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,i)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:P(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(t){if(this.drawingContainer){let i=this.editor.previewToWorld(t,!1);this.drawingContainer.addPointToCurrentStroke(i),this.editor.render()}}endStroke(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(_.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))}updateStateFromHistory(t){if(!(0,It.default)(t,this.strokes)){if((0,It.default)(t,{strokes:[]})||!t){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length){this.dirty.set(!1);return}this.strokes=t,this.drawingContainer.setData(this.strokes)}else{let i=this.editor.orderHelper.addSprite(m.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,i),this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0),this.id=this.drawingContainer.getID()}}pureReset(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}get config(){return this.editor.configStore.config[m.BRUSH]}get locale(){return this.editor.configStore.locale[m.BRUSH]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){let{size:t,maximumSize:i,minimumSize:r}=this.state;return(t-r)*100/(i-r)}get sizeOnScreenSpace(){let t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};a([w],ct.prototype,"state",2),a([w],ct.prototype,"dirty",2),a([p],ct.prototype,"initSize",2),a([p],ct.prototype,"changeColor",2),a([p],ct.prototype,"changeSize",2),a([p],ct.prototype,"changeRelativeSize",2),a([p],ct.prototype,"changeHardness",2),a([p],ct.prototype,"clickableCanvas",1),a([p],ct.prototype,"beginStroke",1),a([p],ct.prototype,"strokePosition",1),a([p],ct.prototype,"endStroke",1),a([p],ct.prototype,"updateStateFromHistory",1),a([p],ct.prototype,"reset",2),a([u],ct.prototype,"config",1),a([u],ct.prototype,"locale",1),a([u],ct.prototype,"localeColor",1),a([u],ct.prototype,"color",1),a([u],ct.prototype,"size",1),a([u],ct.prototype,"relativeSize",1),a([u],ct.prototype,"sizeOnScreenSpace",1),a([u],ct.prototype,"hardness",1),a([u],ct.prototype,"isDirty",1);var ve;(function(r){r.LEADING="leading",r.CENTER="center",r.TRAILING="trailing"})(ve||(ve={}));var Px={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},Re=class{constructor(t){this.previewTopLeftPosition={x:0,y:0};this.getGuideValue=(t,i)=>{let{height:r,width:o}=this.editor.getPreviewSize(),{snapToLeft:n,snapToRight:s,snapToTop:l,snapToBottom:c}=this.configStore.config.snapping.position,d=Math.min(r,o),h=0;return i==="bottom"?h=Math.round(r-d*c):i==="top"?h=Math.round(d*l):i==="right"?h=Math.round(o-d*s):i==="left"?h=Math.round(d*n):t==="vertical"&&i==="center"?h=Math.round(o/2):t==="horizontal"&&i==="center"&&(h=Math.round(r/2)),h};this.getVerticalGuidesFromConfig=()=>{let{snapToVerticalCenter:t,snapToLeft:i,snapToRight:r}=this.configStore.config.snapping.position,o=[];return t&&o.push({value:this.getGuideValue("vertical","center"),edge:ve.CENTER,isVisible:!1,direction:"vertical"}),i&&o.push({value:this.getGuideValue("vertical","left"),edge:ve.LEADING,isVisible:!1,direction:"vertical"}),r&&o.push({value:this.getGuideValue("vertical","right"),edge:ve.TRAILING,isVisible:!1,direction:"vertical"}),o};this.getHorizontalGuidesFromConfig=()=>{let{snapToHorizontalCenter:t,snapToTop:i,snapToBottom:r}=this.configStore.config.snapping.position,o=[];return t&&o.push({value:this.getGuideValue("horizontal","center"),edge:ve.CENTER,isVisible:!1,direction:"horizontal"}),i&&o.push({value:this.getGuideValue("horizontal","top"),edge:ve.LEADING,isVisible:!1,direction:"horizontal"}),r&&o.push({value:this.getGuideValue("horizontal","bottom"),edge:ve.TRAILING,isVisible:!1,direction:"horizontal"}),o};this.getRotationGuidesFromConfig=()=>{let{angles:t}=this.configStore.config.snapping.rotation,i=[];return t.forEach(o=>{i.push(o),i.push(o+360),i.push(o-360)}),i.filter((o,n)=>i.indexOf(o)===n).map(o=>({value:o*Math.PI/180,edge:ve.CENTER,isVisible:!1,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:t,leftBottom:i,rightTop:r,rightBottom:o})=>{let n=Math.min(t.y,r.y,i.y,o.y),s=Math.max(t.y,r.y,i.y,o.y),l=Math.min(t.x,r.x,i.x,o.x),c=Math.max(t.x,r.x,i.x,o.x);return{height:Math.round(s-n),width:Math.round(c-l)}};this.mapRange=({value:t,fromMin:i,fromLength:r,toMin:o,toLength:n})=>(t-i)*n/r+o;this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(t,i,r,o)=>{if(i.length===0)return t;if(i[0]>t)return t-r;for(let n=0;n<i.length-1;n+=1){let s=i[n],l=i[n+1],c=s+r,d=l-r,h=0;o&&(h=n*r*2,c+=h,d+=h+r*2);let f=1e-5;if(s<=t&&t<=l)return t<=s+f?s+h:t>=l-f?l+h+(o?r*2:0):this.mapRange({value:t,fromMin:s,fromLength:l-s,toMin:c,toLength:d-c})}return o?t+(i.length-1)*r*2+r:t};this.mapFromSnapSystem=(t,i,r,o)=>{if(i.length===0)return t;if(i[0]>t)return t>=i[0]-r?i[0]:t+r;let n=t;for(let l=0;l<i.length-1;l+=1){let c=i[l],d=i[l+1],h=c+r,f=d-r,g=d;if(o&&(f+=r*2,g+=r*2,n=t-l*r*2),c<=n&&n<=g)return h<=n&&n<=f?this.mapRange({value:n,fromMin:h,fromLength:f-h,toMin:c,toLength:d-c}):n<h?c:d}n-=r*3;let s=i[i.length-1];return n<=s?s:n};this.centerSnapValue=(t,i)=>{let r=i*.5,{value:o,edge:n}=t,s=o;return n===ve.LEADING?s+=r:n===ve.TRAILING&&(s-=r),s};this.mapSnappingGuidesToCenter=(t,i)=>{let r=[];return t.forEach(o=>{r.push(this.centerSnapValue(o,i))}),r};this.calcSnapThresholdInRadians=(t,i)=>t===0?0:i/t;this.calculatePreviewTopLeftPosition=()=>{let t=this.editor.engineMediator.preview.container.getPosition(),i=this.editor.getPreviewSize(),r=ut.devicePixelRatio;this.previewTopLeftPosition={x:t.x/r-i.width/2,y:t.y/r-i.height/2}};this.snapToRotation=(t,i,r)=>{let{rotationGuides:o}=this.state,{enabled:n,threshold:s}=this.configStore.config.snapping.rotation,{x:l,y:c}=this.previewTopLeftPosition,{width:d}=this.editor.getPreviewSize(),h=(t+Math.PI*2)%(Math.PI*2);if(n){let f=new v(i).magnitude,g=o.map(C=>C.value).sort((C,O)=>C-O),x=this.calcSnapThresholdInRadians(f,s);if(!this.rotationOffset){let C=this.mapToSnapSystem(t,g,x,!1);this.rotationOffset=C-h}h=this.mapFromSnapSystem(h+this.rotationOffset,g,x,!1);let S={x:r.position.x-l-d,y:r.position.y-c};return o.forEach(C=>{C.isVisible=C.value===h,C.position=S}),h}return t};this.snapToPosition=(t,i)=>{let{horizontalGuides:r,verticalGuides:o}=this.state,{enabled:n,threshold:s}=this.configStore.config.snapping.position,l=new v(this.previewTopLeftPosition),{height:c,width:d}=this.getSpriteDimensions(i),{x:h,y:f}=new v(t).subtract(l);if(n){let g=this.mapSnappingGuidesToCenter(r,c).sort((O,E)=>O-E),x=this.mapSnappingGuidesToCenter(o,d).sort((O,E)=>O-E);if(!this.positionOffset){let O=this.mapToSnapSystem(h,x,s,!0),E=this.mapToSnapSystem(f,g,s,!0);this.positionOffset=new v(O,E).subtract(new v(h,f))}let S=this.mapFromSnapSystem(h+this.positionOffset.x,x,s,!0),C=this.mapFromSnapSystem(f+this.positionOffset.y,g,s,!0);return S=Math.round(S),C=Math.round(C),r.forEach(O=>{let E=Math.round(this.centerSnapValue(O,c));O.isVisible=E===C}),o.forEach(O=>{let E=Math.round(this.centerSnapValue(O,d));O.isVisible=E===S}),new v(S,C).add(l)}return{x:h,y:f}};this.editor=t,this.configStore=t.configStore,this.state=w(Px),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}hidePositionGuides(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map(t=>k(b({},t),{isVisible:!1})),this.state.horizontalGuides=this.state.horizontalGuides.map(t=>k(b({},t),{isVisible:!1}))}hideRotationGuides(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map(t=>k(b({},t),{isVisible:!1}))}get positionGuides(){let{verticalGuides:t,horizontalGuides:i}=this.state;return[...t,...i]}get rotationGuides(){return this.state.rotationGuides}};a([w],Re.prototype,"state",2),a([p],Re.prototype,"snapToRotation",2),a([p],Re.prototype,"snapToPosition",2),a([p],Re.prototype,"hidePositionGuides",1),a([p],Re.prototype,"hideRotationGuides",1),a([u],Re.prototype,"positionGuides",1),a([u],Re.prototype,"rotationGuides",1);var Jh=jr(Ud());function ea(e,t=null){return new Promise((i,r)=>{let o=new Image;o.addEventListener("load",()=>{let n=document.createElement("canvas"),s=n.getContext("2d");n.width=o.width,n.height=o.height,t&&(n.width=t,n.height=t*o.height/o.width),s.drawImage(o,0,0,n.width,n.height),i(n.toDataURL(je.PNG))}),o.addEventListener("error",()=>{r()}),o.src=e})}var Kh=e=>new Promise((t,i)=>{let r=new FileReader;r.onload=o=>D(void 0,null,function*(){try{let{result:n}=o.target,s=yield ea(n,150);t({stickerURI:n,thumbnailURI:s,name:e.name||"",type:e.type,identifier:zo()})}catch(n){i(n)}}),r.onerror=o=>{i(o)},r.readAsDataURL(e)});var zx="white",Yt={identifier:"identity",opacity:1,tintColor:Nt[zx],tintMode:"none",resizeMode:"keepAspect"},Dc={};var Yh="identity",Oc="imgly_sticker_custom",Y=class{constructor(t){this.state=w.map(Dc);this.customStickers=[];this.colorList=ut.defaultColors;this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=t=>this.entityManager.items.findIndex(i=>i.identifier===t)!==-1;this.add=t=>{let i=this.entityManager.items.find(n=>n.identifier===t),r=i?i.tintMode:Yt.tintMode,o=i?i.resizeMode:Yt.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:r,tintColor:Yt.tintColor,opacity:Yt.opacity,resizeMode:o}})};this.duplicate=()=>{if(this.id){let t=this.editor.spriteStore.getDuplicateContainerTransform(this.id),i=this.editor.spriteStore.getDuplicateContainerFlip(this.id),{flipHorizontally:r,flipVertically:o}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:P(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:r!==i.flipHorizontally,flipVertically:o!==i.flipVertically},transform:t})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.flipHorizontally=()=>{this.id&&this.editor.spriteStore.flipHorizontally(this.id)};this.delete=()=>{if(this.id){let t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}};this.updateStateFromHistory=(t,i)=>{(0,It.default)(i,this.state.get(t))||(this.setState(t,i),this.editor.spriteStore.setContainerProperties(t,i))};this.setState=(t,i)=>{let r=this.state.get(t);r?("opacity"in i&&(r.opacity=i.opacity),i.tintColor&&(r.tintColor=i.tintColor),i.tintMode&&(r.tintMode=i.tintMode),i.resizeMode&&(r.resizeMode=i.resizeMode),this.state.set(t,r)):this.state.set(t,{identifier:i.identifier,opacity:i.opacity,tintMode:i.tintMode,resizeMode:i.resizeMode,tintColor:i.tintColor?i.tintColor:Yt.tintColor})};this.changeOpacity=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{opacity:t});let r=this.editor.spriteStore.getContainerProperties(this.id);i.opacity=r.opacity,this.state.set(this.id,i)}}};this.changeTintColor=t=>{if(this.id){let i=this.state.get(this.id);if(i){let{tintMode:r}=this.entityManager.items.find(n=>n.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:t,tintMode:r});let o=this.editor.spriteStore.getContainerProperties(this.id);i.tintColor=o.tintColor,i.tintMode=o.tintMode||Yt.tintMode,this.state.set(this.id,i)}}};this.tintColorSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.history.color)};this.addFiles=t=>D(this,null,function*(){if(this.editor.modalStore.showInfoModal("loading"),t.length){let i=0,r=[];for(i=0;i<t.length;i+=1)r.push(Kh(t[i]));try{let o=yield Promise.all(r);this.addCustomStickerAsset(o),this.editor.configStore.events.onStickerUploadedAdd(o.map(({identifier:n,stickerURI:s},l)=>({identifier:n,stickerURI:s,file:t[l]})))}catch(o){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}}});this.addCustomStickerAsset=t=>D(this,null,function*(){let i=[];t.forEach(({stickerURI:s,thumbnailURI:l,name:c,identifier:d,type:h})=>{i.push({stickerURI:s,thumbnailURI:l,name:c,tintMode:this.customStickerTintMode,resizeMode:"keepAspect",identifier:d}),this.customStickers.push({identifier:d,type:h,stickerURI:s,name:c})});let r=this.locale.categories[Oc];this.editor.assetProvider.addCustomStickerAsset(i,Oc,r);let o=this.editor.assetProvider.getAssets("sticker"),{config:n}=this;this.entityManager=new mt(o,k(b({},n),{itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=Oc,this.editor.modalStore.hideModal()});this.toolSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.history.opacity)};this.addSnapshot=(t,i)=>{let r=this.editor.historyStore.getCurrentSpritesState();(r==null?void 0:r.sticker)&&(0,It.default)(r.sticker,P(this.state))||this.currentSticker&&this.editor.spriteStore.addSnapshot(t,i)};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Yh:t};this.pureReset=()=>{this.state=w.map(Dc)};this.editor=t,this.selectedCategory=Yh;let{config:i}=this,r=this.editor.assetProvider.getAssets("sticker");this.entityManager=new mt(r,k(b({},i),{itemFallbackKey:"stickerURI",locale:b(b({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),Yt.tintColor=P(le(this.config,"defaultTintColor",Yt.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=be(P(this.config.colors)))}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get currentSticker(){if(this.isStickerSelected){let t=this.state.get(this.id);if(t)return t}}get identifier(){if(this.isStickerSelected){let t=this.state.get(this.id);if(t)return t.identifier}return"none"}get id(){if(this.isStickerSelected)return this.editor.spriteStore.id}get opacity(){return this.currentSticker?this.currentSticker.opacity:Yt.opacity}get tintMode(){return this.currentSticker?this.currentSticker.tintMode:Yt.tintMode}get resizeMode(){return this.currentSticker?this.currentSticker.resizeMode:Yt.resizeMode}get tintable(){return this.currentSticker?this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized":!1}get tintColor(){return this.currentSticker?this.currentSticker.tintColor:Yt.tintColor}get config(){return this.editor.configStore.config[m.STICKER]}get locale(){return this.editor.configStore.locale[m.STICKER]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};a([w],Y.prototype,"selectedCategory",2),a([w],Y.prototype,"entityManager",2),a([p],Y.prototype,"selectLast",2),a([p],Y.prototype,"add",2),a([p],Y.prototype,"duplicate",2),a([p],Y.prototype,"bringToFront",2),a([p],Y.prototype,"flipHorizontally",2),a([p],Y.prototype,"delete",2),a([p],Y.prototype,"updateStateFromHistory",2),a([p],Y.prototype,"setState",2),a([p],Y.prototype,"changeOpacity",2),a([p],Y.prototype,"changeTintColor",2),a([p],Y.prototype,"addFiles",2),a([p],Y.prototype,"addCustomStickerAsset",2),a([p],Y.prototype,"toggleCategorySelection",2),a([p],Y.prototype,"pureReset",2),a([u],Y.prototype,"isStickerSelected",1),a([u],Y.prototype,"isCustomStickerEnabled",1),a([u],Y.prototype,"customStickerTintMode",1),a([u],Y.prototype,"currentSticker",1),a([u],Y.prototype,"identifier",1),a([u],Y.prototype,"id",1),a([u],Y.prototype,"opacity",1),a([u],Y.prototype,"tintMode",1),a([u],Y.prototype,"resizeMode",1),a([u],Y.prototype,"tintable",1),a([u],Y.prototype,"tintColor",1),a([u],Y.prototype,"config",1),a([u],Y.prototype,"locale",1),a([u],Y.prototype,"localeColor",1),a([u],Y.prototype,"selectedCategoryIdentifier",1),a([u],Y.prototype,"items",1),a([u],Y.prototype,"categories",1);var Lx="imgly_font_open_sans_bold",tt={text:"Write Something",identifier:Lx,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:Nt.white,backgroundColor:Nt.transparent||[0,0,0,0],width:0},Ac={};var qh={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},vo=class{constructor(t){this.state=w.map(Ac);this.colorList=ut.defaultColors;this.backgroundColorList=ut.defaultBackgroundColors;this.fontsLoadStatus=w.object({pending:!1,loaded:!1});this.doesTextAssetExist=t=>this.editor.assetProvider.getFontAssets().findIndex(i=>i.identifier===t)!==-1;this.validFontWithConfig=t=>this.fonts.find(i=>i.identifier===t)||this.fonts[0];this.addOrselect=()=>{this.state.size?(this.selectLast(),this.loadFonts()):this.add()};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>D(this,null,function*(){let{fontsLoadStatus:t}=this,i=()=>{this.editor.spriteStore.addText({state:{identifier:tt.identifier,text:tt.text,textColor:tt.textColor,backgroundColor:tt.backgroundColor,lineHeight:tt.lineHeight,alignment:tt.alignment,fontSize:0}})};if(!t.pending&&!t.loaded){this.fontsLoadStatus.pending=!0;let r=this.editor.assetProvider.getFontManager();try{yield r.loadFontsWithIdentifiers([tt.identifier]),i()}catch(o){this.editor.modalStore.showActionModal({type:rt.ERROR,identifier:"fontLoading",error:tt.identifier})}yield this.loadFonts()}else i()});this.duplicate=()=>{if(this.id){let t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:P(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:P(this.backgroundColor),width:this.width},transform:t})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.delete=()=>{if(this.id){let t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.changeFont=t=>{let i=this.fonts.find(r=>r.identifier===t);this.changeIdentifier(i,this.id),this.id&&this.addSnapshot(_.EDIT,this.locale.history.fontFamily)};this.changeIdentifier=(t,i)=>{xt(()=>{if(t&&i){let r=this.state.get(i);if(r){this.editor.spriteStore.setContainerProperties(i,{fontIdentifier:t.identifier},!0);let o=this.editor.spriteStore.getContainerProperties(i);r.identifier=o.fontIdentifier,r.fontFamily=t.fontFamily,r.fontStyle=t.fontStyle,r.fontWeight=t.fontWeight,r.fontSize=o.fontSize,r.width=o.width,r.defaultFontSize=r.fontSize,this.state.set(i,r)}}})};this.changeFontSize=(t,i=!1)=>{if(this.id){let r=this.state.get(this.id);r&&(r.fontSize=t,i&&(r.defaultFontSize=t),this.state.set(this.id,r))}};this.updateDefaultFontSize=()=>{if(this.id){let t=this.state.get(this.id);t&&(t.defaultFontSize=t.fontSize,this.state.set(this.id,t))}};this.changeSize=(t,i)=>{let r=this.state.get(t);r&&(r.width=i.width,r.fontSize=i.fontSize,r.defaultFontSize=i.fontSize,this.state.set(t,r))};this.changeWidth=t=>{if(this.id){let i=this.state.get(this.id);i&&(i.width=t,this.state.set(this.id,i))}};this.changeText=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);let r=this.editor.spriteStore.getContainerProperties(this.id),o=this.editor.outputContainer.getSizeInOutputSpace(),n=this.editor.spriteStore.getSize(this.id);this.config.disableAutoScaling||n.height>o.height&&this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,o.height)},!0),r=this.editor.spriteStore.getContainerProperties(this.id),i.text=r.text,i.fontSize=r.fontSize,i.defaultFontSize=r.fontSize,this.state.set(this.id,i),this.addSnapshot(_.EDIT,this.locale.history.edit)}}};this.calculateFitFontSize=(t,i)=>{if(!vo.measureContext){let x=document.createElement("canvas");vo.measureContext=x.getContext("2d")}let r=this.editor.spriteStore.getContainerProperties(t),o=this.editor.engine.assetProvider.getFontManager().getFontWithId(r.fontIdentifier),n=this.config.minFontSizeForAutoScaling,s=Ra(vo.measureContext,r.text,o,r.fontSize,r.lineHeight,r.width,o.textMetrics),l=Math.min(Math.floor(r.fontSize*(i/s.height)),1),c=Math.round(r.fontSize),d=0,h=c-l,f=Math.floor((c-l)*2),g=h;for(;d<=f;){h=d+Math.floor((f-d)/2);let x=Ra(vo.measureContext,r.text,o,h,r.lineHeight,r.width,o.textMetrics);if(i<x.height)f=h-1,g=h-1;else if(i>x.height){if(d=h+1,l+h>=c)return c}else{g=h;break}}return n&&g<n?n:g};this.changeLineHeight=t=>{if(this.id){let i=this.state.get(this.id);if(i&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},!0);let r=this.editor.spriteStore.getContainerProperties(this.id);i.lineHeight=r.lineHeight,this.state.set(this.id,i)}}};this.changeColor=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});let r=this.editor.spriteStore.getContainerProperties(this.id);i.textColor=r.textColor,this.state.set(this.id,i)}}};this.changeBackgroundColor=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});let r=this.editor.spriteStore.getContainerProperties(this.id);i.backgroundColor=r.backgroundColor,this.state.set(this.id,i)}}};this.colorSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.history.backgroundColor)};this.changeAlignment=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});let r=this.editor.spriteStore.getContainerProperties(this.id);i.alignment=r.alignment,this.state.set(this.id,i),this.addSnapshot(_.EDIT,this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.history.lineSpacing)};this.addSnapshot=(t,i)=>{let r=this.editor.historyStore.getCurrentSpritesState();(r==null?void 0:r.text)&&(0,It.default)(r.text,P(this.state))||this.currentText&&this.editor.spriteStore.addSnapshot(t,i)};this.updateStateFromHistory=(t,i)=>{(0,It.default)(i,this.state.get(t))||(this.setState(t,i),this.editor.spriteStore.setContainerProperties(t,i))};this.setState=(t,i)=>{let r=this.state.get(t);if(r)i.alignment&&(r.alignment=i.alignment),i.text&&(r.text=i.text),i.lineHeight&&(r.lineHeight=i.lineHeight),i.textColor&&(r.textColor=i.textColor),i.backgroundColor&&(r.backgroundColor=i.backgroundColor),i.fontIdentifier&&(r.identifier=i.fontIdentifier),i.fontSize&&(r.fontSize=i.fontSize,r.defaultFontSize=i.fontSize),i.width&&(r.width=i.width);else{let o=this.validFontWithConfig(i.fontIdentifier);o&&this.state.set(t,{text:i.text,identifier:o.identifier,alignment:i.alignment,textColor:i.textColor?i.textColor:tt.textColor,backgroundColor:i.backgroundColor?i.backgroundColor:tt.backgroundColor,fontFamily:o.fontFamily,fontStyle:o.fontStyle,fontSize:i.fontSize,fontWeight:o.fontWeight,lineHeight:i.lineHeight,width:i.width,defaultFontSize:i.fontSize})}};this.setFontSize=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},!0);let r=this.editor.spriteStore.getContainerProperties(this.id);i.fontSize=r.fontSize,i.defaultFontSize=r.fontSize,this.state.set(this.id,i)}}};this.pureReset=()=>{this.state=w.map(Ac)};this.editor=t,this.fonts.find(i=>i.identifier===tt.identifier)||(tt.identifier=this.fonts[0].identifier),tt.textColor=P(le(this.config,"defaultColor",tt.textColor)),tt.backgroundColor=P(le(this.config,"defaultBackgroundColor",tt.backgroundColor)),tt.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=be(P(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=be(P(this.config.backgroundColors)))}static defaultText(){return tt.text}static getDisplayFontStyle(t){let i=t.fontWeight&&qh[t.fontWeight].toLowerCase()!=="regular"?qh[t.fontWeight]:"",r=t.fontStyle&&t.fontStyle.toLowerCase()!=="normal"?t.fontStyle:"";return`${t.fontFamily.toLowerCase().includes(i.toLowerCase())?"":i} ${r}`.trim()}loadFonts(){return D(this,null,function*(){let{fontsLoadStatus:t}=this;if(t.loaded)return;let i=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForText().map(o=>o.identifier);try{yield i.loadFontsWithIdentifiers(r)}catch(o){let n=r.filter(s=>!i.isFontLoaded(s)).join(", ");this.editor.modalStore.showActionModal({type:rt.ERROR,identifier:"fontLoading",error:n})}t.loaded=!0})}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){let t=this.state.get(this.id);if(t)return t}}get text(){return this.currentText?this.currentText.text:tt.text}get fontSize(){return this.currentText?this.currentText.fontSize:tt.fontSize}get defaultFontSize(){return this.currentText?this.currentText.defaultFontSize:tt.defaultFontSize}get width(){return this.currentText?this.currentText.width:tt.width}get fontFamily(){return this.currentText?this.currentText.fontFamily:tt.fontFamily}get fontStyle(){return this.currentText?this.currentText.fontStyle:tt.fontStyle}get fontWeight(){return this.currentText?this.currentText.fontWeight:tt.fontWeight}get lineHeight(){return this.currentText?this.currentText.lineHeight:tt.lineHeight}get identifier(){return this.currentText?this.currentText.identifier:tt.identifier}get id(){if(this.isTextSelected)return this.editor.spriteStore.id}get alignment(){return this.currentText?this.currentText.alignment:tt.alignment}get textColor(){return this.currentText?this.currentText.textColor:tt.textColor}get backgroundColor(){return this.currentText?this.currentText.backgroundColor:tt.backgroundColor}get config(){return this.editor.configStore.config[m.TEXT]}get locale(){return this.editor.configStore.locale[m.TEXT]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce((t,i)=>this.rawOptions.find(r=>r.identifier===i.identifier)?[...t,{identifier:i.identifier,fontFamily:i.fontFamily,fontStyle:i.fontStyle||"",fontWeight:i.fontWeight||""}]:t,[])}get fontFamilies(){return[...new Set(this.fonts)]}},H=vo;a([p],H.prototype,"addOrselect",2),a([p],H.prototype,"selectLast",2),a([p],H.prototype,"add",2),a([p],H.prototype,"duplicate",2),a([p],H.prototype,"bringToFront",2),a([p],H.prototype,"delete",2),a([p],H.prototype,"setEditMode",2),a([p],H.prototype,"changeFont",2),a([p],H.prototype,"changeIdentifier",2),a([p],H.prototype,"changeFontSize",2),a([p],H.prototype,"updateDefaultFontSize",2),a([p],H.prototype,"changeSize",2),a([p],H.prototype,"changeWidth",2),a([p],H.prototype,"changeText",2),a([p],H.prototype,"changeLineHeight",2),a([p],H.prototype,"changeColor",2),a([p],H.prototype,"changeBackgroundColor",2),a([p],H.prototype,"changeAlignment",2),a([p],H.prototype,"updateStateFromHistory",2),a([p],H.prototype,"setState",2),a([p],H.prototype,"setFontSize",2),a([p],H.prototype,"pureReset",2),a([u],H.prototype,"isEditMode",1),a([u],H.prototype,"isTextSelected",1),a([u],H.prototype,"fontsLoaded",1),a([u],H.prototype,"currentText",1),a([u],H.prototype,"text",1),a([u],H.prototype,"fontSize",1),a([u],H.prototype,"defaultFontSize",1),a([u],H.prototype,"width",1),a([u],H.prototype,"fontFamily",1),a([u],H.prototype,"fontStyle",1),a([u],H.prototype,"fontWeight",1),a([u],H.prototype,"lineHeight",1),a([u],H.prototype,"identifier",1),a([u],H.prototype,"id",1),a([u],H.prototype,"alignment",1),a([u],H.prototype,"textColor",1),a([u],H.prototype,"backgroundColor",1),a([u],H.prototype,"config",1),a([u],H.prototype,"locale",1),a([u],H.prototype,"localeColor",1),a([u],H.prototype,"rawOptions",1),a([u],H.prototype,"fonts",1),a([u],H.prototype,"fontFamilies",1);var Bx="imgly_text_design_blocks",wt={identifier:Bx,color:Nt.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},Pc={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},zc={};var X=class{constructor(t){this.state=w.map(zc);this.colorList=ut.defaultColors;this.fontsLoaded=!1;this.doesTextDesignAssetExist=t=>this.entityManager.items.findIndex(i=>i.identifier===t)!==-1;this.addOrselect=()=>D(this,null,function*(){yield this.loadFonts(),this.state.size?this.selectLast():this.add()});this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:wt.identifier,text:wt.text,color:wt.color,isInverted:wt.isInverted,seed:Pc[wt.identifier]||wt.seed,padding:0}})};this.updateStateFromHistory=(t,i)=>{if((0,It.default)(i,this.state.get(t)))return;let r=this.state.get(t);i.identifier===r.identifier?(this.setState(t,i),this.editor.spriteStore.setContainerProperties(t,i)):this.changeIdentifier(i.identifier,!1,i.seed,t)};this.setState=(t,i)=>{let r=this.state.get(t);r?(i.inverted&&(r.isInverted=i.inverted),i.seed&&(r.seed=i.seed),i.color&&(r.color=i.color),i.padding&&(r.padding=i.padding),i.width&&(r.width=i.width)):this.state.set(t,{width:i.width,text:i.text,isInverted:i.inverted,identifier:i.identifier,seed:i.seed,color:i.color?i.color:wt.color,padding:i.padding})};this.changeText=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);let r=this.editor.spriteStore.getContainerProperties(this.id);i.text=r.text,this.state.set(this.id,i),this.addSnapshot(_.EDIT,this.locale.history.edit)}}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.duplicate=()=>{if(this.id){let t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:P(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.addSnapshot=(t,i)=>{let r=this.editor.historyStore.getCurrentSpritesState();(r==null?void 0:r.textdesign)&&(0,It.default)(r.textdesign,P(this.state))||this.currentTextDesign&&this.editor.spriteStore.addSnapshot(t,i)};this.delete=(t=this.id)=>{t&&(this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast())};this.changeSeed=()=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);t.seed=i.seed,this.state.set(this.id,t),this.addSnapshot(_.EDIT,this.locale.history.shuffle)}}};this.changeIdentifier=(t,i=!0,r=null,o=this.id)=>{if(o&&t!==this.identifier){let n=this.state.get(o),s=this.editor.spriteStore.getContainerTransform(o);this.editor.spriteStore.addTextDesign({spriteId:o,state:{identifier:t,text:n.text,color:P(n.color),isInverted:n.isInverted,seed:r||Pc[t]||n.seed,padding:n.padding,width:n.width},transform:s},i,!0)}};this.changeColor=t=>{if(this.id){let i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{color:t});let r=this.editor.spriteStore.getContainerProperties(this.id);i.color=r.color,this.state.set(this.id,i)}}};this.colorSnapshot=()=>{this.addSnapshot(_.EDIT,this.locale.history.color)};this.invertBackground=()=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!t.isInverted},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);t.isInverted=i.inverted,this.state.set(this.id,t),this.addSnapshot(_.EDIT,this.locale.history.invert)}}};this.changeWidth=t=>{if(this.id){let i=this.state.get(this.id);i&&(i.width=t,this.state.set(this.id,i))}};this.changePadding=t=>{if(this.id){let i=this.state.get(this.id);i&&(i.padding=t,this.state.set(this.id,i))}};this.pureReset=()=>{this.state=w.map(zc)};this.editor=t;let i=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new mt(i,k(b({},this.config),{flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find(r=>r.identifier===wt.identifier)||(wt.identifier=this.entityManager.items[0].identifier),wt.text=this.locale.canvasControls.placeholderText,wt.color=P(le(this.config,"defaultColor",wt.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=be(P(this.config.colors)))}static defaultText(){return wt.text}loadFonts(){return D(this,null,function*(){if(this.fontsLoaded)return;let t=this.editor.assetProvider.getFontManager(),i=this.editor.assetProvider.getFontAssetsForTextDesign().map(r=>r.identifier);try{yield t.loadFontsWithIdentifiers(i)}catch(r){let o=i.filter(n=>!t.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:rt.ERROR,identifier:"fontLoading",error:o})}this.fontsLoaded=!0})}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){let t=this.state.get(this.id);if(t)return t}}get id(){if(this.isTextDesignSelected)return this.editor.spriteStore.id}get text(){return this.currentTextDesign?this.currentTextDesign.text:wt.text}get seed(){return this.currentTextDesign?this.currentTextDesign.seed:wt.seed}get padding(){return this.currentTextDesign?this.currentTextDesign.padding:wt.padding}get width(){return this.currentTextDesign?this.currentTextDesign.width:wt.width}get identifier(){return this.currentTextDesign?this.currentTextDesign.identifier:null}get isInverted(){return this.currentTextDesign?this.currentTextDesign.isInverted:wt.isInverted}get color(){return this.currentTextDesign?this.currentTextDesign.color:wt.color}get config(){return this.editor.configStore.config[m.TEXT_DESIGN]}get locale(){return this.editor.configStore.locale[m.TEXT_DESIGN]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};a([p],X.prototype,"addOrselect",2),a([p],X.prototype,"selectLast",2),a([p],X.prototype,"add",2),a([p],X.prototype,"updateStateFromHistory",2),a([p],X.prototype,"setState",2),a([p],X.prototype,"changeText",2),a([p],X.prototype,"setEditMode",2),a([p],X.prototype,"duplicate",2),a([p],X.prototype,"bringToFront",2),a([p],X.prototype,"delete",2),a([p],X.prototype,"changeSeed",2),a([p],X.prototype,"changeIdentifier",2),a([p],X.prototype,"changeColor",2),a([p],X.prototype,"invertBackground",2),a([p],X.prototype,"changeWidth",2),a([p],X.prototype,"changePadding",2),a([p],X.prototype,"pureReset",2),a([u],X.prototype,"isTextDesignSelected",1),a([u],X.prototype,"isEditMode",1),a([u],X.prototype,"currentTextDesign",1),a([u],X.prototype,"id",1),a([u],X.prototype,"text",1),a([u],X.prototype,"seed",1),a([u],X.prototype,"padding",1),a([u],X.prototype,"width",1),a([u],X.prototype,"identifier",1),a([u],X.prototype,"isInverted",1),a([u],X.prototype,"color",1),a([u],X.prototype,"config",1),a([u],X.prototype,"locale",1),a([u],X.prototype,"localeColor",1),a([u],X.prototype,"items",1);var _x={},Lc="none",Fx={position:{x:0,y:0},rotation:0},gn=class{constructor(t){this.state=w.map(_x);this.selectedId=w.box(Lc);this.editMode=w.box(!1);this.dragMode=w.box(!1);this.minLength=0;this.counter=0;this.addSticker=(t,i=!0)=>D(this,null,function*(){yield this.addStickerAsync(t,i)});this.addStickerAsync=(n,...s)=>D(this,[n,...s],function*({spriteId:t,state:i,transform:r},o=!0){return new Promise((l,c)=>{r=this.getInitialTransform(r);let{identifier:d}=i,h=this.editor.orderHelper.addSprite(d);this.editor.engine.addStickerFromAssets(d,this.editor.engineMediator.image.container,h).then(f=>D(this,null,function*(){t&&f.setData({id:t});let g=f.getID();this.container[g]=f,this.editor.orderHelper.renameSprite(d,g);let x=this.getSize(g);x.width*=f.getScale().x,x.height*=f.getScale().y,f.setPivot(.5,.5);let S;if(r.scale)S=r.scale;else if(r.size)S={x:r.size.width/x.width,y:r.size.height/x.height};else{let R=this.editor.shortestOutputSide*.4,$=gn.magnitude(R)/gn.sizeMagnitude(f.getSizeInWorldSpace());S={x:$,y:$}}let{flipHorizontally:C,flipVertically:O}=this.editor.outputContainer.getData();f.setFlipHorizontally(C),f.setFlipVertically(O),f.setTransform({position:r.position,scale:S,rotation:r.rotation}),i.flipHorizontally!==void 0&&f.setFlipHorizontally(i.flipHorizontally!==C),i.flipVertically!==void 0&&f.setFlipVertically(i.flipVertically!==O),this.setContainerProperties(g,b({},i));let E=f.getData();this.setInitialSpriteState(g,m.STICKER),this.stickerToolStore.setState(g,k(b({},E),{identifier:d})),yield this.editor.renderPromise(),o&&(this.setId(g),this.addSnapshot(_.ADD,this.stickerLocale.add)),l()})).catch(f=>{console.error(f),c()})})});this.addText=(t,i=!0)=>D(this,null,function*(){yield this.addTextAsync(t,i)});this.addTextAsync=({spriteId:t,state:i,transform:r},o=!0)=>new Promise((n,s)=>{r=this.getInitialTransform(r);let l=this.editor.orderHelper.addSprite(i.identifier),c=this.editor.shortestOutputSide,d={fontIdentifier:i.identifier,text:i.text,width:i.width||c*.6,fontSize:i.fontSize||c*.1,lineHeight:i.lineHeight,alignment:i.alignment,textColor:i.textColor,backgroundColor:i.backgroundColor};this.editor.engine.addTextWithFontLoading(d,this.editor.engineMediator.image.container,l).then(h=>D(this,null,function*(){t&&h.setData({id:t});let f=h.getID();this.container[f]=h,this.editor.orderHelper.renameSprite(i.identifier,this.id);let{flipHorizontally:g,flipVertically:x}=this.editor.outputContainer.getData();h.setFlipHorizontally(g),h.setFlipVertically(x),h.setPivot(.5,.5),h.setPosition(r.position),h.setRotation(r.rotation),this.setInitialSpriteState(f,m.TEXT);let S=h.getData();this.textToolStore.setState(f,b({},S)),yield this.editor.renderPromise(),o&&(this.setId(f),this.addSnapshot(_.ADD,this.textLocale.add)),n()})).catch(h=>{console.error(h),s()})});this.addTextDesign=(t,i=!0,r=!1)=>D(this,null,function*(){yield this.addTextDesignAsync(t,i,r)});this.addTextDesignAsync=({spriteId:t,state:i,transform:r},o=!0,n=!1)=>new Promise((s,l)=>{r=this.getInitialTransform(r);let c=this.editor.orderHelper.addSprite(i.identifier),d=this.editor.shortestOutputSide,h={width:i.width||d*.6,text:i.text,color:i.color,inverted:i.isInverted,seed:i.seed,padding:i.padding};this.editor.engine.addTextDesignAsync(i.identifier,h,this.editor.engineMediator.image.container,c).then(f=>D(this,null,function*(){t&&(n&&(this.pureRemoveSprite(t),this.textDesignToolStore.state.delete(t)),f.setData({id:t}));let g=f.getID();this.container[g]=f,this.editor.orderHelper.renameSprite(i.identifier,this.id);let{flipHorizontally:x,flipVertically:S}=this.editor.outputContainer.getData();f.setFlipHorizontally(x),f.setFlipVertically(S),f.setPivot(.5,.5),f.setPosition(r.position),f.setRotation(r.rotation),this.setInitialSpriteState(g,m.TEXT_DESIGN);let C=f.getData();this.textDesignToolStore.setState(g,k(b({},C),{identifier:i.identifier})),yield this.editor.renderPromise(),o&&(this.setId(g),this.addSnapshot(_.ADD,this.textDesignLocale.add)),s()})).catch(f=>{console.error(f),l()})});this.spriteLocalTransform=()=>({position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation});this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.setContainerProperties=(t,i,r=!1)=>{this.container[t].setData(i),r&&this.updatePositionAndSize(),this.editor.render()};this.setContainerPosition=(t,i)=>{this.container[t].setPosition(i)};this.pureRemoveSprite=t=>(this.editor.engine.removeContainer(this.container[t]),this.container[t].getIndexInParent()===-1?(delete this.container[t],this.state.delete(t),this.editor.orderHelper.removeSprite(t),!0):!1);this.deleteSprite=(t=this.id)=>{let i=this.state.get(t);i.tool===m.STICKER?this.stickerToolStore.delete():i.tool===m.TEXT?this.textToolStore.delete():i.tool===m.TEXT_DESIGN&&this.textDesignToolStore.delete()};this.removeSprite=t=>{this.pureRemoveSprite(t)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())};this.addSnapshot=(t,i)=>{this.editor.addSnapshot(void 0,t,i)};this.spriteSnapshot=t=>{this.addSnapshot(_.EDIT,this.historyLocale[t])};this.addNewText=(t,i)=>D(this,null,function*(){if(this.textToolStore.doesTextAssetExist(i.identifier))yield this.addTextAsync(k(b({},t),{state:i}),!1);else throw new Error(`Text identifier ${i.identifier} doesn't exist`)});this.addNewTextDesign=(t,i)=>D(this,null,function*(){if(this.textDesignToolStore.doesTextDesignAssetExist(i.identifier))yield this.addTextDesignAsync(k(b({},t),{state:i}),!1);else throw new Error(`TextDesign identifier ${i.identifier} doesn't exist`)});this.addNewSticker=(t,i)=>D(this,null,function*(){if(this.stickerToolStore.doesStickerAssetExist(i.identifier))yield this.addStickerAsync(k(b({},t),{state:i}),!1);else throw new Error(`Sticker identifier ${i.identifier} doesn't exist`)});this.getSpriteHistoryState=()=>{let t=P(this.textToolStore.state),i=P(this.textDesignToolStore.state),r={common:P(this.state),[m.STICKER]:P(this.stickerToolStore.state),[m.TEXT]:t,[m.TEXT_DESIGN]:i,spriteIdList:Object.keys(this.container)};return Object.keys(r.common).forEach(o=>{r.common[o].size=this.container[o].getSizeInWorldSpace(),r.common[o].position=this.container[o].getPosition(),r.common[o].order=this.container[o].getIndexInParent()}),r};this.updateStateFromSerialization=(t,i)=>D(this,null,function*(){if(i&&i.length)try{let r=yield Promise.all(i.map(c=>D(this,[c],function*({svg:o,raster:n,name:s,identifier:l}){let d=(o==null?void 0:o.data)?je.SVG:n.type,h=`data:${d};base64,${(o==null?void 0:o.data)||n.data}`,f=yield ea(h,150);return{stickerURI:h,thumbnailURI:f,name:s,type:d,identifier:l}})));yield this.stickerToolStore.addCustomStickerAsset(r)}catch(r){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}yield this.updateStateByHistoryState(t.spriteIdList,t)});this.updateStateFromHistory=t=>D(this,null,function*(){Object.keys(this.container).filter(o=>t.spriteIdList.indexOf(o)===-1).forEach(o=>{this.pureRemoveSprite(o)}),yield this.updateStateByHistoryState(t.spriteIdList,t)});this.serializableState=()=>D(this,null,function*(){let t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach(r=>{let{flipHorizontally:o,flipVertically:n}=this.editor.outputContainer.getData(),s=this.editor.outputContainer.getRotation(),l=n!==o?-t.common[r].rotation:t.common[r].rotation;t.common[r].rotation=n!==o?l+s:l-s});let i=yield Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(l=>D(this,[l],function*({identifier:r,type:o,stickerURI:n,name:s}){let c={identifier:r,name:s,raster:{data:"",type:je.JPEG}};if(o===je.SVG&&(c.svg={data:n.split(",")[1]}),o===je.JPEG||o===je.PNG)[,c.raster.data]=n.split(","),c.raster.type=o;else{let d=yield ea(n);[,c.raster.data]=d.split(","),c.raster.type=je.PNG}return c})));return{sprite:t,customStickers:i}});this.updateCanvasControls=()=>{Object.keys(this.container).forEach(t=>{this.updatePositionAndSize(t,!0);let i=this.state.get(t);if(i){if(i.tool===m.TEXT){let r=this.getContainerProperties(t);this.textToolStore.changeSize(t,r)}else if(i.tool===m.TEXT_DESIGN){let r=this.getContainerProperties(t);this.textToolStore.changeWidth(r.width)}}})};this.setEditMode=t=>{this.currentSprite&&[m.TEXT,m.TEXT_DESIGN].indexOf(this.tool)!==-1&&(t?this.editor.modalStore.showTextEditModal():this.editor.modalStore.hideModal(),this.editMode.set(t))};this.setDragMode=t=>{this.dragMode.set(t)};this.setPosition=t=>{let i=this.currentSprite,r=this.container[this.id];if(i&&r){r.setPosition(this.editor.previewToWorld(t));let{position:o}=this.getSizePositionFromContainer();i.position.x=o.x,i.position.y=o.y,this.state.set(this.id,i),this.editor.render()}};this.setSize=t=>{let i=this.currentSprite;i&&(i.size.width=t.width,i.size.height=t.height,this.state.set(this.id,i))};this.setRotation=t=>{let i=this.currentSprite;if(i){let{flipHorizontally:r,flipVertically:o}=this.editor.outputContainer.getData(),n=this.editor.outputContainer.getRotation(),s=Lo({rotation:t,outputRotation:n,flipHorizontally:r,flipVertically:o});this.container[this.id].setRotation(s),i.rotation=this.container[this.id].getRotation(),this.state.set(this.id,i),this.editor.render()}};this.onCanvasClick=t=>{this.isEditMode||this.selectHighestOrderSprite(t)};this.select=t=>{let i=this.state.get(t);i&&(this.editor.activeStore.tool!==i.tool&&this.editor.activeStore.selectTool(i.tool),this.setId(t))};this.selectLast=()=>{let t=this.editor.orderHelper.getLastSpriteId();t&&this.select(t)};this.selectNext=()=>{if(this.currentSprite){let i=this.container[this.id].getIndexInParent();if(i){let r=Object.keys(this.container).find(o=>this.container[o].getIndexInParent()===i-1);r&&this.select(r)}}};this.deselect=()=>{this.setId(Lc)};this.bringToFront=t=>D(this,null,function*(){let i=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(i),this.spriteSnapshot("order"),yield this.editor.render(),this.counter+=1});this.flipHorizontally=t=>{let i=this.state.get(t),r=this.container[t];r.setFlipHorizontally(!r.getFlipHorizontally()),i.flipHorizontally=r.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(t,i),this.editor.render()};this.pureReset=()=>{this.deselect(),Array.from(this.state.keys()).forEach(t=>{this.pureRemoveSprite(t)}),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=t=>{let i=this.editor.brushToolStore.containerId();if(t=t.filter(n=>n!==i),t.length<1){this.deselect();return}let r="",o=0;t.forEach(n=>{let s=this.container[n],l=s&&s.getIndexInParent()||0;l>=o&&(o=l,r=n)}),this.select(r)};this.onCornerDrag=({x:t,y:i})=>{if(this.currentSprite){let r=new v(this.currentSprite.position),o=new v(t,i),n=o.subtract(r).magnitude,s=this.getSize(),l=n*2/gn.sizeMagnitude(s);if(n>this.minLength)if(this.isSpriteSticker)if(this.stickerToolStore.resizeMode!=="unrestricted")this.setStickerSize({width:s.width*l,height:s.height*l});else{let c=this.rotationWRTOutputRotation,d=o.subtract(r),h=Math.cos(c),f=Math.sin(c),g=Math.max(Math.abs(d.x*h*2+d.y*f*2),this.minLength),x=Math.max(Math.abs(d.x*-f*2+d.y*h*2),this.minLength);this.setStickerSize({width:g,height:x})}else this.isSpriteText?this.setTextSize(s.width*l):this.isSpriteTextDesign&&this.setTextDesignScale(l);this.editor.render()}};this.onWidthDrag=({x:t,y:i})=>{let r=new v(this.currentSprite.position),n=new v(t,i).subtract(r).magnitude,s=this.editor.previewToWorld(2*n);if(s>this.minLength&&(this.setContainerProperties(this.id,{width:s},!0),this.isSpriteText)){let l=this.getContainerProperties(this.id);this.textToolStore.changeWidth(l.width)}};this.onPaddingDrag=({x:t,y:i})=>{if(this.isSpriteTextDesign){let r=this.getContainerProperties(this.id),o=new v(this.currentSprite.position),s=new v(t,i).subtract(o).magnitude,l=Math.max(this.editor.previewToWorld(s)-r.width/2,0);this.setContainerProperties(this.id,{padding:l},!0),this.isSpriteTextDesign&&(r=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(r.padding))}};this.correctTextFlip=()=>{let{flipHorizontally:t,flipVertically:i}=this.editor.outputContainer.getData();Object.values(this.container).forEach(r=>{(r.type==="text"||r.type==="text-design")&&(r.setFlipHorizontally(t),r.setFlipVertically(i))})};this.reverseTextHorizontally=t=>{Object.values(this.container).forEach(i=>{(i.type==="text"||i.type==="text-design")&&i.setFlipHorizontally(t)})};this.reverseTextVertically=t=>{Object.values(this.container).forEach(i=>{(i.type==="text"||i.type==="text-design")&&i.setFlipVertically(t)})};this.getOutputProperties=()=>this.editor.outputContainer.getData();this.getContainerProperties=t=>this.container[t].getData();this.getContainerTransform=t=>this.container[t].getTransform();this.getDuplicateContainerTransform=t=>{let i=this.container[t].getTransform(),r=this.editor.shortestOutputSide*.1,o=new v(i.position).add(new v(r,r));return k(b({},i),{position:o})};this.getDuplicateContainerFlip=t=>{let i=this.container[t].getFlipHorizontally(),r=this.container[t].getFlipVertically();return{flipHorizontally:i,flipVertically:r}};this.updatePositionAndSize=(t=this.id,i=!1)=>{let{position:r,size:o}=this.getSizePositionFromContainer(t),n=this.state.get(t);if(n){if(n.position.x=r.x,n.position.y=r.y,n.size.width=o.width,n.size.height=o.height,i){let s=this.container[t].getRotation();this.container[t].setRotation(s),n.rotation=this.container[t].getRotation()}this.state.set(t,n)}};this.getInitialTransform=t=>{let i=this.editor.outputToWorld(Fx.position);return t?b({position:i},t):{rotation:this.editor.outputContainer.getRotation(),position:i}};this.setInitialSpriteState=(t,i)=>{let r=this.container[t],{position:o,size:n}=this.getSizePositionFromContainer(t),s=r.getRotation(),l=i!==m.STICKER?!1:r.getFlipHorizontally(),c=i!==m.STICKER?!1:r.getFlipVertically();this.state.set(t,{tool:i,position:o,rotation:s,size:n,flipHorizontally:l,flipVertically:c})};this.setStickerSize=t=>{let i=this.container[this.id];i.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));let r=this.currentSprite;r&&(r.size=this.editor.worldSizeToPreview(i.getSizeInWorldSpace()),this.state.set(this.id,r))};this.setTextSize=t=>{let i=this.getContainerProperties(this.id),r={width:this.editor.previewToWorld(t)},o=r.width/i.width,n={fontSize:Math.round(i.fontSize*o)},s=this.isSpriteText?b(b({},r),n):r;r.width>this.minLength&&n.fontSize&&(this.setContainerProperties(this.id,s,!0),i=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(i.fontSize,!0),this.textToolStore.changeWidth(i.width))};this.setTextDesignScale=t=>{let i=this.getContainerProperties(this.id),r=i.width*t;if(r>this.minLength){this.setContainerProperties(this.id,{width:r},!0);let{width:o}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(o),i=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(i.padding)}};this.getSizePositionFromContainer=(t=this.id)=>{let i=this.container[t];if(i){let r=this.editor.worldToPreview(i.getPosition()),o=this.editor.worldSizeToPreview(i.getSizeInWorldSpace());return{position:r,size:o}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(t=this.id)=>{let i=this.container[t];return i?this.editor.worldSizeToPreview(i.getSizeInWorldSpace()):{width:0,height:0}};this.editor=t,this.container={},this.stickerToolStore=new Y(t),this.textToolStore=new H(t),this.textDesignToolStore=new X(t),this.rect=new ft(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(t,i){return new v(t,i||t).magnitude}static sizeMagnitude(t){return Math.sqrt(t.width*t.width+t.height*t.height)}updateStateByHistoryState(t,i){return D(this,null,function*(){yield(0,Jh.default)(t,r=>D(this,null,function*(){let o=i.common[r];if(!o)return;this.state.get(r)?this.updateExistingItem(r,i):yield this.addNewItem(r,i),this.container[r].setIndexInParent(o.order)})),this.counter+=1})}addNewItem(t,i){return D(this,null,function*(){let r=i.common[t],o=r.size?{width:this.editor.worldToPreview(r.size.width),height:this.editor.worldToPreview(r.size.height)}:void 0,{flipHorizontally:n,flipVertically:s}=this.editor.outputContainer.getData(),l=this.editor.outputContainer.getRotation(),c=s!==n?r.rotation-l:r.rotation+l,d=s!==n?-c:c,h={spriteId:t,transform:{size:o,position:new v(r.position),rotation:d}};if(i.text[t]){let f=i.text[t],g=this.textToolStore.validFontWithConfig(f.identifier);f.identifier=g==null?void 0:g.identifier,yield this.addNewText(h,f)}i.textdesign[t]&&(yield this.addNewTextDesign(h,i.textdesign[t])),i.sticker[t]&&(yield this.addNewSticker(h,k(b({},i.sticker[t]),{flipHorizontally:r.flipHorizontally,flipVertically:r.flipVertically})))})}updateExistingItem(t,i){let r=i.common[t],o=this.state.get(t);this.state.set(t,o);let n=this.container[t];if(n.setPosition(new v(r.position)),n.setRotation(r.rotation),o.rotation=n.getRotation(),r.flipHorizontally!==void 0&&n.setFlipHorizontally(r.flipHorizontally),r.flipVertically!==void 0&&n.setFlipVertically(r.flipVertically),i.text[t]){let s=i.text[t];this.textToolStore.updateStateFromHistory(t,k(b({},s),{fontIdentifier:s.identifier}))}if(i.textdesign[t]){let s=i.textdesign[t];this.textDesignToolStore.updateStateFromHistory(t,k(b({},s),{inverted:s.isInverted}))}i.sticker[t]&&(n.setSizeInWorldSpace(r.size),this.stickerToolStore.updateStateFromHistory(t,i.sticker[t])),this.updatePositionAndSize(t)}get currentSprite(){if(this.isSpriteSelected)return this.state.get(this.id)}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==Lc}get position(){if(this.currentSprite)return this.currentSprite.position}get tool(){if(this.currentSprite)return this.currentSprite.tool}get size(){if(this.currentSprite)return this.currentSprite.size}get rotation(){if(this.currentSprite)return this.currentSprite.rotation}get rotationWRTOutputRotation(){if(this.currentSprite){let{flipHorizontally:t,flipVertically:i}=this.editor.outputContainer.getData(),r=this.editor.outputContainer.getRotation();return Lo({rotation:this.currentSprite.rotation-r,flipHorizontally:t,flipVertically:i})}}get flipHorizontal(){if(this.currentSprite)return this.currentSprite.flipHorizontally}get isSpriteSticker(){return this.tool===m.STICKER}get isSpriteText(){return this.tool===m.TEXT}get isSpriteTextDesign(){return this.tool===m.TEXT_DESIGN}get isOnTop(){let t=this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){let{x:t,y:i}=this.currentSprite.position,{height:r,width:o}=this.currentSprite.size;return{x:Math.round(t-o/2),y:Math.round(i-r/2)}}}get currentRect(){if(this.currentSprite)return this.rect}get leftTopPosition(){if(this.currentSprite)return this.rect.leftTop}get leftBottomPosition(){if(this.currentSprite)return this.rect.leftBottom}get leftMidPosition(){if(this.currentSprite)return this.rect.leftMid}get leftMidPadPosition(){if(this.currentSprite){let{leftMid:t}=this.rect;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}}get rightTopPosition(){if(this.currentSprite)return this.rect.rightTop}get rightBottomPosition(){if(this.currentSprite)return this.rect.rightBottom}get rightMidPosition(){if(this.currentSprite)return this.rect.rightMid}get rightMidPadPosition(){if(this.currentSprite){let{rightMid:t}=this.rect;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}}get leftBottomHandlePosition(){if(this.currentSprite)return this.rect.leftBottomHandle}get rightBottomHandlePosition(){if(this.currentSprite)return this.rect.rightBottomHandle}get historyLocale(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale}get stickerLocale(){return this.editor.configStore.locale[m.STICKER].history}get textLocale(){return this.editor.configStore.locale[m.TEXT].history}get textDesignLocale(){return this.editor.configStore.locale[m.TEXT_DESIGN].history}setId(t){this.selectedId.set(t)}},M=gn;a([w],M.prototype,"counter",2),a([p],M.prototype,"addSticker",2),a([p],M.prototype,"addStickerAsync",2),a([p],M.prototype,"addText",2),a([p],M.prototype,"addTextAsync",2),a([p],M.prototype,"addTextDesign",2),a([p],M.prototype,"addTextDesignAsync",2),a([p],M.prototype,"clickableCanvas",2),a([p],M.prototype,"setContainerProperties",2),a([p],M.prototype,"setContainerPosition",2),a([p],M.prototype,"pureRemoveSprite",2),a([p],M.prototype,"deleteSprite",2),a([p],M.prototype,"removeSprite",2),a([p],M.prototype,"addSnapshot",2),a([p],M.prototype,"addNewText",2),a([p],M.prototype,"addNewTextDesign",2),a([p],M.prototype,"addNewSticker",2),a([p],M.prototype,"updateStateFromSerialization",2),a([p],M.prototype,"updateStateFromHistory",2),a([p],M.prototype,"updateCanvasControls",2),a([p],M.prototype,"setEditMode",2),a([p],M.prototype,"setDragMode",2),a([p],M.prototype,"setPosition",2),a([p],M.prototype,"setSize",2),a([p],M.prototype,"setRotation",2),a([p],M.prototype,"onCanvasClick",2),a([p],M.prototype,"select",2),a([p],M.prototype,"selectLast",2),a([p],M.prototype,"selectNext",2),a([p],M.prototype,"deselect",2),a([p],M.prototype,"bringToFront",2),a([p],M.prototype,"flipHorizontally",2),a([p],M.prototype,"pureReset",2),a([p],M.prototype,"onCornerDrag",2),a([p],M.prototype,"onWidthDrag",2),a([p],M.prototype,"onPaddingDrag",2),a([p],M.prototype,"correctTextFlip",2),a([p],M.prototype,"reverseTextHorizontally",2),a([p],M.prototype,"reverseTextVertically",2),a([u],M.prototype,"currentSprite",1),a([u],M.prototype,"padding",1),a([u],M.prototype,"isEditMode",1),a([u],M.prototype,"isDragMode",1),a([u],M.prototype,"id",1),a([u],M.prototype,"isSpriteSelected",1),a([u],M.prototype,"position",1),a([u],M.prototype,"tool",1),a([u],M.prototype,"size",1),a([u],M.prototype,"rotation",1),a([u],M.prototype,"rotationWRTOutputRotation",1),a([u],M.prototype,"flipHorizontal",1),a([u],M.prototype,"isSpriteSticker",1),a([u],M.prototype,"isSpriteText",1),a([u],M.prototype,"isSpriteTextDesign",1),a([u],M.prototype,"isOnTop",1),a([u],M.prototype,"spritePosition",1),a([u],M.prototype,"currentRect",1),a([u],M.prototype,"leftTopPosition",1),a([u],M.prototype,"leftBottomPosition",1),a([u],M.prototype,"leftMidPosition",1),a([u],M.prototype,"leftMidPadPosition",1),a([u],M.prototype,"rightTopPosition",1),a([u],M.prototype,"rightBottomPosition",1),a([u],M.prototype,"rightMidPosition",1),a([u],M.prototype,"rightMidPadPosition",1),a([u],M.prototype,"leftBottomHandlePosition",1),a([u],M.prototype,"rightBottomHandlePosition",1),a([u],M.prototype,"historyLocale",1),a([u],M.prototype,"stickerLocale",1),a([u],M.prototype,"textLocale",1),a([u],M.prototype,"textDesignLocale",1);var ye={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},Zh={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:w.map({})};var G=class{constructor(t,i){this.minCropSize=0;this.state=Zh,this.configStore=t.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=i}changeIdentifier(t){this.state.identifier=t,this.state.cropState.get(t)||this.state.cropState.set(t,b({},ye))}changeRatio(t){let i=this.state.cropState.get(this.identifier);i&&this.state.cropState.set(this.identifier,k(b({},i),{ratio:t}))}changeSize(t){let i=this.state.cropState.get(this.identifier);i&&(t.width&&t.width>0&&(i.size.width=Math.round(t.width)),t.height&&t.height>0&&(i.size.height=Math.round(t.height)),this.state.cropState.set(this.identifier,i))}changeHeight(t){let i=this.state.cropState.get(this.identifier);i&&t&&(i.size.height=Math.round(t),this.state.cropState.set(this.identifier,i))}changeWidth(t){let i=this.state.cropState.get(this.identifier);i&&t&&(i.size.width=Math.round(t),this.state.cropState.set(this.identifier,i))}changePositionX(t,i){let r=this.state.cropState.get(this.identifier);return r&&t<=i-this.minCropSize&&t>=0?(r.position.x=Math.round(t),this.state.cropState.set(this.identifier,r),!0):!1}changePositionY(t,i){let r=this.state.cropState.get(this.identifier);return r&&t<=i-this.minCropSize&&t>=0?(r.position.y=Math.round(t),this.state.cropState.set(this.identifier,r),!0):!1}changePosition(t,i){let r=this.state.cropState.get(this.identifier);return r&&t.x<=i.width-this.minCropSize&&t.x>=0&&t.y<=i.height-this.minCropSize&&t.y>=0?(r.position.x=Math.round(t.x),r.position.y=Math.round(t.y),this.state.cropState.set(this.identifier,r),!0):!1}changeLockResolution(t){let i=this.state.cropState.get(this.identifier);i&&(i.lockResolution=t!==void 0?t:!i.lockResolution,this.state.cropState.set(this.identifier,i))}changeForceDimensions(t){let i=this.state.cropState.get(this.identifier);i&&(i.forceDimensions=t,this.state.cropState.set(this.identifier,i))}setRotation(t){this.state.rotationInDegrees=t}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=!1,this.state.flipVertically=!1}updateFlip({flipHorizontally:t,flipVertically:i}){this.state.flipHorizontally=t,this.state.flipVertically=i}setOutputRotation(t){this.state.outputRotation=t}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){let{width:t,height:i}=this.defaults.maxCropMaskSize;return new v(t/2,i/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:ye.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:ye.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:ye.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:ye.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:ye.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:ye.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:ye.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:ye.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:ye.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};a([w],G.prototype,"state",2),a([p],G.prototype,"changeIdentifier",1),a([p],G.prototype,"changeRatio",1),a([p],G.prototype,"changeSize",1),a([p],G.prototype,"changeHeight",1),a([p],G.prototype,"changeWidth",1),a([p],G.prototype,"changePositionX",1),a([p],G.prototype,"changePositionY",1),a([p],G.prototype,"changePosition",1),a([p],G.prototype,"changeLockResolution",1),a([p],G.prototype,"changeForceDimensions",1),a([p],G.prototype,"setRotation",1),a([p],G.prototype,"resetRotation",1),a([p],G.prototype,"resetOutputRotation",1),a([p],G.prototype,"resetFlip",1),a([p],G.prototype,"updateFlip",1),a([p],G.prototype,"setOutputRotation",1),a([p],G.prototype,"flipHorizontally",1),a([p],G.prototype,"flipVertically",1),a([u],G.prototype,"flipCenter",1),a([u],G.prototype,"isFlippedHorizontal",1),a([u],G.prototype,"isFlippedVertical",1),a([u],G.prototype,"identifier",1),a([u],G.prototype,"height",1),a([u],G.prototype,"width",1),a([u],G.prototype,"position",1),a([u],G.prototype,"ratio",1),a([u],G.prototype,"size",1),a([u],G.prototype,"x",1),a([u],G.prototype,"y",1),a([u],G.prototype,"lockResolution",1),a([u],G.prototype,"forceDimensions",1),a([u],G.prototype,"selectedCrop",1),a([u],G.prototype,"rotationInDegrees",1),a([u],G.prototype,"outputRotation",1);var Bc=class{constructor(t){this.transforms={output:JSON.stringify(Ge.IDENTITY),preview:JSON.stringify(Ge.IDENTITY)};this.setFrameOpacity=t=>{this.frameOpacity=t,this.entered&&this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(0)};this.setOverlayOpacity=t=>{this.overlayOpacity=t,this.entered&&this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(0)};this.editor=t,this.overlayOpacity=0,this.frameOpacity=0,this.entered=!1}onLeave(){let{flipHorizontally:t,flipVertically:i,rotation:r,outputRotation:o}=this.transformToolStore.rotateFlipState;this.entered=!1,this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(this.frameOpacity);let n=this.editor.previewToWorld(new v(this.transformToolStore.leftTopRespectFlip).add(new v(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new v(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),s=this.engineMediator.preview.container,{outputContainer:l}=this.editor;l.setResolution(P(this.transformToolStore.localOutputImageSize)),l.setData({flipVertically:i,flipHorizontally:t});let c=s.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();let d=1;if(this.transformToolStore.lockResolution){let{cropMaskSize:S,defaultImageSize:C}=this.transformToolStore,O=this.transformToolStore.maxCropMaskSize;d={height:S.height*C.height/O.height,width:S.width*C.width/O.width}.width/this.transformToolStore.localOutputImageSize.width}let h=Math.abs(c.x),f=d/(h/this.transformToolStore.defaultScale),g={x:f,y:f},x=-(r-o);l.setTransform({scale:g,position:n,rotation:x}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}resetTransforms(t){this.transforms=t}onEnter(){this.entered=!0,this.editor.overlayToolStore.identifier!=="identity"&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),this.editor.frameToolStore.identifier!=="identity"&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.scale.setScaleToDefault();let t=this.engineMediator.preview.container,{outputContainer:i}=this.editor,r=JSON.parse(this.transforms.preview);i.setResolution(P(this.transformToolStore.defaultImageSize)),t.setTransform(r),i.setTransform(JSON.parse(this.transforms.output));let o=r.scale;i.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:o.y<0,flipHorizontally:o.x<0}),this.engineMediator.preview.savePreviewTransform(r);let{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(t,i=!0){let{width:r,height:o}=this.editor.engineMediator.image.container.getBounds(),n=Kd(t)?{width:o,height:r}:{width:r,height:o};this.editor.outputContainer.rotate(t,n),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());let{rotation:s}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(s),xt(()=>{this.editor.scale.setInitialTransform();let l=this.getScaleWithFlip(s);this.engineMediator.preview.container.setScale(l),this.transformToolStore.setCropDefaults(!0),this.transformToolStore.updateCropMask()}),i&&this.editor.render()}applyPreviewTransform(){let{rotation:t,flipHorizontally:i,flipVertically:r}=this.transformToolStore.rotateFlipState,o=this.editor.scale.getPositionWithOffset(),n=this.getScaleWithFlip(),s=t;i&&(s=Fa(s)),r&&(s=Fa(s));let l={position:o,rotation:s,scale:n};this.engineMediator.preview.savePreviewTransform(l),this.engineMediator.preview.container.setTransform(l)}getScaleWithFlip(t=this.transformToolStore.rotateFlipState.rotation){let{flipHorizontally:i,flipVertically:r}=this.transformToolStore.rotateFlipState,o=i?-1:1,n=r?-1:1,s=this.editor.scale.calculateScale(t);return{x:s*o,y:s*n}}saveTransforms(){let t=JSON.stringify(this.engineMediator.preview.container.getTransform()),i=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:i}}saveTransformsBasedOnFlip(){let t=this.engineMediator.preview.container.getTransform(),{scale:i}=t,{flipVertically:r,flipHorizontally:o}=this.editor.outputContainer.getData(),n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(k(b({},t),{scale:{x:o?-i.x:i.x,y:r?-i.y:i.y}})),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}};var _c=class{constructor(t){this.store=t;this.initialState={};this.state={}}init(){this.initialState=this.store.serializableState,this.state=b({},this.initialState)}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,It.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}};var Qh="identity",Cr=class{constructor(t){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=w.box(!1);this.minCropSize=0;this.transformHistory=new _c(this);this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=t=>{if(!t.trim())return!1;let i=this.editor.configStore.config.assetBaseUrl,{length:r}=i;if(i[r-1]!=="/"&&(i+="/"),`${i}transform`===t)return!1;let o=new Image;try{return o.src=t,!0}catch(n){return!1}};this.reset=()=>{this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop(),this.editor.render(),this.trackChanges()};this.changeLocalOutputSize=t=>{this.localOutputSize.height=Math.round(t.height),this.localOutputSize.width=Math.round(t.width)};this.changeDefaultScale=t=>{this.defaults.scale=t};this.changeLocalOutputHeight=t=>{this.localOutputSize.height=Math.round(t)};this.changeLocalOutputWidth=t=>{this.localOutputSize.width=Math.round(t)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution(),this.trackChanges()};this.rotateClockwise=()=>{let t=this.editor.outputContainer.getRotation(),i=this.isFlippedVertical?za:La;this.rotateOutputContainer(i(t))};this.rotateAntiClockwise=()=>{let t=this.editor.outputContainer.getRotation(),i=this.isFlippedVertical?La:za;this.rotateOutputContainer(i(t))};this.flipHorizontally=(t=!0)=>{this.transformStore.flipHorizontally(),this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal),this.transformRender(t),t&&this.trackChanges()};this.flipVertically=(t=!0)=>{this.transformStore.flipVertically(),this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical),this.transformRender(t),t&&this.trackChanges()};this.applyDefaultCrop=(t=!1)=>{if(this.identifier==="identity"){let{identifier:i}=this.getMatchingItem();this.changeIdentifier(i,t)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,!0)};this.onLeftTop=({x:t,y:i})=>{let r=this.getRatio(),o=this.rightBottom,{minCropMaskSize:n,maxCropMaskSize:s}=this,l=Math.min(Math.max(0,t),o.x-n.width),c=Math.min(Math.max(0,i),o.y-n.height),d=o.x-l,h=o.y-c,f={width:Math.max(this.minCropSize,Math.min(d,s.width-l)),height:Math.max(this.minCropSize,Math.min(h,s.height-c))};if(r==="*")this.changePosition({x:l,y:c})&&this.changeCropAndOutputSize(f);else{let g=this.proportionalSize(r,f),x=new v(o).subtract({x:g.width,y:g.height});this.changePosition(x)&&this.changeCropAndOutputSize(g,r)}};this.onLeftBottom=({x:t,y:i})=>{let r=this.getRatio(),o=this.rightTop,{minCropMaskSize:n,maxCropMaskSize:s}=this,l=Math.min(Math.max(0,t),o.x-n.width),c=Math.max(0,i,o.y+n.height),d=o.x-l,h=c-o.y,f={width:Math.max(1,Math.min(d,s.width-l)),height:Math.max(1,Math.min(h,s.height-o.y))};if(r==="*")this.changePositionX(l)&&this.changeCropAndOutputSize(f);else{let g=this.proportionalSize(r,f);this.changePositionX(o.x-g.width)&&this.changeCropAndOutputSize(g,r)}};this.onRightTop=({x:t,y:i})=>{let r=this.getRatio(),o=this.leftBottom,{minCropMaskSize:n,maxCropMaskSize:s}=this,l=Math.max(0,t,o.x+n.width),c=Math.min(Math.max(0,i),o.y-n.height),d=l-o.x,h=o.y-c,f={width:Math.max(1,Math.min(d,s.width-o.x)),height:Math.max(1,Math.min(h,s.height-c))};if(r==="*")this.changePositionY(c)&&this.changeCropAndOutputSize(f);else{let g=this.proportionalSize(r,f);this.changePositionY(o.y-g.height)&&this.changeCropAndOutputSize(g,r)}};this.onRightBottom=({x:t,y:i})=>{let r=this.getRatio(),o=this.leftTop,{minCropMaskSize:n,maxCropMaskSize:s}=this,l=Math.max(0,t,o.x+n.width),c=Math.max(0,i,o.y+n.height),d=l-o.x,h=c-o.y,f={width:Math.max(1,Math.min(d,s.width-o.x)),height:Math.max(1,Math.min(h,s.height-o.y))};if(r==="*")this.changeCropAndOutputSize(f);else{let g=this.proportionalSize(r,f);this.changeCropAndOutputSize(g,r)}};this.onPixelWidth=t=>{let i=JSON.stringify(P(this.localOutputSize)),r=this.entityManager.items.find(n=>n.identifier===this.identifier),o=this.defaults.imageSize;if(r&&r.ratio){let n=t,s=this.localOutputSize.height,{ratio:l}=r;if(l==="*"&&this.lockResolution&&(l=this.localOutputSize.width/this.localOutputSize.height),l==="*"&&!this.lockResolution)n=Math.max(Math.min(t,o.width),this.minCropSize),this.changeLocalOutputWidth(n);else{let c=Cr.placeCropMask(l,o);n=Math.max(Math.min(n,c.width),this.minCropSize),s=n/l,this.changeLocalOutputSize({height:s,width:n})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(i)),Math.round(n)}return t};this.onPixelHeight=t=>{let i=JSON.stringify(P(this.localOutputSize)),r=this.entityManager.items.find(n=>n.identifier===this.identifier),o=this.defaults.imageSize;if(r&&r.ratio){let n=t,s=this.localOutputSize.width,{ratio:l}=r;if(l==="*"&&this.lockResolution&&(l=this.localOutputSize.width/this.localOutputSize.height),l==="*"&&!this.lockResolution)n=Math.max(Math.min(t,o.height),this.minCropSize),this.changeLocalOutputHeight(n);else{let c=Cr.placeCropMask(l,o);n=Math.max(Math.min(n,c.height),this.minCropSize),s=n*l,this.changeLocalOutputSize({height:n,width:s})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(i)),Math.round(n)}return t};this.setFrameOpacity=t=>{this.transformations.setFrameOpacity(t)};this.setOverlayOpacity=t=>{this.transformations.setOverlayOpacity(t)};this.closestRatioReducer=t=>(i,r)=>r===null||Math.abs(t-i.ratio)<Math.abs(t-r.ratio)?-1:1;this.closestDimensionsReducer=t=>(i,r)=>{if(r===null)return-1;let o=Math.abs(i.dimensions.x/i.dimensions.y),n=Math.abs(r.dimensions.x/r.dimensions.y);return o===n?i.dimensions.x*i.dimensions.y>r.dimensions.x*r.dimensions.y?-1:1:Math.abs(t-o)<Math.abs(t-n)?-1:1};this.getMatchingItem=()=>{let t=this.entityManager.items.findIndex(c=>c.identifier==="imgly_transform_common_custom");if(t!==-1)return this.entityManager.items[t];let i=this.entityManager.items.findIndex(c=>c.ratio==="*");if(i!==-1)return this.entityManager.items[i];let r=P(this.editor.outputContainer.getResolution()),o=Math.abs(r.width/r.height),[n]=this.entityManager.items.filter(c=>c.ratio&&typeof c.ratio=="number").sort(this.closestRatioReducer(o)),[s]=this.entityManager.items.filter(c=>c.dimensions&&!c.ratio).sort(this.closestDimensionsReducer(o));if(!n||!s||!n.ratio&&!s.dimensions)return this.entityManager.items[0];if(!s||!s.dimensions)return n;if(!n||!n.ratio)return s;let l=Math.abs(s.dimensions.x/s.dimensions.y);return l===n.ratio||Math.abs(o-n.ratio)<Math.abs(o-l)?n:s};this.getTransform=t=>{let i=this.entityManager.items.find(r=>r.identifier===t);return i||(i=this.getMatchingItem()),i};this.editor=t,this.selectedCategory=Qh,this.transformStore=new G(t,this.defaults),this.transformations=new Bc(t);let s=this.config,{enableRotation:i,enableFlip:r}=s,o=Zt(s,["enableRotation","enableFlip"]),n=this.editor.assetProvider.getAssets("transform");this.entityManager=new mt(n,k(b({},o),{locale:b(b({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new ft(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new ft(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(t){return t*Math.PI/180}static placeCropMask(t,i){if(i.height*t>i.width)return{height:i.width/t,width:i.width,yChanged:!0};let r=i.height*t;return{height:i.height,width:r,yChanged:!1}}changeIdentifier(t,i=!1){this.transformStore.changeIdentifier(t);let r=this.getCropMask(t,this.defaults.imageSize);r&&(this.transformStore.changeRatio(r.ratio),this.changeLocalOutputSize(r),this.updatePreviewSizeWRTImageSize(),r.yChanged!==void 0&&this.updateInitialCropMaskPosition(r.yChanged),r.dimensions&&this.changeLocalOutputSize({width:r.dimensions.x,height:r.dimensions.y}),i&&this.trackChanges())}setDragMode(t){this.dragMode.set(t)}getCropMask(t,i){let r=this.getTransform(t);if(r){let{ratio:o,forceDimensions:n,lockDimensions:s,dimensions:l=null}=r;if(n&&this.transformStore.changeForceDimensions(n),s&&this.transformStore.changeLockResolution(s),o)switch(o){case"*":return this.changePosition({x:0,y:0}),k(b({},i),{yChanged:void 0,ratio:"*",dimensions:l});default:return k(b({},Cr.placeCropMask(r.ratio,i)),{ratio:r.ratio,dimensions:l})}else{let{x:c,y:d}=r.dimensions;return k(b({},Cr.placeCropMask(c/d,i)),{ratio:null,dimensions:l})}}return null}setCropDefaults(t=!1){let i=this.editor.outputContainer.getResolution();this.setDefaultImageSize(i);let r=this.editor.getPreviewSize(),{position:o}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(r),this.setDefaultCropPosition({x:o.x-r.width/2,y:o.y-r.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),t||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}setDefaultImageSize(t){this.defaults.imageSize=b({},P(t)),this.lockResolution||(this.localOutputSize=b({},P(t)))}setMaxCropSize(t){this.defaults.maxCropMaskSize.height=t.height,this.defaults.maxCropMaskSize.width=t.width}setDefaultCropPosition(t){this.defaults.cropMaskPosition.x=t.x,this.defaults.cropMaskPosition.y=t.y}resetCrop(){this.state.cropState.clear(),this.transformStore.changeIdentifier("identity")}toggleCategorySelection(t){this.selectedCategory=this.selectedCategory===t?Qh:t}pureReset(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();let t=JSON.stringify(this.engineMediator.preview.container.getTransform()),i=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:t,output:i})}changePosition(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)}changePositionX(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)}changePositionY(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:t,height:i},r){if(this.transformStore.changeWidth(t),this.transformStore.changeHeight(i),!this.lockResolution){let{height:o,width:n}=this.defaults.maxCropMaskSize,{height:s,width:l}=this.defaults.imageSize,c=s/o*i,d=l/n*t;r&&(c=d/r),i>=this.minCropSize&&this.changeLocalOutputHeight(c),t>=this.minCropSize&&this.changeLocalOutputWidth(d)}}transformRender(t=!0){this.transformations.applyPreviewTransform(),t&&this.editor.render()}addSnapshot(){this.transformHistory.isEqual()||this.editor.addSnapshot({[m.TRANSFORM]:this.serializableState},_.EDIT,"Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){let{flipHorizontally:t,flipVertically:i}=this.rotateFlipState,{identifier:r,rotationInDegrees:o}=this,n=Oa(o),s=Pa(Aa(this.editor.engineMediator.output.container.getRotation())+o),{start:l,end:c}=this.convertUIToOperationOptions(n,s);return{flipHorizontally:t,flipVertically:i,rotation:n,start:l,end:c,identifier:r,outputRotation:s}}getStartEndForOperation(t){let{leftTop:i,rightBottom:r,maxCropMaskSize:o}=this,n=i.y,s=i.x,l=r.x,c=r.y;switch(t){case 270:return{leftTop:{x:o.height-c,y:s},rightBottom:{x:o.height-n,y:l}};case 180:return{leftTop:{x:o.width-l,y:o.height-c},rightBottom:{x:o.width-s,y:o.height-n}};case 90:return{leftTop:{x:n,y:o.width-l},rightBottom:{x:c,y:o.width-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:l,y:c}}}}getStartEndForUI(t,i,r){let{maxCropMaskSize:o}=this,n=i.y,s=i.x,l=r.x,c=r.y;switch(t){case 90:return{leftTop:{x:o.width-c,y:s},rightBottom:{x:o.width-n,y:l}};case 180:return{leftTop:{x:o.width-l,y:o.height-c},rightBottom:{x:o.width-s,y:o.height-n}};case 270:return{leftTop:{x:n,y:o.height-l},rightBottom:{x:c,y:o.height-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:l,y:c}}}}convertOperationOptionsToUI({start:t,end:i,rotation:r,outputRotation:o}){let n=o===90||o===270,s=n?v.fromSize(this.defaultImageSize).swapped:v.fromSize(this.defaultImageSize),l=Math.cos(r),c=Math.sin(r),d=this.calculateScale(r),h=new v(Math.min(t.x,i.x),Math.min(t.y,i.y)),g=new v(Math.max(t.x,i.x),Math.max(t.y,i.y)).subtract(h).divide(2),S=h.add(g).multiply(s).subtract(s.multiply(.5)),C=new v(S.x*l-S.y*c,S.x*c+S.y*l).multiply(d),E=s.multiply(.5).add(C).divide(s),R=E.subtract(g.multiply(d)),$=E.add(g.multiply(d)),V=n?v.fromSize(this.maxCropMaskSize).swapped:v.fromSize(this.maxCropMaskSize),nt=R.multiply(V),B=$.multiply(V),{leftTop:q,rightBottom:et}=this.getStartEndForUI(o,nt,B);return{start:new v(q),end:new v(et)}}convertUIToOperationOptions(t,i){let r=i===90||i===270,o=r?v.fromSize(this.defaultImageSize).swapped:v.fromSize(this.defaultImageSize),n=r?v.fromSize(this.maxCropMaskSize).swapped:v.fromSize(this.maxCropMaskSize),s=Math.cos(-t),l=Math.sin(-t),c=this.calculateScale(t,r),{leftTop:d,rightBottom:h}=this.getStartEndForOperation(i),f=new v(d).divide(n),x=new v(h).divide(n).subtract(f).divide(2),C=f.add(x).multiply(o).subtract(o.multiply(.5)),O=new v(C.x*s-C.y*l,C.x*l+C.y*s).divide(c),R=o.multiply(.5).add(O).divide(o),$=R.subtract(x.divide(c)),V=R.add(x.divide(c));return{start:$,end:V}}calculateScale(t,i=!1){let r=i?v.fromSize(this.defaultImageSize).swapped:v.fromSize(this.defaultImageSize),o=new v(Math.abs(r.x*Math.cos(t))+Math.abs(r.y*Math.sin(t)),Math.abs(r.x*Math.sin(t))+Math.abs(r.y*Math.cos(t))),n=r.subtract(o.clone()).divide(2).abs;return n.y>n.x?n.y*2/r.y+1:n.x*2/r.x+1}updateStateFromSerialization(t){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();let i=Math.round(Aa(t.rotation));if(this.transformStore.setRotation(i>180?i-360:i),this.transformations.rotateOutputContainer(Oa(Pa(t.outputRotation||Gd.Top))),t.identifier&&this.transformStore.changeIdentifier(t.identifier),t.start&&t.end){(t.end.x===0||t.end.y===0)&&(t.end.x=1,t.end.y=1);let{start:r,end:o}=this.convertOperationOptionsToUI({start:new v(t.start),end:new v(t.end),rotation:t.rotation,outputRotation:t.outputRotation});this.changePositionX(r.x),this.changePositionY(r.y);let n=o.x-r.x,s=o.y-r.y;this.transformStore.changeSize({width:n,height:s});let{maxCropMaskSize:l,imageSize:c}=this.defaults,d={height:s*c.height/l.height,width:n*c.width/l.width};this.changeLocalOutputSize(d)}t.flipHorizontally&&this.flipHorizontally(!1),t.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(t){this.defaultAngle=t}updateCanvasControls(t){let i=P(this.cropMaskPosition),r=P(this.cropMaskSize),o=P(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:o.height*r.height/t.height,width:o.width*r.width/t.width}),this.changePosition({y:o.height*i.y/t.height,x:o.width*i.x/t.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter(),this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(t){this.transformStore.setRotation(t),this.transformRender()}rotateOutputContainer(t,i=!0){return D(this,null,function*(){this.setDragMode(!0),this.transformations.rotateOutputContainer(t,i),yield this.editor.wait(),this.setDragMode(!1)})}applyInitialCrop(){let{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,!1)}clickableCanvas(t){this.editor.clickableCanvas(t)}proportionalSize(t,i,r=this.defaults.maxCropMaskSize,o=this.minCropSize){let n=i.height*t,{height:s}=i;return(n>r.width||n<o||s<o)&&(n=i.width,s=i.width/t),{width:Math.round(n),height:Math.round(s)}}checkAndAddSnapshot(t){let i=P(this.localOutputSize);(t.width!==i.width||t.height!==i.height)&&this.trackChanges()}updateInitialCropMaskPosition(t){let{cropMaskSize:i}=this,r=this.defaults.maxCropMaskSize;t?this.changePosition({x:0,y:Math.abs(r.height-i.height)/2}):this.changePosition({x:Math.abs(r.width-i.width)/2,y:0})}updatePreviewSizeWRTImageSize(){let t=P(this.localOutputSize),i=P(this.defaults.imageSize),r=P(this.defaults.maxCropMaskSize),o={height:r.height*t.height/i.height,width:r.width*t.width/i.width};this.transformStore.changeSize(o)}getScaleWithFlip(t=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(t)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){let{flipHorizontally:t,flipVertically:i,rotationInDegrees:r,outputRotation:o}=this.transformStore.state;return{flipHorizontally:t,flipVertically:i,rotation:Cr.inRadians(r),outputRotation:o}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[m.TRANSFORM]}get locale(){return this.editor.configStore.locale[m.TRANSFORM]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){let t=this.getRatio();return t==="*"||t===1?{width:this.minCropSize,height:this.minCropSize}:t>1?{width:this.minCropSize*t,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*t}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){let t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:t.ratio;let{x:i,y:r}=t.dimensions;return i/r}return"*"}},T=Cr;a([w],T.prototype,"selectedCategory",2),a([w],T.prototype,"defaults",2),a([w],T.prototype,"localOutputSize",2),a([p],T.prototype,"changeIdentifier",1),a([p],T.prototype,"setDragMode",1),a([p],T.prototype,"setCropDefaults",1),a([p],T.prototype,"setDefaultImageSize",1),a([p],T.prototype,"setMaxCropSize",1),a([p],T.prototype,"setDefaultCropPosition",1),a([p],T.prototype,"resetCrop",1),a([p],T.prototype,"toggleCategorySelection",1),a([p],T.prototype,"pureReset",1),a([p],T.prototype,"reset",2),a([p],T.prototype,"changePosition",1),a([p],T.prototype,"changePositionX",1),a([p],T.prototype,"changePositionY",1),a([p],T.prototype,"changeCropAndOutputSize",1),a([p],T.prototype,"onLeave",1),a([p],T.prototype,"onEnter",1),a([p],T.prototype,"changeLocalOutputSize",2),a([p],T.prototype,"changeDefaultScale",2),a([p],T.prototype,"changeLocalOutputHeight",2),a([p],T.prototype,"changeLocalOutputWidth",2),a([p],T.prototype,"changeLockResolution",2),a([p],T.prototype,"setRotation",1),a([p],T.prototype,"rotateClockwise",2),a([p],T.prototype,"rotateAntiClockwise",2),a([p],T.prototype,"rotateOutputContainer",1),a([p],T.prototype,"flipHorizontally",2),a([p],T.prototype,"flipVertically",2),a([p],T.prototype,"applyDefaultCrop",2),a([p],T.prototype,"applyInitialCrop",1),a([p],T.prototype,"updateCropMask",2),a([p],T.prototype,"clickableCanvas",1),a([p],T.prototype,"onLeftTop",2),a([p],T.prototype,"onLeftBottom",2),a([p],T.prototype,"onRightTop",2),a([p],T.prototype,"onRightBottom",2),a([p],T.prototype,"proportionalSize",1),a([p],T.prototype,"onPixelWidth",2),a([p],T.prototype,"onPixelHeight",2),a([p],T.prototype,"updateInitialCropMaskPosition",1),a([p],T.prototype,"updatePreviewSizeWRTImageSize",1),a([u],T.prototype,"cropState",1),a([u],T.prototype,"identifier",1),a([u],T.prototype,"ratio",1),a([u],T.prototype,"height",1),a([u],T.prototype,"width",1),a([u],T.prototype,"localOutputImageSize",1),a([u],T.prototype,"localOutputHeight",1),a([u],T.prototype,"localOutputWidth",1),a([u],T.prototype,"lockResolution",1),a([u],T.prototype,"forceDimensions",1),a([u],T.prototype,"rotationInDegrees",1),a([u],T.prototype,"outputRotation",1),a([u],T.prototype,"isDragMode",1),a([u],T.prototype,"rotateFlipState",1),a([u],T.prototype,"selectedCategoryIdentifier",1),a([u],T.prototype,"categories",1),a([u],T.prototype,"items",1),a([u],T.prototype,"config",1),a([u],T.prototype,"locale",1),a([u],T.prototype,"isOptionSelected",1),a([u],T.prototype,"leftTop",1),a([u],T.prototype,"leftBottom",1),a([u],T.prototype,"rightTop",1),a([u],T.prototype,"rightBottom",1),a([u],T.prototype,"isFlippedHorizontal",1),a([u],T.prototype,"isFlippedVertical",1),a([u],T.prototype,"leftTopRespectFlip",1),a([u],T.prototype,"leftBottomRespectFlip",1),a([u],T.prototype,"rightTopRespectFlip",1),a([u],T.prototype,"rightBottomRespectFlip",1),a([u],T.prototype,"cropMaskPosition",1),a([u],T.prototype,"cropMaskSize",1),a([u],T.prototype,"state",1),a([u],T.prototype,"defaultImageSize",1),a([u],T.prototype,"maxCropMaskSize",1),a([u],T.prototype,"minCropMaskSize",1),a([u],T.prototype,"defaultCropMaskPosition",1),a([u],T.prototype,"defaultScale",1);var ut=class{constructor(t){this.checkImageResize=()=>{this.engine.on(Bn.BEGAN_IMAGE_DOWNSCALING,()=>{this.modalStore.showInfoModal("resizing")}),this.engine.on(Bn.IMAGE_DOWNSCALED,({width:t,height:i})=>{let{maxMegaPixels:r}=this.configStore.config.engine.downscaleOptions,o=Nd.isMobile()?r.mobile:r.desktop;this.modalStore.hideModal(),this.modalStore.showActionModal({type:rt.WARNING,identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${o}`,width:`${t}`,height:`${i}`}})})};this.init=t=>{this.historyStore.isDirty()?this.modalStore.showActionModal({type:rt.WARNING,identifier:"discardChanges",handleConfirm:()=>{this.setImage(t),this.resetToolStates()},handleDismiss:()=>{this.setImage(t,!0)}}):(this.historyStore.reset(),this.setImage(t,!0).then(()=>{let{engine:r,displayCanvasRendererWarning:o}=this.configStore.config;r.preferredRenderer==="canvas"&&o&&this.modalStore.showActionModal({type:rt.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})})),this.libraryStore.fetchImages()};this.setImage=(t,i=!1)=>D(this,null,function*(){try{this.activeStore.setImageLoadedToEngine(!1),this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),yield this.activeStore.setImage(t),yield this.engineMediator.image.addImageToContainer(),this.canvasStore.resizeCanvas(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults();let{flipHorizontally:r,flipVertically:o,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:o,flipHorizontally:r}),yield this.transformToolStore.rotateOutputContainer(Xd(n),!1),i?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransforms(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),this.historyStore.addInitialSnapshot(),yield this.renderPromise(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"&&this.filterToolStore.setImageAndGetPreviews(),this.activeStore.tool?this.configStore.events.onImageLoaded():this.onReady(),this.modalStore.identifier!=="imageResized"&&this.modalStore.hideModal(),this.activeStore.setImageLoadedToEngine(!0),this.resize()}catch(r){this.configStore.events.onErrorImageLoading(r),this.modalStore.hideModal(),this.modalStore.showActionModal({type:rt.ERROR,identifier:r.identifier?r.identifier:"rendering",error:r,handleConfirm:()=>{window.location.reload()}})}});this.onToolChange=(t,i=null,r=!0)=>{t!==i&&this.engineMediator.preview.container&&([t,i].indexOf(m.TRANSFORM)!==-1?(t===m.TRANSFORM?(this.transformToolStore.onLeave(),this.transformToolStore.addSnapshot(),this.snappingStore.calculatePreviewTopLeftPosition()):i===m.TRANSFORM&&this.transformToolStore.onEnter(),this.resize(i)):(this.scale.resetOffset(),this.scale.resetPosition(),this.scale.setScaleToDefault(),this.scale.scaleRender(!0)),r&&this.render())};this.resize=(t=null)=>{try{let i=this.activeStore.tool,r=t===m.TRANSFORM||!t&&i===m.TRANSFORM;this.canvasStore.resizeCanvas(t),this.transformToolStore.applyDefaultCrop();let o=P(this.transformToolStore.maxCropMaskSize);r||this.transformToolStore.onEnter();let n=this.engineMediator.preview.container.getRotation();if(this.engineMediator.preview.updateTransform(n)){this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.transformToolStore.updateCanvasControls(o),this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls();let l=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(l),r||(this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()),this.snappingStore.calculatePreviewTopLeftPosition(),this.render()}}catch(i){this.configStore.events.onErrorImageLoading(i),this.modalStore.showActionModal({type:rt.ERROR,identifier:"rendering",handleConfirm:()=>{window.location.reload()}})}};this.export=(r={})=>{var o=r,{preventExportEvent:t}=o,i=Zt(o,["preventExportEvent"]);return new Promise((n,s)=>{this.modalStore.showInfoModal("exporting");let l=this.activeStore.tool===m.TRANSFORM;l&&this.transformToolStore.onLeave();let{config:c}=this.configStore,d=b(b({},c.export.image),i),{exportType:h,format:f,quality:g,enableDownload:x}=d;this.engineMediator.engine.export(h,f,g).then(S=>{x&&this.triggerFileDownload(c.export.filename,f,h,S),t||this.configStore.events.onExport(S),this.historyStore.isDirtySinceSave=!1,n(S)}).catch(S=>{s(S)}).finally(()=>{l&&(this.transformToolStore.onEnter(),this.render()),this.modalStore.hideModal()})})};this.serialize=({image:t}={image:!0})=>this.serializationMediator.serialize({image:t});this.deserialize=t=>this.serializationMediator.deserialize(t);this.close=()=>{this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning?this.modalStore.showActionModal({type:rt.WARNING,identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}}):this.configStore.events.onClose()};this.hasChanges=()=>this.historyStore.isDirtySinceSave;this.wait=(t=0)=>new Promise(i=>setTimeout(i,t));this.clickableCanvas=t=>D(this,null,function*(){t?(yield new Promise(i=>setTimeout(i,0)),this.canvasStore.enableCanvasClick()):this.canvasStore.disableCanvasClick()});this.onReady=()=>D(this,null,function*(){let{forceCrop:t}=this.configStore.config;if(this.activeStore.selectTool(this.configStore.defaultTool),t){let i=this.transformToolStore.localOutputImageSize,r=i.width/i.height,o=this.transformToolStore.entityManager.items.map(n=>n.ratio?n.ratio:n.dimensions.x/n.dimensions.y);o.indexOf("*")!==-1?console.error('ForceCrop will not work if "*" is one of the ratios'):o.indexOf(parseFloat(r.toFixed(2)))===-1&&this.activeStore.selectTool(m.TRANSFORM)}this.configStore.events.onEditorReady()});this.addSnapshot=(t,i,r)=>{this.historyStore.addSnapshot(t,i,r)};this.resetToolStates=()=>{this.transformToolStore.pureReset(),this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.historyStore.reset(),this.render()};this.getAssetPath=t=>this.assetProvider.getPathForCategory(t);this.render=()=>D(this,null,function*(){yield this.renderPromise()});this.applyFlipToPreview=t=>this.engineMediator.previewSpaceToFlippedPreviewSpace(t);this.getPreviewSize=()=>{let{width:t,height:i}=this.engine.getOutputDimensions();return t&&i?{width:Math.round(this.worldToPreview(this.outputToWorld(t))),height:Math.round(this.worldToPreview(this.outputToWorld(i)))}:{height:i,width:t}};this.triggerFileDownload=(t,i,r,o)=>{let n=i===ke.JPEG&&r!==nr.MSBLOB?".jpeg":".png",s=t+n,l=this.blobFromExportData(o);this.triggerBlobDownload(s,l)};this.triggerBlobDownload=(t,i)=>{if(navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{let r=document.createElement("a"),o=URL.createObjectURL(i);r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),Cd()||URL.revokeObjectURL(o)}};this.blobFromExportData=t=>typeof t=="string"?Mc(t):t instanceof HTMLImageElement?Mc(t.src):t;this.configStore=new Gt;let i=this.configStore.saveConfig(t);if(this.engineMediator=new Fc(this),this.serializationMediator=new pn(this),this.spriteStore=new M(this),this.scale=new St(this),this.filterToolStore=new gt(this),this.adjustmentsToolStore=new Z(this),this.focusToolStore=new j(this),this.overlayToolStore=new Ct(this),this.frameToolStore=new pt(this),this.brushToolStore=new ct(this),this.transformToolStore=new T(this),this.libraryStore=new Kt(this),this.modalStore=new ie(this),this.snappingStore=new Re(this),this.activeStore=new Xt(this),this.canvasStore=new Rt(this),this.historyStore=new xr(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(i),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){let r=this.configStore.config.engine;this.previewThumbnails=new fn(k(b({},r),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}this.engine.pesdk.on(Bn.WEBGL_CONTEXT_LOST,()=>{this.configStore.events.onErrorWebGLContextLost()})}static get defaultColors(){return Object.keys(Nt).map(t=>{let i=Nt[t];return{identifier:t,color:i,colorString:oi(i)}})}static get defaultBackgroundColors(){return Object.keys(bc).map(t=>{let i=bc[t];return{identifier:t,color:i,colorString:oi(i)}})}static get devicePixelRatio(){return Math.max(window.devicePixelRatio||1,1)}get shortestOutputSide(){let t=this.outputContainer.getBounds();return Math.min(t.width,t.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get orderHelper(){return this.engineMediator.orderHelper}renderPromise(){return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(t,i){return Ie(t)?this.engineMediator.previewSpaceToWorldSpace(t,i):this.engineMediator.previewSpaceToWorldSpace(t,i)}worldToPreview(t){return Ie(t)?this.engineMediator.worldSpaceToPreviewSpace(t):this.engineMediator.worldSpaceToPreviewSpace(t)}worldSizeToPreview(t){return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}}previewSizeToWorld(t,i){return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,i),height:this.engineMediator.previewSpaceToWorldSpace(t.height,i)}}outputToWorld(t){return Ie(t)?this.engineMediator.outputSpaceToWorldSpace(t):this.engineMediator.outputSpaceToWorldSpace(t)}previewToOutput(t){return Ie(t)?this.engineMediator.previewSpaceToOutputSpace(t):this.engineMediator.previewSpaceToOutputSpace(t)}get outputContainer(){return this.engineMediator.output.container}};a([p],ut.prototype,"resize",2),a([p],ut.prototype,"export",2),a([p],ut.prototype,"clickableCanvas",2);function bn(e,t){let i=e.width/e.height,r=t.width/t.height;return i>r?e.height/t.height:e.width/t.width}var Rx={transform:Ge.IDENTITY},li=class{constructor(t){this.initialTransform=Ge.IDENTITY;this.editor=t,this.state=w(Rx)}createPreview(t){this.container=this.editor.engine.createPreview(t)}updateTransform(t=0,i=!0){let r=this.calculateTransform(t);return r.scale.x?(i?this.saveInitialTransform(r):this.savePreviewTransform(r),this.container.setTransform(this.state.transform),!0):!1}saveInitialTransform(t){this.initialTransform=t,this.savePreviewTransform(t)}savePreviewTransform(t){xt(()=>{this.state.transform.position=t.position,this.state.transform.scale=t.scale,this.state.transform.rotation=t.rotation;let i=ut.devicePixelRatio,r=new v(t.scale).divide(i);this.previewTransformWithoutDpr={position:new v(t.position).divide(i),scale:r,rotation:t.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(t=0){let i=ut.devicePixelRatio,{scaleImageToFit:r}=this.editor.configStore.config,{width:o,height:n}=this.editor.canvasStore.canvasSize,s=this.editor.engine.getOutputDimensions(),l=bn({width:o,height:n},s),c=r?l:Math.min(1,l),d=n-s.height*c,h=this.editor.configStore.measurements.mainCanvasActionBar.height*2;d<h&&(c=bn({width:o,height:n-h},s));let f=.95;s.height*c>n*f&&(c=bn({width:o,height:n*f},s)),s.width*c>o*f&&(c=bn({width:o*f,height:n},s)),c*=i;let g={x:o*i/2,y:n*i/2},x={x:c,y:c};return new Ge(g,x,t)}};a([p],li.prototype,"updateTransform",1),a([p],li.prototype,"savePreviewTransform",1),a([u],li.prototype,"transform",1),a([u],li.prototype,"position",1),a([u],li.prototype,"scale",1),a([u],li.prototype,"rotation",1);var Di=class{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(t){if([m.STICKER,m.TEXT,m.TEXT_DESIGN,m.BRUSH,m.FRAME].indexOf(t)!==-1)throw new Error("addIndex is used for non sprites, for sprites use addSprite")}static remove(t,i){let r=i.findIndex(o=>o===t);r!==-1&&i.splice(r,1)}static indexForOrder(t,i,r){let o=t[r],n=i.findIndex(l=>l===r);if(n!==-1)return{index:n,order:i};let{length:s}=i;if(s){let l;for(l=0;l<s;l+=1){let c=i[l],d=t[c];if(o<d)return i=[...i.slice(0,l),r,...i.slice(l)],{index:l,order:i}}}return i.push(r),{index:i.length-1,order:i}}addIndex(t){Di.checkTool(t);let{index:i,order:r}=Di.indexForOrder(Di.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t);return this.imageContainerOrder=r,i}removeIndex(t){Di.checkTool(t),Di.remove(t,this.imageContainerOrder)}addSprite(t){return this.spriteContainerOrder.push(t),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(t){Di.remove(t,this.spriteContainerOrder)}renameSprite(t,i){let r=this.spriteContainerOrder.findIndex(o=>o===t);r!==-1&&(this.spriteContainerOrder[r]=i)}bringToFront(t){let i=this.spriteContainerOrder.findIndex(r=>r===t);return i!==-1&&(this.spriteContainerOrder.splice(i,1),this.spriteContainerOrder.push(t)),this.getLastSpriteIndex()}getLastSpriteId(){let{length:t}=this.spriteContainerOrder;return this.spriteContainerOrder[t-1]}getSpriteIndex(t){return this.spriteContainerOrder.findIndex(r=>r===t)+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}},ia=Di;ia.IMAGE_CONTAINER_INDEX={[m.ART_FILTER]:0,[m.FILTER]:1,[m.ADJUSTMENT]:2,[m.FOCUS]:3,[m.OVERLAY]:4};var Fc=class{constructor(t){this.orderHelper=new ia;let i=t.configStore.config.engine;this.engine=new _n(k(b({},i),{license:t.configStore.config.license,assetProvider:t.configStore.assetProvider})),this.image=new wc(t),this.output=new kc(t),this.preview=new li(t),this.editor=t}render(t){return this.engine.render(t)}previewSpaceToWorldSpace(t,i){let r=this.preview.previewTransformWithoutDpr;if(Ie(t)){let o=this.editor.engine.convertPointFromPreviewIntoWorldSpace(v.ZERO,r,i),n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},r,i);return v.distance(new v(o),new v(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,r,i)}worldSpaceToPreviewSpace(t){let i=this.preview.previewTransformWithoutDpr;if(Ie(t)){let r=this.editor.engine.convertPointFromWorldIntoPreviewSpace(v.ZERO,i),o=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},i);return v.distance(new v(r),new v(o))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,i)}outputSpaceToWorldSpace(t){return Ie(t)?_a.getScalarInWorldSpace(t,this.editor.engine.getOutputContainer()):_a.getPointInWorldSpace(t,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(t){let i=this.preview.previewTransformWithoutDpr;if(Ie(t)){let r=this.editor.engine.convertPointFromPreviewIntoOutputSpace(v.ZERO,i),o=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},i);return v.distance(new v(r),new v(o))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,i)}previewSpaceToFlippedPreviewSpace(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)}};var tf=[[0,0],[0,1],[1,0],[1,1]],Hx=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],He=class{constructor(t,i,r="center",o=!0,n=!1){this.considerRotation=!0;this.considerFlip=!0;this.store=i,this.m=r==="center"?He.movePivotTo([.5,.5]):tf,this.considerRotation=o,this.considerFlip=n,this.configStore=t.configStore}static getFlippedEdgeIndex(t,i,r){return Hx[(i?1:0)+(r?2:0)][t]}static movePivotTo(t){return tf.map(i=>[i[0]-t[0],i[1]-t[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:!1}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:!1}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(t,i,r){let o=He.getFlippedEdgeIndex(t,i,r),n=this.m[o][0]*this.size.width,s=this.m[o][1]*this.size.height;return{width:n,height:s}}get leftTop(){let{position:t,flipHorizontally:i,flipVertically:r}=this,o=this.handleOrigin(0,i,r);return He.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottom(){let{position:t,flipHorizontally:i,flipVertically:r}=this,o=this.handleOrigin(1,i,r);return He.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightTop(){let{position:t,flipHorizontally:i,flipVertically:r}=this,o=this.handleOrigin(2,i,r);return He.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottom(){let{position:t,flipHorizontally:i,flipVertically:r}=this,o=this.handleOrigin(3,i,r);return He.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottomHandle(){let{position:t,flipHorizontally:i,flipVertically:r}=this,o=this.handleOrigin(1,i,r);return o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,He.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottomHandle(){let{position:t,flipHorizontally:i,flipVertically:r}=this,o=this.handleOrigin(3,i,r);return o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,He.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftMid(){let t=new v(this.leftTop),i=new v(this.leftBottom);return t.add(i).divide(2)}get rightMid(){let t=new v(this.rightTop),i=new v(this.rightBottom);return t.add(i).divide(2)}},ft=He;ft.coordinatesWithRotation=({width:t,height:i},r,o,n,s,l)=>{let c=t*Math.cos(r)-i*Math.sin(r)+l.x,d=t*Math.sin(r)+i*Math.cos(r)+l.y;return o&&(c=s.x*2-c),n&&(d=s.y*2-d),new v({x:c,y:d}).rounded},a([u],ft.prototype,"position",1),a([u],ft.prototype,"size",1),a([u],ft.prototype,"rotation",1),a([u],ft.prototype,"flipHorizontally",1),a([u],ft.prototype,"flipVertically",1),a([u],ft.prototype,"flipCenter",1),a([u],ft.prototype,"leftTop",1),a([u],ft.prototype,"leftBottom",1),a([u],ft.prototype,"rightTop",1),a([u],ft.prototype,"rightBottom",1),a([u],ft.prototype,"leftBottomHandle",1),a([u],ft.prototype,"rightBottomHandle",1),a([u],ft.prototype,"leftMid",1),a([u],ft.prototype,"rightMid",1);var yo=(e,t=0,i=3)=>{let r=Math.tan(t),o=Math.sqrt(r**2+1);return{x:e.x+i/o,y:e.y+i*r/o}};var ra={blurRadius:40,gradientSize:.2},Nx=b({start:{x:0,y:0},end:{x:0,y:0}},ra),$x=b({center:{x:0,y:0},radius:0},ra),Vx=b({origin:{x:0,y:0},rotation:0,size:0},ra),Wx=ra,wr={identifier:"identity",linear:Nx,radial:$x,mirrored:Vx,gaussian:Wx};var Lt=class{constructor(t){this.selectFocus=(t,i)=>{xt(()=>{this.state.identifier=t,i&&(this.state[t].blurRadius=i)})};this.changeBlurRadius=(t,i)=>{t!=="identity"&&(this.state[t].blurRadius=i)};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=wr.identifier,this.state.identifier!=="identity"&&(this.state[this.state.identifier].blurRadius=wr[this.state.identifier].blurRadius))};this.setLinear=({start:t,end:i})=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y,this.state.linear.end.x=i.x,this.state.linear.end.y=i.y};this.setLinearStart=t=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y};this.setLinearEnd=t=>{this.state.linear.end.x=t.x,this.state.linear.end.y=t.y};this.setRadialCenter=t=>{this.state.radial.center.x=t.x,this.state.radial.center.y=t.y};this.setRadialRadius=t=>{this.state.radial.radius=t};this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x,this.state.mirrored.origin.y=t.y};this.setMirroredRotation=t=>{this.state.mirrored.rotation=t};this.setMirroredSize=t=>{this.state.mirrored.size=t};this.getEffectProperties=()=>this.effect?this.effect.getProperties():null;this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=t=>{let i=this.getEffectProperties();if(i&&t!=="identity")switch(t){case Q.LINEAR:this.updateLinearState(i);break;case Q.RADIAL:this.updateRadialState(i);break;case Q.MIRRORED:this.updateMirroredState(i);break;default:break}};this.updateGaussianState=t=>{this.changeBlurRadius(Q.GAUSSIAN,t.blurRadius)};this.updateMirroredState=t=>{let i=this.editor.worldToPreview(t.mirrorAxisOrigin),o=new v(this.editor.worldToPreview(t.mirrorAxisDirection)).subtract(i),n=Math.atan2(o.y,o.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.setMirroredRotation(n),this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.changeBlurRadius(Q.MIRRORED,t.blurRadius)};this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center)),this.setRadialRadius(this.editor.worldToPreview(t.radius)),this.changeBlurRadius(Q.RADIAL,t.blurRadius)};this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start)),this.setLinearEnd(this.editor.worldToPreview(t.end)),this.changeBlurRadius(Q.LINEAR,t.blurRadius)};this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null;this.removeFocus=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(m.FOCUS))};this.editor=t,this.engineMediator=this.editor.engineMediator,this.state=wr}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get order(){return this.engineMediator.orderHelper.addIndex(m.FOCUS)}get imageContainer(){return this.engineMediator.image.container}};a([w],Lt.prototype,"state",2),a([p],Lt.prototype,"selectFocus",2),a([p],Lt.prototype,"changeBlurRadius",2),a([p],Lt.prototype,"reset",2),a([p],Lt.prototype,"setLinear",2),a([p],Lt.prototype,"setLinearStart",2),a([p],Lt.prototype,"setLinearEnd",2),a([p],Lt.prototype,"setRadialCenter",2),a([p],Lt.prototype,"setRadialRadius",2),a([p],Lt.prototype,"setMirroredOrigin",2),a([p],Lt.prototype,"setMirroredRotation",2),a([p],Lt.prototype,"setMirroredSize",2),a([p],Lt.prototype,"updateFromEngineState",2);var kr=class{constructor(t){this.selectFocus=t=>{if(t!==this.identifier){this.focusStore.removeFocus();let i=this.maxIntensity*.2,{width:r}=this.editor.engine.getOutputContainer().getBounds(),o=this.editor.shortestOutputSide*.2;switch(t){case Q.LINEAR:let n=this.editor.outputToWorld({x:-r/2,y:0}),s=this.editor.outputToWorld({x:r/2,y:0});this.setLinearFocus({start:n,end:s,blurRadius:i});break;case Q.RADIAL:let l=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:l,radius:o,blurRadius:i});break;case Q.MIRRORED:let c=this.editor.outputToWorld({x:0,y:0}),d=o,h=this.editor.outputToWorld(yo({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:c,clearAreaWidth:d,blurRadius:i,mirrorAxisDirection:h});break;case Q.GAUSSIAN:this.setGaussianFocus({blurRadius:i});break;default:break}this.focusStore.selectFocus(t,i),this.editor.render(),this.addSnapshot(_.ADD,m.FOCUS)}};this.changeIntensity=t=>{let i=this.focusStore.setEffectProperties({blurRadius:t});i&&(this.focusStore.changeBlurRadius(this.identifier,i.blurRadius),this.editor.render())};this.changeRelativeIntensity=t=>{let i=(this.maxIntensity-kr.minIntensity)*t/100+kr.minIntensity,r=this.focusStore.setEffectProperties({blurRadius:i});r&&(this.focusStore.changeBlurRadius(this.identifier,r.blurRadius),this.editor.render())};this.toolSnapshot=t=>{this.addSnapshot(_.EDIT,t)};this.addSnapshot=(t,i)=>{this.editor.addSnapshot(void 0,t,i)};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.pureReset=()=>{this.focusStore.removeFocus(),this.focusStore.reset()};this.reset=()=>{this.pureReset(),this.editor.render(),this.addSnapshot(_.DELETE,this.locale.controls.buttonReset)};this.setStart=t=>{let i=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});i&&(this.focusStore.setLinearStart(this.editor.worldToPreview(i.start)),this.editor.render())};this.setEnd=t=>{let i=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});i&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(i.end)),this.editor.render())};this.setCenter=t=>{let i=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});i&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(i.center)),this.editor.render())};this.setRadius=t=>{let i=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});i&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(i.radius)),this.editor.render())};this.setOrigin=t=>{let i=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(yo(t,this.rotation))});i&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(i.mirrorAxisOrigin)),this.editor.render())};this.setSize=t=>{let i=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});i&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(i.clearAreaWidth)),this.editor.render())};this.setRotation=t=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(yo(this.origin,t))}),this.focusStore.setMirroredRotation(t),this.editor.render()};this.updateStateFromHistory=(t,i)=>{this.focusStore.removeFocus();let{magnitude:r}=i;xt(()=>{switch(this.focusStore.selectFocus(t.identifier),t.identifier){case Q.LINEAR:this.setLinearFocus({start:this.editor.previewToWorld(new v(t.linear.start).multiply(i)),end:this.editor.previewToWorld(new v(t.linear.end).multiply(i)),blurRadius:t.linear.blurRadius});break;case Q.GAUSSIAN:this.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case Q.RADIAL:this.setRadialFocus({center:this.editor.previewToWorld(new v(t.radial.center).multiply(i)),radius:this.editor.previewToWorld(t.radial.radius*r),blurRadius:t.radial.blurRadius});break;case Q.MIRRORED:{let o=new v(t.mirrored.origin).multiply(i);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(o),mirrorAxisDirection:this.editor.previewToWorld(yo(o,t.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(t.mirrored.size*r),blurRadius:t.mirrored.blurRadius});break}case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=t=>D(this,null,function*(){if(kr.doesFocusIdentifierExist(t.identifier))this.focusStore.removeFocus(),xt(()=>{switch(this.focusStore.selectFocus(t.identifier),t.identifier){case Q.LINEAR:this.setLinearFocus(t.linear);break;case Q.GAUSSIAN:this.setGaussianFocus(t.gaussian);break;case Q.RADIAL:this.setRadialFocus(t.radial);break;case Q.MIRRORED:this.setMirroredFocus({mirrorAxisOrigin:t.mirrored.origin,clearAreaWidth:t.mirrored.size,blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:yo(t.mirrored.origin,t.mirrored.rotation)});break;default:break}});else throw new Error(`Focus identifier ${t.identifier} doesn't exist`)});this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{let t=this.editor.canvasStore.sizeVector,{linear:i}=this.focusStore.state,{radial:r}=this.focusStore.state,{mirrored:o}=this.focusStore.state,n=t,{magnitude:s}=n;return k(b({},this.focusStore.state),{linear:k(b({},i),{start:new v(i.start).divide(n),end:new v(i.end).divide(n)}),radial:k(b({},r),{center:new v(r.center).divide(n),radius:r.radius/s}),mirrored:k(b({},o),{origin:new v(o.origin).divide(n),size:o.size/s}),gaussian:b({},this.focusStore.state.gaussian)})};this.editor=t,this.focusStore=new Lt(this.editor);let i=this.editor.assetProvider.getAssets("focus");this.entityManager=new mt(i,k(b({},this.config),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}static get minIntensity(){return 0}static doesFocusIdentifierExist(t){return Object.keys(Q).map(i=>Q[i]).findIndex(i=>i===t)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case Q.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case Q.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case Q.MIRRORED:let t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:P(this.state.mirrored.rotation),size:t.clearAreaWidth}};case Q.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return wr}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){let t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){let t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){let{flipHorizontally:t,flipVertically:i}=this.editor.outputContainer.getData();return Lo({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:i})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){let{width:t,height:i}=this.editor.canvasStore.canvasSize;return Math.sqrt(t**2+i**2)*2}get identifier(){return this.state.identifier}get intensity(){return this.identifier==="identity"?wr.gaussian.blurRadius:this.state[this.identifier].blurRadius}get relativeIntensity(){let{blurRadius:t}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(t-kr.minIntensity)*100/(this.maxIntensity-kr.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[m.FOCUS]}get locale(){return this.editor.configStore.locale[m.FOCUS]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:t}){this.focusStore.setGaussianFocus({blurRadius:t})}setLinearFocus({start:t,end:i,blurRadius:r}){this.focusStore.setLinearFocus({start:t,end:i,blurRadius:r})}setRadialFocus({center:t,radius:i,blurRadius:r}){this.focusStore.setRadialFocus({center:t,radius:i,blurRadius:r})}setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:i,blurRadius:r,mirrorAxisDirection:o}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:i,blurRadius:r,mirrorAxisDirection:o})}},j=kr;a([p],j.prototype,"selectFocus",2),a([p],j.prototype,"changeIntensity",2),a([p],j.prototype,"changeRelativeIntensity",2),a([p],j.prototype,"clickableCanvas",2),a([p],j.prototype,"pureReset",2),a([p],j.prototype,"reset",2),a([p],j.prototype,"setStart",2),a([p],j.prototype,"setEnd",2),a([p],j.prototype,"setCenter",2),a([p],j.prototype,"setRadius",2),a([p],j.prototype,"setOrigin",2),a([p],j.prototype,"setSize",2),a([p],j.prototype,"setRotation",2),a([p],j.prototype,"updateStateFromHistory",2),a([p],j.prototype,"updateStateFromSerialization",2),a([p],j.prototype,"updateCanvasControls",2),a([u],j.prototype,"state",1),a([u],j.prototype,"start",1),a([u],j.prototype,"startOnPreview",1),a([u],j.prototype,"end",1),a([u],j.prototype,"endOnPreview",1),a([u],j.prototype,"center",1),a([u],j.prototype,"radius",1),a([u],j.prototype,"origin",1),a([u],j.prototype,"rotation",1),a([u],j.prototype,"rotationOnPreview",1),a([u],j.prototype,"size",1),a([u],j.prototype,"mirroredAreaWidth",1),a([u],j.prototype,"identifier",1),a([u],j.prototype,"intensity",1),a([u],j.prototype,"relativeIntensity",1),a([u],j.prototype,"maxIntensity",1),a([u],j.prototype,"isOptionSelected",1),a([u],j.prototype,"config",1),a([u],j.prototype,"locale",1),a([u],j.prototype,"items",1);import{useContext as Ux}from"react";function bt(){return Ux(tn)}import jx from"styled-components";var Rc=jx.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
`;import Gx,{css as ef}from"styled-components";var rf=Gx.div.attrs(()=>({"data-test":I.MainCanvasActionBar}))`
  &&& {
    display: ${e=>e.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${e=>e.theme.measurements.mainCanvasActionBar.height}px;
    color: ${e=>e.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${e=>e.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${e=>e.theme.measurements.zIndex.canvas.bar};
    background: ${e=>e.transparentBackgound?"transparent":e.theme.mainCanvasActionBar.background};
    ${e=>e.bottom?ef`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:ef`
            justify-content: space-between;
          `}
  }
`;import Xx from"styled-components";var of=Xx.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import Kx from"styled-components";var nf=Kx.div.attrs({role:"main"})`
  background-color: ${e=>e.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${e=>e.theme.measurements.canvas.marginTop}px;
`;import Yx from"styled-components";var sf=Yx.div.attrs(({height:e,width:t})=>({style:{height:`${e}px`,width:`${t}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${e=>e.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`;import qx from"styled-components";var af=qx.div.attrs(({radius:e})=>({style:{height:`${e*2}px`,width:`${e*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${e=>e.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`;import Jx from"styled-components";var lf=Jx.div`
  position: relative;
  height: inherit;
  width: inherit;
`;import cf,{css as vt}from"styled-components";var Zx=cf.div(e=>{let{desktop:t,mobile:i}=e.theme.measurements.canvasControls.corner.touchable,r=t/4,o=i/2;return vt`
    position: absolute;
    width: ${t}px;
    height: ${t}px;
    ${n=>n.vertical==="top"?vt`
            top: 0px;
          `:vt`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?vt`
            left: 0px;
          `:vt`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?vt`
            margin-top: -${r}px;
          `:vt`
            margin-bottom: -${r}px;
          `}
  ${n=>n.horizontal==="left"?vt`
            margin-left: -${r}px;
          `:vt`
            margin-right: -${r}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${i}px;
      height: ${i}px;
      ${n=>n.vertical==="top"?vt`
              margin-top: -${o}px;
            `:vt`
              margin-bottom: -${o}px;
            `}
      ${n=>n.horizontal==="left"?vt`
              margin-left: -${o}px;
            `:vt`
              margin-right: -${o}px;
            `}
    }
  `}),oa=cf(Zx)(e=>{let t=e.horizontal==="right"?e.borderWidth:0,i=e.vertical==="bottom"?e.borderWidth:0,r=e.horizontal==="left"?e.borderWidth:0,n=`${e.vertical==="top"?e.borderWidth:0}px ${t}px ${i}px ${r}px`,s=e.horizontal==="left"&&e.vertical==="bottom"||e.horizontal==="right"&&e.vertical==="top"?"nesw-resize":"nwse-resize",l=e.theme.measurements.canvasControls.corner.touchable.desktop/4-e.borderWidth,c=e.theme.measurements.canvasControls.corner.touchable.mobile/4+e.borderWidth;return vt`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${d=>d.theme.measurements.canvasControls.corner.size}px;
      height: ${d=>d.theme.measurements.canvasControls.corner.size}px;
      z-index: ${d=>d.theme.measurements.zIndex.canvas.controls};
      border-color: ${d=>d.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${e.vertical==="top"?vt`
            top: ${l}px;
          `:vt`
            bottom: ${l}px;
          `}
      ${e.horizontal==="left"?vt`
            left: ${l}px;
          `:vt`
            right: ${l}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${e.vertical==="top"?vt`
              margin-top: ${c}px;
            `:vt`
              margin-bottom: ${c}px;
            `}
        ${e.horizontal==="left"?vt`
              margin-left: ${c}px;
            `:vt`
              margin-right: ${c}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `});import Qx from"styled-components";var df=Qx.div.attrs(()=>({"data-test":I.Knob}))`
  position: absolute;
  height: ${e=>e.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${e=>e.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${e=>e.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${e=>e.theme.measurements.canvasControls.knob.size}px;
    height: ${e=>e.theme.measurements.canvasControls.knob.size}px;
    top: ${e=>e.theme.measurements.canvasControls.knob.size/4}px;
    left: ${e=>e.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`;import tS from"styled-components";var uf=tS.div`
  position: absolute;
  color: ${e=>e.theme.canvas.controlsOutline};
`;import eS from"styled-components";var pf=eS.div.attrs(e=>({style:{left:`${e.x}px`}}))`
  position: absolute;
  bottom: -${e=>e.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${e=>e.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${e=>e.theme.canvas.controlsOutline};
`;import iS from"styled-components";var hf=iS.div.attrs(({height:e,width:t,theme:i})=>({style:{height:`${e+i.measurements.canvasControls.sprite.controlPadding}px`,width:`${t+i.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${e=>e.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${e=>e.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${e=>e.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`;import rS from"styled-components";var ff=rS.div.attrs(()=>({"data-test":I.TextWidth}))`
  position: absolute;
  height: ${e=>e.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.controls};
  background: ${e=>e.theme.canvas.controlsColor};
  cursor: pointer;
`;import oS from"styled-components";var mf=oS.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${e=>e.height}px;
  width: ${e=>e.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`;import na,{css as gf}from"styled-components";var sa=Sd()?gf`
      transition: unset;
    `:gf`
      transition: all 0.4s ease-in-out;
    `,bf=na.div`
  position: absolute;
  background: ${e=>e.theme.canvas.cropBackdrop};
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.backdrop};
  ${sa}
`,vf=na.div.attrs({"data-test":I.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${e=>e.theme.canvas.controlsOutline};
  cursor: move;
  ${sa}
`,yf=na.div`
  position: absolute;
  background: ${e=>e.theme.canvas.controlsOutline};
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.grid};
  ${sa}
`,Tr=na(oa)`
  z-index: ${e=>e.theme.measurements.zIndex.canvas.controls};
  ${sa};
`;import nS from"styled-components";var xf=nS.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import sS from"styled-components";var Sf=sS.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;import aS from"styled-components";var Cf=aS.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${e=>e.theme.webcam.background};
`;var z={Index:of,Area:Rc,Bar:{Index:rf,ButtonGroup:Fh},Button:{TextSecondary:Bh,Float:Nh},Container:nf,Element:xf,Wrapper:Cf,Webcam:Sf,Controls:{Knob:df,Circle:af,Corner:oa,Line:uf,Area:sf,Sprite:hf,RotateHandle:pf,Container:lf,Wrapper:mf,SpriteActionsWrapper:pc,SpriteActionButton:Ks,Width:ff},Crop:{Mask:vf,GridLine:yf,Backdrop:bf,Control:Tr}};var wf=class{constructor(t={},i={}){this.getAdvancedCategoryCard=()=>this.components.advancedUICategoryCard;this.getAdvancedItemCard=()=>this.components.advancedUIItemCard;this.getAdvancedToolbarItem=()=>this.components.advancedUIToolbarItem;this.getDialog=()=>this.components.dialog;this.getButton=t=>this.components.buttons[t];this.getColorItem=()=>this.components.colorItem;this.getCheckbox=()=>this.components.checkbox;let r={dialog:F.Dialog,colorItem:F.ColorItem,checkbox:F.Input.Checkbox,buttons:{mainCanvasActionUndo:z.Button.TextSecondary,mainCanvasActionRedo:z.Button.TextSecondary,mainCanvasActionExport:fl,mainCanvasActionClose:io,canvasActionEdit:z.Controls.SpriteActionButton,canvasActionBringToFront:z.Controls.SpriteActionButton,canvasActionDuplicate:z.Controls.SpriteActionButton,canvasActionDelete:z.Controls.SpriteActionButton,canvasActionInvert:z.Controls.SpriteActionButton,canvasActionFlip:z.Controls.SpriteActionButton,transformActionFlipHorizontal:pr,transformActionFlipVertical:pr,transformActionRotateClockwise:pr,transformActionRotateAntiClockwise:pr,textAlignment:pr,toolControlBarPrimaryButton:hl,toolControlBarSecondaryButton:io}};this.components=ee([r,i,t])}};import ne from"react";import SC from"styled-components";import Oi from"react";var lS=()=>Oi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Oi.createElement("defs",null,Oi.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),Oi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Oi.createElement("path",{d:"M0 0H48V48H0z"}),Oi.createElement("mask",{fill:"currentColor"},Oi.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),Oi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"}))),kf=lS;import Er from"react";var cS=()=>Er.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Er.createElement("defs",null,Er.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Er.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Er.createElement("mask",null,Er.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),Er.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"}))),Tf=cS;import Ai from"react";var dS=()=>Ai.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ai.createElement("defs",null,Ai.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),Ai.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ai.createElement("path",{d:"M0 0H48V48H0z"}),Ai.createElement("mask",{fill:"currentColor"},Ai.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),Ai.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"}))),Ef=dS;import Pi from"react";var uS=()=>Pi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Pi.createElement("defs",null,Pi.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),Pi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Pi.createElement("path",{d:"M0 0H48V48H0z"}),Pi.createElement("mask",{fill:"currentColor"},Pi.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),Pi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"}))),If=uS;import zi from"react";var pS=()=>zi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},zi.createElement("defs",null,zi.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),zi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},zi.createElement("path",{d:"M0 0H48V48H0z"}),zi.createElement("mask",{fill:"currentColor"},zi.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),zi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"}))),Mf=pS;import Li from"react";var hS=()=>Li.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Li.createElement("defs",null,Li.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Li.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Li.createElement("path",{d:"M0 0H48V48H0z"}),Li.createElement("mask",{fill:"#fff"},Li.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),Li.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"}))),Df=hS;import Bi from"react";var fS=()=>Bi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Bi.createElement("defs",null,Bi.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),Bi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Bi.createElement("path",{d:"M0 0H48V48H0z"}),Bi.createElement("mask",{fill:"currentColor"},Bi.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),Bi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"}))),Of=fS;import _i from"react";var mS=()=>_i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},_i.createElement("defs",null,_i.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),_i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_i.createElement("path",{d:"M0 0H48V48H0z"}),_i.createElement("mask",{fill:"currentColor"},_i.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),_i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"}))),Af=mS;import Fi from"react";var gS=()=>Fi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Fi.createElement("defs",null,Fi.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),Fi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fi.createElement("path",{d:"M0 0H48V48H0z"}),Fi.createElement("mask",{fill:"currentColor"},Fi.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),Fi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"}))),Pf=gS;import Ri from"react";var bS=()=>Ri.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ri.createElement("defs",null,Ri.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),Ri.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ri.createElement("path",{d:"M0 0H48V48H0z"}),Ri.createElement("mask",{fill:"currentColor"},Ri.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),Ri.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"}))),zf=bS;import Hi from"react";var vS=()=>Hi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Hi.createElement("defs",null,Hi.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),Hi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Hi.createElement("path",{d:"M0 0H48V48H0z"}),Hi.createElement("mask",{fill:"currentColor"},Hi.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),Hi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"}))),Lf=vS;import Ni from"react";var yS=()=>Ni.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ni.createElement("defs",null,Ni.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),Ni.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ni.createElement("path",{d:"M0 0H48V48H0z"}),Ni.createElement("mask",{fill:"currentColor"},Ni.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),Ni.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"}))),Bf=yS;import Ir from"react";var xS=()=>Ir.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ir.createElement("defs",null,Ir.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Ir.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ir.createElement("mask",{fill:"currentColor"},Ir.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Ir.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"}))),_f=xS;import Mr from"react";function SS(){return Mr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Mr.createElement("defs",null,Mr.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Mr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Mr.createElement("mask",{fill:"#fff"},Mr.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Mr.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var Ff=SS;import Dr from"react";var CS=()=>Dr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Dr.createElement("defs",null,Dr.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Dr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Dr.createElement("mask",{fill:"currentColor"},Dr.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),Dr.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"}))),Rf=CS;import Or from"react";var wS=()=>Or.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Or.createElement("defs",null,Or.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Or.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Or.createElement("mask",{fill:"currentColor"},Or.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),Or.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"}))),Hf=wS;import Ar from"react";function kS(){return Ar.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Ar.createElement("defs",null,Ar.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Ar.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ar.createElement("mask",{fill:"#fff"},Ar.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Ar.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var Nf=kS;import Pr from"react";var TS=()=>Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},Pr.createElement("defs",null,Pr.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Pr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Pr.createElement("mask",{fill:"#fff"},Pr.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),Pr.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"}))),$f=TS;import $i from"react";function ES(){return $i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},$i.createElement("defs",null,$i.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),$i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$i.createElement("path",{d:"M0 0H48V48H0z"}),$i.createElement("mask",{fill:"#fff"},$i.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),$i.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var Vf=ES;import Bt from"react";var IS=()=>Bt.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Bt.createElement("g",{fill:"none",fillRule:"evenodd"},Bt.createElement("g",null,Bt.createElement("g",{fill:"#D8D8D8",opacity:"0"},Bt.createElement("rect",{width:"48",height:"48"})),Bt.createElement("g",{transform:"translate(12 12)"},Bt.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),Bt.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},Bt.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),Bt.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),Bt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),Bt.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},Bt.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),Bt.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},Bt.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),Bt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})))))),Wf=IS;import zr from"react";function MS(){return zr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},zr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},zr.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),zr.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),zr.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),zr.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),zr.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var Uf=MS;import Ne from"react";var DS=()=>Ne.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Ne.createElement("g",{fill:"none",fillRule:"evenodd"},Ne.createElement("g",null,Ne.createElement("g",{fill:"#D8D8D8",opacity:"0"},Ne.createElement("rect",{width:"48",height:"48"})),Ne.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},Ne.createElement("g",null,Ne.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),Ne.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),Ne.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"})))))),jf=DS;import xe from"react";var OS=()=>xe.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},xe.createElement("g",{fill:"none",fillRule:"evenodd"},xe.createElement("g",null,xe.createElement("g",{fill:"#D8D8D8",opacity:"0"},xe.createElement("rect",{width:"48",height:"48"})),xe.createElement("g",{transform:"translate(12 12)"},xe.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),xe.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},xe.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),xe.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),xe.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"})))))),Gf=OS;import xo from"react";var AS=()=>xo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},xo.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},xo.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),xo.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),xo.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),xo.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"}))),Xf=AS;import re from"react";var PS=()=>re.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},re.createElement("g",{fill:"none",fillRule:"evenodd"},re.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},re.createElement("g",null,re.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),re.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),re.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),re.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),re.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),re.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},re.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),re.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"})))))),Kf=PS;import vn from"react";var zS=()=>vn.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},vn.createElement("g",{fill:"none",fillRule:"evenodd"},vn.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},vn.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),vn.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"})))),Yf=zS;import ci from"react";var LS=()=>ci.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},ci.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ci.createElement("g",null,ci.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},ci.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},ci.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),ci.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),ci.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),ci.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"}))))),qf=LS;import yn from"react";var BS=()=>yn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},yn.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},yn.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),yn.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),yn.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"}))),Jf=BS;import xn from"react";var _S=()=>xn.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},xn.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},xn.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),xn.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),xn.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"}))),Zf=_S;import Lr from"react";function FS(){return Lr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Lr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Lr.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),Lr.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),Lr.createElement("g",{fillOpacity:"0.2"},Lr.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),Lr.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var Qf=FS;import Br from"react";var RS=()=>Br.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Br.createElement("defs",null,Br.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),Br.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Br.createElement("mask",{fill:"currentColor"},Br.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),Br.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"}))),tm=RS;import em from"react";var HS=()=>em.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},em.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"})),im=HS;import rm from"react";var NS=()=>rm.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},rm.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"})),om=NS;import _r from"react";function $S(){return _r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},_r.createElement("defs",null,_r.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),_r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_r.createElement("mask",{fill:"currentColor"},_r.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),_r.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var nm=$S;import Fr from"react";var VS=()=>Fr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Fr.createElement("defs",null,Fr.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),Fr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fr.createElement("mask",{fill:"currentColor"},Fr.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),Fr.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"}))),sm=VS;import Vi from"react";var WS=()=>Vi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Vi.createElement("defs",null,Vi.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),Vi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Vi.createElement("path",{d:"M0 0H24V24H0z"}),Vi.createElement("mask",{fill:"currentColor"},Vi.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),Vi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"}))),am=WS;import kt from"react";var US=({highlight:e="currentColor",width:t=48,height:i=48})=>kt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},kt.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},kt.createElement("g",{fill:e,transform:"translate(13 13)"},kt.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),kt.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),kt.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),kt.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),kt.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),kt.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),kt.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),kt.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),kt.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),kt.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),kt.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),kt.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),kt.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),kt.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),kt.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),kt.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"})))),lm=US;import Hc from"react";var jS=({highlight:e="currentColor",width:t=48,height:i=48})=>Hc.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Hc.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Hc.createElement("path",{fill:e,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"}))),cm=jS;import So from"react";var GS=({highlight:e="currentColor",width:t=48,height:i=48})=>So.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},So.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},So.createElement("g",{fill:e,transform:"translate(13 13)"},So.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),So.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),So.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"})))),dm=GS;import Nc from"react";var XS=({highlight:e="currentColor",width:t=48,height:i=48})=>Nc.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Nc.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Nc.createElement("path",{fill:e,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"}))),um=XS;import KS from"styled-components";var YS=KS.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``,qt=YS;import ot from"react";var qS=({highlight:e="#565656",width:t=32,height:i=32})=>ot.createElement(qt,{width:t,height:i,viewBox:"0 0 32 32"},ot.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ot.createElement("g",{fill:e,transform:"translate(-8 -8)"},ot.createElement("g",{transform:"translate(8 8)"},ot.createElement("g",null,ot.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),ot.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),ot.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),ot.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),ot.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),ot.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),ot.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),ot.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),ot.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),ot.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),ot.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),ot.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),ot.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),ot.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),ot.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),ot.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),ot.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),ot.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),ot.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),ot.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),ot.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),ot.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),ot.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),ot.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"})))))),pm=qS;import aa from"react";var JS=({highlight:e="#565656",width:t=32,height:i=48})=>aa.createElement(qt,{width:t,height:i,viewBox:"0 0 42 32"},aa.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},aa.createElement("g",{fill:e,transform:"translate(-3 -8)"},aa.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"})))),hm=JS;import la from"react";var ZS=({highlight:e="#565656",width:t=26,height:i=46})=>la.createElement(qt,{width:t,height:i,viewBox:"0 0 26 46"},la.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},la.createElement("g",{fill:e,transform:"translate(-11 -1)"},la.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"})))),fm=ZS;import ca from"react";var QS=({highlight:e="#565656",width:t=26,height:i=46})=>ca.createElement(qt,{width:t,height:i,viewBox:"0 0 26 46"},ca.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ca.createElement("g",{fill:e,transform:"translate(-11 -1)"},ca.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"})))),mm=QS;import di from"react";var tC=({highlight:e="#565656",mask:t="#fff",width:i=32,height:r=32})=>di.createElement(qt,{width:i,height:r,viewBox:"0 0 32 32"},di.createElement("defs",null,di.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),di.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},di.createElement("g",{transform:"translate(-8 -8)"},di.createElement("g",{transform:"translate(7.08 7.293)"},di.createElement("mask",{fill:t},di.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),di.createElement("use",{fill:e,xlinkHref:"#photoeditorsdk-square-icon"}))))),gm=tC;import da from"react";var eC=({highlight:e="#565656",width:t=32,height:i=42})=>da.createElement(qt,{width:t,height:i,viewBox:"0 0 32 42"},da.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},da.createElement("g",{fill:e,transform:"translate(-8 -3)"},da.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"})))),bm=eC;import ui from"react";var iC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>ui.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},ui.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ui.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),ui.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),ui.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),ui.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),ui.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),ui.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),ui.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}))),vm=iC;import pi from"react";var rC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>pi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},pi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},pi.createElement("g",null,pi.createElement("path",{fill:e,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),pi.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:e,rx:"1"}),pi.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:e,rx:"1"}),pi.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:e,rx:"1"}),pi.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}),pi.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:e,rx:"1"})))),ym=rC;import hi from"react";var oC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>hi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},hi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},hi.createElement("g",{transform:"translate(5 5)"},hi.createElement("path",{fill:t,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),hi.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:e,rx:"1"}),hi.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:e,rx:"1"}),hi.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:e,rx:"1"}),hi.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:e,rx:"1"}),hi.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:e,rx:"1"})))),xm=oC;import Wi from"react";var nC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>Wi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},Wi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Wi.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:e,rx:"1"}),Wi.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),Wi.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),Wi.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),Wi.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:e,rx:"1"}),Wi.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:t,rx:"1"}))),Sm=nC;import Ui from"react";var sC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>Ui.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},Ui.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ui.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:e,rx:"1"}),Ui.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:t,rx:"1"}),Ui.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),Ui.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),Ui.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),Ui.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:e,rx:"1"}))),Cm=sC;import ji from"react";var aC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>ji.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},ji.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ji.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:e,rx:"1"}),ji.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:t,rx:"1"}),ji.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),ji.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),ji.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),ji.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:e,rx:"1"}))),wm=aC;import ua from"react";var lC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>ua.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},ua.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ua.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:t,rx:"1.5"}),ua.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:e,rx:"1"}))),km=lC;import $t from"react";var cC=({main:e="#424242",highlight:t="#565656",shadow:i="#333333",width:r="48px",height:o="48px"})=>$t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:o,viewBox:"0 0 48 48"},$t.createElement("defs",null,$t.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},$t.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),$t.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$t.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),$t.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),$t.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),$t.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),$t.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),$t.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),$t.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),$t.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:i,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),$t.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}))),Tm=cC;import $e from"react";var dC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},$e.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$e.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),$e.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),$e.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),$e.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),$e.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),$e.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),$e.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),$e.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}))),Em=dC;import Ve from"react";var uC=({main:e="#424242",highlight:t="#565656",width:i="48px",height:r="48px"})=>Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},Ve.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ve.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),Ve.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),Ve.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),Ve.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),Ve.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),Ve.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),Ve.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),Ve.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}))),Im=uC;import Rr from"react";var pC=()=>Rr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Rr.createElement("defs",null,Rr.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),Rr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Rr.createElement("mask",{fill:"currentColor"},Rr.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),Rr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"}))),Mm=pC;import oe from"react";var hC=({height:e=3,width:t=102,x:i=-102,className:r,style:o})=>oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 102 3",className:r,style:o},oe.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},oe.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),oe.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),oe.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-t*1.5,y:"0",width:t*4,height:"3",transform:`translate(${i}, 0)`})),Dm=hC;import Hr from"react";var fC=()=>Hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Hr.createElement("defs",null,Hr.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),Hr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Hr.createElement("mask",{fill:"currentColor"},Hr.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),Hr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"}))),Om=fC;import Am from"react";var mC=()=>Am.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Am.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"})),Pm=mC;import Gi from"react";var gC=({className:e})=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:e},Gi.createElement("title",null,"Flip Horizontal"),Gi.createElement("defs",null,Gi.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Gi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Gi.createElement("mask",{fill:"none"},Gi.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),Gi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"}))),zm=gC;import Xi from"react";var bC=({className:e})=>Xi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:e},Xi.createElement("title",null,"Flip Vertical"),Xi.createElement("defs",null,Xi.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Xi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Xi.createElement("mask",{fill:"none"},Xi.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),Xi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"}))),Lm=bC;import Ki from"react";var vC=({alt:e="Rotate",className:t})=>Ki.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:t},Ki.createElement("title",null,e),Ki.createElement("defs",null,Ki.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),Ki.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},Ki.createElement("mask",{fill:"none"},Ki.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),Ki.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"}))),Bm=vC;var PH={[m.ADJUSTMENT]:Wf,[m.FILTER]:jf,[m.LIBRARY]:Kf,[m.OVERLAY]:Yf,[m.FOCUS]:Gf,[m.STICKER]:qf,[m.TEXT]:Jf,[m.TEXT_DESIGN]:Zf,[m.FRAME]:Xf,[m.TRANSFORM]:Qf,[m.BRUSH]:Uf},zH={left:$f,right:Vf,center:Nf},LH={addText:tm,openWebcam:im,reset:om,shuffle:nm,uploadImage:sm},Sn={undo:Hf,redo:Rf,close:_f,export:Ff},ht={categories:{[yt.CommonCategory]:lm,[yt.FacebookCategory]:cm,[yt.TwitterCategory]:um,[yt.InstagramCategory]:dm},crops:{[yt.Custom]:pm,[yt.Square]:gm,[yt.ThreeByFour]:bm,[yt.FourByThree]:hm,[yt.NineBySixteen]:fm,[yt.SixteenByNine]:mm,[yt.FacebookPost]:vm,[yt.FacebookProfile]:ym,[yt.FacebookTitle]:xm,[yt.InstagramLandscape]:Sm,[yt.InstagramPortrait]:Cm,[yt.InstagramSquare]:wm,[yt.InstagramStory]:km,[yt.TwitterPost]:Tm,[yt.TwitterProfile]:Em,[yt.TwitterTitle]:Im},dots:Dm,duplicate:Om,edit:Pm,bringToFront:am,delete:Mm,flipHorizontal:zm,flipVertical:Lm,rotate:Bm},BH={[lt.BRIGHTNESS]:Tf,[lt.CONTRAST]:If,[lt.SATURATION]:Af,[lt.CLARITY]:Ef,[lt.SHADOWS]:Pf,[lt.HIGHLIGHTS]:Of,[lt.EXPOSURE]:Mf,[lt.GAMMA]:Df,[lt.BLACKS]:kf,[lt.WHITES]:Bf,[lt.TEMPERATURE]:Lf,[lt.SHARPNESS]:zf};import pa from"react";import yC from"styled-components";var _m=z.Button.TextSecondary,Fm=yC.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${e=>e.theme.canvasActionBar.foreground};
  display: flex;
  align-self: center;
`,xC=({scale:e,active:t})=>{let{canZoomIn:i}=e,{canZoomOut:r}=e,{zoomLevel:o}=e;return[m.TRANSFORM,m.BRUSH,m.FOCUS,m.STICKER,m.TEXT,m.TEXT_DESIGN].indexOf(t.tool)!==-1?null:pa.createElement(z.Bar.ButtonGroup,null,pa.createElement(_m,{"data-test":I.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!r,onClick:e.out},"-"),pa.createElement(Fm,{"data-test":I.ZoomLevel},o," %"),pa.createElement(_m,{ariaLabel:"Zoom in",isDisabled:!i,onClick:e.in},"+"))},Rm=N("scale","active")(L(xC));Fm.defaultProps={theme:jt};var Hm=SC(z.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`,CC=({config:e,editor:t,history:i,custom:r})=>{let o=e.locale.mainCanvasActions,{canUndo:n}=i,{canRedo:s}=i,l=e.config.mainCanvasActions,c=()=>{t.export()},d=()=>{if(t.activeStore.tool===m.TRANSFORM)return null;let S=r.getButton("mainCanvasActionUndo");return ne.createElement(S,{key:"mainCanvasActionUndo","data-test":I.MainBarButtonUndo,onClick:i.undo,isDisabled:!n,label:o.buttonUndo,ariaLabel:o.buttonUndo,icon:ne.createElement(Sn.undo,null)})},h=()=>{if(t.activeStore.tool===m.TRANSFORM)return null;let S=r.getButton("mainCanvasActionRedo");return ne.createElement(S,{key:"mainCanvasActionRedo","data-test":I.MainBarButtonRedo,onClick:i.redo,isDisabled:!s,label:o.buttonRedo,ariaLabel:o.buttonRedo,icon:ne.createElement(Sn.redo,null)})},f=()=>{let S=r.getButton("mainCanvasActionExport");return ne.createElement(S,{key:"mainCanvasActionExport","data-test":I.MainBarButtonExport,onClick:c,label:o.buttonExport,ariaLabel:o.buttonExport,icon:ne.createElement(Sn.export,null)})},g=()=>{if(!e.displayCloseButton)return null;let S=r.getButton("mainCanvasActionClose");return ne.createElement(S,{key:"mainCanvasActionClose","data-test":I.MainBarButtonClose,onClick:t.close,label:o.buttonClose,ariaLabel:o.buttonClose,icon:ne.createElement(Sn.close,null)})},x=l.map(S=>{switch(S){case st.UNDO:return d;case st.REDO:return h;case st.EXPORT:return f;case st.CLOSE:return g;default:return null}});return ne.createElement(z.Bar.Index,null,ne.createElement(Hm,null,x[0]&&x[0]()||null,x[1]&&x[1]()||null),e.config.enableZoom?ne.createElement(Rm,null):null,ne.createElement(Hm,null,x[2]&&x[2]()||null,x[3]&&x[3]()||null))},wC=N("config","editor","history","custom")(L(CC));import og from"react";import kn from"react";import h2 from"styled-components";function kC(e){return typeof e=="string"&&e.includes("%")}function TC(e){return typeof e=="string"&&e.includes(".")&&parseFloat(e)===1}function Tt(e,t){TC(e)&&(e="100%");let i=kC(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function ha(e){return e=parseFloat(e),(Number.isNaN(e)||e<0||e>1)&&(e=1),e}function Cn(e){return e<=1?`${Number(e)*100}%`:e}function Yi(e){return e.length===1?`0${e}`:String(e)}function $c(e,t,i){return{r:Tt(e,255)*255,g:Tt(t,255)*255,b:Tt(i,255)*255}}function Vc(e,t,i){e=Tt(e,255),t=Tt(t,255),i=Tt(i,255);let r=Math.max(e,t,i),o=Math.min(e,t,i),n=0,s=0,l=(r+o)/2;if(r===o)s=0,n=0;else{let c=r-o;switch(s=l>.5?c/(2-r-o):c/(r+o),r){case e:n=(t-i)/c+(t<i?6:0);break;case t:n=(i-e)/c+2;break;case i:n=(e-t)/c+4;break;default:break}n/=6}return{h:n,s,l}}function Nm(e,t,i){let r,o,n;e=Tt(e,360),t=Tt(t,100),i=Tt(i,100);function s(l,c,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?l+(c-l)*(6*d):d<1/2?c:d<2/3?l+(c-l)*(2/3-d)*6:l}if(t===0)o=i,n=i,r=i;else{let l=i<.5?i*(1+t):i+t-i*t,c=2*i-l;r=s(c,l,e+1/3),o=s(c,l,e),n=s(c,l,e-1/3)}return{r:r*255,g:o*255,b:n*255}}function Wc(e,t,i){e=Tt(e,255),t=Tt(t,255),i=Tt(i,255);let r=Math.max(e,t,i),o=Math.min(e,t,i),n=0,s=r,l=r-o,c=r===0?0:l/r;if(r===o)n=0;else{switch(r){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4;break;default:break}n/=6}return{h:n,s:c,v:s}}function $m(e,t,i){e=Tt(e,360)*6,t=Tt(t,100),i=Tt(i,100);let r=Math.floor(e),o=e-r,n=i*(1-t),s=i*(1-o*t),l=i*(1-(1-o)*t),c=r%6,d=[i,s,n,n,l,i][c],h=[l,i,i,s,n,n][c],f=[n,n,l,i,i,s][c];return{r:d*255,g:h*255,b:f*255}}function Uc(e,t,i,r){let o=[Yi(Math.round(e).toString(16)),Yi(Math.round(t).toString(16)),Yi(Math.round(i).toString(16))];return r&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function EC(e){return Math.round(parseFloat(e)*255).toString(16)}function Vt(e){return parseInt(e,16)}function jc(e){return Vt(e)/255}function Vm(e,t,i,r,o){let n=[Yi(Math.round(e).toString(16)),Yi(Math.round(t).toString(16)),Yi(Math.round(i).toString(16)),Yi(EC(r))];return o&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}var Co={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var IC="[-\\+]?\\d+%?",MC="[-\\+]?\\d*\\.\\d+%?",qi=`(?:${MC})|(?:${IC})`,Gc=`[\\s|\\(]+(${qi})[,|\\s]+(${qi})[,|\\s]+(${qi})\\s*\\)?`,Xc=`[\\s|\\(]+(${qi})[,|\\s]+(${qi})[,|\\s]+(${qi})[,|\\s]+(${qi})\\s*\\)?`,Se={CSS_UNIT:new RegExp(qi),rgb:new RegExp(`rgb${Gc}`),rgba:new RegExp(`rgba${Xc}`),hsl:new RegExp(`hsl${Gc}`),hsla:new RegExp(`hsla${Xc}`),hsv:new RegExp(`hsv${Gc}`),hsva:new RegExp(`hsva${Xc}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function se(e){return Boolean(Se.CSS_UNIT.exec(String(e)))}function DC(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(Co[e])e=Co[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let i=Se.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=Se.rgba.exec(e),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Se.hsl.exec(e),i?{h:i[1],s:i[2],l:i[3]}:(i=Se.hsla.exec(e),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Se.hsv.exec(e),i?{h:i[1],s:i[2],v:i[3]}:(i=Se.hsva.exec(e),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Se.hex8.exec(e),i?{r:Vt(i[1]),g:Vt(i[2]),b:Vt(i[3]),a:jc(i[4]),format:t?"name":"hex8"}:(i=Se.hex6.exec(e),i?{r:Vt(i[1]),g:Vt(i[2]),b:Vt(i[3]),format:t?"name":"hex"}:(i=Se.hex4.exec(e),i?{r:Vt(i[1]+i[1]),g:Vt(i[2]+i[2]),b:Vt(i[3]+i[3]),a:jc(i[4]+i[4]),format:t?"name":"hex8"}:(i=Se.hex3.exec(e),i?{r:Vt(i[1]+i[1]),g:Vt(i[2]+i[2]),b:Vt(i[3]+i[3]),format:t?"name":"hex"}:!1)))))))))}function Wm(e){let t={r:0,g:0,b:0},i=1,r=null,o=null,n=null,s=!1,l=!1;if(typeof e=="string"&&(e=DC(e)),Array.isArray(e)){let[c,d,h]=e;se(c)&&se(d)&&se(h)&&(t=$c(c*255,d*255,h*255),s=!0,l="rgb"),e.length===4&&(i=e[3])}return typeof e=="object"&&(se(e.r)&&se(e.g)&&se(e.b)?(t=$c(e.r,e.g,e.b),s=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):se(e.h)&&se(e.s)&&se(e.v)?(r=Cn(e.s),o=Cn(e.v),t=$m(e.h,r,o),s=!0,l="hsv"):se(e.h)&&se(e.s)&&se(e.l)&&(r=Cn(e.s),n=Cn(e.l),t=Nm(e.h,r,n),s=!0,l="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=ha(i),{ok:s,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var Jt=class{constructor(t="",i={}){if(t instanceof Jt)return t;this.originalInput=t;let r=Wm(t);this.originalInput=t,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=i.format||r.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}getAlpha(){return this.a}setAlpha(t){return this.a=ha(t),this.roundA=Math.round(100*this.a)/100,this}toHsv(){let t=Wc(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){let t=Wc(this.r,this.g,this.b),i=Math.round(t.h*360),r=Math.round(t.s*100),o=Math.round(t.v*100);return this.a===1?`hsv(${i}, ${r}%, ${o}%)`:`hsva(${i}, ${r}%, ${o}%, ${this.roundA})`}toHsl(){let t=Vc(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){let t=Vc(this.r,this.g,this.b),i=Math.round(t.h*360),r=Math.round(t.s*100),o=Math.round(t.l*100);return this.a===1?`hsl(${i}, ${r}%, ${o}%)`:`hsla(${i}, ${r}%, ${o}%, ${this.roundA})`}toHex(t=!1){return Uc(this.r,this.g,this.b,t)}toHexString(t=!1){return`#${this.toHex(t)}`}toHex8(t=!1){return Vm(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return`#${this.toHex8(t)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){let t=Math.round(this.r),i=Math.round(this.g),r=Math.round(this.b);return`rgba(${t}, ${i}, ${r}, ${this.roundA})`}toPercentageRgb(){let t=i=>`${Math.round(Tt(i,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){let t=i=>Math.round(Tt(i,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;let t=`#${Uc(this.r,this.g,this.b,!1)}`;for(let i of Object.keys(Co))if(Co[i]===t)return i;return!1}toString(t){let i=Boolean(t);t=t||this.format;let r=this.a<1&&this.a>=0;if(!i&&r&&t&&(t.startsWith("hex")||t==="name"))return t==="name"&&this.a===0?this.toName():this.toRgbString();switch(t){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(!0);case"hex4":return this.toHex8String(!0);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new Jt(this.toString())}};import Et from"react";import ko,{css as eg}from"styled-components";import OC,{css as fa}from"styled-components";var AC=OC.div`
  position: absolute;
  width: ${e=>e.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${e=>e.direction==="bottom"?fa`
          bottom: 100%;
        `:fa`
          top: 100%;
        `}
  left: ${e=>e.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${e=>e.direction==="bottom"?fa`
            transform: translate(-50%, 50%) rotate(45deg);
          `:fa`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${e=>e.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`,Um=AC;import Kc from"react";import jm from"styled-components";var PC=jm.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`,zC=jm(F.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${e=>e.theme.colorPicker.inputBorderColor};
  }
`,LC=({value:e,label:t,onChange:i})=>Kc.createElement(PC,null,Kc.createElement(F.Input.Label,{label:t}),Kc.createElement(zC,{min:0,max:255,value:e,onChange:i})),ma=LC;import Yc from"react";import Gm from"styled-components";var BC=Gm.div`
  text-align: left;
  width: 62px;
`,_C=Gm(F.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${e=>e.theme.colorPicker.inputBorderColor};
  }
`,FC=({value:e,label:t,onChange:i})=>Yc.createElement(BC,null,Yc.createElement(F.Input.Label,{label:t}),Yc.createElement(_C,{value:e.toUpperCase(),onChange:i})),Xm=FC;import Jc,{useRef as XC,useState as KC,useEffect as YC}from"react";import qC from"styled-components";import RC from"styled-components";var Nr=RC.div.attrs(e=>({style:{left:e.position[0]||`${0}px`,top:e.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${e=>e.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${e=>e.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${e=>e.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;Nr.defaultProps={theme:jt};var Ym=jr(fs());import qc,{useState as HC,useRef as Km,forwardRef as NC,useCallback as $C}from"react";import VC from"styled-components";var WC=VC.div`
  position: relative;
  height: 14px;
  width: 100%;
`,UC=e=>t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})},wo=NC(({surface:e,onChange:t,className:i,children:r},o)=>{let n=Km(null),s=Km(null),{config:l}=bt(),[c,d]=HC(!1),h=S=>{let C=l.measurements.color.colorPicker.thumb.size/2,O=l.measurements.color.colorPicker.thumb.size,E=0,R=0;E=S.clientX,R=S.clientY;let{top:$,left:V,width:nt,height:B}=n.current.getBoundingClientRect(),q=E-V-C,et=R-$-C;q=Math.max(0,Math.min(nt-O,q)),et=Math.max(0,Math.min(B-O,et)),t&&t([q,et])},f=S=>{d(!0),h(S)},g=$C((0,Ym.default)(S=>{c&&h(S)},10),[c]),x=()=>{c&&d(!1)};return qc.createElement(WC,{ref:UC([n,o]),className:i},qc.createElement(F.DraggableCore,{nodeRef:s,onStart:f,onDrag:g,onStop:x},qc.createElement("div",{ref:s},e)),r)});import{css as jC}from"styled-components";var GC=jC`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`,$r=GC;var JC=qC.div`
  ${$r}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`,qm=({hue:e,onChange:t})=>{let[i,r]=KC(0),o=XC(null),{config:n}=bt(),s=l=>{if(o.current){let[c]=l,{offsetWidth:d}=o.current,h=d-n.measurements.color.colorPicker.thumb.size,f=c*d/h,g=Math.max(0,Math.min(360,f/d*360));t(g),r(c)}};return YC(()=>{if(o.current){let{offsetWidth:l}=o.current,c=0,d=l-n.measurements.color.colorPicker.thumb.size;c=e*l/360,r(c*d/l)}},[e]),Jc.createElement(wo,{surface:Jc.createElement(JC,null),ref:o,onChange:s},Jc.createElement(Nr,{position:[i,0]}))};import ga,{useState as ZC,useRef as QC,useEffect as t2}from"react";import Jm from"styled-components";var e2=Jm.div.attrs(e=>({style:{background:`linear-gradient(to left, ${e.transparentColor} 0%, ${e.opaqueColor} 100%)`}}))`
  ${$r}
  z-index: 1;
`,i2=Jm.div.attrs(e=>({style:{backgroundImage:`url(${e.url})`}}))`
  ${$r}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`,Zm=({color:e,opaqueColor:t,transparentColor:i,onChange:r})=>{let{config:o}=bt(),[n,s]=ZC(0),l=QC(null),c=o.assetProvider.getPath("controls","/tiled-background.png"),d=h=>{if(l.current){let{offsetWidth:f}=l.current,[g]=h,x=f-o.measurements.color.colorPicker.thumb.size,S=g*f/x,C=(f-S)/f,O=Math.round((C+Number.EPSILON)*100)/100,E=Math.min(1,Math.max(0,O));r(E),s(g)}};return t2(()=>{if(l.current){let{offsetWidth:h}=l.current,f=0,g=h-o.measurements.color.colorPicker.thumb.size;f=(1-e.toHsv().a)*h,s(f*g/h)}},[e.toString()]),ga.createElement(wo,{ref:l,surface:ga.createElement(e2,{opaqueColor:t,transparentColor:i}),onChange:d},ga.createElement(i2,{url:c}),ga.createElement(Nr,{position:[n,0]}))};import Zc,{useState as r2,useRef as o2,useEffect as n2}from"react";import Qm from"styled-components";var s2=Qm.div.attrs(e=>({style:{backgroundColor:`hsl(${e.hue}, 100%, 50%)`}}))`
  ${$r}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${e=>e.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`,a2=Qm(wo)`
  height: ${e=>e.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`,tg=({color:e,hue:t,onChange:i})=>{let[r,o]=r2([0,0]),n=o2(null),{config:s}=bt();return n2(()=>{let{s:c,v:d}=e.toHsv();if(n.current){let{offsetWidth:h,offsetHeight:f}=n.current,g=h-s.measurements.color.colorPicker.thumb.size,x=f-s.measurements.color.colorPicker.thumb.size,S=c*h,C=(1-d)*f;o([S*g/h,C*x/f])}},[e.toString()]),Zc.createElement(a2,{ref:n,surface:Zc.createElement(s2,{hue:t}),onChange:c=>{if(n.current){let[d,h]=c,{offsetHeight:f,offsetWidth:g}=n.current,x=g-s.measurements.color.colorPicker.thumb.size,S=f-s.measurements.color.colorPicker.thumb.size,C=d*g/x,O=h*f/S,E=Math.min(1,Math.max(0,C/g)),R=Math.min(1,Math.max(0,(f-O)/f));i(E,R),o([d,h])}}},Zc.createElement(Nr,{position:r}))};var l2=ko.div`
  position: absolute;
  left: ${e=>e.leftOffset}px;
  top: ${e=>e.topOffset}px;
  z-index: ${e=>e.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${e=>e.show&&eg`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`,ig=ko.div`
  &&& {
    position: absolute;
    ${e=>e.direction==="top"&&eg`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${e=>e.theme.colorPicker.listShadow};
    background: ${e=>e.theme.colorPicker.listBackground};
    border-radius: ${e=>e.theme.shape.radiusMedium}px;
    width: ${e=>e.theme.measurements.color.colorPicker.width}px;
    height: ${e=>e.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`,c2=ko(qm)`
  margin-top: 8px;
`,d2=ko(Zm)`
  margin-top: 8px;
`,u2=ko.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`,p2=ko.div`
  display: flex;
`,wn=class extends Et.Component{constructor(t){super(t);this.node=Et.createRef();this.checkId=(t,i,r)=>{let o=t,n=0;for(;o.parentElement&&n<r;)if(o=o.parentElement,n+=1,o.id===i)return!0;return!1};this.handleOutsideClick=t=>{var s;let{onRequestClose:i,onAddSnapshot:r,show:o}=this.props,{color:n}=this.state;if(o){if((s=this.node.current)==null?void 0:s.contains(t.target))return;this.setState({hexInputValue:n.toHexString()}),i&&i(),r&&r()}};this.onChange=t=>{let{onChange:i}=this.props;i({color:t.toRgbArray(),colorString:t.toRgbString()})};this.onHexValueChange=t=>{if(t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){let i=new Jt(t);this.onChange(i),this.setState({color:i,hue:i.toHsl().h})}this.setState({hexInputValue:t})};this.onAlphaChange=t=>{let{color:i}=this.state,r=i.setAlpha(t);this.onChange(r),this.setState({color:r,hexInputValue:r.toHexString()})};this.onHueChange=t=>{let{color:i}=this.state,{s:r,v:o,a:n}=i.toHsv(),s=new Jt({h:t,s:r,v:o,a:n});this.onChange(s),this.setState({color:s,hexInputValue:s.toHexString(),hue:t})};this.onSaturationBrightnessChange=(t,i)=>{let{color:r,hue:o}=this.state,{a:n}=r.toHsv(),s=new Jt({h:o,s:t,v:i,a:n});this.onChange(s),this.setState({color:s,hexInputValue:s.toHexString()})};this.onInputChange=t=>i=>{let{color:r}=this.state;if(i.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!i.trim()){let o=r.toRgb();o[t]=parseInt(i,10)||0;let n=new Jt(o);this.onChange(n),this.setState({color:n,hexInputValue:n.toHexString(),hue:n.toHsl().h})}};let{color:i}=this.props,r=new Jt(i);this.state={color:r,hue:r.toHsl().h,hexInputValue:r.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1),document.addEventListener("keydown",this.handleOutsideClick,!1)}componentDidUpdate(t){let{color:i,show:r}=this.props;if(r&&!t.show){let o=new Jt(i);this.setState({color:o,hue:o.toHsl().h,hexInputValue:o.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1),document.removeEventListener("keydown",this.handleOutsideClick,!1)}render(){let{show:t,showArrow:i,direction:r,arrowOffset:o,topOffset:n,leftOffset:s,labelHex:l,labelR:c,labelG:d,labelB:h,labelSliderHue:f,labelSliderOpacity:g}=this.props,{color:x,hexInputValue:S,hue:C}=this.state,{r:O,g:E,b:R}=x.toRgb(),$=x.clone().setAlpha(1).toRgbString(),V=x.clone().setAlpha(0).toRgbString();return Et.createElement("div",{ref:this.node},Et.createElement(l2,{show:t,direction:r,leftOffset:s,topOffset:n},Et.createElement(ig,{direction:r},i&&Et.createElement(Um,{direction:r,arrowOffset:o}),Et.createElement(tg,{color:x,hue:C,onChange:this.onSaturationBrightnessChange}),Et.createElement(F.Spacer,{count:2}),Et.createElement(F.Input.Label,{label:f}),Et.createElement(c2,{hue:C,onChange:this.onHueChange}),Et.createElement(F.Spacer,{count:2}),Et.createElement(F.Input.Label,{label:g}),Et.createElement(d2,{color:x,opaqueColor:$,transparentColor:V,onChange:this.onAlphaChange}),Et.createElement(u2,null,Et.createElement(Xm,{value:S,label:l,onChange:this.onHexValueChange}),Et.createElement(p2,null,Et.createElement(ma,{value:O,label:c,onChange:this.onInputChange("r")}),Et.createElement(ma,{value:E,label:d,onChange:this.onInputChange("g")}),Et.createElement(ma,{value:R,label:h,onChange:this.onInputChange("b")}))))))}};wn.defaultProps={direction:"bottom",showArrow:!0};ig.defaultProps={theme:jt};var f2=h2.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`,Qc=class extends kn.Component{constructor(t){super(t);this.containerRef=null;this.onClick=t=>i=>{let{onAddSnapshot:r,config:o,onChange:n,colorPickerDirection:s,rect:l}=this.props,{activeIdentifier:c,showColorPicker:d,colorList:h}=this.state,f=h.find(g=>g.identifier===t);if(c===f.identifier&&!d){let{left:g,width:x,top:S,height:C}=i.currentTarget.getBoundingClientRect(),{left:O,top:E}=this.containerRef.current.getBoundingClientRect(),{colorPicker:R}=o.measurements.color,$=R.arrow.width/2,V=g-O+x/2-2,nt=s==="bottom"?S-E+C+$:S-E-$,B=-24,q=R.width-R.arrow.width-12;V>q&&(B+=V-q,V-=B);let et=!0;if(s==="bottom"&&l){let Ot=l.height,mi=l.top,rr=S-mi,or=Ot-(rr+C),zn=o.measurements.color.colorPicker.height+$;or<zn&&(nt=or-zn),rr+nt<rr+C/2&&(nt+=$,et=!1)}this.setState({showColorPicker:!0,showColorPickerArrow:et,arrowOffset:V,topOffset:nt,leftOffset:B})}else d?this.setState({showColorPicker:!1}):(n(f.color),this.setState({activeIdentifier:t}),r&&r())};this.onChange=({color:t,colorString:i})=>{let{onChange:r}=this.props,{activeIdentifier:o,colorList:n}=this.state,s=n.findIndex(l=>l.identifier===o);if(s!==-1){let l=[...n];l[s]={identifier:n[s].identifier,colorString:i,color:t},this.setState({colorList:l})}r(t)};this.onChangeColorPicker=({color:t,colorString:i})=>{this.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:i})};this.closeColorPicker=()=>{this.setState({showColorPicker:!1})};this.getColorPicker=()=>{let{activeColor:t,labelsColor:i,colorPickerDirection:r,onAddSnapshot:o}=this.props,{showColorPicker:n,showColorPickerArrow:s,arrowOffset:l,leftOffset:c,topOffset:d}=this.state;return kn.createElement(wn,{color:P(t),show:n,showArrow:s,direction:r,arrowOffset:l,leftOffset:c,topOffset:d,labelHex:i.hex,labelR:i.r,labelG:i.g,labelB:i.b,labelSliderOpacity:i.sliderOpacity,labelSliderHue:i.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:o})};let{colors:i}=this.props;this.containerRef=kn.createRef(),this.state={activeIdentifier:"",activeSprite:"",colorList:[...i],showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:t,activeColor:i},{activeSprite:r,colorList:o}){if(t!==r||!t){let n=oi(P(i)),s=o.find(({colorString:l})=>l===n);return{activeSprite:t,activeIdentifier:s?s.identifier:""}}return null}render(){let{tool:t,isDisabled:i,custom:r,config:o}=this.props,{activeIdentifier:n,colorList:s}=this.state,l=r.getColorItem(),c=o.assetProvider.getPath("controls","/tiled-background.png"),d=s.map(h=>kn.createElement(l,{tool:t,key:`${h.colorString}-item-${h.identifier}`,isActive:h.identifier===n,isDisabled:i,onClick:this.onClick(h.identifier),color:h.colorString,label:h.identifier,tiledBackgroundUrl:c}));return kn.createElement(f2,{"data-test":I.ColorList,ref:this.containerRef},d,this.getColorPicker())}};Qc.defaultProps={colorPickerDirection:"bottom",isDisabled:!1};var rg=N("config","custom")(L(Qc));var m2=e=>og.createElement(ms.Consumer,null,({rect:t})=>og.createElement(rg,k(b({},e),{rect:t})));import Oo,{useRef as hw,useEffect as fw,useLayoutEffect as mw}from"react";var Ug=jr(fs());import Wr,{useRef as tw}from"react";import ba from"react";import ng from"styled-components";var g2=ng(z.Controls.Container)`
  cursor: none;
`,b2=ng.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
`,sg=class extends ba.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=k(b({},this.INITIAL_POSITION),{isDrawing:!1});this.containerElementRef=null;this.getCursorCoordinates=t=>{let i=0,r=0;if(t.type.indexOf("touch")!==-1){let l=t;if(!l.touches.length)return k(b({},this.INITIAL_POSITION),{height:0,width:0});i=l.touches[0].clientX,r=l.touches[0].clientY}else{let l=t;i=l.clientX,r=l.clientY}let o=this.containerElementRef.current.getBoundingClientRect(),n=i-o.left,s=r-o.top;return{x:n,y:s,height:o.height,width:o.width}};this.draw=t=>{t.preventDefault(),t.stopPropagation(),this.touchDraw(t)};this.touchDraw=t=>{let{x:i,y:r}=this.getCursorCoordinates(t);i!==void 0&&r!==void 0&&(this.setState({x:i,y:r}),this.state.isDrawing&&this.brushTool.strokePosition({x:i,y:r}))};this.touchStart=()=>{this.brushTool.clickableCanvas(!1),this.setState({isDrawing:!0}),this.brushTool.beginStroke()};this.start=t=>{t.button===0?this.touchStart():this.stop(t)};this.stop=t=>{this.state.isDrawing&&(t.preventDefault(),t.stopPropagation(),this.setState({isDrawing:!1}),this.brushTool.endStroke(),this.brushTool.clickableCanvas(!0))};this.setInitialPosition=()=>{this.setState(b({},this.INITIAL_POSITION))};this.mouseOut=t=>{let{config:i}=this.props;t.preventDefault(),t.stopPropagation();let r=this.brushTool.sizeOnScreenSpace/2,{x:o,y:n,height:s,width:l}=this.getCursorCoordinates(t);o&&n&&(o<0||n<0||o>l-r||n>s-r||n<i.measurements.mainCanvasActionBar.height)&&this.setInitialPosition()};this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();let{x:i,y:r}=this.state;i&&r&&this.setInitialPosition()};this.getCursor=()=>{let{x:t,y:i}=this.state;if(t&&i){let r=oi(this.brushTool.color),o=`${this.brushTool.sizeOnScreenSpace}px`,n={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:r,height:o,width:o};return ba.createElement(b2,{style:n,"data-test":I.Cursor})}return null};this.containerElementRef=ba.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get brushTool(){return this.props.brushTool}render(){return ba.createElement(g2,{ref:this.containerElementRef,"data-test":I.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}},ag=N("brushTool","config")(L(sg));import x2 from"react";import Ce from"react";import v2 from"styled-components";var ae=(e,t)=>e!==void 0&&t!==void 0&&!Number.isNaN(e)&&!Number.isNaN(t);var td=v2(z.Controls.Knob)`
  margin-top: -${e=>e.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${e=>e.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`,{Container:y2}=z.Controls,lg=class extends Ce.Component{constructor(t){super(t);this.start=(t,{x:i,y:r})=>{ae(i,r)&&this.focusTool.setStart({x:i,y:r})};this.end=(t,{x:i,y:r})=>{ae(i,r)&&this.focusTool.setEnd({x:i,y:r})};this.onKnob1DragStart=(t,i)=>{this.focusTool.clickableCanvas(!1),this.start(t,i)};this.onKnob1DragStop=(t,i)=>{this.addSnapshot(i,this.historyLocale.focusPosition),this.start(t,i),this.focusTool.clickableCanvas(!0)};this.onKnob2DragStart=(t,i)=>{this.focusTool.clickableCanvas(!1),this.end(t,i)};this.onKnob2DragStop=(t,i)=>{this.addSnapshot(i,this.historyLocale.focusPosition),this.end(t,i),this.focusTool.clickableCanvas(!0)};this.addSnapshot=({x:t,y:i},r)=>{ae(t,i)&&this.focusTool.toolSnapshot(r)};this.getLine=()=>{let{height:t,width:i}=this.props.canvas.canvasSize,r=this.focusTool.startOnPreview,o=this.focusTool.endOnPreview;return Ce.createElement("svg",{focusable:"false",height:t,width:i},Ce.createElement("line",{x1:r.x,y1:r.y,x2:o.x,y2:o.y,strokeWidth:"2",stroke:"currentColor"}))};this.startRef=Ce.createRef(),this.endRef=Ce.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return Ce.createElement(y2,null,Ce.createElement(z.Controls.Line,null,this.getLine()),Ce.createElement(F.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},Ce.createElement(td,{ref:this.startRef})),Ce.createElement(F.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},Ce.createElement(td,{ref:this.endRef})))}};td.defaultProps={theme:jt};var cg=N("canvas","focusTool")(L(lg));import Ji from"react";var Tn=class extends Ji.Component{constructor(t){super(t);this.getKnobPosition=()=>{let{focusTool:t}=this.props,{origin:i,size:r}=t,o=r/2,n=Math.PI/2+t.rotation;return{x:i.x+o*Math.cos(n),y:i.y+o*Math.sin(n)}};this.onArea=(t,{x:i,y:r})=>{let{editor:o}=this.props,n=o.configStore.measurements.canvasControls.knob.size;if(ae(i,r)){let{canvas:s,focusTool:l}=this.props,{size:c,mirroredAreaWidth:d}=l,h=i+d/2,f=r+c/2,g=new v(this.getKnobPosition()),S=new v({x:i,y:r}).subtract(new v(this.areaPosition)),C=g.add(S);C.x>n&&C.x<s.canvasSize.width-n&&C.y>n&&C.y<s.canvasSize.height-n&&l.setOrigin({x:h,y:f})}};this.onKnob=(t,{x:i,y:r})=>{let{focusTool:o}=this.props;if(ae(i,r)){o.clickableCanvas(!1);let n=new v(o.origin),s=new v(i,r),l=n.subtract(s),c=l.magnitude,d=Math.PI/2+Math.atan2(l.y,l.x);o.setSize(c*2),o.setRotation(d)}};this.onAreaDragStop=(t,i)=>{let{focusTool:r}=this.props;this.addSnapshot(i,r.locale.history.focusPosition),this.onArea(t,i),r.clickableCanvas(!0)};this.onKnobDragStop=(t,i)=>{let{focusTool:r}=this.props;this.addSnapshot(i,r.locale.history.focusSize),this.onKnob(t,i),r.clickableCanvas(!0)};this.addSnapshot=({x:t,y:i},r)=>{let{focusTool:o}=this.props;ae(t,i)&&o.toolSnapshot(r)};this.knobRef=Ji.createRef(),this.areaRef=Ji.createRef()}get areaPosition(){let{focusTool:t}=this.props,{origin:i,size:r,mirroredAreaWidth:o}=t;return{x:i.x-o/2,y:i.y-r/2}}render(){let{x:t,y:i}=this.areaPosition,{focusTool:r}=this.props;return Ji.createElement(z.Controls.Container,null,Ji.createElement(F.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},Ji.createElement(z.Controls.Knob,{ref:this.knobRef})),Ji.createElement(F.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:i},rotation:r.rotation},Ji.createElement(z.Controls.Area,{ref:this.areaRef,"data-test":I.Focus,height:r.size,width:r.mirroredAreaWidth})))}};Tn=a([N("focusTool","canvas","editor"),L],Tn);import Zi from"react";var En=class extends Zi.Component{constructor(t){super(t);this.state={knobAngle:2.35};this.onCircle=(t,{x:i,y:r})=>{if(ae(i,r)){let{focusTool:o}=this.props;o.setCenter({x:i+o.radius,y:r+o.radius})}};this.onKnob=(t,{x:i,y:r})=>{if(ae(i,r)){let{focusTool:o}=this.props,n=new v(i,r),l=new v(o.center.x,o.center.y).subtract(n),c=l.magnitude,d=-Math.atan2(l.y,l.x);this.setState({knobAngle:d}),o.setRadius(c)}};this.onCircleDragStart=(t,i)=>{let{focusTool:r}=this.props;r.clickableCanvas(!1),this.onCircle(t,i)};this.onCircleDragStop=(t,i)=>{let{focusTool:r}=this.props;this.addSnapshot(i,r.locale.history.focusPosition),this.onCircle(t,i),r.clickableCanvas(!0)};this.onKnobDragStart=(t,i)=>{let{focusTool:r}=this.props;r.clickableCanvas(!1),this.onKnob(t,i)};this.onKnobDragStop=(t,i)=>{let{focusTool:r}=this.props;this.addSnapshot(i,r.locale.history.focusSize),this.onKnob(t,i),r.clickableCanvas(!0)};this.addSnapshot=({x:t,y:i},r)=>{let{focusTool:o}=this.props;ae(t,i)&&o.toolSnapshot(r)};this.knobRef=Zi.createRef(),this.circleRef=Zi.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){let{focusTool:t}=this.props,{knobAngle:i}=this.state,{center:r,radius:o}=t,n={x:r.x-o,y:r.y-o},s=Math.PI-i,l={x:r.x+o*Math.cos(s),y:r.y+o*Math.sin(s)};return Zi.createElement(z.Controls.Container,null,Zi.createElement(F.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:l},Zi.createElement(z.Controls.Knob,{ref:this.knobRef})),Zi.createElement(F.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},Zi.createElement(z.Controls.Circle,{ref:this.circleRef,"data-test":I.Focus,radius:o})))}};En=a([N("focusTool","canvas"),L],En);var dg=L(()=>{let{focusTool:e}=bt(),{state:t}=e,r=(()=>{switch(t.identifier){case Q.LINEAR:return cg;case Q.RADIAL:return En;case Q.MIRRORED:return Tn;default:return null}})();return e.isOptionSelected&&r?x2.createElement(r,null):null});import fi,{useRef as P2}from"react";import Io from"react";import In from"react";import pg from"react";import S2 from"react";var ug=({customButtonKey:e,onClick:t,label:i,icon:r,disabled:o})=>{let{custom:n}=bt(),s=n.getButton(e);return S2.createElement(s,{onClick:t,label:i,ariaLabel:i,icon:r,isDisabled:o})};var To=({availableKeys:e,actions:t})=>pg.createElement(z.Bar.ButtonGroup,{onClick:$d},e.map(i=>{let r=t[i];return r?pg.createElement(ug,b({key:i},r)):null}));var C2=({sprite:e,stickerTool:t})=>{let i=t.locale.canvasActions,r={[st.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:i.buttonBringToFront,icon:In.createElement(ht.bringToFront,null),disabled:e.isOnTop},[st.FLIP]:{customButtonKey:"canvasActionFlip",onClick:t.flipHorizontally,label:i.buttonFlipHorizontal,icon:In.createElement(ht.flipHorizontal,null)},[st.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:i.buttonDuplicate,icon:In.createElement(ht.duplicate,null)},[st.DELETE]:{customButtonKey:"canvasActionDelete",onClick:t.delete,label:i.buttonDelete,icon:In.createElement(ht.delete,null)}};return t.isStickerSelected?In.createElement(To,{availableKeys:t.config.canvasActions,actions:r}):null},hg=N("sprite","stickerTool")(L(C2));import Mn from"react";var w2=({textTool:e,sprite:t})=>{let i=e.locale.canvasActions,r={[st.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>e.setEditMode(!0),label:i.buttonEdit,icon:Mn.createElement(ht.edit,null)},[st.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:i.buttonBringToFront,icon:Mn.createElement(ht.bringToFront,null),disabled:t.isOnTop},[st.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:e.duplicate,label:i.buttonDuplicate,icon:Mn.createElement(ht.duplicate,null)},[st.DELETE]:{customButtonKey:"canvasActionDelete",onClick:e.delete,label:i.buttonDelete,icon:Mn.createElement(ht.delete,null)}};return t.isSpriteText?Mn.createElement(To,{availableKeys:e.config.canvasActions,actions:r}):null},fg=N("textTool","sprite")(L(w2));import Eo from"react";var k2=({sprite:e,textDesignTool:t})=>{let i=t.locale.canvasActions,r={[st.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(!0),label:i.buttonEdit,icon:Eo.createElement(ht.edit,null)},[st.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:i.buttonBringToFront,icon:Eo.createElement(ht.bringToFront,null),disabled:e.isOnTop},[st.INVERT]:{customButtonKey:"canvasActionInvert",onClick:t.invertBackground,label:i.buttonInvert,icon:Eo.createElement(ht.flipHorizontal,null)},[st.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:t.duplicate,label:i.buttonDuplicate,icon:Eo.createElement(ht.duplicate,null)},[st.DELETE]:{customButtonKey:"canvasActionDelete",onClick:()=>t.delete(),label:i.buttonDelete,icon:Eo.createElement(ht.delete,null)}};return t.isTextDesignSelected?Eo.createElement(To,{availableKeys:t.config.canvasActions,actions:r}):null},mg=N("sprite","textDesignTool")(L(k2));var Dn=class extends Io.Component{constructor(t){super(t);this.actionsRef=null;this.spriteControlPosition=()=>{let{config:t,sprite:i,canvas:{canvasSize:r}}=this.props,{controlPadding:o,controlOffset:n}=t.measurements.canvasControls.sprite,{x:s,y:l}=i.position,{height:c,width:d}=i.currentSprite.size,h=i.rotationWRTOutputRotation,f=this.actionsRef.current,g=new v(0,0);if(f){let C=f.getBoundingClientRect();g=new v(C.width/2+n,C.height+n)}let x=Math.abs(d*Math.sin(h))+Math.abs(c*Math.cos(h)),S=new v(s,l-x/2-o-n).clamp(g,new v(r.width,r.height).subtract(g));return{left:S.x,top:S.y}};this.getSpriteControls=()=>{let{sprite:t}=this.props;switch(t.tool){case m.TEXT:return Io.createElement(fg,null);case m.TEXT_DESIGN:return Io.createElement(mg,null);case m.STICKER:return Io.createElement(hg,null);default:return null}};this.actionsRef=Io.createRef(),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0})}render(){let{sprite:t}=this.props,{isMounted:i}=this.state,r=!t.isDragMode&&!t.isEditMode,o=this.spriteControlPosition();return Io.createElement(z.Controls.SpriteActionsWrapper,{"data-test":I.SpriteActions,ref:this.actionsRef,show:r&&i,style:b({},o)},this.getSpriteControls())}};Dn=a([N("sprite","config","editor","canvas"),L],Dn);import We,{useRef as va}from"react";var{Corner:ya}=z.Controls,{Draggable:xa}=F,ed=new v(0,0),id=new v(0,0),gg=L(()=>{let e=va(null),t=va(null),i=va(null),r=va(null),{config:o,sprite:n}=bt(),{leftTopPosition:s,leftBottomPosition:l,rightTopPosition:c,rightBottomPosition:d}=n,{borderWidth:h}=o.measurements.canvasControls.corner,f=({clientX:C,clientY:O})=>{C!==void 0&&O!==void 0&&n.onCornerDrag(id.subtract(ed.subtract(new v(C,O))))},g=C=>{switch(C){case"leftTop":return s;case"leftBottom":return l;case"rightTop":return c;case"rightBottom":return d;default:return s}},x=(C,O)=>{let{clientX:E,clientY:R}=C;ed=new v(E,R),id=new v(g(O)),n.clickableCanvas(!1),n.setDragMode(!0)},S=()=>{n.clickableCanvas(!0),n.setDragMode(!1),n.spriteSnapshot("size"),ed=new v(0,0),id=new v(0,0)};return We.createElement(We.Fragment,null,We.createElement(xa,{nodeRef:e,onStop:S,onDrag:f,onStart:C=>x(C,"leftTop")},We.createElement(ya,{ref:e,"data-test":I.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:h})),We.createElement(xa,{nodeRef:i,onStop:S,onDrag:f,onStart:C=>x(C,"leftBottom")},We.createElement(ya,{ref:i,"data-test":I.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:h})),We.createElement(xa,{nodeRef:t,onStop:S,onDrag:f,onStart:C=>x(C,"rightTop")},We.createElement(ya,{ref:t,"data-test":I.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:h})),We.createElement(xa,{nodeRef:r,onStop:S,onDrag:f,onStart:C=>x(C,"rightBottom")},We.createElement(ya,{ref:r,"data-test":I.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:h})))});import Mo,{useRef as bg}from"react";import vg from"styled-components";var T2=vg.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,E2=vg.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,rd=new v(0,0),od=new v(0,0),I2=({sprite:e,config:t})=>{let i=bg(null),r=bg(null),o=e.leftMidPosition,n=e.rightMidPosition,s=t.assetProvider.getPath("controls","/arrow-left.png"),l=t.assetProvider.getPath("controls","/arrow-right.png"),c=(f,g)=>{e.setDragMode(!0),e.clickableCanvas(!1);let{clientX:x,clientY:S}=f;rd=new v(x,S),od=new v(g==="left"?o:n)},d=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(_.EDIT,e.textDesignLocale.padding),rd=new v(0,0),od=new v(0,0)},h=({clientX:f,clientY:g})=>{if(f!==void 0&&g!==void 0){let x=od.subtract(rd.subtract(new v(f,g)));e.onPaddingDrag(x)}};return Mo.createElement(Mo.Fragment,null,Mo.createElement(F.Draggable,{nodeRef:i,onStart:f=>c(f,"left"),onDrag:h,onStop:d},Mo.createElement(T2,{ref:i,src:s})),Mo.createElement(F.Draggable,{nodeRef:r,onStart:f=>c(f,"right"),onDrag:h,onStop:d},Mo.createElement(E2,{ref:r,src:l})))},yg=N("sprite","config")(L(I2));import xg,{useRef as M2}from"react";import D2 from"styled-components";var Sg=D2(z.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${e=>e.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${e=>e.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`,nd=new v(0,0),sd=new v(0,0),O2=({config:e,sprite:t,snapping:i})=>{let r=M2(null),o=t.rightBottomHandlePosition,n=t.leftBottomHandlePosition,s={x:(o.x+n.x)/2,y:(o.y+n.y)/2},l=({clientX:g,clientY:x})=>{nd=new v(g,x),sd=new v(s),t.setDragMode(!0),t.clickableCanvas(!1)},c=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.spriteSnapshot("rotation"),i.hideRotationGuides(),nd=new v(0,0),sd=new v(0,0)},d=({clientX:g,clientY:x})=>{if(g!==void 0&&x!==void 0){let S=sd.subtract(nd.subtract(new v(g,x))),C=t.position,O=new v(C.x,C.y),E=S.subtract(O),R=Math.atan2(E.y,E.x)-Math.PI/2,$=i.snapToRotation(R,E,t.currentRect);t.setRotation($)}},h=g=>{d(g)},f=e.assetProvider.getPath("controls",`/${xd()?"rotate-windows":"rotate-osx"}.png`);return xg.createElement(F.Draggable,{nodeRef:r,onStart:l,onDrag:h,onStop:c},xg.createElement(Sg,{ref:r,url:f}))};Sg.defaultProps={theme:jt};var Cg=N("sprite","snapping","config")(L(O2));import Do,{useRef as wg}from"react";import ad from"styled-components";var kg=ad(z.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`,Tg=ad(kg)`
  left: -3px;
  top: calc(
    50% - ${e=>e.theme.measurements.canvasControls.width.size/2}px
  );
`,Eg=ad(kg)`
  right: -3px;
  top: calc(
    50% - ${e=>e.theme.measurements.canvasControls.width.size/2}px
  );
`,ld=new v(0,0),cd=new v(0,0),A2=({sprite:e,textTool:t})=>{let i=wg(null),r=wg(null),o=e.leftMidPadPosition,n=e.rightMidPadPosition,s=(d,h)=>{e.setDragMode(!0),e.clickableCanvas(!1);let{clientX:f,clientY:g}=d;ld=new v(f,g),cd=new v(h==="left"?o:n)},l=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(_.EDIT,e.textLocale.width),t.updateDefaultFontSize(),ld=new v(0,0),cd=new v(0,0)},c=({clientX:d,clientY:h})=>{if(d!==void 0&&h!==void 0){let f=cd.subtract(ld.subtract(new v(d,h)));e.onWidthDrag(f)}};return Do.createElement(Do.Fragment,null,Do.createElement(F.Draggable,{nodeRef:i,onStart:d=>s(d,"left"),onDrag:c,onStop:l},Do.createElement(Tg,{ref:i})),Do.createElement(F.Draggable,{nodeRef:r,onStart:d=>s(d,"right"),onDrag:c,onStop:l},Do.createElement(Eg,{ref:r})))};Tg.defaultProps={theme:jt};Eg.defaultProps={theme:jt};var Ig=N("sprite","textTool")(L(A2));var{Draggable:z2}=F,Sa=new v(0,0),dd=new v(0,0),Mg=L(()=>{let e=P2(),{active:t,config:i,snapping:r,sprite:o}=bt(),n=({clientX:E,clientY:R})=>{let $=dd.subtract(Sa.subtract(new v(E,R))),{x:V,y:nt}=r.snapToPosition({x:$.x,y:$.y},o.currentRect);o.setPosition({x:V,y:nt})},s=E=>{let{clientX:R,clientY:$}=E;Sa=new v(R,$),dd=new v(o.position),o.setDragMode(!0),r.updateGuides()},l=E=>{let{clientX:R,clientY:$}=E,{x:V,y:nt}=Sa;Sa=new v(0,0),dd=new v(0,0),o.setDragMode(!1),V!==R&&nt!==$&&o.spriteSnapshot("position"),r.hidePositionGuides()},c=E=>{E.preventDefault(),E.stopPropagation(),o.setEditMode(!0)};if(!(()=>{let E=t.tool,R=o.tool;return o.isSpriteSelected&&E===R})())return null;let{isSpriteText:h}=o,f=o.isSpriteTextDesign&&o.textDesignToolStore.isInverted,{height:g,width:x}=o.size,S=o.spritePosition,C=o.rotationWRTOutputRotation,{controlPadding:O}=i.measurements.canvasControls.sprite;return fi.createElement(z.Controls.Container,null,fi.createElement(z2,{nodeRef:e,onStart:s,onDrag:n,onStop:l,rotation:C,position:S},fi.createElement(z.Controls.Sprite,{ref:e,"data-test":I.Sprite,onDoubleClick:c,height:g,width:x},h&&fi.createElement(Ig,null)||null,f&&fi.createElement(yg,null)||null,fi.createElement(gg,null),fi.createElement(z.Controls.RotateHandle,{x:x/2+O/2},fi.createElement(Cg,null)))),fi.createElement(Dn,null))});import tr from"react";import Ht,{useRef as On}from"react";import Ca,{css as ud}from"styled-components";var{GridLine:wa}=z.Crop,L2=z.Crop.Mask,{Draggable:An}=F,Qi=3,B2=Ca(Tr)`
  left: ${Qi}px;
  top: ${Qi}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`,_2=Ca(Tr)(e=>{let{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,i=t/4-e.borderWidth;return ud`
    left: ${i-t}px;
    top: ${Qi}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `}),F2=Ca(Tr)(e=>{let{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,i=t/4-e.borderWidth;return ud`
    left: ${i-t}px;
    top: ${i-t}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `}),R2=Ca(Tr)(e=>{let{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,i=t/4-e.borderWidth;return ud`
    top: ${i-t}px;
    left: ${Qi}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `}),H2=({transformTool:e})=>{let t=On(null),i=On(null),r=On(null),o=On(null),n=On(null),{leftTopRespectFlip:s,leftBottomRespectFlip:l,rightTopRespectFlip:c,rightBottomRespectFlip:d}=e,{height:h,width:f}=e.cropMaskSize,{maxCropMaskSize:g,defaultCropMaskPosition:x}=e,{isFlippedHorizontal:S,isFlippedVertical:C}=e,O=g.width/2,E=g.height/2,R=k(b({},g),{left:x.x,top:x.y}),$={height:h,width:f},V=e.isDragMode?{transition:"unset"}:{},nt=it=>S?O*2-it:it,B=it=>C?E*2-it:it,q=(it,W,U)=>{let Ur=nt(it),Ln=B(W);switch(ft.getFlippedEdgeIndex(U,S,C)){case 0:e.onLeftTop({x:Ur,y:Ln});break;case 1:e.onLeftBottom({x:Ur,y:Ln});break;case 2:e.onRightTop({x:Ur,y:Ln});break;case 3:e.onRightBottom({x:Ur,y:Ln});break;default:break}},et=(it,W,U)=>{e.setDragMode(!0),e.clickableCanvas(!1),q(it,W,U)},Ot=(it,W,U)=>{q(it,W,U)},mi=(it,W,U)=>{e.setDragMode(!1),q(it,W,U),e.clickableCanvas(!0),e.trackChanges()},rr=(it,{x:W,y:U})=>{et(W,U,0)},or=(it,{x:W,y:U})=>{Ot(W,U,0)},zn=(it,{x:W,y:U})=>{mi(W,U,0)},Kg=(it,{x:W,y:U})=>{et(W,U,1)},Yg=(it,{x:W,y:U})=>{Ot(W,U,1)},qg=(it,{x:W,y:U})=>{mi(W,U,1)},Jg=(it,{x:W,y:U})=>{et(W,U,2)},Zg=(it,{x:W,y:U})=>{Ot(W,U,2)},Qg=(it,{x:W,y:U})=>{mi(W,U,2)},tb=(it,{x:W,y:U})=>{et(W,U,3)},eb=(it,{x:W,y:U})=>{Ot(W,U,3)},ib=(it,{x:W,y:U})=>{mi(W,U,3)},Ia=(it,W)=>{let U=nt(it+f/2)-f/2,Ur=B(W+h/2)-h/2;e.changePosition({x:U,y:Ur})},rb=(it,{x:W,y:U})=>{e.setDragMode(!0),e.clickableCanvas(!1),Ia(W,U)},ob=(it,{x:W,y:U})=>{Ia(W,U)},nb=(it,{x:W,y:U})=>{e.setDragMode(!1),Ia(W,U),e.clickableCanvas(!0),e.trackChanges()};return Ht.createElement("div",{style:k(b({},R),{position:"absolute"})},Ht.createElement(An,{nodeRef:n,bounds:"parent",position:s,onStart:rb,onDrag:ob,onStop:nb},Ht.createElement(L2,{ref:n,style:b(b({},$),V)})),Ht.createElement(wa,{style:b({left:s.x+f/3,top:s.y,height:h,width:1},V)}),Ht.createElement(wa,{style:b({left:s.x+f/3*2,top:s.y,height:h,width:1},V)}),Ht.createElement(wa,{style:b({left:s.x,top:s.y+h/3,height:1,width:f},V)}),Ht.createElement(wa,{style:b({left:s.x,top:s.y+h/3*2,height:1,width:f},V)}),Ht.createElement(An,{nodeRef:t,bounds:"parent",position:b({},s),onStart:rr,onDrag:or,onStop:zn},Ht.createElement(B2,{ref:t,"data-test":I.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:Qi,style:V})),Ht.createElement(An,{nodeRef:r,bounds:"parent",position:l,onStart:Kg,onDrag:Yg,onStop:qg},Ht.createElement(R2,{ref:r,"data-test":I.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:Qi,style:V})),Ht.createElement(An,{nodeRef:i,bounds:"parent",position:c,onStart:Jg,onDrag:Zg,onStop:Qg},Ht.createElement(_2,{ref:i,"data-test":I.CropTopRight,vertical:"top",horizontal:"right",borderWidth:Qi,style:V})),Ht.createElement(An,{nodeRef:o,bounds:"parent",position:d,onStart:tb,onDrag:eb,onStop:ib},Ht.createElement(F2,{ref:o,"data-test":I.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:Qi,style:V})))},Dg=N("transformTool")(L(H2));import Vr from"react";import Pn from"styled-components";import Ue from"react";import ka,{css as Og}from"styled-components";var Ag=ka.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${e=>e.isVisible&&Og`
      display: inline-block;
    `}
`,N2=ka.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`,$2=ka.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${e=>e.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${e=>e.isVisible&&Og`
      display: inline-block;
    `}
`,V2=ka.div`
  transform: translate(0, 0) !important;
`,Pg=class extends Ue.Component{constructor(t){super(t);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(t,{x:i})=>{let{flipHorizontally:r,flipVertically:o}=this.transformTool.rotateFlipState;r!==o&&(i*=-1);let n=this.transformTool.defaultAngle-i*this.DEGREES_PER_PIXEL,s=Math.min(this.MAX_ROTATION,Math.max(n,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${s}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees),this.transformTool.trackChanges()};this.rotateRef=Ue.createRef()}get transformTool(){return this.props.transformTool}render(){let{config:t,canvasWidth:i,transformTool:r}=this.props,{flipHorizontally:o,flipVertically:n}=this.transformTool.rotateFlipState,s=!t.isLayoutAdvanced||t.isLayoutAdvanced&&i>t.measurements.canvas.transform.minSliderWidth,l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&i>t.measurements.canvas.transform.minValueWidth,c=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,d=o===n?c*-1:c,h=o!==n?r.rotationInDegrees*-1:r.rotationInDegrees;return Ue.createElement(N2,{"data-test":I.RotateSlider},Ue.createElement(F.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!s},Ue.createElement(V2,{ref:this.rotateRef},Ue.createElement(Ag,{isVisible:s},Ue.createElement(ht.dots,{width:90,height:15,x:d})),Ue.createElement($2,{isVisible:l},h,"\xB0"),Ue.createElement(Ag,{isVisible:s},Ue.createElement(ht.dots,{width:90,height:15,x:d})))))}},zg=N("transformTool","config")(L(Pg));var W2=Pn(ht.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`,U2=Pn(ht.rotate)`
  height: 16px;
  width: 16px;
`,j2=Pn(ht.flipHorizontal)`
  height: 16px;
  width: 16px;
`,G2=Pn(ht.flipVertical)`
  height: 16px;
  width: 16px;
`,X2=Pn.div`
  display: inline-flex;
  transform: scale(0.9);
`,K2=({transformTool:e,config:t,custom:i,canvas:r})=>{let o=e.locale.transformActions,n=r.canvasSize.width,s=!t.isLayoutAdvanced||t.isLayoutAdvanced&&n>t.measurements.canvas.transform.minFlipWidth,l=({customButtonKey:x,onClick:S,label:C,icon:O})=>{let E=i.getButton(x);return Vr.createElement(E,{key:C,onClick:S,label:C,ariaLabel:C,icon:O,style:{margin:"0 5px"}})},c=l({label:o.buttonFlipHorizontal,icon:Vr.createElement(j2,null),onClick:()=>{e.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),d=l({label:o.buttonFlipVertical,icon:Vr.createElement(G2,null),onClick:()=>{e.flipVertically()},customButtonKey:"transformActionFlipVertical"}),h=l({label:o.buttonRotateClockwise,icon:Vr.createElement(W2,null),onClick:e.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),f=l({label:o.buttonRotateAntiClockwise,icon:Vr.createElement(U2,null),onClick:e.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),g=t.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return Vr.createElement(X2,{style:g,"data-test":I.FlipRotateControls},e.config.enableFlip&&s&&c||null,e.config.enableFlip&&s&&d||null,e.config.enableRotation&&Vr.createElement(zg,{canvasWidth:n})||null,e.config.enableRotation&&f||null,e.config.enableRotation&&h||null)},pd=N("transformTool","config","custom","canvas")(L(K2));var Y2=z.Bar.Index,{Backdrop:Ta}=z.Crop,q2=({transformTool:e,canvas:t,config:i})=>{let{leftTopRespectFlip:r,leftBottomRespectFlip:o,rightTopRespectFlip:n}=e,{height:s}=e.cropMaskSize,{height:l,width:c}=t.canvasSize,{defaultCropMaskPosition:d}=e,h=e.isDragMode?{transition:"unset"}:{};return tr.createElement(z.Controls.Container,null,tr.createElement(Ta,{style:b({left:0,top:0,width:c,height:r.y+d.y},h)}),tr.createElement(Ta,{style:b({left:0,top:r.y+d.y,width:d.x+r.x,height:s},h)}),tr.createElement(Ta,{style:b({left:n.x+d.x,top:n.y+d.y,width:c-n.x-d.x,height:s},h)}),tr.createElement(Ta,{style:b({left:0,top:o.y+d.y,width:c,height:l-o.y-d.y+i.measurements.basicToolControlBar.controlsBarHeight},h)}),tr.createElement(Dg,null),i.isLayoutAdvanced?tr.createElement(Y2,{bottom:!0},tr.createElement(pd,null)):null)},Lg=N("transformTool","canvas","config")(L(q2));import hd from"react";import J2,{css as Z2}from"styled-components";var Q2=J2(z.Controls.Container)`
  ${e=>e.activeCursor?Z2`
          cursor: move;
        `:""}
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.dragImage};
`,Bg=class extends hd.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=k(b({},this.INITIAL_POSITION),{isDragging:!1});this.containerRef=null;this.getCursorCoordinates=t=>{let i=0,r=0;if(t.type.indexOf("touch")!==-1){let l=t;if(!l.touches.length)return this.INITIAL_POSITION;i=l.touches[0].clientX,r=l.touches[0].clientY}else{let l=t;i=l.clientX,r=l.clientY}let o=this.containerRef.current.getBoundingClientRect(),n=i-o.left,s=r-o.top;return{x:n,y:s}};this.move=t=>{if(this.scale.canDrag){let{x:i,y:r}=this.getCursorCoordinates(t);if(i!==void 0&&r!==void 0&&this.state.isDragging){let o={x:this.state.x-i,y:this.state.y-r};this.scale.setOffset(o)}}};this.touchDrag=t=>{if(this.scale.canDrag){let{x:i,y:r}=this.getCursorCoordinates(t);i!==void 0&&r!==void 0&&this.setState({x:i,y:r,isDragging:!0})}};this.drag=t=>{t.preventDefault(),this.touchDrag(t)};this.stop=()=>{this.scale.canDrag&&(this.scale.savePosition(),this.setState(k(b({},this.INITIAL_POSITION),{isDragging:!1})))};this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();let{x:i,y:r}=this.state;i&&r&&this.setState(k(b({},this.INITIAL_POSITION),{isDragging:!1}))};this.containerRef=hd.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get scale(){return this.props.scale}render(){return hd.createElement(Q2,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}},_g=N("scale")(L(Bg));var Fg=L(({children:e})=>{let t=tw(null),{active:i,sprite:r,canvas:o}=bt(),n=()=>{switch(i.tool){case m.FOCUS:return Wr.createElement(dg,null);case m.TEXT:case m.TEXT_DESIGN:case m.STICKER:return Wr.createElement(Mg,null);case m.BRUSH:return Wr.createElement(ag,null);case m.TRANSFORM:return Wr.createElement(Lg,null);default:return Wr.createElement(z.Controls.Container,null,Wr.createElement(_g,null))}},s=d=>{if(d.preventDefault(),d.stopPropagation(),o.isCanvasClickable){let{clientX:h}=d,{clientY:f}=d;if(d.type.indexOf("touch")!==-1){let C=d;if(!C.touches.length)return;h=C.touches[0].clientX,f=C.touches[0].clientY}let g=t.current.getBoundingClientRect(),x=h-g.left,S=f-g.top;o.getContainersAtPreviewPoint({x,y:S})}},l=d=>{d.code==="Tab"&&r.selectLast()},{canvasSize:c}=o;return Wr.createElement(z.Controls.Wrapper,{"aria-hidden":!0,ref:t,onClick:s,onKeyDown:l,height:c.height,width:c.width},e,n())});import md from"react";import gd,{css as Rg}from"styled-components";import ew from"react";import iw from"styled-components";var rw=iw.div`
  display: ${({isVisible:e})=>e?"block":"none"};
  position: absolute;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.snappingGuide};
`,ow=({isVisible:e,className:t})=>ew.createElement(rw,{isVisible:e,className:t}),fd=ow;var nw=gd(fd)`
  background: ${e=>e.theme.snapping.positionGuideColor};
  ${e=>e.direction==="horizontal"?Rg`
        width: 100%;
        height: 2px;
        top: ${()=>e.position}px;
      `:Rg`
      width: 2px;
      height: 100%;
      left: ${()=>e.position}px;
    `}
`,sw=gd(fd)`
  border: none;
  border-top: 2px dashed ${e=>e.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:e})=>e.x}px;
  top: ${({position:e})=>e.y}px;
  transform: rotate(${({rotation:e})=>e}rad);
  width: 200%;
`,aw=gd.div`
  position: absolute;
  width: ${({width:e})=>e}px;
  height: ${({height:e})=>e}px;
  top: ${({top:e})=>e}px;
  left: ${({left:e})=>e}px;
  overflow: hidden;
`,lw=({snapping:e,editor:t})=>{let{width:i,height:r}=t.getPreviewSize(),{x:o,y:n}=e.previewTopLeftPosition,s=e.positionGuides.map(({direction:c,value:d,isVisible:h},f)=>md.createElement(nw,{key:`positionGuide-${f}`,direction:c,position:d,isVisible:h})),l=e.rotationGuides.find(({isVisible:c})=>c);return md.createElement(aw,{"data-test":I.SnappingLine,width:i,height:r,left:o,top:n},s,md.createElement(sw,{key:"rotationGuide",rotation:l?l.value:0,position:l?l.position:{x:0,y:0},isVisible:!!l}))},Hg=N("snapping","editor")(L(lw));import cw from"react";import dw from"styled-components";var uw=dw.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`,Ng=()=>cw.createElement(uw,{alt:"watermark","data-test":I.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="});import er from"react";var bd=24,$g=class extends er.Component{constructor(t){super(t);this.init=()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{this.video.srcObject=t}).catch(()=>{this.props.modal.showActionModal({type:rt.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})}):this.props.modal.showActionModal({type:rt.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})};this.stop=()=>{let{active:t}=this.props;this.video.srcObject.getTracks().forEach(o=>{o.stop()}),this.video.srcObject=null,t.selectWebcam(!1)};this.captureAndCloseWebcam=()=>{this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0),this.props.active.newImage(this.canvas.toDataURL("image/webp")),this.stop()};this.videoRef=er.createRef()}componentDidMount(){this.canvas=document.createElement("canvas"),this.video=this.videoRef.current,this.init()}render(){let{editor:t}=this.props,{height:i,width:r}=t.getPreviewSize(),{measurements:o}=t.configStore,n=this.props.canvas.canvasSize.height,s=(n-i)/2,l=s<bd+o.buttons.float.size?n-bd*2-o.buttons.float.size/2:n-s+bd,c=this.props.active.webcamLabel;return er.createElement(z.Wrapper,null,er.createElement(z.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},er.createElement(z.Bar.ButtonGroup,null,er.createElement(io,{ariaLabel:c,onClick:this.stop},c))),er.createElement(z.Webcam,{style:{height:i,width:r},autoPlay:!0,ref:this.videoRef}),er.createElement(z.Button.Float,{ariaLabel:"Click and Save",style:{top:l},onClick:this.captureAndCloseWebcam}))}},Vg=N("active","canvas","modal","editor")(L($g));import pw from"react";var Wg=({children:e})=>pw.createElement(z.Container,{"data-test":I.CanvasContainer},e);var gw=L(()=>{let e=hw(null),{canvas:t,active:i,config:r}=bt(),o=(l=!0)=>{if(e==null?void 0:e.current){let{clientWidth:c,clientHeight:d}=e.current,h=ut.devicePixelRatio;e.current.width=c*h,e.current.height=d*h,t.saveDimensions({width:c,height:d,render:l})}},n=new Zo((0,Ug.default)(()=>o(),100,{trailing:!0}));fw(()=>{let l=e.current;return t.setCanvasElement(l),()=>{n.disconnect()}},[]),mw(()=>{o(!1),n.observe(e.current)});let{licenseChecker:s}=r;return Oo.createElement(Wg,null,s&&s.isWhiteLabel()?null:Oo.createElement(Ng,null),i.isWebcam?Oo.createElement(Vg,null):null,Oo.createElement(z.Element,{ref:e,"aria-label":"Canvas","data-test":I.Canvas}),Oo.createElement(Fg,null,Oo.createElement(Hg,null)))});import ir from"react";var bw=({modal:e,textTool:t,textDesignTool:i,custom:r})=>{let{type:o,identifier:n,isVisible:s,modalProps:l,positionOffset:c}=e,{headerLabel:d,bodyLabel:h,confirmLabel:f,dismissLabel:g,handleClose:x,handleConfirm:S,handleDismiss:C}=l,O=r.getDialog();if(o===rt.INFO)return ir.createElement(F.InfoModal,{headerLabel:d,bodyLabel:h},ir.createElement(O,{type:o,isVisible:s,identifier:n,position:c,handleClose:x,headerLabel:d,bodyLabel:h}));if(o===rt.TEXT_EDIT){let{buttonSave:E,buttonClose:R}=t.locale.canvasControls,$={type:o,isVisible:e.isVisible,confirmLabel:E,dismissLabel:R,headerLabel:t.locale.canvasControls.inputText};if(t.isTextSelected)return ir.createElement(F.TextEditModal,k(b({},$),{defaultText:H.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis}),ir.createElement(O,{type:o,isVisible:s,identifier:n,position:c,handleClose:x,confirmLabel:E,dismissLabel:R,headerLabel:t.locale.canvasControls.inputText}));if(i.isTextDesignSelected)return ir.createElement(F.TextEditModal,k(b({},$),{defaultText:X.defaultText(),handleConfirm:i.changeText,handleDismiss:i.setEditMode,text:i.text,maxLength:i.config.maxCharacterLimit,allowEmojis:i.config.allowEmojis}),ir.createElement(O,{type:o,isVisible:s,identifier:n,position:c,handleClose:x,confirmLabel:E,dismissLabel:R,headerLabel:t.locale.canvasControls.inputText}))}return ir.createElement(F.ActionModal,{type:o,headerLabel:d,bodyLabel:h,confirmLabel:f,dismissLabel:g,handleClose:x,handleConfirm:S,handleDismiss:C},ir.createElement(O,{type:o,isVisible:s,identifier:n,position:c,confirmLabel:f,dismissLabel:g,headerLabel:d,bodyLabel:h,handleClose:x}))},vw=N("textTool","textDesignTool","modal","custom")(L(bw));import Ao from"react";import Gg from"styled-components";import Ea from"react";import yw from"styled-components";var xw=yw.div`
  position: absolute;
  right: 8px;
  top: 8px;
`,jg=class extends Ea.Component{constructor(t){super(t);this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:!1})};this.onSubmit=()=>{let{getCorrectValue:t}=this.props,{isSubmitted:i,value:r}=this.state;i||this.setState({value:t(parseInt(r,10)||0).toString(),isSubmitted:!0})};this.state={isSubmitted:!1,value:t.value.toString()}}componentDidUpdate(t){let{value:i}=this.props;t.value!==i&&this.setState({value:i.toString()})}render(){let{id:t,isDisabled:i,label:r}=this.props,{value:o}=this.state;return Ea.createElement(F.Input.Text,{id:t,value:o,isDisabled:i,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:Vd(this.onSubmit)},Ea.createElement(xw,null,Ea.createElement(F.Input.Label,{label:r,htmlFor:t})))}},vd=jg;var Sw=Gg.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;
`,Cw=Gg.span`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  margin-top: 10px;
  margin-right: 13px;
`,ww="photoeditorsdk-transformScaleWidth",kw="photoeditorsdk-transformScaleHeight",Tw=({showLabel:e=!0,label:t,isDisabled:i,valueHeight:r,valueWidth:o,labelWidth:n,labelHeight:s,onSubmitWidth:l,onSubmitHeight:c})=>Ao.createElement("div",null,Ao.createElement(F.Input.Label,{label:t,show:e}),Ao.createElement(Sw,null,Ao.createElement(vd,{id:ww,value:o,getCorrectValue:l,label:n,isDisabled:i}),Ao.createElement(Cw,null,"x"),Ao.createElement(vd,{id:kw,value:r,getCorrectValue:c,label:s,isDisabled:i}))),Ew=Tw;import Dw from"react";import{useState as Iw,useEffect as Mw}from"react";var Xg=()=>{let[e,t]=Iw([]);return Mw(()=>{var i;if(typeof window!==void 0&&((i=window.navigator)==null?void 0:i.mediaDevices)){let r=!0,o=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{r&&t(n.map(({deviceId:s,groupId:l,kind:c,label:d})=>({deviceId:s,groupId:l,kind:c,label:d})))}).catch(()=>null)};return window.navigator.mediaDevices.addEventListener("devicechange",o),o(),()=>{r=!1,window.navigator.mediaDevices.removeEventListener("devicechange",o)}}return null},[]),e};var BG=L(({tool:e,fullWidth:t=!1,icon:i,label:r,onClick:o})=>{let{custom:n}=bt();if(!Xg().some(({kind:c})=>c==="videoinput"))return null;let l=n.getButton("toolControlBarSecondaryButton");return Dw.createElement(l,{"data-test":I.LibraryWebcamButton,tool:e,label:r,ariaLabel:r,onClick:o,fullWidth:t,icon:i})});export{Du as a,L as b,K0 as c,N as d,Ft as e,Yl as f,Go as g,Xo as h,hl as i,io as j,pr as k,fl as l,dc as m,Nv as n,Vv as o,gI as p,bI as q,F as r,Bh as s,Ks as t,pc as u,qt as v,PH as w,zH as x,LH as y,ht as z,BH as A,Rc as B,mo as C,ee as D,H as E,ut as F,wC as G,bt as H,m2 as I,pd as J,gw as K,wf as L,vw as M,Ew as N,BG as O};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
