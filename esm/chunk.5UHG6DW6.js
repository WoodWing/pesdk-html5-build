import{a as B,g as xs,h as Nr,l as P,m as hs,p as ei,q as Dr,r as E,s as Gs,t as _r,v as Pr,w as Es,x as qn,y as Ns,z as Qe}from"./chunk.AN6FD3K2.js";import{$ as fe,H as go,P as en,Y as i,a as Bo,c as vo,ca as Os,da as V,ea as x,fa as Oo,ga as u,ia as s,ja as Qs,ka as D,la as ai,m as R,v as Mt,y as Jo}from"./chunk.BTYY4BFL.js";import{H as ye,I as xe,L as I,M as Me,N as ke,Q as ie,R as Ie,U as j,V as w,Y as Te,c as N,d,h as C,ia as lo,ma as Co,t as T,u as je,y as ko,z as Se}from"./chunk.QYMXB7UL.js";var mo=lo((Qi,_o)=>{"use strict";var cn="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";_o.exports=cn});var co=lo((Zi,Ro)=>{"use strict";var pn=mo();function $o(){}function Ho(){}Ho.resetWarningCache=$o;Ro.exports=function(){function e(n,o,a,l,p,f){if(f!==pn){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ho,resetWarningCache:$o};return r.PropTypes=r,r}});var po=lo((ta,Mo)=>{Mo.exports=co()();var ea,oa});var xo=lo((im,et)=>{"use strict";var _n=!1,ot=function(){};_n&&(tt=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var o=1;o<n;o++)r[o-1]=arguments[o];var a=0,l="Warning: "+t.replace(/%s/g,function(){return r[a++]});typeof console!="undefined"&&console.error(l);try{throw new Error(l)}catch(p){}},ot=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var o=2;o<n;o++)r[o-2]=arguments[o];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||tt.apply(null,[t].concat(r))});var tt;et.exports=ot});import oo from"react";import{ThemeProvider as Zs}from"styled-components";function ci(e){return!Object.prototype.hasOwnProperty.call(e,"name")}function pi(e){return!Object.prototype.hasOwnProperty.call(e,"name")}var Gr=class{};var Vr=class{};var Xr=class{constructor(t){this.name=t.name,this.coverImageUrl=t.coverImageUrl}loadCoverImage(t="anonymous"){return new Promise((r,n)=>{let o=new Image;o.addEventListener("load",()=>{r(o)}),o.addEventListener("error",()=>{n(new Error(`Failed to load image at ${this.coverImage}`))}),o.crossOrigin=t,o.src=this.coverImageUrl,this.coverImage=o})}};var Yr=class{constructor(t){this.title=t.title,this.category=t.category||t.title,this.thumbUrl=t.thumbUrl,this.rawUrl=t.rawUrl,this.authorName=t.authorName,this.authorAvatar=t.authorAvatar}loadThumbImage(t="anonymous"){return new Promise((r,n)=>{let o=new Image;o.addEventListener("load",()=>{r(o)}),o.addEventListener("error",()=>{n(new Error(`Failed to load image at ${this.thumbUrl}`))}),o.crossOrigin=t,o.src=this.thumbUrl,this.thumbImage=o})}getThumbImage(){return this.thumbUrl}};var no=class{getData(t){return new Promise((r,n)=>{let o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="json",o.onload=()=>{let{status:a}=o;a===200?r(o.response):n(new Error(`HTTP Status ${a}`))},o.send()})}},Kr=no;var qr=class{loadJSON(t){return new Kr().getData(t)}getCategories(){return Promise.resolve([])}searchImages(t){return Promise.resolve([])}};import nn from"react";import Jr from"react";import Qr from"styled-components";var Zr=Qr(fe)`
  width: ${e=>e.theme.measurements.advancedCard.large.width}px;
  height: ${e=>e.theme.measurements.advancedCard.large.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
`,on=r=>{var{isActive:e}=r,t=en(r,["isActive"]);return Jr.createElement(Zr,w({},t))},Lo=on;import tn from"styled-components";var Uo=tn(fe)`
  width: ${e=>e.theme.measurements.advancedCard.medium.width}px;
  height: ${e=>e.theme.measurements.advancedCard.medium.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`;import rn from"styled-components";var wo=rn(fe)`
  width: ${e=>e.theme.measurements.advancedCard.small.width}px;
  height: ${e=>e.theme.measurements.advancedCard.small.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`;var Ce=e=>{let t=e.type===T.LARGE,r=e.type===T.SMALL,n=Uo;return t?n=Lo:r&&(n=wo),nn.createElement(n,w({},e))};import sn from"styled-components";var Le=sn.div.attrs(e=>({"data-test":e["data-test"]||x.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`;import an from"react";import mn,{css as Do}from"styled-components";var ln=mn.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolControlBar};

  background: ${e=>e.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${e=>e.reverse?Do`
          border-left: 1px solid ${e.theme.toolControlBar.borderColor};
        `:Do`
          border-right: 1px solid ${e.theme.toolControlBar.borderColor};
        `}
`,Po=({reverse:e=!1,children:t})=>an.createElement(ln,{"data-test":x.ToolControlBar,reverse:e},t);import dn,{css as so}from"styled-components";var No=dn.div.attrs(()=>({"data-test":x.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${e=>e.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:e})=>e&&so`
      opacity: 1;
      visibility: visible;
      ${R()?so`
            display: block;
          `:so`
            display: flex;
          `}
    `}
`;import zo,{useRef as fn}from"react";function io(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function ao(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var la=Co(po());import Ue from"react";import ho from"react-dom";var uo={disabled:!1};import un from"react";var fo=un.createContext(null);var he="unmounted",W="exited",G="entering",oe="entered",bo="exiting",$=function(e){ao(t,e);function t(n,o){var a;a=e.call(this,n,o)||this;var l=o,p=l&&!l.isMounting?n.enter:n.appear,f;return a.appearStatus=null,n.in?p?(f=W,a.appearStatus=G):f=oe:n.unmountOnExit||n.mountOnEnter?f=he:f=W,a.state={status:f},a.nextCallback=null,a}t.getDerivedStateFromProps=function(o,a){var l=o.in;return l&&a.status===he?{status:W}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var a=null;if(o!==this.props){var l=this.state.status;this.props.in?l!==G&&l!==oe&&(a=G):(l===G||l===oe)&&(a=bo)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,a,l,p;return a=l=p=o,o!=null&&typeof o!="number"&&(a=o.exit,l=o.enter,p=o.appear!==void 0?o.appear:l),{exit:a,enter:l,appear:p}},r.updateStatus=function(o,a){o===void 0&&(o=!1),a!==null?(this.cancelNextCallback(),a===G?this.performEnter(o):this.performExit()):this.props.unmountOnExit&&this.state.status===W&&this.setState({status:he})},r.performEnter=function(o){var a=this,l=this.props.enter,p=this.context?this.context.isMounting:o,f=this.props.nodeRef?[p]:[ho.findDOMNode(this),p],h=f[0],v=f[1],g=this.getTimeouts(),b=p?g.appear:g.enter;if(!o&&!l||uo.disabled){this.safeSetState({status:oe},function(){a.props.onEntered(h)});return}this.props.onEnter(h,v),this.safeSetState({status:G},function(){a.props.onEntering(h,v),a.onTransitionEnd(b,function(){a.safeSetState({status:oe},function(){a.props.onEntered(h,v)})})})},r.performExit=function(){var o=this,a=this.props.exit,l=this.getTimeouts(),p=this.props.nodeRef?void 0:ho.findDOMNode(this);if(!a||uo.disabled){this.safeSetState({status:W},function(){o.props.onExited(p)});return}this.props.onExit(p),this.safeSetState({status:bo},function(){o.props.onExiting(p),o.onTransitionEnd(l.exit,function(){o.safeSetState({status:W},function(){o.props.onExited(p)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,a){a=this.setNextCallback(a),this.setState(o,a)},r.setNextCallback=function(o){var a=this,l=!0;return this.nextCallback=function(p){l&&(l=!1,a.nextCallback=null,o(p))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(o,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:ho.findDOMNode(this),p=o==null&&!this.props.addEndListener;if(!l||p){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=f[0],v=f[1];this.props.addEndListener(h,v)}o!=null&&setTimeout(this.nextCallback,o)},r.render=function(){var o=this.state.status;if(o===he)return null;var a=this.props,l=a.children,p=a.in,f=a.mountOnEnter,h=a.unmountOnExit,v=a.appear,g=a.enter,b=a.exit,c=a.timeout,S=a.addEndListener,k=a.onEnter,Q=a.onEntering,Z=a.onEntered,pe=a.onExit,ee=a.onExiting,ue=a.onExited,Oe=a.nodeRef,Fe=io(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ue.createElement(fo.Provider,{value:null},typeof l=="function"?l(o,Fe):Ue.cloneElement(Ue.Children.only(l),Fe))},t}(Ue.Component);$.contextType=fo;$.propTypes={};function te(){}$.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:te,onEntering:te,onEntered:te,onExit:te,onExiting:te,onExited:te};$.UNMOUNTED=he;$.EXITED=W;$.ENTERING=G;$.ENTERED=oe;$.EXITING=bo;var we=$;import Cn from"styled-components";var hn=Cn.div`
  display: flex;
  flex-direction: column;

  position: relative;
  transition: opacity 500ms ease-in, max-height 400ms ease-in-out;
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* note: this is important to avoid issues with the animation */
  margin: 0 !important;
  padding: 0 !important;

  > * {
    margin-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
    margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,jo=({show:e,children:t})=>{let r=fn(null),n={entering:{opacity:0,maxHeight:0,overflow:"hidden"},entered:{opacity:1,maxHeight:"100%",overflow:"visible"},exiting:{opacity:0,maxHeight:0,overflow:"hidden"},exited:{opacity:0,maxHeight:0,overflow:"hidden"}};return zo.createElement(we,{nodeRef:r,in:e,timeout:{exit:200},mountOnEnter:!0},o=>zo.createElement(hn,{style:n[o],"data-test":x.ToolControlBarExpandableControls,ref:r},t))};import bn,{css as gn}from"styled-components";var be=bn(go)`
  position: relative;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>R()||vo()?gn`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `:""}
`;be.defaultProps={direction:"vertical"};import vn,{css as Sn}from"styled-components";var yn=vn.div`
  position: relative;
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${e=>e.full?Sn`
            left: -${3*e.theme.measurements.advancedSpacer/2}px;
            width: calc(
              100% + ${3*e.theme.measurements.advancedSpacer}px
            );
          `:`
      left: ${3*e.theme.measurements.advancedSpacer/2}px;
      width: calc(100% - ${3*e.theme.measurements.advancedSpacer}px);
    `}
    border-bottom: 2px solid ${e=>e.theme.toolControlBar.separatorColor};
  }
`,De=yn;import xn from"styled-components";var Tn=xn.h2`
  color: ${e=>e.theme.toolControlBar.titleForeground};
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${e=>2*e.theme.measurements.advancedSpacer}px;
  margin-top: 0;
`,Pe=Tn;import H from"react";import In from"styled-components";var kn=In.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`,Wo=({name:e,isFirstCategory:t,isLastCategory:r,children:n})=>H.createElement(kn,null,!t&&H.createElement(u.Spacer,{count:2}),H.createElement(Pe,{"data-test":e},e),H.createElement(Le,{"data-test":x.CategoryItemsContainer},n),!r&&H.createElement(H.Fragment,null,H.createElement(u.Spacer,{count:2}),H.createElement(De,{full:!0})));import En from"styled-components";var An=En.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${e=>e.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${e=>e.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline1.case};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${e=>e.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
  /* prevent the padding from leaving the width of the parent  */
  box-sizing: border-box;
`,Go=An;import Bn from"react";import On from"styled-components";var Fn=On.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;

  /* calculate the max-height based on the padding and if the heading is used */
  max-height: calc(
    100% -
      ${e=>e.theme.measurements.advancedUIToolControlBar.paddingBottom+e.theme.measurements.advancedUIToolControlBar.paddingTop}px -
      ${e=>e.displayTitle?e.theme.measurements.mainCanvasActionBar.height-2:"0"}px
  );

  padding-top: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingTop}px;
  padding-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingBottom}px;

  > * {
    margin-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  /* The scrollable content needs a padding for the scrollbar position */
  > ${be} {
    margin-left: 0px;
    margin-right: 0px;
    padding-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    padding-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  > :not(:last-child) {
    margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,Vo=({children:e})=>{let{config:t}=i(),r=t.config.displayToolControlBarTitle;return Bn.createElement(Fn,{displayTitle:r},e)};import Xo from"react";import Ln,{css as So}from"styled-components";var Un=Ln.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolbar};

  background-color: ${e=>e.theme.toolbar.background};
  color: ${e=>e.theme.toolbar.foreground};
  ${e=>{let t=e.theme.toolbar.border?e.theme.toolbar.border:So`
          1px solid ${e.theme.toolbar.borderColor};
        `;return e.reverse?So`
          border-left: ${t};
        `:So`
          border-right: ${t};
        `}}
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolbar.marginBottom}px;
`,Yo=({reverse:e,children:t})=>Xo.createElement(Un,{reverse:e,"data-test":x.Toolbar},Xo.createElement(go,{direction:"vertical"},t));import Ko from"react";import qo,{css as yo}from"styled-components";var wn=qo(Jo)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${R()?yo`
        background-color: transparent;
      `:yo`
        background-color: inherit;
      `}

  ${e=>e.isActive&&yo`
      background-color: ${e.theme.toolbar.activeBackground};
      color: ${e.theme.toolbar.activeForeground};
    `}
`,Dn=qo.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`,Qo=e=>Ko.createElement(Dn,null,Ko.createElement(wn,w(w({},e),{"data-test":x.ToolbarItem})));import Pn from"styled-components";var Nn=Pn.li.attrs({role:"none"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.seperatorHeight}px;
  cursor: pointer;
  position: relative;
`,Zo=Nn;import Ne,{useRef as Xn}from"react";import{useRef as st,createElement as Wn}from"react";var zn=Co(xo());import*as mm from"react";import{useLayoutEffect as Rn,useEffect as $n,isValidElement as dm,cloneElement as cm,createContext as pm,forwardRef as um,memo as fm,useRef as Cm,useState as Hn,useCallback as Mn,useMemo as hm}from"react";var rt=jn()?Rn:$n;var bm=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();function jn(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function nt(){var e=Hn(Object.create(null)),t=e[1];return Mn(function(){t(Object.create(null))},[])}import{createPortal as Gn}from"react-dom";var Vn=function(t){var r=t.children,n=t.type,o=n===void 0?"reach-portal":n,a=st(null),l=st(null),p=nt();return rt(function(){if(!!a.current){var f=a.current.ownerDocument;return l.current=f==null?void 0:f.createElement(o),f.body.appendChild(l.current),p(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[o,p]),l.current?Gn(r,l.current):Wn("span",{ref:a})},it=Vn;import at,{css as To}from"styled-components";var Yn=at.div`
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* added line-height reset from appContainer */
  line-height: normal;
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  ${R()?To`
        position: -ms-device-fixed;
      `:To`
        position: fixed;
      `}
  top: ${e=>e.position.y-5}px;
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.toolbar};
  pointer-events: none;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${e=>e.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${e=>e.label}';
    position: absolute;
    color: ${e=>e.theme.tooltip.foreground};
    background: ${e=>e.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
    border-radius: ${e=>e.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${e=>e.reverse&&To`
      direction: rtl;

      &:before {
        border-left: 8px solid ${e.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}
`,Kn=at.span`
  display: none;
`,mt=({show:e=!0,reverse:t,position:r,children:n})=>{let o=Xn(null),{config:a}=i(),{measurements:l}=a,p=typeof n=="string"?n:"",f=r.x+l.advancedUIToolbar.width-10,h=r.x+l.advancedUIToolbar.width+16,v=t?"right":"left",g={entering:{opacity:0,[v]:`${f}px`},entered:{opacity:1,[v]:`${h}px`},exiting:{opacity:0,[v]:`${f}px`},exited:{opacity:0,[v]:`${f}px`}};return Ne.createElement(we,{nodeRef:o,in:e,timeout:{exit:500}},b=>b!=="exited"&&Ne.createElement(it,null,Ne.createElement(Yn,{ref:o,style:g[b],"data-test":x.Tooltip,reverse:t,position:r,label:p},Ne.createElement(Kn,null,p))))};var m={Card:Ce,CardContainer:Le,Toolbar:{Index:Yo,Item:Qo,Separator:Zo,Tooltip:mt},Itemsbar:be,BarSeparator:"",ItemsSeparator:De,Controlsbar:jo,ToolControlBarItems:Vo,Sidebar:{Index:Po,Heading:Go,SubHeading:Pe,TextCategory:Wo,ExpandableContainer:No}};import F from"react";import Ks from"styled-components";import Io from"react";import ge from"react";var _e=class extends ge.Component{constructor(){super(...arguments);this.renderIcon=t=>{let{tool:r,config:n}=this.props,o=n.state.config[r];if(o.icon){let l=o.icon;return ge.createElement(l,null)}let a=qn[t];return ge.createElement(a,null)||null};this.update=t=>{this.props.active.selectTool(t)}}getToolTitle(t){return this.props.config.locale[t].title}render(){let t=this.props.active.tool,{tool:r,custom:n}=this.props;if(r){let o=n.getAdvancedToolbarItem();return ge.createElement(o,{key:r,isActive:r===t,isReverse:this.props.isReverse,icon:this.renderIcon(r),onClick:()=>this.update(r),tool:r,label:this.getToolTitle(r)})}return ge.createElement(m.Toolbar.Separator,null)}};_e=V([D("active","config","custom"),s],_e);var lt=_e;var re=class extends Io.Component{render(){let{config:t}=this.props,r=t.config.order==="reverse";return Io.createElement(m.Toolbar.Index,{reverse:r},t.tools.map((n,o)=>Io.createElement(lt,{key:n||o,tool:n,isReverse:r})))}};re=V([D("config"),s],re);import y from"react";import Re from"react";import ve from"react";import M,{useRef as dt}from"react";import Jn from"styled-components";var Qn=Jn(u.Input.Slider)`
  padding-bottom: 16px;
`,Zn=s(()=>{let{adjustmentsTool:e}=i(),{categories:t,items:r,config:n,locale:o}=e,a=dt(!1),l=f=>{let h=e[f.identifier],v=dt(h),g=e.locale.categories[f.identifier]||f.name,b=c=>{a.current&&c!==v.current&&(e.toolSnapshot(),a.current=!1,v.current=c)};return M.createElement(Qn,{identifier:f.identifier,adjust:!0,key:f.identifier,label:g,value:h,onChange:c=>{e.editAdjustments({type:f.identifier,value:c}),a.current=h!==c},onMouseUp:b,onTouchEnd:b,snap:0})},p=(f,h)=>{let v=o.categories[f.identifier]||f.name;return f.items?M.createElement(m.Sidebar.TextCategory,{key:f.identifier,name:v,isFirstCategory:h===0,isLastCategory:h===t.length-1},f.items.map(l)):null};return n.flattenCategories?M.createElement(M.Fragment,null,r.map(l)):M.createElement(M.Fragment,null,t.map(p))}),ct=()=>M.createElement(m.Itemsbar,null,M.createElement(Zn,null));import es from"react";var pt=s(()=>{let{adjustmentsTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return es.createElement(n,{tool:d.ADJUSTMENT,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isDirty,onClick:o})});var ut=s(()=>{let{adjustmentsTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case ko.Items:return ve.createElement(ct,{key:o});case ko.Separator:return ve.createElement(m.ItemsSeparator,{full:!0,key:I()});case ko.RemoveAdjustmentButton:return ve.createElement(pt,{key:o});default:return null}else if(typeof o=="object")return ve.createElement(m.Controlsbar,{key:o.type,show:e.isDirty},o.children.map(a=>n(a)));return null};return ve.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var ft=s(({displayTitle:e})=>{let{adjustmentsTool:t}=i();return Re.createElement(Re.Fragment,null,e&&Re.createElement(m.Sidebar.Heading,null,t.locale.title),Re.createElement(ut,null))});import $e from"react";import X from"react";import Ct from"react";var ht=s(()=>{let{brushTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:n}=e;return Ct.createElement(u.Input.Selection,{label:t.selectColor},Ct.createElement(P,{tool:d.BRUSH,activeColor:e.color,colors:n,labelsColor:r,onChange:e.changeColor}))});import os from"react";var bt=s(()=>{let{brushTool:e}=i(),t=e.locale.controls;return os.createElement(u.Input.Slider,{"data-test":x.BrushHardness,label:t.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness})});import ts from"react";var gt=s(()=>{let{brushTool:e}=i(),t=e.locale.controls;return ts.createElement(u.Input.Slider,{"data-test":x.BrushSize,label:t.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize})});import rs from"react";var vt=s(()=>{let{brushTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return rs.createElement(n,{tool:d.BRUSH,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isDirty,onClick:o})});var St=s(()=>{let{brushTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case Se.BrushColorList:return X.createElement(ht,{key:o});case Se.BrushHardnessSlider:return X.createElement(bt,{key:o});case Se.BrushSizeSlider:return X.createElement(gt,{key:o});case Se.Separator:return X.createElement(m.ItemsSeparator,{full:!0,key:I()});case Se.RemoveBrushButton:return X.createElement(vt,{key:o});default:return null}else if(typeof o=="object")return X.createElement(m.Controlsbar,{key:o.type,show:e.isDirty},o.children.map(a=>n(a)));return null};return X.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var ns=({brushTool:e,displayTitle:t})=>$e.createElement($e.Fragment,null,t&&$e.createElement(m.Sidebar.Heading,null,e.locale.title),$e.createElement(St,null)),yt=D("brushTool")(s(ns));import He from"react";var xt=({displayTitle:e})=>{let{config:t}=i(),r=t.state.config[d.CUSTOM].toolControlBar,{title:n}=t.state.locale[d.CUSTOM];return He.createElement(He.Fragment,null,e&&He.createElement(m.Sidebar.Heading,null,n),He.createElement(r,{language:t.state.locale[d.CUSTOM]}))};import ze from"react";import ne from"react";import ss from"react";var Tt=s(()=>{let{filterTool:e}=i(),t=e.locale.controls,r=e.state,n=()=>{e.toolSnapshot()};return ss.createElement(u.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderIntensity,value:r.intensity,min:0,max:1,onChange:e.changeIntensity,onMouseUp:n,onTouchEnd:n,snap:r.isDuotone?.5:null,isDisabled:!e.isOptionSelected})});import L from"react";var is=s(()=>{let{filterTool:e,custom:t}=i(),{categories:r,config:n,items:o,locale:a}=e,l=t.getAdvancedItemCard(),p=t.getAdvancedCategoryCard(),f=(g,b)=>{let c=a.items[g.identifier]||g.name;return L.createElement(l,{tool:d.FILTER,type:T.MEDIUM,onClick:()=>e.selectFilter(g.identifier,g.defaultIntensity),key:g.identifier,image:g.thumbnailURI,label:c,style:{animationDelay:`${B(b)}s`},isActive:e.identifier===g.identifier},L.createElement(E,{withBackground:!0},c))},h=(g,b)=>{let{selectedCategoryIdentifier:c}=e,S=c===g.identifier,k=a.categories[g.identifier]||g.name;return g.items?L.createElement("div",{key:g.identifier},L.createElement(p,{isActive:S,tool:d.FILTER,type:T.LARGE,onClick:()=>e.toggleCategorySelection(g.identifier),image:g.thumbnailURI,label:k,style:{animationDelay:`${B(b)}s`}},L.createElement(E,{withBackground:!0,caret:!0,isActive:S},k)),L.createElement(m.Sidebar.ExpandableContainer,{show:S},g.items.map(f))):null},v=(g,b)=>{let c=a.categories[g.identifier]||g.name;return g.items?L.createElement(m.Sidebar.TextCategory,{key:g.identifier,name:c,isFirstCategory:b===0,isLastCategory:b===r.length-1},g.items.map(f)):null};return n.flattenCategories?L.createElement(L.Fragment,null,o.map(f)):n.categoryHeaderType===N.CARD?L.createElement(L.Fragment,null,r.map(h)):n.categoryHeaderType===N.TEXT?L.createElement(L.Fragment,null,r.map(v)):null}),It=()=>L.createElement(m.Itemsbar,null,L.createElement(m.CardContainer,null,L.createElement(is,null)));import as from"react";var kt=s(()=>{let{filterTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return as.createElement(n,{tool:d.FILTER,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:o})});var Et=s(()=>{let{filterTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case Me.Items:return ne.createElement(It,{key:o});case Me.Separator:return ne.createElement(m.ItemsSeparator,{full:!0,key:I()});case Me.RemoveFilterButton:return ne.createElement(kt,{key:o});case Me.FilterIntensitySlider:return ne.createElement(Tt,{key:o});default:return null}else if(typeof o=="object")return ne.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return ne.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var At=s(({displayTitle:e})=>{let{filterTool:t}=i();return ze.createElement(ze.Fragment,null,e&&ze.createElement(m.Sidebar.Heading,null,t.locale.title),ze.createElement(Et,null))});import We from"react";import se from"react";import ms from"react";var Bt=s(()=>{let{focusTool:e}=i(),t=e.locale.controls,r=()=>{e.toolSnapshot(t.sliderIntensity)};return ms.createElement(u.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderIntensity,value:e.relativeIntensity,min:0,max:100,divider:1,onChange:e.changeRelativeIntensity,onMouseUp:r,onTouchEnd:r,isDisabled:!e.isOptionSelected})});import Y from"react";var ls=s(()=>{let{focusTool:e,custom:t}=i(),{items:r}=e,n=(o,a)=>{let l=e.locale.items[o.identifier]||o.name,p=t.getAdvancedItemCard();return Y.createElement(p,{tool:d.FOCUS,type:T.LARGE,onClick:()=>e.selectFocus(o.identifier),key:o.identifier,image:o.thumbnailURI,label:l,style:{animationDelay:`${B(a)}s`},isActive:o.identifier===e.identifier},Y.createElement(E,{withBackground:!0},l))};return Y.createElement(Y.Fragment,null,r.map(n))}),Ot=()=>Y.createElement(m.Itemsbar,null,Y.createElement(m.CardContainer,null,Y.createElement(ls,null)));import ds from"react";var Ft=s(()=>{let{focusTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return ds.createElement(n,{tool:d.FOCUS,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:o})});var Lt=s(()=>{let{focusTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case je.Separator:return se.createElement(m.ItemsSeparator,{full:!0,key:I()});case je.RemoveFocusButton:return se.createElement(Ft,{key:o});case je.FocusIntensitySlider:return se.createElement(Bt,{key:o});case je.Items:return se.createElement(Ot,{key:o});default:return null}else if(typeof o=="object")return se.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return se.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Ut=s(({displayTitle:e})=>{let{focusTool:t}=i();return We.createElement(We.Fragment,null,e&&We.createElement(m.Sidebar.Heading,null,t.locale.title),We.createElement(Lt,null))});import Ve from"react";import z from"react";import wt from"react";var Dt=s(()=>{let{frameTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:n,tintable:o}=e;return wt.createElement(u.Input.Selection,{isDisabled:!o,label:t.selectColor},wt.createElement(P,{tool:d.FRAME,activeColor:e.color,colors:n,labelsColor:r,isDisabled:!o,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))});import Ge from"react";var Pt=s(()=>{let{frameTool:e,custom:t}=i(),{items:r}=e,n=e.state?e.state.identifier:null,o=(a,l)=>{let p=e.locale.items[a.identifier]||a.name,f=t.getAdvancedItemCard();return Ge.createElement(f,{tool:d.FRAME,type:T.MEDIUM,onClick:()=>e.selectFrame(a.identifier),key:a.identifier,image:a.thumbnailURI,label:p,style:{backgroundSize:"75%",animationDelay:`${B(l)}s`},isActive:a.identifier===n},Ge.createElement(E,{hidden:!0},p))};return Ge.createElement(m.Itemsbar,null,Ge.createElement(m.CardContainer,null,r.map(o)))});import cs from"react";var Nt=s(()=>{let{frameTool:e}=i(),t=e.locale.controls,r=n=>{e.toolSnapshot(n)};return cs.createElement(u.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:()=>{r(t.sliderOpacity)},onTouchEnd:()=>{r(t.sliderOpacity)},isDisabled:!e.isOptionSelected})});import ps from"react";var _t=s(()=>{let{frameTool:e}=i(),t=e.locale.controls,r=n=>{e.toolSnapshot(n)};return ps.createElement(u.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:()=>{r(t.sliderSize)},onTouchEnd:()=>{r(t.sliderSize)},isDisabled:!e.isOptionSelected})});import us from"react";var Rt=s(()=>{let{frameTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return us.createElement(n,{tool:d.FRAME,ariaLabel:r.buttonReset,onClick:o,isDisabled:!e.isOptionSelected,label:r.buttonReset})});var $t=s(()=>{let{frameTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case ie.Items:return z.createElement(Pt,{key:o});case ie.Separator:return z.createElement(m.ItemsSeparator,{full:!0,key:I()});case ie.FrameOpacitySlider:return z.createElement(Nt,{key:o});case ie.FrameSizeSlider:return z.createElement(_t,{key:o});case ie.FrameColorList:return z.createElement(Dt,{key:o});case ie.RemoveFrameButton:return z.createElement(Rt,{key:o});default:return null}else if(typeof o=="object")return z.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return z.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Ht=s(({displayTitle:e})=>{let{frameTool:t}=i();return Ve.createElement(Ve.Fragment,null,e&&Ve.createElement(m.Sidebar.Heading,null,t.locale.title),Ve.createElement($t,null))});import Xe from"react";import ae from"react";import A from"react";var fs=s(()=>{let{active:e,library:t,custom:r}=i(),{query:n,config:o,selectedCategoryIdentifier:a,categories:l,items:p}=t,f=r.getAdvancedCategoryCard(),h=r.getAdvancedItemCard(),v=(c,S)=>A.createElement(h,{tool:d.LIBRARY,type:T.MEDIUM,onClick:()=>e.newImage(c.rawUrl),key:`${c.identifier}-${S}`,image:c.thumbnailURI,label:c.name,style:{animationDelay:`${B(S)}s`},authorAvatar:c.authorAvatar,authorName:c.authorName},c.authorAvatar&&A.createElement(Mt,{url:c.authorAvatar}),c.authorName&&A.createElement(E,{withBackground:!0},c.authorName)),g=(c,S)=>{let k=a===c.identifier;return c.items?A.createElement("div",{key:c.identifier},A.createElement(f,{isActive:k,tool:d.LIBRARY,type:T.LARGE,onClick:()=>t.toggleCategorySelection(c.identifier),image:c.thumbnailURI,label:c.name,style:{animationDelay:`${B(S)}s`}},A.createElement(E,{withBackground:!0,caret:!0,isActive:k},c.name)),A.createElement(m.Sidebar.ExpandableContainer,{show:k},c.items.map(v))):null},b=(c,S)=>c.items?A.createElement(m.Sidebar.TextCategory,{key:c.identifier,name:c.name,isFirstCategory:S===0,isLastCategory:S===l.length-1},c.items.map(v)):null;return n?p.length?A.createElement(A.Fragment,null,p.map(v)):A.createElement("p",{"data-test":x.NoResult},t.locale.controls.noResults):o.flattenCategories?A.createElement(A.Fragment,null,p.map(v)):o.categoryHeaderType===N.CARD?A.createElement(A.Fragment,null,l.map(g)):o.categoryHeaderType===N.TEXT?A.createElement(A.Fragment,null,l.map(b)):null}),zt=()=>A.createElement(m.Itemsbar,null,A.createElement(m.CardContainer,null,A.createElement(fs,null)));import Cs from"react";var jt=s(()=>{let{library:e,active:t}=i(),{config:r}=e,n=e.locale.controls,o=()=>{t.selectWebcam(!0)};return r.enableWebcam?Cs.createElement(hs,{tool:d.LIBRARY,onClick:o,label:n.buttonWebcamOpen}):null});import bs from"react";var Wt=s(()=>{let{library:e}=i(),{libraryProvider:t}=e,r=e.locale.controls,n=o=>{e.fetchImages(o)};return t?bs.createElement(u.Input.Search,{onChange:n,placeholder:r.placeholderSearch}):null});import Gt from"react";var Vt=s(()=>{let{library:e,active:t,custom:r}=i(),{config:n}=e,o=e.locale.controls,a=r.getButton("toolControlBarPrimaryButton"),l=f=>{let{files:h}=f.target;if(h.length){let v=new FileReader;v.onload=g=>{t.newImage(g.target.result)},v.readAsDataURL(h[0])}},p=()=>{let f=document.getElementById("fileUpload");f&&f.click()};return n.enableUpload?Gt.createElement(a,{tool:d.LIBRARY,ariaLabel:o.buttonUpload,onClick:p,label:o.buttonUpload},Gt.createElement(u.Input.File,{onChange:l})):null});var Xt=s(()=>{let{library:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case ye.Items:return ae.createElement(zt,{key:o});case ye.OpenWebcamButton:return ae.createElement(jt,{key:o});case ye.SearchFieldInput:return ae.createElement(Wt,{key:o});case ye.Separator:return ae.createElement(m.ItemsSeparator,{full:!0,key:I()});case ye.UploadImageButton:return ae.createElement(Vt,{key:o});default:return null}};return ae.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Yt=s(({displayTitle:e})=>{let{library:t}=i();return Xe.createElement(Xe.Fragment,null,e&&Xe.createElement(m.Sidebar.Heading,null,t.locale.title),Xe.createElement(Xt,null))});import Ye from"react";import q from"react";import gs from"react";var Kt=s(()=>{let{overlayTool:e}=i(),{allBlendModes:t,blendMode:r}=e,n=e.locale.controls,o=a=>{e.changeBlendMode(a)};return gs.createElement(u.Input.CarouselSlider,{label:n.carouselBlendMode,defaultIdentifier:r,onSelect:o,list:t})});import K from"react";var vs=s(()=>{let{overlayTool:e,custom:t}=i(),{items:r,locale:n,identifier:o,selectOverlay:a}=e,l=(p,f)=>{let h=n.items[p.identifier]||p.name,v=t.getAdvancedItemCard();return K.createElement(v,{tool:d.OVERLAY,type:T.MEDIUM,onClick:()=>a(p.identifier),key:p.identifier,image:p.thumbnailURI,label:h,style:{animationDelay:`${B(f)}s`},isActive:p.identifier===o},K.createElement(E,{withBackground:!0},h))};return K.createElement(K.Fragment,null,r.map(l))}),qt=()=>K.createElement(m.Itemsbar,null,K.createElement(m.CardContainer,null,K.createElement(vs,null)));import Ss from"react";var Jt=s(()=>{let{overlayTool:e}=i(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return Ss.createElement(u.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:r,onTouchEnd:r,isDisabled:!e.isOptionSelected})});import ys from"react";var Qt=s(()=>{let{overlayTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return ys.createElement(n,{tool:d.OVERLAY,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:o})});var Zt=s(()=>{let{overlayTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case xe.Items:return q.createElement(qt,{key:o});case xe.Separator:return q.createElement(m.ItemsSeparator,{full:!0,key:I()});case xe.OverlayBlendModeCarousel:return q.createElement(Kt,{key:o});case xe.OverlayOpacitySlider:return q.createElement(Jt,{key:o});case xe.RemoveOverlayButton:return q.createElement(Qt,{key:o});default:return null}else if(typeof o=="object")return q.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return q.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var er=s(({displayTitle:e})=>{let{overlayTool:t}=i();return Ye.createElement(Ye.Fragment,null,e&&Ye.createElement(m.Sidebar.Heading,null,t.locale.title),Ye.createElement(Zt,null))});import Ke from"react";import me from"react";import or from"react";var tr=s(()=>{let{stickerTool:e}=i(),{colorList:t}=e,r=e.locale.controls,n=e.localeColor.colorPicker,o=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return or.createElement(u.Input.Selection,{isDisabled:o,label:r.selectColor},or.createElement(P,{tool:d.STICKER,activeSprite:e.id,activeColor:e.tintColor,colors:t,labelsColor:n,isDisabled:o,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))});import U from"react";var Ts=s(()=>{let{stickerTool:e,custom:t}=i(),{categories:r,selectedCategoryIdentifier:n,config:o,items:a,locale:l}=e,p=t.getAdvancedCategoryCard(),f=t.getAdvancedItemCard(),h=(b,c)=>{let S=l.items[b.identifier]||b.name;return U.createElement(f,{key:b.identifier,tool:d.STICKER,type:T.SMALL,onClick:()=>e.add(b.identifier),image:b.thumbnailURI,label:S,style:{backgroundSize:"75%",animationDelay:`${xs(c)}s`}},U.createElement(E,{hidden:!0},S))},v=(b,c)=>{let S=n===b.identifier,k=l.categories[b.identifier]||b.name;return b.items?U.createElement("div",{key:b.identifier},U.createElement(p,{isActive:S,tool:d.STICKER,type:T.LARGE,onClick:()=>e.toggleCategorySelection(b.identifier),image:b.thumbnailURI,label:k,style:{animationDelay:`${B(c)}s`}},U.createElement(E,{withBackground:!0,caret:!0,isActive:S},k)),U.createElement(m.Sidebar.ExpandableContainer,{show:S,key:`${b.identifier}-items`},b.items.map(h))):null},g=(b,c)=>{let S=l.categories[b.identifier]||b.name;return b.items?U.createElement(m.Sidebar.TextCategory,{key:b.identifier,name:S,isFirstCategory:c===0,isLastCategory:c===r.length-1},b.items.map(h)):null};return o.flattenCategories?U.createElement(U.Fragment,null,a.map(h)):o.categoryHeaderType===N.CARD?U.createElement(U.Fragment,null,r.map(v)):o.categoryHeaderType===N.TEXT?U.createElement(U.Fragment,null,r.map(g)):null}),rr=()=>U.createElement(m.Itemsbar,null,U.createElement(m.CardContainer,null,U.createElement(Ts,null)));import Is from"react";var nr=s(()=>{let{stickerTool:e}=i(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return Is.createElement(u.Input.Slider,{isDisabled:!e.isStickerSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:r,onTouchEnd:r})});import sr from"react";import ks from"styled-components";var As=ks.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${Es.VisuallyHidden}
`,ir=s(()=>{let{stickerTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarPrimaryButton"),o=()=>{let l=document.getElementById("fileUpload");l&&(l.value=null,l.click())},a=l=>{let{files:p}=l.target;e.addFiles(p)};return e.isCustomStickerEnabled?sr.createElement(n,{tool:d.STICKER,ariaLabel:r.buttonUpload,onClick:o,label:r.buttonUpload},sr.createElement(As,{onChange:a})):null});var ar=s(()=>{let{stickerTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case Te.Items:return me.createElement(rr,{key:o});case Te.Separator:return me.createElement(m.ItemsSeparator,{full:!0,key:I()});case Te.UploadStickerButton:return me.createElement(ir,{key:o});case Te.StickerColorList:return me.createElement(tr,{key:o});case Te.StickerOpacitySlider:return me.createElement(nr,{key:o});default:return null}};return me.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var mr=s(({displayTitle:e})=>{let{stickerTool:t}=i();return Ke.createElement(Ke.Fragment,null,e&&Ke.createElement(m.Sidebar.Heading,null,t.locale.title),Ke.createElement(ar,null))});import qe from"react";import _ from"react";import Rs from"styled-components";import lr from"react";var dr=s(()=>{let{textTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextSelected:n,backgroundColorList:o}=e;return lr.createElement(u.Input.Selection,{isDisabled:!n,label:t.selectBackgroundColor},lr.createElement(P,{tool:d.TEXT,activeSprite:e.id,activeColor:e.backgroundColor,colors:o,labelsColor:r,isDisabled:!n,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot}))});import Bs from"react";var cr=s(()=>{let{textTool:e}=i(),t=e.locale.controls,{fontFamily:r,fontStyle:n,fontWeight:o,fontFamilies:a,isTextSelected:l}=e,p=a.map(h=>({label:`${h.fontFamily} ${Os.getDisplayFontStyle(h)}`,fontWeight:h.fontWeight,fontStyle:h.fontStyle,fontFamily:h.fontFamily,value:h.identifier})),f=p.filter(({value:h})=>h===e.identifier)[0];return Bs.createElement(u.Input.Dropdown,{isDisabled:!l,style:{fontFamily:r,fontStyle:n,fontWeight:o},itemStyle:h=>({fontFamily:h.fontFamily,fontStyle:h.fontStyle,fontWeight:h.fontWeight}),label:t.dropdownFontFamily,list:p,onSelect:e.changeFont,selectedItem:f.label})});import Fs from"react";import Ls from"styled-components";var Us=Ls(u.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`,pr=s(()=>{let{textTool:e}=i(),t=e.locale.controls,{isTextSelected:r}=e,n=o=>{let a=o?parseFloat(o):0;e.setFontSize(Math.max(10,Math.min(690,a)))};return Fs.createElement(Us,{value:e.fontSize.toFixed(0),onSubmit:n,label:t.textFontSize,isDisabled:!r})});import ws from"react";var ur=s(()=>{let{textTool:e}=i(),t=e.locale.controls,{isTextSelected:r}=e,n=()=>{e.toolSnapshot()};return ws.createElement(u.Input.Slider,{isDisabled:!r,label:t.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:n,onTouchEnd:n,snap:1,divider:1,decimal:1})});import Ds from"react";var fr=s(()=>{let{textTool:e,custom:t}=i(),r=e.locale.controls,n=()=>{e.add()},o=t.getButton("toolControlBarPrimaryButton");return Ds.createElement(o,{tool:d.TEXT,ariaLabel:r.buttonNew,onClick:n,label:r.buttonNew})});import Eo from"react";import Ps from"styled-components";var _s=Ps(u.Input.Selection)`
  width: 50%;
`,Cr=s(()=>{let{textTool:e,custom:t}=i(),r=e.locale.controls,{isTextSelected:n,alignment:o}=e,a=["left","center","right"],l=t.getButton("textAlignment");return Eo.createElement(_s,{isDisabled:!n,inline:!0,label:r.selectAlignment,"data-test":x.TextAlignment},a.map(p=>{let f=Ns[p];return Eo.createElement(l,{tool:p,isDisabled:!n,ariaLabel:`Align ${p}`,isActive:p===o,key:p,style:{padding:"1px 3px 2px"},icon:Eo.createElement(f,null),onClick:()=>e.changeAlignment(p)})}))});import hr from"react";var br=s(()=>{let{textTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextSelected:n,colorList:o}=e;return hr.createElement(u.Input.Selection,{isDisabled:!n,label:t.selectFontColor},hr.createElement(P,{tool:d.TEXT,activeSprite:e.id,activeColor:e.textColor,colors:o,labelsColor:r,isDisabled:!n,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))});var $s=Rs.div`
  display: flex;
  justify-content: space-between;
`,Hs=({textTool:e})=>{let{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case j.NewTextButton:return _.createElement(fr,{key:o});case j.FontFamilyDropdown:return _.createElement(cr,{key:o});case j.Separator:return _.createElement(m.ItemsSeparator,{full:!0,key:I()});case j.TextColorList:return _.createElement(br,{key:o});case j.BackgroundColorList:return _.createElement(dr,{key:o});case j.LineSpacingSlider:return _.createElement(ur,{key:o});case j.TextAligmentList:return _.createElement(Cr,{key:o});case j.FontSizeInput:return _.createElement(pr,{key:o});default:return null}else if(typeof o=="object")return _.createElement($s,{key:o.type},o.children.map(a=>n(a)));return null};return _.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))},gr=D("textTool")(s(Hs));var vr=s(({displayTitle:e})=>{let{textTool:t}=i();return qe.createElement(qe.Fragment,null,e&&qe.createElement(m.Sidebar.Heading,null,t.locale.title),qe.createElement(gr,null))});import Je from"react";import le from"react";import Ms from"react";var Sr=s(()=>{let{textDesignTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarPrimaryButton"),o=()=>{e.add()};return Ms.createElement(n,{tool:d.TEXT_DESIGN,ariaLabel:r.buttonNew,onClick:o,label:r.buttonNew})});import zs from"react";var yr=s(()=>{let{textDesignTool:e,custom:t}=i(),r=e.locale.controls,{isTextDesignSelected:n}=e,o=t.getButton("toolControlBarSecondaryButton"),a=()=>{e.changeSeed()};return zs.createElement(o,{tool:d.TEXT_DESIGN,ariaLabel:r.buttonShuffle,isDisabled:!n,onClick:a,label:r.buttonShuffle})});import xr from"react";var Tr=s(()=>{let{textDesignTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextDesignSelected:n,colorList:o}=e;return xr.createElement(u.Input.Selection,{isDisabled:!n,label:t.selectColor},xr.createElement(P,{tool:d.TEXT_DESIGN,activeSprite:e.id,activeColor:e.color,colors:o,labelsColor:r,isDisabled:!n,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))});import J from"react";var js=s(()=>{let{textDesignTool:e,custom:t}=i(),{items:r,identifier:n}=e,o=l=>{e.changeIdentifier(l)},a=(l,p)=>{let f=t.getAdvancedItemCard();return J.createElement(f,{key:l.identifier,tool:d.TEXT_DESIGN,type:T.MEDIUM,onClick:()=>o(l.identifier),image:l.thumbnailURI,label:l.name||"",style:{animationDelay:`${B(p)}s`,backgroundSize:"60%"},isDisabled:!e.isTextDesignSelected,isActive:n===l.identifier},J.createElement(E,{hidden:!0},l.name))};return J.createElement(J.Fragment,null,r.map(a))}),Ir=()=>J.createElement(m.Itemsbar,null,J.createElement(m.CardContainer,null,J.createElement(js,null)));var kr=s(()=>{let{textDesignTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case Ie.Items:return le.createElement(Ir,{key:o});case Ie.Separator:return le.createElement(m.ItemsSeparator,{full:!0,key:I()});case Ie.NewTextDesignButton:return le.createElement(Sr,{key:o});case Ie.ShuffleLayoutButton:return le.createElement(yr,{key:o});case Ie.TextDesignColorList:return le.createElement(Tr,{key:o});default:return null}};return le.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Er=s(({displayTitle:e})=>{let{textDesignTool:t}=i();return Je.createElement(Je.Fragment,null,e&&Je.createElement(m.Sidebar.Heading,null,t.locale.title),Je.createElement(kr,null))});import Ze from"react";import de from"react";import Ws from"react";var Ar=s(()=>{let{transformTool:e}=i(),t=e.locale.controls,{forceDimensions:r,localOutputHeight:n,localOutputWidth:o}=e;return Ws.createElement(Gs,{isDisabled:r,showLabel:!0,valueHeight:n,valueWidth:o,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth})});import Vs from"react";var Br=s(()=>{let{transformTool:e,custom:t}=i(),r=e.locale.controls,{forceDimensions:n,lockResolution:o}=e,a=t.getCheckbox();return Vs.createElement(a,{tool:d.TRANSFORM,isDisabled:n,value:o,label:r.checkboxKeepResolution,checkMarkPosition:"right",onClick:e.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}})});import Xs from"react";var Or=s(()=>{let{transformTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return Xs.createElement(n,{tool:d.TRANSFORM,ariaLabel:r.buttonReset,onClick:o,label:r.buttonReset})});import O from"react";import{renderToStaticMarkup as Fr}from"react-dom/server";var Ys=s(()=>{let{transformTool:e,custom:t,editor:r}=i(),{categories:n,items:o,identifier:a,config:l,locale:p}=e,f=t.getAdvancedItemCard(),h=t.getAdvancedCategoryCard(),v=(c,S)=>{let{theme:k,measurements:Q}=r.configStore,Z=p.items[c.identifier]||c.name,pe=c.thumbnailURI||"",ee="80%";if(!e.checkIfTransformThumbnailExits(c.thumbnailURI)){let ue=c.identifier.includes("imgly_transform_common"),Oe=Qe.crops[c.identifier]||Qe.crops.imgly_transform_common_custom,Fe=O.createElement(Oe,{width:Q.advancedCard.medium.width-(ue?42:0),height:Q.advancedCard.medium.height-(ue?42:0),main:k.transform.crops.main,highlight:k.transform.crops.highlight,shadow:k.transform.crops.shadow});pe=`'data:image/svg+xml,${encodeURIComponent(Fr(Fe))}'`,ee=R()||vo()?"auto":"unset"}return O.createElement(f,{key:c.identifier,tool:d.TRANSFORM,type:T.MEDIUM,onClick:()=>e.changeIdentifier(c.identifier,!0),image:pe,label:Z,style:{backgroundSize:ee,animationDelay:`${B(S)}s`},isActive:c.identifier===a},O.createElement(E,null,Z))},g=(c,S)=>{let{theme:k,measurements:Q}=r.configStore,Z=e.selectedCategoryIdentifier===c.identifier,pe=p.categories[c.identifier]||c.name,ee=c.thumbnailURI||"";if(!c.items)return null;if(!e.checkIfTransformThumbnailExits(c.thumbnailURI)){let ue=Qe.categories[c.identifier]||Qe.crops.imgly_transform_common_custom,Oe=O.createElement(ue,{width:Q.advancedCard.large.width-42,height:Q.advancedCard.large.height-42,main:k.transform.crops.main,highlight:k.transform.crops.highlight,shadow:k.transform.crops.shadow});ee=`'data:image/svg+xml,${encodeURIComponent(Fr(Oe))}'`}return O.createElement("div",{key:c.identifier},O.createElement(h,{type:T.LARGE,onClick:()=>e.toggleCategorySelection(c.identifier),key:c.identifier,image:ee,style:{animationDelay:`${B(S)}s`},label:c.name,tool:d.TRANSFORM},O.createElement(E,{caret:!0,isActive:Z},pe)),O.createElement(m.Sidebar.ExpandableContainer,{show:Z},c.items.map(v)))},b=(c,S)=>{let k=p.categories[c.identifier]||c.name;return c.items?O.createElement(m.Sidebar.TextCategory,{key:c.identifier,name:k,isFirstCategory:S===0,isLastCategory:S===n.length-1},c.items.map(v)):null};return l.flattenCategories?O.createElement(O.Fragment,null,o.map(v)):l.categoryHeaderType===N.CARD?O.createElement(O.Fragment,null,n.map(g)):l.categoryHeaderType===N.TEXT?O.createElement(O.Fragment,null,n.map(b)):null}),Lr=()=>O.createElement(m.Itemsbar,null,O.createElement(m.CardContainer,null,O.createElement(Ys,null)));var Ur=s(()=>{let{transformTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case ke.Items:return de.createElement(Lr,{key:o});case ke.Separator:return de.createElement(m.ItemsSeparator,{full:!0,key:I()});case ke.ResetTransformButton:return de.createElement(Or,{key:o});case ke.KeepResolutionCheckbox:return de.createElement(Br,{key:o});case ke.CropSizeInput:return de.createElement(Ar,{key:o});default:return null}};return de.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var wr=s(({displayTitle:e})=>{let{transformTool:t}=i();return Ze.createElement(Ze.Fragment,null,e&&Ze.createElement(m.Sidebar.Heading,null,t.locale.title),Ze.createElement(Ur,null))});var ce=class extends y.Component{render(){let{config:t,active:r}=this.props,n=r.tool,o=t.config.displayToolControlBarTitle;return y.createElement(m.Sidebar.Index,{reverse:t.config.order==="reverse"},y.createElement(u.Switch.Index,{type:n},y.createElement(u.Switch.Case,{value:d.LIBRARY},y.createElement(Yt,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.FILTER},y.createElement(At,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.FOCUS},y.createElement(Ut,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.ADJUSTMENT},y.createElement(ft,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.OVERLAY},y.createElement(er,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.STICKER},y.createElement(mr,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.TEXT},y.createElement(vr,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.TEXT_DESIGN},y.createElement(Er,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.FRAME},y.createElement(Ht,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.BRUSH},y.createElement(yt,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.TRANSFORM},y.createElement(wr,{displayTitle:o})),y.createElement(u.Switch.Case,{value:d.CUSTOM},y.createElement(xt,{displayTitle:o}))))}};ce=V([D("active","config"),s],ce);var Rr=Ks.div`
  position: absolute;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width+e.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${e=>e.theme.webcam.backdrop};
  z-index: ${e=>e.theme.measurements.zIndex.disable};
`,Ee=class extends F.Component{static getDerivedStateFromError(t){return console.error(t),{hasError:!0}}render(){let{config:t,active:r}=this.props;return t.isOrderDefault?F.createElement(u.Container,null,r.isWebcam?F.createElement(Rr,{style:{left:0}}):null,F.createElement(_r,null),F.createElement(re,null),F.createElement(ce,null),F.createElement(Nr,null,F.createElement(Pr,null),F.createElement(Dr,null))):F.createElement(u.Container,null,r.isWebcam?F.createElement(Rr,{style:{right:0}}):null,F.createElement(_r,null),F.createElement(Nr,null,F.createElement(Pr,null),F.createElement(Dr,null)),F.createElement(ce,null),F.createElement(re,null))}};Ee=V([D("config","active"),s],Ee);import Ae from"react";import qs from"styled-components";var $r=class extends Ae.Component{constructor(t){super(t);this.ref=null;this.updatePosition=()=>{let{isReverse:t}=this.props,r={x:0,y:0};if(this.ref.current){let{top:n,height:o,left:a,right:l}=this.ref.current.getBoundingClientRect();r.y=n+o/4,r.x=t?window.innerWidth-l:a}this.setState({tooltipPosition:r})};this.mouseOver=t=>{this.updatePosition(),this.setState({hoverTool:t})};this.mouseOut=()=>{this.setState({hoverTool:null})};this.state={hoverTool:null,tooltipPosition:{x:0,y:0}},this.ref=Ae.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(t){let{isReverse:r}=this.props;r!==t.isReverse&&this.updatePosition()}render(){let{tool:t,isActive:r,isReverse:n,icon:o,label:a,onClick:l,className:p,children:f}=this.props,{hoverTool:h,tooltipPosition:v}=this.state;return Ae.createElement(Js,{ref:this.ref,onMouseOver:()=>this.mouseOver(t),onMouseOut:()=>this.mouseOut(),className:p},Ae.createElement(m.Toolbar.Item,{ariaLabel:a,isActive:r,onClick:()=>l(t)},o,f),Ae.createElement(m.Toolbar.Tooltip,{position:v,reverse:n,show:h===t},a))}},eo=$r,Js=qs.div`
  position: relative;
`;var to=class extends oo.Component{componentDidMount(){let{editor:t,storeProps:r}=this.props;this.editor=t,this.storeProps=r;let n=new ei(this.editor.configStore.config.custom.components,{advancedUICategoryCard:m.Card,advancedUIItemCard:m.Card,advancedUIToolbarItem:eo}),o={getAdvancedCategoryCard:n.getAdvancedCategoryCard,getAdvancedItemCard:n.getAdvancedItemCard,getAdvancedToolbarItem:n.getAdvancedToolbarItem,getDialog:n.getDialog,getButton:n.getButton,getColorItem:n.getColorItem,getCheckbox:n.getCheckbox};this.storeProps.custom=o,this.forceUpdate()}render(){return this.storeProps?oo.createElement(Qs,w({},this.storeProps),oo.createElement(Zs,{theme:w(w({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},oo.createElement(Ee,null))):null}};import Ao from"react";import Hr from"react-dom";import Be,{Suspense as oi,useMemo as ti}from"react";var ri=Be.lazy(()=>import("./ui/basic/index.js")),ni=e=>({filterTool:e.filterToolStore,focusTool:e.focusToolStore,adjustmentsTool:e.adjustmentsToolStore,overlayTool:e.overlayToolStore,frameTool:e.frameToolStore,brushTool:e.brushToolStore,transformTool:e.transformToolStore,scale:e.scale,sprite:e.spriteStore,stickerTool:e.spriteStore.stickerToolStore,textTool:e.spriteStore.textToolStore,textDesignTool:e.spriteStore.textDesignToolStore,library:e.libraryStore,modal:e.modalStore,snapping:e.snappingStore,config:e.configStore,active:e.activeStore,canvas:e.canvasStore,history:e.historyStore,editor:e}),ro=({editor:e})=>{let t=ti(()=>ni(e),[e]);return e.configStore.config.layout==="basic"?Be.createElement(oi,{fallback:Be.createElement("div",null)},Be.createElement(ri,{editor:e,storeProps:t})):Be.createElement(to,{editor:e,storeProps:t})};var Mr=class extends Bo{constructor(t,r){super();this.dispose=()=>{this.container&&(Hr.unmountComponentAtNode(this.container),this.removeAllListeners(C.EXPORT),this.removeAllListeners(C.HISTORY_CHANGE),this.removeAllListeners(C.EDITOR_READY),this.removeAllListeners(C.ERROR_IMAGE_LOADING),this.removeAllListeners(C.IMAGE_LOAD),this.removeAllListeners(C.TOOL_ENTER),this.removeAllListeners(C.STICKER_UPLOAD_ADD),this.removeAllListeners(C.ERROR_WEBGL_CONTEXT_LOST))};this.serialize=t=>this.editor.serialize(t);this.deserialize=t=>this.editor.deserialize(t);this.export=t=>this.editor.export(t);this.close=()=>this.editor.close();this.setImage=t=>this.editor.setImage(t,!0);this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.container=r,this.editor=new Oo(w({},t)),this.editor.configStore.events.on(C.EXPORT,n=>{this.emit(C.EXPORT,n)}),this.editor.configStore.events.on(C.CLOSE,()=>{this.dispose(),this.emit(C.CLOSE)}),this.editor.configStore.events.on(C.HISTORY_CHANGE,()=>{this.emit(C.HISTORY_CHANGE)}),this.editor.configStore.events.on(C.STICKER_UPLOAD_ADD,n=>{this.emit(C.STICKER_UPLOAD_ADD,n)})}hasChanges(){return this.editor.hasChanges()}},zr=class{constructor(){this.container=null}init(t){return new Promise((r,n)=>{if(typeof window=="undefined"){r();return}this.container=typeof t.container=="string"?document.querySelector(t.container):t.container,this.container?(this.editorApi=new Mr(t,this.container),Hr.render(Ao.createElement(jr,{editor:this.editorApi.editor}),this.container),this.editorApi.editor.configStore.events.on(C.EDITOR_READY,()=>{setTimeout(()=>{this.editorApi.emit(C.EDITOR_READY)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(C.ERROR_IMAGE_LOADING,o=>{setTimeout(()=>{this.editorApi.emit(C.ERROR_IMAGE_LOADING,o)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(C.ERROR_WEBGL_CONTEXT_LOST,o=>{setTimeout(()=>{this.editorApi.emit(C.ERROR_WEBGL_CONTEXT_LOST,o)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(C.IMAGE_LOAD,()=>{setTimeout(()=>{this.editorApi.emit(C.IMAGE_LOAD)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(C.TOOL_ENTER,o=>{setTimeout(()=>{this.editorApi.emit(C.TOOL_ENTER,o)},0),r(this.editorApi)})):n(new Error("Provide a container"))})}},jr=class extends Ao.Component{componentWillUnmount(){let{editor:t}=this.props;t.engine.dispose(),t.configStore.events.removeAllListeners(C.EXPORT),t.configStore.events.removeAllListeners(C.CLOSE),t.configStore.events.removeAllListeners(C.HISTORY_CHANGE),t.configStore.events.removeAllListeners(C.EDITOR_READY),t.configStore.events.removeAllListeners(C.ERROR_IMAGE_LOADING),t.configStore.events.removeAllListeners(C.IMAGE_LOAD),t.configStore.events.removeAllListeners(C.TOOL_ENTER),t.configStore.events.removeAllListeners(C.STICKER_UPLOAD_ADD),t.configStore.events.removeAllListeners(C.ERROR_WEBGL_CONTEXT_LOST)}render(){let{editor:t}=this.props;return Ao.createElement(ro,{editor:t})}},si={init:e=>new zr().init(e)};import Fo from"react";var Wr=class extends Fo.Component{constructor(t){super(t);this.ui=new Bo;this.serialize=t=>this.editor.serialize(t);this.deserialize=t=>this.editor.deserialize(t);this.export=t=>this.editor.export(t);this.close=()=>this.editor.close();this.setImage=t=>this.editor.setImage(t,!0);this.dispose=()=>{this.ui.removeAllListeners(C.EXPORT),this.ui.removeAllListeners(C.HISTORY_CHANGE),this.ui.removeAllListeners(C.EDITOR_READY),this.ui.removeAllListeners(C.ERROR_IMAGE_LOADING),this.ui.removeAllListeners(C.IMAGE_LOAD),this.ui.removeAllListeners(C.TOOL_ENTER),this.ui.removeAllListeners(C.STICKER_UPLOAD_ADD),this.ui.removeAllListeners(C.ERROR_WEBGL_CONTEXT_LOST)};this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.editor=new Oo(w({},t)),this.editor.configStore.events.on(C.EXPORT,r=>{this.ui.emit(C.EXPORT,r)}),this.editor.configStore.events.on(C.CLOSE,()=>{this.componentWillUnmount(),this.ui.emit(C.CLOSE)}),this.editor.configStore.events.on(C.HISTORY_CHANGE,()=>{this.ui.emit(C.HISTORY_CHANGE)}),this.editor.configStore.events.on(C.EDITOR_READY,()=>{this.ui.emit(C.EDITOR_READY)}),this.editor.configStore.events.on(C.ERROR_IMAGE_LOADING,r=>{this.ui.emit(C.ERROR_IMAGE_LOADING,r)}),this.editor.configStore.events.on(C.IMAGE_LOAD,()=>{this.ui.emit(C.IMAGE_LOAD)}),this.editor.configStore.events.on(C.TOOL_ENTER,r=>{this.ui.emit(C.TOOL_ENTER,r)}),this.editor.configStore.events.on(C.STICKER_UPLOAD_ADD,r=>{this.ui.emit(C.STICKER_UPLOAD_ADD,r)}),this.editor.configStore.events.on(C.ERROR_WEBGL_CONTEXT_LOST,()=>{this.ui.emit(C.ERROR_WEBGL_CONTEXT_LOST)})}componentWillUnmount(){this.dispose()}hasChanges(){return this.editor.hasChanges()}render(){return Fo.createElement(ro,{editor:this.editor})}},ii=e=>typeof window=="undefined"?null:Fo.createElement(Wr,w({},e));var HS=()=>{let{active:e}=i();return e.newImage};var jS=()=>i().config.isLayoutAdvanced;ai({isolateGlobalState:!0});var{Container:cy,Input:mi,ColorItem:py,ColorItemBase:uy,ColorItemBackground:fy,ColorItemTiledBackground:Cy,ColorItemActiveOverlay:hy,Dialog:by,DialogBase:gy,DialogContainer:vy,DialogBackdrop:Sy,DialogHeader:yy,DialogBody:xy,DialogFooter:Ty,DialogSpinner:Iy}=u,{Search:li,Label:ky,Checkbox:Ey,CheckboxBase:Ay,CheckboxInput:By,CheckboxCheckMark:Oy}=mi,Fy=Ce,Ly=Ce,Uy=li;export{Xr as a,Yr as b,ci as c,Vr as d,jS as e,HS as f,pi as g,qr as h,Gr as i,cy as j,py as k,uy as l,fy as m,Cy as n,hy as o,by as p,gy as q,vy as r,ii as s,Sy as t,yy as u,xy as v,Ty as w,Iy as x,ky as y,eo as z,Ey as A,Ay as B,By as C,Oy as D,Fy as E,Ly as F,Uy as G,si as H};
