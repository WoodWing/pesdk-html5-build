import{A as fo,D as $o,E as Me,F as Co,G as i,H as P,J as ho,K as Mo,L as bo,M as zo,N as Go,a as s,b as No,c as w,e as $e,g as po,l as me,m as k,n as uo,o as _o,q as f,v as Ro,w as Ho,y as Ie}from"./chunk-QQ7VGXJU.js";import{Da as se,Ga as ie,H as c,I as N,Ia as ae,J as I,Ma as d,Na as He,Qa as x,Va as y,W as Re,Z as Te,Za as B,_a as Po,a as U,b as Ne,c as Do,d as Pe,e as Uo,ea as ye,f as M,ia as j,oa as te,qa as re,r as wo,v as _e,va as ne,w as _,ya as H}from"./chunk-6ATCXC7H.js";var Jo=Pe((_i,qo)=>{"use strict";var Cn="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";qo.exports=Cn});var ot=Pe((Ri,et)=>{"use strict";var hn=Jo();function Qo(){}function Zo(){}Zo.resetWarningCache=Qo;et.exports=function(){function e(n,o,a,l,u,C){if(C!==hn){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Zo,resetWarningCache:Qo};return r.PropTypes=r,r}});var rt=Pe((Mi,tt)=>{tt.exports=ot()();var Hi,$i});var gt=Pe((Va,bt)=>{"use strict";var Mn=!1,Ct=function(){};Mn&&(ht=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var o=1;o<n;o++)r[o-1]=arguments[o];var a=0,l="Warning: "+t.replace(/%s/g,function(){return r[a++]});typeof console!="undefined"&&console.error(l);try{throw new Error(l)}catch(u){}},Ct=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var o=2;o<n;o++)r[o-2]=arguments[o];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||ht.apply(null,[t].concat(r))});var ht;bt.exports=Ct});import mo from"react";import{ThemeProvider as Ks}from"styled-components";import ln from"react";import tn from"react";import rn from"styled-components";var nn=rn(me)`
  width: ${e=>e.theme.measurements.advancedCard.large.width}px;
  height: ${e=>e.theme.measurements.advancedCard.large.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
`,sn=r=>{var n=r,{isActive:e}=n,t=Do(n,["isActive"]);return tn.createElement(nn,U({},t))},Wo=sn;import an from"styled-components";var jo=an(me)`
  width: ${e=>e.theme.measurements.advancedCard.medium.width}px;
  height: ${e=>e.theme.measurements.advancedCard.medium.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`;import mn from"styled-components";var Yo=mn(me)`
  width: ${e=>e.theme.measurements.advancedCard.small.width}px;
  height: ${e=>e.theme.measurements.advancedCard.small.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`;var xe=e=>{let t=e.type===I.LARGE,r=e.type===I.SMALL,n=jo;return t?n=Wo:r&&(n=Yo),ln.createElement(n,U({},e))};import dn from"styled-components";var ze=dn.div.attrs(e=>({"data-test":e["data-test"]||y.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`;import cn from"react";import pn,{css as Vo}from"styled-components";var un=pn.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolControlBar};

  background: ${e=>e.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${e=>e.reverse?Vo`
          border-left: 1px solid ${e.theme.toolControlBar.borderColor};
        `:Vo`
          border-right: 1px solid ${e.theme.toolControlBar.borderColor};
        `}
`,Xo=({reverse:e=!1,children:t})=>cn.createElement(un,{"data-test":y.ToolControlBar,reverse:e},t);import fn,{css as go}from"styled-components";var Ko=fn.div.attrs(()=>({"data-test":y.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${e=>e.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:e})=>e&&go`
      opacity: 1;
      visibility: visible;
      ${_()?go`
            display: block;
          `:go`
            display: flex;
          `}
    `}
`;import nt,{useRef as gn}from"react";function So(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function vo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Vi=Uo(rt());import Ge from"react";import Io from"react-dom";var To={disabled:!1};import bn from"react";var yo=bn.createContext(null);var ke="unmounted",Y="exited",V="entering",le="entered",xo="exiting",$=function(e){vo(t,e);function t(n,o){var a;a=e.call(this,n,o)||this;var l=o,u=l&&!l.isMounting?n.enter:n.appear,C;return a.appearStatus=null,n.in?u?(C=Y,a.appearStatus=V):C=le:n.unmountOnExit||n.mountOnEnter?C=ke:C=Y,a.state={status:C},a.nextCallback=null,a}t.getDerivedStateFromProps=function(o,a){var l=o.in;return l&&a.status===ke?{status:Y}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var a=null;if(o!==this.props){var l=this.state.status;this.props.in?l!==V&&l!==le&&(a=V):(l===V||l===le)&&(a=xo)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,a,l,u;return a=l=u=o,o!=null&&typeof o!="number"&&(a=o.exit,l=o.enter,u=o.appear!==void 0?o.appear:l),{exit:a,enter:l,appear:u}},r.updateStatus=function(o,a){o===void 0&&(o=!1),a!==null?(this.cancelNextCallback(),a===V?this.performEnter(o):this.performExit()):this.props.unmountOnExit&&this.state.status===Y&&this.setState({status:ke})},r.performEnter=function(o){var a=this,l=this.props.enter,u=this.context?this.context.isMounting:o,C=this.props.nodeRef?[u]:[Io.findDOMNode(this),u],h=C[0],S=C[1],g=this.getTimeouts(),b=u?g.appear:g.enter;if(!o&&!l||To.disabled){this.safeSetState({status:le},function(){a.props.onEntered(h)});return}this.props.onEnter(h,S),this.safeSetState({status:V},function(){a.props.onEntering(h,S),a.onTransitionEnd(b,function(){a.safeSetState({status:le},function(){a.props.onEntered(h,S)})})})},r.performExit=function(){var o=this,a=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Io.findDOMNode(this);if(!a||To.disabled){this.safeSetState({status:Y},function(){o.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:xo},function(){o.props.onExiting(u),o.onTransitionEnd(l.exit,function(){o.safeSetState({status:Y},function(){o.props.onExited(u)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,a){a=this.setNextCallback(a),this.setState(o,a)},r.setNextCallback=function(o){var a=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,a.nextCallback=null,o(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(o,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:Io.findDOMNode(this),u=o==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var C=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=C[0],S=C[1];this.props.addEndListener(h,S)}o!=null&&setTimeout(this.nextCallback,o)},r.render=function(){var o=this.state.status;if(o===ke)return null;var a=this.props,l=a.children,u=a.in,C=a.mountOnEnter,h=a.unmountOnExit,S=a.appear,g=a.enter,b=a.exit,p=a.timeout,v=a.addEndListener,E=a.onEnter,Z=a.onEntering,ee=a.onEntered,Se=a.onExit,oe=a.onExiting,ve=a.onExited,Ue=a.nodeRef,we=So(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ge.createElement(yo.Provider,{value:null},typeof l=="function"?l(o,we):Ge.cloneElement(Ge.Children.only(l),we))},t}(Ge.Component);$.contextType=yo;$.propTypes={};function de(){}$.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:de,onEntering:de,onEntered:de,onExit:de,onExiting:de,onExited:de};$.UNMOUNTED=ke;$.EXITED=Y;$.ENTERING=V;$.ENTERED=le;$.EXITING=xo;var Ee=$;import Sn from"styled-components";var vn=Sn.div`
  display: flex;
  flex-direction: column;

  position: relative;
  transition: opacity 500ms ease-in, max-height 400ms ease-in-out;
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* note: this is important to avoid issues with the animation */
  margin: 0 !important;
  padding: 0 !important;

  > * {
    margin-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
    margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,st=({show:e,children:t})=>{let r=gn(null),n={entering:{opacity:0,maxHeight:0,overflow:"hidden"},entered:{opacity:1,maxHeight:"100%",overflow:"visible"},exiting:{opacity:0,maxHeight:0,overflow:"hidden"},exited:{opacity:0,maxHeight:0,overflow:"hidden"}};return nt.createElement(Ee,{nodeRef:r,in:e,timeout:{exit:200},mountOnEnter:!0},o=>nt.createElement(vn,{style:n[o],"data-test":y.ToolControlBarExpandableControls,ref:r},t))};import Tn,{css as yn}from"styled-components";var Ae=Tn($e)`
  position: relative;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>_()||_e()?yn`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `:""}
`;Ae.defaultProps={direction:"vertical"};import In,{css as xn}from"styled-components";var kn=In.div`
  position: relative;
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${e=>e.full?xn`
            left: -${3*e.theme.measurements.advancedSpacer/2}px;
            width: calc(
              100% + ${3*e.theme.measurements.advancedSpacer}px
            );
          `:`
      left: ${3*e.theme.measurements.advancedSpacer/2}px;
      width: calc(100% - ${3*e.theme.measurements.advancedSpacer}px);
    `}
    border-bottom: 2px solid ${e=>e.theme.toolControlBar.separatorColor};
  }
`,We=kn;import En from"styled-components";var An=En.h2`
  color: ${e=>e.theme.toolControlBar.titleForeground};
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${e=>2*e.theme.measurements.advancedSpacer}px;
  margin-top: 0;
`,je=An;import z from"react";import Bn from"styled-components";var On=Bn.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`,it=({name:e,isFirstCategory:t,isLastCategory:r,children:n})=>z.createElement(On,null,!t&&z.createElement(f.Spacer,{count:2}),z.createElement(je,{"data-test":e},e),z.createElement(ze,{"data-test":y.CategoryItemsContainer},n),!r&&z.createElement(z.Fragment,null,z.createElement(f.Spacer,{count:2}),z.createElement(We,{full:!0})));import Fn from"styled-components";var Ln=Fn.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${e=>e.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${e=>e.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline1.case};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${e=>e.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
  /* prevent the padding from leaving the width of the parent  */
  box-sizing: border-box;
`,at=Ln;import Dn from"react";import Un from"styled-components";var wn=Un.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;

  overflow-y: auto;
  overflow-x: hidden;

  /* calculate the max-height based on the padding and if the heading is used */
  max-height: calc(
    100% -
      ${e=>e.theme.measurements.advancedUIToolControlBar.paddingBottom+e.theme.measurements.advancedUIToolControlBar.paddingTop}px -
      ${e=>e.displayTitle?e.theme.measurements.mainCanvasActionBar.height-2:"0"}px
  );

  padding-top: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingTop}px;
  padding-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingBottom}px;

  > * {
    margin-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  /* The scrollable content needs a padding for the scrollbar position */
  > ${Ae} {
    margin-left: 0px;
    margin-right: 0px;
    padding-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    padding-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  > :not(:last-child) {
    margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,mt=({children:e})=>{let{config:t}=i(),r=t.config.displayToolControlBarTitle;return Dn.createElement(wn,{displayTitle:r},e)};import lt from"react";import Nn,{css as ko}from"styled-components";var Pn=Nn.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolbar};

  background-color: ${e=>e.theme.toolbar.background};
  color: ${e=>e.theme.toolbar.foreground};
  ${e=>{let t=e.theme.toolbar.border?e.theme.toolbar.border:ko`
          1px solid ${e.theme.toolbar.borderColor};
        `;return e.reverse?ko`
          border-left: ${t};
        `:ko`
          border-right: ${t};
        `}}
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolbar.marginBottom}px;
`,dt=({reverse:e,children:t})=>lt.createElement(Pn,{reverse:e,"data-test":y.Toolbar},lt.createElement($e,{direction:"vertical"},t));import ct from"react";import pt,{css as Eo}from"styled-components";var _n=pt(po)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${_()?Eo`
        background-color: transparent;
      `:Eo`
        background-color: inherit;
      `}

  ${e=>e.isActive&&Eo`
      background-color: ${e.theme.toolbar.activeBackground};
      color: ${e.theme.toolbar.activeForeground};

      svg {
        color: ${e.theme.toolbar.activeForeground};
      }
    `}
`,Rn=pt.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`,ut=e=>ct.createElement(Rn,null,ct.createElement(_n,Ne(U({},e),{"data-test":y.ToolbarItem})));import Hn from"styled-components";var $n=Hn.li.attrs({role:"none"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.seperatorHeight}px;
  cursor: pointer;
  position: relative;
`,ft=$n;import Ye,{useRef as Jn}from"react";import{useRef as Tt,createElement as Xn}from"react";var Yn=Uo(gt());import*as Xa from"react";import{useLayoutEffect as zn,useEffect as Gn,isValidElement as qa,cloneElement as Ja,createContext as Qa,forwardRef as Za,memo as em,useRef as om,useState as Wn,useCallback as jn,useMemo as tm}from"react";var St=Vn()?zn:Gn;var rm=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();function Vn(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function vt(){var e=Wn(Object.create(null)),t=e[1];return jn(function(){t(Object.create(null))},[])}import{createPortal as Kn}from"react-dom";var qn=function(t){var r=t.children,n=t.type,o=n===void 0?"reach-portal":n,a=Tt(null),l=Tt(null),u=vt();return St(function(){if(!!a.current){var C=a.current.ownerDocument;return l.current=C==null?void 0:C.createElement(o),C.body.appendChild(l.current),u(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[o,u]),l.current?Kn(r,l.current):Xn("span",{ref:a})},yt=qn;import It,{css as Ao}from"styled-components";var Qn=It.div`
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* added line-height reset from appContainer */
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  ${_()?Ao`
        position: -ms-device-fixed;
      `:Ao`
        position: fixed;
      `}
  top: ${e=>e.position.y-5}px;
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.toolbar};
  pointer-events: none;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${e=>e.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${e=>e.label}';
    position: absolute;
    color: ${e=>e.theme.tooltip.foreground};
    background: ${e=>e.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
    border-radius: ${e=>e.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${e=>e.reverse&&Ao`
      direction: rtl;

      &:before {
        border-left: 8px solid ${e.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}
`,Zn=It.span`
  display: none;
`,xt=({show:e=!0,reverse:t,position:r,children:n})=>{let o=Jn(null),{config:a}=i(),{measurements:l}=a,u=typeof n=="string"?n:"",C=r.x+l.advancedUIToolbar.width-10,h=r.x+l.advancedUIToolbar.width+16,S=t?"right":"left",g={entering:{opacity:0,[S]:`${C}px`},entered:{opacity:1,[S]:`${h}px`},exiting:{opacity:0,[S]:`${C}px`},exited:{opacity:0,[S]:`${C}px`}};return Ye.createElement(Ee,{nodeRef:o,in:e,timeout:{exit:500}},b=>b!=="exited"&&Ye.createElement(yt,null,Ye.createElement(Qn,{ref:o,style:g[b],"data-test":y.Tooltip,reverse:t,position:r,label:u},Ye.createElement(Zn,null,u))))};var m={Card:xe,CardContainer:ze,Toolbar:{Index:dt,Item:ut,Separator:ft,Tooltip:xt},Itemsbar:Ae,BarSeparator:"",ItemsSeparator:We,Controlsbar:st,ToolControlBarItems:mt,Sidebar:{Index:Xo,Heading:at,SubHeading:je,TextCategory:it,ExpandableContainer:Ko}};import F from"react";import Ys from"styled-components";import Bo from"react";import Be from"react";var Ve=class extends Be.Component{constructor(){super(...arguments);this.renderIcon=t=>{let{tool:r,config:n}=this.props,o=n.state.config[r];if("icon"in o){let l=o.icon;return Be.createElement(l,null)}let a=Ro[t];return Be.createElement(a,null)||null};this.update=t=>{this.props.active.selectTool(t)}}getToolTitle(t){return this.props.config.locale[t].title}render(){let t=this.props.active.tool,{tool:r,custom:n}=this.props;if(r){let o=n.getAdvancedToolbarItem();return Be.createElement(o,{key:r,isActive:r===t,isReverse:this.props.isReverse,icon:this.renderIcon(r),onClick:()=>this.update(r),tool:r,label:this.getToolTitle(r)})}return Be.createElement(m.Toolbar.Separator,null)}};Ve=M([w("active","config","custom"),s],Ve);var kt=Ve;var ce=class extends Bo.Component{render(){let{config:t}=this.props,r=t.config.order==="reverse";return Bo.createElement(m.Toolbar.Index,{reverse:r},t.tools.map((n,o)=>Bo.createElement(kt,{key:n||o,tool:n,isReverse:r})))}};ce=M([w("config"),s],ce);import T from"react";import Xe from"react";import Oe from"react";import G,{useRef as Et}from"react";import es from"styled-components";var os=es(f.Input.Slider)`
  padding-bottom: 16px;
`,ts=s(()=>{let{adjustmentsTool:e}=i(),{categories:t,items:r,config:n,locale:o}=e,a=Et(!1),l=C=>{let h=e[C.identifier],S=Et(h),g=e.locale.categories[C.identifier]||C.name,b=p=>{a.current&&p!==S.current&&(e.toolSnapshot(),a.current=!1,S.current=p)};return G.createElement(os,{identifier:C.identifier,adjust:!0,key:C.identifier,label:g,value:h,onChange:p=>{e.editAdjustments({type:C.identifier,value:p}),a.current=h!==p},onMouseUp:b,onTouchEnd:b,snap:0})},u=(C,h)=>{let S=o.categories[C.identifier]||C.name;return C.items?G.createElement(m.Sidebar.TextCategory,{key:C.identifier,name:S,isFirstCategory:h===0,isLastCategory:h===t.length-1},C.items.map(l)):null};return n.flattenCategories?G.createElement(G.Fragment,null,r.map(l)):G.createElement(G.Fragment,null,t.map(u))}),At=()=>G.createElement(m.Itemsbar,null,G.createElement(ts,null));import rs from"react";var Bt=s(()=>{let{adjustmentsTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return rs.createElement(n,{tool:c.ADJUSTMENT,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isDirty,onClick:o})});var Ot=s(()=>{let{adjustmentsTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case Re.Items:return Oe.createElement(At,{key:o});case Re.Separator:return Oe.createElement(m.ItemsSeparator,{full:!0,key:x()});case Re.RemoveAdjustmentButton:return Oe.createElement(Bt,{key:o});default:return null}else if(typeof o=="object")return Oe.createElement(m.Controlsbar,{key:o.type,show:e.isDirty},o.children.map(a=>n(a)));return null};return Oe.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Ft=s(({displayTitle:e})=>{let{adjustmentsTool:t}=i();return Xe.createElement(Xe.Fragment,null,e&&Xe.createElement(m.Sidebar.Heading,null,t.locale.title),Xe.createElement(Ot,null))});import Ke from"react";import X from"react";import Lt from"react";var Dt=s(()=>{let{brushTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:n}=e;return Lt.createElement(f.Input.Selection,{label:t.selectColor},Lt.createElement(P,{tool:c.BRUSH,activeColor:e.color,colors:n,labelsColor:r,onChange:e.changeColor}))});import ns from"react";var Ut=s(()=>{let{brushTool:e}=i(),t=e.locale.controls;return ns.createElement(f.Input.Slider,{"data-test":y.BrushHardness,label:t.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness})});import ss from"react";var wt=s(()=>{let{brushTool:e}=i(),t=e.locale.controls;return ss.createElement(f.Input.Slider,{"data-test":y.BrushSize,label:t.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize})});import is from"react";var Nt=s(()=>{let{brushTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return is.createElement(n,{tool:c.BRUSH,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isDirty,onClick:o})});var Pt=s(()=>{let{brushTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case se.BrushColorList:return X.createElement(Dt,{key:o});case se.BrushHardnessSlider:return X.createElement(Ut,{key:o});case se.BrushSizeSlider:return X.createElement(wt,{key:o});case se.Separator:return X.createElement(m.ItemsSeparator,{full:!0,key:x()});case se.RemoveBrushButton:return X.createElement(Nt,{key:o});default:return null}else if(typeof o=="object")return X.createElement(m.Controlsbar,{key:o.type,show:e.isDirty},o.children.map(a=>n(a)));return null};return X.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var as=({brushTool:e,displayTitle:t})=>Ke.createElement(Ke.Fragment,null,t&&Ke.createElement(m.Sidebar.Heading,null,e.locale.title),Ke.createElement(Pt,null)),_t=w("brushTool")(s(as));import qe from"react";var Rt=({displayTitle:e})=>{let{config:t}=i(),r=t.state.config[c.CUSTOM].toolControlBar,{title:n}=t.state.locale[c.CUSTOM];return qe.createElement(qe.Fragment,null,e&&qe.createElement(m.Sidebar.Heading,null,n),qe.createElement(r,{language:t.state.locale[c.CUSTOM]}))};import Je from"react";import pe from"react";import ms from"react";var Ht=s(()=>{let{filterTool:e}=i(),t=e.locale.controls,r=e.state,n=()=>{e.toolSnapshot()};return ms.createElement(f.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderIntensity,value:r.intensity,min:0,max:1,onChange:e.changeIntensity,onMouseUp:n,onTouchEnd:n,snap:r.isDuotone?.5:null,isDisabled:!e.isOptionSelected})});import L from"react";var ls=s(()=>{let{filterTool:e,custom:t}=i(),{categories:r,config:n,items:o,locale:a}=e,l=t.getAdvancedItemCard(),u=t.getAdvancedCategoryCard(),C=(g,b)=>{let p=a.items[g.identifier]||g.name;return L.createElement(l,{tool:c.FILTER,type:I.MEDIUM,onClick:()=>e.selectFilter(g.identifier,g.defaultIntensity),key:g.identifier,image:g.thumbnailURI,label:p,style:{animationDelay:`${B(b)}s`},isActive:e.identifier===g.identifier},L.createElement(k,{withBackground:!0},p))},h=(g,b)=>{let{selectedCategoryIdentifier:p}=e,v=p===g.identifier,E=a.categories[g.identifier]||g.name;return g.items?L.createElement("div",{key:g.identifier},L.createElement(u,{isActive:v,tool:c.FILTER,type:I.LARGE,onClick:()=>e.toggleCategorySelection(g.identifier),image:g.thumbnailURI,label:E,style:{animationDelay:`${B(b)}s`}},L.createElement(k,{withBackground:!0,caret:!0,isActive:v},E)),L.createElement(m.Sidebar.ExpandableContainer,{show:v},g.items.map(C))):null},S=(g,b)=>{let p=a.categories[g.identifier]||g.name;return g.items?L.createElement(m.Sidebar.TextCategory,{key:g.identifier,name:p,isFirstCategory:b===0,isLastCategory:b===r.length-1},g.items.map(C)):null};return n.flattenCategories?L.createElement(L.Fragment,null,o.map(C)):n.categoryHeaderType===N.CARD?L.createElement(L.Fragment,null,r.map(h)):n.categoryHeaderType===N.TEXT?L.createElement(L.Fragment,null,r.map(S)):null}),$t=()=>L.createElement(m.Itemsbar,null,L.createElement(m.CardContainer,null,L.createElement(ls,null)));import ds from"react";var Mt=s(()=>{let{filterTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return ds.createElement(n,{tool:c.FILTER,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:o})});var zt=s(()=>{let{filterTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case Te.Items:return pe.createElement($t,{key:o});case Te.Separator:return pe.createElement(m.ItemsSeparator,{full:!0,key:x()});case Te.RemoveFilterButton:return pe.createElement(Mt,{key:o});case Te.FilterIntensitySlider:return pe.createElement(Ht,{key:o});default:return null}else if(typeof o=="object")return pe.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return pe.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Gt=s(({displayTitle:e})=>{let{filterTool:t}=i();return Je.createElement(Je.Fragment,null,e&&Je.createElement(m.Sidebar.Heading,null,t.locale.title),Je.createElement(zt,null))});import Qe from"react";import ue from"react";import cs from"react";var Wt=s(()=>{let{focusTool:e}=i(),t=e.locale.controls,r=()=>{e.toolSnapshot(t.sliderIntensity)};return cs.createElement(f.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderIntensity,value:e.relativeIntensity,min:0,max:100,divider:1,onChange:e.changeRelativeIntensity,onMouseUp:r,onTouchEnd:r,isDisabled:!e.isOptionSelected})});import K from"react";var ps=s(()=>{let{focusTool:e,custom:t}=i(),{items:r}=e,n=(o,a)=>{let l=e.locale.items[o.identifier]||o.name,u=t.getAdvancedItemCard();return K.createElement(u,{tool:c.FOCUS,type:I.LARGE,onClick:()=>e.selectFocus(o.identifier),key:o.identifier,image:o.thumbnailURI,label:l,style:{animationDelay:`${B(a)}s`},isActive:o.identifier===e.identifier},K.createElement(k,{withBackground:!0},l))};return K.createElement(K.Fragment,null,r.map(n))}),jt=()=>K.createElement(m.Itemsbar,null,K.createElement(m.CardContainer,null,K.createElement(ps,null)));import us from"react";var Yt=s(()=>{let{focusTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return us.createElement(n,{tool:c.FOCUS,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:o})});var Vt=s(()=>{let{focusTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case ye.Separator:return ue.createElement(m.ItemsSeparator,{full:!0,key:x()});case ye.RemoveFocusButton:return ue.createElement(Yt,{key:o});case ye.FocusIntensitySlider:return ue.createElement(Wt,{key:o});case ye.Items:return ue.createElement(jt,{key:o});default:return null}else if(typeof o=="object")return ue.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return ue.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Xt=s(({displayTitle:e})=>{let{focusTool:t}=i();return Qe.createElement(Qe.Fragment,null,e&&Qe.createElement(m.Sidebar.Heading,null,t.locale.title),Qe.createElement(Vt,null))});import eo from"react";import W from"react";import Kt from"react";var qt=s(()=>{let{frameTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:n,tintable:o}=e;return Kt.createElement(f.Input.Selection,{isDisabled:!o,label:t.selectColor},Kt.createElement(P,{tool:c.FRAME,activeColor:e.color,colors:n,labelsColor:r,isDisabled:!o,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))});import Ze from"react";var Jt=s(()=>{let{frameTool:e,custom:t}=i(),{items:r}=e,n=e.state?e.state.identifier:null,o=(a,l)=>{let u=e.locale.items[a.identifier]||a.name,C=t.getAdvancedItemCard();return Ze.createElement(C,{tool:c.FRAME,type:I.MEDIUM,onClick:()=>e.selectFrame(a.identifier),key:a.identifier,image:a.thumbnailURI,label:u,style:{backgroundSize:"75%",animationDelay:`${B(l)}s`},isActive:a.identifier===n},Ze.createElement(k,{hidden:!0},u))};return Ze.createElement(m.Itemsbar,null,Ze.createElement(m.CardContainer,null,r.map(o)))});import fs from"react";var Qt=s(()=>{let{frameTool:e}=i(),t=e.locale.controls,r=n=>{e.toolSnapshot(n)};return fs.createElement(f.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:()=>{r(t.sliderOpacity)},onTouchEnd:()=>{r(t.sliderOpacity)},isDisabled:!e.isOptionSelected})});import Cs from"react";var Zt=s(()=>{let{frameTool:e}=i(),t=e.locale.controls,r=n=>{e.toolSnapshot(n)};return Cs.createElement(f.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:()=>{r(t.sliderSize)},onTouchEnd:()=>{r(t.sliderSize)},isDisabled:!e.isOptionSelected})});import hs from"react";var er=s(()=>{let{frameTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return hs.createElement(n,{tool:c.FRAME,ariaLabel:r.buttonReset,onClick:o,isDisabled:!e.isOptionSelected,label:r.buttonReset})});var or=s(()=>{let{frameTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case j.Items:return W.createElement(Jt,{key:o});case j.Separator:return W.createElement(m.ItemsSeparator,{full:!0,key:x()});case j.FrameOpacitySlider:return W.createElement(Qt,{key:o});case j.FrameSizeSlider:return W.createElement(Zt,{key:o});case j.FrameColorList:return W.createElement(qt,{key:o});case j.RemoveFrameButton:return W.createElement(er,{key:o});default:return null}else if(typeof o=="object")return W.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return W.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var tr=s(({displayTitle:e})=>{let{frameTool:t}=i();return eo.createElement(eo.Fragment,null,e&&eo.createElement(m.Sidebar.Heading,null,t.locale.title),eo.createElement(or,null))});import oo from"react";import fe from"react";import A from"react";var bs=s(()=>{let{active:e,library:t,custom:r}=i(),{query:n,config:o,selectedCategoryIdentifier:a,categories:l,items:u}=t,C=r.getAdvancedCategoryCard(),h=r.getAdvancedItemCard(),S=(p,v)=>A.createElement(h,{tool:c.LIBRARY,type:I.MEDIUM,onClick:()=>e.newImage(p.rawUrl),key:`${p.identifier}-${v}`,image:p.thumbnailURI,label:p.name,style:{animationDelay:`${B(v)}s`},authorAvatar:p.authorAvatar,authorName:p.authorName},p.authorAvatar&&A.createElement(uo,{url:p.authorAvatar}),p.authorName&&A.createElement(k,{withBackground:!0},p.authorName)),g=(p,v)=>{let E=a===p.identifier;return p.items?A.createElement("div",{key:p.identifier},A.createElement(C,{isActive:E,tool:c.LIBRARY,type:I.LARGE,onClick:()=>t.toggleCategorySelection(p.identifier),image:p.thumbnailURI,label:p.name,style:{animationDelay:`${B(v)}s`}},A.createElement(k,{withBackground:!0,caret:!0,isActive:E},p.name)),A.createElement(m.Sidebar.ExpandableContainer,{show:E},p.items.map(S))):null},b=(p,v)=>p.items?A.createElement(m.Sidebar.TextCategory,{key:p.identifier,name:p.name,isFirstCategory:v===0,isLastCategory:v===l.length-1},p.items.map(S)):null;return n?u.length?A.createElement(A.Fragment,null,u.map(S)):A.createElement("p",{"data-test":y.NoResult},t.locale.controls.noResults):o.flattenCategories?A.createElement(A.Fragment,null,u.map(S)):o.categoryHeaderType===N.CARD?A.createElement(A.Fragment,null,l.map(g)):o.categoryHeaderType===N.TEXT?A.createElement(A.Fragment,null,l.map(b)):null}),rr=()=>A.createElement(m.Itemsbar,null,A.createElement(m.CardContainer,null,A.createElement(bs,null)));import gs from"react";var nr=s(()=>{let{library:e,active:t}=i(),{config:r}=e,n=e.locale.controls,o=()=>{t.selectWebcam(!0)};return r.enableWebcam?gs.createElement(Go,{tool:c.LIBRARY,onClick:o,label:n.buttonWebcamOpen}):null});import Ss from"react";var sr=s(()=>{let{library:e}=i(),{libraryProvider:t}=e,r=e.locale.controls,n=o=>{e.fetchImages(o)};return t?Ss.createElement(f.Input.Search,{onChange:n,placeholder:r.placeholderSearch}):null});import ir from"react";var ar=s(()=>{let{library:e,active:t,custom:r}=i(),{config:n}=e,o=e.locale.controls,a=r.getButton("toolControlBarPrimaryButton"),l=C=>{let{files:h}=C.target;if(h.length){let S=new FileReader;S.onload=g=>{t.newImage(g.target.result)},S.readAsDataURL(h[0])}},u=()=>{let C=document.getElementById("fileUpload");C&&C.click()};return n.enableUpload?ir.createElement(a,{"data-test":y.LibraryUploadButton,tool:c.LIBRARY,ariaLabel:o.buttonUpload,onClick:u,label:o.buttonUpload},ir.createElement(f.Input.File,{onChange:l})):null});var mr=s(()=>{let{library:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case te.Items:return fe.createElement(rr,{key:o});case te.OpenWebcamButton:return fe.createElement(nr,{key:o});case te.SearchFieldInput:return fe.createElement(sr,{key:o});case te.Separator:return fe.createElement(m.ItemsSeparator,{full:!0,key:x()});case te.UploadImageButton:return fe.createElement(ar,{key:o});default:return null}};return fe.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var lr=s(({displayTitle:e})=>{let{library:t}=i();return oo.createElement(oo.Fragment,null,e&&oo.createElement(m.Sidebar.Heading,null,t.locale.title),oo.createElement(mr,null))});import to from"react";import J from"react";import vs from"react";var dr=s(()=>{let{overlayTool:e}=i(),{allBlendModes:t,blendMode:r}=e,n=e.locale.controls,o=a=>{e.changeBlendMode(a)};return vs.createElement(f.Input.CarouselSlider,{label:n.carouselBlendMode,defaultIdentifier:r,onSelect:o,list:t})});import q from"react";var Ts=s(()=>{let{overlayTool:e,custom:t}=i(),{items:r,locale:n,identifier:o,selectOverlay:a}=e,l=(u,C)=>{let h=n.items[u.identifier]||u.name,S=t.getAdvancedItemCard();return q.createElement(S,{tool:c.OVERLAY,type:I.MEDIUM,onClick:()=>a(u.identifier),key:u.identifier,image:u.thumbnailURI,label:h,style:{animationDelay:`${B(C)}s`},isActive:u.identifier===o},q.createElement(k,{withBackground:!0},h))};return q.createElement(q.Fragment,null,r.map(l))}),cr=()=>q.createElement(m.Itemsbar,null,q.createElement(m.CardContainer,null,q.createElement(Ts,null)));import ys from"react";var pr=s(()=>{let{overlayTool:e}=i(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return ys.createElement(f.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:r,onTouchEnd:r,isDisabled:!e.isOptionSelected})});import Is from"react";var ur=s(()=>{let{overlayTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return Is.createElement(n,{tool:c.OVERLAY,label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:o})});var fr=s(()=>{let{overlayTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case re.Items:return J.createElement(cr,{key:o});case re.Separator:return J.createElement(m.ItemsSeparator,{full:!0,key:x()});case re.OverlayBlendModeCarousel:return J.createElement(dr,{key:o});case re.OverlayOpacitySlider:return J.createElement(pr,{key:o});case re.RemoveOverlayButton:return J.createElement(ur,{key:o});default:return null}else if(typeof o=="object")return J.createElement(m.Controlsbar,{key:o.type,show:e.isOptionSelected},o.children.map(a=>n(a)));return null};return J.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Cr=s(({displayTitle:e})=>{let{overlayTool:t}=i();return to.createElement(to.Fragment,null,e&&to.createElement(m.Sidebar.Heading,null,t.locale.title),to.createElement(fr,null))});import ro from"react";import Ce from"react";import hr from"react";var br=s(()=>{let{stickerTool:e}=i(),{colorList:t}=e,r=e.locale.controls,n=e.localeColor.colorPicker,o=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return hr.createElement(f.Input.Selection,{isDisabled:o,label:r.selectColor},hr.createElement(P,{tool:c.STICKER,activeSprite:e.id,activeColor:e.tintColor,colors:t,labelsColor:n,isDisabled:o,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))});import D from"react";var xs=s(()=>{let{stickerTool:e,custom:t}=i(),{categories:r,selectedCategoryIdentifier:n,config:o,items:a,locale:l}=e,u=t.getAdvancedCategoryCard(),C=t.getAdvancedItemCard(),h=(b,p)=>{let v=l.items[b.identifier]||b.name;return D.createElement(C,{key:b.identifier,tool:c.STICKER,type:I.SMALL,onClick:()=>e.add(b.identifier),image:b.thumbnailURI,label:v,style:{backgroundSize:"75%",animationDelay:`${Po(p)}s`}},D.createElement(k,{hidden:!0},v))},S=(b,p)=>{let v=n===b.identifier,E=l.categories[b.identifier]||b.name;return b.items?D.createElement("div",{key:b.identifier},D.createElement(u,{isActive:v,tool:c.STICKER,type:I.LARGE,onClick:()=>e.toggleCategorySelection(b.identifier),image:b.thumbnailURI,label:E,style:{animationDelay:`${B(p)}s`}},D.createElement(k,{withBackground:!0,caret:!0,isActive:v},E)),D.createElement(m.Sidebar.ExpandableContainer,{show:v,key:`${b.identifier}-items`},b.items.map(h))):null},g=(b,p)=>{let v=l.categories[b.identifier]||b.name;return b.items?D.createElement(m.Sidebar.TextCategory,{key:b.identifier,name:v,isFirstCategory:p===0,isLastCategory:p===r.length-1},b.items.map(h)):null};return o.flattenCategories?D.createElement(D.Fragment,null,a.map(h)):o.categoryHeaderType===N.CARD?D.createElement(D.Fragment,null,r.map(S)):o.categoryHeaderType===N.TEXT?D.createElement(D.Fragment,null,r.map(g)):null}),gr=()=>D.createElement(m.Itemsbar,null,D.createElement(m.CardContainer,null,D.createElement(xs,null)));import ks from"react";var Sr=s(()=>{let{stickerTool:e}=i(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return ks.createElement(f.Input.Slider,{isDisabled:!e.isStickerSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:r,onTouchEnd:r})});import vr from"react";import Es from"styled-components";var As=Es.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${_o.VisuallyHidden}
`,Tr=s(()=>{let{stickerTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarPrimaryButton"),o=()=>{let l=document.getElementById("fileUpload");l&&(l.value=null,l.click())},a=l=>{let{files:u}=l.target;e.addFiles(u)};return e.isCustomStickerEnabled?vr.createElement(n,{tool:c.STICKER,ariaLabel:r.buttonUpload,onClick:o,label:r.buttonUpload},vr.createElement(As,{onChange:a})):null});var yr=s(()=>{let{stickerTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case ne.Items:return Ce.createElement(gr,{key:o});case ne.Separator:return Ce.createElement(m.ItemsSeparator,{full:!0,key:x()});case ne.UploadStickerButton:return Ce.createElement(Tr,{key:o});case ne.StickerColorList:return Ce.createElement(br,{key:o});case ne.StickerOpacitySlider:return Ce.createElement(Sr,{key:o});default:return null}};return Ce.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Ir=s(({displayTitle:e})=>{let{stickerTool:t}=i();return ro.createElement(ro.Fragment,null,e&&ro.createElement(m.Sidebar.Heading,null,t.locale.title),ro.createElement(yr,null))});import no from"react";import R from"react";import Ps from"styled-components";import xr from"react";var kr=s(()=>{let{textTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextSelected:n,backgroundColorList:o}=e;return xr.createElement(f.Input.Selection,{isDisabled:!n,label:t.selectBackgroundColor},xr.createElement(P,{tool:c.TEXT,activeSprite:e.id,activeColor:e.backgroundColor,colors:o,labelsColor:r,isDisabled:!n,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot}))});import Bs from"react";var Er=s(()=>{let{textTool:e}=i(),t=e.locale.controls,{fontFamily:r,fontStyle:n,fontWeight:o,fontFamilies:a,isTextSelected:l}=e,u=a.map(h=>({label:`${h.fontFamily} ${$o.getDisplayFontStyle(h)}`,fontWeight:h.fontWeight,fontStyle:h.fontStyle,fontFamily:h.fontFamily,value:h.identifier})),C=u.filter(({value:h})=>h===e.identifier)[0];return Bs.createElement(f.Input.Dropdown,{isDisabled:!l,style:{fontFamily:r,fontStyle:n,fontWeight:o},itemStyle:h=>({fontFamily:h.fontFamily,fontStyle:h.fontStyle,fontWeight:h.fontWeight}),label:t.dropdownFontFamily,list:u,onSelect:e.changeFont,selectedItem:C.label})});import Os from"react";import Fs from"styled-components";var Ls=Fs(f.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`,Ar=s(()=>{let{textTool:e}=i(),t=e.locale.controls,{isTextSelected:r}=e,n=o=>{let a=o?parseFloat(o):0;e.setFontSize(Math.max(10,Math.min(690,a)))};return Os.createElement(Ls,{value:e.fontSize.toFixed(0),onSubmit:n,label:t.textFontSize,isDisabled:!r})});import Ds from"react";var Br=s(()=>{let{textTool:e}=i(),t=e.locale.controls,{isTextSelected:r}=e,n=()=>{e.toolSnapshot()};return Ds.createElement(f.Input.Slider,{isDisabled:!r,label:t.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:n,onTouchEnd:n,snap:1,divider:1,decimal:1})});import Us from"react";var Or=s(()=>{let{textTool:e,custom:t}=i(),r=e.locale.controls,n=()=>{e.add()},o=t.getButton("toolControlBarPrimaryButton");return Us.createElement(o,{tool:c.TEXT,ariaLabel:r.buttonNew,onClick:n,label:r.buttonNew})});import Oo from"react";import ws from"styled-components";var Ns=ws(f.Input.Selection)`
  width: 50%;
`,Fr=s(()=>{let{textTool:e,custom:t}=i(),r=e.locale.controls,{isTextSelected:n,alignment:o}=e,a=["left","center","right"],l=t.getButton("textAlignment");return Oo.createElement(Ns,{isDisabled:!n,inline:!0,label:r.selectAlignment,"data-test":y.TextAlignment},a.map(u=>{let C=Ho[u];return Oo.createElement(l,{tool:u,isDisabled:!n,ariaLabel:`Align ${u}`,isActive:u===o,key:u,style:{padding:"1px 3px 2px"},icon:Oo.createElement(C,null),onClick:()=>e.changeAlignment(u)})}))});import Lr from"react";var Dr=s(()=>{let{textTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextSelected:n,colorList:o}=e;return Lr.createElement(f.Input.Selection,{isDisabled:!n,label:t.selectFontColor},Lr.createElement(P,{tool:c.TEXT,activeSprite:e.id,activeColor:e.textColor,colors:o,labelsColor:r,isDisabled:!n,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))});var _s=Ps.div`
  display: flex;
  justify-content: space-between;
`,Rs=({textTool:e})=>{let{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{if(typeof o=="string")switch(o){case H.NewTextButton:return R.createElement(Or,{key:o});case H.FontFamilyDropdown:return R.createElement(Er,{key:o});case H.Separator:return R.createElement(m.ItemsSeparator,{full:!0,key:x()});case H.TextColorList:return R.createElement(Dr,{key:o});case H.BackgroundColorList:return R.createElement(kr,{key:o});case H.LineSpacingSlider:return R.createElement(Br,{key:o});case H.TextAligmentList:return R.createElement(Fr,{key:o});case H.FontSizeInput:return R.createElement(Ar,{key:o});default:return null}else if(typeof o=="object")return R.createElement(_s,{key:o.type},o.children.map(a=>n(a)));return null};return R.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))},Ur=w("textTool")(s(Rs));var wr=s(({displayTitle:e})=>{let{textTool:t}=i();return no.createElement(no.Fragment,null,e&&no.createElement(m.Sidebar.Heading,null,t.locale.title),no.createElement(Ur,null))});import so from"react";import he from"react";import Hs from"react";var Nr=s(()=>{let{textDesignTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarPrimaryButton"),o=()=>{e.add()};return Hs.createElement(n,{tool:c.TEXT_DESIGN,ariaLabel:r.buttonNew,onClick:o,label:r.buttonNew})});import $s from"react";var Pr=s(()=>{let{textDesignTool:e,custom:t}=i(),r=e.locale.controls,{isTextDesignSelected:n}=e,o=t.getButton("toolControlBarSecondaryButton"),a=()=>{e.changeSeed()};return $s.createElement(o,{tool:c.TEXT_DESIGN,ariaLabel:r.buttonShuffle,isDisabled:!n,onClick:a,label:r.buttonShuffle})});import _r from"react";var Rr=s(()=>{let{textDesignTool:e}=i(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextDesignSelected:n,colorList:o}=e;return _r.createElement(f.Input.Selection,{isDisabled:!n,label:t.selectColor},_r.createElement(P,{tool:c.TEXT_DESIGN,activeSprite:e.id,activeColor:e.color,colors:o,labelsColor:r,isDisabled:!n,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))});import Q from"react";var Ms=s(()=>{let{textDesignTool:e,custom:t}=i(),{items:r,identifier:n}=e,o=l=>{e.changeIdentifier(l)},a=(l,u)=>{let C=t.getAdvancedItemCard();return Q.createElement(C,{key:l.identifier,tool:c.TEXT_DESIGN,type:I.MEDIUM,onClick:()=>o(l.identifier),image:l.thumbnailURI,label:l.name||"",style:{animationDelay:`${B(u)}s`,backgroundSize:"60%"},isDisabled:!e.isTextDesignSelected,isActive:n===l.identifier},Q.createElement(k,{hidden:!0},l.name))};return Q.createElement(Q.Fragment,null,r.map(a))}),Hr=()=>Q.createElement(m.Itemsbar,null,Q.createElement(m.CardContainer,null,Q.createElement(Ms,null)));var $r=s(()=>{let{textDesignTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case ie.Items:return he.createElement(Hr,{key:o});case ie.Separator:return he.createElement(m.ItemsSeparator,{full:!0,key:x()});case ie.NewTextDesignButton:return he.createElement(Nr,{key:o});case ie.ShuffleLayoutButton:return he.createElement(Pr,{key:o});case ie.TextDesignColorList:return he.createElement(Rr,{key:o});default:return null}};return he.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Mr=s(({displayTitle:e})=>{let{textDesignTool:t}=i();return so.createElement(so.Fragment,null,e&&so.createElement(m.Sidebar.Heading,null,t.locale.title),so.createElement($r,null))});import io from"react";import be from"react";import zs from"react";var zr=s(()=>{let{transformTool:e}=i(),t=e.locale.controls,{forceDimensions:r,localOutputHeight:n,localOutputWidth:o}=e;return zs.createElement(zo,{isDisabled:r,showLabel:!0,valueHeight:n,valueWidth:o,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth})});import Gs from"react";var Gr=s(()=>{let{transformTool:e,custom:t}=i(),r=e.locale.controls,{forceDimensions:n,lockResolution:o}=e,a=t.getCheckbox();return Gs.createElement(a,{tool:c.TRANSFORM,isDisabled:n,value:o,label:r.checkboxKeepResolution,checkMarkPosition:"right",onClick:e.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}})});import Ws from"react";var Wr=s(()=>{let{transformTool:e,custom:t}=i(),r=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return Ws.createElement(n,{tool:c.TRANSFORM,ariaLabel:r.buttonReset,onClick:o,label:r.buttonReset})});import O from"react";import{renderToStaticMarkup as jr}from"react-dom/server";var js=s(()=>{let{transformTool:e,custom:t,editor:r}=i(),{categories:n,items:o,identifier:a,config:l,locale:u}=e,C=t.getAdvancedItemCard(),h=t.getAdvancedCategoryCard(),S=(p,v)=>{let{theme:E,measurements:Z}=r.configStore,ee=u.items[p.identifier]||p.name,Se=p.thumbnailURI||"",oe="80%";if(!e.checkIfTransformThumbnailExits(p.thumbnailURI)){let ve=p.identifier.includes("imgly_transform_common"),Ue=Ie.crops[p.identifier]||Ie.crops.imgly_transform_common_custom,we=O.createElement(Ue,{width:Z.advancedCard.medium.width-(ve?42:0),height:Z.advancedCard.medium.height-(ve?42:0),main:E.transform.crops.main,highlight:E.transform.crops.highlight,shadow:E.transform.crops.shadow});Se=`'data:image/svg+xml,${encodeURIComponent(jr(we))}'`,oe=_()||_e()?"auto":"unset"}return O.createElement(C,{key:p.identifier,tool:c.TRANSFORM,type:I.MEDIUM,onClick:()=>e.changeIdentifier(p.identifier,!0),image:Se,label:ee,style:{backgroundSize:oe,animationDelay:`${B(v)}s`},isActive:p.identifier===a},O.createElement(k,null,ee))},g=(p,v)=>{let{theme:E,measurements:Z}=r.configStore,ee=e.selectedCategoryIdentifier===p.identifier,Se=u.categories[p.identifier]||p.name,oe=p.thumbnailURI||"";if(!p.items)return null;if(!e.checkIfTransformThumbnailExits(p.thumbnailURI)){let ve=Ie.categories[p.identifier]||Ie.crops.imgly_transform_common_custom,Ue=O.createElement(ve,{width:Z.advancedCard.large.width-42,height:Z.advancedCard.large.height-42,main:E.transform.crops.main,highlight:E.transform.crops.highlight,shadow:E.transform.crops.shadow});oe=`'data:image/svg+xml,${encodeURIComponent(jr(Ue))}'`}return O.createElement("div",{key:p.identifier},O.createElement(h,{type:I.LARGE,onClick:()=>e.toggleCategorySelection(p.identifier),key:p.identifier,image:oe,style:{animationDelay:`${B(v)}s`},label:p.name,tool:c.TRANSFORM},O.createElement(k,{caret:!0,isActive:ee},Se)),O.createElement(m.Sidebar.ExpandableContainer,{show:ee},p.items.map(S)))},b=(p,v)=>{let E=u.categories[p.identifier]||p.name;return p.items?O.createElement(m.Sidebar.TextCategory,{key:p.identifier,name:E,isFirstCategory:v===0,isLastCategory:v===n.length-1},p.items.map(S)):null};return l.flattenCategories?O.createElement(O.Fragment,null,o.map(S)):l.categoryHeaderType===N.CARD?O.createElement(O.Fragment,null,n.map(g)):l.categoryHeaderType===N.TEXT?O.createElement(O.Fragment,null,n.map(b)):null}),Yr=()=>O.createElement(m.Itemsbar,null,O.createElement(m.CardContainer,null,O.createElement(js,null)));var Vr=s(()=>{let{transformTool:e}=i(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,n=o=>{switch(o){case ae.Items:return be.createElement(Yr,{key:o});case ae.Separator:return be.createElement(m.ItemsSeparator,{full:!0,key:x()});case ae.ResetTransformButton:return be.createElement(Wr,{key:o});case ae.KeepResolutionCheckbox:return be.createElement(Gr,{key:o});case ae.CropSizeInput:return be.createElement(zr,{key:o});default:return null}};return be.createElement(m.ToolControlBarItems,null,r.map(o=>n(o)))});var Xr=s(({displayTitle:e})=>{let{transformTool:t}=i();return io.createElement(io.Fragment,null,e&&io.createElement(m.Sidebar.Heading,null,t.locale.title),io.createElement(Vr,null))});var ge=class extends T.Component{render(){let{config:t,active:r}=this.props,n=r.tool,o=t.config.displayToolControlBarTitle;return T.createElement(m.Sidebar.Index,{reverse:t.config.order==="reverse"},T.createElement(f.Switch.Index,{type:n},T.createElement(f.Switch.Case,{value:c.LIBRARY},T.createElement(lr,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.FILTER},T.createElement(Gt,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.FOCUS},T.createElement(Xt,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.ADJUSTMENT},T.createElement(Ft,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.OVERLAY},T.createElement(Cr,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.STICKER},T.createElement(Ir,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.TEXT},T.createElement(wr,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.TEXT_DESIGN},T.createElement(Mr,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.FRAME},T.createElement(tr,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.BRUSH},T.createElement(_t,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.TRANSFORM},T.createElement(Xr,{displayTitle:o})),T.createElement(f.Switch.Case,{value:c.CUSTOM},T.createElement(Rt,{displayTitle:o}))))}};ge=M([w("active","config"),s],ge);var Kr=Ys.div`
  position: absolute;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width+e.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${e=>e.theme.webcam.backdrop};
  z-index: ${e=>e.theme.measurements.zIndex.disable};
`,Fe=class extends F.Component{static getDerivedStateFromError(t){return console.error(t),{hasError:!0}}render(){let{config:t,active:r}=this.props;return t.isOrderDefault?F.createElement(f.Container,null,r.isWebcam?F.createElement(Kr,{style:{left:0}}):null,F.createElement(bo,null),F.createElement(ce,null),F.createElement(ge,null),F.createElement(fo,null,F.createElement(Co,null),F.createElement(ho,null))):F.createElement(f.Container,null,r.isWebcam?F.createElement(Kr,{style:{right:0}}):null,F.createElement(bo,null),F.createElement(fo,null,F.createElement(Co,null),F.createElement(ho,null)),F.createElement(ge,null),F.createElement(ce,null))}};Fe=M([w("config","active"),s],Fe);import Le from"react";import Vs from"styled-components";var qr=class extends Le.Component{constructor(t){super(t);this.ref=null;this.updatePosition=()=>{let{isReverse:t}=this.props,r={x:0,y:0};if(this.ref.current){let{top:n,height:o,left:a,right:l}=this.ref.current.getBoundingClientRect();r.y=n+o/4,r.x=t?window.innerWidth-l:a}this.setState({tooltipPosition:r})};this.mouseOver=t=>{this.updatePosition(),this.setState({hoverTool:t})};this.mouseOut=()=>{this.setState({hoverTool:null})};this.state={hoverTool:null,tooltipPosition:{x:0,y:0}},this.ref=Le.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(t){let{isReverse:r}=this.props;r!==t.isReverse&&this.updatePosition()}render(){let{tool:t,isActive:r,isReverse:n,icon:o,label:a,onClick:l,className:u,children:C}=this.props,{hoverTool:h,tooltipPosition:S}=this.state;return Le.createElement(Xs,{ref:this.ref,onMouseOver:()=>this.mouseOver(t),onMouseOut:()=>this.mouseOut(),className:u},Le.createElement(m.Toolbar.Item,{ariaLabel:a,isActive:r,onClick:()=>l(t)},o,C),Le.createElement(m.Toolbar.Tooltip,{position:S,reverse:n,show:h===t},a))}},ao=qr,Xs=Vs.div`
  position: relative;
`;var lo=class extends mo.Component{componentDidMount(){let{editor:t,storeProps:r}=this.props;this.editor=t,this.storeProps=r;let n=new Mo(this.editor.configStore.config.custom.components,{advancedUICategoryCard:m.Card,advancedUIItemCard:m.Card,advancedUIToolbarItem:ao}),o={getAdvancedCategoryCard:n.getAdvancedCategoryCard,getAdvancedItemCard:n.getAdvancedItemCard,getAdvancedToolbarItem:n.getAdvancedToolbarItem,getDialog:n.getDialog,getButton:n.getButton,getColorItem:n.getColorItem,getCheckbox:n.getCheckbox};this.storeProps.custom=o,this.forceUpdate()}render(){return this.storeProps?mo.createElement(No,U({},this.storeProps),mo.createElement(Ks,{theme:Ne(U({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},mo.createElement(Fe,null))):null}};import Fo from"react";import Jr from"react-dom";import De,{Suspense as qs,useMemo as Js}from"react";var Qs=De.lazy(()=>import("./basic-BEJON33E.js")),Zs=e=>({filterTool:e.filterToolStore,focusTool:e.focusToolStore,adjustmentsTool:e.adjustmentsToolStore,overlayTool:e.overlayToolStore,frameTool:e.frameToolStore,brushTool:e.brushToolStore,transformTool:e.transformToolStore,scale:e.scale,sprite:e.spriteStore,stickerTool:e.spriteStore.stickerToolStore,textTool:e.spriteStore.textToolStore,textDesignTool:e.spriteStore.textDesignToolStore,library:e.libraryStore,modal:e.modalStore,snapping:e.snappingStore,config:e.configStore,active:e.activeStore,canvas:e.canvasStore,history:e.historyStore,editor:e}),co=({editor:e})=>{let t=Js(()=>Zs(e),[e]);return e.configStore.config.layout==="basic"?De.createElement(qs,{fallback:De.createElement("div",null)},De.createElement(Qs,{editor:e,storeProps:t})):De.createElement(lo,{editor:e,storeProps:t})};var Qr=class extends He{constructor(t,r){super();this.dispose=()=>{this.container&&(Jr.unmountComponentAtNode(this.container),this.removeAllListeners(d.EXPORT),this.removeAllListeners(d.HISTORY_UNDO),this.removeAllListeners(d.HISTORY_REDO),this.removeAllListeners(d.HISTORY_CHANGE),this.removeAllListeners(d.EDITOR_READY),this.removeAllListeners(d.ERROR_IMAGE_LOADING),this.removeAllListeners(d.IMAGE_LOAD),this.removeAllListeners(d.TOOL_ENTER),this.removeAllListeners(d.STICKER_UPLOAD_ADD),this.removeAllListeners(d.ERROR_WEBGL_CONTEXT_LOST),this.removeAllListeners(d.CROP_DIMENSIONS_CHANGE))};this.serialize=t=>this.editor.serialize(t);this.deserialize=t=>this.editor.deserialize(t);this.export=t=>this.editor.export(t);this.close=()=>this.editor.close();this.setImage=t=>this.editor.setImage(t,!0);this.getImageDimensions=()=>this.editor.getImageDimensions();this.getImageMimeType=()=>this.editor.getImageMimeType();this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.container=r,this.editor=new Me(U({},t)),this.editor.configStore.events.on(d.EXPORT,n=>{this.emit(d.EXPORT,n)}),this.editor.configStore.events.on(d.CLOSE,()=>{this.dispose(),this.emit(d.CLOSE)}),this.editor.configStore.events.on(d.HISTORY_UNDO,()=>{this.emit(d.HISTORY_UNDO)}),this.editor.configStore.events.on(d.HISTORY_REDO,()=>{this.emit(d.HISTORY_REDO)}),this.editor.configStore.events.on(d.HISTORY_CHANGE,()=>{this.emit(d.HISTORY_CHANGE)}),this.editor.configStore.events.on(d.STICKER_UPLOAD_ADD,n=>{this.emit(d.STICKER_UPLOAD_ADD,n)}),this.editor.configStore.events.on(d.CROP_DIMENSIONS_CHANGE,n=>{this.emit(d.CROP_DIMENSIONS_CHANGE,n)})}hasChanges(){return this.editor.hasChanges()}},Zr=class{constructor(){this.container=null}init(t){return new Promise((r,n)=>{if(typeof window=="undefined"){r();return}this.container=typeof t.container=="string"?document.querySelector(t.container):t.container,this.container?(this.editorApi=new Qr(t,this.container),Jr.render(Fo.createElement(en,{editor:this.editorApi.editor}),this.container),this.editorApi.editor.configStore.events.on(d.EDITOR_READY,()=>{setTimeout(()=>{this.editorApi.emit(d.EDITOR_READY)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(d.ERROR_IMAGE_LOADING,o=>{setTimeout(()=>{this.editorApi.emit(d.ERROR_IMAGE_LOADING,o)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(d.ERROR_WEBGL_CONTEXT_LOST,o=>{setTimeout(()=>{this.editorApi.emit(d.ERROR_WEBGL_CONTEXT_LOST,o)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(d.IMAGE_LOAD,()=>{setTimeout(()=>{this.editorApi.emit(d.IMAGE_LOAD)},0),r(this.editorApi)}),this.editorApi.editor.configStore.events.on(d.TOOL_ENTER,o=>{setTimeout(()=>{this.editorApi.emit(d.TOOL_ENTER,o)},0),r(this.editorApi)})):n(new Error("Provide a container"))})}},en=class extends Fo.Component{componentWillUnmount(){let{editor:t}=this.props;t.engine.dispose(),t.configStore.events.removeAllListeners(d.EXPORT),t.configStore.events.removeAllListeners(d.CLOSE),t.configStore.events.removeAllListeners(d.HISTORY_UNDO),t.configStore.events.removeAllListeners(d.HISTORY_REDO),t.configStore.events.removeAllListeners(d.HISTORY_CHANGE),t.configStore.events.removeAllListeners(d.EDITOR_READY),t.configStore.events.removeAllListeners(d.ERROR_IMAGE_LOADING),t.configStore.events.removeAllListeners(d.IMAGE_LOAD),t.configStore.events.removeAllListeners(d.TOOL_ENTER),t.configStore.events.removeAllListeners(d.STICKER_UPLOAD_ADD),t.configStore.events.removeAllListeners(d.ERROR_WEBGL_CONTEXT_LOST),t.configStore.events.removeAllListeners(d.CROP_DIMENSIONS_CHANGE)}render(){let{editor:t}=this.props;return Fo.createElement(co,{editor:t})}},ei={init:e=>new Zr().init(e)};import Lo from"react";var on=class extends Lo.Component{constructor(t){super(t);this.ui=new He;this.serialize=t=>this.editor.serialize(t);this.deserialize=t=>this.editor.deserialize(t);this.export=t=>this.editor.export(t);this.close=()=>this.editor.close();this.setImage=t=>this.editor.setImage(t,!0);this.getImageDimensions=()=>this.editor.getImageDimensions();this.dispose=()=>{this.ui.removeAllListeners(d.EXPORT),this.ui.removeAllListeners(d.HISTORY_UNDO),this.ui.removeAllListeners(d.HISTORY_REDO),this.ui.removeAllListeners(d.HISTORY_CHANGE),this.ui.removeAllListeners(d.EDITOR_READY),this.ui.removeAllListeners(d.ERROR_IMAGE_LOADING),this.ui.removeAllListeners(d.IMAGE_LOAD),this.ui.removeAllListeners(d.TOOL_ENTER),this.ui.removeAllListeners(d.STICKER_UPLOAD_ADD),this.ui.removeAllListeners(d.ERROR_WEBGL_CONTEXT_LOST),this.ui.removeAllListeners(d.CROP_DIMENSIONS_CHANGE)};this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.editor=new Me(U({},t)),this.editor.configStore.events.on(d.EXPORT,r=>{this.ui.emit(d.EXPORT,r)}),this.editor.configStore.events.on(d.CLOSE,()=>{this.componentWillUnmount(),this.ui.emit(d.CLOSE)}),this.editor.configStore.events.on(d.HISTORY_UNDO,()=>{this.ui.emit(d.HISTORY_UNDO)}),this.editor.configStore.events.on(d.HISTORY_REDO,()=>{this.ui.emit(d.HISTORY_REDO)}),this.editor.configStore.events.on(d.HISTORY_CHANGE,()=>{this.ui.emit(d.HISTORY_CHANGE)}),this.editor.configStore.events.on(d.EDITOR_READY,()=>{this.ui.emit(d.EDITOR_READY)}),this.editor.configStore.events.on(d.ERROR_IMAGE_LOADING,r=>{this.ui.emit(d.ERROR_IMAGE_LOADING,r)}),this.editor.configStore.events.on(d.IMAGE_LOAD,()=>{this.ui.emit(d.IMAGE_LOAD)}),this.editor.configStore.events.on(d.TOOL_ENTER,r=>{this.ui.emit(d.TOOL_ENTER,r)}),this.editor.configStore.events.on(d.STICKER_UPLOAD_ADD,r=>{this.ui.emit(d.STICKER_UPLOAD_ADD,r)}),this.editor.configStore.events.on(d.CROP_DIMENSIONS_CHANGE,r=>{this.ui.emit(d.CROP_DIMENSIONS_CHANGE,r)}),this.editor.configStore.events.on(d.ERROR_WEBGL_CONTEXT_LOST,()=>{this.ui.emit(d.ERROR_WEBGL_CONTEXT_LOST)})}componentWillUnmount(){this.dispose()}hasChanges(){return this.editor.hasChanges()}render(){return Lo.createElement(co,{editor:this.editor})}},oi=e=>typeof window=="undefined"?null:Lo.createElement(on,U({},e));var Fv=()=>{let{active:e}=i();return e.newImage};var Uv=()=>i().config.isLayoutAdvanced;wo({isolateGlobalState:!0});var{Container:Kv,Input:ti,ColorItem:qv,ColorItemBase:Jv,ColorItemBackground:Qv,ColorItemTiledBackground:Zv,ColorItemActiveOverlay:eT,Dialog:oT,DialogBase:tT,DialogContainer:rT,DialogBackdrop:nT,DialogHeader:sT,DialogBody:iT,DialogFooter:aT,DialogSpinner:mT}=f,{Search:ri,Label:lT,Checkbox:dT,CheckboxBase:cT,CheckboxInput:pT,CheckboxCheckMark:uT}=ti,fT=xe,CT=xe,hT=ri;export{ao as a,ei as b,oi as c,Fv as d,Uv as e,Kv as f,qv as g,Jv as h,Qv as i,Zv as j,eT as k,oT as l,tT as m,rT as n,nT as o,sT as p,iT as q,aT as r,mT as s,lT as t,dT as u,cT as v,pT as w,uT as x,fT as y,CT as z,hT as A};
