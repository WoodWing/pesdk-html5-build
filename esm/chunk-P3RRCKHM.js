import{$ as y,$a as Pc,A as cc,Ca as Sc,D as et,E as f,Ea as Cc,G as Ms,H as Q,Ha as wc,I as dc,Ia as ht,Ja as Ft,K as pc,Ka as kc,Ma as Tc,N as Eo,Na as Ki,O as he,Oa as Ic,P as Ot,Pa as b,Qa as Mc,R as ot,Ra as Ec,S as hc,Sa as C,Ta as Ds,U as uc,Ua as te,Va as xt,Y as mc,Ya as me,Z as Es,Za as ee,_a as Dc,a as Jl,aa as Tt,ab as fe,b as Mo,bb as Ps,c as s,cb as zs,d as Zl,da as fc,db as zc,e as M,ea as q,eb as Ac,f as p,fb as As,g as Vr,gb as Bs,h as Ur,ha as gc,hb as Ls,i as Ql,ib as Bc,j as Xi,jb as Pe,k as tc,kb as Os,l as h,lb as Fs,m as pt,ma as bc,mb as Lc,n as ec,nb as Oc,o as oc,ob as Fc,p as E,pa as yc,pb as Rc,q as ic,qa as ue,qb as Gr,r as hi,ra as G,rb as Rs,s as ui,sb as qi,t as pe,tb as Hs,u as rc,ua as vc,ub as jr,v as nc,vb as Hc,w as sc,x as ac,xa as xc,y as lc,z as Yi}from"./chunk-J7RPI7SH.js";var rr=Jl((Kw,ad)=>{var yg="Expected a function";var nd=0/0;var vg="[object Symbol]";var xg=/^\s+|\s+$/g;var Sg=/^[-+]0x[0-9a-f]+$/i;var Cg=/^0b[01]+$/i;var wg=/^0o[0-7]+$/i;var kg=parseInt;var Tg=typeof global=="object"&&global&&global.Object===Object&&global;var Ig=typeof self=="object"&&self&&self.Object===Object&&self;var Mg=Tg||Ig||Function("return this")();var Eg=Object.prototype;var Dg=Eg.toString;var Pg=Math.max;var zg=Math.min;var ea=function(){return Mg.Date.now()};function Ag(o,t,e){var i,r,n,a,l,c,d=0,u=false,m=false,g=true;if(typeof o!="function"){throw new TypeError(yg)}t=sd(t)||0;if(oa(e)){u=!!e.leading;m="maxWait"in e;n=m?Pg(sd(e.maxWait)||0,t):n;g="trailing"in e?!!e.trailing:g}function v(z){var j=i,Y=r;i=r=void 0;d=z;a=o.apply(Y,j);return a}function S(z){d=z;l=setTimeout(T,t);return u?v(z):a}function x(z){var j=z-c,Y=z-d,ut=t-j;return m?zg(ut,n-Y):ut}function w(z){var j=z-c,Y=z-d;return c===void 0||j>=t||j<0||m&&Y>=n}function T(){var z=ea();if(w(z)){return A(z)}l=setTimeout(T,x(z))}function A(z){l=void 0;if(g&&i){return v(z)}i=r=void 0;return a}function F(){if(l!==void 0){clearTimeout(l)}d=0;i=c=r=l=void 0}function H(){return l===void 0?a:A(ea())}function X(){var z=ea(),j=w(z);i=arguments;r=this;c=z;if(j){if(l===void 0){return S(c)}if(m){l=setTimeout(T,t);return v(c)}}if(l===void 0){l=setTimeout(T,t)}return a}X.cancel=F;X.flush=H;return X}function oa(o){var t=typeof o;return!!o&&(t=="object"||t=="function")}function Bg(o){return!!o&&typeof o=="object"}function Lg(o){return typeof o=="symbol"||Bg(o)&&Dg.call(o)==vg}function sd(o){if(typeof o=="number"){return o}if(Lg(o)){return nd}if(oa(o)){var t=typeof o.valueOf=="function"?o.valueOf():o;o=oa(t)?t+"":t}if(typeof o!="string"){return o===0?o:+o}o=o.replace(xg,"");var e=Cg.test(o);return e||wg.test(o)?kg(o.slice(2),e?2:8):Sg.test(o)?nd:+o}ad.exports=Ag});var rp=Jl((S4,ip)=>{var tp="Expected a function";var ep=0/0;var Zb="[object Symbol]";var Qb=/^\s+|\s+$/g;var t0=/^[-+]0x[0-9a-f]+$/i;var e0=/^0b[01]+$/i;var o0=/^0o[0-7]+$/i;var i0=parseInt;var r0=typeof global=="object"&&global&&global.Object===Object&&global;var n0=typeof self=="object"&&self&&self.Object===Object&&self;var s0=r0||n0||Function("return this")();var a0=Object.prototype;var l0=a0.toString;var c0=Math.max;var d0=Math.min;var Ta=function(){return s0.Date.now()};function p0(o,t,e){var i,r,n,a,l,c,d=0,u=false,m=false,g=true;if(typeof o!="function"){throw new TypeError(tp)}t=op(t)||0;if(zn(e)){u=!!e.leading;m="maxWait"in e;n=m?c0(op(e.maxWait)||0,t):n;g="trailing"in e?!!e.trailing:g}function v(z){var j=i,Y=r;i=r=void 0;d=z;a=o.apply(Y,j);return a}function S(z){d=z;l=setTimeout(T,t);return u?v(z):a}function x(z){var j=z-c,Y=z-d,ut=t-j;return m?d0(ut,n-Y):ut}function w(z){var j=z-c,Y=z-d;return c===void 0||j>=t||j<0||m&&Y>=n}function T(){var z=Ta();if(w(z)){return A(z)}l=setTimeout(T,x(z))}function A(z){l=void 0;if(g&&i){return v(z)}i=r=void 0;return a}function F(){if(l!==void 0){clearTimeout(l)}d=0;i=c=r=l=void 0}function H(){return l===void 0?a:A(Ta())}function X(){var z=Ta(),j=w(z);i=arguments;r=this;c=z;if(j){if(l===void 0){return S(c)}if(m){l=setTimeout(T,t);return v(c)}}if(l===void 0){l=setTimeout(T,t)}return a}X.cancel=F;X.flush=H;return X}function h0(o,t,e){var i=true,r=true;if(typeof o!="function"){throw new TypeError(tp)}if(zn(e)){i="leading"in e?!!e.leading:i;r="trailing"in e?!!e.trailing:r}return p0(o,t,{"leading":i,"maxWait":t,"trailing":r})}function zn(o){var t=typeof o;return!!o&&(t=="object"||t=="function")}function u0(o){return!!o&&typeof o=="object"}function m0(o){return typeof o=="symbol"||u0(o)&&l0.call(o)==Zb}function op(o){if(typeof o=="number"){return o}if(m0(o)){return ep}if(zn(o)){var t=typeof o.valueOf=="function"?o.valueOf():o;o=zn(t)?t+"":t}if(typeof o!="string"){return o===0?o:+o}o=o.replace(Qb,"");var e=e0.test(o);return e||o0.test(o)?i0(o.slice(2),e?2:8):t0.test(o)?ep:+o}ip.exports=h0});import jf from"styled-components";import Zi from"react";import Vf,{css as Uf}from"styled-components";import{css as $f}from"styled-components";var St=$f`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${o=>o.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${o=>o.theme.focusOutlineColor};
  }
`;import{css as Wf}from"styled-components";var mi=Wf`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`;import Ji from"styled-components";import{keyframes as Nf}from"styled-components";var Xr=Nf`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`;var Yr=Ji.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;var _s=Ji(Yr)``;var Et=Ji(Yr)``;var fi=Ji(Yr)``;var Kr={display:"none",left:0,top:0};var qr=Ji(Yr)`
  display: ${({display:o})=>o};
  left: ${({left:o})=>o}px;
  top: ${({top:o})=>o}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${Xr} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`;var oe=Uf`
  color: ${o=>o.theme.button.activeForeground};
  border-color: ${o=>o.theme.button.activeForeground};

  svg {
    color: ${o=>o.theme.button.activeForeground};
  }
`;var Gf=Vf.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  font-size: ${o=>o.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button1.case};
  font-family: ${o=>o.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${St}

  /* Active */

  &:active {
    ${oe}
  }

  ${({isActive:o})=>o&&oe}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${Et} {
      background-color: ${o=>o.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${fi} {
      background-color: ${o=>o.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${o=>o.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${o=>o.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`;var wt=class extends Zi.Component{constructor(){super(...arguments);this.state=Kr;this.timeout=null;this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect();const i=t.pageX-e.left;const r=t.pageY-e.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(i,r)})}else{this.setRippleState(i,r)}this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{isActive:t,isDisabled:e,label:i,ariaLabel:r,children:n,className:a,...l}=this.props;const{left:c,top:d,display:u}=this.state;return Zi.createElement(Gf,{"data-test":r,className:a,isActive:t,disabled:e,"aria-label":r,...l,onClick:this.onClick},i,n,Zi.createElement(qr,{display:u,left:c,top:d}),Zi.createElement(Et,null),Zi.createElement(fi,null))}};wt.defaultProps={type:"button",isDisabled:false,isActive:false};var Qi=jf(wt)`
  color: ${o=>o.theme.button.textPrimaryForeground};

  svg {
    color: ${o=>o.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:o})=>o&&oe}

  ${Et} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }
`;import Xf from"styled-components";var Do=Xf(wt)`
  color: ${o=>o.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:o})=>o&&oe}

  ${Et} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${o=>o.theme.button.textSecondaryForeground};
  }
`;import Jf from"styled-components";import $s from"react";import Ws,{css as Ns}from"styled-components";var Yf=Ws(wt)`
  ${({fullWidth:o})=>o&&Ns`
      width: 100%;
    `}
`;var Kf=Ws.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`;var qf=Ws.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:o})=>o&&Ns`
      opacity: ${t=>t.theme.button.textInactiveOpacity};
    `}
  ${({hasIcon:o})=>o&&Ns`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`;var ie=({label:o,children:t,icon:e,fullWidth:i,isDisabled:r,...n})=>{const a=$s.createElement(qf,{hasIcon:!!e,isDisabled:r},o,t);return $s.createElement(Yf,{fullWidth:i,isDisabled:r,...n},e&&$s.createElement(Kf,null,e),(t||o)&&a)};var Vs=Jf(ie)`
  background: ${o=>o.theme.button.outlinedPrimaryBackground};
  color: ${o=>o.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${o=>o.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${o=>o.theme.button.outlinedPrimaryForeground};
  }
`;import Zf from"styled-components";var gi=Zf(ie)`
  background: ${o=>o.theme.button.outlinedSecondaryBackground};
  color: ${o=>o.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${o=>o.theme.button.outlinedBorderColor};

  svg {
    color: ${o=>o.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:o})=>o&&oe}
`;import _c from"react";import $c from"styled-components";var Qf=$c(wt)`
  color: ${o=>o.theme.foreground};

  svg {
    color: ${o=>o.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:o})=>o&&oe}

  ${Et} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }
`;var tg=$c.div`
  display: flex;
  &:focus {
    outline: none;
  }
`;var Po=({label:o,icon:t,children:e,...i})=>_c.createElement(Qf,{...i},_c.createElement(tg,null,t));import eg from"styled-components";var Us=eg(ie)`
  background: ${o=>o.theme.button.containedPrimaryBackground};
  color: ${o=>o.theme.button.containedPrimaryForeground};
  border: 1px solid ${o=>o.theme.button.containedPrimaryBackground};

  &:active {
    color: ${o=>o.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${o=>o.theme.button.containedPrimaryForeground};

    &:active {
      color: ${o=>o.theme.button.containedPrimaryForeground};
    }
  }
`;import tr from"react";import er,{css as bi}from"styled-components";var og=er.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${o=>o.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.label.case};
  ${o=>o.withBackground?bi`
          color: ${o.theme.card.labelForeground};
        `:bi`
          color: ${o.theme.card.foreground};
        `}
`;var ig=er.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  left: 0;
  ${o=>o.withBackground?bi`
          color: ${o.theme.card.labelForeground};
          height: 40px;
          background: ${o.theme.card.labelBackground};
        `:bi`
          color: ${o.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`;var rg=er.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${o=>o.theme.card.labelForeground};
  ${o=>o.withBackground?bi`
          border-top-color: ${o.theme.card.labelForeground};
        `:bi`
          border-top-color: ${o.theme.card.foreground};
        `}
  transform: rotate(${o=>o.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`;var ng=er.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`;var sg=er.div`
  ${mi}
`;var Gs=({children:o,className:t,caret:e,isActive:i,style:r,withBackground:n,hidden:a})=>{if(a){return tr.createElement(sg,null,o)}const l=()=>tr.createElement(ng,null,tr.createElement(rg,{"aria-hidden":true,rotation:i?180:0,withBackground:n}));return tr.createElement(ig,{className:t,withBackground:n,style:r},tr.createElement(og,{"data-test":C.CardLabel,withBackground:n},o,e&&l()))};import ag from"styled-components";var js=ag.div.attrs(o=>({"data-test":C.CardAvatar,style:{backgroundImage:`url(${o.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`;import{keyframes as lg}from"styled-components";var Wc=lg`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`;import{keyframes as cg}from"styled-components";var Jr=cg`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`;import Lo from"react";var Gt=[];var Nc=function(){return Gt.some(function(o){return o.activeTargets.length>0})};var Vc=function(){return Gt.some(function(o){return o.skippedTargets.length>0})};var Uc="ResizeObserver loop completed with undelivered notifications.";var Gc=function(){var o;if(typeof ErrorEvent==="function"){o=new ErrorEvent("error",{message:Uc})}else{o=document.createEvent("Event");o.initEvent("error",false,false);o.message=Uc}window.dispatchEvent(o)};var zo;(function(o){o["BORDER_BOX"]="border-box";o["CONTENT_BOX"]="content-box";o["DEVICE_PIXEL_CONTENT_BOX"]="device-pixel-content-box"})(zo||(zo={}));var Xs=function(){function o(t,e,i,r){this.x=t;this.y=e;this.width=i;this.height=r;this.top=this.y;this.left=this.x;this.bottom=this.top+this.height;this.right=this.left+this.width;return Object.freeze(this)}o.prototype.toJSON=function(){var t=this,e=t.x,i=t.y,r=t.top,n=t.right,a=t.bottom,l=t.left,c=t.width,d=t.height;return{x:e,y:i,top:r,right:n,bottom:a,left:l,width:c,height:d}};o.fromRect=function(t){return new o(t.x,t.y,t.width,t.height)};return o}();var or=function(o){return o instanceof SVGElement&&"getBBox"in o};var Zr=function(o){if(or(o)){var t=o.getBBox(),e=t.width,i=t.height;return!e&&!i}var r=o,n=r.offsetWidth,a=r.offsetHeight;return!(n||a||o.getClientRects().length)};var Ys=function(o){var t,e;var i=(e=(t=o)===null||t===void 0?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(i&&o instanceof i.Element)};var jc=function(o){switch(o.tagName){case"INPUT":if(o.type!=="image"){break}case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return true}return false};var Ao=typeof window!=="undefined"?window:{};var Qr=new WeakMap;var Xc=/auto|scroll/;var dg=/^tb|vertical/;var pg=/msie|trident/i.test(Ao.navigator&&Ao.navigator.userAgent);var ge=function(o){return parseFloat(o||"0")};var yi=function(o,t,e){if(o===void 0){o=0}if(t===void 0){t=0}if(e===void 0){e=false}return Object.freeze({inlineSize:(e?t:o)||0,blockSize:(e?o:t)||0})};var Yc=Object.freeze({devicePixelContentBoxSize:yi(),borderBoxSize:yi(),contentBoxSize:yi(),contentRect:new Xs(0,0,0,0)});var Ks=function(o,t){if(t===void 0){t=false}if(Qr.has(o)&&!t){return Qr.get(o)}if(Zr(o)){Qr.set(o,Yc);return Yc}var e=getComputedStyle(o);var i=or(o)&&o.ownerSVGElement&&o.getBBox();var r=!pg&&e.boxSizing==="border-box";var n=dg.test(e.writingMode||"");var a=!i&&Xc.test(e.overflowY||"");var l=!i&&Xc.test(e.overflowX||"");var c=i?0:ge(e.paddingTop);var d=i?0:ge(e.paddingRight);var u=i?0:ge(e.paddingBottom);var m=i?0:ge(e.paddingLeft);var g=i?0:ge(e.borderTopWidth);var v=i?0:ge(e.borderRightWidth);var S=i?0:ge(e.borderBottomWidth);var x=i?0:ge(e.borderLeftWidth);var w=m+d;var T=c+u;var A=x+v;var F=g+S;var H=!l?0:o.offsetHeight-F-o.clientHeight;var X=!a?0:o.offsetWidth-A-o.clientWidth;var z=r?w+A:0;var j=r?T+F:0;var Y=i?i.width:ge(e.width)-z-X;var ut=i?i.height:ge(e.height)-j-H;var Ge=Y+w+X+A;var To=ut+T+H+F;var Io=Object.freeze({devicePixelContentBoxSize:yi(Math.round(Y*devicePixelRatio),Math.round(ut*devicePixelRatio),n),borderBoxSize:yi(Ge,To,n),contentBoxSize:yi(Y,ut,n),contentRect:new Xs(m,c,Y,ut)});Qr.set(o,Io);return Io};var tn=function(o,t,e){var i=Ks(o,e),r=i.borderBoxSize,n=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(t){case zo.DEVICE_PIXEL_CONTENT_BOX:return a;case zo.BORDER_BOX:return r;default:return n}};var qs=function(){function o(t){var e=Ks(t);this.target=t;this.contentRect=e.contentRect;this.borderBoxSize=[e.borderBoxSize];this.contentBoxSize=[e.contentBoxSize];this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]}return o}();var en=function(o){if(Zr(o)){return Infinity}var t=0;var e=o.parentNode;while(e){t+=1;e=e.parentNode}return t};var Kc=function(){var o=Infinity;var t=[];Gt.forEach(function n(a){if(a.activeTargets.length===0){return}var l=[];a.activeTargets.forEach(function c(d){var u=new qs(d.target);var m=en(d.target);l.push(u);d.lastReportedSize=tn(d.target,d.observedBox);if(m<o){o=m}});t.push(function c(){a.callback.call(a.observer,l,a.observer)});a.activeTargets.splice(0,a.activeTargets.length)});for(var e=0,i=t;e<i.length;e++){var r=i[e];r()}return o};var Js=function(o){Gt.forEach(function t(e){e.activeTargets.splice(0,e.activeTargets.length);e.skippedTargets.splice(0,e.skippedTargets.length);e.observationTargets.forEach(function i(r){if(r.isActive()){if(en(r.target)>o){e.activeTargets.push(r)}else{e.skippedTargets.push(r)}}})})};var qc=function(){var o=0;Js(o);while(Nc()){o=Kc();Js(o)}if(Vc()){Gc()}return o>0};var Zs;var Jc=[];var hg=function(){return Jc.splice(0).forEach(function(o){return o()})};var Zc=function(o){if(!Zs){var t=0;var e=document.createTextNode("");var i={characterData:true};new MutationObserver(function(){return hg()}).observe(e,i);Zs=function(){e.textContent=""+(t?t--:t++)}}Jc.push(o);Zs()};var Qc=function(o){Zc(function t(){requestAnimationFrame(o)})};var on=0;var ug=function(){return!!on};var mg=250;var fg={attributes:true,characterData:true,childList:true,subtree:true};var td=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"];var ed=function(o){if(o===void 0){o=0}return Date.now()+o};var Qs=false;var gg=function(){function o(){var t=this;this.stopped=true;this.listener=function(){return t.schedule()}}o.prototype.run=function(t){var e=this;if(t===void 0){t=mg}if(Qs){return}Qs=true;var i=ed(t);Qc(function(){var r=false;try{r=qc()}finally{Qs=false;t=i-ed();if(!ug()){return}if(r){e.run(1e3)}else if(t>0){e.run(t)}else{e.start()}}})};o.prototype.schedule=function(){this.stop();this.run()};o.prototype.observe=function(){var t=this;var e=function(){return t.observer&&t.observer.observe(document.body,fg)};document.body?e():Ao.addEventListener("DOMContentLoaded",e)};o.prototype.start=function(){var t=this;if(this.stopped){this.stopped=false;this.observer=new MutationObserver(this.listener);this.observe();td.forEach(function(e){return Ao.addEventListener(e,t.listener,true)})}};o.prototype.stop=function(){var t=this;if(!this.stopped){this.observer&&this.observer.disconnect();td.forEach(function(e){return Ao.removeEventListener(e,t.listener,true)});this.stopped=true}};return o}();var rn=new gg;var ta=function(o){!on&&o>0&&rn.start();on+=o;!on&&rn.stop()};var bg=function(o){return!or(o)&&!jc(o)&&getComputedStyle(o).display==="inline"};var od=function(){function o(t,e){this.target=t;this.observedBox=e||zo.CONTENT_BOX;this.lastReportedSize={inlineSize:0,blockSize:0}}o.prototype.isActive=function(){var t=tn(this.target,this.observedBox,true);if(bg(this.target)){this.lastReportedSize=t}if(this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize){return true}return false};return o}();var id=function(){function o(t,e){this.activeTargets=[];this.skippedTargets=[];this.observationTargets=[];this.observer=t;this.callback=e}return o}();var nn=new WeakMap;var rd=function(o,t){for(var e=0;e<o.length;e+=1){if(o[e].target===t){return e}}return-1};var ir=function(){function o(){}o.connect=function(t,e){var i=new id(t,e);nn.set(t,i)};o.observe=function(t,e,i){var r=nn.get(t);var n=r.observationTargets.length===0;if(rd(r.observationTargets,e)<0){n&&Gt.push(r);r.observationTargets.push(new od(e,i&&i.box));ta(1);rn.schedule()}};o.unobserve=function(t,e){var i=nn.get(t);var r=rd(i.observationTargets,e);var n=i.observationTargets.length===1;if(r>=0){n&&Gt.splice(Gt.indexOf(i),1);i.observationTargets.splice(r,1);ta(-1)}};o.disconnect=function(t){var e=this;var i=nn.get(t);i.observationTargets.slice().forEach(function(r){return e.unobserve(t,r.target)});i.activeTargets.splice(0,i.activeTargets.length)};return o}();var Bo=function(){function o(t){if(arguments.length===0){throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.")}if(typeof t!=="function"){throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.")}ir.connect(this,t)}o.prototype.observe=function(t,e){if(arguments.length===0){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!Ys(t)){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element")}ir.observe(this,t,e)};o.prototype.unobserve=function(t){if(arguments.length===0){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!Ys(t)){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element")}ir.unobserve(this,t)};o.prototype.disconnect=function(){ir.disconnect(this)};o.toString=function(){return"function ResizeObserver () { [polyfill code] }"};return o}();var ld=Mo(rr());import Fg from"styled-components";import Og from"react";var sn=Og.createContext({});var Rg=Fg.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${o=>o.theme.background};
  color: ${o=>o.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${o=>o.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${o=>o.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${o=>o.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`;var ia=class extends Lo.Component{constructor(t){super(t);this.node=Lo.createRef();this.saveEditorDimensions=t=>{this.setState({contextValue:{element:t,rect:t.getBoundingClientRect()}})};var e;if((e=Lo)==null?void 0:e.version){const i=Number.parseInt(Lo.version.split(".")[0],10);const r=Number.parseInt(Lo.version.split(".")[1],10);if(i<16||i===16&&r<8)console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,ld.default)(this.saveEditorDimensions,100);this.resizeObserver=new Bo(([i])=>{this.saveEditorDimensions(i.target)});this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var t;if((t=this.node)==null?void 0:t.current){this.resizeObserver.observe(this.node.current)}}componentWillUnmount(){var t;if((t=this.node)==null?void 0:t.current){this.resizeObserver.unobserve(this.node.current)}}render(){const{children:t}=this.props;const{contextValue:e}=this.state;return Lo.createElement(Rg,{ref:this.node,"data-test":C.EditorContainer},Lo.createElement(sn.Provider,{value:e},t))}};import bn from"react";import Oo,{PureComponent as rb,Component as pa,forwardRef as ha,memo as xd,createElement as nb}from"react";import{useState as Hg}from"react";if(!Hg){throw new Error("mobx-react-lite requires React with Hooks support")}if(!tc){throw new Error("mobx-react-lite requires mobx at least version 4 to be available")}import{unstable_batchedUpdates as cd}from"react-dom";import{useCallback as $g,useEffect as d5,useState as Wg}from"react";var _g=function(o,t){var e=typeof Symbol==="function"&&o[Symbol.iterator];if(!e)return o;var i=e.call(o),r,n=[],a;try{while((t===void 0||t-- >0)&&!(r=i.next()).done)n.push(r.value)}catch(l){a={error:l}}finally{try{if(r&&!r.done&&(e=i["return"]))e.call(i)}finally{if(a)throw a.error}}return n};function ra(){var o=_g(Wg(0),2),t=o[1];var e=$g(function(){t(function(i){return i+1})},[]);return e}function dd(o){if(typeof Symbol==="function"){return Symbol.for(o)}return"__$mobx-react "+o+"__"}var Ng={};function pd(){if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}if(typeof self!=="undefined"){return self}return Ng}var Vg=dd("observerBatching");function Ug(o){o()}function an(o){if(!o){o=Ug;if(false){console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")}}ec({reactionScheduler:o});pd()[Vg]=true}var Gg=false;function be(){return Gg}import{forwardRef as Jg,memo as yd}from"react";import la from"react";function hd(o){return oc(o)}function ud(o){var t={cleanAt:Date.now()+jg,reaction:o};return t}var jg=1e4;var Xg=1e4;var nr=new Set;var na;function md(){if(na===void 0){na=setTimeout(Yg,Xg)}}function fd(o){nr.add(o);md()}function gd(o){nr.delete(o)}function Yg(){na=void 0;var o=Date.now();nr.forEach(function(t){var e=t.current;if(e){if(o>=e.cleanAt){e.reaction.dispose();t.current=null;nr.delete(t)}}});if(nr.size>0){md()}}import Kg from"react";var ln=false;var cn=[];function sa(o){return function(){if(ln){cn.push(o)}else{o()}}}function aa(o){ln=true;cn=[];try{var t=o();ln=false;var e=cn.length>0?cn:void 0;Kg.useLayoutEffect(function(){if(e){e.forEach(function(i){return i()})}},[e]);return t}finally{ln=false}}var qg={};function bd(o){return"observer"+o}function vi(o,t,e){if(t===void 0){t="observed"}if(e===void 0){e=qg}if(be()){return o()}var i=e.useForceUpdate||ra;var r=i();var n=sa(r);var a=la.useRef(null);if(!a.current){var l=new Xi(bd(t),function(){if(c.mounted){n()}else{l.dispose();a.current=null}});var c=ud(l);a.current=c;fd(a)}var d=a.current.reaction;la.useDebugValue(d,hd);la.useEffect(function(){gd(a);if(a.current){a.current.mounted=true}else{a.current={reaction:new Xi(bd(t),function(){n()}),cleanAt:Infinity};n()}return function(){a.current.reaction.dispose();a.current=null}},[]);return aa(function(){var u;var m;d.track(function(){try{u=o()}catch(g){m=g}});if(m){throw m}return u})}var ca=function(){ca=Object.assign||function(o){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))o[r]=t[r]}return o};return ca.apply(this,arguments)};function da(o,t){if(be()){return o}var e=ca({forwardRef:false},t);var i=o.displayName||o.name;var r=function(a,l){return vi(function(){return o(a,l)},i)};r.displayName=i;var n;if(e.forwardRef){n=yd(Jg(r))}else{n=yd(r)}Qg(o,n);n.displayName=i;return n}var Zg={$$typeof:true,render:true,compare:true,type:true};function Qg(o,t){Object.keys(o).forEach(function(e){if(!Zg[e]){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}})}function xi(o){var t=o.children,e=o.render;var i=t||e;if(typeof i!=="function"){return null}return vi(i)}xi.propTypes={children:vd,render:vd};xi.displayName="Observer";function vd(o,t,e,i,r){var n=t==="children"?"render":"children";var a=typeof o[t]==="function";var l=typeof o[n]==="function";if(a&&l){return new Error("MobX Observer: Do not use children and render in the same time in`"+e)}if(a||l){return null}return new Error("Invalid prop `"+r+"` of type `"+typeof o[t]+"` supplied to `"+e+"`, expected `function`.")}import R5 from"react";import U5 from"react";an(cd);var Sd=0;function sb(o){if(typeof Symbol==="function"){return Symbol(o)}var t="__$mobx-react "+o+" ("+Sd+")";Sd++;return t}var ua={};function je(o){if(!ua[o]){ua[o]=sb(o)}return ua[o]}function Cd(o,t){if(wd(o,t))return true;if(typeof o!=="object"||o===null||typeof t!=="object"||t===null){return false}var e=Object.keys(o);var i=Object.keys(t);if(e.length!==i.length)return false;for(var r=0;r<e.length;r++){if(!Object.hasOwnProperty.call(t,e[r])||!wd(o[e[r]],t[e[r]])){return false}}return true}function wd(o,t){if(o===t){return o!==0||1/o===1/t}else{return o!==o&&t!==t}}var ab={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function lb(o,t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(o));Object.getOwnPropertyNames(o).forEach(function(i){if(!ab[i]&&e.indexOf(i)===-1){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))}})}function ze(o,t,e){if(!Object.hasOwnProperty.call(o,t)){Object.defineProperty(o,t,{enumerable:false,configurable:true,writable:true,value:e})}else{o[t]=e}}var kd=je("patchMixins");var Td=je("patchedDefinition");function cb(o,t){var e=o[kd]=o[kd]||{};var i=e[t]=e[t]||{};i.locks=i.locks||0;i.methods=i.methods||[];return i}function Id(o,t){var e=this;for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++){r[n-2]=arguments[n]}t.locks++;try{var a;if(o!==void 0&&o!==null){a=o.apply(this,r)}return a}finally{t.locks--;if(t.locks===0){t.methods.forEach(function(l){l.apply(e,r)})}}}function Md(o,t){var e=function i(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++){n[a]=arguments[a]}Id.call.apply(Id,[this,o,t].concat(n))};return e}function db(o,t,e){var i=cb(o,t);if(i.methods.indexOf(e)<0){i.methods.push(e)}var r=Object.getOwnPropertyDescriptor(o,t);if(r&&r[Td]){return}var n=o[t];var a=Ed(o,t,r?r.enumerable:void 0,i,n);Object.defineProperty(o,t,a)}function Ed(o,t,e,i,r){var n;var a=Md(r,i);return n={},n[Td]=true,n.get=function l(){return a},n.set=function l(c){if(this===o){a=Md(c,i)}else{var d=Ed(this,t,e,i,c);Object.defineProperty(this,t,d)}},n.configurable=true,n.enumerable=e,n}var ma=ic||"$mobx";var Dd=je("isMobXReactObserver");var Pd=je("isUnmounted");var dn=je("skipRender");var pn=je("isForcingUpdate");function pb(o){var t=o.prototype;if(o[Dd]){var e=fa(t);console.warn("The provided component class ("+e+") \n                has already been declared as an observer component.")}else{o[Dd]=true}if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(o["__proto__"]!==rb){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=zd;else if(t.shouldComponentUpdate!==zd)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}Ad(t,"props");Ad(t,"state");var i=t.render;t.render=function(){return hb.call(this,i)};db(t,"componentWillUnmount",function(){var r;if(be()===true)return;(r=this.render[ma])===null||r===void 0?void 0:r.dispose();this[Pd]=true;if(!this.render[ma]){var n=fa(this);console.warn("The reactive render of an observer class component ("+n+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}});return o}function fa(o){return o.displayName||o.name||o.constructor&&(o.constructor.displayName||o.constructor.name)||"<component>"}function hb(o){var t=this;if(be()===true)return o.call(this);ze(this,dn,false);ze(this,pn,false);var e=fa(this);var i=o.bind(this);var r=false;var n=new Xi(e+".render()",function(){if(!r){r=true;if(t[Pd]!==true){var l=true;try{ze(t,pn,true);if(!t[dn])pa.prototype.forceUpdate.call(t);l=false}finally{ze(t,pn,false);if(l)n.dispose()}}}});n["reactComponent"]=this;a[ma]=n;this.render=a;function a(){r=false;var l=void 0;var c=void 0;n.track(function(){try{c=Ql(false,i)}catch(d){l=d}});if(l){throw l}return c}return a.call(this)}function zd(o,t){if(be()){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==t){return true}return!Cd(this.props,o)}function Ad(o,t){var e=je("reactProp_"+t+"_valueHolder");var i=je("reactProp_"+t+"_atomHolder");function r(){if(!this[i]){ze(this,i,Zl("reactive "+t))}return this[i]}Object.defineProperty(o,t,{configurable:true,enumerable:true,get:function n(){var a=false;if(Vr&&Ur){a=Vr(true)}r.call(this).reportObserved();if(Vr&&Ur){Ur(a)}return this[e]},set:function n(a){if(!this[pn]&&!Cd(this[e],a)){ze(this,e,a);ze(this,dn,true);r.call(this).reportChanged();ze(this,dn,false)}else{ze(this,e,a)}}})}var Bd=typeof Symbol==="function"&&Symbol.for;var Ld=Bd?Symbol.for("react.forward_ref"):typeof ha==="function"&&ha(function(o){return null})["$$typeof"];var Od=Bd?Symbol.for("react.memo"):typeof xd==="function"&&xd(function(o){return null})["$$typeof"];function P(o){if(o["isMobxInjector"]===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(Od&&o["$$typeof"]===Od){throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.")}if(Ld&&o["$$typeof"]===Ld){var t=o["render"];if(typeof t!=="function")throw new Error("render property of ForwardRef was not a function");return ha(function e(){var i=arguments;return nb(xi,null,function(){return t.apply(void 0,i)})})}if(typeof o==="function"&&(!o.prototype||!o.prototype.render)&&!o["isReactClass"]&&!Object.prototype.isPrototypeOf.call(pa,o)){return da(o)}return pb(o)}function hn(){hn=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){o[i]=e[i]}}}return o};return hn.apply(this,arguments)}function ub(o,t){if(o==null)return{};var e={};var i=Object.keys(o);var r,n;for(n=0;n<i.length;n++){r=i[n];if(t.indexOf(r)>=0)continue;e[r]=o[r]}return e}var sr=Oo.createContext({});function mb(o){var t=o.children,e=ub(o,["children"]);var i=Oo.useContext(sr);var r=Oo.useRef(hn({},i,e));var n=r.current;if(false){var a=hn({},n,e);if(!Cd(n,a)){throw new Error("MobX Provider: The set of provided stores has changed. See: https://github.com/mobxjs/mobx-react#the-set-of-provided-stores-has-changed-error.")}}return Oo.createElement(sr.Provider,{value:n},t)}mb.displayName="MobXProvider";function Fd(o,t,e,i){var r=Oo.forwardRef(function(n,a){var l=hn({},n);var c=Oo.useContext(sr);Object.assign(l,o(c||{},l)||{});if(a){l.ref=a}return Oo.createElement(t,l)});if(i)r=P(r);r["isMobxInjector"]=true;lb(t,r);r["wrappedComponent"]=t;r.displayName=fb(t,e);return r}function fb(o,t){var e;var i=o.displayName||o.name||o.constructor&&o.constructor.name||"Component";if(t)e="inject-with-"+t+"("+i+")";else e="inject("+i+")";return e}function gb(o){return function(t,e){o.forEach(function(i){if(i in e)return;if(!(i in t))throw new Error("MobX injector: Store '"+i+"' is not available! Make sure it is provided by some Provider");e[i]=t[i]});return e}}function R(){for(var o=arguments.length,t=new Array(o),e=0;e<o;e++){t[e]=arguments[e]}if(typeof arguments[0]==="function"){var i=arguments[0];return function(r){return Fd(i,r,i.name,true)}}else{return function(r){return Fd(gb(t),r,t.join("-"),false)}}}if(!pa)throw new Error("mobx-react requires React to be available");if(!M)throw new Error("mobx-react requires mobx to be available");import Si from"react";import Rd,{css as xb}from"styled-components";import bb,{css as yb}from"styled-components";var ar=yb`
  position: absolute;
  top: 0;
  left: 0;
  height: ${o=>o.theme.measurements.colorItem.size}px;
  width: ${o=>o.theme.measurements.colorItem.size}px;
  border-radius: ${o=>o.theme.colorItem.borderRadius||`${o.theme.shape.radiusSmall}px`};
  pointer-events: none;
`;var vb=bb.div.attrs(o=>({style:{background:o.color}}))`
  ${ar}
  z-index: ${o=>o.theme.measurements.zIndex.colorItem.background};
`;var un=vb;var Sb=Rd.div`
  ${ar}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${o=>o.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${o=>o.theme.colorItem.borderRadius||`${o.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${o=>o.isActive&&xb`
      border-color: ${o.theme.selectColor.activeBorderColor};
    `}
`;var ga=Rd.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`;var Cb=({isActive:o,className:t,style:e})=>{return Si.createElement(Sb,{isActive:o,className:t,style:e},o&&Si.createElement(Si.Fragment,null,Si.createElement(ga,null),Si.createElement(ga,null),Si.createElement(ga,null)))};var mn=Cb;import wb from"styled-components";var kb=wb.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${o=>o.theme.measurements.colorItem.size}px;
  width: ${o=>o.theme.measurements.colorItem.size}px;
  margin: ${o=>o.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${o=>o.theme.colorItem.borderRadius||`${o.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${St}

  &:disabled {
    opacity: ${o=>o.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`;var fn=kb;import Tb from"styled-components";var Ib=Tb.div.attrs(o=>{const t=o.url?{backgroundImage:`url(${o.url})`}:{};return{style:t,...o.style}})`
  ${ar}
  z-index: ${o=>o.theme.measurements.zIndex.colorItem.tiledBackground};
`;var gn=Ib;var Mb=({isActive:o,onClick:t,color:e,label:i,isDisabled:r,tiledBackgroundUrl:n,className:a,style:l,children:c})=>{return bn.createElement(fn,{disabled:r,onClick:t,"aria-label":i,className:a,style:l},bn.createElement(gn,{url:n}),bn.createElement(un,{color:e}),bn.createElement(mn,{isActive:o}),c)};var Hd=R("config")(P(Mb));import ba from"react";import Eb from"styled-components";var Db=Eb.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${o=>o.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${o=>o.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`;var yn=Db;import Pb from"react";import zb,{css as Ab}from"styled-components";var Bb=zb.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${o=>o.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${o=>o.isVisible&&Ab`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`;var vn=({isVisible:o,className:t,children:e})=>{return Pb.createElement(Bb,{isVisible:o,className:t},e)};import Lb from"styled-components";var Ob=Lb.div.attrs(({style:o})=>({role:"dialog","aria-hidden":false,style:o}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${o=>o.top}px);
  left: calc(50% + ${o=>o.left}px);
  width: ${o=>o.width};
  height: ${o=>o.height};
  transform: translate(-50%, -50%);
  border-radius: ${o=>o.theme.shape.radiusLarge}px;
  background: ${o=>o.theme.modal.background};
  color: ${o=>o.theme.modal.bodyForeground};
  z-index: ${o=>o.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`;var xn=Ob;var Fb=({isVisible:o=false,width:t="350px",height:e="fit-content",position:i,header:r,body:n,footer:a,className:l,style:c,children:d})=>ba.createElement(vn,{isVisible:o},ba.createElement(yn,null),ba.createElement(xn,{height:e,width:t,left:i.x,top:i.y,className:l,style:c,"data-test":C.Dialog},r,n,d,a));var _d=Fb;import Rb from"styled-components";var Hb=Rb.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  color: ${o=>o.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`;var Ae=Hb;import _b from"styled-components";var $b=_b.div`
  display: flex;
  border-top: 2px solid
    ${o=>o.type==="error"?o.theme.error:o.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`;var Ci=$b;import Wb from"styled-components";var Nb=Wb.h3`
  font-size: ${o=>o.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.headline2.case};
  color: ${o=>o.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`;var wi=Nb;import lr from"react";import $d,{keyframes as Vb}from"styled-components";var Ub=Vb`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`;var Gb=$d.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`;var Sn=$d.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${o=>o.theme.primary};
  border-radius: 50%;
  animation: ${Ub} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${o=>o.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`;var jb=({className:o,style:t})=>{return lr.createElement(Gb,{className:o,style:t},lr.createElement(Sn,null),lr.createElement(Sn,null),lr.createElement(Sn,null),lr.createElement(Sn,null))};var Cn=jb;import Dn from"react";import wa from"react";var ya=["Moz","Webkit","O","ms"];function Xb(o){let t="";let e=true;let i;for(i=0;i<o.length;i+=1){if(e){t+=o[i].toUpperCase();e=false}else if(o[i]==="-"){e=true}else{t+=o[i]}}return t}function va(o,t){return t?`${t}${Xb(o)}`:o}function Yb(o="transform"){if(typeof window==="undefined"||typeof window.document==="undefined"){return""}const{style:t}=window.document.documentElement;if(o in t){return""}let e;for(e=0;e<ya.length;e+=1){if(va(o,ya[e])in t){return ya[e]}}return""}var Wd=Yb();function wn(o,t){for(let e=0,{length:i}=o;e<i;e+=1){if(t.apply(t,[o[e],e,o])){return o[e]}}return null}function xa(o){return typeof o==="function"||Object.prototype.toString.call(o)==="[object Function]"}function ki(o){return typeof o==="number"&&!Number.isNaN(o)}function Ct(o){return parseInt(o,10)}var kn="";function Kb(o,t){if(!kn){kn=wn(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],e=>{return xa(o[e])})}if(!xa(o[kn])){return false}return o[kn](t)}function Sa(o,t,e){let i=o;do{if(Kb(i,t)){return true}if(i===e){return false}i=i.parentNode}while(i);return false}function Tn(o,t,e){if(!o){return}if(o.attachEvent){o.attachEvent(`on${t}`,e)}else if(o.addEventListener){o.addEventListener(t,e,true)}else{o[`on${t}`]=e}}function Xe(o,t,e){if(!o){return}if(o.detachEvent){o.detachEvent(`on${t}`,e)}else if(o.removeEventListener){o.removeEventListener(t,e,true)}else{o[`on${t}`]=null}}function Nd(o){let t=o.clientHeight;const e=o.ownerDocument.defaultView.getComputedStyle(o);t+=Ct(e.borderTopWidth);t+=Ct(e.borderBottomWidth);return t}function Vd(o){let t=o.clientWidth;const e=o.ownerDocument.defaultView.getComputedStyle(o);t+=Ct(e.borderLeftWidth);t+=Ct(e.borderRightWidth);return t}function Ud(o){let t=o.clientHeight;const e=o.ownerDocument.defaultView.getComputedStyle(o);t-=Ct(e.paddingTop);t-=Ct(e.paddingBottom);return t}function Gd(o){let t=o.clientWidth;const e=o.ownerDocument.defaultView.getComputedStyle(o);t-=Ct(e.paddingLeft);t-=Ct(e.paddingRight);return t}function jd(o,t){const e=t===t.ownerDocument.body;const i=e?{left:0,top:0}:t.getBoundingClientRect();const r=o.clientX+t.scrollLeft-i.left;const n=o.clientY+t.scrollTop-i.top;return{x:r,y:n}}function Xd({x:o,y:t,rotation:e}){const i=`translate(${o}px,${t}px) rotate(${e}rad)`;return{[va("transform",Wd)]:i}}function Yd(o,t){let e=null;if(o.targetTouches){e=wn(o.targetTouches,i=>t===i.identifier)}if(o.changedTouches&&!e){e=wn(o.changedTouches,i=>t===i.identifier)}return e}function Kd(o){if(o.targetTouches&&o.targetTouches[0]){return o.targetTouches[0].identifier}if(o.changedTouches&&o.changedTouches[0]){return o.changedTouches[0].identifier}return null}function Ca(o){const t=o.findDOMNode();if(!t){return null}return t}function qb(o){return{left:o.left,top:o.top,right:o.right,bottom:o.bottom}}function qd(o,t,e){if(!o.props.bounds)return[t,e];let{bounds:i}=o.props;i=typeof i==="string"?i:qb(i);const r=Ca(o);if(!r)return[t,e];if(typeof i==="string"){const{ownerDocument:n}=r;const a=n.defaultView;let l;if(i==="parent"){l=r.parentNode}else{l=n.querySelector(i)}const c=a.getComputedStyle(r);const d=a.getComputedStyle(l);i={left:-r.offsetLeft+Ct(d.paddingLeft)+Ct(c.marginLeft),top:-r.offsetTop+Ct(d.paddingTop)+Ct(c.marginTop),right:Gd(l)-Vd(r)-r.offsetLeft+Ct(d.paddingRight)-Ct(c.marginRight),bottom:Ud(l)-Nd(r)-r.offsetTop+Ct(d.paddingBottom)-Ct(c.marginBottom)}}if(ki(i.right))t=Math.min(t,i.right);if(ki(i.bottom))e=Math.min(e,i.bottom);if(ki(i.left))t=Math.max(t,i.left);if(ki(i.top))e=Math.max(e,i.top);return[t,e]}function In(o,t,e){const{state:i}=o;const r=!ki(i.lastX);const n=Ca(o);if(r){return{node:n,deltaX:0,deltaY:0,lastX:t,lastY:e,x:t,y:e}}return{node:n,deltaX:t-i.lastX,deltaY:e-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:e}}function Mn(o,t){return{node:t.node,x:o.state.x+t.deltaX,y:o.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:o.state.x,lastY:o.state.y}}function Jd(o){return o.props.axis==="both"||o.props.axis==="x"}function Zd(o){return o.props.axis==="both"||o.props.axis==="y"}function En(o,t){const e=Ca(t);if(!e)return{x:0,y:0};let{offsetParent:i}=t.props;if(!i&&e instanceof HTMLElement){i=e.offsetParent||e.ownerDocument.body}return jd(o,i)}var ye={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};var Rt=ye.mouse;var ka={cancel:null,disabled:false,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}};var Fo=class extends wa.Component{constructor(){super(...arguments);this.state={dragging:false,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.getTouchFromEvent=t=>{const e=Kd(t);this.setState({touchIdentifier:e});return Yd(t,e)};this.preventDefault=t=>{if(t.stopPropagation){t.stopPropagation()}};this.handleDragStart=t=>{const e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body){throw new Error("<DraggableCore> not mounted on DragStart!")}const{ownerDocument:i}=e;if(this.props.disabled||!(t.target instanceof Node)||this.props.handle&&!Sa(t.target,this.props.handle,e)||this.props.cancel&&Sa(t.target,this.props.cancel,e)){return false}const r=En(t,this);if(r==null){return false}const{x:n,y:a}=r;const l=In(this,n,a);const c=this.props.onStart(t,l);if(c===false){return false}this.setState({dragging:true,lastX:n,lastY:a});if(Rt.move==="touchmove"){Tn(i,Rt.move,this.onTouchDrag)}else{Tn(i,Rt.move,this.onMouseDrag)}Tn(i,Rt.stop,this.handleDragStop)};this.handleDrag=t=>{const e=En(t,this);if(e==null){return}const{x:i,y:r}=e;const n=In(this,i,r);const a=this.props.onDrag(t,n);if(a===false){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(l){const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",true,true,window,0,0,0,0,0,false,false,false,false,0,null);this.handleDragStop(c)}return}this.setState({lastX:i,lastY:r})};this.handleDragStop=t=>{if(!this.state.dragging){return}const e=En(t,this);if(e==null){return}const{x:i,y:r}=e;const n=In(this,i,r);const a=this.findDOMNode();this.setState({dragging:false,lastX:NaN,lastY:NaN});this.props.onStop(t,n);if(a){if(Rt.move==="touchmove"){Xe(a.ownerDocument,Rt.move,this.onTouchDrag)}else{Xe(a.ownerDocument,Rt.move,this.onMouseDrag)}Xe(a.ownerDocument,Rt.stop,this.handleDragStop)}};this.onMouseDown=t=>{this.preventDefault(t);Rt=ye.mouse;this.props.onMouseDown(t);if(t.button&&typeof t.button==="number"&&t.button!==0){return false}return this.handleDragStart(t)};this.onMouseDrag=t=>{this.preventDefault(t);return this.handleDrag(t)};this.onMouseUp=t=>{this.preventDefault(t);Rt=ye.mouse;return this.handleDragStop(t)};this.onTouchStart=t=>{this.preventDefault(t);Rt=ye.touch;const e=this.getTouchFromEvent(t);return this.handleDragStart(e)};this.onTouchDrag=t=>{this.preventDefault(t);Rt=ye.touch;const e=this.getTouchFromEvent(t);return this.handleDrag(e)};this.onTouchEnd=t=>{this.preventDefault(t);Rt=ye.touch;const e=this.getTouchFromEvent(t);return this.handleDragStop(e)}}componentWillUnmount(){const t=this.findDOMNode();if(t){const{ownerDocument:e}=t;Xe(e,ye.mouse.move,this.onMouseDrag);Xe(e,ye.touch.move,this.onTouchDrag);Xe(e,ye.mouse.stop,this.handleDragStop);Xe(e,ye.touch.stop,this.handleDragStop)}}render(){return wa.cloneElement(wa.Children.only(this.props.children),{style:{touchAction:"none",...this.props.children.props.style},onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Fo.defaultProps=ka;Fo.displayName="DraggableCore";var Jb={...ka,axis:"both",bounds:false,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:false};var Pn=class extends Dn.Component{constructor(t){super(t);this.onDragStart=(t,e)=>{const i=this.props.onStart(t,Mn(this,e));if(i===false){return false}this.setState({dragging:true,dragged:true})};this.onDrag=(t,e)=>{const{position:i,defaultPosition:r,onDrag:n,bounds:a}=this.props;if(!this.state.dragging){return false}const l=Mn(this,e);const c=Boolean(i);const d={x:c?l.x:r.x,y:c?l.y:r.y,slackX:0,slackY:0};if(a){const{x:m,y:g}=d;d.x+=this.state.slackX;d.y+=this.state.slackY;const[v,S]=qd(this,d.x,d.y);d.x=v;d.y=S;d.slackX=this.state.slackX+(m-d.x);d.slackY=this.state.slackY+(g-d.y);l.x=d.x;l.y=d.y;l.deltaX=d.x-this.state.x;l.deltaY=d.y-this.state.y}const u=n(t,l);if(u===false){return false}this.setState(d)};this.onDragStop=(t,e)=>{if(!this.state.dragging){return false}const i=this.props.onStop(t,Mn(this,e));if(i===false){return false}const r={dragging:false,slackX:0,slackY:0,x:0,y:0};const n=Boolean(this.props.position);if(n){const{x:a,y:l}=this.props.position;r.x=a;r.y=l}this.setState(r)};this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.state={dragging:false,dragged:false,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(t){const e=Boolean(this.props.position);if(e){if(this.props.updateOnPosition){if(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}else{if(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}}}componentWillUnmount(){this.setState({dragging:false})}render(){const{position:t,defaultPosition:e,rotation:i,defaultClassName:r,defaultClassNameDragging:n,defaultClassNameDragged:a,...l}=this.props;const{x:c,y:d,dragging:u,dragged:m}=this.state;let g={};const v=Boolean(t);const S=!v||u;const x=t||e;const w={x:Jd(this)&&S?c:x.x,y:Zd(this)&&S?d:x.y,rotation:i};g=Xd(w);const T=Dn.Children.only(this.props.children);const A=[T.props.className||"",r,u?n:"",m?a:""].join(" ").trim();const F=Dn.cloneElement(T,{className:A,style:{...T.props.style,...g}});return Dn.createElement(Fo,{...l,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop},F)}};Pn.defaultProps=Jb;Pn.displayName="Draggable";var Qd=Pn;var sp=Mo(rp());import re from"react";import Ye,{css as ap}from"styled-components";import f0 from"react";import np,{css as g0}from"styled-components";var b0=np.label`
  ${mi}
`;var y0=np.label`
  display: block;
  font-size: ${o=>o.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.label.case};
  color: ${o=>o.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:o})=>o&&g0`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`;var kt=({label:o,htmlFor:t,show:e,style:i,isDisabled:r,className:n})=>{const a=e?y0:b0;const l=t||(o?o.replace(" ","-"):void 0);return f0.createElement(a,{style:i,isDisabled:r,htmlFor:l,className:n},o)};kt.defaultProps={show:true};var v0=Ye.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`;var x0=Ye(kt)`
  align-self: flex-start;
`;var lp=Ye(wt)`
  color: ${o=>o.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`;var S0=Ye.div`
  display: flex;
  justify-content: space-between;
  width: ${o=>o.theme.measurements.advancedUIToolControlBar.width-48}px;
`;var C0=Ye.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${o=>.6*o.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${o=>o.theme.toolControlBar.inputLabelForeground};
`;var w0=Ye.div`
  width: ${o=>.6*o.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`;var k0=Ye.span`
  width: ${o=>Math.round(o.length*.6*o.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${o=>o.activeIndex*.6*o.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;
`;var cp=Ye.div`
  border: solid ${o=>o.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:o})=>o==="left"?ap`
          margin-left: 2px;
          transform: rotate(135deg);
        `:ap`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`;var Ia=class extends re.PureComponent{constructor(t){super(t);this.updateIndex=(t,e=false)=>{let i=t+(e?-1:1);const r=this.props.list.length-1;if(i>r){i=0}if(i<0){i=r}this.props.onSelect(this.props.list[i].identifier)};this.getActiveIndex=t=>{const{list:e}=this.props;const i=e.findIndex(r=>r.identifier===t);return i!==-1?i:0};this.throttledUpdateIndex=(0,sp.default)(this.updateIndex,600)}render(){const{list:t,label:e,showLabel:i=true}=this.props;const r=this.getActiveIndex(this.props.defaultIdentifier);const n=t.length<=1;return re.createElement(v0,{"data-test":C.CarouselSlider},re.createElement(x0,{show:i,label:e}),re.createElement(S0,{id:`photoeditorsdk-${e.replace(" ","-")}`},re.createElement(lp,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r,true)},re.createElement(cp,{direction:"left"})),re.createElement(w0,null,re.createElement(k0,{activeIndex:r,length:t.length},t.map(a=>re.createElement(C0,{key:a.identifier},a.value)))),re.createElement(lp,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r)},re.createElement(cp,{direction:"right"}))))}};Ia.defaultProps={showLabel:true};var dp=Ia;import dr from"react";import T0 from"styled-components";var I0=T0.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${o=>o.theme.measurements.inputs.checkbox.maxWidth}px;
`;var An=I0;import M0,{css as pp}from"styled-components";var E0=M0.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${o=>o.theme.checkbox.background};
  border-radius: ${o=>o.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${St}

  &:hover {
    opacity: ${o=>o.theme.checkbox.hoverOpacity};
  }
  ${o=>o.isChecked&&pp`
      background-color: ${o.theme.checkbox.activeBackground};
      &::after {
        color: ${o.theme.checkbox.activeForeground};
        border-color: ${o.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${o.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${o=>o.isDisabled&&pp`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;var cr=E0;import D0 from"styled-components";var P0=D0.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${St}
`;var Bn=P0;var hp=({label:o,value:t,checkMarkPosition:e,onClick:i,isDisabled:r,className:n,style:a})=>{const l=`photoeditorsdk-${o.replace(" ","-")}`;return dr.createElement(An,{"data-test":C.Checkbox,className:n,style:a},e==="left"&&dr.createElement(cr,{onClick:i,isDisabled:r,isChecked:t}),dr.createElement(kt,{isDisabled:r,label:o,htmlFor:l}),dr.createElement(Bn,{id:l,disabled:r,checked:t,onChange:i}),e==="right"&&dr.createElement(cr,{onClick:i,isDisabled:r,isChecked:t}))};var up=hp;hp.defaultProps={value:false,checkMarkPosition:"left"};import{css as z0}from"styled-components";var Ro=z0`
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${o=>o.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${o=>o.theme.textInput.borderColor};
  background: ${o=>o.theme.textInput.background};
  font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${o=>o.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${o=>o.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${o=>o.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${o=>o.theme.textInput.hoverBorderColor};
  }
`;import Be from"react";import Sp from"styled-components";import A0,{css as B0}from"styled-components";var mp=B0`
  opacity: ${o=>o.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`;var fp=A0.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${mp}
  }

  ${({isDisabled:o})=>o&&mp}
`;import L0,{css as O0}from"styled-components";var gp=L0.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${o=>o.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${o=>o.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${o=>o.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:o})=>o&&O0`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${St}
`;import H0,{css as vp}from"styled-components";import bp from"react";import yp,{css as Ti}from"styled-components";var F0=yp.div`
  display: flex;
  ${o=>{if(pe()||ui()){return Ti`
        overflow: hidden;
      `}if(o.direction==="vertical"){return Ti`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `}return Ti`
      overflow-y: hidden;
      overflow-x: auto;
    `}};
`;var R0=yp.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${o=>o.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${o=>{if(pe()||ui()){return Ti`
        ${()=>{if(o.direction==="vertical"){return Ti`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `}return Ti`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}}

        scrollbar-face-color: ${o.theme.scrollbar.handleColor};
        scrollbar-track-color: ${o.theme.toolbar.background};
        scrollbar-base-color: ${o.theme.toolbar.background};
        scrollbar-3dlight-color: ${o.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${o.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${o.theme.toolbar.background};
        scrollbar-shadow-color: ${o.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${o.theme.scrollbar.handleColor};
      `}return""}}
`;var Ho=({direction:o="horizontal","data-test":t,className:e,children:i})=>bp.createElement(F0,{direction:o,className:e},bp.createElement(R0,{direction:o,"data-test":t},i));var Ma=H0(Ho)`
  position: absolute;

  background: ${o=>o.theme.dropdown.listBackground};
  color: ${o=>o.theme.dropdown.listForeground};
  border: 1px solid ${o=>o.theme.dropdown.listBorderColor};
  box-shadow: ${o=>o.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${o=>{if(o.isOpen){return vp`
        visibility: visible;
        opacity: 1;
        display: flex;
      `}return""}}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>{if(pe()){return vp`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `}return""}}

  border-radius: 0 0 ${o=>o.theme.shape.radiusMedium}px
    ${o=>o.theme.shape.radiusMedium}px;
  z-index: ${o=>o.theme.measurements.zIndex.input.list};
`;Ma.defaultProps={direction:"vertical"};import _0 from"styled-components";var xp=_0.div`
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  color: ${o=>o.theme.dropdown.foreground};
  background-color: ${o=>o.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${o=>o.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${o=>o.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${o=>o.theme.dropdown.hoverBorderColor};
  }

  ${St}
`;var $0=Sp.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${o=>o.theme.dropdown.caretColor};
  transform: rotate(${o=>o.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`;var W0=Sp.div``;var Ea=class extends Be.PureComponent{constructor(t){super(t);this.state={isOpen:false};this.handleOutsideClick=t=>{if(this.node&&this.node.contains(t.target)){return}this.setState({isOpen:false})};this.onSelect=t=>{const{onSelect:e}=this.props;e(t);this.setState({isOpen:false})};this.onClick=()=>{this.setState(t=>({isOpen:!t.isOpen}))};this.listItem=t=>{const{itemStyle:e,selectedItem:i}=this.props;const{isOpen:r}=this.state;const{value:n,label:a}=t;let l={};if(typeof e==="function"){l=e(t)}else if(e!==null&&typeof e==="object"){l=e}return Be.createElement(gp,{"aria-hidden":!r,tabIndex:0,style:l,onClick:()=>this.onSelect(n),key:n,isActive:i===n},a)};this.onKeyDown=t=>{if(t.code==="Space"||t.code==="Enter"){this.onClick()}};this.nodeRef=e=>{this.node=e}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false)}render(){const{selectedItem:t,list:e,label:i,style:r,isDisabled:n}=this.props;const{isOpen:a}=this.state;const l=e.length>1;const c=n?{}:{tabIndex:0};return Be.createElement(W0,null,Be.createElement(kt,{isDisabled:n,style:{paddingLeft:"0px"},label:i}),Be.createElement("div",{ref:this.nodeRef},Be.createElement(fp,{isOpen:a,isDisabled:n},Be.createElement(xp,{"data-test":C.Dropdown,"aria-hidden":n,...c,showList:l,style:r,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown},t,l&&Be.createElement($0,{rotation:a?180:0})),Be.createElement(Ma,{"data-test":C.DropdownList,isOpen:a},l&&e.map(this.listItem)))))}};import N0 from"styled-components";var Cp=N0.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`;import V0 from"react";var U0=({children:o})=>{const t=e=>{e.preventDefault()};return V0.createElement("form",{onSubmit:t},o)};var wp=U0;import pr from"react";import X0,{css as Tp}from"styled-components";import Da from"react";import kp from"styled-components";var G0=kp.input`
  ${Ro}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${o=>o.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`;var j0=kp.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`;var Pa=class extends Da.Component{constructor(){super(...arguments);this.onChange=t=>{const{onChange:e}=this.props;if(e){e(t.target.value)}}}render(){const{id:t,testId:e,value:i,type:r,min:n,max:a,onBlur:l,onFocus:c,onKeyUp:d,onKeyDown:u,onMouseUp:m,onTouchEnd:g,isDisabled:v,className:S,children:x}=this.props;return Da.createElement(j0,{className:S},Da.createElement(G0,{id:t,"data-test":e,"aria-hidden":v,disabled:v,value:i,type:r,min:n,max:a,onChange:this.onChange,onBlur:l,onFocus:c,onKeyUp:d,onKeyDown:u,onMouseUp:m,onTouchEnd:g}),x)}};Pa.defaultProps={type:"text"};var Ln=Pa;var Y0=X0.div`
  ${pe()?Tp``:Tp`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`;var hr=class extends pr.Component{constructor(t){super(t);this.node=null;this.handleOutsideClick=t=>{if(this.node&&this.node.current&&this.node.current.contains(t.target)){return}this.onSubmit()};this.onSubmit=()=>{const{onSubmit:t}=this.props;const{value:e,isActive:i}=this.state;if(t){const r=parseFloat(hr.cleanValue(e));if(!Number.isNaN(r)&&i){t(`${r}`)}}this.setState({isActive:false})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:true})};this.onKeyDown=t=>{const{value:e}=this.state;if(t.key==="Enter"){this.onSubmit()}else if(t.key==="ArrowUp"){const i=parseFloat(hr.cleanValue(e));if(typeof i==="number"){this.setState({value:(i+1).toString(),isActive:true})}}else if(t.key==="ArrowDown"){const i=parseFloat(hr.cleanValue(e));if(typeof i==="number"){this.setState({value:(i-1).toString(),isActive:true})}}};this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:true})};this.state={value:this.props.value||"",isActive:false};this.node=pr.createRef()}static getDerivedStateFromProps({value:t},{value:e,isActive:i}){if(t!==e&&!i){return{value:t}}return null}static cleanValue(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false)}render(){const{id:t,label:e,isDisabled:i,ariaHidden:r,onMouseUp:n,onTouchEnd:a,className:l}=this.props;const{value:c}=this.state;return pr.createElement(Y0,{ref:this.node,"data-test":C.NummericInput,className:l},pr.createElement(kt,{htmlFor:t,label:e,show:!!e,isDisabled:i}),pr.createElement(Ln,{id:t,value:c,isDisabled:i,"aria-hidden":r,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:n,onTouchEnd:a}))}};var za=hr;za.defaultProps={showLabel:true};var On=za;import Aa,{forwardRef as K0}from"react";import q0 from"styled-components";var J0=q0.input.attrs({type:"search"})`
  ${Ro}
`;var Ip=K0(({onChange:o,onKeyDown:t,placeholder:e,className:i,style:r},n)=>{const a=l=>{if(o)o(l.target.value)};return Aa.createElement("div",{className:i,style:r},Aa.createElement(kt,{show:false,label:"photoeditorsdk-Search"}),Aa.createElement(J0,{ref:n,id:"photoeditorsdk-Search",onChange:a,onKeyDown:t,placeholder:e,autoComplete:"off"}))});import Ba from"react";import Mp,{css as Z0}from"styled-components";var Q0=Mp.div``;var Ep=({label:o,children:t,inline:e,showLabel:i,isDisabled:r,"data-test":n})=>{return Ba.createElement(Q0,{"data-test":n},Ba.createElement(kt,{isDisabled:r,label:o,show:i}),Ba.createElement(t1,{id:`photoeditorsdk-${o.replace(" ","-")}`,inline:!!e},t))};var t1=Mp.div`
  display: inline-flex;
  ${o=>!o.inline&&Z0`
        flex-wrap: wrap;
      `||""}
`;Ep.defaultProps={showLabel:true};var Dp=Ep;import Ii from"react";import ur,{css as mr}from"styled-components";var e1=ur.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`;var o1=ur(kt)`
  padding-bottom: 2px;
`;var La=mr`
  ${ui()||pe()?mr`
        width: 16px;
        height: 16px;
      `:mr`
        width: 20px;
        height: 20px;
      `}
  background: ${o=>o.theme.slider.thumbBackground};
  border: 2px solid ${o=>o.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`;var i1=o=>{let t=(o.value-o.min)*100/(o.max-o.min);if(o.adjust){if(o.value>0){t=o.value*(o.max/2)*100;return`${o.theme.slider.trackColor} 0%,
      ${o.theme.slider.trackColor} 50%,
      ${o.theme.slider.activeTrackColor} 50%,
      ${o.theme.slider.activeTrackColor} ${50+t}%,
      ${o.theme.slider.trackColor} ${50+t}%,
      ${o.theme.slider.trackColor} 100%
      `}if(o.value<0){t=o.value*(o.min/2)*100;return`${o.theme.slider.trackColor} 0%,
      ${o.theme.slider.trackColor} ${50-t}%,
      ${o.theme.slider.activeTrackColor} ${50-t}%,
      ${o.theme.slider.activeTrackColor} 50%,
      ${o.theme.slider.trackColor} 50%,
      ${o.theme.slider.trackColor} 100%
      `}return`${o.theme.slider.trackColor} 0%,
    ${o.theme.slider.trackColor} 100%`}return`${o.theme.slider.activeTrackColor} 0%,
    ${o.theme.slider.activeTrackColor} ${t}%,
    ${o.theme.slider.trackColor} ${t}%,
    ${o.theme.slider.trackColor} 100%`};var r1=ur.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  height: 100;
  border: none;

  ${St}

  ${ui()||pe()?mr`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:mr`
        height: 2px;
        background: ${o=>`linear-gradient(to right, ${i1(o)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${o=>o.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${o=>o.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${La}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${La}
  }
  &::-ms-thumb {
    appearance: none;
    ${La}
  }
  &::-ms-fill-lower {
    background: ${o=>`${o.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${o=>`${o.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`;var n1=ur.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${o=>o.centerSlider?-56:0}px;
`;var s1=ur(On)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`;var Oa=class extends Ii.Component{constructor(t){super(t);this.onSubmit=t=>{const{onChange:e,suffix:i,divider:r,min:n,max:a,value:l}=this.props;const c=t.replace(i,"");const d=c?parseFloat(c)/r:l;const u=Math.max(n,Math.min(a,d));if(!Number.isNaN(u)){e(u);if(this.props.onMouseUp){this.props.onMouseUp(u)}else if(this.props.onTouchEnd){this.props.onTouchEnd(u)}}};this.onSliderChange=t=>{const{onChange:e}=this.props;const i=parseFloat(t.target.value);e(i)};this.onTouchOrMouseUp=t=>{const{value:e}=t.target;const{onMouseUp:i,onTouchEnd:r}=this.props;const n=parseFloat(e);if(i){i(n)}if(r){r(n)}};this.randomId=Ki()}render(){const{"data-test":t,identifier:e,value:i,min:r,max:n,divider:a,suffix:l,decimal:c,showLabel:d,showInput:u,style:m,centerSlider:g,adjust:v,label:S,isDisabled:x,step:w,"aria-hidden":T,className:A}=this.props;const F=`photoeditorsdk-slider-${this.randomId}`;const H=`${F}-input`;const X=`${(i*a).toFixed(c)}${l}`;const z=u&&Ii.createElement(s1,{id:H,value:X,isDisabled:x,"aria-hidden":T,onSubmit:this.onSubmit});return Ii.createElement(e1,{className:A,"data-test":t||e||F},Ii.createElement(o1,{isDisabled:x,label:S,show:d}),Ii.createElement(n1,{centerSlider:u&&g},Ii.createElement(r1,{type:"range",role:"slider","aria-hidden":T,tabIndex:0,value:i,min:r,max:n,step:w,style:m,disabled:x,id:F,onChange:this.onSliderChange,adjust:v,name:S,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:this.onTouchOrMouseUp,onTouchEnd:this.onTouchOrMouseUp}),z))}};Oa.defaultProps={showLabel:true,showInput:true,adjust:false,centerSlider:false,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};var Pp=Oa;import Le from"react";var Fa=class extends Le.Component{constructor(){super(...arguments);this.onDismiss=()=>{const{handleClose:t,handleDismiss:e}=this.props;if(t)t();if(e)e()};this.onConfirm=()=>{const{handleClose:t,handleConfirm:e}=this.props;if(t)t();if(e)e()}}render(){const{headerLabel:t,bodyLabel:e,confirmLabel:i,dismissLabel:r,type:n,children:a}=this.props;const l=Le.Children.toArray(a)[0];if(!Le.isValidElement(l))throw new Error("Child is not a valid react element");return Le.cloneElement(l,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:Le.createElement(wi,null,t),body:Le.createElement(Ae,{"data-test":C.DialogBody},e),footer:Le.createElement(Ci,{type:n},r&&Le.createElement(Do,{label:r,ariaLabel:r,onClick:this.onDismiss}),i&&Le.createElement(Qi,{label:i,ariaLabel:i,onClick:this.onConfirm}))});return null}};import ve from"react";import Fn from"styled-components";var a1=Fn.div`
  display: flex;
`;var l1=Fn(wi)`
  padding: 0;
`;var c1=Fn.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`;var d1=Fn(Ae)`
  padding: 0;
  margin: 0;
`;var Ra=class extends ve.PureComponent{render(){const{headerLabel:t,bodyLabel:e,children:i}=this.props;const r=ve.Children.toArray(i)[0];if(!ve.isValidElement(r))throw new Error("Child is not a valid react element");return ve.cloneElement(r,{height:"90px",body:ve.createElement(Ae,{"data-test":C.DialogBody},ve.createElement(a1,null,ve.createElement(Cn,null),ve.createElement(c1,null,ve.createElement(l1,null,t),ve.createElement(d1,null,e))))});return null}};import jt from"react";import fr from"styled-components";var p1=fr.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`;var h1=fr.textarea`
  display: flex;
  caret-color: ${o=>o.theme.primary};
  ${Ro}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${o=>o.theme.modal.bodyForeground};
  resize: none;
  font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${o=>o.theme.primary};
    color: ${o=>o.theme.foreground};
  }
`;var u1=fr.label`
  padding: 11px 20px 8px;
  font-size: ${o=>o.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.label.case};
  color: ${o=>o.theme.modal.headerForeground};
`;var m1=fr(Ae)`
  height: 100%;
`;var f1=fr(Ci)`
  border-top: none;
`;var Ha=class extends jt.Component{constructor(){super(...arguments);this.state={value:""};this.input=jt.createRef();this.handleKeydown=t=>{Ec(this.handleDismiss)(t)};this.handleDismiss=()=>{const{handleDismiss:t}=this.props;if(t)t(false)};this.handleConfirm=()=>{const{handleConfirm:t}=this.props;const{value:e}=this.input.current;if(e){if(t)t(e);this.handleDismiss()}};this.onChange=t=>{const{allowEmojis:e}=this.props;const i=e?t.target.value:lc(t.target.value);this.input.current.value=i;this.setState({value:i})};this.onSubmit=t=>{t.preventDefault()}}componentDidMount(){const{text:t,defaultText:e}=this.props;this.input.current.focus();this.input.current.value=t||e||"";this.setState({value:this.input.current.value});document.addEventListener("keydown",this.handleKeydown,false);if(t===e){this.input.current.select()}}componentDidUpdate(t){const{isVisible:e}=this.props;if(t.isVisible!==e){if(e){this.input.current.focus()}}}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,false)}render(){const{headerLabel:t,dismissLabel:e,confirmLabel:i,maxLength:r,type:n,children:a}=this.props;const{value:l}=this.state;const c=jt.Children.toArray(a)[0];if(!jt.isValidElement(c))throw new Error("Child is not a valid react element");return jt.cloneElement(c,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!l,height:"150px",header:jt.createElement(u1,{htmlFor:"photoeditorsdk-TextInput"},t),body:jt.createElement(m1,null,jt.createElement(p1,{onSubmit:this.onSubmit},jt.createElement(h1,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:true,onChange:this.onChange,maxLength:r}))),footer:jt.createElement(f1,{type:n},jt.createElement(Do,{label:e,ariaLabel:e,onClick:this.handleDismiss}),jt.createElement(Qi,{label:i,ariaLabel:i,isDisabled:!l,onClick:this.handleConfirm}))});return null}};Ha.defaultProps={defaultText:"Write Something",allowEmojis:false};var zp=Ha;import g1 from"styled-components";var _a=g1.div`
  padding-bottom: ${o=>(o.count||1)*8}px;
`;_a.defaultProps={count:1};import Mi from"react";var $a=class extends Mi.Component{getChildren(){const t=[];const e=[];Mi.Children.forEach(this.props.children,i=>{switch(i.type.componentName){case"case":if(this.props.type===i.props.value){t.push(i)}break;case"default":e.push(i);break}});if(t.length>0){return t}return e}render(){const t=this.getChildren();return t.length===0?null:Mi.createElement(Mi.Fragment,null,t)}};var Rn=class extends Mi.Component{render(){return this.props.children}};Rn.componentName="case";var Hn=class extends Mi.Component{render(){return this.props.children}};Hn.componentName="default";import b1,{keyframes as y1,css as v1}from"styled-components";var x1=y1`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`;var S1=b1.div`
  position: absolute;
  top: ${o=>o.position.y}px;
  left: ${o=>o.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${o=>o.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:o})=>o&&v1`
      visibility: visible;
      animation: ${x1} 0.5s, fadeout 0.5s 2.5s;
    `}
`;var Ap=S1;import Ei from"react";import C1,{css as Bp}from"styled-components";var w1=()=>Bp`
    animation: ${Jr} 0.2s linear;
  `;var k1=Bp`
  border: 1px solid ${o=>o.theme.card.activeBorderColor};
  ${_s} {
    background-color: ${o=>o.theme.card.activeOverlayColor};
  }
`;var T1=C1.button.attrs(o=>{const t={};if(o.image){t.backgroundImage=`url(${o.image})`}return{style:t,...o.style}})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${o=>o.theme.card.background};
  color: ${o=>o.theme.card.foreground};

  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  ${w1};
  animation-fill-mode: both;
  overflow: hidden;

  ${St}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:o})=>o&&k1}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${Et} {
      background-color: ${o=>o.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${fi} {
      background-color: ${o=>o.theme.card.hoverOverlayColor};
    }
  }
`;var _o=class extends Ei.Component{constructor(){super(...arguments);this.state=Kr;this.timeout=null;this.onKeyDown=t=>{if(t.key==="Space"||t.key==="Enter"){if(this.props.onClick){this.props.onClick()}}};this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect();const i=t.pageX-e.left;const r=t.pageY-e.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(i,r)})}else{this.setRippleState(i,r)}this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:t,label:e,isActive:i,isDisabled:r,image:n,style:a,className:l}=this.props;const{left:c,top:d,display:u}=this.state;return Ei.createElement(T1,{isActive:i,"aria-label":e,"data-test":e,disabled:r,image:n,onClick:this.onClick,onKeyDown:this.onKeyDown,style:a,className:l},t,Ei.createElement(qr,{display:u,left:c,top:d}),Ei.createElement(_s,null),Ei.createElement(Et,null),Ei.createElement(fi,null))}};_o.defaultProps={isActive:false};var k8={Focused:St,VisuallyHidden:mi};var Lp={ripple:Xr,scale:Wc,slide:Jr};var B={Container:ia,ColorItem:Hd,ColorItemBase:fn,ColorItemBackground:un,ColorItemTiledBackground:gn,ColorItemActiveOverlay:mn,Dialog:_d,DialogBase:vn,DialogContainer:xn,DialogBackdrop:yn,DialogHeader:wi,DialogBody:Ae,DialogFooter:Ci,DialogSpinner:Cn,TextEditModal:zp,ActionModal:Fa,InfoModal:Ra,Spacer:_a,Draggable:Qd,DraggableCore:Fo,Toast:Ap,Input:{Label:kt,File:Cp,Search:Ip,Slider:Pp,CarouselSlider:dp,Selection:Dp,Checkbox:up,CheckboxBase:An,CheckboxInput:Bn,CheckboxCheckMark:cr,Dropdown:Ea,Text:Ln,NumericInput:On,Form:wp},Switch:{Index:$a,Case:Rn,Default:Hn}};import I1 from"styled-components";var Op=I1(ie)`
  font-size: ${o=>o.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button2.case};
  color: ${o=>o.theme.button.textSecondaryForeground};

  ${Et} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }
`;import Wa,{css as Fp}from"styled-components";var Rp=Wa.div`
  display: inline-flex;
`;var Ke=Wa(ie)`
  background: ${o=>o.theme.canvasActionBar.background};
  color: ${o=>o.theme.canvasActionBar.foreground};
  font-size: ${o=>o.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`;var gr=Wa.div`
  ${({show:o})=>o?Fp`
          opacity: 1;
        `:Fp`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${o=>o.theme.canvasActionBar.background};
  color: ${o=>o.theme.canvasActionBar.foreground};
  border-radius: ${o=>o.theme.canvasActionBar.borderRadius?o.theme.canvasActionBar.borderRadius:o.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${o=>o.theme.measurements.zIndex.buttonGroup};

  ${Ke} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${o=>o.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`;import Hp from"react";import _p from"styled-components";var M1=_p(wt)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${o=>o.theme.measurements.zIndex.button.float};
  padding: 2px;
`;var E1=_p.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${o=>o.theme.webcam.floatButton};
`;var $p=o=>{return Hp.createElement(M1,{...o},Hp.createElement(E1,null))};var _n=[f.LIBRARY,[f.TRANSFORM,f.FILTER,f.ADJUSTMENT],[f.FOCUS,f.FRAME,f.OVERLAY],[f.TEXT,f.TEXT_DESIGN,f.STICKER,f.BRUSH]];var Di={image:"",license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[et.UNDO,et.REDO,et.EXPORT,et.CLOSE],displayResizeWarning:false,displayCloseWarning:true,displayCanvasRendererWarning:true,displayToolControlBarTitle:true,displaySerializationModal:true,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:ac()?"webgl":"canvas",backgroundColor:[0,0,0,1]},enableZoom:true,scaleImageToFit:true,restrictZoomOutToDefault:true,forceCrop:false,assetBaseUrl:"assets/",defaultTool:f.FILTER,tools:_n,snapping:new dc,filter:new mc,focus:new fc,adjustment:new uc,library:new bc,overlay:new yc,sticker:new vc,text:new xc,textdesign:new Cc,frame:new gc,brush:new Sc,transform:new wc,export:{image:{exportType:Eo.IMAGE,format:he.PNG,quality:.9,enableDownload:true,transparent:true},filename:"photoeditorsdk-export"},custom:{},watermark:new pc};function Na(o){const t=o&&typeof o==="object";return t&&Object.prototype.toString.call(o)!=="[object RegExp]"&&Object.prototype.toString.call(o)!=="[object Date]"}function D1(o){return Array.isArray(o)?[]:{}}function Va(o,t){const e=t&&t.clone===true;return e&&Na(o)?Ua(D1(o),o,t):o}function P1(o,t,e){const i={};if(Na(o)){Object.keys(o).forEach(r=>{i[r]=Va(o[r],e)})}Object.keys(t).forEach(r=>{const n=Na(t[r])&&o[r];i[r]=n?Ua(o[r],t[r],e):Va(t[r],e)});return i}function Ua(o,t,e){const i=Array.isArray(t);if(i){return Array.isArray(o)?t:Va(t,e)}return P1(o,t,e)}function Xt(o,t=null){if(!Array.isArray(o)||o.length<2){throw new Error("first argument should be an array with at least two elements")}return o.reduce((e,i)=>{return Ua(e,i,t)})}var Ga=o=>{let t=Number(o).toString(16);if(t.length<2){t=`0${t}`}return t};var Wp=(o,t,e)=>{const i=Ga(o*255);const r=Ga(t*255);const n=Ga(e*255);return`#${i}${r}${n}`};var xe=o=>{if(Rc(o)){const[t,e,i,r]=o;return`rgba(${t*255}, ${e*255}, ${i*255}, ${r})`}if(Fc(o)){const{r:t,g:e,b:i,a:r}=o;return`rgba(${t*255}, ${e*255}, ${i*255}, ${r})`}if(Oc(o)){const[t,e,i]=o;return Wp(t,e,i)}if(Lc(o)){const{r:t,g:e,b:i}=o;return Wp(t,e,i)}return o};var ne=o=>{return o.map(t=>({identifier:t.name,color:t.color,colorString:xe(t.color)}))};var zt={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};var ja={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};var $o={[ot.BRIGHTNESS]:0,[ot.SATURATION]:0,[ot.CONTRAST]:0,[ot.GAMMA]:0,[ot.CLARITY]:0,[ot.EXPOSURE]:0,[ot.SHADOWS]:0,[ot.HIGHLIGHTS]:0,[ot.WHITES]:0,[ot.BLACKS]:0,[ot.TEMPERATURE]:0,[ot.SHARPNESS]:0};var L;(function(i){i["ADD"]="add";i["EDIT"]="edit";i["DELETE"]="delete"})(L||(L={}));var lt=class{constructor(t,e){this.assets=[];this.entityMapper=t=>{if("items"in t){return this.categoryMapper(t)}return this.itemMapper(t)};this.categoryMapper=t=>t?{...t,thumbnailURI:this.getCategoryThumbnailURI(t),name:this.config.locale[t.identifier]||t.name,items:t.items.map(this.itemMapper)}:null;this.itemMapper=t=>{return{...t,thumbnailURI:this.getItemThumbnailURI(t),name:this.config.locale[t.identifier]||("name"in t?t.name:"")}};this.getCategoryThumbnailURI=t=>{if(t.thumbnailURI){if(Yi(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"){return t.thumbnailURI}return this.config.getAssetPath(t.thumbnailURI||"")}return""};this.getItemThumbnailURI=t=>{var i;if((i=t.thumbnailURI)==null?void 0:i.trim()){if(Yi(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"){return t.thumbnailURI}return this.config.getAssetPath(t.thumbnailURI||"")}const e=t[this.config.itemFallbackKey];if(!e)return"";return this.config.getAssetPath(e)};this.config=e;this.assets=t.map(this.entityMapper).filter(Boolean)}static isCategory(t){return Object.prototype.hasOwnProperty.call(t,"items")}get categories(){return this.assets.reduce((t,e)=>{if(lt.isCategory(e)){return[...t,e]}return void 0},[]).filter(Boolean)}get items(){return this.assets.reduce((t,e)=>{if(lt.isCategory(e)){return[...t,...e.items]}return[...t,e]},[]).filter(Boolean)}};var Oe=class{constructor(t,e){this.from=t;this.to=e}contains(t){return this.from<=t&&t<=this.to}clamp(t){return Math.min(Math.max(this.from,t),this.to)}};var z1=new Oe(-1,1);var Pi=class{constructor(t){this.editAdjustments=({type:t,value:e})=>{const i=z1.clamp(e);this.state[t]=i};this.reset=()=>{pt(()=>{if(this.indexInContainer===-1){Object.keys($o).forEach(t=>{this.state[t]=$o[t]});this.orderHelper.removeIndex(f.ADJUSTMENT)}})};this.setAdjustmentEffect=t=>{const e=this.orderHelper.addIndex(f.ADJUSTMENT);if(this.effect){this.effect.setProperties(t)}else{this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e)}return this.effect.getProperties()};this.removeAdjustmentEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.engineMediator=t;this.state=$o}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get orderHelper(){return this.engineMediator.orderHelper}};s([M],Pi.prototype,"state",2);s([h],Pi.prototype,"editAdjustments",2);s([h],Pi.prototype,"reset",2);var K=class{constructor(t){this.dirty=M.box(false);this.editAdjustments=({type:t,value:e})=>{this.pureSetAdjustment({type:t,value:e});this.editor.render()};this.toolSnapshot=()=>{if((0,xt.default)(this.state,$o)){this.dirty.set(false)}else{this.dirty.set(true)}this.addSnapshot(L.EDIT,f.ADJUSTMENT)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.toggleOptionSelection=t=>{this.selectedOption=t};this.pureSetAdjustment=({type:t,value:e})=>{const i=this.adjustmentsStore.setAdjustmentEffect({[t]:e});this.adjustmentsStore.editAdjustments({type:t,value:i[t]})};this.pureReset=()=>{this.dirty.set(false);this.adjustmentsStore.removeAdjustmentEffect();this.adjustmentsStore.reset();this.selectedOption=""};this.reset=()=>{this.pureReset();this.addSnapshot(L.DELETE,this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=t=>{if((0,xt.default)(t,this.state)){return}if((0,xt.default)(t,$o)){this.pureReset();return}pt(()=>{this.dirty.set(Object.values(t).some(e=>e!==0));Object.keys(t).forEach(e=>{this.pureSetAdjustment({type:e,value:t[e]})})})};this.updateStateFromSerialization=t=>{this.updateStateFromHistory(t)};this.editor=t;this.adjustmentsStore=new Pi(this.editor.engineMediator);this.selectedOption="";const e=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new lt(e,{...this.config,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("adjustment")})}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const t=this.items.find(e=>e?e.identifier===this.selectedOption:false);return t?t.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[f.ADJUSTMENT]}get locale(){return this.editor.configStore.locale[f.ADJUSTMENT]}};s([M],K.prototype,"selectedOption",2);s([M],K.prototype,"dirty",2);s([h],K.prototype,"editAdjustments",2);s([h],K.prototype,"toggleOptionSelection",2);s([h],K.prototype,"pureSetAdjustment",2);s([h],K.prototype,"pureReset",2);s([h],K.prototype,"reset",2);s([h],K.prototype,"updateStateFromHistory",2);s([h],K.prototype,"updateStateFromSerialization",2);s([p],K.prototype,"selectedAdjustmentType",1);s([p],K.prototype,"isDirty",1);s([p],K.prototype,"state",1);s([p],K.prototype,"selectedOptionLabel",1);s([p],K.prototype,"brightness",1);s([p],K.prototype,"saturation",1);s([p],K.prototype,"contrast",1);s([p],K.prototype,"gamma",1);s([p],K.prototype,"clarity",1);s([p],K.prototype,"exposure",1);s([p],K.prototype,"shadows",1);s([p],K.prototype,"highlights",1);s([p],K.prototype,"whites",1);s([p],K.prototype,"blacks",1);s([p],K.prototype,"temperature",1);s([p],K.prototype,"sharpness",1);s([p],K.prototype,"categories",1);s([p],K.prototype,"items",1);s([p],K.prototype,"config",1);s([p],K.prototype,"locale",1);var $n={identifier:"identity",intensity:1,isDuotone:false};var A1=new Oe(0,1);var qe=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeIfDuotone=t=>{this.state.isDuotone=t};this.changeIntensity=t=>{const e=A1.clamp(t);this.state.intensity=e};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=$n.identifier;this.state.intensity=$n.intensity;this.removeIndex()}};this.setFilterEffect=({identifier:t,intensity:e,isDuotone:i})=>{const r=this.state;const n=()=>{this.changeIdentifier(t);this.changeIntensity(e);this.changeIfDuotone(i)};this.removeFilterEffect();const a=this.engineMediator.orderHelper.addIndex(f.FILTER);if(i){return new Promise((l,c)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,a).then(d=>{n();this.effect=d;this.effect.setProperties({colorIntensity:e});l()}).catch(d=>{this.fallbackOnError(r);c(d)})})}return new Promise((l,c)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,a).then(d=>{n();this.effect=d;this.effect.setProperties({intensity:e});l()}).catch(d=>{this.fallbackOnError(r);c(d)})})};this.removeFilterEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.setEffectProperties=({intensity:t})=>{if(this.effect){if(this.state.isDuotone){this.effect.setProperties({colorIntensity:t})}else{this.effect.setProperties({intensity:t})}return this.effect.getProperties()}return null};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(f.FILTER)};this.fallbackOnError=t=>{this.changeIdentifier(t.identifier);this.changeIntensity(t.intensity);if(t.identifier==="identity"){this.removeIndex()}};this.engineMediator=t;this.state=$n}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};s([M],qe.prototype,"state",2);s([h],qe.prototype,"changeIdentifier",2);s([h],qe.prototype,"changeIfDuotone",2);s([h],qe.prototype,"changeIntensity",2);s([h],qe.prototype,"reset",2);var Wn="identity";var ct=class{constructor(t){this.selectFilter=async(t,e=1)=>{if(t!==this.identifier){const i=this.selectedCategory;await this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)});if(this.selectedCategory===Wn){this.selectedCategory=i}this.editor.render();this.addSnapshot(L.ADD,f.FILTER)}};this.changeIntensity=t=>{const e=this.isOptionDuoTone(this.identifier);const i=this.filterStore.setEffectProperties({intensity:t});if(i){const r=e?i.colorIntensity:i.intensity;this.filterStore.changeIntensity(r);this.editor.render()}};this.setImageAndGetPreviews=async()=>{const{image:t}=this.editor.activeStore.state;await this.editor.previewThumbnails.addImageToContainer(t);await this.getAllFilterPreview()};this.getAllFilterPreview=async()=>{const t=this.entityManager.items.map(n=>({identifier:n.identifier,isDuotone:this.isOptionDuoTone(n.identifier)}));const e=await this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);await this.editor.wait();const{config:i}=this;const r=this.editor.configStore.assetProvider.getAssets("filter").map(n=>{return{...n,items:n.items.map(a=>({...a,thumbnailURI:e[a.identifier]}))}});this.entityManager=new lt(r,{...i,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})};this.toolSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.controls.sliderIntensity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.selectedCategory=Wn;this.filterStore.removeFilterEffect();this.filterStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot(L.DELETE,this.locale.controls.buttonReset);this.editor.render()};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Wn:t};this.updateStateFromSerialization=({identifier:t,intensity:e})=>{const i=this.doesFilterAssetExist(t);if(i){const r=Es(i);return this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:r})}throw new me(t)};this.updateStateFromHistory=async t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.filterStore.setFilterEffect(t)};this.doesFilterAssetExist=t=>{return this.entityManager.items.find(e=>t===e.identifier)};this.isOptionDuoTone=t=>{const e=this.doesFilterAssetExist(t);if(e){return Es(e)}return false};this.editor=t;this.selectedCategory=Wn;this.filterStore=new qe(this.editor.engineMediator);const{config:e}=this;const i=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new lt(i,{...e,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[f.FILTER]}get locale(){return this.editor.configStore.locale[f.FILTER]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};s([M],ct.prototype,"selectedCategory",2);s([M],ct.prototype,"entityManager",2);s([h],ct.prototype,"selectFilter",2);s([h],ct.prototype,"changeIntensity",2);s([h],ct.prototype,"pureReset",2);s([h],ct.prototype,"reset",2);s([h],ct.prototype,"toggleCategorySelection",2);s([h],ct.prototype,"updateStateFromSerialization",2);s([h],ct.prototype,"updateStateFromHistory",2);s([p],ct.prototype,"state",1);s([p],ct.prototype,"identifier",1);s([p],ct.prototype,"intensity",1);s([p],ct.prototype,"isDuotone",1);s([p],ct.prototype,"selectedCategoryIdentifier",1);s([p],ct.prototype,"isOptionSelected",1);s([p],ct.prototype,"config",1);s([p],ct.prototype,"locale",1);s([p],ct.prototype,"categories",1);s([p],ct.prototype,"items",1);var zi=(o,t=0,e=3)=>{const i=Math.tan(t);const r=Math.sqrt(i**2+1);return{x:o.x+e/r,y:o.y+e*i/r}};var Nn={blurRadius:40,gradientSize:.2};var B1={start:{x:0,y:0},end:{x:0,y:0},...Nn};var L1={center:{x:0,y:0},radius:0,...Nn};var O1={origin:{x:0,y:0},rotation:0,size:0,...Nn};var F1=Nn;var Wo={identifier:"identity",linear:B1,radial:L1,mirrored:O1,gaussian:F1};var It=class{constructor(t){this.selectFocus=(t,e)=>{pt(()=>{this.state.identifier=t;if(e){this.state[t].blurRadius=e}})};this.changeBlurRadius=(t,e)=>{if(t!=="identity"){this.state[t].blurRadius=e}};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Wo.identifier;if(this.state.identifier!=="identity"){this.state[this.state.identifier].blurRadius=Wo[this.state.identifier].blurRadius}}};this.setLinear=({start:t,end:e})=>{this.state.linear.start.x=t.x;this.state.linear.start.y=t.y;this.state.linear.end.x=e.x;this.state.linear.end.y=e.y};this.setLinearStart=t=>{this.state.linear.start.x=t.x;this.state.linear.start.y=t.y};this.setLinearEnd=t=>{this.state.linear.end.x=t.x;this.state.linear.end.y=t.y};this.setRadialCenter=t=>{this.state.radial.center.x=t.x;this.state.radial.center.y=t.y};this.setRadialRadius=t=>{this.state.radial.radius=t};this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x;this.state.mirrored.origin.y=t.y};this.setMirroredRotation=t=>{this.state.mirrored.rotation=t};this.setMirroredSize=t=>{this.state.mirrored.size=t};this.getEffectProperties=()=>{if(this.effect){return this.effect.getProperties()}return null};this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order);this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order);this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order);this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order);this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=t=>{const e=this.getEffectProperties();if(e&&t!=="identity"){switch(t){case q.LINEAR:this.updateLinearState(e);break;case q.RADIAL:this.updateRadialState(e);break;case q.MIRRORED:this.updateMirroredState(e);break;default:break}}};this.updateGaussianState=t=>{this.changeBlurRadius(q.GAUSSIAN,t.blurRadius)};this.updateMirroredState=t=>{const e=this.editor.worldToPreview(t.mirrorAxisOrigin);const i=new b(this.editor.worldToPreview(t.mirrorAxisDirection));const r=i.subtract(e);const n=Math.atan2(r.y,r.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin));this.setMirroredRotation(n);this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth));this.changeBlurRadius(q.MIRRORED,t.blurRadius)};this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center));this.setRadialRadius(this.editor.worldToPreview(t.radius));this.changeBlurRadius(q.RADIAL,t.blurRadius)};this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start));this.setLinearEnd(this.editor.worldToPreview(t.end));this.changeBlurRadius(q.LINEAR,t.blurRadius)};this.setEffectProperties=t=>{if(this.effect){this.effect.setProperties(t);return this.effect.getProperties()}return null};this.removeFocus=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.engineMediator.orderHelper.removeIndex(f.FOCUS)}};this.editor=t;this.engineMediator=this.editor.engineMediator;this.state=Wo}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get order(){return this.engineMediator.orderHelper.addIndex(f.FOCUS)}get imageContainer(){return this.engineMediator.image.container}};s([M],It.prototype,"state",2);s([h],It.prototype,"selectFocus",2);s([h],It.prototype,"changeBlurRadius",2);s([h],It.prototype,"reset",2);s([h],It.prototype,"setLinear",2);s([h],It.prototype,"setLinearStart",2);s([h],It.prototype,"setLinearEnd",2);s([h],It.prototype,"setRadialCenter",2);s([h],It.prototype,"setRadialRadius",2);s([h],It.prototype,"setMirroredOrigin",2);s([h],It.prototype,"setMirroredRotation",2);s([h],It.prototype,"setMirroredSize",2);s([h],It.prototype,"updateFromEngineState",2);var No=class{constructor(t){this.selectFocus=t=>{if(t!==this.identifier){this.focusStore.removeFocus();const e=this.maxIntensity*.2;const{width:i}=this.editor.engine.getOutputContainer().getBounds();const r=this.editor.shortestOutputSide*.2;switch(t){case q.LINEAR:const n=this.editor.outputToWorld({x:-i/2,y:0});const a=this.editor.outputToWorld({x:i/2,y:0});this.setLinearFocus({start:n,end:a,blurRadius:e});break;case q.RADIAL:const l=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:l,radius:r,blurRadius:e});break;case q.MIRRORED:const c=this.editor.outputToWorld({x:0,y:0});const d=r;const u=this.editor.outputToWorld(zi({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:c,clearAreaWidth:d,blurRadius:e,mirrorAxisDirection:u});break;case q.GAUSSIAN:this.setGaussianFocus({blurRadius:e});break;default:break}this.focusStore.selectFocus(t,e);this.editor.render();this.addSnapshot(L.ADD,f.FOCUS)}};this.changeIntensity=t=>{const e=this.focusStore.setEffectProperties({blurRadius:t});if(e){this.focusStore.changeBlurRadius(this.identifier,e.blurRadius);this.editor.render()}};this.changeRelativeIntensity=t=>{const e=(this.maxIntensity-No.minIntensity)*t/100+No.minIntensity;const i=this.focusStore.setEffectProperties({blurRadius:e});if(i){this.focusStore.changeBlurRadius(this.identifier,i.blurRadius);this.editor.render()}};this.toolSnapshot=t=>{this.addSnapshot(L.EDIT,t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.pureReset=()=>{this.focusStore.removeFocus();this.focusStore.reset()};this.reset=()=>{this.pureReset();this.editor.render();this.addSnapshot(L.DELETE,this.locale.controls.buttonReset)};this.setStart=t=>{const e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});if(e){this.focusStore.setLinearStart(this.editor.worldToPreview(e.start));this.editor.render()}};this.setEnd=t=>{const e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});if(e){this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end));this.editor.render()}};this.setCenter=t=>{const e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});if(e){this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center));this.editor.render()}};this.setRadius=t=>{const e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});if(e){this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius));this.editor.render()}};this.setOrigin=t=>{const e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(zi(t,this.rotation))});if(e){this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin));this.editor.render()}};this.setSize=t=>{const e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});if(e){this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth));this.editor.render()}};this.setRotation=t=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(zi(this.origin,t))});this.focusStore.setMirroredRotation(t);this.editor.render()};this.updateStateFromHistory=(t,e)=>{this.focusStore.removeFocus();const{magnitude:i}=e;pt(()=>{this.focusStore.selectFocus(t.identifier);switch(t.identifier){case q.LINEAR:this.setLinearFocus({start:this.editor.previewToWorld(new b(t.linear.start).multiply(e)),end:this.editor.previewToWorld(new b(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case q.GAUSSIAN:this.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case q.RADIAL:this.setRadialFocus({center:this.editor.previewToWorld(new b(t.radial.center).multiply(e)),radius:this.editor.previewToWorld(t.radial.radius*i),blurRadius:t.radial.blurRadius});break;case q.MIRRORED:{const r=new b(t.mirrored.origin).multiply(e);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(r),mirrorAxisDirection:this.editor.previewToWorld(zi(r,t.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(t.mirrored.size*i),blurRadius:t.mirrored.blurRadius});break}case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=async t=>{if(No.doesFocusIdentifierExist(t.identifier)){this.focusStore.removeFocus();pt(()=>{this.focusStore.selectFocus(t.identifier);switch(t.identifier){case q.LINEAR:this.setLinearFocus(t.linear);break;case q.GAUSSIAN:this.setGaussianFocus(t.gaussian);break;case q.RADIAL:this.setRadialFocus(t.radial);break;case q.MIRRORED:this.setMirroredFocus({mirrorAxisOrigin:t.mirrored.origin,clearAreaWidth:t.mirrored.size,blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:zi(t.mirrored.origin,t.mirrored.rotation)});break;default:break}})}else{throw new me(t.identifier)}};this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{const t=this.editor.canvasStore.sizeVector;const{linear:e}=this.focusStore.state;const{radial:i}=this.focusStore.state;const{mirrored:r}=this.focusStore.state;const n=t;const{magnitude:a}=n;return{...this.focusStore.state,linear:{...e,start:new b(e.start).divide(n),end:new b(e.end).divide(n)},radial:{...i,center:new b(i.center).divide(n),radius:i.radius/a},mirrored:{...r,origin:new b(r.origin).divide(n),size:r.size/a},gaussian:{...this.focusStore.state.gaussian}}};this.editor=t;this.focusStore=new It(this.editor);const e=this.editor.assetProvider.getAssets("focus");this.entityManager=new lt(e,{...this.config,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")})}static get minIntensity(){return 0}static doesFocusIdentifierExist(t){return Object.keys(q).map(e=>q[e]).findIndex(e=>e===t)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case q.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case q.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case q.MIRRORED:const t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:E(this.state.mirrored.rotation),size:t.clearAreaWidth}};case q.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return Wo}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();return qi({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:e})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:t,height:e}=this.editor.canvasStore.canvasSize;return Math.sqrt(t**2+e**2)*2}get identifier(){return this.state.identifier}get intensity(){if(this.identifier==="identity"){return Wo.gaussian.blurRadius}return this.state[this.identifier].blurRadius}get relativeIntensity(){const{blurRadius:t}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(t-No.minIntensity)*100/(this.maxIntensity-No.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[f.FOCUS]}get locale(){return this.editor.configStore.locale[f.FOCUS]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:t}){this.focusStore.setGaussianFocus({blurRadius:t})}setLinearFocus({start:t,end:e,blurRadius:i}){this.focusStore.setLinearFocus({start:t,end:e,blurRadius:i})}setRadialFocus({center:t,radius:e,blurRadius:i}){this.focusStore.setRadialFocus({center:t,radius:e,blurRadius:i})}setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:r}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:r})}};var W=No;s([h],W.prototype,"selectFocus",2);s([h],W.prototype,"changeIntensity",2);s([h],W.prototype,"changeRelativeIntensity",2);s([h],W.prototype,"clickableCanvas",2);s([h],W.prototype,"pureReset",2);s([h],W.prototype,"reset",2);s([h],W.prototype,"setStart",2);s([h],W.prototype,"setEnd",2);s([h],W.prototype,"setCenter",2);s([h],W.prototype,"setRadius",2);s([h],W.prototype,"setOrigin",2);s([h],W.prototype,"setSize",2);s([h],W.prototype,"setRotation",2);s([h],W.prototype,"updateStateFromHistory",2);s([h],W.prototype,"updateStateFromSerialization",2);s([h],W.prototype,"updateCanvasControls",2);s([p],W.prototype,"state",1);s([p],W.prototype,"start",1);s([p],W.prototype,"startOnPreview",1);s([p],W.prototype,"end",1);s([p],W.prototype,"endOnPreview",1);s([p],W.prototype,"center",1);s([p],W.prototype,"radius",1);s([p],W.prototype,"origin",1);s([p],W.prototype,"rotation",1);s([p],W.prototype,"rotationOnPreview",1);s([p],W.prototype,"size",1);s([p],W.prototype,"mirroredAreaWidth",1);s([p],W.prototype,"identifier",1);s([p],W.prototype,"intensity",1);s([p],W.prototype,"relativeIntensity",1);s([p],W.prototype,"maxIntensity",1);s([p],W.prototype,"isOptionSelected",1);s([p],W.prototype,"config",1);s([p],W.prototype,"locale",1);s([p],W.prototype,"items",1);var br={identifier:"identity",opacity:1,blendMode:ue.LIGHTEN};var R1=new Oe(0,1);var Fe=class{constructor(t,e){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{const e=R1.clamp(t);this.state.opacity=e};this.changeBlendMode=t=>{this.state.blendMode=t};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=br.identifier;this.state.opacity=br.opacity;this.state.blendMode=br.blendMode;this.removeIndex()}};this.correctOverlayFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();if(this.effect){this.effect.setFlipHorizontally(t);this.effect.setFlipVertically(e)}};this.removeOverlayEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.removeIndex();this.effect=void 0}};this.setEffectProperties=t=>{if(this.effect){this.effect.setProperties(t);return this.effect.getProperties()}return null};this.setOverlayEffect=({identifier:t,blendMode:e,opacity:i})=>{const r={...this.state};this.removeOverlayEffect();const n=this.engineMediator.orderHelper.addIndex(f.OVERLAY);return new Promise((a,l)=>{this.engineMediator.engine.addOverlayFromAssets(t,this.engineMediator.image.container,n).then(c=>{this.changeIdentifier(t);this.changeOpacity(i);this.changeBlendMode(e);this.effect=c;this.effect.setProperties({blendMode:e,opacity:i});this.correctOverlayFlip();a()}).catch(c=>{this.changeIdentifier(r.identifier);this.changeOpacity(r.opacity);this.changeBlendMode(r.blendMode);if(r.identifier==="identity"){this.removeIndex()}l(c)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(f.OVERLAY)};this.engineMediator=t;this.editor=e;this.state=br}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};s([M],Fe.prototype,"state",2);s([h],Fe.prototype,"changeIdentifier",2);s([h],Fe.prototype,"changeOpacity",2);s([h],Fe.prototype,"changeBlendMode",2);s([h],Fe.prototype,"reset",2);s([h],Fe.prototype,"correctOverlayFlip",2);var mt=class{constructor(t){this.selectOverlay=async t=>{if(t!==this.identifier){const e=this.defaultBlendModeForIdentifier(t);await this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e});this.addSnapshot(L.ADD,f.OVERLAY);this.editor.render()}};this.changeOpacity=t=>{const e=this.overlayStore.setEffectProperties({opacity:t});if(e){this.overlayStore.changeOpacity(e.opacity);this.editor.render()}};this.toolSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.controls.sliderOpacity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.changeBlendMode=t=>{const e=this.overlayStore.setEffectProperties({blendMode:t});if(e){this.overlayStore.changeBlendMode(e.blendMode);this.addSnapshot(L.EDIT,this.locale.controls.carouselBlendMode);this.editor.render()}};this.pureReset=()=>{this.overlayStore.removeOverlayEffect();this.overlayStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot(L.DELETE,this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find(i=>i.identifier===t.identifier);if(e){return this.overlayStore.setOverlayEffect(t).then(()=>{this.editor.transformToolStore.setOverlayOpacity(t.opacity)})}throw new me(t.identifier)};this.updateStateFromHistory=async t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.overlayStore.setOverlayEffect(t)};this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=t=>{const e=this.entityManager.items.findIndex(i=>i.identifier===t);return e!==-1?this.entityManager.items[e].defaultBlendMode:ue.LIGHTEN};this.editor=t;this.overlayStore=new Fe(this.editor.engineMediator,t);const e=this.editor.assetProvider.getAssets("overlay");const{config:i}=this;this.entityManager=new lt(e,{...i,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")})}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[f.OVERLAY]}get locale(){return this.editor.configStore.locale[f.OVERLAY]}get items(){return this.entityManager.items}get allBlendModes(){const t=this.locale.controls;return Object.keys(ue).map(e=>{const i=ue[e];const r=`blendMode${i.charAt(0).toUpperCase()}${i.slice(1)}`;return{identifier:i,value:t[r]}})}};s([h],mt.prototype,"selectOverlay",2);s([h],mt.prototype,"changeOpacity",2);s([h],mt.prototype,"changeBlendMode",2);s([h],mt.prototype,"pureReset",2);s([h],mt.prototype,"reset",2);s([h],mt.prototype,"updateStateFromSerialization",2);s([h],mt.prototype,"updateStateFromHistory",2);s([h],mt.prototype,"correctOverlayFlip",2);s([p],mt.prototype,"state",1);s([p],mt.prototype,"identifier",1);s([p],mt.prototype,"opacity",1);s([p],mt.prototype,"blendMode",1);s([p],mt.prototype,"isOptionSelected",1);s([p],mt.prototype,"config",1);s([p],mt.prototype,"locale",1);s([p],mt.prototype,"items",1);s([p],mt.prototype,"allBlendModes",1);var H1="white";var Ht={identifier:"identity",opacity:1,tintColor:zt[H1],tintMode:"none",resizeMode:"keepAspect"};var Xa={};var Se=()=>{return Object.keys(zt).map(o=>{const t=zt[o];return{identifier:o,color:t,colorString:xe(t)}})};function Vn(o,t=null){return new Promise((e,i)=>{const r=new Image;r.addEventListener("load",()=>{const n=document.createElement("canvas");const a=n.getContext("2d");n.width=r.width;n.height=r.height;if(t){n.width=t;n.height=t*r.height/r.width}a.drawImage(r,0,0,n.width,n.height);const l=n.toDataURL(Ot.PNG);hi(n);e(l)});r.addEventListener("error",()=>{i()});r.src=o})}var Np=o=>{return new Promise((t,e)=>{const i=new FileReader;i.onload=async r=>{try{const{result:n}=r.target;const a=await Vn(n,150);t({stickerURI:n,thumbnailURI:a,name:o.name||"",type:o.type,identifier:Ki()})}catch(n){e(n)}};i.onerror=r=>{e(r)};i.readAsDataURL(o)})};var Vp="identity";var Ya="imgly_sticker_custom";var V=class{constructor(t){this.state=M.map(Xa);this.customStickers=[];this.colorList=Se();this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=t=>{return this.entityManager.items.findIndex(e=>e.identifier===t)!==-1};this.add=t=>{const e=this.entityManager.items.find(n=>n.identifier===t);const i=e?e.tintMode:Ht.tintMode;const r=e?e.resizeMode:Ht.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:i,tintColor:Ht.tintColor,opacity:Ht.opacity,resizeMode:r}})};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);const e=this.editor.spriteStore.getDuplicateContainerFlip(this.id);const{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:E(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:i!==e.flipHorizontally,flipVertically:r!==e.flipVertically},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.flipHorizontally=()=>{if(this.id){this.editor.spriteStore.flipHorizontally(this.id)}};this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.updateStateFromHistory=(t,e)=>{if((0,xt.default)(e,this.state.get(t))){return}this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)};this.setState=(t,e)=>{const i=this.state.get(t);if(i){if("opacity"in e){i.opacity=e.opacity}if(e.tintColor){i.tintColor=e.tintColor}if(e.tintMode){i.tintMode=e.tintMode}if(e.resizeMode){i.resizeMode=e.resizeMode}this.state.set(t,i)}else{this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:Ht.tintColor})}};this.changeOpacity=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{opacity:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.opacity=i.opacity;this.state.set(this.id,e)}}};this.changeTintColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){const{tintMode:i}=this.entityManager.items.find(n=>n.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:t,tintMode:i});const r=this.editor.spriteStore.getContainerProperties(this.id);e.tintColor=r.tintColor;e.tintMode=r.tintMode||Ht.tintMode;this.state.set(this.id,e)}}};this.tintColorSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.history.color)};this.addFiles=async t=>{this.editor.modalStore.showInfoModal("loading");if(t.length){let e=0;const i=[];for(e=0;e<t.length;e+=1){i.push(Np(t[e]))}try{const r=await Promise.all(i);this.addCustomStickerAsset(r);this.editor.configStore.events.onStickerUploadedAdd(r.map(({identifier:n,stickerURI:a},l)=>({identifier:n,stickerURI:a,file:t[l]})))}catch(r){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}};this.addCustomStickerAsset=async t=>{const e=[];t.forEach(({stickerURI:a,thumbnailURI:l,name:c,identifier:d,type:u})=>{e.push({stickerURI:a,thumbnailURI:l,name:c,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:d});this.customStickers.push({identifier:d,type:u,stickerURI:a,name:c})});const i=this.locale.categories[Ya];this.editor.assetProvider.addCustomStickerAsset(e,Ya,i);const r=this.editor.assetProvider.getAssets("sticker");const{config:n}=this;this.entityManager=new lt(r,{...n,itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")});this.selectedCategory=Ya;this.editor.modalStore.hideModal()};this.toolSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.history.opacity)};this.addSnapshot=(t,e)=>{const i=this.editor.historyStore.getCurrentSpritesState();if((i==null?void 0:i.sticker)&&(0,xt.default)(i.sticker,E(this.state))){return}if(this.currentSticker){this.editor.spriteStore.addSnapshot(t,e)}};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Vp:t};this.pureReset=()=>{this.state=M.map(Xa)};this.editor=t;this.selectedCategory=Vp;const{config:e}=this;const i=this.editor.assetProvider.getAssets("sticker");this.entityManager=new lt(i,{...e,itemFallbackKey:"stickerURI",locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("sticker")});Ht.tintColor=E(te(this.config,"defaultTintColor",Ht.tintColor));if(this.config.colors&&this.config.colors.length>0){this.colorList=ne(E(this.config.colors))}}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t){return t}}return void 0}get identifier(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t){return t.identifier}}return"none"}get id(){if(this.isStickerSelected){return this.editor.spriteStore.id}return void 0}get opacity(){if(this.currentSticker){return this.currentSticker.opacity}return Ht.opacity}get tintMode(){if(this.currentSticker){return this.currentSticker.tintMode}return Ht.tintMode}get resizeMode(){if(this.currentSticker){return this.currentSticker.resizeMode}return Ht.resizeMode}get tintable(){if(this.currentSticker){return this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized"}return false}get tintColor(){if(this.currentSticker){return this.currentSticker.tintColor}return Ht.tintColor}get config(){return this.editor.configStore.config[f.STICKER]}get locale(){return this.editor.configStore.locale[f.STICKER]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};s([M],V.prototype,"selectedCategory",2);s([M],V.prototype,"entityManager",2);s([h],V.prototype,"selectLast",2);s([h],V.prototype,"add",2);s([h],V.prototype,"duplicate",2);s([h],V.prototype,"bringToFront",2);s([h],V.prototype,"flipHorizontally",2);s([h],V.prototype,"delete",2);s([h],V.prototype,"updateStateFromHistory",2);s([h],V.prototype,"setState",2);s([h],V.prototype,"changeOpacity",2);s([h],V.prototype,"changeTintColor",2);s([h],V.prototype,"addFiles",2);s([h],V.prototype,"addCustomStickerAsset",2);s([h],V.prototype,"toggleCategorySelection",2);s([h],V.prototype,"pureReset",2);s([p],V.prototype,"isStickerSelected",1);s([p],V.prototype,"isCustomStickerEnabled",1);s([p],V.prototype,"customStickerTintMode",1);s([p],V.prototype,"customStickerResizeMode",1);s([p],V.prototype,"currentSticker",1);s([p],V.prototype,"identifier",1);s([p],V.prototype,"id",1);s([p],V.prototype,"opacity",1);s([p],V.prototype,"tintMode",1);s([p],V.prototype,"resizeMode",1);s([p],V.prototype,"tintable",1);s([p],V.prototype,"tintColor",1);s([p],V.prototype,"config",1);s([p],V.prototype,"locale",1);s([p],V.prototype,"localeColor",1);s([p],V.prototype,"selectedCategoryIdentifier",1);s([p],V.prototype,"items",1);s([p],V.prototype,"categories",1);var _1="imgly_font_open_sans_bold";var J={text:"Write Something",identifier:_1,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:zt.white,backgroundColor:zt.transparent||[0,0,0,0],width:0};var Ka={};var Up=()=>{return Object.keys(ja).map(o=>{const t=ja[o];return{identifier:o,color:t,colorString:xe(t)}})};var Gp={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"};var Ai=class{constructor(t){this.state=M.map(Ka);this.colorList=Se();this.backgroundColorList=Up();this.fontsLoadStatus=M.object({pending:false,loaded:false});this.doesTextAssetExist=t=>{return this.editor.assetProvider.getFontAssets().findIndex(e=>e.identifier===t)!==-1};this.validFontWithConfig=t=>{return this.fonts.find(e=>e.identifier===t)||this.fonts[0]};this.addOrselect=()=>{if(!this.state.size){this.add()}else{this.selectLast();this.loadFonts()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=async()=>{const{fontsLoadStatus:t}=this;const e=()=>{this.editor.spriteStore.addText({state:{identifier:J.identifier,text:J.text,textColor:J.textColor,backgroundColor:J.backgroundColor,lineHeight:J.lineHeight,alignment:J.alignment,fontSize:0}})};if(!t.pending&&!t.loaded){this.fontsLoadStatus.pending=true;const i=this.editor.assetProvider.getFontManager();try{await i.loadFontsWithIdentifiers([J.identifier]);e()}catch(r){this.editor.modalStore.showActionModal({type:Q.ERROR,identifier:"fontLoading",error:J.identifier})}await this.loadFonts()}else{e()}};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:E(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:E(this.backgroundColor),width:this.width},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.changeFont=t=>{const e=this.fonts.find(i=>i.identifier===t);this.changeIdentifier(e,this.id);if(this.id){this.addSnapshot(L.EDIT,this.locale.history.fontFamily)}};this.changeIdentifier=(t,e)=>{pt(()=>{if(t&&e){const i=this.state.get(e);if(i){this.editor.spriteStore.setContainerProperties(e,{fontIdentifier:t.identifier},true);const r=this.editor.spriteStore.getContainerProperties(e);i.identifier=r.fontIdentifier;i.fontFamily=t.fontFamily;i.fontStyle=t.fontStyle;i.fontWeight=t.fontWeight;i.fontSize=r.fontSize;i.width=r.width;i.defaultFontSize=i.fontSize;this.state.set(e,i)}}})};this.changeFontSize=(t,e=false)=>{if(this.id){const i=this.state.get(this.id);if(i){i.fontSize=t;if(e){i.defaultFontSize=t}this.state.set(this.id,i)}}};this.updateDefaultFontSize=()=>{if(this.id){const t=this.state.get(this.id);if(t){t.defaultFontSize=t.fontSize;this.state.set(this.id,t)}}};this.changeSize=(t,e)=>{const i=this.state.get(t);if(i){i.width=e.width;i.fontSize=e.fontSize;i.defaultFontSize=e.fontSize;this.state.set(t,i)}};this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.width=t;this.state.set(this.id,e)}}};this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},true);let i=this.editor.spriteStore.getContainerProperties(this.id);const r=this.editor.outputContainer.getSizeInOutputSpace();const n=this.editor.spriteStore.getSize(this.id);if(!this.config.disableAutoScaling){if(n.height>r.height){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,r.height)},true)}}i=this.editor.spriteStore.getContainerProperties(this.id);e.text=i.text;e.fontSize=i.fontSize;e.defaultFontSize=i.fontSize;this.state.set(this.id,e);this.addSnapshot(L.EDIT,this.locale.history.edit)}}};this.calculateFitFontSize=(t,e)=>{if(!Ai.measureContext){const v=document.createElement("canvas");Ai.measureContext=v.getContext("2d")}const i=this.editor.spriteStore.getContainerProperties(t);const r=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier);const n=this.config.minFontSizeForAutoScaling;const a=Hs(Ai.measureContext,i.text,r,i.fontSize,i.lineHeight,i.width,r.textMetrics);const l=Math.min(Math.floor(i.fontSize*(e/a.height)),1);const c=Math.round(i.fontSize);let d=0;let u=c-l;let m=Math.floor((c-l)*2);let g=u;while(d<=m){u=d+Math.floor((m-d)/2);const v=Hs(Ai.measureContext,i.text,r,u,i.lineHeight,i.width,r.textMetrics);if(e<v.height){m=u-1;g=u-1}else if(e>v.height){d=u+1;if(l+u>=c){return c}}else{g=u;break}}if(n&&g<n){return n}return g};this.changeLineHeight=t=>{if(this.id){const e=this.state.get(this.id);if(e&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},true);const i=this.editor.spriteStore.getContainerProperties(this.id);e.lineHeight=i.lineHeight;this.state.set(this.id,e)}}};this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.textColor=i.textColor;this.state.set(this.id,e)}}};this.changeBackgroundColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.backgroundColor=i.backgroundColor;this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.history.backgroundColor)};this.changeAlignment=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.alignment=i.alignment;this.state.set(this.id,e);this.addSnapshot(L.EDIT,this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.history.lineSpacing)};this.addSnapshot=(t,e)=>{const i=this.editor.historyStore.getCurrentSpritesState();if((i==null?void 0:i.text)&&(0,xt.default)(i.text,E(this.state))){return}if(this.currentText){this.editor.spriteStore.addSnapshot(t,e)}};this.updateStateFromHistory=(t,e)=>{if((0,xt.default)(e,this.state.get(t))){return}this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)};this.setState=(t,e)=>{const i=this.state.get(t);if(i){if(e.alignment){i.alignment=e.alignment}if(e.text){i.text=e.text}if(e.lineHeight){i.lineHeight=e.lineHeight}if(e.textColor){i.textColor=e.textColor}if(e.backgroundColor){i.backgroundColor=e.backgroundColor}if(e.fontIdentifier){i.identifier=e.fontIdentifier}if(e.fontSize){i.fontSize=e.fontSize;i.defaultFontSize=e.fontSize}if(e.width){i.width=e.width}}else{const r=this.validFontWithConfig(e.fontIdentifier);if(r){this.state.set(t,{text:e.text,identifier:r.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:J.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:J.backgroundColor,fontFamily:r.fontFamily,fontStyle:r.fontStyle,fontSize:e.fontSize,fontWeight:r.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}}};this.setFontSize=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},true);const i=this.editor.spriteStore.getContainerProperties(this.id);e.fontSize=i.fontSize;e.defaultFontSize=i.fontSize;this.state.set(this.id,e)}}};this.pureReset=()=>{this.state=M.map(Ka)};this.editor=t;if(!this.fonts.find(e=>e.identifier===J.identifier)){J.identifier=this.fonts[0].identifier}J.textColor=E(te(this.config,"defaultColor",J.textColor));J.backgroundColor=E(te(this.config,"defaultBackgroundColor",J.backgroundColor));J.text=this.locale.canvasControls.placeholderText;if(this.config.colors&&this.config.colors.length>0){this.colorList=ne(E(this.config.colors))}if(this.config.backgroundColors&&this.config.backgroundColors.length>0){this.backgroundColorList=ne(E(this.config.backgroundColors))}}static defaultText(){return J.text}static getDisplayFontStyle(t){const e=t.fontWeight&&Gp[t.fontWeight].toLowerCase()!=="regular"?Gp[t.fontWeight]:"";const i=t.fontStyle&&t.fontStyle.toLowerCase()!=="normal"?t.fontStyle:"";return`${t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e} ${i}`.trim()}async loadFonts(){const{fontsLoadStatus:t}=this;if(t.loaded)return;const e=this.editor.assetProvider.getFontManager();const i=this.editor.assetProvider.getFontAssetsForText().map(r=>r.identifier);try{await e.loadFontsWithIdentifiers(i)}catch(r){const n=i.filter(a=>!e.isFontLoaded(a)).join(", ");this.editor.modalStore.showActionModal({type:Q.ERROR,identifier:"fontLoading",error:n})}t.loaded=true}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){const t=this.state.get(this.id);if(t){return t}}return void 0}get text(){if(this.currentText){return this.currentText.text}return J.text}get fontSize(){if(this.currentText){return this.currentText.fontSize}return J.fontSize}get defaultFontSize(){if(this.currentText){return this.currentText.defaultFontSize}return J.defaultFontSize}get width(){if(this.currentText){return this.currentText.width}return J.width}get fontFamily(){if(this.currentText){return this.currentText.fontFamily}return J.fontFamily}get fontStyle(){if(this.currentText){return this.currentText.fontStyle}return J.fontStyle}get fontWeight(){if(this.currentText){return this.currentText.fontWeight}return J.fontWeight}get lineHeight(){if(this.currentText){return this.currentText.lineHeight}return J.lineHeight}get identifier(){if(this.currentText){return this.currentText.identifier}return J.identifier}get id(){if(this.isTextSelected){return this.editor.spriteStore.id}return void 0}get alignment(){if(this.currentText){return this.currentText.alignment}return J.alignment}get textColor(){if(this.currentText){return this.currentText.textColor}return J.textColor}get backgroundColor(){if(this.currentText){return this.currentText.backgroundColor}return J.backgroundColor}get config(){return this.editor.configStore.config[f.TEXT]}get locale(){return this.editor.configStore.locale[f.TEXT]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce((t,e)=>{if(this.rawOptions.find(i=>i.identifier===e.identifier)){return[...t,{identifier:e.identifier,fontFamily:e.fontFamily,fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||""}]}return t},[])}get fontFamilies(){return[...new Set(this.fonts)]}};var O=Ai;s([h],O.prototype,"addOrselect",2);s([h],O.prototype,"selectLast",2);s([h],O.prototype,"add",2);s([h],O.prototype,"duplicate",2);s([h],O.prototype,"bringToFront",2);s([h],O.prototype,"delete",2);s([h],O.prototype,"setEditMode",2);s([h],O.prototype,"changeFont",2);s([h],O.prototype,"changeIdentifier",2);s([h],O.prototype,"changeFontSize",2);s([h],O.prototype,"updateDefaultFontSize",2);s([h],O.prototype,"changeSize",2);s([h],O.prototype,"changeWidth",2);s([h],O.prototype,"changeText",2);s([h],O.prototype,"changeLineHeight",2);s([h],O.prototype,"changeColor",2);s([h],O.prototype,"changeBackgroundColor",2);s([h],O.prototype,"changeAlignment",2);s([h],O.prototype,"updateStateFromHistory",2);s([h],O.prototype,"setState",2);s([h],O.prototype,"setFontSize",2);s([h],O.prototype,"pureReset",2);s([p],O.prototype,"isEditMode",1);s([p],O.prototype,"isTextSelected",1);s([p],O.prototype,"fontsLoaded",1);s([p],O.prototype,"currentText",1);s([p],O.prototype,"text",1);s([p],O.prototype,"fontSize",1);s([p],O.prototype,"defaultFontSize",1);s([p],O.prototype,"width",1);s([p],O.prototype,"fontFamily",1);s([p],O.prototype,"fontStyle",1);s([p],O.prototype,"fontWeight",1);s([p],O.prototype,"lineHeight",1);s([p],O.prototype,"identifier",1);s([p],O.prototype,"id",1);s([p],O.prototype,"alignment",1);s([p],O.prototype,"textColor",1);s([p],O.prototype,"backgroundColor",1);s([p],O.prototype,"config",1);s([p],O.prototype,"locale",1);s([p],O.prototype,"localeColor",1);s([p],O.prototype,"rawOptions",1);s([p],O.prototype,"fonts",1);s([p],O.prototype,"fontFamilies",1);var $1="imgly_text_design_blocks";var ft={identifier:$1,color:zt.white,isInverted:false,text:"Write Something With Style",seed:0,padding:0,width:0};var qa={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831};var Ja={};var U=class{constructor(t){this.state=M.map(Ja);this.colorList=Se();this.fontsLoaded=false;this.doesTextDesignAssetExist=t=>{return this.entityManager.items.findIndex(e=>e.identifier===t)!==-1};this.addOrselect=async()=>{await this.loadFonts();if(!this.state.size){this.add()}else{this.selectLast()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:ft.identifier,text:ft.text,color:ft.color,isInverted:ft.isInverted,seed:qa[ft.identifier]||ft.seed,padding:0}})};this.updateStateFromHistory=(t,e)=>{if((0,xt.default)(e,this.state.get(t))){return}const i=this.state.get(t);if(e.identifier===i.identifier){this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)}else{this.changeIdentifier(e.identifier,false,e.seed,t)}};this.setState=(t,e)=>{const i=this.state.get(t);if(i){if(e.inverted){i.isInverted=e.inverted}if(e.seed){i.seed=e.seed}if(e.color){i.color=e.color}if(e.padding){i.padding=e.padding}if(e.width){i.width=e.width}}else{this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:ft.color,padding:e.padding})}};this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},true);const i=this.editor.spriteStore.getContainerProperties(this.id);e.text=i.text;this.state.set(this.id,e);this.addSnapshot(L.EDIT,this.locale.history.edit)}}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:E(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.addSnapshot=(t,e)=>{const i=this.editor.historyStore.getCurrentSpritesState();if((i==null?void 0:i.textdesign)&&(0,xt.default)(i.textdesign,E(this.state))){return}if(this.currentTextDesign){this.editor.spriteStore.addSnapshot(t,e)}};this.delete=(t=this.id)=>{if(t){this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.changeSeed=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},true);const e=this.editor.spriteStore.getContainerProperties(this.id);t.seed=e.seed;this.state.set(this.id,t);this.addSnapshot(L.EDIT,this.locale.history.shuffle)}}};this.changeIdentifier=(t,e=true,i=null,r=this.id)=>{if(r&&t!==this.identifier){const n=this.state.get(r);const a=this.editor.spriteStore.getContainerTransform(r);this.editor.spriteStore.addTextDesign({spriteId:r,state:{identifier:t,text:n.text,color:E(n.color),isInverted:n.isInverted,seed:i||qa[t]||n.seed,padding:n.padding,width:n.width},transform:a},e,true)}};this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{color:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.color=i.color;this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.history.color)};this.invertBackground=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!t.isInverted},true);const e=this.editor.spriteStore.getContainerProperties(this.id);t.isInverted=e.inverted;this.state.set(this.id,t);this.addSnapshot(L.EDIT,this.locale.history.invert)}}};this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.width=t;this.state.set(this.id,e)}}};this.changePadding=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.padding=t;this.state.set(this.id,e)}}};this.pureReset=()=>{this.state=M.map(Ja)};this.editor=t;const e=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new lt(e,{...this.config,flattenCategories:true,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")});if(!this.entityManager.items.find(i=>i.identifier===ft.identifier)){ft.identifier=this.entityManager.items[0].identifier}ft.text=this.locale.canvasControls.placeholderText;ft.color=E(te(this.config,"defaultColor",ft.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=ne(E(this.config.colors))}}static defaultText(){return ft.text}async loadFonts(){if(this.fontsLoaded)return;const t=this.editor.assetProvider.getFontManager();const e=this.editor.assetProvider.getFontAssetsForTextDesign().map(i=>i.identifier);try{await t.loadFontsWithIdentifiers(e)}catch(i){const r=e.filter(n=>!t.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:Q.ERROR,identifier:"fontLoading",error:r})}this.fontsLoaded=true}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const t=this.state.get(this.id);if(t){return t}}return void 0}get id(){if(this.isTextDesignSelected){return this.editor.spriteStore.id}return void 0}get text(){if(this.currentTextDesign){return this.currentTextDesign.text}return ft.text}get seed(){if(this.currentTextDesign){return this.currentTextDesign.seed}return ft.seed}get padding(){if(this.currentTextDesign){return this.currentTextDesign.padding}return ft.padding}get width(){if(this.currentTextDesign){return this.currentTextDesign.width}return ft.width}get identifier(){if(this.currentTextDesign){return this.currentTextDesign.identifier}return null}get isInverted(){if(this.currentTextDesign){return this.currentTextDesign.isInverted}return ft.isInverted}get color(){if(this.currentTextDesign){return this.currentTextDesign.color}return ft.color}get config(){return this.editor.configStore.config[f.TEXT_DESIGN]}get locale(){return this.editor.configStore.locale[f.TEXT_DESIGN]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};s([h],U.prototype,"addOrselect",2);s([h],U.prototype,"selectLast",2);s([h],U.prototype,"add",2);s([h],U.prototype,"updateStateFromHistory",2);s([h],U.prototype,"setState",2);s([h],U.prototype,"changeText",2);s([h],U.prototype,"setEditMode",2);s([h],U.prototype,"duplicate",2);s([h],U.prototype,"bringToFront",2);s([h],U.prototype,"delete",2);s([h],U.prototype,"changeSeed",2);s([h],U.prototype,"changeIdentifier",2);s([h],U.prototype,"changeColor",2);s([h],U.prototype,"invertBackground",2);s([h],U.prototype,"changeWidth",2);s([h],U.prototype,"changePadding",2);s([h],U.prototype,"pureReset",2);s([p],U.prototype,"isTextDesignSelected",1);s([p],U.prototype,"isEditMode",1);s([p],U.prototype,"currentTextDesign",1);s([p],U.prototype,"id",1);s([p],U.prototype,"text",1);s([p],U.prototype,"seed",1);s([p],U.prototype,"padding",1);s([p],U.prototype,"width",1);s([p],U.prototype,"identifier",1);s([p],U.prototype,"isInverted",1);s([p],U.prototype,"color",1);s([p],U.prototype,"config",1);s([p],U.prototype,"locale",1);s([p],U.prototype,"localeColor",1);s([p],U.prototype,"items",1);var Ce={identifier:"identity",opacity:1,width:0,color:zt.white};var W1=new Oe(0,1);var Re=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{const e=W1.clamp(t);this.state.opacity=e};this.changeWidth=t=>{this.state.width=t};this.changeColor=t=>{this.state.color=t};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Ce.identifier;this.state.opacity=Ce.opacity;this.state.width=Ce.width;this.state.color=Ce.color;this.removeIndex()}};this.removeFrameEffect=()=>{if(this.effect){this.engine.removeEffect(this.effect);this.effect=void 0}};this.setEffectProperties=t=>{if(this.effect){this.removeIndex();this.effect.setProperties(t);return this.effect.getProperties()}return null};this.setFrameEffect=({identifier:t,width:e,opacity:i,color:r})=>{const n={...this.state};this.changeIdentifier(t);this.changeWidth(e);this.changeOpacity(i);this.changeColor(r);this.removeFrameEffect();return new Promise((a,l)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container).then(c=>{this.effect=c;this.effect.setProperties({tintColor:r,opacity:i,width:e});a()}).catch(c=>{this.changeIdentifier(n.identifier);this.changeOpacity(n.opacity);this.changeWidth(n.width);this.changeColor(n.color);if(n.identifier==="identity"){this.removeIndex()}l(c)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=t;this.state=Ce}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};s([M],Re.prototype,"state",2);s([h],Re.prototype,"changeIdentifier",2);s([h],Re.prototype,"changeOpacity",2);s([h],Re.prototype,"changeWidth",2);s([h],Re.prototype,"changeColor",2);s([h],Re.prototype,"reset",2);var nt=class{constructor(t){this.colorList=Se();this.selectFrame=async t=>{if(t!==this.identifier){const e=.1*this.editor.shortestOutputSide;await this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:Ce.color});this.editor.render();this.addSnapshot(L.ADD,f.FRAME)}};this.changeOpacity=t=>{const e=this.frameStore.setEffectProperties({opacity:t});if(e){this.frameStore.changeOpacity(e.opacity);this.editor.render()}};this.changeWidth=t=>{const e=this.frameStore.setEffectProperties({width:t});if(e){this.frameStore.changeWidth(e.width);this.editor.render()}};this.changeColor=t=>{const e=this.frameStore.setEffectProperties({tintColor:t});if(e){this.frameStore.changeColor(e.tintColor);this.editor.render()}};this.colorSnapshot=()=>{this.addSnapshot(L.EDIT,this.locale.controls.selectColor)};this.toolSnapshot=t=>{this.addSnapshot(L.EDIT,t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.frameStore.removeFrameEffect();this.frameStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot(L.DELETE,this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.frameStore.setFrameEffect(t)};this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find(i=>i.identifier===t.identifier);if(e){return this.frameStore.setFrameEffect(t).then(()=>{this.editor.transformToolStore.setFrameOpacity(t.opacity)})}return new Promise((i,r)=>{r(new Error(`Frame Asset doesn't exist`))})};this.editor=t;this.frameStore=new Re(this.editor.engineMediator);const e=this.editor.assetProvider.getAssets("frame");const{config:i}=this;this.entityManager=new lt(e,{...i,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")});Ce.color=E(te(this.config,"defaultColor",Ce.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=ne(E(this.config.colors))}}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const t=this.entityManager.items.find(e=>e.identifier===this.identifier);return t&&t.tintable||false}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config[f.FRAME]}get locale(){return this.editor.configStore.locale[f.FRAME]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};s([h],nt.prototype,"selectFrame",2);s([h],nt.prototype,"changeOpacity",2);s([h],nt.prototype,"changeWidth",2);s([h],nt.prototype,"changeColor",2);s([h],nt.prototype,"pureReset",2);s([h],nt.prototype,"reset",2);s([h],nt.prototype,"updateStateFromHistory",2);s([h],nt.prototype,"updateStateFromSerialization",2);s([p],nt.prototype,"state",1);s([p],nt.prototype,"identifier",1);s([p],nt.prototype,"color",1);s([p],nt.prototype,"size",1);s([p],nt.prototype,"tintable",1);s([p],nt.prototype,"opacity",1);s([p],nt.prototype,"minSize",1);s([p],nt.prototype,"maxSize",1);s([p],nt.prototype,"config",1);s([p],nt.prototype,"locale",1);s([p],nt.prototype,"localeColor",1);s([p],nt.prototype,"items",1);s([p],nt.prototype,"isOptionSelected",1);var yr={size:0,color:zt.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0};var rt=class{constructor(t){this.strokes={strokes:[]};this.colorList=Se();this.dirty=M.box(false);this.id="";this.containerId=()=>{return this.id};this.initSize=()=>{const{minimumSize:t,maximumSize:e}=this.state;const{size:i}=this;if(i===0){this.changeSize(Ds(this.config,"defaultSize",[t,e]))}};this.changeColor=t=>{this.state.color=t};this.changeSize=t=>{this.state.size=t};this.changeRelativeSize=t=>{const{maximumSize:e,minimumSize:i}=this.state;this.state.size=(e-i)*t/100+i};this.changeHardness=t=>{this.state.hardness=t};this.reset=()=>{this.pureReset();this.addSnapshot(L.DELETE,this.locale.controls.buttonReset);this.editor.render()};this.editor=t;this.state={...yr,hardness:Ds(this.config,"defaultHardness",[yr.minimumHardness,yr.maximumHardness]),color:E(te(this.config,"defaultColor",yr.color))};if(this.config.colors&&this.config.colors.length>0){this.colorList=ne(E(this.config.colors))}}addSnapshot(t,e){this.editor.addSnapshot(void 0,t,e)}clickableCanvas(t){this.editor.clickableCanvas(t)}beginStroke(t=[]){if(!this.drawingContainer){const e=this.editor.orderHelper.addSprite(f.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID();this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:E(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(t){if(this.drawingContainer){const e=this.editor.previewToWorld(t,false);this.drawingContainer.addPointToCurrentStroke(e);this.editor.render()}}endStroke(){if(this.drawingContainer){this.drawingContainer.endStroke();this.editor.render();this.strokes=this.drawingContainer.getData();this.addSnapshot(L.EDIT,this.locale.history.brushStroke);this.dirty.set(true)}}updateStateFromHistory(t){if((0,xt.default)(t,this.strokes)){return}if((0,xt.default)(t,{strokes:[]})||!t){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length){this.dirty.set(false);return}this.strokes=t;this.drawingContainer.setData(this.strokes)}else{const e=this.editor.orderHelper.addSprite(f.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e);this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0);this.id=this.drawingContainer.getID()}pureReset(){this.dirty.set(false);this.strokes={strokes:[]};if(this.drawingContainer){this.editor.engine.removeContainer(this.drawingContainer);this.drawingContainer=void 0}}get config(){return this.editor.configStore.config[f.BRUSH]}get locale(){return this.editor.configStore.locale[f.BRUSH]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:t,maximumSize:e,minimumSize:i}=this.state;return(t-i)*100/(e-i)}get sizeOnScreenSpace(){const t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};s([M],rt.prototype,"state",2);s([M],rt.prototype,"dirty",2);s([h],rt.prototype,"initSize",2);s([h],rt.prototype,"changeColor",2);s([h],rt.prototype,"changeSize",2);s([h],rt.prototype,"changeRelativeSize",2);s([h],rt.prototype,"changeHardness",2);s([h],rt.prototype,"clickableCanvas",1);s([h],rt.prototype,"beginStroke",1);s([h],rt.prototype,"strokePosition",1);s([h],rt.prototype,"endStroke",1);s([h],rt.prototype,"updateStateFromHistory",1);s([h],rt.prototype,"reset",2);s([p],rt.prototype,"config",1);s([p],rt.prototype,"locale",1);s([p],rt.prototype,"localeColor",1);s([p],rt.prototype,"color",1);s([p],rt.prototype,"size",1);s([p],rt.prototype,"relativeSize",1);s([p],rt.prototype,"sizeOnScreenSpace",1);s([p],rt.prototype,"hardness",1);s([p],rt.prototype,"isDirty",1);var se={position:{x:0,y:0},size:{height:0,width:0},lockResolution:false,forceDimensions:false,ratio:"*"};var jp={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:false,flipVertically:false,cropState:M.map({})};var Za=class extends kc{constructor(){super(...arguments);this.prevDimensions={width:0,height:0}}onExport(t){this.emit(Ft.EXPORT,t)}onClose(){this.emit(Ft.CLOSE)}onUndo(){this.emit(Ft.HISTORY_UNDO)}onRedo(){this.emit(Ft.HISTORY_REDO)}onHistoryChange(){this.emit(Ft.HISTORY_CHANGE)}onEditorReady(){this.emit(Ft.EDITOR_READY)}onErrorImageLoading(t){this.emit(Ft.ERROR_IMAGE_LOADING,t)}onImageLoaded(){this.emit(Ft.IMAGE_LOAD)}onStickerUploadedAdd(t){this.emit(Ft.STICKER_UPLOAD_ADD,t)}onToolChanged(t){this.emit(Ft.TOOL_ENTER,t)}onErrorWebGLContextLost(){this.emit(Ft.ERROR_WEBGL_CONTEXT_LOST)}onCropDimensionsChanged(t){if(this.prevDimensions.width!==t.width||this.prevDimensions.height!==t.height){this.emit(Ft.CROP_DIMENSIONS_CHANGE,t);this.prevDimensions=t}}};var Qa=Xt([Di,{layout:"basic",defaultTool:null}]);var tl={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t"},categories:{[Tt.DuoTone]:"DuoTone",[Tt.BW]:"B & W",[Tt.Vintage]:"Vintage",[Tt.Smooth]:"Smooth",[Tt.Cold]:"Cold",[Tt.Warm]:"Warm",[Tt.Legacy]:"Legacy"},items:{[y.Inferno]:"Inferno",[y.Chestnut]:"Chestnut",[y.Fixie]:"Fixie",[y.Fridge]:"Fridge",[y.Sunny70s]:"Sunny 70s",[y.FlatBlack]:"Flat Black",[y.Mellow]:"Mellow",[y.HardStuff]:"Hard Stuff",[y.Oldtimer]:"Oldtimer",[y.AD1920]:"1920 A.D.",[y.Ancient]:"Ancient",[y.Kalmen]:"Kalmen",[y.Joran]:"Joran",[y.Polaroid]:"Polaroid",[y.Zephyr]:"Zephyr",[y.Levante]:"Levante",[y.Greyed]:"Greyed",[y.Classic]:"Classic",[y.Colorful]:"Colorful",[y.Snappy]:"Snappy",[y.Candy]:"Candy",[y.Creamy]:"Creamy",[y.LowFire]:"Low Fire",[y.Colla]:"Colla",[y.Sunrise]:"Sunrise",[y.Moss]:"Moss",[y.Food]:"Food",[y.Glam]:"Glam",[y.Gobblin]:"Gobblin",[y.HighCarb]:"High Carb",[y.Hicon]:"Hicon",[y.K1]:"K1",[y.K6]:"K6",[y.Pebble]:"Pebble",[y.Keen]:"Keen",[y.Lemon]:"Lemon",[y.Litho]:"Litho",[y.Lomo]:"Lomo",[y.Lomo100]:"Lomo 100",[y.Lucid]:"Lucid",[y.Neat]:"Neat",[y.Pumpkin]:"Pumpkin",[y.Solanus]:"Solanus",[y.Pale]:"Pale",[y.Pitched]:"Pitched",[y.Weathered]:"Weathered",[y.GreenGap]:"Green Gap",[y.PolaSX]:"Pola SX",[y.Pro400]:"Pro 400",[y.Quozi]:"Quozi",[y.Sepia]:"Sepia",[y.Settled]:"Settled",[y.Seventies]:"Seventies",[y.Soft]:"Soft",[y.Steel]:"Steel",[y.Summer]:"Summer",[y.Golden]:"Golden",[y.Tender]:"Tender",[y.Twilight]:"Twilight",[y.Softy]:"Softy",[y.Dusty]:"Dusty",[y.Desert]:"Desert",[y.Peach]:"Peach",[y.Clash]:"Clash",[y.Plum]:"Plum",[y.Breezy]:"Breezy",[y.DeepBlue]:"Deep Blue",[y.Frog]:"Frog",[y.Sunset]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{[G.Bokeh]:"Bokeh",[G.Chop]:"Chop",[G.Clouds]:"Clouds",[G.Golden]:"Golden",[G.Grain]:"Grain",[G.Hearts]:"Hearts",[G.LightLeak1]:"Light Leak 1",[G.LightLeak2]:"Light Leak 2",[G.Metal]:"Metal",[G.Mosaic]:"Mosaic",[G.Painting]:"Painting",[G.Paper]:"Paper",[G.Rain]:"Rain",[G.Vintage]:"Vintage",[G.Wall1]:"Wall",[G.Wall2]:"Wall 2",[G.Wood]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},[f.CUSTOM]:{title:"Benutzerdefiniert"}};var Vo={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Retry",buttonNo:"Close"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Retry",buttonNo:"Close"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Retry",buttonNo:"Close"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{[Tt.DuoTone]:"DuoTone",[Tt.BW]:"B & W",[Tt.Vintage]:"Vintage",[Tt.Smooth]:"Smooth",[Tt.Cold]:"Cold",[Tt.Warm]:"Warm",[Tt.Legacy]:"Legacy"},items:{[y.Inferno]:"Inferno",[y.Chestnut]:"Chestnut",[y.Fixie]:"Fixie",[y.Fridge]:"Fridge",[y.Sunny70s]:"Sunny 70s",[y.FlatBlack]:"Flat Black",[y.Mellow]:"Mellow",[y.HardStuff]:"Hard Stuff",[y.Oldtimer]:"Oldtimer",[y.AD1920]:"1920 A.D.",[y.Ancient]:"Ancient",[y.Kalmen]:"Kalmen",[y.Joran]:"Joran",[y.Polaroid]:"Polaroid",[y.Zephyr]:"Zephyr",[y.Levante]:"Levante",[y.Greyed]:"Greyed",[y.Classic]:"Classic",[y.Colorful]:"Colorful",[y.Snappy]:"Snappy",[y.Candy]:"Candy",[y.Creamy]:"Creamy",[y.LowFire]:"Low Fire",[y.Colla]:"Colla",[y.Sunrise]:"Sunrise",[y.Moss]:"Moss",[y.Food]:"Food",[y.Glam]:"Glam",[y.Gobblin]:"Gobblin",[y.HighCarb]:"High Carb",[y.Hicon]:"Hicon",[y.K1]:"K1",[y.K6]:"K6",[y.Pebble]:"Pebble",[y.Keen]:"Keen",[y.Lemon]:"Lemon",[y.Litho]:"Litho",[y.Lomo]:"Lomo",[y.Lomo100]:"Lomo 100",[y.Lucid]:"Lucid",[y.Neat]:"Neat",[y.Pumpkin]:"Pumpkin",[y.Solanus]:"Solanus",[y.Pale]:"Pale",[y.Pitched]:"Pitched",[y.Weathered]:"Weathered",[y.GreenGap]:"Green Gap",[y.PolaSX]:"Pola SX",[y.Pro400]:"Pro 400",[y.Quozi]:"Quozi",[y.Sepia]:"Sepia",[y.Settled]:"Settled",[y.Seventies]:"Seventies",[y.Soft]:"Soft",[y.Steel]:"Steel",[y.Summer]:"Summer",[y.Golden]:"Golden",[y.Tender]:"Tender",[y.Twilight]:"Twilight",[y.Softy]:"Softy",[y.Dusty]:"Dusty",[y.Desert]:"Desert",[y.Peach]:"Peach",[y.Clash]:"Clash",[y.Plum]:"Plum",[y.Breezy]:"Breezy",[y.DeepBlue]:"Deep Blue",[y.Frog]:"Frog",[y.Sunset]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{[G.Bokeh]:"Bokeh",[G.Chop]:"Chop",[G.Clouds]:"Clouds",[G.Golden]:"Golden",[G.Grain]:"Grain",[G.Hearts]:"Hearts",[G.LightLeak1]:"Light Leak 1",[G.LightLeak2]:"Light Leak 2",[G.Metal]:"Metal",[G.Mosaic]:"Mosaic",[G.Painting]:"Painting",[G.Paper]:"Paper",[G.Rain]:"Rain",[G.Vintage]:"Vintage",[G.Wall1]:"Wall",[G.Wall2]:"Wall 2",[G.Wood]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},[f.CUSTOM]:{title:"Custom"}};var Xp=o=>{if(o==="de"){return tl}return Vo};var Yp=(o,t)=>{if(t&&t[o]){return Xt([Xp(o),t[o]])}return Xp(o)||Vo};var N1={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}};var V1={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}};var Un=()=>{const o=8;const t=230;const e=3*o;const i=t-2*e;const r=(i-2*o)/3;const n=(i-o)/2;return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:t,paddingTop:2*o,paddingBottom:2*o,paddingLeft:e,paddingRight:e,marginBottom:0,controls:{gutter:2*o}},advancedCard:{small:{height:r,width:r},medium:{height:n,width:n},large:{height:86,width:i}},advancedSpacer:8,basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicUIToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},inputs:{cropSize:{maxWidth:t},checkbox:{maxWidth:t}},fontSystem:N1,zIndex:V1}};var U1=({primary:o="#365afc",background:t="#0B0B0B",foreground:e="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const i="rgba(255, 255, 255, 0.90)";const r="rgba(255, 255, 255, 0.60)";const n="rgba(255, 255, 255, 0.38)";const a="#424242";const l="#333333";const c="#242424";const d="#171717";const u="#0B0B0B";const m="rgba(255, 255, 255, 0.08)";const g="rgba(0, 0, 0, 0.3)";const v="rgba(89, 121, 252, 0.20)";const S="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:e,primary:o,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:l,activeForeground:o,containedPrimaryBackground:o,containedPrimaryForeground:i,outlinedPrimaryBackground:c,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:o,textSecondaryForeground:r,outlinedInactiveOverlayColor:g,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:l,foreground:e,activeForeground:e,activeBackground:o,inactiveOpacity:S,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:i,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:i,activeBorderColor:o,activeOverlayColor:v,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:i,inactiveOverlayColor:g,hoverOverlayColor:m},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:o,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:r,borderColor:l,caretColor:n,listBackground:l,listBorderColor:l,listItemHoverBackground:a,listForeground:r,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:S},textInput:{foreground:i,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:l,inactiveOpacity:S},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:o,thumbBackground:d,thumbBorderColor:o,inactiveOpacity:S,hoverOpacity:"0.7"},selectColor:{activeBorderColor:o,inactiveOpacity:S},toolbar:{foreground:i,background:c,activeBackground:"transparent",activeForeground:o,borderColor:"transparent"},tooltip:{background:a,foreground:i},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:l,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:S},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:i,borderColor:"none"},canvasActionBar:{background:a,foreground:i,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:l,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:a},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}};var Gn=U1;var G1=({primary:o="#1e47fb",background:t="#FBFBFB",foreground:e="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const i="rgba(0, 0, 0, 0.90)";const r="rgba(0, 0, 0, 0.60)";const n="rgba(0, 0, 0, 0.38)";const a="#CCCCCC";const l="#D4D4D4";const c="#E6E6E6";const d="#EEEEEE";const u="#FBFBFB";const m="rgba(125, 125, 125, 0.12)";const g="rgba(30, 71, 251, 0.2)";const v="rgba(0, 0, 0, 0.1)";const S="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:e,primary:o,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:l,activeForeground:o,containedPrimaryBackground:o,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:c,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:o,textSecondaryForeground:r,outlinedInactiveOverlayColor:v,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:l,foreground:e,activeForeground:e,activeBackground:o,inactiveOpacity:S,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:i,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:i,activeBorderColor:o,activeOverlayColor:g,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:v,hoverOverlayColor:m},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:o,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:r,borderColor:l,listBackground:l,caretColor:n,listForeground:r,listBorderColor:l,listItemHoverBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:S},textInput:{foreground:i,hoverBorderColor:i,background:"transparent",borderColor:l,inactiveOpacity:S},slider:{trackColor:a,activeTrackColor:o,thumbBackground:d,thumbBorderColor:o,inactiveOpacity:S,hoverOpacity:"0.7"},selectColor:{activeBorderColor:o,inactiveOpacity:S},toolbar:{foreground:i,background:l,activeBackground:"transparent",activeForeground:o,borderColor:"transparent"},tooltip:{background:a,foreground:i},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:d,shadow:"none",separatorColor:l,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:S},mainCanvasActionBar:{background:"transparent",foreground:i,borderColor:"none"},canvasActionBar:{background:a,foreground:i,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:l,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:a},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}};var el=G1;var vr=Gn();var ol=Un();var _t={...vr,measurements:ol};var j1=o=>{if(o==="light"){return el}return Gn};var Kp=(o,t)=>{const e=j1(o);if(t&&t[o]){const{primary:i,background:r,foreground:n}=t[o];const a={primary:i,background:r,foreground:n};const l=Object.keys(a).reduce((c,d)=>{if(a[d]){return{...c,[d]:a[d]}}return c},{});return Xt([e(l),t[o]])}return e()||vr};var X1=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","basicUIToolControlBar","mainCanvasActionBar","colorItem","fontSystem"];var qp=o=>{const t=Un();if(o){const e={};Object.keys(o).forEach(i=>{if(X1.indexOf(i)!==-1){e[i]=o[i]}});return Xt([t,e])}return t};var Y1={config:Di,locale:Vo,theme:vr,measurements:ol};var $t=class{constructor(){this.checkDefaultToolAvailability=(t,e)=>{return e.indexOf(t)!==-1};this.state=M(Y1);this.events=new Za;this.licenseChecker=null}saveConfig(t){if(t.mainCanvasActions&&t.mainCanvasActions.length!==4){t.mainCanvasActions.length=4}const e=t.layout&&t.layout==="basic"?Qa:Di;const i=Xt([e,t]);this.licenseChecker=new Hc(i.license);if(!this.licenseChecker.areCustomAssetsAllowed()){i.sticker.enableCustomUpload=false}const r=Yp(i.language,i.custom.languages);const n=Kp(i.theme,i.custom.themes);const a=qp(i.custom.measurements);const{provider:l}=i.library;const c=[];i.adjustment.categories=i.adjustment.categories.reduce((m,g)=>{m.push({...g,items:g.items.filter(v=>{if(!hc[v.identifier]){c.push(v.identifier);return false}return true})});return m},[]);if(c.length!==0){console.error(`The following identifier are incorrect for the adjustment tool: ${c.join(", ")}`)}delete i.language;delete i.custom.languages;delete i.custom.themes;delete i.library.provider;let d=i.tools.reduce((m,g)=>{if(typeof g==="object"){return[...m,...g]}return[...m,g]},[]);if(!d.length){console.error(`Empty list input for tools`);d=_n.reduce((m,g)=>{if(typeof g==="object"){return[...m,...g]}return[...m,g]},[])}d=d.filter(m=>this.licenseChecker.isToolAllowed(m));if(i.defaultTool){const m=this.checkDefaultToolAvailability(i.defaultTool,d);if(!m){if(this.licenseChecker.isToolAllowed(i.defaultTool)){console.warn(`Configured default tool ${i.defaultTool} is not a part of configured list of tools: [${d.join(" ")}]`)}[i.defaultTool]=d}}i.tools=d;this.state.config=i;this.state.locale=r;this.state.theme=n;this.state.measurements=a;const u=this.buildCustomAssetsConfig();this.assetProvider=new Pc(u,this.licenseChecker.areCustomAssetsAllowed(),i.assetResolver);this.loadThemeFont();return l}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get tools(){return this.config.tools.reduce((t,e)=>{if(typeof e==="string"){return[...t,e]}return[...t,"",...e]},[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf(et.CLOSE)!==-1}loadThemeFont(){const{typography:t}=this.theme;if(!t.skipLoading){this.assetProvider.getFontManager().injectFonts([t])}}buildCustomAssetsConfig(){const t=this.tools;const e=E(this.state.config);const i=this.state.config.assetBaseUrl;const{theme:r}=this.state;const n=t.indexOf(f.FILTER)!==-1?e[f.FILTER]:void 0;const a=t.indexOf(f.FOCUS)!==-1?e[f.FOCUS]:void 0;const l=t.indexOf(f.ADJUSTMENT)!==-1?e[f.ADJUSTMENT]:void 0;const c=t.indexOf(f.STICKER)!==-1?e[f.STICKER]:void 0;const d=t.indexOf(f.FRAME)!==-1?e[f.FRAME]:void 0;const u=t.indexOf(f.OVERLAY)!==-1?e[f.OVERLAY]:void 0;const m=t.indexOf(f.TRANSFORM)!==-1?e[f.TRANSFORM]:void 0;const g=t.indexOf(f.TEXT)!==-1?e[f.TEXT]:void 0;const v=t.indexOf(f.TEXT_DESIGN)!==-1?e[f.TEXT_DESIGN]:void 0;return{basePath:i,theme:r,filter:n,focus:a,sticker:c,frame:d,overlay:u,transform:m,text:g,adjustment:l,textdesign:v}}};s([h],$t.prototype,"saveConfig",1);s([p],$t.prototype,"config",1);s([p],$t.prototype,"locale",1);s([p],$t.prototype,"theme",1);s([p],$t.prototype,"measurements",1);s([p],$t.prototype,"tools",1);s([p],$t.prototype,"defaultTool",1);s([p],$t.prototype,"isOrderDefault",1);s([p],$t.prototype,"isLayoutAdvanced",1);s([p],$t.prototype,"displayCloseButton",1);var il=class{constructor(t){this.editor=t}setBackgroundImage(t){if(!this.container){this.container=this.engine.addImage({image:t,originalImage:t,blendMode:ue.NORMAL,opacity:1})}else{this.container.setData({image:t,originalImage:t})}}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((t,e)=>{const{image:i}=this.editor.activeStore;if(cc(i)){this.setBackgroundImage(i);t()}else{const r=this.editor.libraryStore.getRawUrl(i);this.getImageElement(r).then(n=>{this.setBackgroundImage(n);t()}).catch(n=>{e({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((e,i)=>{const r=new Image;r.addEventListener("load",()=>{e(r)});r.addEventListener("error",n=>{i(n)});r.crossOrigin=this.editor.configStore.config.engine.crossOrigin;r.src=t})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}};var rl=class{constructor(t){this.applyNewImageTransform=()=>{const{size:t,width:e,height:i}=this.editor.engineMediator.image.container.getBounds();const r=this.container;r.setTransform(Pe.IDENTITY);r.setResolution(t);r.setPivot(.5,.5);r.setPosition({x:e/2,y:i/2})};this.editor=t}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}};function xr(o,t){const e=o.width/o.height;const i=t.width/t.height;if(e>i){return o.height/t.height}return o.width/t.width}var K1={transform:Pe.IDENTITY};var He=class{constructor(t){this.initialTransform=Pe.IDENTITY;this.editor=t;this.state=M(K1)}createPreview(t){this.container=this.editor.engine.createPreview(t)}updateTransform(t=0,e=true){const i=this.calculateTransform(t);if(i.scale.x){if(e){this.saveInitialTransform(i)}else{this.savePreviewTransform(i)}this.container.setTransform(this.state.transform);return true}return false}saveInitialTransform(t){this.initialTransform=t;this.savePreviewTransform(t)}savePreviewTransform(t){pt(()=>{this.state.transform.position=t.position;this.state.transform.scale=t.scale;this.state.transform.rotation=t.rotation;const e=ee();const i=new b(t.scale).divide(e);this.previewTransformWithoutDpr={position:new b(t.position).divide(e),scale:i,rotation:t.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(t=0){const e=ee();const{scaleImageToFit:i}=this.editor.configStore.config;const{width:r,height:n}=this.editor.canvasStore.canvasSize;const a=this.editor.engine.getOutputDimensions();const l=xr({width:r,height:n},a);let c=i?l:Math.min(1,l);const d=n-a.height*c;const u=this.editor.configStore.measurements.mainCanvasActionBar.height*2;if(d<u){c=xr({width:r,height:n-u},a)}const m=.95;if(a.height*c>n*m){c=xr({width:r,height:n*m},a)}if(a.width*c>r*m){c=xr({width:r*m,height:n},a)}c*=e;const g={x:r*e/2,y:n*e/2};const v={x:c,y:c};return new Pe(g,v,t)}};s([h],He.prototype,"updateTransform",1);s([h],He.prototype,"savePreviewTransform",1);s([p],He.prototype,"transform",1);s([p],He.prototype,"position",1);s([p],He.prototype,"scale",1);s([p],He.prototype,"rotation",1);var Je=class{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(t){if([f.STICKER,f.TEXT,f.TEXT_DESIGN,f.BRUSH].indexOf(t)!==-1){throw new Error("addIndex is used for non sprites, for sprites use addSprite")}}static remove(t,e){const i=e.findIndex(r=>r===t);if(i!==-1){e.splice(i,1)}return void 0}static indexForOrder(t,e,i){const r=t[i];const n=e.findIndex(l=>l===i);if(n!==-1){return{index:n,order:e}}const{length:a}=e;if(a){let l;for(l=0;l<a;l+=1){const c=e[l];const d=t[c];if(r<d){e=[...e.slice(0,l),i,...e.slice(l)];return{index:l,order:e}}}}e.push(i);return{index:e.length-1,order:e}}addIndex(t){Je.checkTool(t);const{index:e,order:i}=Je.indexForOrder(Je.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t);this.imageContainerOrder=i;return e}removeIndex(t){Je.checkTool(t);Je.remove(t,this.imageContainerOrder)}addSprite(t){this.spriteContainerOrder.push(t);return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(t){Je.remove(t,this.spriteContainerOrder)}renameSprite(t,e){const i=this.spriteContainerOrder.findIndex(r=>r===t);if(i!==-1){this.spriteContainerOrder[i]=e}}bringToFront(t){const e=this.spriteContainerOrder.findIndex(i=>i===t);if(e!==-1){this.spriteContainerOrder.splice(e,1);this.spriteContainerOrder.push(t)}return this.getLastSpriteIndex()}getLastSpriteId(){const{length:t}=this.spriteContainerOrder;return this.spriteContainerOrder[t-1]}getSpriteIndex(t){const e=this.spriteContainerOrder.findIndex(i=>i===t);return e+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}};var jn=Je;jn.IMAGE_CONTAINER_INDEX={[f.FILTER]:0,[f.ADJUSTMENT]:1,[f.FOCUS]:2,[f.OVERLAY]:3};var nl=class{constructor(t){this.orderHelper=new jn;this.init=()=>{const t=this.editor.configStore.config.engine;this.engine=new jr({...t,license:this.editor.configStore.config.license,assetProvider:this.editor.configStore.assetProvider,watermark:this.editor.configStore.config.watermark});this.image=new il(this.editor);this.output=new rl(this.editor);this.preview=new He(this.editor)};this.editor=t}render(t){return this.engine.render(t)}previewSpaceToWorldSpace(t,e){const i=this.preview.previewTransformWithoutDpr;if(fe(t)){const r=this.editor.engine.convertPointFromPreviewIntoWorldSpace(b.ZERO,i,e);const n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},i,e);return b.distance(new b(r),new b(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,i,e)}worldSpaceToPreviewSpace(t){const e=this.preview.previewTransformWithoutDpr;if(fe(t)){const i=this.editor.engine.convertPointFromWorldIntoPreviewSpace(b.ZERO,e);const r=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return b.distance(new b(i),new b(r))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)}outputSpaceToWorldSpace(t){if(fe(t)){return Fs.getScalarInWorldSpace(t,this.editor.engine.getOutputContainer())}return Fs.getPointInWorldSpace(t,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(t){const e=this.preview.previewTransformWithoutDpr;if(fe(t)){const i=this.editor.engine.convertPointFromPreviewIntoOutputSpace(b.ZERO,e);const r=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return b.distance(new b(i),new b(r))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)}previewSpaceToFlippedPreviewSpace(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)}};var Bi=class{constructor(){this.snapshots=[];this.observeIndex=M.box(-1)}addSnapshot(t){if(this.index===this.snapshots.length-1){this.snapshots=this.snapshots.concat(JSON.stringify(t))}else{this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(t)]}this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[];this.observeIndex.set(-1)}undo(){if(this.canUndo){this.observeIndex.set(this.index-1);return JSON.parse(this.getCurrentState())}return null}redo(){if(this.canRedo){this.observeIndex.set(this.index+1);return JSON.parse(this.getCurrentState())}return null}discardSnapshotsfromIndex(t){if(t>0&&t<this.snapshots.length-1){this.snapshots=this.snapshots.slice(0,t);this.observeIndex.set(this.snapshots.length-1)}}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};s([p],Bi.prototype,"index",1);s([p],Bi.prototype,"canUndo",1);s([p],Bi.prototype,"canRedo",1);var Uo=class{constructor(t){this.awaitHistoryChange=false;this.isDirtySinceSave=false;this.undo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo();this.awaitHistoryChange=true;const t=this.appHistoryManager.undo();await this.applyState(t);this.awaitHistoryChange=false;if(!this.canUndo){this.isDirtySinceSave=false}}};this.redo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo();this.awaitHistoryChange=true;const t=this.appHistoryManager.redo();await this.applyState(t);this.awaitHistoryChange=false}};this.editor=t;this.appHistoryManager=new Bi}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const t=E(this.editor.adjustmentsToolStore.state);const e=E(this.editor.filterToolStore.state);const i=this.editor.focusToolStore.getFocusStateForHistory();const r=E(this.editor.overlayToolStore.state);const n=E(this.editor.frameToolStore.state);const{strokes:a}=this.editor.brushToolStore;const l=this.editor.spriteStore.getSpriteHistoryState();const c=this.editor.transformToolStore.serializableState;return{[f.ADJUSTMENT]:t,[f.FILTER]:e,[f.FOCUS]:i,[f.OVERLAY]:r,[f.FRAME]:n,[f.BRUSH]:a,sprite:l,[f.TRANSFORM]:c}}addInitialSnapshot(){const t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:L.ADD,description:"Initial State"})}addSnapshot(t,e,i){let r;if(!t){r=this.getHistoryState()}else if(t.sprite||t.transform){r={...this.getHistoryState(),...t}}else{r=t}this.appHistoryManager.addSnapshot({state:r,type:e,description:i});this.editor.configStore.events.onHistoryChange();if(!this.isDirtySinceSave){this.isDirtySinceSave=true}}async applyState({state:t}){try{if(t){const e=Object.keys(t);for(const i of e){switch(i){case f.FILTER:await this.editor.filterToolStore.updateStateFromHistory(t[i]);break;case f.ADJUSTMENT:await this.editor.adjustmentsToolStore.updateStateFromHistory(t[i]);break;case f.OVERLAY:await this.editor.overlayToolStore.updateStateFromHistory(t[i]);break;case f.FRAME:await this.editor.frameToolStore.updateStateFromHistory(t[i]);break;case f.FOCUS:await this.editor.focusToolStore.updateStateFromHistory(t[i],this.editor.canvasStore.sizeVector);break;case f.BRUSH:await this.editor.brushToolStore.updateStateFromHistory(t[i]);break;case"sprite":await this.editor.spriteStore.updateStateFromHistory(t[i]);break;case f.TRANSFORM:this.editor.outputContainer.pauseChildrenUpdates();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.updateStateFromSerialization(t[i]);this.editor.transformToolStore.onLeave();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.onLeave();this.editor.outputContainer.resumeChildrenUpdates();await this.editor.wait();break;default:break}}await this.editor.renderPromise()}}catch(e){console.error(e);this.editor.modalStore.showActionModal({type:Q.ERROR,identifier:"unexpectedError",error:e,handleConfirm:()=>{this.applyState({state:t})}})}}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset();this.isDirtySinceSave=false}getCurrentSpritesState(){var t,e;return(e=(t=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:t.state)==null?void 0:e.sprite}};s([h],Uo.prototype,"undo",2);s([h],Uo.prototype,"redo",2);s([p],Uo.prototype,"canUndo",1);s([p],Uo.prototype,"canRedo",1);var q1=(o,t)=>new Promise((e,i)=>{const r=new XMLHttpRequest;r.onload=()=>{const n=new FileReader;n.onloadend=()=>{if(typeof n.result==="string"&&n.result.substr(0,10)==="data:image"){e(n.result)}else{i(new Error(`The image could not be loaded from ${o}`))}};n.onerror=a=>{i(a)};n.readAsDataURL(r.response)};r.open("GET",o);r.responseType="blob";r.withCredentials=t==="use-credentials";r.send()});var Jp=(o,t)=>{return new Promise((e,i)=>{const r=new Image;r.onload=()=>{e(r)};r.onerror=()=>{i(new Error(`Failed to load image with src:${o}`))};r.crossOrigin=t;r.src=o})};var J1=(o,t)=>new Promise((e,i)=>{q1(o,t).then(r=>{const n=new Image;n.addEventListener("load",()=>{e(n)});n.src=r}).catch(()=>{Jp(o,t).then(r=>e(r)).catch(r=>{i(r)})})});var sl=async({url:o,image:t,crossOrigin:e="anonymous"})=>{try{if(t&&t.src&&t.src.substr(0,5)==="data:"||t&&t.src&&t.src.includes(".svg")){return t}if(typeof o==="string"&&o.substr(0,5)==="data:"||typeof o==="string"&&o.includes(".svg")){return Jp(o,e)}return J1(o||t.src,e)}catch(i){throw new Error(i)}};var Z1={tool:null,isWebcam:false,image:"",imageLoadedToEngine:false};var Wt=class{constructor(t){this.setImage=async t=>{try{const{crossOrigin:e}=this.editor.configStore.config.engine;if(typeof t==="string"&&!t.trim()||t===void 0||t===null){this.state.image=void 0}else if(typeof t==="string"){this.state.image=await sl({url:Yi(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e})}else if(t instanceof HTMLImageElement){this.state.image=await sl({image:t,crossOrigin:e})}if(this.isWebcam){this.state.isWebcam=false}}catch(e){throw new Error(e)}};this.setImageLoadedToEngine=t=>{this.state.imageLoadedToEngine=t};this.newImage=t=>{this.editor.init(t)};this.editor=t;this.state=M(Z1)}selectTool(t){const{licenseChecker:e}=this.editor.configStore;if(this.state.tool!==t&&(e==null?void 0:e.isToolAllowed(t))&&(this.image||t===f.LIBRARY||t===f.CUSTOM)){this.editor.onToolChange(this.state.tool,t);this.state.tool=t;this.editor.configStore.events.onToolChanged(t);switch(t){case f.TEXT:if(this.editor.configStore.config.text.addDefaultTextOnEnter){this.editor.spriteStore.textToolStore.addOrselect()}break;case f.TEXT_DESIGN:if(this.editor.configStore.config.textdesign.addDefaultTextOnEnter){this.editor.spriteStore.textDesignToolStore.addOrselect()}break;case f.BRUSH:{this.editor.brushToolStore.initSize();break}case f.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop();break;default:break}}}selectWebcam(t){this.state.isWebcam=t}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};s([h],Wt.prototype,"selectTool",1);s([h],Wt.prototype,"selectWebcam",1);s([h],Wt.prototype,"setImage",2);s([h],Wt.prototype,"setImageLoadedToEngine",2);s([h],Wt.prototype,"newImage",2);s([p],Wt.prototype,"webcamLabel",1);s([p],Wt.prototype,"tool",1);s([p],Wt.prototype,"isWebcam",1);s([p],Wt.prototype,"image",1);s([p],Wt.prototype,"imageLoadedToEngine",1);var Q1={height:150,width:150};var al={height:0,width:0};var ll=class{constructor(t){this.canvasClickDisabled=M.box(false);this.resizeCanvas=(t=null)=>{const e=this.editor.activeStore.tool;const i=t===f.TRANSFORM||!t&&e===f.TRANSFORM;const{isLayoutAdvanced:r,measurements:n}=this.editor.configStore;const{storedSize:a}=this.editor.canvasStore;let l=0;if(!r&&i){l=n.basicUIToolControlBar.controlsBarHeight*-1;if(t===f.TRANSFORM&&e===f.BRUSH){l-=n.basicUIToolControlBar.itemsBarHeight+4}}this.setCanvasSize({width:a.width,height:a.height+l})};this.setCanvasSize=t=>{this.state.canvasSize=t};this.editor=t;this.state=M(ll.initialState)}setCanvasElement(t){this.canvas=t;this.editor.engineMediator.preview.createPreview(t);if(this.editor.activeStore.image){this.editor.init(this.editor.activeStore.image)}}saveDimensions({height:t,width:e,render:i}){const{imageLoadedToEngine:r}=this.editor.activeStore;if(t>al.height&&e>al.width){this.state.storedSize={width:e,height:t};if(this.state.canvasSize.height===0){this.state.canvasSize={width:e,height:t}}if(i&&r){this.editor.resize()}}}disableCanvasClick(){this.canvasClickDisabled.set(true)}enableCanvasClick(){this.canvasClickDisabled.set(false)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return b.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(t){const e=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(i=>i.getID()).filter(i=>i!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(e)}};var Dt=ll;Dt.initialState={canvasSize:al,storedSize:Q1};s([h],Dt.prototype,"setCanvasElement",1);s([h],Dt.prototype,"saveDimensions",1);s([h],Dt.prototype,"resizeCanvas",2);s([h],Dt.prototype,"disableCanvasClick",1);s([h],Dt.prototype,"enableCanvasClick",1);s([h],Dt.prototype,"setCanvasSize",2);s([p],Dt.prototype,"isCanvasClickable",1);s([p],Dt.prototype,"canvasSize",1);s([p],Dt.prototype,"storedSize",1);s([p],Dt.prototype,"sizeVector",1);s([p],Dt.prototype,"sizeVectorMagnitude",1);var ty={type:null,identifier:null,isVisible:false,error:""};var Yt=class{constructor(t){this.showActionModal=({type:t,identifier:e,error:i,handleConfirm:r,handleDismiss:n})=>{this.resetHandlers();this.state.isVisible=true;this.state.identifier=e;this.state.type=t;this.state.error=i||"";this.handleConfirm=r;this.handleDismiss=n};this.hideModal=()=>{this.state.isVisible=false;this.state.type=null;this.state.error="";this.state.identifier=null;this.resetHandlers()};this.resetHandlers=()=>{this.handleConfirm=null;this.handleDismiss=null};this.configStore=t.configStore;this.state=M(ty)}showInfoModal(t){this.resetHandlers();this.state.isVisible=true;this.state.type=Q.INFO;this.state.identifier=t;this.state.error=""}showTextEditModal(){this.resetHandlers();this.state.isVisible=true;this.state.type=Q.TEXT_EDIT;this.state.identifier="inputText";this.state.error=""}get modalProps(){const{isVisible:t}=this.state;const e=this.getModalLocale();if(e){const{bodyLabel:i,headerLabel:r,buttonYes:n,buttonNo:a}=e;return{headerLabel:r,bodyLabel:i,confirmLabel:n,dismissLabel:a,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:false}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:t,measurements:{basicCanvasOffset:e,advancedUIToolControlBar:i,advancedUIToolbar:r},isOrderDefault:n}=this.configStore;const a=(i.width+r.width)*(!n?-1:1);const l=e;return t?{x:a/2,y:0}:{x:0,y:-l}}getModalLocale(){const{identifier:t,error:e,type:i}=this.state;const{locale:r}=this.configStore;if(!i||!t||i===Q.TEXT_EDIT)return null;if(i&&t&&r[`${i}Modals`]&&r[`${i}Modals`][t]){const n=r[`${i}Modals`][t];let{body:a}=n;if(a&&typeof e==="object"){Object.keys(e).forEach(c=>{a=a.replace(`\${${c}}`,e[c])})}else if(a){a=a.replace("${error}",e)}let l=n.heading;if(i===Q.ERROR||i===Q.WARNING){const c={error:r.common.error,warning:r.common.warning};const d=i==="error"?c.error:c.warning;l=`${d}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:a,headerLabel:l,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};s([h],Yt.prototype,"showActionModal",2);s([h],Yt.prototype,"showInfoModal",1);s([h],Yt.prototype,"showTextEditModal",1);s([h],Yt.prototype,"hideModal",2);s([p],Yt.prototype,"modalProps",1);s([p],Yt.prototype,"isVisible",1);s([p],Yt.prototype,"type",1);s([p],Yt.prototype,"identifier",1);s([p],Yt.prototype,"positionOffset",1);var gt=class{constructor(t){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(t=>t/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{if(this.canZoomIn){this.state.scaleIndex+=1;this.scaleRender()}};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{maxOffsetX:t,maxOffsetY:e}=this.checkOffset({x:0,y:0});if(this.state.scaleIndex===this.defaultIndex){this.offset.y=e}if(this.state.scaleIndex===this.defaultIndex){this.offset.x=t}this.savePosition();this.scaleRender()}};this.setOffset=t=>{const{canDragX:e,canDragY:i}=this.checkOffset(t);if(e){this.offset.x=t.x}if(i){this.offset.y=t.y}this.scaleRender()};this.editor=t}setInitialTransform(t=0){const e=ee();const{scaleImageToFit:i}=this.editor.configStore.config;const{transform:r}=this.editor.engineMediator.preview;pt(()=>{const n=Math.abs(t||r.scale.x);this.setDefaultScale(i?n:Math.min(1*e,n));this.setPosition(r.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:t,height:e}=this.editor.canvasStore.canvas;this.setPosition({x:t/2,y:e/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(t){this.state.position.x=t.x;this.state.position.y=t.y}savePosition(){this.setPosition(this.getPositionWithOffset());this.offset={x:0,y:0}}setDefaultScale(t){if(this.defaultScale!==1){const i=this.SCALE_LEVELS.findIndex(r=>r===this.defaultScale);if(i!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),...this.SCALE_LEVELS.slice(i+1)]}}const e=this.SCALE_LEVELS.findIndex(i=>i===t);if(e!==-1){this.state.scaleIndex=e}else{const i=this.SCALE_LEVELS.findIndex((r,n)=>{if(n===0){return t<r}return this.SCALE_LEVELS[n-1]<t&&t<r});if(i!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),t,...this.SCALE_LEVELS.slice(i)];this.state.scaleIndex=i}else{this.SCALE_LEVELS=[...this.SCALE_LEVELS,t];this.state.scaleIndex=this.SCALE_LEVELS.length-1}}this.defaultScale=t}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(t){const e=ee();const{scaledSize:i}=this;const{previewSize:r}=this;const n=this.editor.engineMediator.preview.initialTransform.position;const a=this.getPositionWithOffset(t);const l=(i.width-r.width)*e/2;const c=(i.height-r.height)*e/2;const d=n.x-a.x;const u=n.y-a.y;const m=Math.abs(d);const g=Math.abs(u);const v=d>0;const S=u>0;const x=m-l;const w=g-c;return{canDragX:x<0,canDragY:w<0,maxOffsetX:v?-x:x,maxOffsetY:S?-w:w}}calculateScale(t=0,e=this.previewSize,i=this.defaultScale){const{width:r,height:n}=e;const a=new b({x:r,y:n});const l=new b(Math.abs(a.x*Math.cos(t))+Math.abs(a.y*Math.sin(t)),Math.abs(a.x*Math.sin(t))+Math.abs(a.y*Math.cos(t)));const c=a.subtract(l).divide(2).multiply(i).abs;if(c.y>c.x){return c.y*2/a.y+i}return c.x*2/a.x+i}get defaultIndex(){return this.SCALE_LEVELS.findIndex(t=>t===this.defaultScale)}getPositionWithOffset(t=this.offset){const{position:e}=this;return{x:e.x-t.x,y:e.y-t.y}}scaleRender(t=false){const e=this.editor.scale.getPositionWithOffset();const i=t?this.defaultScale:this.scale;const r={x:i,y:i};this.editor.engineMediator.preview.container.setScale(r);this.editor.engineMediator.preview.container.setPosition(e);this.editor.engineMediator.preview.savePreviewTransform({scale:r,position:e,rotation:0});if(!t){this.editor.render()}}get scale(){const t=this.state.scaleIndex;return t!==-1?this.SCALE_LEVELS[t]:this.defaultScale}get zoomLevel(){const t=ee();return(this.scale/t*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){const{restrictZoomOutToDefault:t}=this.editor.configStore.config;if(t){return this.state.scaleIndex>this.defaultIndex}return this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const t=this.state.scaleIndex;const e=t!==-1?this.SCALE_LEVELS[t]:this.defaultScale;const{previewSize:i}=this;return{width:i.width*e/this.defaultScale,height:i.height*e/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};s([M],gt.prototype,"state",2);s([h],gt.prototype,"in",2);s([h],gt.prototype,"out",2);s([h],gt.prototype,"setInitialTransform",1);s([h],gt.prototype,"resetScale",1);s([h],gt.prototype,"resetPosition",1);s([h],gt.prototype,"setPosition",1);s([h],gt.prototype,"savePosition",1);s([h],gt.prototype,"setDefaultScale",1);s([h],gt.prototype,"setScaleToDefault",1);s([p],gt.prototype,"scale",1);s([p],gt.prototype,"zoomLevel",1);s([p],gt.prototype,"canDrag",1);s([p],gt.prototype,"canZoomOut",1);s([p],gt.prototype,"canZoomIn",1);s([p],gt.prototype,"position",1);s([p],gt.prototype,"scaledSize",1);var Zp=[[0,0],[0,1],[1,0],[1,1]];var ey=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]];var we=class{constructor(t,e,i="center",r=true,n=false){this.considerRotation=true;this.considerFlip=true;this.store=e;this.m=i==="center"?we.movePivotTo([.5,.5]):Zp;this.considerRotation=r;this.considerFlip=n;this.configStore=t.configStore}static getFlippedEdgeIndex(t,e,i){return ey[(e?1:0)+(i?2:0)][t]}static movePivotTo(t){return Zp.map(e=>[e[0]-t[0],e[1]-t[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:false}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:false}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(t,e,i){const r=we.getFlippedEdgeIndex(t,e,i);const n=this.m[r][0]*this.size.width;const a=this.m[r][1]*this.size.height;return{width:n,height:a}}get leftTop(){const{position:t,flipHorizontally:e,flipVertically:i}=this;const r=this.handleOrigin(0,e,i);return we.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottom(){const{position:t,flipHorizontally:e,flipVertically:i}=this;const r=this.handleOrigin(1,e,i);return we.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightTop(){const{position:t,flipHorizontally:e,flipVertically:i}=this;const r=this.handleOrigin(2,e,i);return we.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottom(){const{position:t,flipHorizontally:e,flipVertically:i}=this;const r=this.handleOrigin(3,e,i);return we.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:i}=this;const r=this.handleOrigin(1,e,i);r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return we.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:i}=this;const r=this.handleOrigin(3,e,i);r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return we.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftMid(){const t=new b(this.leftTop);const e=new b(this.leftBottom);return t.add(e).divide(2)}get rightMid(){const t=new b(this.rightTop);const e=new b(this.rightBottom);return t.add(e).divide(2)}};var at=we;at.coordinatesWithRotation=({width:t,height:e},i,r,n,a,l)=>{let c=t*Math.cos(i)-e*Math.sin(i)+l.x;let d=t*Math.sin(i)+e*Math.cos(i)+l.y;if(r){c=a.x*2-c}if(n){d=a.y*2-d}return new b({x:c,y:d}).rounded};s([p],at.prototype,"position",1);s([p],at.prototype,"size",1);s([p],at.prototype,"rotation",1);s([p],at.prototype,"flipHorizontally",1);s([p],at.prototype,"flipVertically",1);s([p],at.prototype,"flipCenter",1);s([p],at.prototype,"leftTop",1);s([p],at.prototype,"leftBottom",1);s([p],at.prototype,"rightTop",1);s([p],at.prototype,"rightBottom",1);s([p],at.prototype,"leftBottomHandle",1);s([p],at.prototype,"rightBottomHandle",1);s([p],at.prototype,"leftMid",1);s([p],at.prototype,"rightMid",1);var N=class{constructor(t,e){this.minCropSize=0;this.state=jp;this.configStore=t.configStore;this.minCropSize=this.configStore.measurements.crop.minSize;this.defaults=e}changeIdentifier(t){this.state.identifier=t;const e=this.state.cropState.get(t);if(!e){this.state.cropState.set(t,{...se})}}changeRatio(t){const e=this.state.cropState.get(this.identifier);if(e){this.state.cropState.set(this.identifier,{...e,ratio:t})}}changeSize(t){const e=this.state.cropState.get(this.identifier);if(e){if(t.width&&t.width>0){e.size.width=Math.round(t.width)}if(t.height&&t.height>0){e.size.height=Math.round(t.height)}this.state.cropState.set(this.identifier,e)}}changeHeight(t){const e=this.state.cropState.get(this.identifier);if(e){if(t){e.size.height=Math.round(t);this.state.cropState.set(this.identifier,e)}}}changeWidth(t){const e=this.state.cropState.get(this.identifier);if(e){if(t){e.size.width=Math.round(t);this.state.cropState.set(this.identifier,e)}}}changePositionX(t,e){const i=this.state.cropState.get(this.identifier);if(i&&t<=e-this.minCropSize&&t>=0){i.position.x=Math.round(t);this.state.cropState.set(this.identifier,i);return true}return false}changePositionY(t,e){const i=this.state.cropState.get(this.identifier);if(i&&t<=e-this.minCropSize&&t>=0){i.position.y=Math.round(t);this.state.cropState.set(this.identifier,i);return true}return false}changePosition(t,e){const i=this.state.cropState.get(this.identifier);if(i){if(t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0){i.position.x=Math.round(t.x);i.position.y=Math.round(t.y);this.state.cropState.set(this.identifier,i);return true}}return false}changeLockResolution(t){const e=this.state.cropState.get(this.identifier);if(e){e.lockResolution=t!==void 0?t:!e.lockResolution;this.state.cropState.set(this.identifier,e)}}changeForceDimensions(t){const e=this.state.cropState.get(this.identifier);if(e){e.forceDimensions=t;this.state.cropState.set(this.identifier,e)}}setRotation(t){this.state.rotationInDegrees=t}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=false;this.state.flipVertically=false}updateFlip({flipHorizontally:t,flipVertically:e}){this.state.flipHorizontally=t;this.state.flipVertically=e}setOutputRotation(t){this.state.outputRotation=t}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:t,height:e}=this.defaults.maxCropMaskSize;return new b(t/2,e/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:se.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:se.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:se.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:se.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:se.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:se.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:se.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:se.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:se.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};s([M],N.prototype,"state",2);s([h],N.prototype,"changeIdentifier",1);s([h],N.prototype,"changeRatio",1);s([h],N.prototype,"changeSize",1);s([h],N.prototype,"changeHeight",1);s([h],N.prototype,"changeWidth",1);s([h],N.prototype,"changePositionX",1);s([h],N.prototype,"changePositionY",1);s([h],N.prototype,"changePosition",1);s([h],N.prototype,"changeLockResolution",1);s([h],N.prototype,"changeForceDimensions",1);s([h],N.prototype,"setRotation",1);s([h],N.prototype,"resetRotation",1);s([h],N.prototype,"resetOutputRotation",1);s([h],N.prototype,"resetFlip",1);s([h],N.prototype,"updateFlip",1);s([h],N.prototype,"setOutputRotation",1);s([h],N.prototype,"flipHorizontally",1);s([h],N.prototype,"flipVertically",1);s([p],N.prototype,"flipCenter",1);s([p],N.prototype,"isFlippedHorizontal",1);s([p],N.prototype,"isFlippedVertical",1);s([p],N.prototype,"identifier",1);s([p],N.prototype,"height",1);s([p],N.prototype,"width",1);s([p],N.prototype,"position",1);s([p],N.prototype,"ratio",1);s([p],N.prototype,"size",1);s([p],N.prototype,"x",1);s([p],N.prototype,"y",1);s([p],N.prototype,"lockResolution",1);s([p],N.prototype,"forceDimensions",1);s([p],N.prototype,"selectedCrop",1);s([p],N.prototype,"rotationInDegrees",1);s([p],N.prototype,"outputRotation",1);var cl=class{constructor(t){this.transforms={output:JSON.stringify(Pe.IDENTITY),preview:JSON.stringify(Pe.IDENTITY)};this.setFrameOpacity=t=>{this.frameOpacity=t;if(this.entered&&this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(0)}};this.setOverlayOpacity=t=>{this.overlayOpacity=t;if(this.entered&&this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(0)}};this.editor=t;this.overlayOpacity=0;this.frameOpacity=0;this.entered=false}onLeave(){const{flipHorizontally:t,flipVertically:e,rotation:i,outputRotation:r}=this.transformToolStore.rotateFlipState;this.entered=false;if(this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(this.overlayOpacity)}if(this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(this.frameOpacity)}this.editor.engine.setWatermarkOpacity(1);const n=this.editor.previewToWorld(new b(this.transformToolStore.leftTopRespectFlip).add(new b(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new b(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),true);const a=this.engineMediator.preview.container;const{outputContainer:l}=this.editor;l.setResolution(E(this.transformToolStore.localOutputImageSize));l.setData({flipVertically:e,flipHorizontally:t});const c=a.getScale();this.editor.overlayToolStore.correctOverlayFlip();this.saveTransforms();let d=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:S,defaultImageSize:x}=this.transformToolStore;const w=this.transformToolStore.maxCropMaskSize;const T={height:S.height*x.height/w.height,width:S.width*x.width/w.width};d=T.width/this.transformToolStore.localOutputImageSize.width}const u=Math.abs(c.x);const m=d/(u/this.transformToolStore.defaultScale);const g={x:m,y:m};const v=-(i-r);l.setTransform({scale:g,position:n,rotation:v});this.editor.engineMediator.preview.updateTransform(0,false);this.editor.scale.setInitialTransform();this.editor.spriteStore.updateCanvasControls();this.editor.focusToolStore.updateCanvasControls()}resetTransforms(t){this.transforms=t}onEnter(){this.entered=true;if(this.editor.overlayToolStore.identifier!=="identity"){this.overlayOpacity=this.editor.overlayToolStore.opacity;this.editor.overlayToolStore.changeOpacity(0)}if(this.editor.frameToolStore.identifier!=="identity"){this.frameOpacity=this.editor.frameToolStore.opacity;this.editor.frameToolStore.changeOpacity(0)}this.editor.engine.setWatermarkOpacity(0);this.editor.scale.setScaleToDefault();const t=this.engineMediator.preview.container;const{outputContainer:e}=this.editor;const i=JSON.parse(this.transforms.preview);e.setResolution(E(this.transformToolStore.defaultImageSize));t.setTransform(i);e.setTransform(JSON.parse(this.transforms.output));const r=i.scale;e.setData({flipVertically:false,flipHorizontally:false});this.transformToolStore.transformStore.updateFlip({flipVertically:r.y<0,flipHorizontally:r.x<0});this.engineMediator.preview.savePreviewTransform(i);const{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(t,e=true){const{width:i,height:r}=this.editor.engineMediator.image.container.getBounds();const n=Bc(t)?{width:r,height:i}:{width:i,height:r};this.editor.outputContainer.rotate(t,n);this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:a}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(a);pt(()=>{this.editor.scale.setInitialTransform();const l=this.getScaleWithFlip(a);this.engineMediator.preview.container.setScale(l);this.transformToolStore.setCropDefaults(true);this.transformToolStore.updateCropMask()});if(e){this.editor.render()}}applyPreviewTransform(){const{rotation:t,flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState;const r=this.editor.scale.getPositionWithOffset();const n=this.getScaleWithFlip();let a=t;if(e){a=Rs(a)}if(i){a=Rs(a)}const l={position:r,rotation:a,scale:n};this.engineMediator.preview.savePreviewTransform(l);this.engineMediator.preview.container.setTransform(l)}getScaleWithFlip(t=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState;const r=e?-1:1;const n=i?-1:1;const a=this.editor.scale.calculateScale(t);return{x:a*r,y:a*n}}saveTransforms(){const t=JSON.stringify(this.engineMediator.preview.container.getTransform());const e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}}saveTransformsBasedOnFlip(){const t=this.engineMediator.preview.container.getTransform();const{scale:e}=t;const{flipVertically:i,flipHorizontally:r}=this.editor.outputContainer.getData();const n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify({...t,scale:{x:r?-e.x:e.x,y:i?-e.y:e.y}}),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}};var dl=class{constructor(t){this.store=t;this.initialState={};this.state={}}init(){this.initialState=this.store.serializableState;this.state={...this.initialState}}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,xt.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}};var Qp="identity";var Go=class{constructor(t){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=M.box(false);this.minCropSize=0;this.transformHistory=new dl(this);this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=t=>{if(!t.trim())return false;let e=this.editor.configStore.config.assetBaseUrl;const{length:i}=e;if(e[i-1]!=="/"){e+="/"}if(`${e}transform`===t){return false}const r=new Image;try{r.src=t;return true}catch(n){return false}};this.reset=()=>{this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.resetCrop();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);const t=this.editor.outputContainer.getRotation();if(t!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();this.editor.render();this.trackChanges()};this.changeLocalOutputSize=t=>{this.localOutputSize.height=Math.round(t.height);this.localOutputSize.width=Math.round(t.width);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(t.width),height:Math.round(t.height)})};this.changeDefaultScale=t=>{this.defaults.scale=t};this.changeLocalOutputHeight=t=>{this.localOutputSize.height=Math.round(t)};this.changeLocalOutputWidth=t=>{this.localOutputSize.width=Math.round(t)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution();this.trackChanges()};this.rotateClockwise=()=>{const t=this.editor.outputContainer.getRotation();const e=this.isFlippedVertical?Bs:Ls;this.rotateOutputContainer(e(t))};this.rotateAntiClockwise=()=>{const t=this.editor.outputContainer.getRotation();const e=this.isFlippedVertical?Ls:Bs;this.rotateOutputContainer(e(t))};this.flipHorizontally=(t=true)=>{this.transformStore.flipHorizontally();this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal);this.transformRender(t);if(t){this.trackChanges()}};this.flipVertically=(t=true)=>{this.transformStore.flipVertically();this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical);this.transformRender(t);if(t){this.trackChanges()}};this.applyDefaultCrop=(t=false)=>{if(this.identifier==="identity"){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,t)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,true)};this.onLeftTop=({x:t,y:e})=>{const i=this.getRatio();const r=this.rightBottom;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.min(Math.max(0,t),r.x-n.width);const c=Math.min(Math.max(0,e),r.y-n.height);const d=r.x-l;const u=r.y-c;const m={width:Math.max(this.minCropSize,Math.min(d,a.width-l)),height:Math.max(this.minCropSize,Math.min(u,a.height-c))};if(i==="*"){if(this.changePosition({x:l,y:c})){this.changeCropAndOutputSize(m)}}else{const g=this.proportionalSize(i,m);const v=new b(r).subtract({x:g.width,y:g.height});if(this.changePosition(v)){this.changeCropAndOutputSize(g,i)}}};this.onLeftBottom=({x:t,y:e})=>{const i=this.getRatio();const r=this.rightTop;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.min(Math.max(0,t),r.x-n.width);const c=Math.max(0,e,r.y+n.height);const d=r.x-l;const u=c-r.y;const m={width:Math.max(1,Math.min(d,a.width-l)),height:Math.max(1,Math.min(u,a.height-r.y))};if(i==="*"){if(this.changePositionX(l)){this.changeCropAndOutputSize(m)}}else{const g=this.proportionalSize(i,m);if(this.changePositionX(r.x-g.width)){this.changeCropAndOutputSize(g,i)}}};this.onRightTop=({x:t,y:e})=>{const i=this.getRatio();const r=this.leftBottom;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.max(0,t,r.x+n.width);const c=Math.min(Math.max(0,e),r.y-n.height);const d=l-r.x;const u=r.y-c;const m={width:Math.max(1,Math.min(d,a.width-r.x)),height:Math.max(1,Math.min(u,a.height-c))};if(i==="*"){if(this.changePositionY(c)){this.changeCropAndOutputSize(m)}}else{const g=this.proportionalSize(i,m);if(this.changePositionY(r.y-g.height)){this.changeCropAndOutputSize(g,i)}}};this.onRightBottom=({x:t,y:e})=>{const i=this.getRatio();const r=this.leftTop;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.max(0,t,r.x+n.width);const c=Math.max(0,e,r.y+n.height);const d=l-r.x;const u=c-r.y;const m={width:Math.max(1,Math.min(d,a.width-r.x)),height:Math.max(1,Math.min(u,a.height-r.y))};if(i==="*"){this.changeCropAndOutputSize(m)}else{const g=this.proportionalSize(i,m);this.changeCropAndOutputSize(g,i)}};this.onPixelWidth=t=>{const e=JSON.stringify(E(this.localOutputSize));const i=this.entityManager.items.find(n=>n.identifier===this.identifier);const r=this.defaults.imageSize;if(i&&i.ratio){let n=t;let a=this.localOutputSize.height;let{ratio:l}=i;if(l==="*"&&this.lockResolution){l=this.localOutputSize.width/this.localOutputSize.height}if(l==="*"&&!this.lockResolution){n=Math.max(Math.min(t,r.width),this.minCropSize);this.changeLocalOutputWidth(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(n),height:Math.round(a)})}else{const c=Go.placeCropMask(l,r);n=Math.max(Math.min(n,c.width),this.minCropSize);a=n/l;this.changeLocalOutputSize({height:a,width:n})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(e));return Math.round(n)}return t};this.onPixelHeight=t=>{const e=JSON.stringify(E(this.localOutputSize));const i=this.entityManager.items.find(n=>n.identifier===this.identifier);const r=this.defaults.imageSize;if(i&&i.ratio){let n=t;let a=this.localOutputSize.width;let{ratio:l}=i;if(l==="*"&&this.lockResolution){l=this.localOutputSize.width/this.localOutputSize.height}if(l==="*"&&!this.lockResolution){n=Math.max(Math.min(t,r.height),this.minCropSize);this.changeLocalOutputHeight(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(a),height:Math.round(n)})}else{const c=Go.placeCropMask(l,r);n=Math.max(Math.min(n,c.height),this.minCropSize);a=n*l;this.changeLocalOutputSize({height:n,width:a})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(e));return Math.round(n)}return t};this.setFrameOpacity=t=>{this.transformations.setFrameOpacity(t)};this.setOverlayOpacity=t=>{this.transformations.setOverlayOpacity(t)};this.closestRatioReducer=t=>(e,i)=>{if(i===null)return-1;return Math.abs(t-e.ratio)<Math.abs(t-i.ratio)?-1:1};this.closestDimensionsReducer=t=>(e,i)=>{if(i===null)return-1;const r=Math.abs(e.dimensions.x/e.dimensions.y);const n=Math.abs(i.dimensions.x/i.dimensions.y);if(r===n){return e.dimensions.x*e.dimensions.y>i.dimensions.x*i.dimensions.y?-1:1}return Math.abs(t-r)<Math.abs(t-n)?-1:1};this.getMatchingItem=()=>{const t=this.entityManager.items.findIndex(c=>c.identifier==="imgly_transform_common_custom");if(t!==-1)return this.entityManager.items[t];const e=this.entityManager.items.findIndex(c=>c.ratio==="*");if(e!==-1)return this.entityManager.items[e];const i=E(this.editor.outputContainer.getResolution());const r=Math.abs(i.width/i.height);const[n]=this.entityManager.items.filter(c=>c.ratio&&typeof c.ratio==="number").sort(this.closestRatioReducer(r));const[a]=this.entityManager.items.filter(c=>c.dimensions&&!c.ratio).sort(this.closestDimensionsReducer(r));if(!n||!a||!n.ratio&&!a.dimensions){return this.entityManager.items[0]}if(!a||!a.dimensions)return n;if(!n||!n.ratio)return a;const l=Math.abs(a.dimensions.x/a.dimensions.y);if(l===n.ratio)return n;return Math.abs(r-n.ratio)<Math.abs(r-l)?n:a};this.getTransform=t=>{let e=this.entityManager.items.find(i=>i.identifier===t);if(!e){e=this.getMatchingItem()}return e};this.editor=t;this.selectedCategory=Qp;this.transformStore=new N(t,this.defaults);this.transformations=new cl(t);const{enableRotation:e,enableFlip:i,...r}=this.config;const n=this.editor.assetProvider.getAssets("transform");this.entityManager=new lt(n,{...r,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("transform")});this.rect=new at(this.editor,this.transformStore,"topLeft",false,false);this.rectForUi=new at(this.editor,this.transformStore,"topLeft",false,true);this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(t){return t*Math.PI/180}static placeCropMask(t,e){if(e.height*t>e.width){const r=e.width/t;return{height:r,width:e.width,yChanged:true}}const i=e.height*t;return{height:e.height,width:i,yChanged:false}}changeIdentifier(t,e=false){this.transformStore.changeIdentifier(t);const i=this.getCropMask(t,this.defaults.imageSize);if(i){this.transformStore.changeRatio(i.ratio);this.changeLocalOutputSize(i);this.updatePreviewSizeWRTImageSize();if(i.yChanged!==void 0){this.updateInitialCropMaskPosition(i.yChanged)}if(i.dimensions){this.changeLocalOutputSize({width:i.dimensions.x,height:i.dimensions.y})}if(e){this.trackChanges()}}}setDragMode(t){this.dragMode.set(t)}getCropMask(t,e){const i=this.getTransform(t);if(i){const{ratio:r,forceDimensions:n,lockDimensions:a,dimensions:l=null}=i;if(n){this.transformStore.changeForceDimensions(n)}if(a){this.transformStore.changeLockResolution(a)}if(r){switch(r){case"*":this.changePosition({x:0,y:0});return{...e,yChanged:void 0,ratio:"*",dimensions:l};default:return{...Go.placeCropMask(i.ratio,e),ratio:i.ratio,dimensions:l}}}else{const{x:c,y:d}=i.dimensions;return{...Go.placeCropMask(c/d,e),ratio:null,dimensions:l}}}return null}setCropDefaults(t=false){const e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);const i=this.editor.getPreviewSize();const{position:r}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(i);this.setDefaultCropPosition({x:r.x-i.width/2,y:r.y-i.height/2});this.changeDefaultScale(this.editor.scale.defaultScale);if(!t){this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition;this.unRotatedDefaults.scale=this.defaultScale}}setDefaultImageSize(t){this.defaults.imageSize={...E(t)};if(!this.lockResolution){this.localOutputSize={...E(t)}}}setMaxCropSize(t){this.defaults.maxCropMaskSize.height=t.height;this.defaults.maxCropMaskSize.width=t.width}setDefaultCropPosition(t){this.defaults.cropMaskPosition.x=t.x;this.defaults.cropMaskPosition.y=t.y}resetCrop(){this.state.cropState.clear();this.transformStore.changeIdentifier("identity")}toggleCategorySelection(t){this.selectedCategory=this.selectedCategory===t?Qp:t}pureReset(){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);this.engineMediator.output.applyNewImageTransform();this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const t=JSON.stringify(this.engineMediator.preview.container.getTransform());const e=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:t,output:e})}changePosition(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)}changePositionX(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)}changePositionY(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:t,height:e},i,r=true){this.transformStore.changeWidth(t);this.transformStore.changeHeight(e);if(!this.lockResolution){const{height:n,width:a}=this.defaults.maxCropMaskSize;const{height:l,width:c}=this.defaults.imageSize;let d=l/n*e;const u=c/a*t;if(i){d=u/i}if(r){this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(u),height:Math.round(d)})}if(e>=this.minCropSize){this.changeLocalOutputHeight(d)}if(t>=this.minCropSize){this.changeLocalOutputWidth(u)}}}transformRender(t=true){this.transformations.applyPreviewTransform();if(t){this.editor.render()}}addSnapshot(){if(this.transformHistory.isEqual())return;this.editor.addSnapshot({[f.TRANSFORM]:this.serializableState},L.EDIT,"Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){const{flipHorizontally:t,flipVertically:e}=this.rotateFlipState;const{identifier:i,rotationInDegrees:r}=this;const n=Ps(r);const a=As(zs(this.editor.engineMediator.output.container.getRotation())+r);const{start:l,end:c}=this.convertUIToOperationOptions(n,a);return{flipHorizontally:t,flipVertically:e,rotation:n,start:l,end:c,identifier:i,outputRotation:a}}getStartEndForOperation(t){const{leftTop:e,rightBottom:i,maxCropMaskSize:r}=this;const n=e.y;const a=e.x;const l=i.x;const c=i.y;switch(t){case 270:return{leftTop:{x:r.height-c,y:a},rightBottom:{x:r.height-n,y:l}};case 180:return{leftTop:{x:r.width-l,y:r.height-c},rightBottom:{x:r.width-a,y:r.height-n}};case 90:return{leftTop:{x:n,y:r.width-l},rightBottom:{x:c,y:r.width-a}};default:return{leftTop:{x:a,y:n},rightBottom:{x:l,y:c}}}}getStartEndForUI(t,e,i){const{maxCropMaskSize:r}=this;const n=e.y;const a=e.x;const l=i.x;const c=i.y;switch(t){case 90:return{leftTop:{x:r.width-c,y:a},rightBottom:{x:r.width-n,y:l}};case 180:return{leftTop:{x:r.width-l,y:r.height-c},rightBottom:{x:r.width-a,y:r.height-n}};case 270:return{leftTop:{x:n,y:r.height-l},rightBottom:{x:c,y:r.height-a}};default:return{leftTop:{x:a,y:n},rightBottom:{x:l,y:c}}}}convertOperationOptionsToUI({start:t,end:e,rotation:i,outputRotation:r}){const n=r===90||r===270;const a=n?b.fromSize(this.defaultImageSize).swapped:b.fromSize(this.defaultImageSize);const l=Math.cos(i);const c=Math.sin(i);const d=this.calculateScale(i);const u=new b(Math.min(t.x,e.x),Math.min(t.y,e.y));const m=new b(Math.max(t.x,e.x),Math.max(t.y,e.y));const g=m.subtract(u).divide(2);const v=u.add(g).multiply(a);const S=v.subtract(a.multiply(.5));const x=new b(S.x*l-S.y*c,S.x*c+S.y*l).multiply(d);const w=a.multiply(.5).add(x);const T=w.divide(a);const A=T.subtract(g.multiply(d));const F=T.add(g.multiply(d));const H=n?b.fromSize(this.maxCropMaskSize).swapped:b.fromSize(this.maxCropMaskSize);const X=A.multiply(H);const z=F.multiply(H);const{leftTop:j,rightBottom:Y}=this.getStartEndForUI(r,X,z);return{start:new b(j),end:new b(Y)}}convertUIToOperationOptions(t,e){const i=e===90||e===270;const r=i?b.fromSize(this.defaultImageSize).swapped:b.fromSize(this.defaultImageSize);const n=i?b.fromSize(this.maxCropMaskSize).swapped:b.fromSize(this.maxCropMaskSize);const a=Math.cos(-t);const l=Math.sin(-t);const c=this.calculateScale(t,i);const{leftTop:d,rightBottom:u}=this.getStartEndForOperation(e);const m=new b(d).divide(n);const g=new b(u).divide(n);const v=g.subtract(m).divide(2);const S=m.add(v).multiply(r);const x=S.subtract(r.multiply(.5));const w=new b(x.x*a-x.y*l,x.x*l+x.y*a).divide(c);const T=r.multiply(.5).add(w);const A=T.divide(r);const F=A.subtract(v.divide(c));const H=A.add(v.divide(c));return{start:F,end:H}}calculateScale(t,e=false){const i=e?b.fromSize(this.defaultImageSize).swapped:b.fromSize(this.defaultImageSize);const r=new b(Math.abs(i.x*Math.cos(t))+Math.abs(i.y*Math.sin(t)),Math.abs(i.x*Math.sin(t))+Math.abs(i.y*Math.cos(t)));const n=i.subtract(r.clone()).divide(2).abs;return n.y>n.x?n.y*2/i.y+1:n.x*2/i.x+1}updateStateFromSerialization(t){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.setDefaultAngle(0);if(this.editor.outputContainer.getRotation()!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const e=Math.round(zs(t.rotation));this.transformStore.setRotation(e>180?e-360:e);this.transformations.rotateOutputContainer(Ps(As(t.outputRotation||zc.Top)));if(t.identifier){this.transformStore.changeIdentifier(t.identifier)}if(t.start&&t.end){if(t.end.x===0||t.end.y===0){t.end.x=1;t.end.y=1}const{start:i,end:r}=this.convertOperationOptionsToUI({start:new b(t.start),end:new b(t.end),rotation:t.rotation,outputRotation:t.outputRotation});this.changePositionX(i.x);this.changePositionY(i.y);const n=r.x-i.x;const a=r.y-i.y;this.transformStore.changeSize({width:n,height:a});const{maxCropMaskSize:l,imageSize:c}=this.defaults;const d={height:a*c.height/l.height,width:n*c.width/l.width};this.changeLocalOutputSize(d)}if(t.flipHorizontally){this.flipHorizontally(false)}if(t.flipVertically){this.flipVertically(false)}this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(t){this.defaultAngle=t}updateCanvasControls(t){const e=E(this.cropMaskPosition);const i=E(this.cropMaskSize);const r=E(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:r.height*i.height/t.height,width:r.width*i.width/t.width},void 0,false);this.changePosition({y:r.height*e.y/t.height,x:r.width*e.x/t.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter();this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(t){this.transformStore.setRotation(t);this.transformRender()}async rotateOutputContainer(t,e=true){this.setDragMode(true);this.transformations.rotateOutputContainer(t,e);await this.editor.wait();this.setDragMode(false)}applyInitialCrop(){const{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,false)}clickableCanvas(t){this.editor.clickableCanvas(t)}proportionalSize(t,e,i=this.defaults.maxCropMaskSize,r=this.minCropSize){let n=e.height*t;let{height:a}=e;if(n>i.width||n<r||a<r){n=e.width;a=e.width/t}return{width:Math.round(n),height:Math.round(a)}}checkAndAddSnapshot(t){const e=E(this.localOutputSize);if(t.width!==e.width||t.height!==e.height){this.trackChanges()}}updateInitialCropMaskPosition(t){const{cropMaskSize:e}=this;const i=this.defaults.maxCropMaskSize;if(t){this.changePosition({x:0,y:Math.abs(i.height-e.height)/2})}else{this.changePosition({x:Math.abs(i.width-e.width)/2,y:0})}}updatePreviewSizeWRTImageSize(){const t=E(this.localOutputSize);const e=E(this.defaults.imageSize);const i=E(this.defaults.maxCropMaskSize);const r={height:i.height*t.height/e.height,width:i.width*t.width/e.width};this.transformStore.changeSize(r)}getScaleWithFlip(t=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(t)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:t,flipVertically:e,rotationInDegrees:i,outputRotation:r}=this.transformStore.state;return{flipHorizontally:t,flipVertically:e,rotation:Go.inRadians(i),outputRotation:r}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[f.TRANSFORM]}get locale(){return this.editor.configStore.locale[f.TRANSFORM]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const t=this.getRatio();if(t==="*"||t===1){return{width:this.minCropSize,height:this.minCropSize}}if(t>1){return{width:this.minCropSize*t,height:this.minCropSize}}return{width:this.minCropSize,height:this.minCropSize*t}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio")){if(this.lockResolution){return this.localOutputWidth/this.localOutputHeight}return t.ratio}const{x:e,y:i}=t.dimensions;return e/i}return"*"}};var k=Go;s([M],k.prototype,"selectedCategory",2);s([M],k.prototype,"defaults",2);s([M],k.prototype,"localOutputSize",2);s([h],k.prototype,"changeIdentifier",1);s([h],k.prototype,"setDragMode",1);s([h],k.prototype,"setCropDefaults",1);s([h],k.prototype,"setDefaultImageSize",1);s([h],k.prototype,"setMaxCropSize",1);s([h],k.prototype,"setDefaultCropPosition",1);s([h],k.prototype,"resetCrop",1);s([h],k.prototype,"toggleCategorySelection",1);s([h],k.prototype,"pureReset",1);s([h],k.prototype,"reset",2);s([h],k.prototype,"changePosition",1);s([h],k.prototype,"changePositionX",1);s([h],k.prototype,"changePositionY",1);s([h],k.prototype,"changeCropAndOutputSize",1);s([h],k.prototype,"onLeave",1);s([h],k.prototype,"onEnter",1);s([h],k.prototype,"changeLocalOutputSize",2);s([h],k.prototype,"changeDefaultScale",2);s([h],k.prototype,"changeLocalOutputHeight",2);s([h],k.prototype,"changeLocalOutputWidth",2);s([h],k.prototype,"changeLockResolution",2);s([h],k.prototype,"setRotation",1);s([h],k.prototype,"rotateClockwise",2);s([h],k.prototype,"rotateAntiClockwise",2);s([h],k.prototype,"rotateOutputContainer",1);s([h],k.prototype,"flipHorizontally",2);s([h],k.prototype,"flipVertically",2);s([h],k.prototype,"applyDefaultCrop",2);s([h],k.prototype,"applyInitialCrop",1);s([h],k.prototype,"updateCropMask",2);s([h],k.prototype,"clickableCanvas",1);s([h],k.prototype,"onLeftTop",2);s([h],k.prototype,"onLeftBottom",2);s([h],k.prototype,"onRightTop",2);s([h],k.prototype,"onRightBottom",2);s([h],k.prototype,"proportionalSize",1);s([h],k.prototype,"onPixelWidth",2);s([h],k.prototype,"onPixelHeight",2);s([h],k.prototype,"updateInitialCropMaskPosition",1);s([h],k.prototype,"updatePreviewSizeWRTImageSize",1);s([p],k.prototype,"cropState",1);s([p],k.prototype,"identifier",1);s([p],k.prototype,"ratio",1);s([p],k.prototype,"height",1);s([p],k.prototype,"width",1);s([p],k.prototype,"localOutputImageSize",1);s([p],k.prototype,"localOutputHeight",1);s([p],k.prototype,"localOutputWidth",1);s([p],k.prototype,"lockResolution",1);s([p],k.prototype,"forceDimensions",1);s([p],k.prototype,"rotationInDegrees",1);s([p],k.prototype,"outputRotation",1);s([p],k.prototype,"isDragMode",1);s([p],k.prototype,"rotateFlipState",1);s([p],k.prototype,"selectedCategoryIdentifier",1);s([p],k.prototype,"categories",1);s([p],k.prototype,"items",1);s([p],k.prototype,"config",1);s([p],k.prototype,"locale",1);s([p],k.prototype,"isOptionSelected",1);s([p],k.prototype,"leftTop",1);s([p],k.prototype,"leftBottom",1);s([p],k.prototype,"rightTop",1);s([p],k.prototype,"rightBottom",1);s([p],k.prototype,"isFlippedHorizontal",1);s([p],k.prototype,"isFlippedVertical",1);s([p],k.prototype,"leftTopRespectFlip",1);s([p],k.prototype,"leftBottomRespectFlip",1);s([p],k.prototype,"rightTopRespectFlip",1);s([p],k.prototype,"rightBottomRespectFlip",1);s([p],k.prototype,"cropMaskPosition",1);s([p],k.prototype,"cropMaskSize",1);s([p],k.prototype,"state",1);s([p],k.prototype,"defaultImageSize",1);s([p],k.prototype,"maxCropMaskSize",1);s([p],k.prototype,"minCropMaskSize",1);s([p],k.prototype,"defaultCropMaskPosition",1);s([p],k.prototype,"defaultScale",1);var th=Mo(Dc());var oy={};var pl="none";var iy={position:{x:0,y:0},rotation:0};var Sr=class{constructor(t){this.state=M.map(oy);this.selectedId=M.box(pl);this.editMode=M.box(false);this.dragMode=M.box(false);this.minLength=0;this.counter=0;this.addSticker=async(t,e=true)=>{await this.addStickerAsync(t,e)};this.addStickerAsync=async({spriteId:t,state:e,transform:i},r=true)=>{return new Promise((n,a)=>{i=this.getInitialTransform(i);const{identifier:l}=e;const c=this.editor.orderHelper.addSprite(l);this.editor.engine.addStickerFromAssets(l,this.editor.engineMediator.image.container,c).then(async d=>{if(t){d.setData({id:t})}const u=d.getID();this.container[u]=d;this.editor.orderHelper.renameSprite(l,u);const m=this.getSize(u);m.width*=d.getScale().x;m.height*=d.getScale().y;d.setPivot(.5,.5);let g;if(i.scale){g=i.scale}else if(i.size){g={x:i.size.width/m.width,y:i.size.height/m.height}}else{const w=this.editor.shortestOutputSide*.4;const T=Sr.magnitude(w)/Sr.sizeMagnitude(d.getSizeInWorldSpace());g={x:T,y:T}}const{flipHorizontally:v,flipVertically:S}=this.editor.outputContainer.getData();d.setFlipHorizontally(v);d.setFlipVertically(S);d.setTransform({position:i.position,scale:g,rotation:i.rotation});if(e.flipHorizontally!==void 0){d.setFlipHorizontally(e.flipHorizontally!==v)}if(e.flipVertically!==void 0){d.setFlipVertically(e.flipVertically!==S)}this.setContainerProperties(u,{...e});const x=d.getData();this.setInitialSpriteState(u,f.STICKER);this.stickerToolStore.setState(u,{...x,identifier:l});await this.editor.renderPromise();if(r){this.setId(u);this.addSnapshot(L.ADD,this.stickerLocale.add)}n()}).catch(d=>{console.error(d);a()})})};this.addText=async(t,e=true)=>{await this.addTextAsync(t,e)};this.addTextAsync=({spriteId:t,state:e,transform:i},r=true)=>{return new Promise((n,a)=>{i=this.getInitialTransform(i);const l=this.editor.orderHelper.addSprite(e.identifier);const c=this.editor.shortestOutputSide;const d={fontIdentifier:e.identifier,text:e.text,width:e.width||c*.6,fontSize:e.fontSize||c*.1,lineHeight:e.lineHeight,alignment:e.alignment,textColor:e.textColor,backgroundColor:e.backgroundColor};this.editor.engine.addTextWithFontLoading(d,this.editor.engineMediator.image.container,l).then(async u=>{if(t){u.setData({id:t})}const m=u.getID();this.container[m]=u;this.editor.orderHelper.renameSprite(e.identifier,m);const{flipHorizontally:g,flipVertically:v}=this.editor.outputContainer.getData();u.setFlipHorizontally(g);u.setFlipVertically(v);u.setPivot(.5,.5);u.setPosition(i.position);u.setRotation(i.rotation);this.setInitialSpriteState(m,f.TEXT);const S=u.getData();this.textToolStore.setState(m,{...S});await this.editor.renderPromise();if(r){this.setId(m);this.addSnapshot(L.ADD,this.textLocale.add)}n()}).catch(u=>{console.error(u);a()})})};this.addTextDesign=async(t,e=true,i=false)=>{await this.addTextDesignAsync(t,e,i)};this.addTextDesignAsync=({spriteId:t,state:e,transform:i},r=true,n=false)=>{return new Promise((a,l)=>{i=this.getInitialTransform(i);const c=this.editor.orderHelper.addSprite(e.identifier);const d=this.editor.shortestOutputSide;const u={width:e.width||d*.6,text:e.text,color:e.color,inverted:e.isInverted,seed:e.seed,padding:e.padding};this.editor.engine.addTextDesignAsync(e.identifier,u,this.editor.engineMediator.image.container,c).then(async m=>{if(t){if(n){this.pureRemoveSprite(t);this.textDesignToolStore.state.delete(t)}m.setData({id:t})}const g=m.getID();this.container[g]=m;this.editor.orderHelper.renameSprite(e.identifier,g);const{flipHorizontally:v,flipVertically:S}=this.editor.outputContainer.getData();m.setFlipHorizontally(v);m.setFlipVertically(S);m.setPivot(.5,.5);m.setPosition(i.position);m.setRotation(i.rotation);this.setInitialSpriteState(g,f.TEXT_DESIGN);const x=m.getData();this.textDesignToolStore.setState(g,{...x,identifier:e.identifier});await this.editor.renderPromise();if(r){this.setId(g);this.addSnapshot(L.ADD,this.textDesignLocale.add)}a()}).catch(m=>{console.error(m);l()})})};this.spriteLocalTransform=()=>{return{position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.setContainerProperties=(t,e,i=false)=>{this.container[t].setData(e);if(i){this.updatePositionAndSize()}this.editor.render()};this.setContainerPosition=(t,e)=>{this.container[t].setPosition(e)};this.pureRemoveSprite=t=>{this.editor.engine.removeContainer(this.container[t]);const e=this.container[t].getIndexInParent();if(e===-1){delete this.container[t];this.state.delete(t);this.editor.orderHelper.removeSprite(t);return true}return false};this.deleteSprite=(t=this.id)=>{const e=this.state.get(t);if(e.tool===f.STICKER){this.stickerToolStore.delete()}else if(e.tool===f.TEXT){this.textToolStore.delete()}else if(e.tool===f.TEXT_DESIGN){this.textDesignToolStore.delete()}};this.removeSprite=t=>{const e=this.pureRemoveSprite(t);if(e){this.selectLast();this.spriteSnapshot("delete");this.editor.render()}};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.spriteSnapshot=t=>{this.addSnapshot(L.EDIT,this.historyLocale[t])};this.addNewText=async(t,e)=>{if(this.textToolStore.doesTextAssetExist(e.identifier)){await this.addTextAsync({...t,state:e},false)}else{throw new me(e.identifier)}};this.addNewTextDesign=async(t,e)=>{if(this.textDesignToolStore.doesTextDesignAssetExist(e.identifier)){await this.addTextDesignAsync({...t,state:e},false)}else{throw new me(e.identifier)}};this.addNewSticker=async(t,e)=>{if(this.stickerToolStore.doesStickerAssetExist(e.identifier)){await this.addStickerAsync({...t,state:e},false)}else{throw new me(e.identifier)}};this.getSpriteHistoryState=()=>{const t=E(this.textToolStore.state);const e=E(this.textDesignToolStore.state);const i={common:E(this.state),[f.STICKER]:E(this.stickerToolStore.state),[f.TEXT]:t,[f.TEXT_DESIGN]:e,spriteIdList:Object.keys(this.container)};Object.keys(i.common).forEach(r=>{i.common[r].size=this.container[r].getSizeInWorldSpace();i.common[r].position=this.container[r].getPosition();i.common[r].order=this.container[r].getIndexInParent()});return i};this.updateStateFromSerialization=async(t,e,i)=>{if(e&&e.length){try{const r=await Promise.all(e.map(async({svg:n,raster:a,name:l,identifier:c})=>{const d=(n==null?void 0:n.data)?Ot.SVG:a.type;const u=`data:${d};base64,${(n==null?void 0:n.data)||a.data}`;const m=await Vn(u,150);return{stickerURI:u,thumbnailURI:m,name:l,type:d,identifier:c}}));await this.stickerToolStore.addCustomStickerAsset(r)}catch(r){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}await this.updateStateByHistoryState(t.spriteIdList,t,i)};this.updateStateFromHistory=async t=>{const e=Object.keys(this.container);const i=e.filter(r=>t.spriteIdList.indexOf(r)===-1);i.forEach(r=>{this.pureRemoveSprite(r)});await this.updateStateByHistoryState(t.spriteIdList,t,0)};this.serializableState=async()=>{const t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach(i=>{const{flipHorizontally:r,flipVertically:n}=this.editor.outputContainer.getData();const a=this.editor.outputContainer.getRotation();const l=n!==r?-t.common[i].rotation:t.common[i].rotation;t.common[i].rotation=n!==r?l+a:l-a});const e=await Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(async({identifier:i,type:r,stickerURI:n,name:a})=>{const l={identifier:i,name:a,raster:{data:"",type:Ot.JPEG}};if(r===Ot.SVG){l.svg={data:n.split(",")[1]}}if(r===Ot.JPEG||r===Ot.PNG||r===Ot.GIF){[,l.raster.data]=n.split(",");l.raster.type=r}else{const c=await Vn(n);[,l.raster.data]=c.split(",");l.raster.type=Ot.PNG}return l}));return{sprite:t,customStickers:e}};this.updateCanvasControls=()=>{Object.keys(this.container).forEach(t=>{this.updatePositionAndSize(t,true);const e=this.state.get(t);if(e){if(e.tool===f.TEXT){const i=this.getContainerProperties(t);this.textToolStore.changeSize(t,i)}else if(e.tool===f.TEXT_DESIGN){const i=this.getContainerProperties(t);this.textToolStore.changeWidth(i.width)}}})};this.setEditMode=t=>{if(this.currentSprite){if([f.TEXT,f.TEXT_DESIGN].indexOf(this.tool)!==-1){if(t){this.editor.modalStore.showTextEditModal()}else{this.editor.modalStore.hideModal()}this.editMode.set(t)}}};this.setDragMode=t=>{this.dragMode.set(t)};this.setPosition=t=>{const e=this.currentSprite;const i=this.container[this.id];if(e&&i){i.setPosition(this.editor.previewToWorld(t));const{position:r}=this.getSizePositionFromContainer();e.position.x=r.x;e.position.y=r.y;this.state.set(this.id,e);this.editor.render()}};this.setSize=t=>{const e=this.currentSprite;if(e){e.size.width=t.width;e.size.height=t.height;this.state.set(this.id,e)}};this.setRotation=t=>{const e=this.currentSprite;if(e){const{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData();const n=this.editor.outputContainer.getRotation();const a=qi({rotation:t,outputRotation:n,flipHorizontally:i,flipVertically:r});this.container[this.id].setRotation(a);e.rotation=this.container[this.id].getRotation();this.state.set(this.id,e);this.editor.render()}};this.onCanvasClick=t=>{if(!this.isEditMode){this.selectHighestOrderSprite(t)}};this.select=t=>{const e=this.state.get(t);if(e){const i=this.editor.activeStore.tool;if(i!==e.tool){this.editor.activeStore.selectTool(e.tool)}this.setId(t)}};this.selectLast=()=>{const t=this.editor.orderHelper.getLastSpriteId();if(t){this.select(t)}};this.selectNext=()=>{if(this.currentSprite){const t=this.container[this.id];const e=t.getIndexInParent();if(e){const i=Object.keys(this.container).find(r=>this.container[r].getIndexInParent()===e-1);if(i){this.select(i)}}}};this.deselect=()=>{this.setId(pl)};this.bringToFront=async t=>{const e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e);this.spriteSnapshot("order");await this.editor.render();this.counter+=1};this.flipHorizontally=t=>{const e=this.state.get(t);const i=this.container[t];i.setFlipHorizontally(!i.getFlipHorizontally());e.flipHorizontally=i.getFlipHorizontally();this.spriteSnapshot("flip");this.state.set(t,e);this.editor.render()};this.pureReset=()=>{this.deselect();Array.from(this.state.keys()).forEach(t=>{this.pureRemoveSprite(t)});this.stickerToolStore.pureReset();this.textToolStore.pureReset();this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=t=>{const e=this.editor.brushToolStore.containerId();t=t.filter(n=>n!==e);if(t.length<1){this.deselect();return}let i="";let r=0;t.forEach(n=>{const a=this.container[n];const l=a&&a.getIndexInParent()||0;if(l>=r){r=l;i=n}});this.select(i)};this.onCornerDrag=({x:t,y:e})=>{if(this.currentSprite){const i=new b(this.currentSprite.position);const r=new b(t,e);const n=r.subtract(i).magnitude;const a=this.getSize();const l=n*2/Sr.sizeMagnitude(a);if(n>this.minLength){if(this.isSpriteSticker){if(this.stickerToolStore.resizeMode!=="unrestricted"){this.setStickerSize({width:a.width*l,height:a.height*l})}else{const c=this.rotationWRTOutputRotation;const d=r.subtract(i);const u=Math.cos(c);const m=Math.sin(c);const g=Math.max(Math.abs(d.x*u*2+d.y*m*2),this.minLength);const v=Math.max(Math.abs(d.x*-m*2+d.y*u*2),this.minLength);this.setStickerSize({width:g,height:v})}}else if(this.isSpriteText){this.setTextSize(a.width*l)}else if(this.isSpriteTextDesign){this.setTextDesignScale(l)}}this.editor.render()}};this.onWidthDrag=({x:t,y:e})=>{const i=new b(this.currentSprite.position);const r=new b(t,e);const n=r.subtract(i).magnitude;const a=this.editor.previewToWorld(2*n);if(a>this.minLength){this.setContainerProperties(this.id,{width:a},true);if(this.isSpriteText){const l=this.getContainerProperties(this.id);this.textToolStore.changeWidth(l.width)}}};this.onPaddingDrag=({x:t,y:e})=>{if(this.isSpriteTextDesign){let i=this.getContainerProperties(this.id);const r=new b(this.currentSprite.position);const n=new b(t,e);const a=n.subtract(r).magnitude;const l=Math.max(this.editor.previewToWorld(a)-i.width/2,0);this.setContainerProperties(this.id,{padding:l},true);if(this.isSpriteTextDesign){i=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(i.padding)}}};this.correctTextFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();Object.values(this.container).forEach(i=>{if(i.type==="text"||i.type==="text-design"){i.setFlipHorizontally(t);i.setFlipVertically(e)}})};this.reverseTextHorizontally=t=>{Object.values(this.container).forEach(e=>{if(e.type==="text"||e.type==="text-design"){e.setFlipHorizontally(t)}})};this.reverseTextVertically=t=>{Object.values(this.container).forEach(e=>{if(e.type==="text"||e.type==="text-design"){e.setFlipVertically(t)}})};this.getOutputProperties=()=>{return this.editor.outputContainer.getData()};this.getContainerProperties=t=>{return this.container[t].getData()};this.getContainerTransform=t=>{return this.container[t].getTransform()};this.getDuplicateContainerTransform=t=>{const e=this.container[t].getTransform();const i=this.editor.shortestOutputSide*.1;const r=new b(e.position).add(new b(i,i));return{...e,position:r}};this.getDuplicateContainerFlip=t=>{const e=this.container[t].getFlipHorizontally();const i=this.container[t].getFlipVertically();return{flipHorizontally:e,flipVertically:i}};this.updatePositionAndSize=(t=this.id,e=false)=>{const{position:i,size:r}=this.getSizePositionFromContainer(t);const n=this.state.get(t);if(n){n.position.x=i.x;n.position.y=i.y;n.size.width=r.width;n.size.height=r.height;if(e){const a=this.container[t].getRotation();this.container[t].setRotation(a);n.rotation=this.container[t].getRotation()}this.state.set(t,n)}};this.getInitialTransform=t=>{const e=this.editor.outputToWorld(iy.position);if(!t){const i=this.editor.outputContainer.getRotation();return{rotation:i,position:e}}return{position:e,...t}};this.setInitialSpriteState=(t,e)=>{const i=this.container[t];const{position:r,size:n}=this.getSizePositionFromContainer(t);const a=i.getRotation();const l=e!==f.STICKER?false:i.getFlipHorizontally();const c=e!==f.STICKER?false:i.getFlipVertically();this.state.set(t,{tool:e,position:r,rotation:a,size:n,flipHorizontally:l,flipVertically:c})};this.setStickerSize=t=>{const e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));const i=this.currentSprite;if(i){i.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace());this.state.set(this.id,i)}};this.setTextSize=t=>{let e=this.getContainerProperties(this.id);const i={width:this.editor.previewToWorld(t)};const r=i.width/e.width;const n={fontSize:Math.round(e.fontSize*r)};const a=this.isSpriteText?{...i,...n}:i;if(i.width>this.minLength&&n.fontSize){this.setContainerProperties(this.id,a,true);e=this.getContainerProperties(this.id);this.textToolStore.changeFontSize(e.fontSize,true);this.textToolStore.changeWidth(e.width)}};this.setTextDesignScale=t=>{let e=this.getContainerProperties(this.id);const i=e.width*t;if(i>this.minLength){this.setContainerProperties(this.id,{width:i},true);const{width:r}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(r);e=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(e.padding)}};this.getSizePositionFromContainer=(t=this.id)=>{const e=this.container[t];if(e){const i=this.editor.worldToPreview(e.getPosition());const r=this.editor.worldSizeToPreview(e.getSizeInWorldSpace());return{position:i,size:r}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(t=this.id)=>{const e=this.container[t];if(e){return this.editor.worldSizeToPreview(e.getSizeInWorldSpace())}return{width:0,height:0}};this.editor=t;this.container={};this.stickerToolStore=new V(t);this.textToolStore=new O(t);this.textDesignToolStore=new U(t);this.rect=new at(this.editor,this);this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(t,e){return new b(t,e||t).magnitude}static sizeMagnitude(t){return Math.sqrt(t.width*t.width+t.height*t.height)}async updateStateByHistoryState(t,e,i){await(0,th.default)(t,async r=>{const n=e.common[r];if(!n)return;if(this.state.get(r)){this.updateExistingItem(r,e)}else{await this.addNewItem(r,e)}});t.forEach(r=>{const n=e.common[r];const a=this.container[r];if(!n||!a)return;a.setIndexInParent(n.order+i)});this.counter+=1}async addNewItem(t,e){const i=e.common[t];const r=i.size?{width:this.editor.worldToPreview(i.size.width),height:this.editor.worldToPreview(i.size.height)}:void 0;const{flipHorizontally:n,flipVertically:a}=this.editor.outputContainer.getData();const l=this.editor.outputContainer.getRotation();const c=a!==n?i.rotation-l:i.rotation+l;const d=a!==n?-c:c;const u={spriteId:t,transform:{size:r,position:new b(i.position),rotation:d}};if(e.text[t]){const m=e.text[t];const g=this.textToolStore.validFontWithConfig(m.identifier);m.identifier=g==null?void 0:g.identifier;await this.addNewText(u,m)}if(e.textdesign[t]){await this.addNewTextDesign(u,e.textdesign[t])}if(e.sticker[t]){await this.addNewSticker(u,{...e.sticker[t],flipHorizontally:i.flipHorizontally,flipVertically:i.flipVertically})}}updateExistingItem(t,e){const i=e.common[t];const r=this.state.get(t);this.state.set(t,r);const n=this.container[t];n.setPosition(new b(i.position));n.setRotation(i.rotation);r.rotation=n.getRotation();if(i.flipHorizontally!==void 0){n.setFlipHorizontally(i.flipHorizontally)}if(i.flipVertically!==void 0){n.setFlipVertically(i.flipVertically)}if(e.text[t]){const a=e.text[t];this.textToolStore.updateStateFromHistory(t,{...a,fontIdentifier:a.identifier})}if(e.textdesign[t]){const a=e.textdesign[t];this.textDesignToolStore.updateStateFromHistory(t,{...a,inverted:a.isInverted})}if(e.sticker[t]){n.setSizeInWorldSpace(i.size);this.stickerToolStore.updateStateFromHistory(t,e.sticker[t])}this.updatePositionAndSize(t)}get currentSprite(){if(this.isSpriteSelected){return this.state.get(this.id)}return void 0}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==pl}get position(){if(this.currentSprite){return this.currentSprite.position}return void 0}get tool(){if(this.currentSprite){return this.currentSprite.tool}return void 0}get size(){if(this.currentSprite){return this.currentSprite.size}return void 0}get rotation(){if(this.currentSprite){return this.currentSprite.rotation}return void 0}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();const i=this.editor.outputContainer.getRotation();return qi({rotation:this.currentSprite.rotation-i,flipHorizontally:t,flipVertically:e})}return void 0}get flipHorizontal(){if(this.currentSprite){return this.currentSprite.flipHorizontally}return void 0}get isSpriteSticker(){return this.tool===f.STICKER}get isSpriteText(){return this.tool===f.TEXT}get isSpriteTextDesign(){return this.tool===f.TEXT_DESIGN}get isOnTop(){const t=this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){const{x:t,y:e}=this.currentSprite.position;const{height:i,width:r}=this.currentSprite.size;return{x:Math.round(t-r/2),y:Math.round(e-i/2)}}return void 0}get currentRect(){if(this.currentSprite){return this.rect}return void 0}get leftTopPosition(){if(this.currentSprite){return this.rect.leftTop}return void 0}get leftBottomPosition(){if(this.currentSprite){return this.rect.leftBottom}return void 0}get leftMidPosition(){if(this.currentSprite){return this.rect.leftMid}return void 0}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:t}=this.rect;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}return void 0}get rightTopPosition(){if(this.currentSprite){return this.rect.rightTop}return void 0}get rightBottomPosition(){if(this.currentSprite){return this.rect.rightBottom}return void 0}get rightMidPosition(){if(this.currentSprite){return this.rect.rightMid}return void 0}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:t}=this.rect;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}return void 0}get leftBottomHandlePosition(){if(this.currentSprite){return this.rect.leftBottomHandle}return void 0}get rightBottomHandlePosition(){if(this.currentSprite){return this.rect.rightBottomHandle}return void 0}get historyLocale(){if(this.isSpriteSticker){return this.stickerLocale}if(this.isSpriteText){return this.textDesignLocale}return this.textLocale}get stickerLocale(){return this.editor.configStore.locale[f.STICKER].history}get textLocale(){return this.editor.configStore.locale[f.TEXT].history}get textDesignLocale(){return this.editor.configStore.locale[f.TEXT_DESIGN].history}setId(t){this.selectedId.set(t)}};var I=Sr;s([M],I.prototype,"counter",2);s([h],I.prototype,"addSticker",2);s([h],I.prototype,"addStickerAsync",2);s([h],I.prototype,"addText",2);s([h],I.prototype,"addTextAsync",2);s([h],I.prototype,"addTextDesign",2);s([h],I.prototype,"addTextDesignAsync",2);s([h],I.prototype,"clickableCanvas",2);s([h],I.prototype,"setContainerProperties",2);s([h],I.prototype,"setContainerPosition",2);s([h],I.prototype,"pureRemoveSprite",2);s([h],I.prototype,"deleteSprite",2);s([h],I.prototype,"removeSprite",2);s([h],I.prototype,"addSnapshot",2);s([h],I.prototype,"addNewText",2);s([h],I.prototype,"addNewTextDesign",2);s([h],I.prototype,"addNewSticker",2);s([h],I.prototype,"updateStateFromSerialization",2);s([h],I.prototype,"updateStateFromHistory",2);s([h],I.prototype,"updateCanvasControls",2);s([h],I.prototype,"setEditMode",2);s([h],I.prototype,"setDragMode",2);s([h],I.prototype,"setPosition",2);s([h],I.prototype,"setSize",2);s([h],I.prototype,"setRotation",2);s([h],I.prototype,"onCanvasClick",2);s([h],I.prototype,"select",2);s([h],I.prototype,"selectLast",2);s([h],I.prototype,"selectNext",2);s([h],I.prototype,"deselect",2);s([h],I.prototype,"bringToFront",2);s([h],I.prototype,"flipHorizontally",2);s([h],I.prototype,"pureReset",2);s([h],I.prototype,"onCornerDrag",2);s([h],I.prototype,"onWidthDrag",2);s([h],I.prototype,"onPaddingDrag",2);s([h],I.prototype,"correctTextFlip",2);s([h],I.prototype,"reverseTextHorizontally",2);s([h],I.prototype,"reverseTextVertically",2);s([p],I.prototype,"currentSprite",1);s([p],I.prototype,"padding",1);s([p],I.prototype,"isEditMode",1);s([p],I.prototype,"isDragMode",1);s([p],I.prototype,"id",1);s([p],I.prototype,"isSpriteSelected",1);s([p],I.prototype,"position",1);s([p],I.prototype,"tool",1);s([p],I.prototype,"size",1);s([p],I.prototype,"rotation",1);s([p],I.prototype,"rotationWRTOutputRotation",1);s([p],I.prototype,"flipHorizontal",1);s([p],I.prototype,"isSpriteSticker",1);s([p],I.prototype,"isSpriteText",1);s([p],I.prototype,"isSpriteTextDesign",1);s([p],I.prototype,"isOnTop",1);s([p],I.prototype,"spritePosition",1);s([p],I.prototype,"currentRect",1);s([p],I.prototype,"leftTopPosition",1);s([p],I.prototype,"leftBottomPosition",1);s([p],I.prototype,"leftMidPosition",1);s([p],I.prototype,"leftMidPadPosition",1);s([p],I.prototype,"rightTopPosition",1);s([p],I.prototype,"rightBottomPosition",1);s([p],I.prototype,"rightMidPosition",1);s([p],I.prototype,"rightMidPadPosition",1);s([p],I.prototype,"leftBottomHandlePosition",1);s([p],I.prototype,"rightBottomHandlePosition",1);s([p],I.prototype,"historyLocale",1);s([p],I.prototype,"stickerLocale",1);s([p],I.prototype,"textLocale",1);s([p],I.prototype,"textDesignLocale",1);var ry={categories:[],query:""};var Nt=class{constructor(t){this.initProvider=t=>{if(t){this.libraryProvider=new t}};this.fetchImages=async(t="")=>{if(this.libraryProvider){let e=null;try{const i=await this.libraryProvider.getCategories();const r=await this.libraryProvider.searchImages(t);e=i.map((n,a)=>{const l=r.filter(c=>c.category===n.name);return{identifier:n.name,name:n.name,thumbnailURI:n.coverImageUrl,items:l.map(c=>({name:c.title||`image${a}`,identifier:`${n.name}-${c.title}-${a}`,thumbnailURI:c.thumbUrl,rawUrl:c.rawUrl,authorName:c.authorName,authorAvatar:c.authorAvatar}))}}).filter(n=>n.items.length)}catch(i){console.log(i)}pt(()=>{this.state.query=t;this.state.categories=e})}};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""};this.getRawUrl=t=>{const e=this.items.findIndex(i=>i.identifier===t);if(e!==-1){return this.items[e].rawUrl}return t};this.configStore=t.configStore;this.state=M(ry);this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(t=>t.items).reduce((t,e)=>[...t,...e],[])}get query(){return this.state.query}get config(){return this.configStore.config[f.LIBRARY]}get locale(){return this.configStore.locale[f.LIBRARY]}};s([M],Nt.prototype,"selectedCategory",2);s([h],Nt.prototype,"initProvider",2);s([h],Nt.prototype,"fetchImages",2);s([h],Nt.prototype,"toggleCategorySelection",2);s([p],Nt.prototype,"selectedCategoryIdentifier",1);s([p],Nt.prototype,"categories",1);s([p],Nt.prototype,"items",1);s([p],Nt.prototype,"query",1);s([p],Nt.prototype,"config",1);s([p],Nt.prototype,"locale",1);var eh=/^data:image\/(.+?);base64,/;var ny=o=>eh.test(o);var sy=o=>o.match(/^data:([^;]+)/)[1];var ay=o=>o.replace(eh,"");var Cr=class{constructor(t){this.applySerialization=async(t,e,i,r)=>{this.editor.resetToolStates();const n=this.editor.activeStore.tool===f.TRANSFORM;if(!n){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.reset();if(!n){this.editor.transformToolStore.onLeave()}const a="Unexpected error occured";const l=e.deserializeImage(t);if(l.image&&l.image.data){const u=l.image.data;await this.editor.setImage(u);this.editor.scale.defaultScale=1;this.editor.scale.resetOffset();this.editor.transformToolStore.reset();this.editor.activeStore.setImage(u);await this.editor.engineMediator.image.addImageToContainer();this.editor.engineMediator.output.applyNewImageTransform();this.editor.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.editor.transformToolStore.setCropDefaults();this.editor.historyStore.addInitialSnapshot();this.editor.transformToolStore.saveTransforms()}const c=e.deserializeTransformation(t);if(!c){r(a);return}await this.applyStateOnUI(c);const d=e.deserialize(t);if(!d){r(a);return}await this.applyStateOnUI(d);this.editor.historyStore.addInitialSnapshot();if(n){this.editor.transformToolStore.onEnter()}await this.editor.render();if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}i()};this.editor=t}serialize({image:t}={image:false}){const e=this.editor.activeStore.tool===f.TRANSFORM;const{displaySerializationModal:i}=this.editor.configStore.config;if(i){this.editor.modalStore.showInfoModal("saving")}return new Promise((r,n)=>{import("./serialization-AS2EDRW3.js").then(async({Serializer:a})=>{try{if(e){this.editor.transformToolStore.onLeave()}await this.editor.wait();this.editor.transformToolStore.applyDefaultCrop(false);const{originalImage:l}=this.editor.imageContainer.getData();const c=this.editor.engineMediator.output.container.getResolution();const d={width:l.width,height:l.height};const u=new a(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,c,d,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer());const m={[f.ADJUSTMENT]:E(this.editor.adjustmentsToolStore.state),[f.FILTER]:E(this.editor.filterToolStore.state),[f.FOCUS]:E(this.editor.focusToolStore.serializableState),[f.OVERLAY]:E(this.editor.overlayToolStore.state),[f.FRAME]:E(this.editor.frameToolStore.state),[f.BRUSH]:this.editor.brushToolStore.strokes||{strokes:[]}};const{sprite:g,customStickers:v}=await this.editor.spriteStore.serializableState();g.spriteIdList=g.spriteIdList.sort((w,T)=>{const A=g.common[w].order;const F=g.common[T].order;return A-F});m.sprite=g;m.customStickers=v;m.transform=this.editor.transformToolStore.serializableState;let S;let x;if(t){const w=Cr.getDataURL(l);x=sy(w);S=ay(w)}if(i){this.editor.modalStore.hideModal()}r(u.serialise(m,S,x));if(e){this.editor.transformToolStore.onEnter()}}catch(l){if(i){this.editor.modalStore.hideModal()}n(l)}})})}deserialize(t){this.editor.modalStore.showInfoModal("loading");return new Promise((e,i)=>{try{import("./serialization-AS2EDRW3.js").then(({Deserializers:r})=>{const n=t.version.match(/[0-3].[0-8].[0-9]/i);let a=null;if(n&&r["3.9.0"]){a=new r["3.9.0"](this.editor)}else if(r[t.version]){a=new r[t.version](this.editor)}else{a=new r["3.12.0"](this.editor)}if(n){this.editor.modalStore.hideModal();this.editor.modalStore.showActionModal({type:Q.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(t,a,e,i)})}else{this.applySerialization(t,a,e,i)}})}catch(r){if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}i(r)}})}static getDataURL(t){if(t instanceof HTMLImageElement){const{src:n}=t;if(ny(n)){return n}}if(t instanceof HTMLCanvasElement){return t.toDataURL(he.PNG)}const e=document.createElement("canvas");e.width=t.width;e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0);const r=e.toDataURL(he.PNG);hi(e);return r}async applyStateOnUI(t){const e=this.editor.activeStore.tool===f.TRANSFORM;try{if(t.transform){if(!e){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.updateStateFromSerialization(t.transform);await this.editor.wait();this.editor.transformToolStore.onLeave();if(!e){this.editor.transformToolStore.onEnter();await this.editor.wait();this.editor.transformToolStore.onLeave()}}if(t.filter){await this.editor.filterToolStore.updateStateFromSerialization(t.filter)}if(t.adjustment){this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment)}if(t.focus){await this.editor.focusToolStore.updateStateFromSerialization(t.focus)}if(t.overlay){await this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)}if(t.sprite){let i=Object.keys(t).length-1;if(t.customStickers){i-=1}t.sprite.spriteIdList=t.sprite.spriteIdList.sort((r,n)=>{const a=t.sprite.common[r].order;const l=t.sprite.common[n].order;return a-l});await this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers,Math.max(0,i))}if(t.brush){this.editor.brushToolStore.updateStateFromHistory(t.brush)}if(t.frame){await this.editor.frameToolStore.updateStateFromSerialization(t.frame)}this.editor.outputContainer.updateChildrenContainers()}catch(i){if(i.name==="AssetNotFoundError"){console.error(i)}else{console.error(i);this.editor.modalStore.showActionModal({type:Q.ERROR,identifier:"unexpectedError",error:i.message,handleConfirm:()=>{this.applyStateOnUI(t)}})}}}};var ly=o=>{const t=atob(o.split(",")[1]);const e=o.split(",")[0].split(":")[1].split(";")[0];const i=new ArrayBuffer(t.length);const r=new Uint8Array(i);for(let n=0;n<t.length;n+=1){r[n]=t.charCodeAt(n)}return new Blob([i],{type:e})};var hl=ly;var oh=o=>o.split(",")[0].split(":")[1].split(";")[0];var ih=o=>{if(typeof o==="string"){return oh(o)}if(o.src.includes(".svg")){return Ot.SVG}if(o.src){return oh(o.src)}return Ot.JPEG};var Xn=Mo(Dc());var wr=class{static isImageElement(t){return t instanceof HTMLImageElement}constructor({license:t,assetProvider:e,crossOrigin:i}){this.crossOrigin=i;this.engine=new jr({license:t,crossOrigin:i,assetProvider:e,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(t){return new Promise((e,i)=>{const r=[];const n=[];t.forEach(a=>{if(a.isDuotone)r.push(a.identifier);else n.push(a.identifier)});this.getAllDuotonePreview(r).then(a=>{this.getAllLutPreview(n).then(l=>{e(Object.assign(a,l))}).catch(l=>{i(l)})}).catch(a=>{i(a)})})}async getAllDuotonePreview(t){const e={};if(!t.length)return e;const i=await this.engine.addDuoToneFilterFromAssets(t[0],this.container);await(0,Xn.default)(t,async r=>{const n=this.engine.assetProvider.getDuotoneFilterAsset(r);const a=i.filterOperation.getFilter();a.set({intensity:.5,lightColor:Os.Color.fromHex(n.lightColor),darkColor:Os.Color.fromHex(n.darkColor)});const l=await this.engine.export(Eo.DATA_URL,he.PNG);e[r]=l},{concurrency:1});this.engine.removeEffect(i);return e}async loadLutAssets(t){const e={};await(0,Xn.default)(t,async i=>{e[i]=await this.getImageElement(this.engine.assetProvider.getAssetSource("filter",i))});return e}async getAllLutPreview(t){const e={};if(!t.length)return e;const i=await this.loadLutAssets(t);const r=await this.engine.addLUTFilterFromAssets(t[0],this.container);await(0,Xn.default)(t,async n=>{const a=this.engine.assetProvider.getLUTFilterAsset(n);const l=r.filterOperation.getFilter();const c={horizontalTileCount:a.horizontalTileCount||5,verticalTileCount:a.verticalTileCount||5,image:i[n]};l.set({...c,intensity:a.defaultIntensity||1});r.setProperties({intensity:1});l._lutPrimitive.set(c);const d=await this.engine.export(Eo.DATA_URL,he.PNG);e[n]=d},{concurrency:1});this.engine.removeEffect(r);return e}addImageToContainer(t){return new Promise((e,i)=>{let r;if(wr.isImageElement(t)){r=t;this.setBackgroundImage(r);e()}else{this.getImageElement(t).then(n=>{r=n;this.setBackgroundImage(r);e()}).catch(n=>{i({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((e,i)=>{const r=new Image;r.addEventListener("load",()=>{e(r)});r.addEventListener("error",n=>{i(n)});r.crossOrigin=this.crossOrigin;r.src=t})}setBackgroundImage(t){if(!this.container){this.container=this.engine.addImage({image:t,blendMode:ue.NORMAL,opacity:1})}else{this.container.setData({image:t})}const{size:e}=this.container.getBounds();const i=this.engine.getOutputContainer();i.setResolution(e)}};var ae;(function(i){i["LEADING"]="leading";i["CENTER"]="center";i["TRAILING"]="trailing"})(ae||(ae={}));var cy={horizontalGuides:[],verticalGuides:[],rotationGuides:[]};var ke=class{constructor(t){this.previewTopLeftPosition={x:0,y:0};this.init=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig();this.state.rotationGuides=this.getRotationGuidesFromConfig()};this.getGuideValue=(t,e)=>{const{height:i,width:r}=this.editor.getPreviewSize();const{snapToLeft:n,snapToRight:a,snapToTop:l,snapToBottom:c}=this.configStore.config.snapping.position;const d=Math.min(i,r);let u=0;if(e==="bottom"){u=Math.round(i-d*c)}else if(e==="top"){u=Math.round(d*l)}else if(e==="right"){u=Math.round(r-d*a)}else if(e==="left"){u=Math.round(d*n)}else if(t==="vertical"&&e==="center"){u=Math.round(r/2)}else if(t==="horizontal"&&e==="center"){u=Math.round(i/2)}return u};this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:t,snapToLeft:e,snapToRight:i}=this.configStore.config.snapping.position;const r=[];if(t){r.push({value:this.getGuideValue("vertical","center"),edge:ae.CENTER,isVisible:false,direction:"vertical"})}if(e){r.push({value:this.getGuideValue("vertical","left"),edge:ae.LEADING,isVisible:false,direction:"vertical"})}if(i){r.push({value:this.getGuideValue("vertical","right"),edge:ae.TRAILING,isVisible:false,direction:"vertical"})}return r};this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:t,snapToTop:e,snapToBottom:i}=this.configStore.config.snapping.position;const r=[];if(t){r.push({value:this.getGuideValue("horizontal","center"),edge:ae.CENTER,isVisible:false,direction:"horizontal"})}if(e){r.push({value:this.getGuideValue("horizontal","top"),edge:ae.LEADING,isVisible:false,direction:"horizontal"})}if(i){r.push({value:this.getGuideValue("horizontal","bottom"),edge:ae.TRAILING,isVisible:false,direction:"horizontal"})}return r};this.getRotationGuidesFromConfig=()=>{const{angles:t}=this.configStore.config.snapping.rotation;const e=[];t.forEach(r=>{e.push(r);e.push(r+360);e.push(r-360)});const i=e.filter((r,n)=>e.indexOf(r)===n);return i.map(r=>({value:r*Math.PI/180,edge:ae.CENTER,isVisible:false,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:t,leftBottom:e,rightTop:i,rightBottom:r})=>{const n=Math.min(t.y,i.y,e.y,r.y);const a=Math.max(t.y,i.y,e.y,r.y);const l=Math.min(t.x,i.x,e.x,r.x);const c=Math.max(t.x,i.x,e.x,r.x);return{height:Math.round(a-n),width:Math.round(c-l)}};this.mapRange=({value:t,fromMin:e,fromLength:i,toMin:r,toLength:n})=>{return(t-e)*n/i+r};this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(t,e,i,r)=>{if(e.length===0){return t}if(e[0]>t){return t-i}for(let n=0;n<e.length-1;n+=1){const a=e[n];const l=e[n+1];let c=a+i;let d=l-i;let u=0;if(r){u=n*i*2;c+=u;d+=u+i*2}const m=1e-5;if(a<=t&&t<=l){if(t<=a+m){return a+u}if(t>=l-m){return l+u+(r?i*2:0)}return this.mapRange({value:t,fromMin:a,fromLength:l-a,toMin:c,toLength:d-c})}}if(r){return t+(e.length-1)*i*2+i}return t};this.mapFromSnapSystem=(t,e,i,r)=>{if(e.length===0){return t}if(e[0]>t){if(t>=e[0]-i){return e[0]}return t+i}let n=t;for(let l=0;l<e.length-1;l+=1){const c=e[l];const d=e[l+1];const u=c+i;let m=d-i;let g=d;if(r){m+=i*2;g+=i*2;n=t-l*i*2}if(c<=n&&n<=g){if(u<=n&&n<=m){return this.mapRange({value:n,fromMin:u,fromLength:m-u,toMin:c,toLength:d-c})}if(n<u){return c}return d}}n-=i*3;const a=e[e.length-1];if(n<=a){return a}return n};this.centerSnapValue=(t,e)=>{const i=e*.5;const{value:r,edge:n}=t;let a=r;if(n===ae.LEADING){a+=i}else if(n===ae.TRAILING){a-=i}return a};this.mapSnappingGuidesToCenter=(t,e)=>{const i=[];t.forEach(r=>{i.push(this.centerSnapValue(r,e))});return i};this.calcSnapThresholdInRadians=(t,e)=>{if(t===0){return 0}return e/t};this.calculatePreviewTopLeftPosition=()=>{const t=this.editor.engineMediator.preview.container.getPosition();const e=this.editor.getPreviewSize();const i=ee();this.previewTopLeftPosition={x:t.x/i-e.width/2,y:t.y/i-e.height/2}};this.snapToRotation=(t,e,i)=>{const{rotationGuides:r}=this.state;const{enabled:n,threshold:a}=this.configStore.config.snapping.rotation;const{x:l,y:c}=this.previewTopLeftPosition;const{width:d}=this.editor.getPreviewSize();let u=(t+Math.PI*2)%(Math.PI*2);if(n){const m=new b(e).magnitude;const g=r.map(x=>x.value).sort((x,w)=>x-w);const v=this.calcSnapThresholdInRadians(m,a);if(!this.rotationOffset){const x=this.mapToSnapSystem(t,g,v,false);this.rotationOffset=x-u}u=this.mapFromSnapSystem(u+this.rotationOffset,g,v,false);const S={x:i.position.x-l-d,y:i.position.y-c};r.forEach(x=>{x.isVisible=x.value===u;x.position=S});return u}return t};this.snapToPosition=(t,e)=>{const{horizontalGuides:i,verticalGuides:r}=this.state;const{enabled:n,threshold:a}=this.configStore.config.snapping.position;const l=new b(this.previewTopLeftPosition);const{height:c,width:d}=this.getSpriteDimensions(e);const{x:u,y:m}=new b(t).subtract(l);if(n){const g=this.mapSnappingGuidesToCenter(i,c).sort((w,T)=>w-T);const v=this.mapSnappingGuidesToCenter(r,d).sort((w,T)=>w-T);if(!this.positionOffset){const w=this.mapToSnapSystem(u,v,a,true);const T=this.mapToSnapSystem(m,g,a,true);this.positionOffset=new b(w,T).subtract(new b(u,m))}let S=this.mapFromSnapSystem(u+this.positionOffset.x,v,a,true);let x=this.mapFromSnapSystem(m+this.positionOffset.y,g,a,true);S=Math.round(S);x=Math.round(x);i.forEach(w=>{const T=Math.round(this.centerSnapValue(w,c));w.isVisible=T===x});r.forEach(w=>{const T=Math.round(this.centerSnapValue(w,d));w.isVisible=T===S});return new b(S,x).add(l)}return{x:u,y:m}};this.editor=t;this.configStore=t.configStore;this.state=M(cy);this.rotationOffset=null;this.positionOffset=null}hidePositionGuides(){this.positionOffset=null;this.state.verticalGuides=this.state.verticalGuides.map(t=>({...t,isVisible:false}));this.state.horizontalGuides=this.state.horizontalGuides.map(t=>({...t,isVisible:false}))}hideRotationGuides(){this.rotationOffset=null;this.state.rotationGuides=this.state.rotationGuides.map(t=>({...t,isVisible:false}))}get positionGuides(){const{verticalGuides:t,horizontalGuides:e}=this.state;return[...t,...e]}get rotationGuides(){return this.state.rotationGuides}};s([M],ke.prototype,"state",2);s([h],ke.prototype,"snapToRotation",2);s([h],ke.prototype,"snapToPosition",2);s([h],ke.prototype,"hidePositionGuides",1);s([h],ke.prototype,"hideRotationGuides",1);s([p],ke.prototype,"positionGuides",1);s([p],ke.prototype,"rotationGuides",1);var Yn=class{constructor(t,e){this.initWithImage=async t=>{try{this.modalStore.showInfoModal("loading");this.engineMediator.init();this.snappingStore.init();await this.activeStore.setImage(t);if(this.configStore.config.displayResizeWarning){this.checkImageResize()}if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){const e=this.configStore.config.engine;this.previewThumbnails=new wr({...e,license:this.configStore.config.license,assetProvider:this.configStore.assetProvider})}if(this.engine){this.engine.pesdk.on(Gr.WEBGL_CONTEXT_LOST,()=>{this.configStore.events.onErrorWebGLContextLost()})}}catch(e){this.configStore.events.onErrorImageLoading(e);this.modalStore.hideModal();this.modalStore.showActionModal({type:Q.ERROR,identifier:e.identifier?e.identifier:"rendering",error:e,handleConfirm:()=>{this.initWithImage(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.checkImageResize=()=>{this.engine.on(Gr.BEGAN_IMAGE_DOWNSCALING,()=>{this.modalStore.showInfoModal("resizing")});this.engine.on(Gr.IMAGE_DOWNSCALED,({width:t,height:e})=>{const{maxMegaPixels:i}=this.configStore.config.engine.downscaleOptions;const r=Tc.isMobile()?i.mobile:i.desktop;this.modalStore.hideModal();this.modalStore.showActionModal({type:Q.WARNING,identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${r}`,width:`${t}`,height:`${e}`}})})};this.init=t=>{if(!this.activeStore.image){this.initWithImage(t)}else{const e=this.historyStore.isDirty();if(e){this.modalStore.showActionModal({type:Q.WARNING,identifier:"discardChanges",handleConfirm:()=>{this.setImage(t);this.resetToolStates()},handleDismiss:()=>{this.setImage(t,true)}})}else{this.historyStore.reset();this.setImage(t,true).then(()=>{if(this.modalStore.identifier!=="imageResized"){this.modalStore.hideModal()}const{engine:i,displayCanvasRendererWarning:r}=this.configStore.config;if(i.preferredRenderer==="canvas"&&r){this.modalStore.showActionModal({type:Q.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})}}).catch(()=>{return null})}}};this.setImage=async(t,e=false)=>{try{this.activeStore.setImageLoadedToEngine(false);this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading");this.scale.defaultScale=1;this.scale.resetOffset();await this.activeStore.setImage(t);await this.engineMediator.image.addImageToContainer();this.canvasStore.resizeCanvas();this.engineMediator.output.applyNewImageTransform();this.engineMediator.preview.updateTransform();this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();const{flipHorizontally:i,flipVertically:r,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:r,flipHorizontally:i});await this.transformToolStore.rotateOutputContainer(Ac(n),false);if(e){this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();this.transformToolStore.resetCrop();this.transformToolStore.applyDefaultCrop();this.transformToolStore.saveTransforms();this.transformToolStore.onEnter();this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees);this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}else{this.transformToolStore.saveTransforms()}this.snappingStore.calculatePreviewTopLeftPosition();this.historyStore.addInitialSnapshot();await this.renderPromise();if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){this.filterToolStore.setImageAndGetPreviews()}const a=this.activeStore.tool;if(!a){this.onReady()}else{this.configStore.events.onImageLoaded()}if(!(this.modalStore.identifier==="imageResized")){this.modalStore.hideModal()}this.activeStore.setImageLoadedToEngine(true);this.resize()}catch(i){this.configStore.events.onErrorImageLoading(i);this.modalStore.hideModal();this.modalStore.showActionModal({type:Q.ERROR,identifier:i.identifier?i.identifier:"rendering",error:i,handleConfirm:()=>{this.setImage(t,e)},handleDismiss:()=>{this.activeStore.setImage(void 0)}});throw new Error(i)}};this.onToolChange=(t,e=null,i=true)=>{var r,n;if(t===e){return}if((n=(r=this.engineMediator)==null?void 0:r.preview)==null?void 0:n.container){if([t,e].indexOf(f.TRANSFORM)!==-1){if(t===f.TRANSFORM){this.transformToolStore.onLeave();this.transformToolStore.addSnapshot();this.snappingStore.calculatePreviewTopLeftPosition()}else if(e===f.TRANSFORM){this.transformToolStore.onEnter()}this.resize(e)}else{this.scale.resetOffset();this.scale.resetPosition();this.scale.setScaleToDefault();this.scale.scaleRender(true)}if(i){this.render()}}};this.resize=(t=null)=>{if(!this.engineMediator)return;try{const e=this.activeStore.tool;const i=t===f.TRANSFORM||!t&&e===f.TRANSFORM;this.canvasStore.resizeCanvas(t);this.transformToolStore.applyDefaultCrop();const r=E(this.transformToolStore.maxCropMaskSize);if(!i){this.transformToolStore.onEnter()}const n=this.engineMediator.preview.container.getRotation();const a=this.engineMediator.preview.updateTransform(n);if(a){this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();this.transformToolStore.updateCanvasControls(r);this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();const l=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(l);if(!i){this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}this.snappingStore.calculatePreviewTopLeftPosition();this.render()}}catch(e){this.configStore.events.onErrorImageLoading(e);this.modalStore.showActionModal({type:Q.ERROR,identifier:"rendering",handleConfirm:()=>{this.resize(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.export=({preventExportEvent:t,...e}={})=>{return new Promise((i,r)=>{this.modalStore.showInfoModal("exporting");const n=this.activeStore.tool===f.TRANSFORM;if(n){this.transformToolStore.onLeave()}const{config:a}=this.configStore;const l={...a.export.image,...e};const{exportType:c,format:d,quality:u,enableDownload:m,transparent:g}=l;this.engineMediator.engine.export(c,d,u,g).then(v=>{if(m){this.triggerFileDownload(a.export.filename,d,c,v)}if(!t){this.configStore.events.onExport(v)}this.historyStore.isDirtySinceSave=false;i(v)}).catch(v=>{r(v)}).finally(()=>{if(n){this.transformToolStore.onEnter();this.render()}this.modalStore.hideModal()})})};this.serialize=({image:t}={image:true})=>{return this.serializationMediator.serialize({image:t})};this.deserialize=t=>{return this.serializationMediator.deserialize(t)};this.close=()=>{if(this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning){this.modalStore.showActionModal({type:Q.WARNING,identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}})}else{this.configStore.events.onClose()}};this.hasChanges=()=>{return this.historyStore.isDirtySinceSave};this.getImageDimensions=()=>{const{width:t,height:e}=this.engine.getOutputDimensions();return{width:t,height:e}};this.wait=(t=0)=>new Promise(e=>setTimeout(e,t));this.clickableCanvas=async t=>{if(t){await new Promise(e=>setTimeout(e,0));this.canvasStore.enableCanvasClick()}else{this.canvasStore.disableCanvasClick()}};this.onReady=async()=>{const{forceCrop:t}=this.configStore.config;this.activeStore.selectTool(this.configStore.defaultTool);if(t){const e=this.transformToolStore.localOutputImageSize;const i=e.width/e.height;const r=this.transformToolStore.entityManager.items.map(n=>{if(n.ratio){return n.ratio}return n.dimensions.x/n.dimensions.y});if(r.indexOf("*")!==-1){console.error('ForceCrop will not work if "*" is one of the ratios')}else if(r.indexOf(parseFloat(i.toFixed(2)))===-1){this.activeStore.selectTool(f.TRANSFORM)}}this.configStore.events.onEditorReady()};this.addSnapshot=(t,e,i)=>{this.historyStore.addSnapshot(t,e,i)};this.resetToolStates=()=>{this.transformToolStore.pureReset();this.filterToolStore.pureReset();this.focusToolStore.pureReset();this.adjustmentsToolStore.pureReset();this.overlayToolStore.pureReset();this.frameToolStore.pureReset();this.brushToolStore.pureReset();this.spriteStore.pureReset();this.historyStore.reset();this.render()};this.getAssetPath=t=>this.assetProvider.getPathForCategory(t);this.render=async()=>{await this.renderPromise()};this.applyFlipToPreview=t=>{if(!this.engineMediator)return{x:0,y:0};return this.engineMediator.previewSpaceToFlippedPreviewSpace(t)};this.getPreviewSize=()=>{if(!this.engine)return{width:0,height:0};const{width:t,height:e}=this.engine.getOutputDimensions();if(t&&e){return{width:Math.round(this.worldToPreview(this.outputToWorld(t))),height:Math.round(this.worldToPreview(this.outputToWorld(e)))}}return{height:e,width:t}};this.getImageMimeType=()=>{return ih(this.activeStore.image)};this.cleanUpCanvasMemory=()=>{var t,e,i;(i=(e=(t=this.engineMediator)==null?void 0:t.image)==null?void 0:e.container)==null?void 0:i.dispose()};this.triggerFileDownload=(t,e,i,r)=>{const n=e===he.JPEG&&i!==Eo.MSBLOB?".jpeg":".png";const a=t+n;const l=this.blobFromExportData(r);this.triggerBlobDownload(a,l)};this.triggerBlobDownload=(t,e)=>{if(navigator.msSaveBlob){navigator.msSaveBlob(e,t)}else{const i=document.createElement("a");const r=URL.createObjectURL(e);i.href=r;i.download=t;document.body.appendChild(i);i.click();document.body.removeChild(i);if(!sc()){URL.revokeObjectURL(r)}}};this.blobFromExportData=t=>{if(typeof t==="string"){return hl(t)}if(t instanceof HTMLImageElement){return hl(t.src)}return t};this.configStore=new $t;if(e){Object.entries(e).forEach(([r,n])=>{this.configStore.events.on(r,n)})}const i=this.configStore.saveConfig(t);this.engineMediator=new nl(this);this.serializationMediator=new Cr(this);this.spriteStore=new I(this);this.scale=new gt(this);this.filterToolStore=new ct(this);this.adjustmentsToolStore=new K(this);this.focusToolStore=new W(this);this.overlayToolStore=new mt(this);this.frameToolStore=new nt(this);this.brushToolStore=new rt(this);this.transformToolStore=new k(this);this.libraryStore=new Nt(this);this.modalStore=new Yt(this);this.snappingStore=new ke(this);this.activeStore=new Wt(this);this.canvasStore=new Dt(this);this.historyStore=new Uo(this);this.libraryStore.initProvider(i);this.libraryStore.fetchImages();if(this.configStore.config.image){this.initWithImage(this.configStore.config.image)}else{this.configStore.events.onEditorReady();if(this.configStore.defaultTool===f.LIBRARY||this.configStore.defaultTool===f.CUSTOM){this.activeStore.selectTool(this.configStore.defaultTool)}}}get shortestOutputSide(){const t=this.outputContainer.getBounds();return Math.min(t.width,t.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){if(!this.engineMediator)return null;return this.engineMediator.engine}get imageContainer(){if(!this.engineMediator)return null;return this.engineMediator.image.container}get orderHelper(){if(!this.engineMediator)return null;return this.engineMediator.orderHelper}renderPromise(){if(!this.engineMediator)return null;return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(t,e){if(!this.engineMediator)return{x:0,y:0};if(fe(t)){return this.engineMediator.previewSpaceToWorldSpace(t,e)}return this.engineMediator.previewSpaceToWorldSpace(t,e)}worldToPreview(t){if(!this.engineMediator)return{x:0,y:0};if(fe(t)){return this.engineMediator.worldSpaceToPreviewSpace(t)}return this.engineMediator.worldSpaceToPreviewSpace(t)}worldSizeToPreview(t){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}}previewSizeToWorld(t,e){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}}outputToWorld(t){if(!this.engineMediator)return{x:0,y:0};if(fe(t)){return this.engineMediator.outputSpaceToWorldSpace(t)}return this.engineMediator.outputSpaceToWorldSpace(t)}previewToOutput(t){if(!this.engineMediator)return{x:0,y:0};if(fe(t)){return this.engineMediator.previewSpaceToOutputSpace(t)}return this.engineMediator.previewSpaceToOutputSpace(t)}get outputContainer(){return this.engineMediator.output.container}};s([h],Yn.prototype,"resize",2);s([h],Yn.prototype,"export",2);s([h],Yn.prototype,"clickableCanvas",2);import hy from"react";import dy from"styled-components";var rh=dy(_o)`
  margin: 2px;
  min-width: ${o=>o.theme.measurements.basicCard.large.width}px;
  height: ${o=>o.theme.measurements.basicCard.large.height}px;
  color: ${o=>o.theme.card.foreground};
`;import py from"styled-components";var nh=py(_o)`
  margin: 2px;
  min-width: ${o=>o.theme.measurements.basicCard.medium.width}px;
  height: ${o=>o.theme.measurements.basicCard.medium.height}px;
  color: ${o=>o.theme.card.foreground};
`;var sh=({type:o=Ms.MEDIUM,...t})=>{const e=o===Ms.LARGE;let i=nh;if(e){i=rh}return hy.createElement(i,{type:o,...t})};import uy from"styled-components";var ah=uy(Ho).attrs(()=>({"data-test":C.CardContainer}))`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${o=>o.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`;import my from"styled-components";var lh=my(Gs)`
  &&& {
    min-height: 32px;
    font-size: ${o=>o.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${o=>o.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${o=>o.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`;import fy from"styled-components";var ch=fy.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`;import gy,{css as dh}from"styled-components";var ph=gy.div.attrs(()=>({"data-test":C.BasicToolControlBar}))`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${o=>o.show?dh`
          max-height: 80px;
        `:dh`
          max-height: 0px;
        `}
`;var hh=ph;ph.defaultProps={show:true};import by from"styled-components";var yy=by.div`
  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  margin: 0 10vw;
  height: auto;
  box-shadow: ${o=>o.theme.toolControlBar.shadow};
  @media all and (min-width: 0) and (max-width: 599px) {
    margin: 0 5vw;
  }
`;var uh=yy;import vy from"styled-components";var xy=vy.div`
  width: 100px;
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 42px;
  }
`;var mh=xy;import Sy,{css as Cy}from"styled-components";var fh=Sy.div.attrs(()=>({"data-test":C.ToolControlBarExpandableControls}))`
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 90%;
  height: ${o=>o.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
  display: flex;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${o=>o.theme.measurements.zIndex.controlsBar};
  background: ${o=>o.theme.toolControlBar.background};
  color: ${o=>o.theme.toolControlBar.inputLabelForeground};

  ${({show:o})=>o&&Cy`
      transform: translateY(-100%) scaleY(1);
    `}
`;import $r from"react";import gC from"styled-components";import wy from"react";import ky from"styled-components";var Ty=ky.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;var Iy=({label:o,className:t,children:e})=>wy.createElement(Ty,{"aria-label":o,className:t},e);var ul=Iy;import Lt from"react";import cf from"styled-components";import Jt from"react";import nx from"styled-components";import{useContext as My}from"react";function it(){return My(sr)}import Ze from"react";var Ey=()=>Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ze.createElement("defs",null,Ze.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),Ze.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ze.createElement("path",{d:"M0 0H48V48H0z"}),Ze.createElement("mask",{fill:"currentColor"},Ze.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),Ze.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})));var gh=Ey;import jo from"react";var Dy=()=>jo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},jo.createElement("defs",null,jo.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),jo.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jo.createElement("mask",null,jo.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),jo.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})));var bh=Dy;import Qe from"react";var Py=()=>Qe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Qe.createElement("defs",null,Qe.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),Qe.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qe.createElement("path",{d:"M0 0H48V48H0z"}),Qe.createElement("mask",{fill:"currentColor"},Qe.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),Qe.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})));var yh=Py;import to from"react";var zy=()=>to.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},to.createElement("defs",null,to.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),to.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},to.createElement("path",{d:"M0 0H48V48H0z"}),to.createElement("mask",{fill:"currentColor"},to.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),to.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})));var vh=zy;import eo from"react";var Ay=()=>eo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},eo.createElement("defs",null,eo.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),eo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},eo.createElement("path",{d:"M0 0H48V48H0z"}),eo.createElement("mask",{fill:"currentColor"},eo.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),eo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})));var xh=Ay;import oo from"react";var By=()=>oo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},oo.createElement("defs",null,oo.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),oo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},oo.createElement("path",{d:"M0 0H48V48H0z"}),oo.createElement("mask",{fill:"#fff"},oo.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),oo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})));var Sh=By;import io from"react";var Ly=()=>io.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},io.createElement("defs",null,io.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),io.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},io.createElement("path",{d:"M0 0H48V48H0z"}),io.createElement("mask",{fill:"currentColor"},io.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),io.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})));var Ch=Ly;import ro from"react";var Oy=()=>ro.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ro.createElement("defs",null,ro.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),ro.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ro.createElement("path",{d:"M0 0H48V48H0z"}),ro.createElement("mask",{fill:"currentColor"},ro.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),ro.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})));var wh=Oy;import no from"react";var Fy=()=>no.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},no.createElement("defs",null,no.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),no.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},no.createElement("path",{d:"M0 0H48V48H0z"}),no.createElement("mask",{fill:"currentColor"},no.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),no.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})));var kh=Fy;import so from"react";var Ry=()=>so.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},so.createElement("defs",null,so.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),so.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},so.createElement("path",{d:"M0 0H48V48H0z"}),so.createElement("mask",{fill:"currentColor"},so.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),so.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})));var Th=Ry;import ao from"react";var Hy=()=>ao.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ao.createElement("defs",null,ao.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),ao.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ao.createElement("path",{d:"M0 0H48V48H0z"}),ao.createElement("mask",{fill:"currentColor"},ao.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),ao.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})));var Ih=Hy;import lo from"react";var _y=()=>lo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},lo.createElement("defs",null,lo.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),lo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},lo.createElement("path",{d:"M0 0H48V48H0z"}),lo.createElement("mask",{fill:"currentColor"},lo.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),lo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})));var Mh=_y;import Xo from"react";var $y=()=>Xo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Xo.createElement("defs",null,Xo.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Xo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Xo.createElement("mask",{fill:"currentColor"},Xo.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Xo.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})));var Eh=$y;import Yo from"react";function Wy(){return Yo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Yo.createElement("defs",null,Yo.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Yo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Yo.createElement("mask",{fill:"#fff"},Yo.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Yo.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var Dh=Wy;import Ko from"react";var Ny=()=>Ko.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Ko.createElement("defs",null,Ko.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Ko.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ko.createElement("mask",{fill:"currentColor"},Ko.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),Ko.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})));var Ph=Ny;import qo from"react";var Vy=()=>qo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},qo.createElement("defs",null,qo.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),qo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},qo.createElement("mask",{fill:"currentColor"},qo.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),qo.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})));var zh=Vy;import Jo from"react";function Uy(){return Jo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Jo.createElement("defs",null,Jo.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Jo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jo.createElement("mask",{fill:"#fff"},Jo.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Jo.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var Ah=Uy;import Zo from"react";var Gy=()=>{return Zo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},Zo.createElement("defs",null,Zo.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Zo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Zo.createElement("mask",{fill:"#fff"},Zo.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),Zo.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})))};var Bh=Gy;import co from"react";function jy(){return co.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},co.createElement("defs",null,co.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),co.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},co.createElement("path",{d:"M0 0H48V48H0z"}),co.createElement("mask",{fill:"#fff"},co.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),co.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var Lh=jy;import Mt from"react";var Xy=()=>Mt.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Mt.createElement("g",{fill:"none",fillRule:"evenodd"},Mt.createElement("g",null,Mt.createElement("g",{fill:"#D8D8D8",opacity:"0"},Mt.createElement("rect",{width:"48",height:"48"})),Mt.createElement("g",{transform:"translate(12 12)"},Mt.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),Mt.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},Mt.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),Mt.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),Mt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),Mt.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},Mt.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),Mt.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},Mt.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),Mt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))));var Oh=Xy;import Qo from"react";function Yy(){return Qo.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Qo.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qo.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),Qo.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),Qo.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),Qo.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),Qo.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var Fh=Yy;import Te from"react";var Ky=()=>Te.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Te.createElement("g",{fill:"none",fillRule:"evenodd"},Te.createElement("g",null,Te.createElement("g",{fill:"#D8D8D8",opacity:"0"},Te.createElement("rect",{width:"48",height:"48"})),Te.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},Te.createElement("g",null,Te.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),Te.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),Te.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))));var Rh=Ky;import le from"react";var qy=()=>le.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},le.createElement("g",{fill:"none",fillRule:"evenodd"},le.createElement("g",null,le.createElement("g",{fill:"#D8D8D8",opacity:"0"},le.createElement("rect",{width:"48",height:"48"})),le.createElement("g",{transform:"translate(12 12)"},le.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),le.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},le.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),le.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),le.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))));var Hh=qy;import Li from"react";var Jy=()=>Li.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},Li.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Li.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),Li.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),Li.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),Li.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})));var _h=Jy;import Kt from"react";var Zy=()=>Kt.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Kt.createElement("g",{fill:"none",fillRule:"evenodd"},Kt.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},Kt.createElement("g",null,Kt.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),Kt.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),Kt.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),Kt.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),Kt.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),Kt.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},Kt.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),Kt.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))));var $h=Zy;import kr from"react";var Qy=()=>kr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},kr.createElement("g",{fill:"none",fillRule:"evenodd"},kr.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},kr.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),kr.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))));var Wh=Qy;import _e from"react";var tv=()=>_e.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},_e.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},_e.createElement("g",null,_e.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},_e.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},_e.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),_e.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),_e.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),_e.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))));var Nh=tv;import Tr from"react";var ev=()=>{return Tr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},Tr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Tr.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),Tr.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),Tr.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))};var Vh=ev;import Ir from"react";var ov=()=>{return Ir.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Ir.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ir.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),Ir.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),Ir.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))};var Uh=ov;import ti from"react";function iv(){return ti.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},ti.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},ti.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),ti.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),ti.createElement("g",{fillOpacity:"0.2"},ti.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),ti.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var Gh=iv;import ei from"react";var rv=()=>ei.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ei.createElement("defs",null,ei.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),ei.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ei.createElement("mask",{fill:"currentColor"},ei.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),ei.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})));var jh=rv;import Xh from"react";var nv=()=>Xh.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Xh.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}));var Yh=nv;import Kh from"react";var sv=()=>Kh.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Kh.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}));var qh=sv;import oi from"react";function av(){return oi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},oi.createElement("defs",null,oi.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),oi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},oi.createElement("mask",{fill:"currentColor"},oi.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),oi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var Jh=av;import ii from"react";var lv=()=>ii.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ii.createElement("defs",null,ii.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),ii.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ii.createElement("mask",{fill:"currentColor"},ii.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),ii.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})));var Zh=lv;import po from"react";var cv=()=>po.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},po.createElement("defs",null,po.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),po.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},po.createElement("path",{d:"M0 0H24V24H0z"}),po.createElement("mask",{fill:"currentColor"},po.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),po.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})));var Qh=cv;import bt from"react";var dv=({highlight:o="currentColor",width:t=48,height:e=48})=>bt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},bt.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},bt.createElement("g",{fill:o,transform:"translate(13 13)"},bt.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),bt.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),bt.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),bt.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),bt.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),bt.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),bt.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),bt.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),bt.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),bt.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),bt.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),bt.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),bt.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),bt.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),bt.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),bt.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))));var tu=dv;import ml from"react";var pv=({highlight:o="currentColor",width:t=48,height:e=48})=>ml.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},ml.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ml.createElement("path",{fill:o,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})));var eu=pv;import Oi from"react";var hv=({highlight:o="currentColor",width:t=48,height:e=48})=>Oi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},Oi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Oi.createElement("g",{fill:o,transform:"translate(13 13)"},Oi.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),Oi.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),Oi.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))));var ou=hv;import fl from"react";var uv=({highlight:o="currentColor",width:t=48,height:e=48})=>fl.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},fl.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},fl.createElement("path",{fill:o,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})));var iu=uv;import mv from"styled-components";var fv=mv.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``;var Vt=fv;import tt from"react";var gv=({highlight:o="#565656",width:t=32,height:e=32})=>tt.createElement(Vt,{width:t,height:e,viewBox:"0 0 32 32"},tt.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},tt.createElement("g",{fill:o,transform:"translate(-8 -8)"},tt.createElement("g",{transform:"translate(8 8)"},tt.createElement("g",null,tt.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),tt.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),tt.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),tt.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),tt.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),tt.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),tt.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),tt.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),tt.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),tt.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),tt.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),tt.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),tt.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),tt.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),tt.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),tt.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),tt.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),tt.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),tt.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),tt.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),tt.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),tt.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),tt.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),tt.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))));var ru=gv;import Kn from"react";var bv=({highlight:o="#565656",width:t=32,height:e=48})=>Kn.createElement(Vt,{width:t,height:e,viewBox:"0 0 42 32"},Kn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Kn.createElement("g",{fill:o,transform:"translate(-3 -8)"},Kn.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))));var nu=bv;import qn from"react";var yv=({highlight:o="#565656",width:t=26,height:e=46})=>qn.createElement(Vt,{width:t,height:e,viewBox:"0 0 26 46"},qn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},qn.createElement("g",{fill:o,transform:"translate(-11 -1)"},qn.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))));var su=yv;import Jn from"react";var vv=({highlight:o="#565656",width:t=26,height:e=46})=>Jn.createElement(Vt,{width:t,height:e,viewBox:"0 0 26 46"},Jn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jn.createElement("g",{fill:o,transform:"translate(-11 -1)"},Jn.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))));var au=vv;import $e from"react";var xv=({highlight:o="#565656",mask:t="#fff",width:e=32,height:i=32})=>$e.createElement(Vt,{width:e,height:i,viewBox:"0 0 32 32"},$e.createElement("defs",null,$e.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),$e.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$e.createElement("g",{transform:"translate(-8 -8)"},$e.createElement("g",{transform:"translate(7.08 7.293)"},$e.createElement("mask",{fill:t},$e.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),$e.createElement("use",{fill:o,xlinkHref:"#photoeditorsdk-square-icon"})))));var lu=xv;import Zn from"react";var Sv=({highlight:o="#565656",width:t=32,height:e=42})=>Zn.createElement(Vt,{width:t,height:e,viewBox:"0 0 32 42"},Zn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Zn.createElement("g",{fill:o,transform:"translate(-8 -3)"},Zn.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))));var cu=Sv;import We from"react";var Cv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>We.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},We.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},We.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),We.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),We.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),We.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),We.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:o,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),We.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),We.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:o,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})));var du=Cv;import Ne from"react";var wv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Ne.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ne.createElement("g",null,Ne.createElement("path",{fill:o,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Ne.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:o,rx:"1"}),Ne.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:o,rx:"1"}),Ne.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:o,rx:"1"}),Ne.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}),Ne.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:o,rx:"1"}))));var pu=wv;import Ve from"react";var kv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Ve.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ve.createElement("g",{transform:"translate(5 5)"},Ve.createElement("path",{fill:t,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),Ve.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:o,rx:"1"}),Ve.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:o,rx:"1"}),Ve.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:o,rx:"1"}),Ve.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:o,rx:"1"}),Ve.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:o,rx:"1"}))));var hu=kv;import ho from"react";var Tv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>ho.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},ho.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ho.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:o,rx:"1"}),ho.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:o,rx:"1"}),ho.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:o,rx:"1"}),ho.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:o,rx:"1"}),ho.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:o,rx:"1"}),ho.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:t,rx:"1"})));var uu=Tv;import uo from"react";var Iv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>uo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},uo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},uo.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:o,rx:"1"}),uo.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:t,rx:"1"}),uo.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:o,rx:"1"}),uo.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:o,rx:"1"}),uo.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:o,rx:"1"}),uo.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:o,rx:"1"})));var mu=Iv;import mo from"react";var Mv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>mo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},mo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},mo.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:o,rx:"1"}),mo.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:t,rx:"1"}),mo.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:o,rx:"1"}),mo.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:o,rx:"1"}),mo.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:o,rx:"1"}),mo.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:o,rx:"1"})));var fu=Mv;import Qn from"react";var Ev=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Qn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Qn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qn.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:t,rx:"1.5"}),Qn.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:o,rx:"1"})));var gu=Ev;import At from"react";var Dv=({main:o="#424242",highlight:t="#565656",shadow:e="#333333",width:i="48px",height:r="48px"})=>At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},At.createElement("defs",null,At.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},At.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),At.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},At.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:o,rx:"0.5"}),At.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:o,rx:"0.5"}),At.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:o,rx:"0.5"}),At.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:o,rx:"0.5"}),At.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),At.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:o,rx:"0.5"}),At.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:o,rx:"0.5"}),At.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:e,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),At.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:o,rx:"1"})));var bu=Dv;import Ie from"react";var Pv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Ie.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ie.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"})));var yu=Pv;import Me from"react";var zv=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Me.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Me.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),Me.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:o,rx:"1"})));var vu=zv;import ri from"react";var Av=()=>ri.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ri.createElement("defs",null,ri.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),ri.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ri.createElement("mask",{fill:"currentColor"},ri.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),ri.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})));var xu=Av;import qt from"react";var Bv=({height:o=3,width:t=102,x:e=-102,className:i,style:r})=>qt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:o,viewBox:"0 0 102 3",className:i,style:r},qt.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},qt.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),qt.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),qt.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-t*1.5,y:"0",width:t*4,height:"3",transform:`translate(${e}, 0)`}));var Su=Bv;import ni from"react";var Lv=()=>ni.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ni.createElement("defs",null,ni.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),ni.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ni.createElement("mask",{fill:"currentColor"},ni.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),ni.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})));var Cu=Lv;import wu from"react";var Ov=()=>wu.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wu.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}));var ku=Ov;import fo from"react";var Fv=({className:o})=>fo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:o},fo.createElement("title",null,"Flip Horizontal"),fo.createElement("defs",null,fo.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),fo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},fo.createElement("mask",{fill:"none"},fo.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),fo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})));var Tu=Fv;import go from"react";var Rv=({className:o})=>go.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:o},go.createElement("title",null,"Flip Vertical"),go.createElement("defs",null,go.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),go.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},go.createElement("mask",{fill:"none"},go.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),go.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})));var Iu=Rv;import bo from"react";var Hv=({alt:o="Rotate",className:t})=>bo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:t},bo.createElement("title",null,o),bo.createElement("defs",null,bo.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),bo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},bo.createElement("mask",{fill:"none"},bo.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),bo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})));var Mu=Hv;var lO={[f.ADJUSTMENT]:Oh,[f.FILTER]:Rh,[f.LIBRARY]:$h,[f.OVERLAY]:Wh,[f.FOCUS]:Hh,[f.STICKER]:Nh,[f.TEXT]:Vh,[f.TEXT_DESIGN]:Uh,[f.FRAME]:_h,[f.TRANSFORM]:Gh,[f.BRUSH]:Fh};var cO={left:Bh,right:Lh,center:Ah};var dO={addText:jh,openWebcam:Yh,reset:qh,shuffle:Jh,uploadImage:Zh};var Mr={undo:zh,redo:Ph,close:Eh,export:Dh};var st={categories:{[ht.CommonCategory]:tu,[ht.FacebookCategory]:eu,[ht.TwitterCategory]:iu,[ht.InstagramCategory]:ou},crops:{[ht.Custom]:ru,[ht.Square]:lu,[ht.ThreeByFour]:cu,[ht.FourByThree]:nu,[ht.NineBySixteen]:su,[ht.SixteenByNine]:au,[ht.FacebookPost]:du,[ht.FacebookProfile]:pu,[ht.FacebookTitle]:hu,[ht.InstagramLandscape]:uu,[ht.InstagramPortrait]:mu,[ht.InstagramSquare]:fu,[ht.InstagramStory]:gu,[ht.TwitterPost]:bu,[ht.TwitterProfile]:yu,[ht.TwitterTitle]:vu},dots:Su,duplicate:Cu,edit:ku,bringToFront:Qh,delete:xu,flipHorizontal:Tu,flipVertical:Iu,rotate:Mu};var pO={[ot.BRIGHTNESS]:bh,[ot.CONTRAST]:vh,[ot.SATURATION]:wh,[ot.CLARITY]:yh,[ot.SHADOWS]:kh,[ot.HIGHLIGHTS]:Ch,[ot.EXPOSURE]:xh,[ot.GAMMA]:Sh,[ot.BLACKS]:gh,[ot.WHITES]:Mh,[ot.TEMPERATURE]:Ih,[ot.SHARPNESS]:Th};import _v from"styled-components";var gl=_v.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
`;import $v,{css as Eu}from"styled-components";var Du=$v.div.attrs(()=>({"data-test":C.MainCanvasActionBar}))`
  &&& {
    display: ${o=>o.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${o=>o.theme.measurements.mainCanvasActionBar.height}px;
    color: ${o=>o.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${o=>o.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${o=>o.theme.measurements.zIndex.canvas.bar};
    background: ${o=>o.transparentBackgound?"transparent":o.theme.mainCanvasActionBar.background};
    ${o=>o.bottom?Eu`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:Eu`
            justify-content: space-between;
          `}
  }
`;import Wv from"styled-components";var Pu=Wv.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import Nv from"styled-components";var zu=Nv.div.attrs({role:"main"})`
  background-color: ${o=>o.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${o=>o.theme.measurements.canvas.marginTop}px;
`;import Vv from"styled-components";var Au=Vv.div.attrs(({height:o,width:t})=>({style:{height:`${o}px`,width:`${t}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${o=>o.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`;import Uv from"styled-components";var Bu=Uv.div.attrs(({radius:o})=>({style:{height:`${o*2}px`,width:`${o*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${o=>o.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`;import Gv from"styled-components";var Lu=Gv.div`
  position: relative;
  height: inherit;
  width: inherit;
`;import Ou,{css as dt}from"styled-components";var jv=Ou.div(o=>{const{desktop:t,mobile:e}=o.theme.measurements.canvasControls.corner.touchable;const i=t/4;const r=e/2;return dt`
    position: absolute;
    width: ${t}px;
    height: ${t}px;
    ${n=>n.vertical==="top"?dt`
            top: 0px;
          `:dt`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?dt`
            left: 0px;
          `:dt`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?dt`
            margin-top: -${i}px;
          `:dt`
            margin-bottom: -${i}px;
          `}
  ${n=>n.horizontal==="left"?dt`
            margin-left: -${i}px;
          `:dt`
            margin-right: -${i}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${e}px;
      height: ${e}px;
      ${n=>n.vertical==="top"?dt`
              margin-top: -${r}px;
            `:dt`
              margin-bottom: -${r}px;
            `}
      ${n=>n.horizontal==="left"?dt`
              margin-left: -${r}px;
            `:dt`
              margin-right: -${r}px;
            `}
    }
  `});var ts=Ou(jv)(o=>{const t=o.horizontal==="right"?o.borderWidth:0;const e=o.vertical==="bottom"?o.borderWidth:0;const i=o.horizontal==="left"?o.borderWidth:0;const r=o.vertical==="top"?o.borderWidth:0;const n=`${r}px ${t}px ${e}px ${i}px`;const a=o.horizontal==="left"&&o.vertical==="bottom"||o.horizontal==="right"&&o.vertical==="top"?"nesw-resize":"nwse-resize";const l=o.theme.measurements.canvasControls.corner.touchable.desktop/4-o.borderWidth;const c=o.theme.measurements.canvasControls.corner.touchable.mobile/4+o.borderWidth;return dt`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${d=>d.theme.measurements.canvasControls.corner.size}px;
      height: ${d=>d.theme.measurements.canvasControls.corner.size}px;
      z-index: ${d=>d.theme.measurements.zIndex.canvas.controls};
      border-color: ${d=>d.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${o.vertical==="top"?dt`
            top: ${l}px;
          `:dt`
            bottom: ${l}px;
          `}
      ${o.horizontal==="left"?dt`
            left: ${l}px;
          `:dt`
            right: ${l}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${o.vertical==="top"?dt`
              margin-top: ${c}px;
            `:dt`
              margin-bottom: ${c}px;
            `}
        ${o.horizontal==="left"?dt`
              margin-left: ${c}px;
            `:dt`
              margin-right: ${c}px;
            `}
      }
    }
    cursor: ${a};
    pointer-events: none;
  `});import Xv from"styled-components";var Fu=Xv.div.attrs(()=>({"data-test":C.Knob}))`
  position: absolute;
  height: ${o=>o.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${o=>o.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${o=>o.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${o=>o.theme.measurements.canvasControls.knob.size}px;
    height: ${o=>o.theme.measurements.canvasControls.knob.size}px;
    top: ${o=>o.theme.measurements.canvasControls.knob.size/4}px;
    left: ${o=>o.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`;import Yv from"styled-components";var Ru=Yv.div`
  position: absolute;
  color: ${o=>o.theme.canvas.controlsOutline};
`;import Kv from"styled-components";var Hu=Kv.div.attrs(o=>({style:{left:`${o.x}px`}}))`
  position: absolute;
  bottom: -${o=>o.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${o=>o.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${o=>o.theme.canvas.controlsOutline};
`;import qv from"styled-components";var _u=qv.div.attrs(({height:o,width:t,theme:e})=>({style:{height:`${o+e.measurements.canvasControls.sprite.controlPadding}px`,width:`${t+e.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${o=>o.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${o=>o.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${o=>o.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`;import Jv from"styled-components";var $u=Jv.div.attrs(()=>({"data-test":C.TextWidth}))`
  position: absolute;
  height: ${o=>o.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.controls};
  background: ${o=>o.theme.canvas.controlsColor};
  cursor: pointer;
`;import Zv from"styled-components";var Wu=Zv.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${o=>o.height}px;
  width: ${o=>o.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`;import es,{css as Nu}from"styled-components";var os=nc()?Nu`
      transition: unset;
    `:Nu`
      transition: all 0.4s ease-in-out;
    `;var Vu=es.div`
  position: absolute;
  background: ${o=>o.theme.canvas.cropBackdrop};
  z-index: ${o=>o.theme.measurements.zIndex.canvas.crop.backdrop};
  ${os}
`;var Uu=es.div.attrs({"data-test":C.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${o=>o.theme.canvas.controlsOutline};
  cursor: move;
  ${os}
`;var Gu=es.div`
  position: absolute;
  background: ${o=>o.theme.canvas.controlsOutline};
  z-index: ${o=>o.theme.measurements.zIndex.canvas.crop.grid};
  ${os}
`;var si=es(ts)`
  z-index: ${o=>o.theme.measurements.zIndex.canvas.controls};
  ${os};
`;import Qv from"styled-components";var ju=Qv.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import tx from"styled-components";var Xu=tx.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;import ex from"styled-components";var Yu=ex.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${o=>o.theme.webcam.background};
`;var D={Index:Pu,Area:gl,Bar:{Index:Du,ButtonGroup:Rp},Button:{TextSecondary:Op,Float:$p},Container:zu,Element:ju,Wrapper:Yu,Webcam:Xu,Controls:{Knob:Fu,Circle:Bu,Corner:ts,Line:Ru,Area:Au,Sprite:_u,RotateHandle:Hu,Container:Lu,Wrapper:Wu,SpriteActionsWrapper:gr,SpriteActionButton:Ke,Width:$u},Crop:{Mask:Uu,GridLine:Gu,Backdrop:Vu,Control:si}};import is from"react";import Ku,{css as ox}from"styled-components";var qu=D.Button.TextSecondary;var Ju=Ku.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${o=>o.theme.canvasActionBar.foreground};
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`;var ix=Ku.div`
  display: inline-flex;
  ${o=>o.isDisabled&&ox`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;var rx=({isDisabled:o,scale:t,active:e})=>{const{canZoomIn:i}=t;const{canZoomOut:r}=t;const{zoomLevel:n}=t;const a=[f.TRANSFORM,f.BRUSH,f.FOCUS,f.STICKER,f.TEXT,f.TEXT_DESIGN].indexOf(e.tool)!==-1;return!a?is.createElement(ix,{isDisabled:o},is.createElement(qu,{"data-test":C.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!r,onClick:t.out},"-"),is.createElement(Ju,{"data-test":C.ZoomLevel},n," %"),is.createElement(qu,{ariaLabel:"Zoom in",isDisabled:!i,onClick:t.in},"+")):null};var Zu=R("scale","active")(P(rx));Ju.defaultProps={theme:_t};var Qu=nx(D.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`;var sx=P(function o(){const{config:t,editor:e,history:i,custom:r,active:n}=it();const a=t.locale.mainCanvasActions;const{canUndo:l}=i;const{canRedo:c}=i;const d=t.config.mainCanvasActions;const u=()=>{e.export()};const m=()=>{if(e.activeStore.tool===f.TRANSFORM){return null}const w=r.getButton("mainCanvasActionUndo");return Jt.createElement(w,{key:"mainCanvasActionUndo","data-test":C.MainBarButtonUndo,onClick:i.undo,isDisabled:!l||!n.image,label:a.buttonUndo,ariaLabel:a.buttonUndo,icon:Jt.createElement(Mr.undo,null)})};const g=()=>{if(e.activeStore.tool===f.TRANSFORM){return null}const w=r.getButton("mainCanvasActionRedo");return Jt.createElement(w,{key:"mainCanvasActionRedo","data-test":C.MainBarButtonRedo,onClick:i.redo,isDisabled:!c||!n.image,label:a.buttonRedo,ariaLabel:a.buttonRedo,icon:Jt.createElement(Mr.redo,null)})};const v=()=>{const w=r.getButton("mainCanvasActionExport");return Jt.createElement(w,{key:"mainCanvasActionExport","data-test":C.MainBarButtonExport,onClick:u,isDisabled:!n.image,label:a.buttonExport,ariaLabel:a.buttonExport,icon:Jt.createElement(Mr.export,null)})};const S=()=>{if(!t.displayCloseButton){return null}const w=r.getButton("mainCanvasActionClose");return Jt.createElement(w,{key:"mainCanvasActionClose","data-test":C.MainBarButtonClose,onClick:e.close,isDisabled:!n.image,label:a.buttonClose,ariaLabel:a.buttonClose,icon:Jt.createElement(Mr.close,null)})};const x=d.map(w=>{switch(w){case et.UNDO:return m;case et.REDO:return g;case et.EXPORT:return v;case et.CLOSE:return S;default:return null}});return Jt.createElement(D.Bar.Index,null,Jt.createElement(Qu,null,x[0]&&x[0]()||null,x[1]&&x[1]()||null),t.config.enableZoom?Jt.createElement(Zu,{isDisabled:!n.image}):null,Jt.createElement(Qu,null,x[2]&&x[2]()||null,x[3]&&x[3]()||null))});import ym from"react";import Pr from"react";import qx from"styled-components";function ax(o){return typeof o==="string"&&o.includes("%")}function lx(o){return typeof o==="string"&&o.includes(".")&&parseFloat(o)===1}function yt(o,t){if(lx(o)){o="100%"}const e=ax(o);o=t===360?o:Math.min(t,Math.max(0,parseFloat(o)));if(e){o=parseInt(String(o*t),10)/100}if(Math.abs(o-t)<1e-6){return 1}if(t===360){o=(o<0?o%t+t:o%t)/parseFloat(String(t))}else{o=o%t/parseFloat(String(t))}return o}function rs(o){o=parseFloat(o);if(Number.isNaN(o)||o<0||o>1){o=1}return o}function Er(o){if(o<=1){return`${Number(o)*100}%`}return o}function yo(o){return o.length===1?`0${o}`:String(o)}function bl(o,t,e){return{r:yt(o,255)*255,g:yt(t,255)*255,b:yt(e,255)*255}}function yl(o,t,e){o=yt(o,255);t=yt(t,255);e=yt(e,255);const i=Math.max(o,t,e);const r=Math.min(o,t,e);let n=0;let a=0;const l=(i+r)/2;if(i===r){a=0;n=0}else{const c=i-r;a=l>.5?c/(2-i-r):c/(i+r);switch(i){case o:n=(t-e)/c+(t<e?6:0);break;case t:n=(e-o)/c+2;break;case e:n=(o-t)/c+4;break;default:break}n/=6}return{h:n,s:a,l}}function tm(o,t,e){let i;let r;let n;o=yt(o,360);t=yt(t,100);e=yt(e,100);function a(l,c,d){if(d<0){d+=1}if(d>1){d-=1}if(d<1/6){return l+(c-l)*(6*d)}if(d<1/2){return c}if(d<2/3){return l+(c-l)*(2/3-d)*6}return l}if(t===0){r=e;n=e;i=e}else{const l=e<.5?e*(1+t):e+t-e*t;const c=2*e-l;i=a(c,l,o+1/3);r=a(c,l,o);n=a(c,l,o-1/3)}return{r:i*255,g:r*255,b:n*255}}function vl(o,t,e){o=yt(o,255);t=yt(t,255);e=yt(e,255);const i=Math.max(o,t,e);const r=Math.min(o,t,e);let n=0;const a=i;const l=i-r;const c=i===0?0:l/i;if(i===r){n=0}else{switch(i){case o:n=(t-e)/l+(t<e?6:0);break;case t:n=(e-o)/l+2;break;case e:n=(o-t)/l+4;break;default:break}n/=6}return{h:n,s:c,v:a}}function em(o,t,e){o=yt(o,360)*6;t=yt(t,100);e=yt(e,100);const i=Math.floor(o);const r=o-i;const n=e*(1-t);const a=e*(1-r*t);const l=e*(1-(1-r)*t);const c=i%6;const d=[e,a,n,n,l,e][c];const u=[l,e,e,a,n,n][c];const m=[n,n,l,e,e,a][c];return{r:d*255,g:u*255,b:m*255}}function xl(o,t,e,i){const r=[yo(Math.round(o).toString(16)),yo(Math.round(t).toString(16)),yo(Math.round(e).toString(16))];if(i&&r[0].charAt(0)===r[0].charAt(1)&&r[1].charAt(0)===r[1].charAt(1)&&r[2].charAt(0)===r[2].charAt(1)){return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)}return r.join("")}function cx(o){return Math.round(parseFloat(o)*255).toString(16)}function Bt(o){return parseInt(o,16)}function Sl(o){return Bt(o)/255}function om(o,t,e,i,r){const n=[yo(Math.round(o).toString(16)),yo(Math.round(t).toString(16)),yo(Math.round(e).toString(16)),yo(cx(i))];if(r&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0)}return n.join("")}var Fi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var dx="[-\\+]?\\d+%?";var px="[-\\+]?\\d*\\.\\d+%?";var vo=`(?:${px})|(?:${dx})`;var Cl=`[\\s|\\(]+(${vo})[,|\\s]+(${vo})[,|\\s]+(${vo})\\s*\\)?`;var wl=`[\\s|\\(]+(${vo})[,|\\s]+(${vo})[,|\\s]+(${vo})[,|\\s]+(${vo})\\s*\\)?`;var ce={CSS_UNIT:new RegExp(vo),rgb:new RegExp(`rgb${Cl}`),rgba:new RegExp(`rgba${wl}`),hsl:new RegExp(`hsl${Cl}`),hsla:new RegExp(`hsla${wl}`),hsv:new RegExp(`hsv${Cl}`),hsva:new RegExp(`hsva${wl}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Zt(o){return Boolean(ce.CSS_UNIT.exec(String(o)))}function hx(o){o=o.trim().toLowerCase();if(o.length===0){return false}let t=false;if(Fi[o]){o=Fi[o];t=true}else if(o==="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}let e=ce.rgb.exec(o);if(e){return{r:e[1],g:e[2],b:e[3]}}e=ce.rgba.exec(o);if(e){return{r:e[1],g:e[2],b:e[3],a:e[4]}}e=ce.hsl.exec(o);if(e){return{h:e[1],s:e[2],l:e[3]}}e=ce.hsla.exec(o);if(e){return{h:e[1],s:e[2],l:e[3],a:e[4]}}e=ce.hsv.exec(o);if(e){return{h:e[1],s:e[2],v:e[3]}}e=ce.hsva.exec(o);if(e){return{h:e[1],s:e[2],v:e[3],a:e[4]}}e=ce.hex8.exec(o);if(e){return{r:Bt(e[1]),g:Bt(e[2]),b:Bt(e[3]),a:Sl(e[4]),format:t?"name":"hex8"}}e=ce.hex6.exec(o);if(e){return{r:Bt(e[1]),g:Bt(e[2]),b:Bt(e[3]),format:t?"name":"hex"}}e=ce.hex4.exec(o);if(e){return{r:Bt(e[1]+e[1]),g:Bt(e[2]+e[2]),b:Bt(e[3]+e[3]),a:Sl(e[4]+e[4]),format:t?"name":"hex8"}}e=ce.hex3.exec(o);if(e){return{r:Bt(e[1]+e[1]),g:Bt(e[2]+e[2]),b:Bt(e[3]+e[3]),format:t?"name":"hex"}}return false}function im(o){let t={r:0,g:0,b:0};let e=1;let i=null;let r=null;let n=null;let a=false;let l=false;if(typeof o==="string"){o=hx(o)}if(Array.isArray(o)){const[c,d,u]=o;if(Zt(c)&&Zt(d)&&Zt(u)){t=bl(c*255,d*255,u*255);a=true;l="rgb"}if(o.length===4){e=o[3]}}if(typeof o==="object"){if(Zt(o.r)&&Zt(o.g)&&Zt(o.b)){t=bl(o.r,o.g,o.b);a=true;l=String(o.r).substr(-1)==="%"?"prgb":"rgb"}else if(Zt(o.h)&&Zt(o.s)&&Zt(o.v)){i=Er(o.s);r=Er(o.v);t=em(o.h,i,r);a=true;l="hsv"}else if(Zt(o.h)&&Zt(o.s)&&Zt(o.l)){i=Er(o.s);n=Er(o.l);t=tm(o.h,i,n);a=true;l="hsl"}if(Object.prototype.hasOwnProperty.call(o,"a")){e=o.a}}e=rs(e);return{ok:a,format:o.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var Ut=class{constructor(t="",e={}){if(t instanceof Ut){return t}this.originalInput=t;const i=im(t);this.originalInput=t;this.r=i.r;this.g=i.g;this.b=i.b;this.a=i.a;this.roundA=Math.round(100*this.a)/100;this.format=e.format||i.format;this.gradientType=e.gradientType;if(this.r<1){this.r=Math.round(this.r)}if(this.g<1){this.g=Math.round(this.g)}if(this.b<1){this.b=Math.round(this.b)}this.isValid=i.ok}getAlpha(){return this.a}setAlpha(t){this.a=rs(t);this.roundA=Math.round(100*this.a)/100;return this}toHsv(){const t=vl(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=vl(this.r,this.g,this.b);const e=Math.round(t.h*360);const i=Math.round(t.s*100);const r=Math.round(t.v*100);return this.a===1?`hsv(${e}, ${i}%, ${r}%)`:`hsva(${e}, ${i}%, ${r}%, ${this.roundA})`}toHsl(){const t=yl(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=yl(this.r,this.g,this.b);const e=Math.round(t.h*360);const i=Math.round(t.s*100);const r=Math.round(t.l*100);return this.a===1?`hsl(${e}, ${i}%, ${r}%)`:`hsla(${e}, ${i}%, ${r}%, ${this.roundA})`}toHex(t=false){return xl(this.r,this.g,this.b,t)}toHexString(t=false){return`#${this.toHex(t)}`}toHex8(t=false){return om(this.r,this.g,this.b,this.a,t)}toHex8String(t=false){return`#${this.toHex8(t)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){const t=Math.round(this.r);const e=Math.round(this.g);const i=Math.round(this.b);return`rgba(${t}, ${e}, ${i}, ${this.roundA})`}toPercentageRgb(){const t=e=>`${Math.round(yt(e,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=e=>Math.round(yt(e,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toName(){if(this.a===0){return"transparent"}if(this.a<1){return false}const t=`#${xl(this.r,this.g,this.b,false)}`;for(const e of Object.keys(Fi)){if(Fi[e]===t){return e}}return false}toString(t){const e=Boolean(t);t=t||this.format;const i=this.a<1&&this.a>=0;const r=!e&&i&&t&&(t.startsWith("hex")||t==="name");if(r){if(t==="name"&&this.a===0){return this.toName()}return this.toRgbString()}switch(t){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(true);case"hex4":return this.toHex8String(true);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new Ut(this.toString())}};import vt from"react";import Hi,{css as fm}from"styled-components";import ux,{css as ns}from"styled-components";var mx=ux.div`
  position: absolute;
  width: ${o=>o.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${o=>o.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${o=>o.direction==="bottom"?ns`
          bottom: 100%;
        `:ns`
          top: 100%;
        `}
  left: ${o=>o.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${o=>o.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${o=>o.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${o=>o.direction==="bottom"?ns`
            transform: translate(-50%, 50%) rotate(45deg);
          `:ns`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${o=>o.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`;var rm=mx;import kl from"react";import nm from"styled-components";var fx=nm.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`;var gx=nm(B.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${o=>o.theme.colorPicker.inputBorderColor};
  }
`;var bx=({value:o,label:t,onChange:e})=>kl.createElement(fx,null,kl.createElement(B.Input.Label,{label:t}),kl.createElement(gx,{min:0,max:255,value:o,onChange:e}));var ss=bx;import Tl from"react";import sm from"styled-components";var yx=sm.div`
  text-align: left;
  width: 62px;
`;var vx=sm(B.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${o=>o.theme.colorPicker.inputBorderColor};
  }
`;var xx=({value:o,label:t,onChange:e})=>Tl.createElement(yx,null,Tl.createElement(B.Input.Label,{label:t}),Tl.createElement(vx,{value:o.toUpperCase(),onChange:e}));var am=xx;import Ml,{useRef as Px,useState as zx,useEffect as Ax}from"react";import Bx from"styled-components";import Sx from"styled-components";var ai=Sx.div.attrs(o=>({style:{left:o.position[0]||`${0}px`,top:o.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${o=>o.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${o=>o.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${o=>o.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;ai.defaultProps={theme:_t};var cm=Mo(rr());import Il,{useState as Cx,useRef as lm,forwardRef as wx,useCallback as kx}from"react";import Tx from"styled-components";var Ix=Tx.div`
  position: relative;
  height: 14px;
  width: 100%;
`;var Mx=o=>{return t=>{o.forEach(e=>{if(typeof e==="function"){e(t)}else if(e!=null){e.current=t}})}};var Ri=wx(({surface:o,onChange:t,className:e,children:i},r)=>{const n=lm(null);const a=lm(null);const{config:l}=it();const[c,d]=Cx(false);const u=S=>{const x=l.measurements.color.colorPicker.thumb.size/2;const w=l.measurements.color.colorPicker.thumb.size;let T=0;let A=0;T=S.clientX;A=S.clientY;const{top:F,left:H,width:X,height:z}=n.current.getBoundingClientRect();let j=T-H-x;let Y=A-F-x;j=Math.max(0,Math.min(X-w,j));Y=Math.max(0,Math.min(z-w,Y));if(t){t([j,Y])}};const m=S=>{d(true);u(S)};const g=kx((0,cm.default)(S=>{if(c){u(S)}},10),[c]);const v=()=>{if(c){d(false)}};return Il.createElement(Ix,{ref:Mx([n,r]),className:e},Il.createElement(B.DraggableCore,{nodeRef:a,onStart:m,onDrag:g,onStop:v},Il.createElement("div",{ref:a},o)),i)});import{css as Ex}from"styled-components";var Dx=Ex`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`;var li=Dx;var Lx=Bx.div`
  ${li}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`;var dm=({hue:o,onChange:t})=>{const[e,i]=zx(0);const r=Px(null);const{config:n}=it();const a=l=>{if(r.current){const[c]=l;const{offsetWidth:d}=r.current;const u=d-n.measurements.color.colorPicker.thumb.size;const m=c*d/u;const g=Math.max(0,Math.min(360,m/d*360));t(g);i(c)}};Ax(()=>{if(r.current){const{offsetWidth:l}=r.current;let c=0;const d=l-n.measurements.color.colorPicker.thumb.size;c=o*l/360;i(c*d/l)}},[o]);return Ml.createElement(Ri,{surface:Ml.createElement(Lx,null),ref:r,onChange:a},Ml.createElement(ai,{position:[e,0]}))};import as,{useState as Ox,useRef as Fx,useEffect as Rx}from"react";import pm from"styled-components";var Hx=pm.div.attrs(o=>({style:{background:`linear-gradient(to left, ${o.transparentColor} 0%, ${o.opaqueColor} 100%)`}}))`
  ${li}
  z-index: 1;
`;var _x=pm.div.attrs(o=>({style:{backgroundImage:`url(${o.url})`}}))`
  ${li}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`;var hm=({color:o,opaqueColor:t,transparentColor:e,onChange:i})=>{const{config:r}=it();const[n,a]=Ox(0);const l=Fx(null);const c=r.assetProvider.getPath("controls","/tiled-background.png");const d=u=>{if(l.current){const{offsetWidth:m}=l.current;const[g]=u;const v=m-r.measurements.color.colorPicker.thumb.size;const S=g*m/v;const x=(m-S)/m;const w=Math.round((x+Number.EPSILON)*100)/100;const T=Math.min(1,Math.max(0,w));i(T);a(g)}};Rx(()=>{if(l.current){const{offsetWidth:u}=l.current;let m=0;const g=u-r.measurements.color.colorPicker.thumb.size;m=(1-o.toHsv().a)*u;a(m*g/u)}},[o.toString()]);return as.createElement(Ri,{ref:l,surface:as.createElement(Hx,{opaqueColor:t,transparentColor:e}),onChange:d},as.createElement(_x,{url:c}),as.createElement(ai,{position:[n,0]}))};import El,{useState as $x,useRef as Wx,useEffect as Nx}from"react";import um from"styled-components";var Vx=um.div.attrs(o=>({style:{backgroundColor:`hsl(${o.hue}, 100%, 50%)`}}))`
  ${li}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${o=>o.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`;var Ux=um(Ri)`
  height: ${o=>o.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`;var mm=({color:o,hue:t,onChange:e})=>{const[i,r]=$x([0,0]);const n=Wx(null);const{config:a}=it();Nx(()=>{const{s:c,v:d}=o.toHsv();if(n.current){const{offsetWidth:u,offsetHeight:m}=n.current;const g=u-a.measurements.color.colorPicker.thumb.size;const v=m-a.measurements.color.colorPicker.thumb.size;const S=c*u;const x=(1-d)*m;r([S*g/u,x*v/m])}},[o.toString()]);const l=c=>{if(n.current){const[d,u]=c;const{offsetHeight:m,offsetWidth:g}=n.current;const v=g-a.measurements.color.colorPicker.thumb.size;const S=m-a.measurements.color.colorPicker.thumb.size;const x=d*g/v;const w=u*m/S;const T=Math.min(1,Math.max(0,x/g));const A=Math.min(1,Math.max(0,(m-w)/m));e(T,A);r([d,u])}};return El.createElement(Ux,{ref:n,surface:El.createElement(Vx,{hue:t}),onChange:l},El.createElement(ai,{position:i}))};var Gx=Hi.div`
  position: absolute;
  left: ${o=>o.leftOffset}px;
  top: ${o=>o.topOffset}px;
  z-index: ${o=>o.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${o=>o.show&&fm`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`;var gm=Hi.div`
  &&& {
    position: absolute;
    ${o=>o.direction==="top"&&fm`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${o=>o.theme.colorPicker.listShadow};
    background: ${o=>o.theme.colorPicker.listBackground};
    border-radius: ${o=>o.theme.shape.radiusMedium}px;
    width: ${o=>o.theme.measurements.color.colorPicker.width}px;
    height: ${o=>o.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`;var jx=Hi(dm)`
  margin-top: 8px;
`;var Xx=Hi(hm)`
  margin-top: 8px;
`;var Yx=Hi.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`;var Kx=Hi.div`
  display: flex;
`;var Dr=class extends vt.Component{constructor(t){super(t);this.node=vt.createRef();this.checkId=(t,e,i)=>{let r=t;let n=0;while(r.parentElement&&n<i){r=r.parentElement;n+=1;if(r.id===e){return true}}return false};this.handleOutsideClick=t=>{var a;const{onRequestClose:e,onAddSnapshot:i,show:r}=this.props;const{color:n}=this.state;if(r){if((a=this.node.current)==null?void 0:a.contains(t.target)){return}this.setState({hexInputValue:n.toHexString()});if(e){e()}if(i){i()}}};this.onChange=t=>{const{onChange:e}=this.props;e({color:t.toRgbArray(),colorString:t.toRgbString()})};this.onHexValueChange=t=>{if(t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){const e=new Ut(t);this.onChange(e);this.setState({color:e,hue:e.toHsl().h})}this.setState({hexInputValue:t})};this.onAlphaChange=t=>{const{color:e}=this.state;const i=e.setAlpha(t);this.onChange(i);this.setState({color:i,hexInputValue:i.toHexString()})};this.onHueChange=t=>{const{color:e}=this.state;const{s:i,v:r,a:n}=e.toHsv();const a=new Ut({h:t,s:i,v:r,a:n});this.onChange(a);this.setState({color:a,hexInputValue:a.toHexString(),hue:t})};this.onSaturationBrightnessChange=(t,e)=>{const{color:i,hue:r}=this.state;const{a:n}=i.toHsv();const a=new Ut({h:r,s:t,v:e,a:n});this.onChange(a);this.setState({color:a,hexInputValue:a.toHexString()})};this.onInputChange=t=>e=>{const{color:i}=this.state;if(e.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!e.trim()){const r=i.toRgb();r[t]=parseInt(e,10)||0;const n=new Ut(r);this.onChange(n);this.setState({color:n,hexInputValue:n.toHexString(),hue:n.toHsl().h})}};const{color:e}=this.props;const i=new Ut(e);this.state={color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false);document.addEventListener("keydown",this.handleOutsideClick,false)}componentDidUpdate(t){const{color:e,show:i}=this.props;if(i&&!t.show){const r=new Ut(e);this.setState({color:r,hue:r.toHsl().h,hexInputValue:r.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false);document.removeEventListener("keydown",this.handleOutsideClick,false)}render(){const{show:t,showArrow:e,direction:i,arrowOffset:r,topOffset:n,leftOffset:a,labelHex:l,labelR:c,labelG:d,labelB:u,labelSliderHue:m,labelSliderOpacity:g}=this.props;const{color:v,hexInputValue:S,hue:x}=this.state;const{r:w,g:T,b:A}=v.toRgb();const F=v.clone().setAlpha(1).toRgbString();const H=v.clone().setAlpha(0).toRgbString();return vt.createElement("div",{ref:this.node},vt.createElement(Gx,{show:t,direction:i,leftOffset:a,topOffset:n},vt.createElement(gm,{direction:i},e&&vt.createElement(rm,{direction:i,arrowOffset:r}),vt.createElement(mm,{color:v,hue:x,onChange:this.onSaturationBrightnessChange}),vt.createElement(B.Spacer,{count:2}),vt.createElement(B.Input.Label,{label:m}),vt.createElement(jx,{hue:x,onChange:this.onHueChange}),vt.createElement(B.Spacer,{count:2}),vt.createElement(B.Input.Label,{label:g}),vt.createElement(Xx,{color:v,opaqueColor:F,transparentColor:H,onChange:this.onAlphaChange}),vt.createElement(Yx,null,vt.createElement(am,{value:S,label:l,onChange:this.onHexValueChange}),vt.createElement(Kx,null,vt.createElement(ss,{value:w,label:c,onChange:this.onInputChange("r")}),vt.createElement(ss,{value:T,label:d,onChange:this.onInputChange("g")}),vt.createElement(ss,{value:A,label:u,onChange:this.onInputChange("b")}))))))}};Dr.defaultProps={direction:"bottom",showArrow:true};gm.defaultProps={theme:_t};var Jx=qx.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`;var Dl=class extends Pr.Component{constructor(t){super(t);this.containerRef=null;this.onClick=t=>e=>{const{onAddSnapshot:i,config:r,onChange:n,colorPickerDirection:a,rect:l}=this.props;const{activeIdentifier:c,showColorPicker:d,colorList:u}=this.state;const m=u.find(g=>g.identifier===t);if(c===m.identifier&&!d){const{left:g,width:v,top:S,height:x}=e.currentTarget.getBoundingClientRect();const{left:w,top:T}=this.containerRef.current.getBoundingClientRect();const{colorPicker:A}=r.measurements.color;const F=A.arrow.width/2;let H=g-w+v/2-2;let X=a==="bottom"?S-T+x+F:S-T-F;let z=-24;const j=A.width-A.arrow.width-12;if(H>j){z+=H-j;H-=z}let Y=true;if(a==="bottom"&&l){const ut=l.height;const Ge=l.top;const To=S-Ge;const Io=ut-(To+x);const Wr=r.measurements.color.colorPicker.height+F;if(Io<Wr){X=Io-Wr}if(To+X<To+x/2){X+=F;Y=false}}this.setState({showColorPicker:true,showColorPickerArrow:Y,arrowOffset:H,topOffset:X,leftOffset:z})}else if(d){this.setState({showColorPicker:false})}else{n(m.color);this.setState({activeIdentifier:t});if(i){i()}}};this.onChange=({color:t,colorString:e})=>{const{onChange:i}=this.props;const{activeIdentifier:r,colorList:n}=this.state;const a=n.findIndex(l=>l.identifier===r);if(a!==-1){const l=[...n];l[a]={identifier:n[a].identifier,colorString:e,color:t};this.setState({colorList:l})}i(t)};this.onChangeColorPicker=({color:t,colorString:e})=>{this.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:e})};this.closeColorPicker=()=>{this.setState({showColorPicker:false})};this.getColorPicker=()=>{const{activeColor:t,labelsColor:e,colorPickerDirection:i,onAddSnapshot:r}=this.props;const{showColorPicker:n,showColorPickerArrow:a,arrowOffset:l,leftOffset:c,topOffset:d}=this.state;return Pr.createElement(Dr,{color:E(t),show:n,showArrow:a,direction:i,arrowOffset:l,leftOffset:c,topOffset:d,labelHex:e.hex,labelR:e.r,labelG:e.g,labelB:e.b,labelSliderOpacity:e.sliderOpacity,labelSliderHue:e.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:r})};const{colors:e}=this.props;this.containerRef=Pr.createRef();this.state={activeIdentifier:"",activeSprite:"",colorList:[...e],showColorPicker:false,showColorPickerArrow:false,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:t,activeColor:e},{activeSprite:i,colorList:r}){if(t!==i||!t){const n=xe(E(e));const a=r.find(({colorString:l})=>l===n);return{activeSprite:t,activeIdentifier:a?a.identifier:""}}return null}render(){const{tool:t,isDisabled:e,custom:i,config:r}=this.props;const{activeIdentifier:n,colorList:a}=this.state;const l=i.getColorItem();const c=r.assetProvider.getPath("controls","/tiled-background.png");const d=a.map(u=>{if(!l){return null}return Pr.createElement(l,{tool:t,key:`${u.colorString}-item-${u.identifier}`,isActive:u.identifier===n,isDisabled:e,onClick:this.onClick(u.identifier),color:u.colorString,label:u.identifier,tiledBackgroundUrl:c})});return Pr.createElement(Jx,{"data-test":C.ColorList,ref:this.containerRef},d,this.getColorPicker())}};Dl.defaultProps={colorPickerDirection:"bottom",isDisabled:false};var bm=R("config","custom")(P(Dl));var Zx=o=>ym.createElement(sn.Consumer,null,({rect:t})=>ym.createElement(bm,{...o,rect:t}));import Ui,{useRef as KS,useEffect as qS,useLayoutEffect as JS}from"react";var ef=Mo(rr());import di,{useRef as RS}from"react";import ls from"react";import vm from"styled-components";var Qx=vm(D.Controls.Container)`
  cursor: none;
`;var tS=vm.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${o=>o.theme.foreground};
`;var xm=class extends ls.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDrawing:false};this.containerElementRef=null;this.getCursorCoordinates=t=>{let e=0;let i=0;if(t.type.indexOf("touch")!==-1){const l=t;if(!l.touches.length){return{...this.INITIAL_POSITION,height:0,width:0}}e=l.touches[0].clientX;i=l.touches[0].clientY}else{const l=t;e=l.clientX;i=l.clientY}const r=this.containerElementRef.current.getBoundingClientRect();const n=e-r.left;const a=i-r.top;return{x:n,y:a,height:r.height,width:r.width}};this.draw=t=>{t.preventDefault();t.stopPropagation();this.touchDraw(t)};this.touchDraw=t=>{const{x:e,y:i}=this.getCursorCoordinates(t);if(e!==void 0&&i!==void 0){this.setState({x:e,y:i});if(this.state.isDrawing){this.brushTool.strokePosition({x:e,y:i})}}};this.touchStart=()=>{this.brushTool.clickableCanvas(false);this.setState({isDrawing:true});this.brushTool.beginStroke()};this.start=t=>{if(t.button===0){this.touchStart()}else{this.stop(t)}};this.stop=t=>{if(this.state.isDrawing){t.preventDefault();t.stopPropagation();this.setState({isDrawing:false});this.brushTool.endStroke();this.brushTool.clickableCanvas(true)}};this.setInitialPosition=()=>{this.setState({...this.INITIAL_POSITION})};this.mouseOut=t=>{const{config:e}=this.props;t.preventDefault();t.stopPropagation();const i=this.brushTool.sizeOnScreenSpace/2;const{x:r,y:n,height:a,width:l}=this.getCursorCoordinates(t);if(r&&n){if(r<0||n<0||r>l-i||n>a-i||n<e.measurements.mainCanvasActionBar.height){this.setInitialPosition()}}};this.touchEnd=t=>{t.preventDefault();t.stopPropagation();const{x:e,y:i}=this.state;if(e&&i){this.setInitialPosition()}};this.getCursor=()=>{const{x:t,y:e}=this.state;if(t&&e){const i=xe(this.brushTool.color);const r=`${this.brushTool.sizeOnScreenSpace}px`;const n={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:i,height:r,width:r};return ls.createElement(tS,{style:n,"data-test":C.Cursor})}return null};this.containerElementRef=ls.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:false})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get brushTool(){return this.props.brushTool}render(){return ls.createElement(Qx,{ref:this.containerElementRef,"data-test":C.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}};var Sm=R("brushTool","config")(P(xm));import iS from"react";import de from"react";import eS from"styled-components";var Qt=(o,t)=>{return o!==void 0&&t!==void 0&&!Number.isNaN(o)&&!Number.isNaN(t)};var Pl=eS(D.Controls.Knob)`
  margin-top: -${o=>o.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${o=>o.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`;var{Container:oS}=D.Controls;var Cm=class extends de.Component{constructor(t){super(t);this.start=(t,{x:e,y:i})=>{if(Qt(e,i)){this.focusTool.setStart({x:e,y:i})}};this.end=(t,{x:e,y:i})=>{if(Qt(e,i)){this.focusTool.setEnd({x:e,y:i})}};this.onKnob1DragStart=(t,e)=>{this.focusTool.clickableCanvas(false);this.start(t,e)};this.onKnob1DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition);this.start(t,e);this.focusTool.clickableCanvas(true)};this.onKnob2DragStart=(t,e)=>{this.focusTool.clickableCanvas(false);this.end(t,e)};this.onKnob2DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition);this.end(t,e);this.focusTool.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},i)=>{if(Qt(t,e)){this.focusTool.toolSnapshot(i)}};this.getLine=()=>{const{height:t,width:e}=this.props.canvas.canvasSize;const i=this.focusTool.startOnPreview;const r=this.focusTool.endOnPreview;return de.createElement("svg",{focusable:"false",height:t,width:e},de.createElement("line",{x1:i.x,y1:i.y,x2:r.x,y2:r.y,strokeWidth:"2",stroke:"currentColor"}))};this.startRef=de.createRef();this.endRef=de.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return de.createElement(oS,null,de.createElement(D.Controls.Line,null,this.getLine()),de.createElement(B.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},de.createElement(Pl,{ref:this.startRef})),de.createElement(B.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},de.createElement(Pl,{ref:this.endRef})))}};Pl.defaultProps={theme:_t};var wm=R("canvas","focusTool")(P(Cm));import xo from"react";var zr=class extends xo.Component{constructor(t){super(t);this.getKnobPosition=()=>{const{focusTool:t}=this.props;const{origin:e,size:i}=t;const r=i/2;const n=Math.PI/2+t.rotation;return{x:e.x+r*Math.cos(n),y:e.y+r*Math.sin(n)}};this.onArea=(t,{x:e,y:i})=>{const{editor:r}=this.props;const n=r.configStore.measurements.canvasControls.knob.size;if(Qt(e,i)){const{canvas:a,focusTool:l}=this.props;const{size:c,mirroredAreaWidth:d}=l;const u=e+d/2;const m=i+c/2;const g=new b(this.getKnobPosition());const v=new b({x:e,y:i});const S=v.subtract(new b(this.areaPosition));const x=g.add(S);if(x.x>n&&x.x<a.canvasSize.width-n){if(x.y>n&&x.y<a.canvasSize.height-n){l.setOrigin({x:u,y:m})}}}};this.onKnob=(t,{x:e,y:i})=>{const{focusTool:r}=this.props;if(Qt(e,i)){r.clickableCanvas(false);const n=new b(r.origin);const a=new b(e,i);const l=n.subtract(a);const c=l.magnitude;const d=Math.PI/2+Math.atan2(l.y,l.x);r.setSize(c*2);r.setRotation(d)}};this.onAreaDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition);this.onArea(t,e);i.clickableCanvas(true)};this.onKnobDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize);this.onKnob(t,e);i.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},i)=>{const{focusTool:r}=this.props;if(Qt(t,e)){r.toolSnapshot(i)}};this.knobRef=xo.createRef();this.areaRef=xo.createRef()}get areaPosition(){const{focusTool:t}=this.props;const{origin:e,size:i,mirroredAreaWidth:r}=t;return{x:e.x-r/2,y:e.y-i/2}}render(){const{x:t,y:e}=this.areaPosition;const{focusTool:i}=this.props;return xo.createElement(D.Controls.Container,null,xo.createElement(B.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},xo.createElement(D.Controls.Knob,{ref:this.knobRef})),xo.createElement(B.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:e},rotation:i.rotation},xo.createElement(D.Controls.Area,{ref:this.areaRef,"data-test":C.Focus,height:i.size,width:i.mirroredAreaWidth})))}};zr=s([R("focusTool","canvas","editor"),P],zr);import So from"react";var Ar=class extends So.Component{constructor(t){super(t);this.state={knobAngle:2.35};this.onCircle=(t,{x:e,y:i})=>{if(Qt(e,i)){const{focusTool:r}=this.props;r.setCenter({x:e+r.radius,y:i+r.radius})}};this.onKnob=(t,{x:e,y:i})=>{if(Qt(e,i)){const{focusTool:r}=this.props;const n=new b(e,i);const a=new b(r.center.x,r.center.y);const l=a.subtract(n);const c=l.magnitude;const d=-Math.atan2(l.y,l.x);this.setState({knobAngle:d});r.setRadius(c)}};this.onCircleDragStart=(t,e)=>{const{focusTool:i}=this.props;i.clickableCanvas(false);this.onCircle(t,e)};this.onCircleDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition);this.onCircle(t,e);i.clickableCanvas(true)};this.onKnobDragStart=(t,e)=>{const{focusTool:i}=this.props;i.clickableCanvas(false);this.onKnob(t,e)};this.onKnobDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize);this.onKnob(t,e);i.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},i)=>{const{focusTool:r}=this.props;if(Qt(t,e)){r.toolSnapshot(i)}};this.knobRef=So.createRef();this.circleRef=So.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:t}=this.props;const{knobAngle:e}=this.state;const{center:i,radius:r}=t;const n={x:i.x-r,y:i.y-r};const a=Math.PI-e;const l={x:i.x+r*Math.cos(a),y:i.y+r*Math.sin(a)};return So.createElement(D.Controls.Container,null,So.createElement(B.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:l},So.createElement(D.Controls.Knob,{ref:this.knobRef})),So.createElement(B.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},So.createElement(D.Controls.Circle,{ref:this.circleRef,"data-test":C.Focus,radius:r})))}};Ar=s([R("focusTool","canvas"),P],Ar);var km=P(()=>{const{focusTool:o}=it();const{state:t}=o;const e=()=>{switch(t.identifier){case q.LINEAR:return wm;case q.RADIAL:return Ar;case q.MIRRORED:return zr;default:return null}};const i=e();return o.isOptionSelected&&i?iS.createElement(i,null):null});import Ue,{useRef as fS}from"react";import Wi from"react";import Br from"react";import Im from"react";import rS from"react";var Tm=({customButtonKey:o,onClick:t,label:e,icon:i,disabled:r})=>{const{custom:n}=it();const a=n.getButton(o);if(!a){return null}return rS.createElement(a,{onClick:t,label:e,ariaLabel:e,icon:i,isDisabled:r})};var _i=({availableKeys:o,actions:t})=>{return Im.createElement(D.Bar.ButtonGroup,{onClick:Ic},o.map(e=>{const i=t[e];if(i){return Im.createElement(Tm,{key:e,...i})}return null}))};var nS=({sprite:o,stickerTool:t})=>{const e=t.locale.canvasActions;const i={[et.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:Br.createElement(st.bringToFront,null),disabled:o.isOnTop},[et.FLIP]:{customButtonKey:"canvasActionFlip",onClick:t.flipHorizontally,label:e.buttonFlipHorizontal,icon:Br.createElement(st.flipHorizontal,null)},[et.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:e.buttonDuplicate,icon:Br.createElement(st.duplicate,null)},[et.DELETE]:{customButtonKey:"canvasActionDelete",onClick:t.delete,label:e.buttonDelete,icon:Br.createElement(st.delete,null)}};if(!t.isStickerSelected){return null}return Br.createElement(_i,{availableKeys:t.config.canvasActions,actions:i})};var Mm=R("sprite","stickerTool")(P(nS));import Lr from"react";var sS=({textTool:o,sprite:t})=>{const e=o.locale.canvasActions;const i={[et.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>o.setEditMode(true),label:e.buttonEdit,icon:Lr.createElement(st.edit,null)},[et.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:o.bringToFront,label:e.buttonBringToFront,icon:Lr.createElement(st.bringToFront,null),disabled:t.isOnTop},[et.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:o.duplicate,label:e.buttonDuplicate,icon:Lr.createElement(st.duplicate,null)},[et.DELETE]:{customButtonKey:"canvasActionDelete",onClick:o.delete,label:e.buttonDelete,icon:Lr.createElement(st.delete,null)}};if(!t.isSpriteText){return null}return Lr.createElement(_i,{availableKeys:o.config.canvasActions,actions:i})};var Em=R("textTool","sprite")(P(sS));import $i from"react";var aS=({sprite:o,textDesignTool:t})=>{const e=t.locale.canvasActions;const i={[et.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(true),label:e.buttonEdit,icon:$i.createElement(st.edit,null)},[et.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:$i.createElement(st.bringToFront,null),disabled:o.isOnTop},[et.INVERT]:{customButtonKey:"canvasActionInvert",onClick:t.invertBackground,label:e.buttonInvert,icon:$i.createElement(st.flipHorizontal,null)},[et.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:t.duplicate,label:e.buttonDuplicate,icon:$i.createElement(st.duplicate,null)},[et.DELETE]:{customButtonKey:"canvasActionDelete",onClick:()=>t.delete(),label:e.buttonDelete,icon:$i.createElement(st.delete,null)}};if(!t.isTextDesignSelected){return null}return $i.createElement(_i,{availableKeys:t.config.canvasActions,actions:i})};var Dm=R("sprite","textDesignTool")(P(aS));var Or=class extends Wi.Component{constructor(t){super(t);this.actionsRef=null;this.spriteControlPosition=()=>{const{config:t,sprite:e,canvas:{canvasSize:i}}=this.props;const{controlPadding:r,controlOffset:n}=t.measurements.canvasControls.sprite;const{x:a,y:l}=e.position;const{height:c,width:d}=e.currentSprite.size;const u=e.rotationWRTOutputRotation;const m=this.actionsRef.current;let g=new b(0,0);if(m){const x=m.getBoundingClientRect();g=new b(x.width/2+n,x.height+n)}const v=Math.abs(d*Math.sin(u))+Math.abs(c*Math.cos(u));const S=new b(a,l-v/2-r-n).clamp(g,new b(i.width,i.height).subtract(g));return{left:S.x,top:S.y}};this.getSpriteControls=()=>{const{sprite:t}=this.props;switch(t.tool){case f.TEXT:return Wi.createElement(Em,null);case f.TEXT_DESIGN:return Wi.createElement(Dm,null);case f.STICKER:return Wi.createElement(Mm,null);default:return null}};this.actionsRef=Wi.createRef();this.state={isMounted:false}}componentDidMount(){this.setState({isMounted:true})}render(){const{sprite:t}=this.props;const{isMounted:e}=this.state;const i=!t.isDragMode&&!t.isEditMode;const r=this.spriteControlPosition();return Wi.createElement(D.Controls.SpriteActionsWrapper,{"data-test":C.SpriteActions,ref:this.actionsRef,show:i&&e,style:{...r}},this.getSpriteControls())}};Or=s([R("sprite","config","editor","canvas"),P],Or);import Ee,{useRef as cs}from"react";var{Corner:ds}=D.Controls;var{Draggable:ps}=B;var zl=new b(0,0);var Al=new b(0,0);var Pm=P(()=>{const o=cs(null);const t=cs(null);const e=cs(null);const i=cs(null);const{config:r,sprite:n}=it();const{leftTopPosition:a,leftBottomPosition:l,rightTopPosition:c,rightBottomPosition:d}=n;const{borderWidth:u}=r.measurements.canvasControls.corner;const m=({clientX:x,clientY:w})=>{if(x!==void 0&&w!==void 0){n.onCornerDrag(Al.subtract(zl.subtract(new b(x,w))))}};const g=x=>{switch(x){case"leftTop":return a;case"leftBottom":return l;case"rightTop":return c;case"rightBottom":return d;default:return a}};const v=(x,w)=>{const{clientX:T,clientY:A}=x;zl=new b(T,A);Al=new b(g(w));n.clickableCanvas(false);n.setDragMode(true)};const S=()=>{n.clickableCanvas(true);n.setDragMode(false);n.spriteSnapshot("size");zl=new b(0,0);Al=new b(0,0)};return Ee.createElement(Ee.Fragment,null,Ee.createElement(ps,{nodeRef:o,onStop:S,onDrag:m,onStart:x=>v(x,"leftTop")},Ee.createElement(ds,{ref:o,"data-test":C.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:u})),Ee.createElement(ps,{nodeRef:e,onStop:S,onDrag:m,onStart:x=>v(x,"leftBottom")},Ee.createElement(ds,{ref:e,"data-test":C.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:u})),Ee.createElement(ps,{nodeRef:t,onStop:S,onDrag:m,onStart:x=>v(x,"rightTop")},Ee.createElement(ds,{ref:t,"data-test":C.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:u})),Ee.createElement(ps,{nodeRef:i,onStop:S,onDrag:m,onStart:x=>v(x,"rightBottom")},Ee.createElement(ds,{ref:i,"data-test":C.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:u})))});import Ni,{useRef as zm}from"react";import Am from"styled-components";var lS=Am.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;var cS=Am.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;var Bl=new b(0,0);var Ll=new b(0,0);var dS=({sprite:o,config:t})=>{const e=zm(null);const i=zm(null);const r=o.leftMidPosition;const n=o.rightMidPosition;const a=t.assetProvider.getPath("controls","/arrow-left.png");const l=t.assetProvider.getPath("controls","/arrow-right.png");const c=(m,g)=>{o.setDragMode(true);o.clickableCanvas(false);const{clientX:v,clientY:S}=m;Bl=new b(v,S);Ll=new b(g==="left"?r:n)};const d=()=>{o.clickableCanvas(true);o.setDragMode(false);o.addSnapshot(L.EDIT,o.textDesignLocale.padding);Bl=new b(0,0);Ll=new b(0,0)};const u=({clientX:m,clientY:g})=>{if(m!==void 0&&g!==void 0){const v=Ll.subtract(Bl.subtract(new b(m,g)));o.onPaddingDrag(v)}};return Ni.createElement(Ni.Fragment,null,Ni.createElement(B.Draggable,{nodeRef:e,onStart:m=>c(m,"left"),onDrag:u,onStop:d},Ni.createElement(lS,{ref:e,src:a})),Ni.createElement(B.Draggable,{nodeRef:i,onStart:m=>c(m,"right"),onDrag:u,onStop:d},Ni.createElement(cS,{ref:i,src:l})))};var Bm=R("sprite","config")(P(dS));import Lm,{useRef as pS}from"react";import hS from"styled-components";var Om=hS(D.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${o=>o.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${o=>o.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`;var Ol=new b(0,0);var Fl=new b(0,0);var uS=({config:o,sprite:t,snapping:e})=>{const i=pS(null);const r=t.rightBottomHandlePosition;const n=t.leftBottomHandlePosition;const a={x:(r.x+n.x)/2,y:(r.y+n.y)/2};const l=({clientX:g,clientY:v})=>{Ol=new b(g,v);Fl=new b(a);t.setDragMode(true);t.clickableCanvas(false)};const c=()=>{t.clickableCanvas(true);t.setDragMode(false);t.spriteSnapshot("rotation");e.hideRotationGuides();Ol=new b(0,0);Fl=new b(0,0)};const d=({clientX:g,clientY:v})=>{if(g!==void 0&&v!==void 0){const S=Fl.subtract(Ol.subtract(new b(g,v)));const x=t.position;const w=new b(x.x,x.y);const T=S.subtract(w);const A=Math.atan2(T.y,T.x)-Math.PI/2;const F=e.snapToRotation(A,T,t.currentRect);t.setRotation(F)}};const u=g=>{d(g)};const m=o.assetProvider.getPath("controls",`/${rc()?"rotate-windows":"rotate-osx"}.png`);return Lm.createElement(B.Draggable,{nodeRef:i,onStart:l,onDrag:u,onStop:c},Lm.createElement(Om,{ref:i,url:m}))};Om.defaultProps={theme:_t};var Fm=R("sprite","snapping","config")(P(uS));import Vi,{useRef as Rm}from"react";import Rl from"styled-components";var Hm=Rl(D.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`;var _m=Rl(Hm)`
  left: -3px;
  top: calc(
    50% - ${o=>o.theme.measurements.canvasControls.width.size/2}px
  );
`;var $m=Rl(Hm)`
  right: -3px;
  top: calc(
    50% - ${o=>o.theme.measurements.canvasControls.width.size/2}px
  );
`;var Hl=new b(0,0);var _l=new b(0,0);var mS=({sprite:o,textTool:t})=>{const e=Rm(null);const i=Rm(null);const r=o.leftMidPadPosition;const n=o.rightMidPadPosition;const a=(d,u)=>{o.setDragMode(true);o.clickableCanvas(false);const{clientX:m,clientY:g}=d;Hl=new b(m,g);_l=new b(u==="left"?r:n)};const l=()=>{o.clickableCanvas(true);o.setDragMode(false);o.addSnapshot(L.EDIT,o.textLocale.width);t.updateDefaultFontSize();Hl=new b(0,0);_l=new b(0,0)};const c=({clientX:d,clientY:u})=>{if(d!==void 0&&u!==void 0){const m=_l.subtract(Hl.subtract(new b(d,u)));o.onWidthDrag(m)}};return Vi.createElement(Vi.Fragment,null,Vi.createElement(B.Draggable,{nodeRef:e,onStart:d=>a(d,"left"),onDrag:c,onStop:l},Vi.createElement(_m,{ref:e})),Vi.createElement(B.Draggable,{nodeRef:i,onStart:d=>a(d,"right"),onDrag:c,onStop:l},Vi.createElement($m,{ref:i})))};_m.defaultProps={theme:_t};$m.defaultProps={theme:_t};var Wm=R("sprite","textTool")(P(mS));var{Draggable:gS}=B;var hs=new b(0,0);var $l=new b(0,0);var Nm=P(()=>{const o=fS();const{active:t,config:e,snapping:i,sprite:r}=it();const n=({clientX:T,clientY:A})=>{const F=$l.subtract(hs.subtract(new b(T,A)));const{x:H,y:X}=i.snapToPosition({x:F.x,y:F.y},r.currentRect);r.setPosition({x:H,y:X})};const a=T=>{const{clientX:A,clientY:F}=T;hs=new b(A,F);$l=new b(r.position);r.setDragMode(true);i.updateGuides()};const l=T=>{const{clientX:A,clientY:F}=T;const{x:H,y:X}=hs;hs=new b(0,0);$l=new b(0,0);r.setDragMode(false);if(H!==A&&X!==F){r.spriteSnapshot("position")}i.hidePositionGuides()};const c=T=>{T.preventDefault();T.stopPropagation();r.setEditMode(true)};const d=()=>{const T=t.tool;const A=r.tool;return r.isSpriteSelected&&T===A};if(!d()){return null}const{isSpriteText:u}=r;const m=r.isSpriteTextDesign&&r.textDesignToolStore.isInverted;const{height:g,width:v}=r.size;const S=r.spritePosition;const x=r.rotationWRTOutputRotation;const{controlPadding:w}=e.measurements.canvasControls.sprite;return Ue.createElement(D.Controls.Container,null,Ue.createElement(gS,{nodeRef:o,onStart:a,onDrag:n,onStop:l,rotation:x,position:S},Ue.createElement(D.Controls.Sprite,{ref:o,"data-test":C.Sprite,onDoubleClick:c,height:g,width:v},u&&Ue.createElement(Wm,null)||null,m&&Ue.createElement(Bm,null)||null,Ue.createElement(Pm,null),Ue.createElement(D.Controls.RotateHandle,{x:v/2+w/2},Ue.createElement(Fm,null)))),Ue.createElement(Or,null))});import wo from"react";import Pt,{useRef as Fr}from"react";import us,{css as Wl}from"styled-components";var{GridLine:ms}=D.Crop;var bS=D.Crop.Mask;var{Draggable:Rr}=B;var Co=3;var yS=us(si)`
  left: ${Co}px;
  top: ${Co}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`;var vS=us(si)(o=>{const{desktop:t}=o.theme.measurements.canvasControls.corner.touchable;const e=t/4-o.borderWidth;return Wl`
    left: ${e-t}px;
    top: ${Co}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `});var xS=us(si)(o=>{const{desktop:t}=o.theme.measurements.canvasControls.corner.touchable;const e=t/4-o.borderWidth;return Wl`
    left: ${e-t}px;
    top: ${e-t}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `});var SS=us(si)(o=>{const{desktop:t}=o.theme.measurements.canvasControls.corner.touchable;const e=t/4-o.borderWidth;return Wl`
    top: ${e-t}px;
    left: ${Co}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `});var CS=({transformTool:o})=>{const t=Fr(null);const e=Fr(null);const i=Fr(null);const r=Fr(null);const n=Fr(null);const{leftTopRespectFlip:a,leftBottomRespectFlip:l,rightTopRespectFlip:c,rightBottomRespectFlip:d}=o;const{height:u,width:m}=o.cropMaskSize;const{maxCropMaskSize:g,defaultCropMaskPosition:v}=o;const{isFlippedHorizontal:S,isFlippedVertical:x}=o;const w=g.width/2;const T=g.height/2;const A={...g,left:v.x,top:v.y};const F={height:u,width:m};const H=o.isDragMode?{transition:"unset"}:{};const X=Z=>{return S?w*2-Z:Z};const z=Z=>{return x?T*2-Z:Z};const j=(Z,_,$)=>{const pi=X(Z);const Nr=z(_);switch(at.getFlippedEdgeIndex($,S,x)){case 0:o.onLeftTop({x:pi,y:Nr});break;case 1:o.onLeftBottom({x:pi,y:Nr});break;case 2:o.onRightTop({x:pi,y:Nr});break;case 3:o.onRightBottom({x:pi,y:Nr});break;default:break}};const Y=(Z,_,$)=>{o.setDragMode(true);o.clickableCanvas(false);j(Z,_,$)};const ut=(Z,_,$)=>{j(Z,_,$)};const Ge=(Z,_,$)=>{o.setDragMode(false);j(Z,_,$);o.clickableCanvas(true);o.trackChanges()};const To=(Z,{x:_,y:$})=>{Y(_,$,0)};const Io=(Z,{x:_,y:$})=>{ut(_,$,0)};const Wr=(Z,{x:_,y:$})=>{Ge(_,$,0)};const Ef=(Z,{x:_,y:$})=>{Y(_,$,1)};const Df=(Z,{x:_,y:$})=>{ut(_,$,1)};const Pf=(Z,{x:_,y:$})=>{Ge(_,$,1)};const zf=(Z,{x:_,y:$})=>{Y(_,$,2)};const Af=(Z,{x:_,y:$})=>{ut(_,$,2)};const Bf=(Z,{x:_,y:$})=>{Ge(_,$,2)};const Lf=(Z,{x:_,y:$})=>{Y(_,$,3)};const Of=(Z,{x:_,y:$})=>{ut(_,$,3)};const Ff=(Z,{x:_,y:$})=>{Ge(_,$,3)};const Is=(Z,_)=>{const $=X(Z+m/2)-m/2;const pi=z(_+u/2)-u/2;o.changePosition({x:$,y:pi})};const Rf=(Z,{x:_,y:$})=>{o.setDragMode(true);o.clickableCanvas(false);Is(_,$)};const Hf=(Z,{x:_,y:$})=>{Is(_,$)};const _f=(Z,{x:_,y:$})=>{o.setDragMode(false);Is(_,$);o.clickableCanvas(true);o.trackChanges()};return Pt.createElement("div",{style:{...A,position:"absolute"}},Pt.createElement(Rr,{nodeRef:n,bounds:"parent",position:a,onStart:Rf,onDrag:Hf,onStop:_f},Pt.createElement(bS,{ref:n,style:{...F,...H}})),Pt.createElement(ms,{style:{left:a.x+m/3,top:a.y,height:u,width:1,...H}}),Pt.createElement(ms,{style:{left:a.x+m/3*2,top:a.y,height:u,width:1,...H}}),Pt.createElement(ms,{style:{left:a.x,top:a.y+u/3,height:1,width:m,...H}}),Pt.createElement(ms,{style:{left:a.x,top:a.y+u/3*2,height:1,width:m,...H}}),Pt.createElement(Rr,{nodeRef:t,bounds:"parent",position:{...a},onStart:To,onDrag:Io,onStop:Wr},Pt.createElement(yS,{ref:t,"data-test":C.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:Co,style:H})),Pt.createElement(Rr,{nodeRef:i,bounds:"parent",position:l,onStart:Ef,onDrag:Df,onStop:Pf},Pt.createElement(SS,{ref:i,"data-test":C.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:Co,style:H})),Pt.createElement(Rr,{nodeRef:e,bounds:"parent",position:c,onStart:zf,onDrag:Af,onStop:Bf},Pt.createElement(vS,{ref:e,"data-test":C.CropTopRight,vertical:"top",horizontal:"right",borderWidth:Co,style:H})),Pt.createElement(Rr,{nodeRef:r,bounds:"parent",position:d,onStart:Lf,onDrag:Of,onStop:Ff},Pt.createElement(xS,{ref:r,"data-test":C.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:Co,style:H})))};var Vm=R("transformTool")(P(CS));import ci from"react";import Hr from"styled-components";import De from"react";import fs,{css as Um}from"styled-components";var Gm=fs.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${o=>o.isVisible&&Um`
      display: inline-block;
    `}

  svg {
    color: ${o=>o.theme.foreground};
  }
`;var wS=fs.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`;var kS=fs.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${o=>o.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${o=>o.isVisible&&Um`
      display: inline-block;
    `}
`;var TS=fs.div`
  transform: translate(0, 0) !important;
`;var jm=class extends De.Component{constructor(t){super(t);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(t,{x:e})=>{const{flipHorizontally:i,flipVertically:r}=this.transformTool.rotateFlipState;if(i!==r){e*=-1}const n=this.transformTool.defaultAngle-e*this.DEGREES_PER_PIXEL;const a=Math.min(this.MAX_ROTATION,Math.max(n,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${a}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees);this.transformTool.trackChanges()};this.rotateRef=De.createRef()}get transformTool(){return this.props.transformTool}render(){const{config:t,canvasWidth:e,transformTool:i}=this.props;const{flipHorizontally:r,flipVertically:n}=this.transformTool.rotateFlipState;const a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minSliderWidth;const l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minValueWidth;const c=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle;const d=r===n?c*-1:c;const u=r!==n?i.rotationInDegrees*-1:i.rotationInDegrees;return De.createElement(wS,{"data-test":C.RotateSlider},De.createElement(B.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:true,disabled:!a},De.createElement(TS,{ref:this.rotateRef},De.createElement(Gm,{isVisible:a},De.createElement(st.dots,{width:90,height:15,x:d})),De.createElement(kS,{isVisible:l},u,"\xB0"),De.createElement(Gm,{isVisible:a},De.createElement(st.dots,{width:90,height:15,x:d})))))}};var Xm=R("transformTool","config")(P(jm));var IS=Hr(st.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`;var MS=Hr(st.rotate)`
  height: 16px;
  width: 16px;
`;var ES=Hr(st.flipHorizontal)`
  height: 16px;
  width: 16px;
`;var DS=Hr(st.flipVertical)`
  height: 16px;
  width: 16px;
`;var PS=Hr.div`
  display: inline-flex;
  transform: scale(0.9);

  svg {
    color: ${o=>o.theme.foreground};
  }
`;var zS=({transformTool:o,config:t,custom:e,canvas:i})=>{const r=o.locale.transformActions;const n=i.canvasSize.width;const a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&n>t.measurements.canvas.transform.minFlipWidth;const l=({customButtonKey:v,onClick:S,label:x,icon:w})=>{const T=e.getButton(v);return ci.createElement(T,{key:x,onClick:S,label:x,ariaLabel:x,icon:w,style:{margin:"0 5px"}})};const c=l({label:r.buttonFlipHorizontal,icon:ci.createElement(ES,null),onClick:()=>{o.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"});const d=l({label:r.buttonFlipVertical,icon:ci.createElement(DS,null),onClick:()=>{o.flipVertically()},customButtonKey:"transformActionFlipVertical"});const u=l({label:r.buttonRotateClockwise,icon:ci.createElement(IS,null),onClick:o.rotateClockwise,customButtonKey:"transformActionRotateClockwise"});const m=l({label:r.buttonRotateAntiClockwise,icon:ci.createElement(MS,null),onClick:o.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"});const g=t.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return ci.createElement(PS,{style:g,"data-test":C.FlipRotateControls},o.config.enableFlip&&a&&c||null,o.config.enableFlip&&a&&d||null,o.config.enableRotation&&ci.createElement(Xm,{canvasWidth:n})||null,o.config.enableRotation&&m||null,o.config.enableRotation&&u||null)};var Nl=R("transformTool","config","custom","canvas")(P(zS));var AS=D.Bar.Index;var{Backdrop:gs}=D.Crop;var BS=({transformTool:o,canvas:t,config:e})=>{const{leftTopRespectFlip:i,leftBottomRespectFlip:r,rightTopRespectFlip:n}=o;const{height:a}=o.cropMaskSize;const{height:l,width:c}=t.canvasSize;const{defaultCropMaskPosition:d}=o;const u=o.isDragMode?{transition:"unset"}:{};return wo.createElement(D.Controls.Container,null,wo.createElement(gs,{style:{left:0,top:0,width:c,height:i.y+d.y,...u}}),wo.createElement(gs,{style:{left:0,top:i.y+d.y,width:d.x+i.x,height:a,...u}}),wo.createElement(gs,{style:{left:n.x+d.x,top:n.y+d.y,width:c-n.x-d.x,height:a,...u}}),wo.createElement(gs,{style:{left:0,top:r.y+d.y,width:c,height:l-r.y-d.y+e.measurements.basicUIToolControlBar.controlsBarHeight,...u}}),wo.createElement(Vm,null),e.isLayoutAdvanced?wo.createElement(AS,{bottom:true},wo.createElement(Nl,null)):null)};var Ym=R("transformTool","canvas","config")(P(BS));import Vl from"react";import LS,{css as OS}from"styled-components";var FS=LS(D.Controls.Container)`
  ${o=>o.activeCursor?OS`
          cursor: move;
        `:""}
  z-index: ${o=>o.theme.measurements.zIndex.canvas.crop.dragImage};
`;var Km=class extends Vl.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDragging:false};this.containerRef=null;this.getCursorCoordinates=t=>{let e=0;let i=0;if(t.type.indexOf("touch")!==-1){const l=t;if(!l.touches.length){return this.INITIAL_POSITION}e=l.touches[0].clientX;i=l.touches[0].clientY}else{const l=t;e=l.clientX;i=l.clientY}const r=this.containerRef.current.getBoundingClientRect();const n=e-r.left;const a=i-r.top;return{x:n,y:a}};this.move=t=>{if(this.scale.canDrag){const{x:e,y:i}=this.getCursorCoordinates(t);if(e!==void 0&&i!==void 0){if(this.state.isDragging){const r={x:this.state.x-e,y:this.state.y-i};this.scale.setOffset(r)}}}};this.touchDrag=t=>{if(this.scale.canDrag){const{x:e,y:i}=this.getCursorCoordinates(t);if(e!==void 0&&i!==void 0){this.setState({x:e,y:i,isDragging:true})}}};this.drag=t=>{t.preventDefault();this.touchDrag(t)};this.stop=()=>{if(this.scale.canDrag){this.scale.savePosition();this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.touchEnd=t=>{t.preventDefault();t.stopPropagation();const{x:e,y:i}=this.state;if(e&&i){this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.containerRef=Vl.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:true})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get scale(){return this.props.scale}render(){return Vl.createElement(FS,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}};var qm=R("scale")(P(Km));var Jm=P(({children:o})=>{const t=RS(null);const{active:e,sprite:i,canvas:r}=it();const n=()=>{switch(e.tool){case f.FOCUS:return di.createElement(km,null);case f.TEXT:case f.TEXT_DESIGN:case f.STICKER:return di.createElement(Nm,null);case f.BRUSH:return di.createElement(Sm,null);case f.TRANSFORM:return di.createElement(Ym,null);default:return di.createElement(D.Controls.Container,null,di.createElement(qm,null))}};const a=d=>{d.preventDefault();d.stopPropagation();if(r==null?void 0:r.isCanvasClickable){let{clientX:u}=d;let{clientY:m}=d;if(d.type.indexOf("touch")!==-1){const x=d;if(!x.touches.length){return}u=x.touches[0].clientX;m=x.touches[0].clientY}const g=t.current.getBoundingClientRect();const v=u-g.left;const S=m-g.top;r.getContainersAtPreviewPoint({x:v,y:S})}};const l=d=>{if(d.code==="Tab"){i.selectLast()}};const{canvasSize:c}=r;return di.createElement(D.Controls.Wrapper,{"aria-hidden":true,ref:t,onClick:a,onKeyDown:l,height:c.height,width:c.width},o,n())});import Gl from"react";import jl,{css as Zm}from"styled-components";import HS from"react";import _S from"styled-components";var $S=_S.div`
  display: ${({isVisible:o})=>o?"block":"none"};
  position: absolute;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.snappingGuide};
`;var WS=({isVisible:o,className:t})=>{return HS.createElement($S,{isVisible:o,className:t})};var Ul=WS;var NS=jl(Ul)`
  background: ${o=>o.theme.snapping.positionGuideColor};
  ${o=>{if(o.direction==="horizontal"){return Zm`
        width: 100%;
        height: 2px;
        top: ${()=>o.position}px;
      `}return Zm`
      width: 2px;
      height: 100%;
      left: ${()=>o.position}px;
    `}}
`;var VS=jl(Ul)`
  border: none;
  border-top: 2px dashed ${o=>o.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:o})=>o.x}px;
  top: ${({position:o})=>o.y}px;
  transform: rotate(${({rotation:o})=>o}rad);
  width: 200%;
`;var US=jl.div`
  position: absolute;
  width: ${({width:o})=>o}px;
  height: ${({height:o})=>o}px;
  top: ${({top:o})=>o}px;
  left: ${({left:o})=>o}px;
  overflow: hidden;
`;var GS=({snapping:o,editor:t})=>{const{width:e,height:i}=t.getPreviewSize();const{x:r,y:n}=o.previewTopLeftPosition;const a=o.positionGuides.map(({direction:c,value:d,isVisible:u},m)=>Gl.createElement(NS,{key:`positionGuide-${m}`,direction:c,position:d,isVisible:u}));const l=o.rotationGuides.find(({isVisible:c})=>c);return Gl.createElement(US,{"data-test":C.SnappingLine,width:e,height:i,left:r,top:n},a,Gl.createElement(VS,{key:"rotationGuide",rotation:l?l.value:0,position:l?l.position:{x:0,y:0},isVisible:!!l}))};var Qm=R("snapping","editor")(P(GS));import jS from"react";import XS from"styled-components";var YS=XS.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`;var tf=()=>jS.createElement(YS,{alt:"watermark","data-test":C.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="});var ZS=P(function o(){const t=KS(null);const{canvas:e,config:i}=it();const r=(l=true)=>{if(t==null?void 0:t.current){const{clientWidth:c,clientHeight:d}=t.current;const u=ee();t.current.width=c*u;t.current.height=d*u;e.saveDimensions({width:c,height:d,render:l})}};const n=new Bo((0,ef.default)(()=>r(),100,{trailing:true}));qS(()=>{const l=t.current;e.setCanvasElement(l);return()=>{n.disconnect()}},[]);JS(()=>{r(false);n.observe(t.current)});const{licenseChecker:a}=i;return Ui.createElement(Ui.Fragment,null,a&&a.isWhiteLabel()?null:Ui.createElement(tf,null),Ui.createElement(D.Element,{ref:t,"aria-label":"Canvas","data-test":C.Canvas}),Ui.createElement(Jm,null,Ui.createElement(Qm,null)))});var of=class{constructor(t={},e={}){this.getAdvancedCategoryCard=()=>{return this.components.advancedUICategoryCard};this.getAdvancedItemCard=()=>{return this.components.advancedUIItemCard};this.getAdvancedToolbarItem=()=>{return this.components.advancedUIToolbarItem};this.getAdvancedToolbar=()=>{return this.components.advancedUIToolbar};this.getAdvancedToolControlBar=()=>{return this.components.advancedUIToolControlBar};this.getBasicToolbar=()=>{return this.components.basicUIToolbar};this.getBasicToolControlBar=()=>{return this.components.basicUIToolControlBar};this.getBasicToolItemsBar=()=>{return this.components.basicUIToolItemsBar};this.getDialog=()=>{return this.components.dialog};this.getButton=t=>{return this.components.buttons[t]};this.getColorItem=()=>{return this.components.colorItem};this.getCheckbox=()=>{return this.components.checkbox};const i={dialog:B.Dialog,colorItem:B.ColorItem,checkbox:B.Input.Checkbox,buttons:{mainCanvasActionUndo:D.Button.TextSecondary,mainCanvasActionRedo:D.Button.TextSecondary,mainCanvasActionExport:Us,mainCanvasActionClose:gi,canvasActionEdit:D.Controls.SpriteActionButton,canvasActionBringToFront:D.Controls.SpriteActionButton,canvasActionDuplicate:D.Controls.SpriteActionButton,canvasActionDelete:D.Controls.SpriteActionButton,canvasActionInvert:D.Controls.SpriteActionButton,canvasActionFlip:D.Controls.SpriteActionButton,transformActionFlipHorizontal:Po,transformActionFlipVertical:Po,transformActionRotateClockwise:Po,transformActionRotateAntiClockwise:Po,textAlignment:Po,toolControlBarPrimaryButton:Vs,toolControlBarSecondaryButton:gi}};this.components=Xt([i,e,t])}};import ko from"react";var QS=({modal:o,textTool:t,textDesignTool:e,custom:i})=>{const{type:r,identifier:n,isVisible:a,modalProps:l,positionOffset:c}=o;const{headerLabel:d,bodyLabel:u,confirmLabel:m,dismissLabel:g,handleClose:v,handleConfirm:S,handleDismiss:x}=l;const w=i.getDialog();if(r===Q.INFO){return ko.createElement(B.InfoModal,{headerLabel:d,bodyLabel:u},ko.createElement(w,{type:r,isVisible:a,identifier:n,position:c,handleClose:v,headerLabel:d,bodyLabel:u}))}if(r===Q.TEXT_EDIT){const{buttonSave:T,buttonClose:A}=t.locale.canvasControls;const F={type:r,isVisible:o.isVisible,confirmLabel:T,dismissLabel:A,headerLabel:t.locale.canvasControls.inputText};if(t.isTextSelected){return ko.createElement(B.TextEditModal,{...F,defaultText:O.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis},ko.createElement(w,{type:r,isVisible:a,identifier:n,position:c,handleClose:v,confirmLabel:T,dismissLabel:A,headerLabel:t.locale.canvasControls.inputText}))}if(e.isTextDesignSelected){return ko.createElement(B.TextEditModal,{...F,defaultText:U.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text,maxLength:e.config.maxCharacterLimit,allowEmojis:e.config.allowEmojis},ko.createElement(w,{type:r,isVisible:a,identifier:n,position:c,handleClose:v,confirmLabel:T,dismissLabel:A,headerLabel:t.locale.canvasControls.inputText}))}}return ko.createElement(B.ActionModal,{type:r,headerLabel:d,bodyLabel:u,confirmLabel:m,dismissLabel:g,handleClose:v,handleConfirm:S,handleDismiss:x},ko.createElement(w,{type:r,isVisible:a,identifier:n,position:c,confirmLabel:m,dismissLabel:g,headerLabel:d,bodyLabel:u,handleClose:v}))};var tC=R("textTool","textDesignTool","modal","custom")(P(QS));import Gi from"react";import nf from"styled-components";import bs from"react";import eC from"styled-components";var oC=eC.div`
  position: absolute;
  right: 8px;
  top: 8px;
`;var rf=class extends bs.Component{constructor(t){super(t);this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:false})};this.onSubmit=()=>{const{getCorrectValue:t}=this.props;const{isSubmitted:e,value:i}=this.state;if(!e){this.setState({value:t(parseInt(i,10)||0).toString(),isSubmitted:true})}};this.state={isSubmitted:false,value:t.value.toString()}}componentDidUpdate(t){const{value:e}=this.props;if(t.value!==e){this.setState({value:e.toString()})}}render(){const{id:t,isDisabled:e,label:i}=this.props;const{value:r}=this.state;return bs.createElement(B.Input.Text,{id:t,value:r,isDisabled:e,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:Mc(this.onSubmit)},bs.createElement(oC,null,bs.createElement(B.Input.Label,{label:i,htmlFor:t})))}};var Xl=rf;var iC=nf.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${o=>o.theme.measurements.inputs.cropSize.maxWidth}px;
`;var rC=nf.span`
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  color: ${o=>o.theme.textInput.foreground};
  margin-top: 10px;
  margin-right: 13px;
`;var nC="photoeditorsdk-transformScaleWidth";var sC="photoeditorsdk-transformScaleHeight";var aC=({showLabel:o=true,label:t,isDisabled:e,valueHeight:i,valueWidth:r,labelWidth:n,labelHeight:a,onSubmitWidth:l,onSubmitHeight:c})=>{return Gi.createElement("div",null,Gi.createElement(B.Input.Label,{label:t,show:o}),Gi.createElement(iC,null,Gi.createElement(Xl,{id:nC,value:r,getCorrectValue:l,label:n,isDisabled:e}),Gi.createElement(rC,null,"x"),Gi.createElement(Xl,{id:sC,value:i,getCorrectValue:c,label:a,isDisabled:e})))};var lC=aC;import cC from"styled-components";var dC=cC.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${Lp.scale} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;
  @media all and (min-width: 0) and (max-width: 599px) {
    min-width: 280px;
  }
`;var sf=dC;import af from"react";import pC,{css as hC}from"styled-components";var lf=hC`
  background: ${o=>o.theme.tabTitle.activeBackground};
  color: ${o=>o.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${o=>o.theme.tabTitle.activeBorderColor};
`;var uC=pC(Ke)`
  display: inline-flex;
  align-items: center;
  font-size: ${o=>o.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${o=>o.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${o=>o.theme.tabTitle.background};

  ${({isActive:o})=>o&&lf}

  &:active {
    ${lf}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`;var ys=class extends af.Component{constructor(){super(...arguments);this.onClick=()=>{const{label:t,onClick:e}=this.props;e(t)}}render(){const{activeTab:t,label:e}=this.props;return af.createElement(uC,{ariaLabel:e,isActive:t===e,onClick:this.onClick},e)}};var mC=cf(Do)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`;var fC=cf(gr)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);
  @media all and (min-width: 0) and (max-width: 499px) {
    left: 0;
    right: 0;
    transform: translateY(-120%);
    background: transparent;
    button {
      &:first-child {
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
      }
      &:last-child {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
      }
      &:not(:first-child):not(:last-child) {
        border-radius: 0;
      }
    }
  }
`;var df=class extends Lt.Component{constructor(t){super(t);this.onTabClick=t=>{this.setState({activeTab:t,toggleExtend:false})};this.getDropUp=()=>{const{length:t}=this.props;const{toggleExtend:e}=this.state;const i=Lt.Children.toArray(this.props.children);const r=Lt.Children.count(this.props.children);const n=i.slice(t,r);return Lt.createElement(fC,{show:e},n.map(a=>{const l=a.props.label||"";return Lt.createElement(Ke,{onClick:()=>this.onTabClick(l),key:l,ariaLabel:"More Options"},l)}))};this.extend=()=>{this.setState(({toggleExtend:t})=>({toggleExtend:!t}))};this.getExtension=()=>{return Lt.createElement(mC,{onClick:this.extend,ariaLabel:"Select Next"},"...")};const e=Lt.Children.count(this.props.children);const i=Lt.Children.toArray(this.props.children);this.state={activeTab:e?i[0].props&&i[0].props.label||"":"",toggleExtend:false}}render(){const{length:t}=this.props;const{activeTab:e,toggleExtend:i}=this.state;const r=Lt.Children.toArray(this.props.children).slice(0,t);const n=Lt.Children.count(this.props.children)>t;return Lt.createElement("div",null,r.map(a=>{if(a){const l=a.props.label||"";return Lt.createElement(ys,{activeTab:e,key:l,label:l,onClick:this.onTabClick})}return null}),n?this.getExtension():null,i?this.getDropUp():null,Lt.Children.map(this.props.children,a=>{if(!a||a.props&&a.props.label!==e){return null}return Lt.createElement(sf,{key:a.props.label},a.props.children)}))}};var _r=df;var bC=gC.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  transition: all 0.2s linear;
`;var xs=class extends $r.Component{constructor(t){super(t);this.updateLength=()=>{const{maxWidth:t,children:e}=this.props;let i=0;if(t){i=t}else{const a=window.innerWidth;const l=a>600?300:200;i=a-l}const r=$r.Children.count(e);const n=i-r*xs.TAB_WIDTH;if(n<0){const a=Math.round(Math.abs(n/xs.TAB_WIDTH));this.setState({length:r-a})}};this.state={length:$r.Children.count(this.props.children)}}componentDidMount(){window.addEventListener("resize",this.updateLength);this.updateLength()}componentWillUnmount(){window.removeEventListener("resize",this.updateLength)}render(){const{children:t}=this.props;const{length:e}=this.state;if(!e){return null}return $r.createElement(bC,null,$r.createElement(_r,{length:e},t))}};var vs=xs;vs.TAB_WIDTH=120;import yC,{css as vC}from"styled-components";var xC=yC.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${o=>o.full?vC`
            left: -24px;
            width: calc(100% + 48px);
          `:`
      left: 24px;
      width: calc(100% - 48px);
    `}
    border-bottom: 1px solid ${o=>o.theme.toolControlBar.separatorColor};
  }
`;var pf=xC;import SC from"styled-components";var CC=SC(B.Input.Slider).attrs(()=>({centerSlider:true}))`
  max-width: 224px;
`;var hf=CC;import wC,{css as kC}from"styled-components";var TC=wC.div.attrs(()=>({"data-test":C.CategoryItemsContainer}))`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:o})=>o&&kC`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`;var uf=TC;import IC,{css as mf}from"styled-components";var Yl=IC.div.attrs(()=>({"data-test":C.ToolControlBar}))`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  z-index: ${o=>o.theme.measurements.zIndex.toolControlBar};

  ${o=>o.show?mf`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          background: ${o.theme.toolControlBar.background};
          color: ${o.theme.toolControlBar.inputLabelForeground};
        `:mf`
          max-height: 0px;
        `}
`;Yl.defaultProps={show:true};import MC from"styled-components";var EC=MC.div`
  height: ${o=>o.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${o=>o.theme.toolControlBar.separatorColor};
  }
`;var ff=EC;import vf from"react";import DC,{css as xf}from"styled-components";import Ss,{css as Kl}from"styled-components";var gf=Ss.span`
  display: flex;
  cursor: pointer;
  z-index: ${o=>o.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;

  color: ${o=>o.theme.toolbar.foreground};
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing};
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;

  ${({isActive:o})=>o&&Kl`
      color: ${t=>t.theme.toolbar.activeForeground};
    `}

  &:active {
    color: ${o=>o.theme.toolbar.activeForeground};
  }
`;var bf=Kl`
  background-color: ${o=>o.theme.toolbar.activeBackground};
  color: ${o=>o.theme.toolbar.activeForeground};

  svg {
    color: ${o=>o.theme.toolbar.activeForeground};
  }
`;var Cs=Ss(wt)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${o=>o.theme.toolbar.foreground};
  background-color: ${o=>o.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${o=>o.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.label.case};
  font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;

  ${({isActive:o})=>o&&bf}
  ${({isDisabled:o})=>o&&Kl`
      &:disabled {
        cursor: default;
        pointer-events: none;
        opacity: ${t=>t.theme.button.textInactiveOpacity};
      }
    `}

  &:active {
    ${bf}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`;var yf=Ss.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  svg {
    color: ${o=>o.theme.toolbar.foreground};
  }
`;var ws=Ss.div.attrs({role:"none"})`
  display: flex;
  height: ${o=>o.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`;var PC=DC.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${o=>o.theme.toolbar.background};
  color: ${o=>o.theme.toolbar.foreground};
  z-index: ${o=>o.theme.measurements.zIndex.toolbar};

  ${o=>o.show?xf`
          height: ${o.theme.measurements.basicUIToolbar.closeHeight}px;
          ${Cs} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${ws} {
            height: ${o.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:xf`
          height: ${o.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`;var Sf=({show:o=false,className:t,style:e,children:i})=>vf.createElement(PC,{"data-test":C.Toolbar,show:o,className:t,style:e},vf.createElement(Ho,null,i));import ks from"react";var Cf=({children:o,label:t,isActive:e,isDisabled:i,onClick:r})=>ks.createElement(ws,{"aria-haspopup":true,"aria-expanded":e},ks.createElement(Cs,{"data-test":C.ToolbarItem,ariaLabel:t,onClick:r,isActive:e,isDisabled:i},ks.createElement(yf,null,o,ks.createElement(gf,{isActive:e},t))));import zC,{css as wf}from"styled-components";var AC=zC.li.attrs({role:"none"})`
  ${o=>!o.active?wf`
          height: ${o.theme.measurements.basicUIToolbar.openHeight}px;
        `:wf`
          height: ${o.theme.measurements.basicUIToolbar.closeHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${o=>o.theme.toolControlBar.separatorColor};
  }
`;var kf=AC;var mU={CardContainer:ah,ExpandableContainer:uf,CategoryContainer:ch,Card:sh,CardAvatar:js,CardLabel:lh,Toolbar:{Index:Sf,Item:Cf,Separator:kf},BarSeparator:pf,ItemsSeparator:ff,Itemsbar:Yl,Controlsbar:hh,ControlsbarContainer:fh,ResponsiveTabWrapper:vs,Slider:hf,TabWrapper:_r,Tab:ul,Other:{ControlsWrapper:uh,EmptyDiv:mh}};import ji,{useRef as Tf,useLayoutEffect as BC,useState as Ts}from"react";var If=Mo(rr());var ql=24;var kU=P(function o(){const{active:t,modal:e,editor:i}=it();const r=Tf(null);const n=Tf(null);const[a,l]=Ts(0);const[c,d]=Ts(null);const[u,m]=Ts(0);const[g,v]=Ts(0);BC(()=>{const T=()=>{const{measurements:H}=i.configStore;const{height:X,width:z}=n.current.getBoundingClientRect();const j=X*.95;const Y=z*.95;const ut=(X-j)/2;l(ut<ql+H.buttons.float.size?X-ql*2-H.buttons.float.size/2:X-ut+ql);m(j);v(Y)};const A=new Bo((0,If.default)(()=>T(),100,{trailing:true}));if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:true}).then(H=>{r.current.srcObject=H}).catch(()=>{e.showActionModal({type:Q.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(false)}})})}else{e.showActionModal({type:Q.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(false)}})}T();A.observe(n.current);const F=document.createElement("canvas");d(F);return()=>{hi(F);A.disconnect()}},[i,e,t]);const S=()=>{const T=r.current.srcObject;const A=T.getTracks();A.forEach(F=>{F.stop()});r.current.srcObject=null;t.selectWebcam(false)};const x=()=>{if(c){c.width=r.current.videoWidth;c.height=r.current.videoHeight;c.getContext("2d").drawImage(r.current,0,0);t.newImage(c.toDataURL("image/webp"));S()}};const w=t.webcamLabel;return ji.createElement(D.Wrapper,{ref:n},ji.createElement(D.Bar.Index,{transparentBackgound:true,style:{justifyContent:"flex-end"}},ji.createElement(D.Bar.ButtonGroup,null,ji.createElement(gi,{ariaLabel:w,onClick:S},w))),ji.createElement(D.Webcam,{style:{height:u,width:g},autoPlay:true,ref:r}),ji.createElement(D.Button.Float,{ariaLabel:"Click and Save",style:{top:a},onClick:x}))});import LC from"react";var DU=({children:o})=>{return LC.createElement(D.Container,{"data-test":C.CanvasContainer},o)};import RC from"react";import{useState as OC,useEffect as FC}from"react";var Mf=()=>{const[o,t]=OC([]);FC(()=>{var e;if(typeof window!==void 0&&((e=window.navigator)==null?void 0:e.mediaDevices)){let i=true;const r=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{if(i){t(n.map(({deviceId:a,groupId:l,kind:c,label:d})=>({deviceId:a,groupId:l,kind:c,label:d})))}}).catch(()=>null)};window.navigator.mediaDevices.addEventListener("devicechange",r);r();return()=>{i=false;window.navigator.mediaDevices.removeEventListener("devicechange",r)}}return null},[]);return o};var HU=P(({tool:o,fullWidth:t=false,icon:e,label:i,onClick:r})=>{const{custom:n}=it();const a=Mf();if(!a.some(({kind:c})=>c==="videoinput")){return null}const l=n.getButton("toolControlBarSecondaryButton");if(!l){return null}return RC.createElement(l,{"data-test":C.LibraryWebcamButton,tool:o,label:i,ariaLabel:i,onClick:r,fullWidth:t,icon:e})});export{P as a,mb as b,R as c,Ho as d,Qi as e,Do as f,Vs as g,gi as h,Po as i,Us as j,_o as k,Gs as l,js as m,k8 as n,B as o,Op as p,Ke as q,it as r,Vt as s,lO as t,cO as u,dO as v,st as w,pO as x,gl as y,Di as z,O as A,Xt as B,Yn as C,sx as D,Zx as E,Nl as F,ZS as G,of as H,tC as I,lC as J,kU as K,DU as L,HU as M,ul as N,mU as O};
