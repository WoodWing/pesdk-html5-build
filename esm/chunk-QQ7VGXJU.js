import{$ as Zl,$a as hc,A as Ul,Aa as ic,B as Gl,C as Ni,D as jl,Fa as rc,G as rt,H as f,Ha as nc,K as et,Ka as sc,L as Xl,La as gt,Ma as Ht,N as Yl,Na as ac,Pa as lc,Q as Do,Qa as Ui,R as fe,Ra as cc,S as Yt,Sa as y,Ta as dc,U as nt,Ua as pc,V as Kl,Va as M,Wa as ms,X as ql,Xa as re,Ya as wt,a as b,aa as us,ab as uc,b as w,bb as be,c as Xt,ca as v,cb as fs,d as Ll,da as Dt,db as gs,e as li,eb as mc,f as s,fb as fc,g as D,ga as Jl,gb as bs,h as Bl,ha as Z,hb as ys,i as E,ib as vs,j as d,jb as gc,k as Fr,ka as Ql,kb as Pe,l as Rr,lb as xs,m as Fl,mb as Ss,n as Vi,nb as bc,o as Rl,ob as yc,p as h,pa as tc,pb as vc,q as ft,qb as xc,r as Hl,rb as Hr,s as _l,sa as ec,sb as Cs,t as z,ta as ge,tb as Gi,u as $l,ua as Y,ub as ws,v as ci,vb as _r,w as me,wb as Sc,x as Wl,xa as oc,y as Vl,z as Nl}from"./chunk-6ATCXC7H.js";var Jr=Ll((h2,Uc)=>{var kf="Expected a function",Vc=0/0,Tf="[object Symbol]",Mf=/^\s+|\s+$/g,If=/^[-+]0x[0-9a-f]+$/i,Df=/^0b[01]+$/i,Ef=/^0o[0-7]+$/i,Pf=parseInt,zf=typeof global=="object"&&global&&global.Object===Object&&global,Af=typeof self=="object"&&self&&self.Object===Object&&self,Of=zf||Af||Function("return this")(),Lf=Object.prototype,Bf=Lf.toString,Ff=Math.max,Rf=Math.min,Hs=function(){return Of.Date.now()};function Hf(o,t,e){var i,r,n,a,l,c,p=0,u=!1,m=!1,g=!0;if(typeof o!="function")throw new TypeError(kf);t=Nc(t)||0,_s(e)&&(u=!!e.leading,m="maxWait"in e,n=m?Ff(Nc(e.maxWait)||0,t):n,g="trailing"in e?!!e.trailing:g);function x(L){var K=i,Q=r;return i=r=void 0,p=L,a=o.apply(Q,K),a}function S(L){return p=L,l=setTimeout(T,t),u?x(L):a}function C(L){var K=L-c,Q=L-p,Mt=t-K;return m?Rf(Mt,n-Q):Mt}function P(L){var K=L-c,Q=L-p;return c===void 0||K>=t||K<0||m&&Q>=n}function T(){var L=Hs();if(P(L))return R(L);l=setTimeout(T,C(L))}function R(L){return l=void 0,g&&i?x(L):(i=r=void 0,a)}function $(){l!==void 0&&clearTimeout(l),p=0,i=c=r=l=void 0}function W(){return l===void 0?a:R(Hs())}function it(){var L=Hs(),K=P(L);if(i=arguments,r=this,c=L,K){if(l===void 0)return S(c);if(m)return l=setTimeout(T,t),x(c)}return l===void 0&&(l=setTimeout(T,t)),a}return it.cancel=$,it.flush=W,it}function _s(o){var t=typeof o;return!!o&&(t=="object"||t=="function")}function _f(o){return!!o&&typeof o=="object"}function $f(o){return typeof o=="symbol"||_f(o)&&Bf.call(o)==Tf}function Nc(o){if(typeof o=="number")return o;if($f(o))return Vc;if(_s(o)){var t=typeof o.valueOf=="function"?o.valueOf():o;o=_s(t)?t+"":t}if(typeof o!="string")return o===0?o:+o;o=o.replace(Mf,"");var e=Df.test(o);return e||Ef.test(o)?Pf(o.slice(2),e?2:8):If.test(o)?Vc:+o}Uc.exports=Hf});var Wd=Ll(($5,$d)=>{var Rd="Expected a function",Hd=0/0,ib="[object Symbol]",rb=/^\s+|\s+$/g,nb=/^[-+]0x[0-9a-f]+$/i,sb=/^0b[01]+$/i,ab=/^0o[0-7]+$/i,lb=parseInt,cb=typeof global=="object"&&global&&global.Object===Object&&global,db=typeof self=="object"&&self&&self.Object===Object&&self,pb=cb||db||Function("return this")(),hb=Object.prototype,ub=hb.toString,mb=Math.max,fb=Math.min,la=function(){return pb.Date.now()};function gb(o,t,e){var i,r,n,a,l,c,p=0,u=!1,m=!1,g=!0;if(typeof o!="function")throw new TypeError(Rd);t=_d(t)||0,Tn(e)&&(u=!!e.leading,m="maxWait"in e,n=m?mb(_d(e.maxWait)||0,t):n,g="trailing"in e?!!e.trailing:g);function x(L){var K=i,Q=r;return i=r=void 0,p=L,a=o.apply(Q,K),a}function S(L){return p=L,l=setTimeout(T,t),u?x(L):a}function C(L){var K=L-c,Q=L-p,Mt=t-K;return m?fb(Mt,n-Q):Mt}function P(L){var K=L-c,Q=L-p;return c===void 0||K>=t||K<0||m&&Q>=n}function T(){var L=la();if(P(L))return R(L);l=setTimeout(T,C(L))}function R(L){return l=void 0,g&&i?x(L):(i=r=void 0,a)}function $(){l!==void 0&&clearTimeout(l),p=0,i=c=r=l=void 0}function W(){return l===void 0?a:R(la())}function it(){var L=la(),K=P(L);if(i=arguments,r=this,c=L,K){if(l===void 0)return S(c);if(m)return l=setTimeout(T,t),x(c)}return l===void 0&&(l=setTimeout(T,t)),a}return it.cancel=$,it.flush=W,it}function bb(o,t,e){var i=!0,r=!0;if(typeof o!="function")throw new TypeError(Rd);return Tn(e)&&(i="leading"in e?!!e.leading:i,r="trailing"in e?!!e.trailing:r),gb(o,t,{leading:i,maxWait:t,trailing:r})}function Tn(o){var t=typeof o;return!!o&&(t=="object"||t=="function")}function yb(o){return!!o&&typeof o=="object"}function vb(o){return typeof o=="symbol"||yb(o)&&ub.call(o)==ib}function _d(o){if(typeof o=="number")return o;if(vb(o))return Hd;if(Tn(o)){var t=typeof o.valueOf=="function"?o.valueOf():o;o=Tn(t)?t+"":t}if(typeof o!="string")return o===0?o:+o;o=o.replace(rb,"");var e=sb.test(o);return e||ab.test(o)?lb(o.slice(2),e?2:8):nb.test(o)?Hd:+o}$d.exports=bb});import Km from"styled-components";import Xi from"react";import jm,{css as Xm}from"styled-components";import{css as Nm}from"styled-components";var kt=Nm`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${o=>o.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${o=>o.theme.focusOutlineColor};
  }
`;import{css as Um}from"styled-components";var di=Um`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`;import ji from"styled-components";import{keyframes as Gm}from"styled-components";var $r=Gm`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`;var Wr=ji.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,ks=ji(Wr)``,zt=ji(Wr)``,pi=ji(Wr)``,Vr={display:"none",left:0,top:0},Nr=ji(Wr)`
  display: ${({display:o})=>o};
  left: ${({left:o})=>o}px;
  top: ${({top:o})=>o}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${$r} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`;var ne=Xm`
  color: ${o=>o.theme.button.activeForeground};
  border-color: ${o=>o.theme.button.activeForeground};

  svg {
    color: ${o=>o.theme.button.activeForeground};
  }
`,Ym=jm.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  font-size: ${o=>o.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button1.case};
  font-family: ${o=>o.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${kt}

  /* Active */

  &:active {
    ${ne}
  }

  ${({isActive:o})=>o&&ne}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${zt} {
      background-color: ${o=>o.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${pi} {
      background-color: ${o=>o.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${o=>o.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${o=>o.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`,At=class extends Xi.Component{constructor(){super(...arguments);this.state=Vr;this.timeout=null;this.onClick=t=>{let e=t.currentTarget.getBoundingClientRect(),i=t.pageX-e.left,r=t.pageY-e.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(i,r)}):this.setRippleState(i,r),this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){let m=this.props,{isActive:t,isDisabled:e,label:i,ariaLabel:r,children:n,className:a}=m,l=Xt(m,["isActive","isDisabled","label","ariaLabel","children","className"]),{left:c,top:p,display:u}=this.state;return Xi.createElement(Ym,w(b({"data-test":r,className:a,isActive:t,disabled:e,"aria-label":r},l),{onClick:this.onClick}),i,n,Xi.createElement(Nr,{display:u,left:c,top:p}),Xi.createElement(zt,null),Xi.createElement(pi,null))}};At.defaultProps={type:"button",isDisabled:!1,isActive:!1};var Yi=Km(At)`
  color: ${o=>o.theme.button.textPrimaryForeground};

  svg {
    color: ${o=>o.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:o})=>o&&ne}

  ${zt} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }
`;import qm from"styled-components";var Ki=qm(At)`
  color: ${o=>o.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:o})=>o&&ne}

  ${zt} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${o=>o.theme.button.textSecondaryForeground};
  }
`;import tf from"styled-components";import Ts from"react";import Ms,{css as Is}from"styled-components";var Zm=Ms(At)`
  ${({fullWidth:o})=>o&&Is`
      width: 100%;
    `}
`,Jm=Ms.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`,Qm=Ms.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:o})=>o&&Is`
      opacity: ${t=>t.theme.button.textInactiveOpacity};
    `}
  ${({hasIcon:o})=>o&&Is`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`,se=a=>{var l=a,{label:o,children:t,icon:e,fullWidth:i,isDisabled:r}=l,n=Xt(l,["label","children","icon","fullWidth","isDisabled"]);let c=Ts.createElement(Qm,{hasIcon:!!e,isDisabled:r},o,t);return Ts.createElement(Zm,b({fullWidth:i,isDisabled:r},n),e&&Ts.createElement(Jm,null,e),(t||o)&&c)};var Ds=tf(se)`
  background: ${o=>o.theme.button.outlinedPrimaryBackground};
  color: ${o=>o.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${o=>o.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${o=>o.theme.button.outlinedPrimaryForeground};
  }
`;import ef from"styled-components";var hi=ef(se)`
  background: ${o=>o.theme.button.outlinedSecondaryBackground};
  color: ${o=>o.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${o=>o.theme.button.outlinedBorderColor};

  svg {
    color: ${o=>o.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:o})=>o&&ne}
`;import Cc from"react";import wc from"styled-components";var of=wc(At)`
  color: ${o=>o.theme.foreground};

  svg {
    color: ${o=>o.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:o})=>o&&ne}

  ${zt} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }
`,rf=wc.div`
  display: flex;
  &:focus {
    outline: none;
  }
`,Eo=r=>{var n=r,{label:o,icon:t,children:e}=n,i=Xt(n,["label","icon","children"]);return Cc.createElement(of,b({},i),Cc.createElement(rf,null,t))};import nf from"styled-components";var Es=nf(se)`
  background: ${o=>o.theme.button.containedPrimaryBackground};
  color: ${o=>o.theme.button.containedPrimaryForeground};
  border: 1px solid ${o=>o.theme.button.containedPrimaryBackground};

  &:active {
    color: ${o=>o.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${o=>o.theme.button.containedPrimaryForeground};

    &:active {
      color: ${o=>o.theme.button.containedPrimaryForeground};
    }
  }
`;import qi from"react";import Zi,{css as ui}from"styled-components";var sf=Zi.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${o=>o.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.label.case};
  ${o=>o.withBackground?ui`
          color: ${o.theme.card.labelForeground};
        `:ui`
          color: ${o.theme.card.foreground};
        `}
`,af=Zi.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  left: 0;
  ${o=>o.withBackground?ui`
          color: ${o.theme.card.labelForeground};
          height: 40px;
          background: ${o.theme.card.labelBackground};
        `:ui`
          color: ${o.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`,lf=Zi.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${o=>o.theme.card.labelForeground};
  ${o=>o.withBackground?ui`
          border-top-color: ${o.theme.card.labelForeground};
        `:ui`
          border-top-color: ${o.theme.card.foreground};
        `}
  transform: rotate(${o=>o.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`,cf=Zi.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`,df=Zi.div`
  ${di}
`,pf=({children:o,className:t,caret:e,isActive:i,style:r,withBackground:n,hidden:a})=>{if(a)return qi.createElement(df,null,o);let l=()=>qi.createElement(cf,null,qi.createElement(lf,{"aria-hidden":!0,rotation:i?180:0,withBackground:n}));return qi.createElement(af,{className:t,withBackground:n,style:r},qi.createElement(sf,{"data-test":M.CardLabel,withBackground:n},o,e&&l()))};import hf from"styled-components";var uf=hf.div.attrs(o=>({"data-test":M.CardAvatar,style:{backgroundImage:`url(${o.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`;import{keyframes as mf}from"styled-components";var kc=mf`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`;import{keyframes as ff}from"styled-components";var Ur=ff`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`;import Ao from"react";var Kt=[];var Tc=function(){return Kt.some(function(o){return o.activeTargets.length>0})};var Mc=function(){return Kt.some(function(o){return o.skippedTargets.length>0})};var Ic="ResizeObserver loop completed with undelivered notifications.",Dc=function(){var o;typeof ErrorEvent=="function"?o=new ErrorEvent("error",{message:Ic}):(o=document.createEvent("Event"),o.initEvent("error",!1,!1),o.message=Ic),window.dispatchEvent(o)};var Po;(function(o){o.BORDER_BOX="border-box",o.CONTENT_BOX="content-box",o.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Po||(Po={}));var Ps=function(){function o(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return o.prototype.toJSON=function(){var t=this,e=t.x,i=t.y,r=t.top,n=t.right,a=t.bottom,l=t.left,c=t.width,p=t.height;return{x:e,y:i,top:r,right:n,bottom:a,left:l,width:c,height:p}},o.fromRect=function(t){return new o(t.x,t.y,t.width,t.height)},o}();var Ji=function(o){return o instanceof SVGElement&&"getBBox"in o},Gr=function(o){if(Ji(o)){var t=o.getBBox(),e=t.width,i=t.height;return!e&&!i}var r=o,n=r.offsetWidth,a=r.offsetHeight;return!(n||a||o.getClientRects().length)},zs=function(o){var t,e,i=(e=(t=o)===null||t===void 0?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(i&&o instanceof i.Element)},Ec=function(o){switch(o.tagName){case"INPUT":if(o.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};var zo=typeof window!="undefined"?window:{};var jr=new WeakMap,Pc=/auto|scroll/,gf=/^tb|vertical/,bf=/msie|trident/i.test(zo.navigator&&zo.navigator.userAgent),ye=function(o){return parseFloat(o||"0")},mi=function(o,t,e){return o===void 0&&(o=0),t===void 0&&(t=0),e===void 0&&(e=!1),Object.freeze({inlineSize:(e?t:o)||0,blockSize:(e?o:t)||0})},zc=Object.freeze({devicePixelContentBoxSize:mi(),borderBoxSize:mi(),contentBoxSize:mi(),contentRect:new Ps(0,0,0,0)}),As=function(o,t){if(t===void 0&&(t=!1),jr.has(o)&&!t)return jr.get(o);if(Gr(o))return jr.set(o,zc),zc;var e=getComputedStyle(o),i=Ji(o)&&o.ownerSVGElement&&o.getBBox(),r=!bf&&e.boxSizing==="border-box",n=gf.test(e.writingMode||""),a=!i&&Pc.test(e.overflowY||""),l=!i&&Pc.test(e.overflowX||""),c=i?0:ye(e.paddingTop),p=i?0:ye(e.paddingRight),u=i?0:ye(e.paddingBottom),m=i?0:ye(e.paddingLeft),g=i?0:ye(e.borderTopWidth),x=i?0:ye(e.borderRightWidth),S=i?0:ye(e.borderBottomWidth),C=i?0:ye(e.borderLeftWidth),P=m+p,T=c+u,R=C+x,$=g+S,W=l?o.offsetHeight-$-o.clientHeight:0,it=a?o.offsetWidth-R-o.clientWidth:0,L=r?P+R:0,K=r?T+$:0,Q=i?i.width:ye(e.width)-L-it,Mt=i?i.height:ye(e.height)-K-W,je=Q+P+it+R,Mo=Mt+T+W+$,Io=Object.freeze({devicePixelContentBoxSize:mi(Math.round(Q*devicePixelRatio),Math.round(Mt*devicePixelRatio),n),borderBoxSize:mi(je,Mo,n),contentBoxSize:mi(Q,Mt,n),contentRect:new Ps(m,c,Q,Mt)});return jr.set(o,Io),Io},Xr=function(o,t,e){var i=As(o,e),r=i.borderBoxSize,n=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(t){case Po.DEVICE_PIXEL_CONTENT_BOX:return a;case Po.BORDER_BOX:return r;default:return n}};var Os=function(){function o(t){var e=As(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=[e.borderBoxSize],this.contentBoxSize=[e.contentBoxSize],this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]}return o}();var Yr=function(o){if(Gr(o))return 1/0;for(var t=0,e=o.parentNode;e;)t+=1,e=e.parentNode;return t};var Ac=function(){var o=1/0,t=[];Kt.forEach(function(a){if(a.activeTargets.length!==0){var l=[];a.activeTargets.forEach(function(p){var u=new Os(p.target),m=Yr(p.target);l.push(u),p.lastReportedSize=Xr(p.target,p.observedBox),m<o&&(o=m)}),t.push(function(){a.callback.call(a.observer,l,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var e=0,i=t;e<i.length;e++){var r=i[e];r()}return o};var Ls=function(o){Kt.forEach(function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach(function(r){r.isActive()&&(Yr(r.target)>o?e.activeTargets.push(r):e.skippedTargets.push(r))})})};var Oc=function(){var o=0;for(Ls(o);Tc();)o=Ac(),Ls(o);return Mc()&&Dc(),o>0};var Bs,Lc=[],yf=function(){return Lc.splice(0).forEach(function(o){return o()})},Bc=function(o){if(!Bs){var t=0,e=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return yf()}).observe(e,i),Bs=function(){e.textContent=""+(t?t--:t++)}}Lc.push(o),Bs()};var Fc=function(o){Bc(function(){requestAnimationFrame(o)})};var Kr=0,vf=function(){return!!Kr},xf=250,Sf={attributes:!0,characterData:!0,childList:!0,subtree:!0},Rc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Hc=function(o){return o===void 0&&(o=0),Date.now()+o},Fs=!1,Cf=function(){function o(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return o.prototype.run=function(t){var e=this;if(t===void 0&&(t=xf),!Fs){Fs=!0;var i=Hc(t);Fc(function(){var r=!1;try{r=Oc()}finally{if(Fs=!1,t=i-Hc(),!vf())return;r?e.run(1e3):t>0?e.run(t):e.start()}})}},o.prototype.schedule=function(){this.stop(),this.run()},o.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Sf)};document.body?e():zo.addEventListener("DOMContentLoaded",e)},o.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Rc.forEach(function(e){return zo.addEventListener(e,t.listener,!0)}))},o.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Rc.forEach(function(e){return zo.removeEventListener(e,t.listener,!0)}),this.stopped=!0)},o}(),qr=new Cf,Rs=function(o){!Kr&&o>0&&qr.start(),Kr+=o,!Kr&&qr.stop()};var wf=function(o){return!Ji(o)&&!Ec(o)&&getComputedStyle(o).display==="inline"},_c=function(){function o(t,e){this.target=t,this.observedBox=e||Po.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return o.prototype.isActive=function(){var t=Xr(this.target,this.observedBox,!0);return wf(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},o}();var $c=function(){function o(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e}return o}();var Zr=new WeakMap,Wc=function(o,t){for(var e=0;e<o.length;e+=1)if(o[e].target===t)return e;return-1},Qi=function(){function o(){}return o.connect=function(t,e){var i=new $c(t,e);Zr.set(t,i)},o.observe=function(t,e,i){var r=Zr.get(t),n=r.observationTargets.length===0;Wc(r.observationTargets,e)<0&&(n&&Kt.push(r),r.observationTargets.push(new _c(e,i&&i.box)),Rs(1),qr.schedule())},o.unobserve=function(t,e){var i=Zr.get(t),r=Wc(i.observationTargets,e),n=i.observationTargets.length===1;r>=0&&(n&&Kt.splice(Kt.indexOf(i),1),i.observationTargets.splice(r,1),Rs(-1))},o.disconnect=function(t){var e=this,i=Zr.get(t);i.observationTargets.slice().forEach(function(r){return e.unobserve(t,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},o}();var tr=function(){function o(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Qi.connect(this,t)}return o.prototype.observe=function(t,e){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!zs(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Qi.observe(this,t,e)},o.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!zs(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Qi.unobserve(this,t)},o.prototype.disconnect=function(){Qi.disconnect(this)},o.toString=function(){return"function ResizeObserver () { [polyfill code] }"},o}();var Gc=li(Jr());import Vf from"styled-components";import Wf from"react";var Qr=Wf.createContext({});var Nf=Vf.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${o=>o.theme.background};
  color: ${o=>o.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${o=>o.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${o=>o.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${o=>o.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`,$s=class extends Ao.Component{constructor(t){super(t);this.node=Ao.createRef();this.saveEditorDimensions=t=>{this.setState({contextValue:{element:t,rect:t.getBoundingClientRect()}})};var e;if((e=Ao)==null?void 0:e.version){let i=Number.parseInt(Ao.version.split(".")[0],10),r=Number.parseInt(Ao.version.split(".")[1],10);(i<16||i===16&&r<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,Gc.default)(this.saveEditorDimensions,100),this.resizeObserver=new tr(([i])=>{this.saveEditorDimensions(i.target)}),this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var t;((t=this.node)==null?void 0:t.current)&&this.resizeObserver.observe(this.node.current)}componentWillUnmount(){var t;((t=this.node)==null?void 0:t.current)&&this.resizeObserver.unobserve(this.node.current)}render(){let{children:t}=this.props,{contextValue:e}=this.state;return Ao.createElement(Nf,{ref:this.node,"data-test":M.EditorContainer},Ao.createElement(Qr.Provider,{value:e},t))}};import pn from"react";import Oo,{PureComponent as cg,Component as Ys,forwardRef as Ks,memo as id,createElement as dg}from"react";import{useState as Uf}from"react";if(!Uf)throw new Error("mobx-react-lite requires React with Hooks support");if(!Rl)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");import{unstable_batchedUpdates as jc}from"react-dom";import{useCallback as jf,useEffect as I2,useState as Xf}from"react";var Gf=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var i=e.call(o),r,n=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)n.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return n};function Ws(){var o=Gf(Xf(0),2),t=o[1],e=jf(function(){t(function(i){return i+1})},[]);return e}function Xc(o){return typeof Symbol=="function"?Symbol.for(o):"__$mobx-react "+o+"__"}var Yf={};function Yc(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:Yf}var Kf=Xc("observerBatching");function qf(o){o()}function tn(o){o||(o=qf),Hl({reactionScheduler:o}),Yc()[Kf]=!0}var Zf=!1;function ve(){return Zf}import{forwardRef as ig,memo as ed}from"react";import Gs from"react";function Kc(o){return _l(o)}function qc(o){var t={cleanAt:Date.now()+Jf,reaction:o};return t}var Jf=1e4,Qf=1e4,er=new Set,Vs;function Zc(){Vs===void 0&&(Vs=setTimeout(tg,Qf))}function Jc(o){er.add(o),Zc()}function Qc(o){er.delete(o)}function tg(){Vs=void 0;var o=Date.now();er.forEach(function(t){var e=t.current;e&&o>=e.cleanAt&&(e.reaction.dispose(),t.current=null,er.delete(t))}),er.size>0&&Zc()}import eg from"react";var en=!1,on=[];function Ns(o){return function(){en?on.push(o):o()}}function Us(o){en=!0,on=[];try{var t=o();en=!1;var e=on.length>0?on:void 0;return eg.useLayoutEffect(function(){e&&e.forEach(function(i){return i()})},[e]),t}finally{en=!1}}var og={};function td(o){return"observer"+o}function fi(o,t,e){if(t===void 0&&(t="observed"),e===void 0&&(e=og),ve())return o();var i=e.useForceUpdate||Ws,r=i(),n=Ns(r),a=Gs.useRef(null);if(!a.current){var l=new Vi(td(t),function(){c.mounted?n():(l.dispose(),a.current=null)}),c=qc(l);a.current=c,Jc(a)}var p=a.current.reaction;return Gs.useDebugValue(p,Kc),Gs.useEffect(function(){return Qc(a),a.current?a.current.mounted=!0:(a.current={reaction:new Vi(td(t),function(){n()}),cleanAt:1/0},n()),function(){a.current.reaction.dispose(),a.current=null}},[]),Us(function(){var u,m;if(p.track(function(){try{u=o()}catch(g){m=g}}),m)throw m;return u})}var js=function(){return js=Object.assign||function(o){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r])}return o},js.apply(this,arguments)};function Xs(o,t){if(ve())return o;var e=js({forwardRef:!1},t),i=o.displayName||o.name,r=function(a,l){return fi(function(){return o(a,l)},i)};r.displayName=i;var n;return e.forwardRef?n=ed(ig(r)):n=ed(r),ng(o,n),n.displayName=i,n}var rg={$$typeof:!0,render:!0,compare:!0,type:!0};function ng(o,t){Object.keys(o).forEach(function(e){rg[e]||Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}function gi(o){var t=o.children,e=o.render,i=t||e;return typeof i!="function"?null:fi(i)}gi.propTypes={children:od,render:od};gi.displayName="Observer";function od(o,t,e,i,r){var n=t==="children"?"render":"children",a=typeof o[t]=="function",l=typeof o[n]=="function";return a&&l?new Error("MobX Observer: Do not use children and render in the same time in`"+e):a||l?null:new Error("Invalid prop `"+r+"` of type `"+typeof o[t]+"` supplied to `"+e+"`, expected `function`.")}import tw from"react";import cw from"react";tn(jc);var rd=0;function pg(o){if(typeof Symbol=="function")return Symbol(o);var t="__$mobx-react "+o+" ("+rd+")";return rd++,t}var qs={};function Xe(o){return qs[o]||(qs[o]=pg(o)),qs[o]}function nd(o,t){if(sd(o,t))return!0;if(typeof o!="object"||o===null||typeof t!="object"||t===null)return!1;var e=Object.keys(o),i=Object.keys(t);if(e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!Object.hasOwnProperty.call(t,e[r])||!sd(o[e[r]],t[e[r]]))return!1;return!0}function sd(o,t){return o===t?o!==0||1/o==1/t:o!==o&&t!==t}var hg={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function ug(o,t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(o));Object.getOwnPropertyNames(o).forEach(function(i){!hg[i]&&e.indexOf(i)===-1&&Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}function ze(o,t,e){Object.hasOwnProperty.call(o,t)?o[t]=e:Object.defineProperty(o,t,{enumerable:!1,configurable:!0,writable:!0,value:e})}var ad=Xe("patchMixins"),ld=Xe("patchedDefinition");function mg(o,t){var e=o[ad]=o[ad]||{},i=e[t]=e[t]||{};return i.locks=i.locks||0,i.methods=i.methods||[],i}function cd(o,t){for(var e=this,i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];t.locks++;try{var a;return o!=null&&(a=o.apply(this,r)),a}finally{t.locks--,t.locks===0&&t.methods.forEach(function(l){l.apply(e,r)})}}function dd(o,t){var e=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];cd.call.apply(cd,[this,o,t].concat(n))};return e}function fg(o,t,e){var i=mg(o,t);i.methods.indexOf(e)<0&&i.methods.push(e);var r=Object.getOwnPropertyDescriptor(o,t);if(!(r&&r[ld])){var n=o[t],a=pd(o,t,r?r.enumerable:void 0,i,n);Object.defineProperty(o,t,a)}}function pd(o,t,e,i,r){var n,a=dd(r,i);return n={},n[ld]=!0,n.get=function(){return a},n.set=function(c){if(this===o)a=dd(c,i);else{var p=pd(this,t,e,i,c);Object.defineProperty(this,t,p)}},n.configurable=!0,n.enumerable=e,n}var Zs=$l||"$mobx",hd=Xe("isMobXReactObserver"),ud=Xe("isUnmounted"),rn=Xe("skipRender"),nn=Xe("isForcingUpdate");function gg(o){var t=o.prototype;if(o[hd]){var e=Js(t);console.warn("The provided component class ("+e+`) 
                has already been declared as an observer component.`)}else o[hd]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(o.__proto__!==cg){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=md;else if(t.shouldComponentUpdate!==md)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}fd(t,"props"),fd(t,"state");var i=t.render;return t.render=function(){return bg.call(this,i)},fg(t,"componentWillUnmount",function(){var r;if(ve()!==!0&&((r=this.render[Zs])===null||r===void 0||r.dispose(),this[ud]=!0,!this.render[Zs])){var n=Js(this);console.warn("The reactive render of an observer class component ("+n+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),o}function Js(o){return o.displayName||o.name||o.constructor&&(o.constructor.displayName||o.constructor.name)||"<component>"}function bg(o){var t=this;if(ve()===!0)return o.call(this);ze(this,rn,!1),ze(this,nn,!1);var e=Js(this),i=o.bind(this),r=!1,n=new Vi(e+".render()",function(){if(!r&&(r=!0,t[ud]!==!0)){var l=!0;try{ze(t,nn,!0),t[rn]||Ys.prototype.forceUpdate.call(t),l=!1}finally{ze(t,nn,!1),l&&n.dispose()}}});n.reactComponent=this,a[Zs]=n,this.render=a;function a(){r=!1;var l=void 0,c=void 0;if(n.track(function(){try{c=Fl(!1,i)}catch(p){l=p}}),l)throw l;return c}return a.call(this)}function md(o,t){return ve()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t?!0:!nd(this.props,o)}function fd(o,t){var e=Xe("reactProp_"+t+"_valueHolder"),i=Xe("reactProp_"+t+"_atomHolder");function r(){return this[i]||ze(this,i,Bl("reactive "+t)),this[i]}Object.defineProperty(o,t,{configurable:!0,enumerable:!0,get:function(){var a=!1;return Fr&&Rr&&(a=Fr(!0)),r.call(this).reportObserved(),Fr&&Rr&&Rr(a),this[e]},set:function(a){!this[nn]&&!nd(this[e],a)?(ze(this,e,a),ze(this,rn,!0),r.call(this).reportChanged(),ze(this,rn,!1)):ze(this,e,a)}})}var gd=typeof Symbol=="function"&&Symbol.for,bd=gd?Symbol.for("react.forward_ref"):typeof Ks=="function"&&Ks(function(o){return null}).$$typeof,yd=gd?Symbol.for("react.memo"):typeof id=="function"&&id(function(o){return null}).$$typeof;function O(o){if(o.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),yd&&o.$$typeof===yd)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(bd&&o.$$typeof===bd){var t=o.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Ks(function(){var i=arguments;return dg(gi,null,function(){return t.apply(void 0,i)})})}return typeof o=="function"&&(!o.prototype||!o.prototype.render)&&!o.isReactClass&&!Object.prototype.isPrototypeOf.call(Ys,o)?Xs(o):gg(o)}function sn(){return sn=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=e[i])}return o},sn.apply(this,arguments)}function yg(o,t){if(o==null)return{};var e={},i=Object.keys(o),r,n;for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&(e[r]=o[r]);return e}var or=Oo.createContext({});function vg(o){var t=o.children,e=yg(o,["children"]),i=Oo.useContext(or),r=Oo.useRef(sn({},i,e)),n=r.current;if(!1)var a;return Oo.createElement(or.Provider,{value:n},t)}vg.displayName="MobXProvider";function vd(o,t,e,i){var r=Oo.forwardRef(function(n,a){var l=sn({},n),c=Oo.useContext(or);return Object.assign(l,o(c||{},l)||{}),a&&(l.ref=a),Oo.createElement(t,l)});return i&&(r=O(r)),r.isMobxInjector=!0,ug(t,r),r.wrappedComponent=t,r.displayName=xg(t,e),r}function xg(o,t){var e,i=o.displayName||o.name||o.constructor&&o.constructor.name||"Component";return t?e="inject-with-"+t+"("+i+")":e="inject("+i+")",e}function Sg(o){return function(t,e){return o.forEach(function(i){if(!(i in e)){if(!(i in t))throw new Error("MobX injector: Store '"+i+"' is not available! Make sure it is provided by some Provider");e[i]=t[i]}}),e}}function _(){for(var o=arguments.length,t=new Array(o),e=0;e<o;e++)t[e]=arguments[e];if(typeof arguments[0]=="function"){var i=arguments[0];return function(r){return vd(i,r,i.name,!0)}}else return function(r){return vd(Sg(t),r,t.join("-"),!1)}}if(!Ys)throw new Error("mobx-react requires React to be available");if(!E)throw new Error("mobx-react requires mobx to be available");import bi from"react";import xd,{css as Tg}from"styled-components";import Cg,{css as wg}from"styled-components";var ir=wg`
  position: absolute;
  top: 0;
  left: 0;
  height: ${o=>o.theme.measurements.colorItem.size}px;
  width: ${o=>o.theme.measurements.colorItem.size}px;
  border-radius: ${o=>o.theme.colorItem.borderRadius||`${o.theme.shape.radiusSmall}px`};
  pointer-events: none;
`,kg=Cg.div.attrs(o=>({style:{background:o.color}}))`
  ${ir}
  z-index: ${o=>o.theme.measurements.zIndex.colorItem.background};
`,an=kg;var Mg=xd.div`
  ${ir}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${o=>o.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${o=>o.theme.colorItem.borderRadius||`${o.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${o=>o.isActive&&Tg`
      border-color: ${o.theme.selectColor.activeBorderColor};
    `}
`,Qs=xd.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`,Ig=({isActive:o,className:t,style:e})=>bi.createElement(Mg,{isActive:o,className:t,style:e},o&&bi.createElement(bi.Fragment,null,bi.createElement(Qs,null),bi.createElement(Qs,null),bi.createElement(Qs,null))),ln=Ig;import Dg from"styled-components";var Eg=Dg.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${o=>o.theme.measurements.colorItem.size}px;
  width: ${o=>o.theme.measurements.colorItem.size}px;
  margin: ${o=>o.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${o=>o.theme.colorItem.borderRadius||`${o.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${kt}

  &:disabled {
    opacity: ${o=>o.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`,cn=Eg;import Pg from"styled-components";var zg=Pg.div.attrs(o=>{let t=o.url?{backgroundImage:`url(${o.url})`}:{};return b({style:t},o.style)})`
  ${ir}
  z-index: ${o=>o.theme.measurements.zIndex.colorItem.tiledBackground};
`,dn=zg;var Ag=({isActive:o,onClick:t,color:e,label:i,isDisabled:r,tiledBackgroundUrl:n,className:a,style:l,children:c})=>pn.createElement(cn,{disabled:r,onClick:t,"aria-label":i,className:a,style:l},pn.createElement(dn,{url:n}),pn.createElement(an,{color:e}),pn.createElement(ln,{isActive:o}),c),Sd=_("config")(O(Ag));import ta from"react";import Og from"styled-components";var Lg=Og.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${o=>o.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${o=>o.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`,hn=Lg;import Bg from"react";import Fg,{css as Rg}from"styled-components";var Hg=Fg.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${o=>o.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${o=>o.isVisible&&Rg`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`,un=({isVisible:o,className:t,children:e})=>Bg.createElement(Hg,{isVisible:o,className:t},e);import _g from"styled-components";var $g=_g.div.attrs(({style:o})=>({role:"dialog","aria-hidden":!1,style:o}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${o=>o.top}px);
  left: calc(50% + ${o=>o.left}px);
  width: ${o=>o.width};
  height: ${o=>o.height};
  transform: translate(-50%, -50%);
  border-radius: ${o=>o.theme.shape.radiusLarge}px;
  background: ${o=>o.theme.modal.background};
  color: ${o=>o.theme.modal.bodyForeground};
  z-index: ${o=>o.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`,mn=$g;var Wg=({isVisible:o=!1,width:t="350px",height:e="fit-content",position:i,header:r,body:n,footer:a,className:l,style:c,children:p})=>ta.createElement(un,{isVisible:o},ta.createElement(hn,null),ta.createElement(mn,{height:e,width:t,left:i.x,top:i.y,className:l,style:c,"data-test":M.Dialog},r,n,p,a)),Cd=Wg;import Vg from"styled-components";var Ng=Vg.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  color: ${o=>o.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`,Ae=Ng;import Ug from"styled-components";var Gg=Ug.div`
  display: flex;
  border-top: 2px solid
    ${o=>o.type==="error"?o.theme.error:o.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`,yi=Gg;import jg from"styled-components";var Xg=jg.h3`
  font-size: ${o=>o.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.headline2.case};
  color: ${o=>o.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`,vi=Xg;import rr from"react";import wd,{keyframes as Yg}from"styled-components";var Kg=Yg`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,qg=wd.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`,fn=wd.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${o=>o.theme.primary};
  border-radius: 50%;
  animation: ${Kg} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${o=>o.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`,Zg=({className:o,style:t})=>rr.createElement(qg,{className:o,style:t},rr.createElement(fn,null),rr.createElement(fn,null),rr.createElement(fn,null),rr.createElement(fn,null)),gn=Zg;import wn from"react";import sa from"react";var ea=["Moz","Webkit","O","ms"];function Jg(o){let t="",e=!0,i;for(i=0;i<o.length;i+=1)e?(t+=o[i].toUpperCase(),e=!1):o[i]==="-"?e=!0:t+=o[i];return t}function oa(o,t){return t?`${t}${Jg(o)}`:o}function Qg(o="transform"){if(typeof window=="undefined"||typeof window.document=="undefined")return"";let{style:t}=window.document.documentElement;if(o in t)return"";let e;for(e=0;e<ea.length;e+=1)if(oa(o,ea[e])in t)return ea[e];return""}var kd=Qg();function bn(o,t){for(let e=0,{length:i}=o;e<i;e+=1)if(t.apply(t,[o[e],e,o]))return o[e];return null}function ia(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function xi(o){return typeof o=="number"&&!Number.isNaN(o)}function Tt(o){return parseInt(o,10)}var yn="";function tb(o,t){return yn||(yn=bn(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],e=>ia(o[e]))),ia(o[yn])?o[yn](t):!1}function ra(o,t,e){let i=o;do{if(tb(i,t))return!0;if(i===e)return!1;i=i.parentNode}while(i);return!1}function vn(o,t,e){!o||(o.attachEvent?o.attachEvent(`on${t}`,e):o.addEventListener?o.addEventListener(t,e,!0):o[`on${t}`]=e)}function Ye(o,t,e){!o||(o.detachEvent?o.detachEvent(`on${t}`,e):o.removeEventListener?o.removeEventListener(t,e,!0):o[`on${t}`]=null)}function Td(o){let t=o.clientHeight,e=o.ownerDocument.defaultView.getComputedStyle(o);return t+=Tt(e.borderTopWidth),t+=Tt(e.borderBottomWidth),t}function Md(o){let t=o.clientWidth,e=o.ownerDocument.defaultView.getComputedStyle(o);return t+=Tt(e.borderLeftWidth),t+=Tt(e.borderRightWidth),t}function Id(o){let t=o.clientHeight,e=o.ownerDocument.defaultView.getComputedStyle(o);return t-=Tt(e.paddingTop),t-=Tt(e.paddingBottom),t}function Dd(o){let t=o.clientWidth,e=o.ownerDocument.defaultView.getComputedStyle(o);return t-=Tt(e.paddingLeft),t-=Tt(e.paddingRight),t}function Ed(o,t){let i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),r=o.clientX+t.scrollLeft-i.left,n=o.clientY+t.scrollTop-i.top;return{x:r,y:n}}function Pd({x:o,y:t,rotation:e}){let i=`translate(${o}px,${t}px) rotate(${e}rad)`;return{[oa("transform",kd)]:i}}function zd(o,t){let e=null;return o.targetTouches&&(e=bn(o.targetTouches,i=>t===i.identifier)),o.changedTouches&&!e&&(e=bn(o.changedTouches,i=>t===i.identifier)),e}function Ad(o){return o.targetTouches&&o.targetTouches[0]?o.targetTouches[0].identifier:o.changedTouches&&o.changedTouches[0]?o.changedTouches[0].identifier:null}function na(o){let t=o.findDOMNode();return t||null}function eb(o){return{left:o.left,top:o.top,right:o.right,bottom:o.bottom}}function Od(o,t,e){if(!o.props.bounds)return[t,e];let{bounds:i}=o.props;i=typeof i=="string"?i:eb(i);let r=na(o);if(!r)return[t,e];if(typeof i=="string"){let{ownerDocument:n}=r,a=n.defaultView,l;i==="parent"?l=r.parentNode:l=n.querySelector(i);let c=a.getComputedStyle(r),p=a.getComputedStyle(l);i={left:-r.offsetLeft+Tt(p.paddingLeft)+Tt(c.marginLeft),top:-r.offsetTop+Tt(p.paddingTop)+Tt(c.marginTop),right:Dd(l)-Md(r)-r.offsetLeft+Tt(p.paddingRight)-Tt(c.marginRight),bottom:Id(l)-Td(r)-r.offsetTop+Tt(p.paddingBottom)-Tt(c.marginBottom)}}return xi(i.right)&&(t=Math.min(t,i.right)),xi(i.bottom)&&(e=Math.min(e,i.bottom)),xi(i.left)&&(t=Math.max(t,i.left)),xi(i.top)&&(e=Math.max(e,i.top)),[t,e]}function xn(o,t,e){let{state:i}=o,r=!xi(i.lastX),n=na(o);return r?{node:n,deltaX:0,deltaY:0,lastX:t,lastY:e,x:t,y:e}:{node:n,deltaX:t-i.lastX,deltaY:e-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:e}}function Sn(o,t){return{node:t.node,x:o.state.x+t.deltaX,y:o.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:o.state.x,lastY:o.state.y}}function Ld(o){return o.props.axis==="both"||o.props.axis==="x"}function Bd(o){return o.props.axis==="both"||o.props.axis==="y"}function Cn(o,t){let e=na(t);if(!e)return{x:0,y:0};let{offsetParent:i}=t.props;return!i&&e instanceof HTMLElement&&(i=e.offsetParent||e.ownerDocument.body),Ed(o,i)}var xe={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},_t=xe.mouse,aa={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}},Lo=class extends sa.Component{constructor(){super(...arguments);this.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.findDOMNode=()=>{let{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.getTouchFromEvent=t=>{let e=Ad(t);return this.setState({touchIdentifier:e}),zd(t,e)};this.preventDefault=t=>{t.stopPropagation&&t.stopPropagation()};this.handleDragStart=t=>{let e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:i}=e;if(this.props.disabled||!(t.target instanceof Node)||this.props.handle&&!ra(t.target,this.props.handle,e)||this.props.cancel&&ra(t.target,this.props.cancel,e))return!1;let r=Cn(t,this);if(r==null)return!1;let{x:n,y:a}=r,l=xn(this,n,a);if(this.props.onStart(t,l)===!1)return!1;this.setState({dragging:!0,lastX:n,lastY:a}),_t.move==="touchmove"?vn(i,_t.move,this.onTouchDrag):vn(i,_t.move,this.onMouseDrag),vn(i,_t.stop,this.handleDragStop)};this.handleDrag=t=>{let e=Cn(t,this);if(e==null)return;let{x:i,y:r}=e,n=xn(this,i,r);if(this.props.onDrag(t,n)===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(l){let c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.setState({lastX:i,lastY:r})};this.handleDragStop=t=>{if(!this.state.dragging)return;let e=Cn(t,this);if(e==null)return;let{x:i,y:r}=e,n=xn(this,i,r),a=this.findDOMNode();this.setState({dragging:!1,lastX:NaN,lastY:NaN}),this.props.onStop(t,n),a&&(_t.move==="touchmove"?Ye(a.ownerDocument,_t.move,this.onTouchDrag):Ye(a.ownerDocument,_t.move,this.onMouseDrag),Ye(a.ownerDocument,_t.stop,this.handleDragStop))};this.onMouseDown=t=>(this.preventDefault(t),_t=xe.mouse,this.props.onMouseDown(t),t.button&&typeof t.button=="number"&&t.button!==0?!1:this.handleDragStart(t));this.onMouseDrag=t=>(this.preventDefault(t),this.handleDrag(t));this.onMouseUp=t=>(this.preventDefault(t),_t=xe.mouse,this.handleDragStop(t));this.onTouchStart=t=>{this.preventDefault(t),_t=xe.touch;let e=this.getTouchFromEvent(t);return this.handleDragStart(e)};this.onTouchDrag=t=>{this.preventDefault(t),_t=xe.touch;let e=this.getTouchFromEvent(t);return this.handleDrag(e)};this.onTouchEnd=t=>{this.preventDefault(t),_t=xe.touch;let e=this.getTouchFromEvent(t);return this.handleDragStop(e)}}componentWillUnmount(){let t=this.findDOMNode();if(t){let{ownerDocument:e}=t;Ye(e,xe.mouse.move,this.onMouseDrag),Ye(e,xe.touch.move,this.onTouchDrag),Ye(e,xe.mouse.stop,this.handleDragStop),Ye(e,xe.touch.stop,this.handleDragStop)}}render(){return sa.cloneElement(sa.Children.only(this.props.children),{style:b({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Lo.defaultProps=aa,Lo.displayName="DraggableCore";var ob=w(b({},aa),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),kn=class extends wn.Component{constructor(t){super(t);this.onDragStart=(t,e)=>{if(this.props.onStart(t,Sn(this,e))===!1)return!1;this.setState({dragging:!0,dragged:!0})};this.onDrag=(t,e)=>{let{position:i,defaultPosition:r,onDrag:n,bounds:a}=this.props;if(!this.state.dragging)return!1;let l=Sn(this,e),c=Boolean(i),p={x:c?l.x:r.x,y:c?l.y:r.y,slackX:0,slackY:0};if(a){let{x:m,y:g}=p;p.x+=this.state.slackX,p.y+=this.state.slackY;let[x,S]=Od(this,p.x,p.y);p.x=x,p.y=S,p.slackX=this.state.slackX+(m-p.x),p.slackY=this.state.slackY+(g-p.y),l.x=p.x,l.y=p.y,l.deltaX=p.x-this.state.x,l.deltaY=p.y-this.state.y}if(n(t,l)===!1)return!1;this.setState(p)};this.onDragStop=(t,e)=>{if(!this.state.dragging||this.props.onStop(t,Sn(this,e))===!1)return!1;let r={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(this.props.position)){let{x:a,y:l}=this.props.position;r.x=a,r.y=l}this.setState(r)};this.findDOMNode=()=>{let{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(t){Boolean(this.props.position)&&(this.props.updateOnPosition?(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}componentWillUnmount(){this.setState({dragging:!1})}render(){let W=this.props,{position:t,defaultPosition:e,rotation:i,defaultClassName:r,defaultClassNameDragging:n,defaultClassNameDragged:a}=W,l=Xt(W,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),{x:c,y:p,dragging:u,dragged:m}=this.state,g={},S=!Boolean(t)||u,C=t||e,P={x:Ld(this)&&S?c:C.x,y:Bd(this)&&S?p:C.y,rotation:i};g=Pd(P);let T=wn.Children.only(this.props.children),R=[T.props.className||"",r,u?n:"",m?a:""].join(" ").trim(),$=wn.cloneElement(T,{className:R,style:b(b({},T.props.style),g)});return wn.createElement(Lo,w(b({},l),{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),$)}};kn.defaultProps=ob,kn.displayName="Draggable";var Fd=kn;var Nd=li(Wd());import ae from"react";import Ke,{css as Ud}from"styled-components";import xb from"react";import Vd,{css as Sb}from"styled-components";var Cb=Vd.label`
  ${di}
`,wb=Vd.label`
  display: block;
  font-size: ${o=>o.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.label.case};
  color: ${o=>o.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:o})=>o&&Sb`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`,It=({label:o,htmlFor:t,show:e,style:i,isDisabled:r,className:n})=>{let a=e?wb:Cb,l=t||(o?o.replace(" ","-"):void 0);return xb.createElement(a,{style:i,isDisabled:r,htmlFor:l,className:n},o)};It.defaultProps={show:!0};var kb=Ke.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,Tb=Ke(It)`
  align-self: flex-start;
`,Gd=Ke(At)`
  color: ${o=>o.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`,Mb=Ke.div`
  display: flex;
  justify-content: space-between;
  width: ${o=>o.theme.measurements.advancedUIToolControlBar.width-48}px;
`,Ib=Ke.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${o=>.6*o.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${o=>o.theme.toolControlBar.inputLabelForeground};
`,Db=Ke.div`
  width: ${o=>.6*o.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`,Eb=Ke.span`
  width: ${o=>Math.round(o.length*.6*o.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${o=>o.activeIndex*.6*o.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;
`,jd=Ke.div`
  border: solid ${o=>o.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:o})=>o==="left"?Ud`
          margin-left: 2px;
          transform: rotate(135deg);
        `:Ud`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`,ca=class extends ae.PureComponent{constructor(t){super(t);this.updateIndex=(t,e=!1)=>{let i=t+(e?-1:1),r=this.props.list.length-1;i>r&&(i=0),i<0&&(i=r),this.props.onSelect(this.props.list[i].identifier)};this.getActiveIndex=t=>{let{list:e}=this.props,i=e.findIndex(r=>r.identifier===t);return i!==-1?i:0};this.throttledUpdateIndex=(0,Nd.default)(this.updateIndex,600)}render(){let{list:t,label:e,showLabel:i=!0}=this.props,r=this.getActiveIndex(this.props.defaultIdentifier),n=t.length<=1;return ae.createElement(kb,{"data-test":M.CarouselSlider},ae.createElement(Tb,{show:i,label:e}),ae.createElement(Mb,{id:`photoeditorsdk-${e.replace(" ","-")}`},ae.createElement(Gd,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r,!0)},ae.createElement(jd,{direction:"left"})),ae.createElement(Db,null,ae.createElement(Eb,{activeIndex:r,length:t.length},t.map(a=>ae.createElement(Ib,{key:a.identifier},a.value)))),ae.createElement(Gd,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r)},ae.createElement(jd,{direction:"right"}))))}};ca.defaultProps={showLabel:!0};var Xd=ca;import sr from"react";import Pb from"styled-components";var zb=Pb.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${o=>o.theme.measurements.basicToolControlBar.maxWidth}px;
`,Mn=zb;import Ab,{css as Yd}from"styled-components";var Ob=Ab.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${o=>o.theme.checkbox.background};
  border-radius: ${o=>o.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${kt}

  &:hover {
    opacity: ${o=>o.theme.checkbox.hoverOpacity};
  }
  ${o=>o.isChecked&&Yd`
      background-color: ${o.theme.checkbox.activeBackground};
      &::after {
        color: ${o.theme.checkbox.activeForeground};
        border-color: ${o.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${o.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${o=>o.isDisabled&&Yd`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`,nr=Ob;import Lb from"styled-components";var Bb=Lb.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${kt}
`,In=Bb;var Kd=({label:o,value:t,checkMarkPosition:e,onClick:i,isDisabled:r,className:n,style:a})=>{let l=`photoeditorsdk-${o.replace(" ","-")}`;return sr.createElement(Mn,{"data-test":M.Checkbox,className:n,style:a},e==="left"&&sr.createElement(nr,{onClick:i,isDisabled:r,isChecked:t}),sr.createElement(It,{isDisabled:r,label:o,htmlFor:l}),sr.createElement(In,{id:l,disabled:r,checked:t,onChange:i}),e==="right"&&sr.createElement(nr,{onClick:i,isDisabled:r,isChecked:t}))},qd=Kd;Kd.defaultProps={value:!1,checkMarkPosition:"left"};import{css as Fb}from"styled-components";var Bo=Fb`
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${o=>o.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${o=>o.theme.textInput.borderColor};
  background: ${o=>o.theme.textInput.background};
  font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${o=>o.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${o=>o.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${o=>o.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${o=>o.theme.textInput.hoverBorderColor};
  }
`;import Oe from"react";import rp from"styled-components";import Rb,{css as Hb}from"styled-components";var Zd=Hb`
  opacity: ${o=>o.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`,Jd=Rb.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${Zd}
  }

  ${({isDisabled:o})=>o&&Zd}
`;import _b,{css as $b}from"styled-components";var Qd=_b.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${o=>o.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${o=>o.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${o=>o.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:o})=>o&&$b`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${kt}
`;import Nb,{css as op}from"styled-components";import tp from"react";import ep,{css as Si}from"styled-components";var Wb=ep.div`
  display: flex;
  ${o=>me()||ci()?Si`
        overflow: hidden;
      `:o.direction==="vertical"?Si`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `:Si`
      overflow-y: hidden;
      overflow-x: auto;
    `};
`,Vb=ep.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${o=>o.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${o=>me()||ci()?Si`
        ${()=>o.direction==="vertical"?Si`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `:Si`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}

        scrollbar-face-color: ${o.theme.scrollbar.handleColor};
        scrollbar-track-color: ${o.theme.toolbar.background};
        scrollbar-base-color: ${o.theme.toolbar.background};
        scrollbar-3dlight-color: ${o.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${o.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${o.theme.toolbar.background};
        scrollbar-shadow-color: ${o.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${o.theme.scrollbar.handleColor};
      `:""}
`,da=({direction:o="horizontal","data-test":t,className:e,children:i})=>tp.createElement(Wb,{direction:o,className:e},tp.createElement(Vb,{direction:o,"data-test":t},i));var pa=Nb(da)`
  position: absolute;

  background: ${o=>o.theme.dropdown.listBackground};
  color: ${o=>o.theme.dropdown.listForeground};
  border: 1px solid ${o=>o.theme.dropdown.listBorderColor};
  box-shadow: ${o=>o.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${o=>o.isOpen?op`
        visibility: visible;
        opacity: 1;
        display: flex;
      `:""}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>me()?op`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `:""}

  border-radius: 0 0 ${o=>o.theme.shape.radiusMedium}px
    ${o=>o.theme.shape.radiusMedium}px;
  z-index: ${o=>o.theme.measurements.zIndex.input.list};
`;pa.defaultProps={direction:"vertical"};import Ub from"styled-components";var ip=Ub.div`
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  color: ${o=>o.theme.dropdown.foreground};
  background-color: ${o=>o.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${o=>o.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${o=>o.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${o=>o.theme.dropdown.hoverBorderColor};
  }

  ${kt}
`;var Gb=rp.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${o=>o.theme.dropdown.caretColor};
  transform: rotate(${o=>o.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`,jb=rp.div``,ha=class extends Oe.PureComponent{constructor(t){super(t);this.state={isOpen:!1};this.handleOutsideClick=t=>{this.node&&this.node.contains(t.target)||this.setState({isOpen:!1})};this.onSelect=t=>{let{onSelect:e}=this.props;e(t),this.setState({isOpen:!1})};this.onClick=()=>{this.setState(t=>({isOpen:!t.isOpen}))};this.listItem=t=>{let{itemStyle:e,selectedItem:i}=this.props,{isOpen:r}=this.state,{value:n,label:a}=t,l={};return typeof e=="function"?l=e(t):e!==null&&typeof e=="object"&&(l=e),Oe.createElement(Qd,{"aria-hidden":!r,tabIndex:0,style:l,onClick:()=>this.onSelect(n),key:n,isActive:i===n},a)};this.onKeyDown=t=>{(t.code==="Space"||t.code==="Enter")&&this.onClick()};this.nodeRef=e=>{this.node=e}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}render(){let{selectedItem:t,list:e,label:i,style:r,isDisabled:n}=this.props,{isOpen:a}=this.state,l=e.length>1,c=n?{}:{tabIndex:0};return Oe.createElement(jb,null,Oe.createElement(It,{isDisabled:n,style:{paddingLeft:"0px"},label:i}),Oe.createElement("div",{ref:this.nodeRef},Oe.createElement(Jd,{isOpen:a,isDisabled:n},Oe.createElement(ip,w(b({"data-test":M.Dropdown,"aria-hidden":n},c),{showList:l,style:r,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown}),t,l&&Oe.createElement(Gb,{rotation:a?180:0})),Oe.createElement(pa,{"data-test":M.DropdownList,isOpen:a},l&&e.map(this.listItem)))))}};import Xb from"styled-components";var np=Xb.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`;import Yb from"react";var Kb=({children:o})=>Yb.createElement("form",{onSubmit:e=>{e.preventDefault()}},o),sp=Kb;import ar from"react";import Jb,{css as lp}from"styled-components";import ua from"react";import ap from"styled-components";var qb=ap.input`
  ${Bo}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${o=>o.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`,Zb=ap.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`,ma=class extends ua.Component{constructor(){super(...arguments);this.onChange=t=>{let{onChange:e}=this.props;e&&e(t.target.value)}}render(){let{id:t,testId:e,value:i,type:r,min:n,max:a,onBlur:l,onFocus:c,onKeyUp:p,onKeyDown:u,onMouseUp:m,onTouchEnd:g,isDisabled:x,className:S,children:C}=this.props;return ua.createElement(Zb,{className:S},ua.createElement(qb,{id:t,"data-test":e,"aria-hidden":x,disabled:x,value:i,type:r,min:n,max:a,onChange:this.onChange,onBlur:l,onFocus:c,onKeyUp:p,onKeyDown:u,onMouseUp:m,onTouchEnd:g}),C)}};ma.defaultProps={type:"text"};var Dn=ma;var Qb=Jb.div`
  ${me()?lp``:lp`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`,lr=class extends ar.Component{constructor(t){super(t);this.node=null;this.handleOutsideClick=t=>{this.node&&this.node.current&&this.node.current.contains(t.target)||this.onSubmit()};this.onSubmit=()=>{let{onSubmit:t}=this.props,{value:e,isActive:i}=this.state;if(t){let r=parseFloat(lr.cleanValue(e));!Number.isNaN(r)&&i&&t(`${r}`)}this.setState({isActive:!1})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:!0})};this.onKeyDown=t=>{let{value:e}=this.state;if(t.key==="Enter")this.onSubmit();else if(t.key==="ArrowUp"){let i=parseFloat(lr.cleanValue(e));typeof i=="number"&&this.setState({value:(i+1).toString(),isActive:!0})}else if(t.key==="ArrowDown"){let i=parseFloat(lr.cleanValue(e));typeof i=="number"&&this.setState({value:(i-1).toString(),isActive:!0})}};this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:!0})};this.state={value:this.props.value||"",isActive:!1},this.node=ar.createRef()}static getDerivedStateFromProps({value:t},{value:e,isActive:i}){return t!==e&&!i?{value:t}:null}static cleanValue(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)}render(){let{id:t,label:e,isDisabled:i,ariaHidden:r,onMouseUp:n,onTouchEnd:a,className:l}=this.props,{value:c}=this.state;return ar.createElement(Qb,{ref:this.node,"data-test":M.NummericInput,className:l},ar.createElement(It,{htmlFor:t,label:e,show:!!e,isDisabled:i}),ar.createElement(Dn,{id:t,value:c,isDisabled:i,"aria-hidden":r,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:n,onTouchEnd:a}))}},fa=lr;fa.defaultProps={showLabel:!0};var En=fa;import ga,{forwardRef as t1}from"react";import e1 from"styled-components";var o1=e1.input.attrs({type:"search"})`
  ${Bo}
`,cp=t1(({onChange:o,onKeyDown:t,placeholder:e,className:i,style:r},n)=>ga.createElement("div",{className:i,style:r},ga.createElement(It,{show:!1,label:"photoeditorsdk-Search"}),ga.createElement(o1,{ref:n,id:"photoeditorsdk-Search",onChange:l=>{o&&o(l.target.value)},onKeyDown:t,placeholder:e,autoComplete:"off"})));import ba from"react";import dp,{css as i1}from"styled-components";var r1=dp.div``,pp=({label:o,children:t,inline:e,showLabel:i,isDisabled:r,"data-test":n})=>ba.createElement(r1,{"data-test":n},ba.createElement(It,{isDisabled:r,label:o,show:i}),ba.createElement(n1,{id:`photoeditorsdk-${o.replace(" ","-")}`,inline:!!e},t)),n1=dp.div`
  display: inline-flex;
  ${o=>!o.inline&&i1`
        flex-wrap: wrap;
      `||""}
`;pp.defaultProps={showLabel:!0};var hp=pp;import Ci from"react";import cr,{css as dr}from"styled-components";var s1=cr.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`,a1=cr(It)`
  padding-bottom: 2px;
`,ya=dr`
  ${ci()||me()?dr`
        width: 16px;
        height: 16px;
      `:dr`
        width: 20px;
        height: 20px;
      `}
  background: ${o=>o.theme.slider.thumbBackground};
  border: 2px solid ${o=>o.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`,l1=o=>{let t=(o.value-o.min)*100/(o.max-o.min);return o.adjust?o.value>0?(t=o.value*(o.max/2)*100,`${o.theme.slider.trackColor} 0%,
      ${o.theme.slider.trackColor} 50%,
      ${o.theme.slider.activeTrackColor} 50%,
      ${o.theme.slider.activeTrackColor} ${50+t}%,
      ${o.theme.slider.trackColor} ${50+t}%,
      ${o.theme.slider.trackColor} 100%
      `):o.value<0?(t=o.value*(o.min/2)*100,`${o.theme.slider.trackColor} 0%,
      ${o.theme.slider.trackColor} ${50-t}%,
      ${o.theme.slider.activeTrackColor} ${50-t}%,
      ${o.theme.slider.activeTrackColor} 50%,
      ${o.theme.slider.trackColor} 50%,
      ${o.theme.slider.trackColor} 100%
      `):`${o.theme.slider.trackColor} 0%,
    ${o.theme.slider.trackColor} 100%`:`${o.theme.slider.activeTrackColor} 0%,
    ${o.theme.slider.activeTrackColor} ${t}%,
    ${o.theme.slider.trackColor} ${t}%,
    ${o.theme.slider.trackColor} 100%`},c1=cr.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  height: 100;
  border: none;

  ${kt}

  ${ci()||me()?dr`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:dr`
        height: 2px;
        background: ${o=>`linear-gradient(to right, ${l1(o)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${o=>o.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${o=>o.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${ya}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${ya}
  }
  &::-ms-thumb {
    appearance: none;
    ${ya}
  }
  &::-ms-fill-lower {
    background: ${o=>`${o.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${o=>`${o.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`,d1=cr.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${o=>o.centerSlider?-56:0}px;
`,p1=cr(En)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`,va=class extends Ci.Component{constructor(t){super(t);this.onSubmit=t=>{let{onChange:e,suffix:i,divider:r,min:n,max:a,value:l}=this.props,c=t.replace(i,""),p=c?parseFloat(c)/r:l,u=Math.max(n,Math.min(a,p));Number.isNaN(u)||(e(u),this.props.onMouseUp?this.props.onMouseUp(u):this.props.onTouchEnd&&this.props.onTouchEnd(u))};this.onSliderChange=t=>{let{onChange:e}=this.props,i=parseFloat(t.target.value);e(i)};this.onTouchOrMouseUp=t=>{let{value:e}=t.target,{onMouseUp:i,onTouchEnd:r}=this.props,n=parseFloat(e);i&&i(n),r&&r(n)};this.randomId=Ui()}render(){let{"data-test":t,identifier:e,value:i,min:r,max:n,divider:a,suffix:l,decimal:c,showLabel:p,showInput:u,style:m,centerSlider:g,adjust:x,label:S,isDisabled:C,step:P,"aria-hidden":T,className:R}=this.props,$=`photoeditorsdk-slider-${this.randomId}`,W=`${$}-input`,it=`${(i*a).toFixed(c)}${l}`,L=u&&Ci.createElement(p1,{id:W,value:it,isDisabled:C,"aria-hidden":T,onSubmit:this.onSubmit});return Ci.createElement(s1,{className:R,"data-test":t||e||$},Ci.createElement(a1,{isDisabled:C,label:S,show:p}),Ci.createElement(d1,{centerSlider:u&&g},Ci.createElement(c1,{type:"range",role:"slider","aria-hidden":T,tabIndex:0,value:i,min:r,max:n,step:P,style:m,disabled:C,id:$,onChange:this.onSliderChange,adjust:x,name:S,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:this.onTouchOrMouseUp,onTouchEnd:this.onTouchOrMouseUp}),L))}};va.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};var up=va;import Le from"react";var xa=class extends Le.Component{constructor(){super(...arguments);this.onDismiss=()=>{let{handleClose:t,handleDismiss:e}=this.props;t&&t(),e&&e()};this.onConfirm=()=>{let{handleClose:t,handleConfirm:e}=this.props;t&&t(),e&&e()}}render(){let{headerLabel:t,bodyLabel:e,confirmLabel:i,dismissLabel:r,type:n,children:a}=this.props,l=Le.Children.toArray(a)[0];if(!Le.isValidElement(l))throw new Error("Child is not a valid react element");return Le.cloneElement(l,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:Le.createElement(vi,null,t),body:Le.createElement(Ae,{"data-test":M.DialogBody},e),footer:Le.createElement(yi,{type:n},r&&Le.createElement(Ki,{label:r,ariaLabel:r,onClick:this.onDismiss}),i&&Le.createElement(Yi,{label:i,ariaLabel:i,onClick:this.onConfirm}))})}};import Se from"react";import Pn from"styled-components";var h1=Pn.div`
  display: flex;
`,u1=Pn(vi)`
  padding: 0;
`,m1=Pn.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`,f1=Pn(Ae)`
  padding: 0;
  margin: 0;
`,Sa=class extends Se.PureComponent{render(){let{headerLabel:t,bodyLabel:e,children:i}=this.props,r=Se.Children.toArray(i)[0];if(!Se.isValidElement(r))throw new Error("Child is not a valid react element");return Se.cloneElement(r,{height:"90px",body:Se.createElement(Ae,{"data-test":M.DialogBody},Se.createElement(h1,null,Se.createElement(gn,null),Se.createElement(m1,null,Se.createElement(u1,null,t),Se.createElement(f1,null,e))))})}};import qt from"react";import pr from"styled-components";var g1=pr.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,b1=pr.textarea`
  display: flex;
  caret-color: ${o=>o.theme.primary};
  ${Bo}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${o=>o.theme.modal.bodyForeground};
  resize: none;
  font-family: '${o=>o.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${o=>o.theme.primary};
    color: ${o=>o.theme.foreground};
  }
`,y1=pr.label`
  padding: 11px 20px 8px;
  font-size: ${o=>o.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.label.case};
  color: ${o=>o.theme.modal.headerForeground};
`,v1=pr(Ae)`
  height: 100%;
`,x1=pr(yi)`
  border-top: none;
`,Ca=class extends qt.Component{constructor(){super(...arguments);this.state={value:""};this.input=qt.createRef();this.handleKeydown=t=>{pc(this.handleDismiss)(t)};this.handleDismiss=()=>{let{handleDismiss:t}=this.props;t&&t(!1)};this.handleConfirm=()=>{let{handleConfirm:t}=this.props,{value:e}=this.input.current;e&&(t&&t(e),this.handleDismiss())};this.onChange=t=>{let{allowEmojis:e}=this.props,i=e?t.target.value:Gl(t.target.value);this.input.current.value=i,this.setState({value:i})};this.onSubmit=t=>{t.preventDefault()}}componentDidMount(){let{text:t,defaultText:e}=this.props;this.input.current.focus(),this.input.current.value=t||e||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),t===e&&this.input.current.select()}componentDidUpdate(t){let{isVisible:e}=this.props;t.isVisible!==e&&e&&this.input.current.focus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,!1)}render(){let{headerLabel:t,dismissLabel:e,confirmLabel:i,maxLength:r,type:n,children:a}=this.props,{value:l}=this.state,c=qt.Children.toArray(a)[0];if(!qt.isValidElement(c))throw new Error("Child is not a valid react element");return qt.cloneElement(c,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!l,height:"150px",header:qt.createElement(y1,{htmlFor:"photoeditorsdk-TextInput"},t),body:qt.createElement(v1,null,qt.createElement(g1,{onSubmit:this.onSubmit},qt.createElement(b1,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:r}))),footer:qt.createElement(x1,{type:n},qt.createElement(Ki,{label:e,ariaLabel:e,onClick:this.handleDismiss}),qt.createElement(Yi,{label:i,ariaLabel:i,isDisabled:!l,onClick:this.handleConfirm}))})}};Ca.defaultProps={defaultText:"Write Something",allowEmojis:!1};var mp=Ca;import S1 from"styled-components";var wa=S1.div`
  padding-bottom: ${o=>(o.count||1)*8}px;
`;wa.defaultProps={count:1};import wi from"react";var ka=class extends wi.Component{getChildren(){let t=[],e=[];return wi.Children.forEach(this.props.children,i=>{switch(i.type.componentName){case"case":this.props.type===i.props.value&&t.push(i);break;case"default":e.push(i);break}}),t.length>0?t:e}render(){let t=this.getChildren();return t.length===0?null:wi.createElement(wi.Fragment,null,t)}},zn=class extends wi.Component{render(){return this.props.children}};zn.componentName="case";var An=class extends wi.Component{render(){return this.props.children}};An.componentName="default";import C1,{keyframes as w1,css as k1}from"styled-components";var T1=w1`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`,M1=C1.div`
  position: absolute;
  top: ${o=>o.position.y}px;
  left: ${o=>o.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${o=>o.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:o})=>o&&k1`
      visibility: visible;
      animation: ${T1} 0.5s, fadeout 0.5s 2.5s;
    `}
`,fp=M1;import ki from"react";import I1,{css as gp}from"styled-components";var D1=()=>gp`
    animation: ${Ur} 0.2s linear;
  `,E1=gp`
  border: 1px solid ${o=>o.theme.card.activeBorderColor};
  ${ks} {
    background-color: ${o=>o.theme.card.activeOverlayColor};
  }
`,P1=I1.button.attrs(o=>{let t={};return o.image&&(t.backgroundImage=`url(${o.image})`),b({style:t},o.style)})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${o=>o.theme.card.background};
  color: ${o=>o.theme.card.foreground};

  border-radius: ${o=>o.theme.shape.radiusMedium}px;
  ${D1};
  animation-fill-mode: both;
  overflow: hidden;

  ${kt}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:o})=>o&&E1}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${zt} {
      background-color: ${o=>o.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${pi} {
      background-color: ${o=>o.theme.card.hoverOverlayColor};
    }
  }
`,Ta=class extends ki.Component{constructor(){super(...arguments);this.state=Vr;this.timeout=null;this.onKeyDown=t=>{(t.key==="Space"||t.key==="Enter")&&this.props.onClick&&this.props.onClick()};this.onClick=t=>{let e=t.currentTarget.getBoundingClientRect(),i=t.pageX-e.left,r=t.pageY-e.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(i,r)}):this.setRippleState(i,r),this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){let{children:t,label:e,isActive:i,isDisabled:r,image:n,style:a,className:l}=this.props,{left:c,top:p,display:u}=this.state;return ki.createElement(P1,{isActive:i,"aria-label":e,"data-test":e,disabled:r,image:n,onClick:this.onClick,onKeyDown:this.onKeyDown,style:a,className:l},t,ki.createElement(Nr,{display:u,left:c,top:p}),ki.createElement(ks,null),ki.createElement(zt,null),ki.createElement(pi,null))}};Ta.defaultProps={isActive:!1};var U3={Focused:kt,VisuallyHidden:di},G3={ripple:$r,scale:kc,slide:Ur},F={Container:$s,ColorItem:Sd,ColorItemBase:cn,ColorItemBackground:an,ColorItemTiledBackground:dn,ColorItemActiveOverlay:ln,Dialog:Cd,DialogBase:un,DialogContainer:mn,DialogBackdrop:hn,DialogHeader:vi,DialogBody:Ae,DialogFooter:yi,DialogSpinner:gn,TextEditModal:mp,ActionModal:xa,InfoModal:Sa,Spacer:wa,Draggable:Fd,DraggableCore:Lo,Toast:fp,Input:{Label:It,File:np,Search:cp,Slider:up,CarouselSlider:Xd,Selection:hp,Checkbox:qd,CheckboxBase:Mn,CheckboxInput:In,CheckboxCheckMark:nr,Dropdown:ha,Text:Dn,NumericInput:En,Form:sp},Switch:{Index:ka,Case:zn,Default:An}};import z1 from"styled-components";var bp=z1(se)`
  font-size: ${o=>o.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button2.case};
  color: ${o=>o.theme.button.textSecondaryForeground};

  ${zt} {
    display: none;
  }

  &:disabled {
    opacity: ${o=>o.theme.button.textInactiveOpacity};
  }
`;import Ma,{css as yp}from"styled-components";var vp=Ma.div`
  display: inline-flex;
`,On=Ma(se)`
  background: ${o=>o.theme.canvasActionBar.background};
  color: ${o=>o.theme.canvasActionBar.foreground};
  font-size: ${o=>o.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`,Ia=Ma.div`
  ${({show:o})=>o?yp`
          opacity: 1;
        `:yp`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${o=>o.theme.canvasActionBar.background};
  color: ${o=>o.theme.canvasActionBar.foreground};
  border-radius: ${o=>o.theme.canvasActionBar.borderRadius?o.theme.canvasActionBar.borderRadius:o.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${o=>o.theme.measurements.zIndex.buttonGroup};

  ${On} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${o=>o.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`;import xp from"react";import Sp from"styled-components";var A1=Sp(At)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${o=>o.theme.measurements.zIndex.button.float};
  padding: 2px;
`,O1=Sp.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${o=>o.theme.webcam.floatButton};
`,Cp=o=>xp.createElement(A1,b({},o),xp.createElement(O1,null));var Ln=[f.LIBRARY,[f.TRANSFORM,f.FILTER,f.ADJUSTMENT],[f.FOCUS,f.FRAME,f.OVERLAY],[f.TEXT,f.TEXT_DESIGN,f.STICKER,f.BRUSH]];var Ti={license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[rt.UNDO,rt.REDO,rt.EXPORT,rt.CLOSE],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,displaySerializationModal:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:Ul()?"webgl":"canvas"},enableZoom:!0,scaleImageToFit:!0,restrictZoomOutToDefault:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:f.FILTER,tools:Ln,snapping:new Xl,filter:new Zl,focus:new Jl,adjustment:new ql,library:new tc,overlay:new ec,sticker:new oc,text:new ic,textdesign:new nc,frame:new Ql,brush:new rc,transform:new sc,export:{image:{exportType:Do.IMAGE,format:fe.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{},watermark:new Yl};function Da(o){return o&&typeof o=="object"&&Object.prototype.toString.call(o)!=="[object RegExp]"&&Object.prototype.toString.call(o)!=="[object Date]"}function L1(o){return Array.isArray(o)?[]:{}}function Ea(o,t){return t&&t.clone===!0&&Da(o)?Pa(L1(o),o,t):o}function B1(o,t,e){let i={};return Da(o)&&Object.keys(o).forEach(r=>{i[r]=Ea(o[r],e)}),Object.keys(t).forEach(r=>{let n=Da(t[r])&&o[r];i[r]=n?Pa(o[r],t[r],e):Ea(t[r],e)}),i}function Pa(o,t,e){return Array.isArray(t)?Array.isArray(o)?t:Ea(t,e):B1(o,t,e)}function Zt(o,t=null){if(!Array.isArray(o)||o.length<2)throw new Error("first argument should be an array with at least two elements");return o.reduce((e,i)=>Pa(e,i,t))}var za=o=>{let t=Number(o).toString(16);return t.length<2&&(t=`0${t}`),t},wp=(o,t,e)=>{let i=za(o*255),r=za(t*255),n=za(e*255);return`#${i}${r}${n}`},Be=o=>{if(xc(o)){let[t,e,i,r]=o;return`rgba(${t*255}, ${e*255}, ${i*255}, ${r})`}if(vc(o)){let{r:t,g:e,b:i,a:r}=o;return`rgba(${t*255}, ${e*255}, ${i*255}, ${r})`}if(yc(o)){let[t,e,i]=o;return wp(t,e,i)}if(bc(o)){let{r:t,g:e,b:i}=o;return wp(t,e,i)}return o},le=o=>o.map(t=>({identifier:t.name,color:t.color,colorString:Be(t.color)})),Bt={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]},Aa={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};var Fo={[nt.BRIGHTNESS]:0,[nt.SATURATION]:0,[nt.CONTRAST]:0,[nt.GAMMA]:0,[nt.CLARITY]:0,[nt.EXPOSURE]:0,[nt.SHADOWS]:0,[nt.HIGHLIGHTS]:0,[nt.WHITES]:0,[nt.BLACKS]:0,[nt.TEMPERATURE]:0,[nt.SHARPNESS]:0};var Mi=class{constructor(){this.snapshots=[];this.observeIndex=E.box(-1)}addSnapshot(t){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(t)):this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(t)],this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[],this.observeIndex.set(-1)}undo(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}redo(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}discardSnapshotsfromIndex(t){t>0&&t<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,t),this.observeIndex.set(this.snapshots.length-1))}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};s([d],Mi.prototype,"index",1),s([d],Mi.prototype,"canUndo",1),s([d],Mi.prototype,"canRedo",1);var B;(function(i){i.ADD="add",i.EDIT="edit",i.DELETE="delete"})(B||(B={}));var Ro=class{constructor(t){this.awaitHistoryChange=!1;this.isDirtySinceSave=!1;this.undo=()=>D(this,null,function*(){if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo(),this.awaitHistoryChange=!0;let t=this.appHistoryManager.undo();yield this.applyState(t),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1)}});this.redo=()=>D(this,null,function*(){if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo(),this.awaitHistoryChange=!0;let t=this.appHistoryManager.redo();yield this.applyState(t),this.awaitHistoryChange=!1}});this.editor=t,this.appHistoryManager=new Mi}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){let t=z(this.editor.adjustmentsToolStore.state),e=z(this.editor.filterToolStore.state),i=this.editor.focusToolStore.getFocusStateForHistory(),r=z(this.editor.overlayToolStore.state),n=z(this.editor.frameToolStore.state),{strokes:a}=this.editor.brushToolStore,l=this.editor.spriteStore.getSpriteHistoryState(),c=this.editor.transformToolStore.serializableState;return{[f.ADJUSTMENT]:t,[f.FILTER]:e,[f.FOCUS]:i,[f.OVERLAY]:r,[f.FRAME]:n,[f.BRUSH]:a,sprite:l,[f.TRANSFORM]:c}}addInitialSnapshot(){let t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:B.ADD,description:"Initial State"})}addSnapshot(t,e,i){let r;t?t.sprite||t.transform?r=b(b({},this.getHistoryState()),t):r=t:r=this.getHistoryState(),this.appHistoryManager.addSnapshot({state:r,type:e,description:i}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0)}applyState(e){return D(this,arguments,function*({state:t}){try{if(t){let i=Object.keys(t);for(let r of i)switch(r){case f.FILTER:yield this.editor.filterToolStore.updateStateFromHistory(t[r]);break;case f.ADJUSTMENT:yield this.editor.adjustmentsToolStore.updateStateFromHistory(t[r]);break;case f.OVERLAY:yield this.editor.overlayToolStore.updateStateFromHistory(t[r]);break;case f.FRAME:yield this.editor.frameToolStore.updateStateFromHistory(t[r]);break;case f.FOCUS:yield this.editor.focusToolStore.updateStateFromHistory(t[r],this.editor.canvasStore.sizeVector);break;case f.BRUSH:yield this.editor.brushToolStore.updateStateFromHistory(t[r]);break;case"sprite":yield this.editor.spriteStore.updateStateFromHistory(t[r]);break;case f.TRANSFORM:this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t[r]),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),yield this.editor.wait();break}yield this.editor.renderPromise()}}catch(i){console.error(i),this.editor.modalStore.showActionModal({type:et.ERROR,identifier:"unexpectedError",error:i,handleConfirm:()=>{window.location.reload()}})}})}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1}getCurrentSpritesState(){var t,e;return(e=(t=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:t.state)==null?void 0:e.sprite}};s([h],Ro.prototype,"undo",2),s([h],Ro.prototype,"redo",2),s([d],Ro.prototype,"canUndo",1),s([d],Ro.prototype,"canRedo",1);var pt=class{constructor(t,e){this.assets=[];this.entityMapper=t=>"items"in t?this.categoryMapper(t):this.itemMapper(t);this.categoryMapper=t=>t?w(b({},t),{thumbnailURI:this.getCategoryThumbnailURI(t),name:this.config.locale[t.identifier]||t.name,items:t.items.map(this.itemMapper)}):null;this.itemMapper=t=>w(b({},t),{thumbnailURI:this.getItemThumbnailURI(t),name:this.config.locale[t.identifier]||("name"in t?t.name:"")});this.getCategoryThumbnailURI=t=>t.thumbnailURI?Ni(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"?t.thumbnailURI:this.config.getAssetPath(t.thumbnailURI||""):"";this.getItemThumbnailURI=t=>{var i;if((i=t.thumbnailURI)==null?void 0:i.trim())return Ni(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"?t.thumbnailURI:this.config.getAssetPath(t.thumbnailURI||"");let e=t[this.config.itemFallbackKey];return e?this.config.getAssetPath(e):""};this.config=e,this.assets=t.map(this.entityMapper).filter(Boolean)}static isCategory(t){return Object.prototype.hasOwnProperty.call(t,"items")}get categories(){return this.assets.reduce((t,e)=>{if(pt.isCategory(e))return[...t,e]},[]).filter(Boolean)}get items(){return this.assets.reduce((t,e)=>pt.isCategory(e)?[...t,...e.items]:[...t,e],[]).filter(Boolean)}};var Fe=class{constructor(t,e){this.from=t,this.to=e}contains(t){return this.from<=t&&t<=this.to}clamp(t){return Math.min(Math.max(this.from,t),this.to)}};var F1=new Fe(-1,1),Ii=class{constructor(t){this.editAdjustments=({type:t,value:e})=>{let i=F1.clamp(e);this.state[t]=i};this.reset=()=>{ft(()=>{this.indexInContainer===-1&&(Object.keys(Fo).forEach(t=>{this.state[t]=Fo[t]}),this.orderHelper.removeIndex(f.ADJUSTMENT))})};this.setAdjustmentEffect=t=>{let e=this.orderHelper.addIndex(f.ADJUSTMENT);return this.effect?this.effect.setProperties(t):this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e),this.effect.getProperties()};this.removeAdjustmentEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.engineMediator=t,this.state=Fo}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get orderHelper(){return this.engineMediator.orderHelper}};s([E],Ii.prototype,"state",2),s([h],Ii.prototype,"editAdjustments",2),s([h],Ii.prototype,"reset",2);var q=class{constructor(t){this.dirty=E.box(!1);this.editAdjustments=({type:t,value:e})=>{this.pureSetAdjustment({type:t,value:e}),this.editor.render()};this.toolSnapshot=()=>{(0,wt.default)(this.state,Fo)?this.dirty.set(!1):this.dirty.set(!0),this.addSnapshot(B.EDIT,f.ADJUSTMENT)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.toggleOptionSelection=t=>{this.selectedOption=t};this.pureSetAdjustment=({type:t,value:e})=>{let i=this.adjustmentsStore.setAdjustmentEffect({[t]:e});this.adjustmentsStore.editAdjustments({type:t,value:i[t]})};this.pureReset=()=>{this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""};this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=t=>{if(!(0,wt.default)(t,this.state)){if((0,wt.default)(t,Fo)){this.pureReset();return}ft(()=>{this.dirty.set(Object.values(t).some(e=>e!==0)),Object.keys(t).forEach(e=>{this.pureSetAdjustment({type:e,value:t[e]})})})}};this.updateStateFromSerialization=t=>{this.updateStateFromHistory(t)};this.editor=t,this.adjustmentsStore=new Ii(this.editor.engineMediator),this.selectedOption="";let e=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new pt(e,w(b({},this.config),{locale:b(b({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){let t=this.items.find(e=>e?e.identifier===this.selectedOption:!1);return t?t.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[f.ADJUSTMENT]}get locale(){return this.editor.configStore.locale[f.ADJUSTMENT]}};s([E],q.prototype,"selectedOption",2),s([E],q.prototype,"dirty",2),s([h],q.prototype,"editAdjustments",2),s([h],q.prototype,"toggleOptionSelection",2),s([h],q.prototype,"pureSetAdjustment",2),s([h],q.prototype,"pureReset",2),s([h],q.prototype,"reset",2),s([h],q.prototype,"updateStateFromHistory",2),s([h],q.prototype,"updateStateFromSerialization",2),s([d],q.prototype,"selectedAdjustmentType",1),s([d],q.prototype,"isDirty",1),s([d],q.prototype,"state",1),s([d],q.prototype,"selectedOptionLabel",1),s([d],q.prototype,"brightness",1),s([d],q.prototype,"saturation",1),s([d],q.prototype,"contrast",1),s([d],q.prototype,"gamma",1),s([d],q.prototype,"clarity",1),s([d],q.prototype,"exposure",1),s([d],q.prototype,"shadows",1),s([d],q.prototype,"highlights",1),s([d],q.prototype,"whites",1),s([d],q.prototype,"blacks",1),s([d],q.prototype,"temperature",1),s([d],q.prototype,"sharpness",1),s([d],q.prototype,"categories",1),s([d],q.prototype,"items",1),s([d],q.prototype,"config",1),s([d],q.prototype,"locale",1);var Bn={identifier:"identity",intensity:1,isDuotone:!1};var R1=new Fe(0,1),qe=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeIfDuotone=t=>{this.state.isDuotone=t};this.changeIntensity=t=>{let e=R1.clamp(t);this.state.intensity=e};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Bn.identifier,this.state.intensity=Bn.intensity,this.removeIndex())};this.setFilterEffect=({identifier:t,intensity:e,isDuotone:i})=>{let r=this.state,n=()=>{this.changeIdentifier(t),this.changeIntensity(e),this.changeIfDuotone(i)};this.removeFilterEffect();let a=this.engineMediator.orderHelper.addIndex(f.FILTER);return i?new Promise((l,c)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,a).then(p=>{n(),this.effect=p,this.effect.setProperties({colorIntensity:e}),l()}).catch(p=>{this.fallbackOnError(r),c(p)})}):new Promise((l,c)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,a).then(p=>{n(),this.effect=p,this.effect.setProperties({intensity:e}),l()}).catch(p=>{this.fallbackOnError(r),c(p)})})};this.removeFilterEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.setEffectProperties=({intensity:t})=>this.effect?(this.state.isDuotone?this.effect.setProperties({colorIntensity:t}):this.effect.setProperties({intensity:t}),this.effect.getProperties()):null;this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(f.FILTER)};this.fallbackOnError=t=>{this.changeIdentifier(t.identifier),this.changeIntensity(t.intensity),t.identifier==="identity"&&this.removeIndex()};this.engineMediator=t,this.state=Bn}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};s([E],qe.prototype,"state",2),s([h],qe.prototype,"changeIdentifier",2),s([h],qe.prototype,"changeIfDuotone",2),s([h],qe.prototype,"changeIntensity",2),s([h],qe.prototype,"reset",2);var Fn="identity",ht=class{constructor(t){this.selectFilter=(t,e=1)=>D(this,null,function*(){if(t!==this.identifier){let i=this.selectedCategory;yield this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)}),this.selectedCategory===Fn&&(this.selectedCategory=i),this.editor.render(),this.addSnapshot(B.ADD,f.FILTER)}});this.changeIntensity=t=>{let e=this.isOptionDuoTone(this.identifier),i=this.filterStore.setEffectProperties({intensity:t});if(i){let r=e?i.colorIntensity:i.intensity;this.filterStore.changeIntensity(r),this.editor.render()}};this.setImageAndGetPreviews=()=>D(this,null,function*(){let{image:t}=this.editor.activeStore.state;yield this.editor.previewThumbnails.addImageToContainer(t),yield this.getAllFilterPreview()});this.getAllFilterPreview=()=>D(this,null,function*(){let t=this.entityManager.items.map(n=>({identifier:n.identifier,isDuotone:this.isOptionDuoTone(n.identifier)})),e=yield this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);yield this.editor.wait();let{config:i}=this,r=this.editor.configStore.assetProvider.getAssets("filter").map(n=>w(b({},n),{items:n.items.map(a=>w(b({},a),{thumbnailURI:e[a.identifier]}))}));this.entityManager=new pt(r,w(b({},i),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))});this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.controls.sliderIntensity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.selectedCategory=Fn,this.filterStore.removeFilterEffect(),this.filterStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Fn:t};this.updateStateFromSerialization=({identifier:t,intensity:e})=>{let i=this.doesFilterAssetExist(t);if(i){let r=us(i);return this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:r})}return new Promise((r,n)=>{n(new Error(`Filter Asset ${t} doesn't exist`))})};this.updateStateFromHistory=t=>D(this,null,function*(){return t.identifier==="identity"?(this.pureReset(),new Promise(e=>{e()})):this.filterStore.setFilterEffect(t)});this.doesFilterAssetExist=t=>this.entityManager.items.find(e=>t===e.identifier);this.isOptionDuoTone=t=>{let e=this.doesFilterAssetExist(t);return e?us(e):!1};this.editor=t,this.selectedCategory=Fn,this.filterStore=new qe(this.editor.engineMediator);let{config:e}=this,i=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new pt(i,w(b({},e),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[f.FILTER]}get locale(){return this.editor.configStore.locale[f.FILTER]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};s([E],ht.prototype,"selectedCategory",2),s([E],ht.prototype,"entityManager",2),s([h],ht.prototype,"selectFilter",2),s([h],ht.prototype,"changeIntensity",2),s([h],ht.prototype,"pureReset",2),s([h],ht.prototype,"reset",2),s([h],ht.prototype,"toggleCategorySelection",2),s([h],ht.prototype,"updateStateFromSerialization",2),s([h],ht.prototype,"updateStateFromHistory",2),s([d],ht.prototype,"state",1),s([d],ht.prototype,"identifier",1),s([d],ht.prototype,"intensity",1),s([d],ht.prototype,"isDuotone",1),s([d],ht.prototype,"selectedCategoryIdentifier",1),s([d],ht.prototype,"isOptionSelected",1),s([d],ht.prototype,"config",1),s([d],ht.prototype,"locale",1),s([d],ht.prototype,"categories",1),s([d],ht.prototype,"items",1);var Oa=class extends ac{constructor(){super(...arguments);this.prevDimensions={width:0,height:0}}onExport(t){this.emit(Ht.EXPORT,t)}onClose(){this.emit(Ht.CLOSE)}onUndo(){this.emit(Ht.HISTORY_UNDO)}onRedo(){this.emit(Ht.HISTORY_REDO)}onHistoryChange(){this.emit(Ht.HISTORY_CHANGE)}onEditorReady(){this.emit(Ht.EDITOR_READY)}onErrorImageLoading(t){this.emit(Ht.ERROR_IMAGE_LOADING,t)}onImageLoaded(){this.emit(Ht.IMAGE_LOAD)}onStickerUploadedAdd(t){this.emit(Ht.STICKER_UPLOAD_ADD,t)}onToolChanged(t){this.emit(Ht.TOOL_ENTER,t)}onErrorWebGLContextLost(){this.emit(Ht.ERROR_WEBGL_CONTEXT_LOST)}onCropDimensionsChanged(t){(this.prevDimensions.width!==t.width||this.prevDimensions.height!==t.height)&&(this.emit(Ht.CROP_DIMENSIONS_CHANGE,t),this.prevDimensions=t)}};var La=Zt([Ti,{layout:"basic",defaultTool:null}]);var Ba={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t"},categories:{[Dt.DuoTone]:"DuoTone",[Dt.BW]:"B & W",[Dt.Vintage]:"Vintage",[Dt.Smooth]:"Smooth",[Dt.Cold]:"Cold",[Dt.Warm]:"Warm",[Dt.Legacy]:"Legacy"},items:{[v.Inferno]:"Inferno",[v.Chestnut]:"Chestnut",[v.Fixie]:"Fixie",[v.Fridge]:"Fridge",[v.Sunny70s]:"Sunny 70s",[v.FlatBlack]:"Flat Black",[v.Mellow]:"Mellow",[v.HardStuff]:"Hard Stuff",[v.Oldtimer]:"Oldtimer",[v.AD1920]:"1920 A.D.",[v.Ancient]:"Ancient",[v.Kalmen]:"Kalmen",[v.Joran]:"Joran",[v.Polaroid]:"Polaroid",[v.Zephyr]:"Zephyr",[v.Levante]:"Levante",[v.Greyed]:"Greyed",[v.Classic]:"Classic",[v.Colorful]:"Colorful",[v.Snappy]:"Snappy",[v.Candy]:"Candy",[v.Creamy]:"Creamy",[v.LowFire]:"Low Fire",[v.Colla]:"Colla",[v.Sunrise]:"Sunrise",[v.Moss]:"Moss",[v.Food]:"Food",[v.Glam]:"Glam",[v.Gobblin]:"Gobblin",[v.HighCarb]:"High Carb",[v.Hicon]:"Hicon",[v.K1]:"K1",[v.K6]:"K6",[v.Pebble]:"Pebble",[v.Keen]:"Keen",[v.Lemon]:"Lemon",[v.Litho]:"Litho",[v.Lomo]:"Lomo",[v.Lomo100]:"Lomo 100",[v.Lucid]:"Lucid",[v.Neat]:"Neat",[v.Pumpkin]:"Pumpkin",[v.Solanus]:"Solanus",[v.Pale]:"Pale",[v.Pitched]:"Pitched",[v.Weathered]:"Weathered",[v.GreenGap]:"Green Gap",[v.PolaSX]:"Pola SX",[v.Pro400]:"Pro 400",[v.Quozi]:"Quozi",[v.Sepia]:"Sepia",[v.Settled]:"Settled",[v.Seventies]:"Seventies",[v.Soft]:"Soft",[v.Steel]:"Steel",[v.Summer]:"Summer",[v.Golden]:"Golden",[v.Tender]:"Tender",[v.Twilight]:"Twilight",[v.Softy]:"Softy",[v.Dusty]:"Dusty",[v.Desert]:"Desert",[v.Peach]:"Peach",[v.Clash]:"Clash",[v.Plum]:"Plum",[v.Breezy]:"Breezy",[v.DeepBlue]:"Deep Blue",[v.Frog]:"Frog",[v.Sunset]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{[Y.Bokeh]:"Bokeh",[Y.Chop]:"Chop",[Y.Clouds]:"Clouds",[Y.Golden]:"Golden",[Y.Grain]:"Grain",[Y.Hearts]:"Hearts",[Y.LightLeak1]:"Light Leak 1",[Y.LightLeak2]:"Light Leak 2",[Y.Metal]:"Metal",[Y.Mosaic]:"Mosaic",[Y.Painting]:"Painting",[Y.Paper]:"Paper",[Y.Rain]:"Rain",[Y.Vintage]:"Vintage",[Y.Wall1]:"Wall",[Y.Wall2]:"Wall 2",[Y.Wood]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},[f.CUSTOM]:{title:"Benutzerdefiniert"}};var Ho={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Reload"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{[Dt.DuoTone]:"DuoTone",[Dt.BW]:"B & W",[Dt.Vintage]:"Vintage",[Dt.Smooth]:"Smooth",[Dt.Cold]:"Cold",[Dt.Warm]:"Warm",[Dt.Legacy]:"Legacy"},items:{[v.Inferno]:"Inferno",[v.Chestnut]:"Chestnut",[v.Fixie]:"Fixie",[v.Fridge]:"Fridge",[v.Sunny70s]:"Sunny 70s",[v.FlatBlack]:"Flat Black",[v.Mellow]:"Mellow",[v.HardStuff]:"Hard Stuff",[v.Oldtimer]:"Oldtimer",[v.AD1920]:"1920 A.D.",[v.Ancient]:"Ancient",[v.Kalmen]:"Kalmen",[v.Joran]:"Joran",[v.Polaroid]:"Polaroid",[v.Zephyr]:"Zephyr",[v.Levante]:"Levante",[v.Greyed]:"Greyed",[v.Classic]:"Classic",[v.Colorful]:"Colorful",[v.Snappy]:"Snappy",[v.Candy]:"Candy",[v.Creamy]:"Creamy",[v.LowFire]:"Low Fire",[v.Colla]:"Colla",[v.Sunrise]:"Sunrise",[v.Moss]:"Moss",[v.Food]:"Food",[v.Glam]:"Glam",[v.Gobblin]:"Gobblin",[v.HighCarb]:"High Carb",[v.Hicon]:"Hicon",[v.K1]:"K1",[v.K6]:"K6",[v.Pebble]:"Pebble",[v.Keen]:"Keen",[v.Lemon]:"Lemon",[v.Litho]:"Litho",[v.Lomo]:"Lomo",[v.Lomo100]:"Lomo 100",[v.Lucid]:"Lucid",[v.Neat]:"Neat",[v.Pumpkin]:"Pumpkin",[v.Solanus]:"Solanus",[v.Pale]:"Pale",[v.Pitched]:"Pitched",[v.Weathered]:"Weathered",[v.GreenGap]:"Green Gap",[v.PolaSX]:"Pola SX",[v.Pro400]:"Pro 400",[v.Quozi]:"Quozi",[v.Sepia]:"Sepia",[v.Settled]:"Settled",[v.Seventies]:"Seventies",[v.Soft]:"Soft",[v.Steel]:"Steel",[v.Summer]:"Summer",[v.Golden]:"Golden",[v.Tender]:"Tender",[v.Twilight]:"Twilight",[v.Softy]:"Softy",[v.Dusty]:"Dusty",[v.Desert]:"Desert",[v.Peach]:"Peach",[v.Clash]:"Clash",[v.Plum]:"Plum",[v.Breezy]:"Breezy",[v.DeepBlue]:"Deep Blue",[v.Frog]:"Frog",[v.Sunset]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{[Y.Bokeh]:"Bokeh",[Y.Chop]:"Chop",[Y.Clouds]:"Clouds",[Y.Golden]:"Golden",[Y.Grain]:"Grain",[Y.Hearts]:"Hearts",[Y.LightLeak1]:"Light Leak 1",[Y.LightLeak2]:"Light Leak 2",[Y.Metal]:"Metal",[Y.Mosaic]:"Mosaic",[Y.Painting]:"Painting",[Y.Paper]:"Paper",[Y.Rain]:"Rain",[Y.Vintage]:"Vintage",[Y.Wall1]:"Wall",[Y.Wall2]:"Wall 2",[Y.Wood]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},[f.CUSTOM]:{title:"Custom"}};var kp=o=>o==="de"?Ba:Ho,Tp=(o,t)=>t&&t[o]?Zt([kp(o),t[o]]):kp(o)||Ho;var H1={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},_1={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},Rn=()=>{let o=8,t=230,e=3*o,i=t-2*e,r=(i-2*o)/3,n=(i-o)/2;return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:t,paddingTop:2*o,paddingBottom:2*o,paddingLeft:e,paddingRight:e,marginBottom:0,controls:{gutter:2*o}},advancedCard:{small:{height:r,width:r},medium:{height:n,width:n},large:{height:86,width:i}},advancedSpacer:8,basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:H1,zIndex:_1}};var $1=({primary:o="#365afc",background:t="#0B0B0B",foreground:e="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{let i="rgba(255, 255, 255, 0.90)",r="rgba(255, 255, 255, 0.60)",n="rgba(255, 255, 255, 0.38)",a="#424242",l="#333333",c="#242424",p="#171717",u="#0B0B0B",m="rgba(255, 255, 255, 0.08)",g="rgba(0, 0, 0, 0.3)",x="rgba(89, 121, 252, 0.20)",S="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:t,foreground:e,primary:o,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:l,activeForeground:o,containedPrimaryBackground:o,containedPrimaryForeground:i,outlinedPrimaryBackground:c,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:o,textSecondaryForeground:r,outlinedInactiveOverlayColor:g,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:l,foreground:e,activeForeground:e,activeBackground:o,inactiveOpacity:S,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:i,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:i,activeBorderColor:o,activeOverlayColor:x,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:i,inactiveOverlayColor:g,hoverOverlayColor:m},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:o,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:r,borderColor:l,caretColor:n,listBackground:l,listBorderColor:l,listItemHoverBackground:a,listForeground:r,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:S},textInput:{foreground:i,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:l,inactiveOpacity:S},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:o,thumbBackground:p,thumbBorderColor:o,inactiveOpacity:S,hoverOpacity:"0.7"},selectColor:{activeBorderColor:o,inactiveOpacity:S},toolbar:{foreground:i,background:c,activeBackground:"transparent",activeForeground:o,borderColor:"transparent"},tooltip:{background:a,foreground:i},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:l,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:S},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:i,borderColor:"none"},canvasActionBar:{background:a,foreground:i,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:l,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:a},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},Hn=$1;var W1=({primary:o="#1e47fb",background:t="#FBFBFB",foreground:e="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{let i="rgba(0, 0, 0, 0.90)",r="rgba(0, 0, 0, 0.60)",n="rgba(0, 0, 0, 0.38)",a="#CCCCCC",l="#D4D4D4",c="#E6E6E6",p="#EEEEEE",u="#FBFBFB",m="rgba(125, 125, 125, 0.12)",g="rgba(30, 71, 251, 0.2)",x="rgba(0, 0, 0, 0.1)",S="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:t,foreground:e,primary:o,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:l,activeForeground:o,containedPrimaryBackground:o,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:c,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:o,textSecondaryForeground:r,outlinedInactiveOverlayColor:x,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:l,foreground:e,activeForeground:e,activeBackground:o,inactiveOpacity:S,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:i,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:i,activeBorderColor:o,activeOverlayColor:g,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:x,hoverOverlayColor:m},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:o,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:r,borderColor:l,listBackground:l,caretColor:n,listForeground:r,listBorderColor:l,listItemHoverBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:S},textInput:{foreground:i,hoverBorderColor:i,background:"transparent",borderColor:l,inactiveOpacity:S},slider:{trackColor:a,activeTrackColor:o,thumbBackground:p,thumbBorderColor:o,inactiveOpacity:S,hoverOpacity:"0.7"},selectColor:{activeBorderColor:o,inactiveOpacity:S},toolbar:{foreground:i,background:l,activeBackground:"transparent",activeForeground:o,borderColor:"transparent"},tooltip:{background:a,foreground:i},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:p,shadow:"none",separatorColor:l,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:S},mainCanvasActionBar:{background:"transparent",foreground:i,borderColor:"none"},canvasActionBar:{background:a,foreground:i,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:l,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:a},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},Fa=W1;var hr=Hn(),Ra=Rn(),$t=w(b({},hr),{measurements:Ra});var V1=o=>o==="light"?Fa:Hn,Mp=(o,t)=>{let e=V1(o);if(t&&t[o]){let{primary:i,background:r,foreground:n}=t[o],a={primary:i,background:r,foreground:n},l=Object.keys(a).reduce((c,p)=>a[p]?w(b({},c),{[p]:a[p]}):c,{});return Zt([e(l),t[o]])}return e()||hr};var N1=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","mainCanvasActionBar","colorItem","fontSystem"],Ip=o=>{let t=Rn();if(o){let e={};return Object.keys(o).forEach(i=>{N1.indexOf(i)!==-1&&(e[i]=o[i])}),Zt([t,e])}return t};var U1={config:Ti,locale:Ho,theme:hr,measurements:Ra},Wt=class{constructor(){this.checkDefaultToolAvailability=(t,e)=>e.indexOf(t)!==-1;this.state=E(U1),this.events=new Oa,this.licenseChecker=null}saveConfig(t){t.mainCanvasActions&&t.mainCanvasActions.length!==4&&(t.mainCanvasActions.length=4);let e=t.layout&&t.layout==="basic"?La:Ti,i=Zt([e,t]);this.licenseChecker=new Sc(i.license),this.licenseChecker.areCustomAssetsAllowed()||(i.sticker.enableCustomUpload=!1);let r=Tp(i.language,i.custom.languages),n=Mp(i.theme,i.custom.themes),a=Ip(i.custom.measurements),{provider:l}=i.library,c=[];i.adjustment.categories=i.adjustment.categories.reduce((m,g)=>(m.push(w(b({},g),{items:g.items.filter(x=>Kl[x.identifier]?!0:(c.push(x.identifier),!1))})),m),[]),c.length!==0&&console.error(`The following identifier are incorrect for the adjustment tool: ${c.join(", ")}`),delete i.language,delete i.custom.languages,delete i.custom.themes,delete i.library.provider;let p=i.tools.reduce((m,g)=>typeof g=="object"?[...m,...g]:[...m,g],[]);p.length||(console.error("Empty list input for tools"),p=Ln.reduce((m,g)=>typeof g=="object"?[...m,...g]:[...m,g],[])),p=p.filter(m=>this.licenseChecker.isToolAllowed(m)),i.defaultTool&&(this.checkDefaultToolAvailability(i.defaultTool,p)||(this.licenseChecker.isToolAllowed(i.defaultTool)&&console.warn(`Configured default tool ${i.defaultTool} is not a part of configured list of tools: [${p.join(" ")}]`),[i.defaultTool]=p)),i.tools=p,this.state.config=i,this.state.locale=r,this.state.theme=n,this.state.measurements=a;let u=this.buildCustomAssetsConfig();return this.assetProvider=new uc(u,this.licenseChecker.areCustomAssetsAllowed(),i.assetResolver),this.loadThemeFont(),l}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get tools(){return this.config.tools.reduce((t,e)=>typeof e=="string"?[...t,e]:[...t,"",...e],[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf(rt.CLOSE)!==-1}loadThemeFont(){let{typography:t}=this.theme;t.skipLoading||this.assetProvider.getFontManager().injectFonts([t])}buildCustomAssetsConfig(){let t=this.tools,e=z(this.state.config),i=this.state.config.assetBaseUrl,{theme:r}=this.state,n=t.indexOf(f.FILTER)!==-1?e[f.FILTER]:void 0,a=t.indexOf(f.FOCUS)!==-1?e[f.FOCUS]:void 0,l=t.indexOf(f.ADJUSTMENT)!==-1?e[f.ADJUSTMENT]:void 0,c=t.indexOf(f.STICKER)!==-1?e[f.STICKER]:void 0,p=t.indexOf(f.FRAME)!==-1?e[f.FRAME]:void 0,u=t.indexOf(f.OVERLAY)!==-1?e[f.OVERLAY]:void 0,m=t.indexOf(f.TRANSFORM)!==-1?e[f.TRANSFORM]:void 0,g=t.indexOf(f.TEXT)!==-1?e[f.TEXT]:void 0,x=t.indexOf(f.TEXT_DESIGN)!==-1?e[f.TEXT_DESIGN]:void 0;return{basePath:i,theme:r,filter:n,focus:a,sticker:c,frame:p,overlay:u,transform:m,text:g,adjustment:l,textdesign:x}}};s([h],Wt.prototype,"saveConfig",1),s([d],Wt.prototype,"config",1),s([d],Wt.prototype,"locale",1),s([d],Wt.prototype,"theme",1),s([d],Wt.prototype,"measurements",1),s([d],Wt.prototype,"tools",1),s([d],Wt.prototype,"defaultTool",1),s([d],Wt.prototype,"isOrderDefault",1),s([d],Wt.prototype,"isLayoutAdvanced",1),s([d],Wt.prototype,"displayCloseButton",1);var Ha=class{constructor(t){this.editor=t}setBackgroundImage(t){this.container?this.container.setData({image:t,originalImage:t}):this.container=this.engine.addImage({image:t,originalImage:t,blendMode:ge.NORMAL,opacity:1})}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((t,e)=>{let{image:i}=this.editor.activeStore;if(jl(i))this.setBackgroundImage(i),t();else{let r=this.editor.libraryStore.getRawUrl(i);this.getImageElement(r).then(n=>{this.setBackgroundImage(n),t()}).catch(n=>{e({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((e,i)=>{let r=new Image;r.addEventListener("load",()=>{e(r)}),r.addEventListener("error",n=>{i(n)}),r.crossOrigin=this.editor.configStore.config.engine.crossOrigin,r.src=t})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}};var _a=class{constructor(t){this.applyNewImageTransform=()=>{let{size:t,width:e,height:i}=this.editor.engineMediator.image.container.getBounds(),r=this.container;r.setTransform(Pe.IDENTITY),r.setResolution(t),r.setPivot(.5,.5),r.setPosition({x:e/2,y:i/2})};this.editor=t}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}};var G1=(o,t)=>new Promise((e,i)=>{let r=new XMLHttpRequest;r.onload=()=>{let n=new FileReader;n.onloadend=()=>{typeof n.result=="string"&&n.result.substr(0,10)==="data:image"?e(n.result):i(new Error(`The image could not be loaded from ${o}`))},n.onerror=a=>{i(a)},n.readAsDataURL(r.response)},r.open("GET",o),r.responseType="blob",r.withCredentials=t==="use-credentials",r.send()}),Dp=(o,t)=>new Promise((e,i)=>{let r=new Image;r.onload=()=>{e(r)},r.onerror=()=>{i(new Error(`Failed to load image with src:${o}`))},r.crossOrigin=t,r.src=o}),j1=(o,t)=>new Promise((e,i)=>{G1(o,t).then(r=>{let n=new Image;n.addEventListener("load",()=>{e(n)}),n.src=r}).catch(()=>{Dp(o,t).then(r=>e(r)).catch(r=>{i(r)})})}),$a=i=>D(void 0,[i],function*({url:o,image:t,crossOrigin:e="anonymous"}){try{return t&&t.src&&t.src.substr(0,5)==="data:"||t&&t.src&&t.src.includes(".svg")?t:typeof o=="string"&&o.substr(0,5)==="data:"||typeof o=="string"&&o.includes(".svg")?Dp(o,e):j1(o||t.src,e)}catch(r){throw new Error(r)}});var X1={tool:null,isWebcam:!1,image:"",imageLoadedToEngine:!1},Vt=class{constructor(t){this.setImage=t=>D(this,null,function*(){let{crossOrigin:e}=this.editor.configStore.config.engine;typeof t=="string"&&(this.state.image=yield $a({url:Ni(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e})),t instanceof HTMLImageElement&&(this.state.image=yield $a({image:t,crossOrigin:e})),this.isWebcam&&(this.state.isWebcam=!1)});this.setImageLoadedToEngine=t=>{this.state.imageLoadedToEngine=t};this.newImage=t=>{this.editor.init(t)};this.editor=t,this.state=E(X1)}selectTool(t){let{licenseChecker:e}=this.editor.configStore;if(this.state.tool!==t&&(e==null?void 0:e.isToolAllowed(t)))switch(this.editor.onToolChange(this.state.tool,t),this.state.tool=t,this.editor.configStore.events.onToolChanged(t),t){case f.TEXT:this.editor.configStore.config.text.addDefaultTextOnEnter&&this.editor.spriteStore.textToolStore.addOrselect();break;case f.TEXT_DESIGN:this.editor.configStore.config.textdesign.addDefaultTextOnEnter&&this.editor.spriteStore.textDesignToolStore.addOrselect();break;case f.BRUSH:{this.editor.brushToolStore.initSize();break}case f.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop();break;default:break}}selectWebcam(t){this.state.isWebcam=t}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};s([h],Vt.prototype,"selectTool",1),s([h],Vt.prototype,"selectWebcam",1),s([h],Vt.prototype,"setImage",2),s([h],Vt.prototype,"setImageLoadedToEngine",2),s([h],Vt.prototype,"newImage",2),s([d],Vt.prototype,"webcamLabel",1),s([d],Vt.prototype,"tool",1),s([d],Vt.prototype,"isWebcam",1),s([d],Vt.prototype,"image",1),s([d],Vt.prototype,"imageLoadedToEngine",1);var Y1={height:150,width:150},Wa={height:0,width:0},Va=class{constructor(t){this.canvasClickDisabled=E.box(!1);this.resizeCanvas=(t=null)=>{let e=this.editor.activeStore.tool,i=t===f.TRANSFORM||!t&&e===f.TRANSFORM,{isLayoutAdvanced:r,measurements:n}=this.editor.configStore,{storedSize:a}=this.editor.canvasStore,l=0;!r&&i&&(l=n.basicToolControlBar.controlsBarHeight*-1,t===f.TRANSFORM&&e===f.BRUSH&&(l-=n.basicToolControlBar.itemsBarHeight+4)),this.setCanvasSize({width:a.width,height:a.height+l})};this.setCanvasSize=t=>{this.state.canvasSize=t};this.editor=t,this.state=E(Va.initialState)}setCanvasElement(t){this.canvas=t,this.editor.engineMediator.preview.createPreview(t),this.editor.init(this.editor.configStore.config.image)}saveDimensions({height:t,width:e,render:i}){let{imageLoadedToEngine:r}=this.editor.activeStore;t>Wa.height&&e>Wa.width&&(this.state.storedSize={width:e,height:t},this.state.canvasSize.height===0&&(this.state.canvasSize={width:e,height:t}),i&&r&&this.editor.resize())}disableCanvasClick(){this.canvasClickDisabled.set(!0)}enableCanvasClick(){this.canvasClickDisabled.set(!1)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return y.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(t){let e=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(i=>i.getID()).filter(i=>i!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(e)}},Ot=Va;Ot.initialState={canvasSize:Wa,storedSize:Y1},s([h],Ot.prototype,"setCanvasElement",1),s([h],Ot.prototype,"saveDimensions",1),s([h],Ot.prototype,"resizeCanvas",2),s([h],Ot.prototype,"disableCanvasClick",1),s([h],Ot.prototype,"enableCanvasClick",1),s([h],Ot.prototype,"setCanvasSize",2),s([d],Ot.prototype,"isCanvasClickable",1),s([d],Ot.prototype,"canvasSize",1),s([d],Ot.prototype,"storedSize",1),s([d],Ot.prototype,"sizeVector",1),s([d],Ot.prototype,"sizeVectorMagnitude",1);var K1={type:null,identifier:null,isVisible:!1,error:""},Jt=class{constructor(t){this.showActionModal=({type:t,identifier:e,error:i,handleConfirm:r,handleDismiss:n})=>{this.resetHandlers(),this.state.isVisible=!0,this.state.identifier=e,this.state.type=t,this.state.error=i||"",this.handleConfirm=r,this.handleDismiss=n};this.hideModal=()=>{this.state.isVisible=!1,this.state.type=null,this.state.error="",this.state.identifier=null,this.resetHandlers()};this.resetHandlers=()=>{this.handleConfirm=null,this.handleDismiss=null};this.configStore=t.configStore,this.state=E(K1)}showInfoModal(t){this.resetHandlers(),this.state.isVisible=!0,this.state.type=et.INFO,this.state.identifier=t,this.state.error=""}showTextEditModal(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=et.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""}get modalProps(){let{isVisible:t}=this.state,e=this.getModalLocale();if(e){let{bodyLabel:i,headerLabel:r,buttonYes:n,buttonNo:a}=e;return{headerLabel:r,bodyLabel:i,confirmLabel:n,dismissLabel:a,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){let{isLayoutAdvanced:t,measurements:{basicCanvasOffset:e,advancedUIToolControlBar:i,advancedUIToolbar:r},isOrderDefault:n}=this.configStore,a=(i.width+r.width)*(n?1:-1);return t?{x:a/2,y:0}:{x:0,y:-e}}getModalLocale(){let{identifier:t,error:e,type:i}=this.state,{locale:r}=this.configStore;if(!i||!t||i===et.TEXT_EDIT)return null;if(i&&t&&r[`${i}Modals`]&&r[`${i}Modals`][t]){let n=r[`${i}Modals`][t],{body:a}=n;a&&typeof e=="object"?Object.keys(e).forEach(c=>{a=a.replace(`\${${c}}`,e[c])}):a&&(a=a.replace("${error}",e));let l=n.heading;if(i===et.ERROR||i===et.WARNING){let c={error:r.common.error,warning:r.common.warning};l=`${i==="error"?c.error:c.warning}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:a,headerLabel:l,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};s([h],Jt.prototype,"showActionModal",2),s([h],Jt.prototype,"showInfoModal",1),s([h],Jt.prototype,"showTextEditModal",1),s([h],Jt.prototype,"hideModal",2),s([d],Jt.prototype,"modalProps",1),s([d],Jt.prototype,"isVisible",1),s([d],Jt.prototype,"type",1),s([d],Jt.prototype,"identifier",1),s([d],Jt.prototype,"positionOffset",1);var bt=class{constructor(t){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(t=>t/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{this.canZoomIn&&(this.state.scaleIndex+=1,this.scaleRender())};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;let{maxOffsetX:t,maxOffsetY:e}=this.checkOffset({x:0,y:0});this.state.scaleIndex===this.defaultIndex&&(this.offset.y=e),this.state.scaleIndex===this.defaultIndex&&(this.offset.x=t),this.savePosition(),this.scaleRender()}};this.setOffset=t=>{let{canDragX:e,canDragY:i}=this.checkOffset(t);e&&(this.offset.x=t.x),i&&(this.offset.y=t.y),this.scaleRender()};this.editor=t}setInitialTransform(t=0){let e=at.devicePixelRatio,{scaleImageToFit:i}=this.editor.configStore.config,{transform:r}=this.editor.engineMediator.preview;ft(()=>{let n=Math.abs(t||r.scale.x);this.setDefaultScale(i?n:Math.min(1*e,n)),this.setPosition(r.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){let{width:t,height:e}=this.editor.canvasStore.canvas;this.setPosition({x:t/2,y:e/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(t){this.state.position.x=t.x,this.state.position.y=t.y}savePosition(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}setDefaultScale(t){if(this.defaultScale!==1){let i=this.SCALE_LEVELS.findIndex(r=>r===this.defaultScale);i!==-1&&(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),...this.SCALE_LEVELS.slice(i+1)])}let e=this.SCALE_LEVELS.findIndex(i=>i===t);if(e!==-1)this.state.scaleIndex=e;else{let i=this.SCALE_LEVELS.findIndex((r,n)=>(n===0||this.SCALE_LEVELS[n-1]<t)&&t<r);i!==-1?(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),t,...this.SCALE_LEVELS.slice(i)],this.state.scaleIndex=i):(this.SCALE_LEVELS=[...this.SCALE_LEVELS,t],this.state.scaleIndex=this.SCALE_LEVELS.length-1)}this.defaultScale=t}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(t){let e=Math.max(window.devicePixelRatio||1,1),{scaledSize:i}=this,{previewSize:r}=this,n=this.editor.engineMediator.preview.initialTransform.position,a=this.getPositionWithOffset(t),l=(i.width-r.width)*e/2,c=(i.height-r.height)*e/2,p=n.x-a.x,u=n.y-a.y,m=Math.abs(p),g=Math.abs(u),x=p>0,S=u>0,C=m-l,P=g-c;return{canDragX:C<0,canDragY:P<0,maxOffsetX:x?-C:C,maxOffsetY:S?-P:P}}calculateScale(t=0,e=this.previewSize,i=this.defaultScale){let{width:r,height:n}=e,a=new y({x:r,y:n}),l=new y(Math.abs(a.x*Math.cos(t))+Math.abs(a.y*Math.sin(t)),Math.abs(a.x*Math.sin(t))+Math.abs(a.y*Math.cos(t))),c=a.subtract(l).divide(2).multiply(i).abs;return c.y>c.x?c.y*2/a.y+i:c.x*2/a.x+i}get defaultIndex(){return this.SCALE_LEVELS.findIndex(t=>t===this.defaultScale)}getPositionWithOffset(t=this.offset){let{position:e}=this;return{x:e.x-t.x,y:e.y-t.y}}scaleRender(t=!1){let e=this.editor.scale.getPositionWithOffset(),i=t?this.defaultScale:this.scale,r={x:i,y:i};this.editor.engineMediator.preview.container.setScale(r),this.editor.engineMediator.preview.container.setPosition(e),this.editor.engineMediator.preview.savePreviewTransform({scale:r,position:e,rotation:0}),t||this.editor.render()}get scale(){let t=this.state.scaleIndex;return t!==-1?this.SCALE_LEVELS[t]:this.defaultScale}get zoomLevel(){let t=Math.max(window.devicePixelRatio||1,1);return(this.scale/t*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){let{restrictZoomOutToDefault:t}=this.editor.configStore.config;return t?this.state.scaleIndex>this.defaultIndex:this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){let t=this.state.scaleIndex,e=t!==-1?this.SCALE_LEVELS[t]:this.defaultScale,{previewSize:i}=this;return{width:i.width*e/this.defaultScale,height:i.height*e/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};s([E],bt.prototype,"state",2),s([h],bt.prototype,"in",2),s([h],bt.prototype,"out",2),s([h],bt.prototype,"setInitialTransform",1),s([h],bt.prototype,"resetScale",1),s([h],bt.prototype,"resetPosition",1),s([h],bt.prototype,"setPosition",1),s([h],bt.prototype,"savePosition",1),s([h],bt.prototype,"setDefaultScale",1),s([h],bt.prototype,"setScaleToDefault",1),s([d],bt.prototype,"scale",1),s([d],bt.prototype,"zoomLevel",1),s([d],bt.prototype,"canDrag",1),s([d],bt.prototype,"canZoomOut",1),s([d],bt.prototype,"canZoomIn",1),s([d],bt.prototype,"position",1),s([d],bt.prototype,"scaledSize",1);var Ep=/^data:image\/(.+?);base64,/,q1=o=>Ep.test(o),Z1=o=>o.match(/^data:([^;]+)/)[1],J1=o=>o.replace(Ep,""),ur=class{constructor(t){this.applySerialization=(t,e,i,r)=>D(this,null,function*(){this.editor.resetToolStates();let n=this.editor.activeStore.tool===f.TRANSFORM;n||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),n||this.editor.transformToolStore.onLeave();let a=new e(this.editor),l="Unexpected error occured",c=e.deserializeImage(t);if(c.image&&c.image.data){let m=c.image.data;yield this.editor.setImage(m),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(m),yield this.editor.engineMediator.image.addImageToContainer(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms()}let p=a.deserializeTransformation(t);if(!p){r(l);return}yield this.applyStateOnUI(p);let u=a.deserialize(t);if(!u){r(l);return}yield this.applyStateOnUI(u),this.editor.historyStore.addInitialSnapshot(),yield this.editor.render(),this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),i()});this.editor=t}serialize({image:t}={image:!1}){let e=this.editor.activeStore.tool===f.TRANSFORM,{displaySerializationModal:i}=this.editor.configStore.config;return i&&this.editor.modalStore.showInfoModal("saving"),new Promise((r,n)=>{import("./serialization-XBIDEM7C.js").then(l=>D(this,[l],function*({Serializer:a}){try{e&&this.editor.transformToolStore.onLeave(),yield this.editor.wait(),this.editor.transformToolStore.applyDefaultCrop(!1);let{originalImage:c}=this.editor.imageContainer.getData(),p=this.editor.engineMediator.output.container.getResolution(),u={width:c.width,height:c.height},m=new a(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,p,u,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),g={[f.ADJUSTMENT]:z(this.editor.adjustmentsToolStore.state),[f.FILTER]:z(this.editor.filterToolStore.state),[f.FOCUS]:z(this.editor.focusToolStore.serializableState),[f.OVERLAY]:z(this.editor.overlayToolStore.state),[f.FRAME]:z(this.editor.frameToolStore.state),[f.BRUSH]:this.editor.brushToolStore.strokes||{strokes:[]}},{sprite:x,customStickers:S}=yield this.editor.spriteStore.serializableState();x.spriteIdList=x.spriteIdList.sort((T,R)=>{let $=x.common[T].order,W=x.common[R].order;return $-W}),g.sprite=x,g.customStickers=S,g.transform=this.editor.transformToolStore.serializableState;let C,P;if(t){let T=ur.getDataURL(c);P=Z1(T),C=J1(T)}i&&this.editor.modalStore.hideModal(),r(m.serialise(g,C,P)),e&&this.editor.transformToolStore.onEnter()}catch(c){i&&this.editor.modalStore.hideModal(),n(c)}}))})}deserialize(t){return this.editor.modalStore.showInfoModal("loading"),new Promise((e,i)=>{try{import("./serialization-XBIDEM7C.js").then(({Deserializer:r})=>{r.checkIsSerialisationValid(t)?this.applySerialization(t,r,e,i):(this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({type:et.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(t,r,e,i)}))})}catch(r){this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),i(r)}})}static getDataURL(t){if(t instanceof HTMLImageElement){let{src:r}=t;if(q1(r))return r}if(t instanceof HTMLCanvasElement)return t.toDataURL(fe.PNG);let e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e.toDataURL(fe.PNG)}applyStateOnUI(t){return D(this,null,function*(){let e=this.editor.activeStore.tool===f.TRANSFORM;try{t.transform&&(e||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t.transform),yield this.editor.wait(),e||(this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),yield this.editor.wait(),this.editor.transformToolStore.onLeave())),t.filter&&(yield this.editor.filterToolStore.updateStateFromSerialization(t.filter)),t.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment),t.focus&&(yield this.editor.focusToolStore.updateStateFromSerialization(t.focus)),t.overlay&&(yield this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)),t.sprite&&(t.sprite.spriteIdList=t.sprite.spriteIdList.sort((i,r)=>{let n=t.sprite.common[i].order,a=t.sprite.common[r].order;return n-a}),yield this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers)),t.brush&&this.editor.brushToolStore.updateStateFromHistory(t.brush),t.frame&&(yield this.editor.frameToolStore.updateStateFromSerialization(t.frame)),this.editor.outputContainer.updateChildrenContainers()}catch(i){console.error(i),this.editor.modalStore.showActionModal({type:et.ERROR,identifier:"unexpectedError",error:i,handleConfirm:()=>{window.location.reload()}})}})}};var Ce={identifier:"identity",opacity:1,width:0,color:Bt.white};var Q1=new Fe(0,1),Re=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{let e=Q1.clamp(t);this.state.opacity=e};this.changeWidth=t=>{this.state.width=t};this.changeColor=t=>{this.state.color=t};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Ce.identifier,this.state.opacity=Ce.opacity,this.state.width=Ce.width,this.state.color=Ce.color,this.removeIndex())};this.removeFrameEffect=()=>{this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)};this.setEffectProperties=t=>this.effect?(this.removeIndex(),this.effect.setProperties(t),this.effect.getProperties()):null;this.setFrameEffect=({identifier:t,width:e,opacity:i,color:r})=>{let n=b({},this.state);this.changeIdentifier(t),this.changeWidth(e),this.changeOpacity(i),this.changeColor(r),this.removeFrameEffect();let a=this.engineMediator.orderHelper.addSprite(t);return new Promise((l,c)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container,a).then(p=>{this.effect=p,this.effect.setProperties({tintColor:r,opacity:i,width:e}),l()}).catch(p=>{this.changeIdentifier(n.identifier),this.changeOpacity(n.opacity),this.changeWidth(n.width),this.changeColor(n.color),n.identifier==="identity"&&this.removeIndex(),c(p)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=t,this.state=Ce}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};s([E],Re.prototype,"state",2),s([h],Re.prototype,"changeIdentifier",2),s([h],Re.prototype,"changeOpacity",2),s([h],Re.prototype,"changeWidth",2),s([h],Re.prototype,"changeColor",2),s([h],Re.prototype,"reset",2);var lt=class{constructor(t){this.colorList=at.defaultColors;this.selectFrame=t=>D(this,null,function*(){if(t!==this.identifier){let e=.1*this.editor.shortestOutputSide;yield this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:Ce.color}),this.editor.render(),this.addSnapshot(B.ADD,f.FRAME)}});this.changeOpacity=t=>{let e=this.frameStore.setEffectProperties({opacity:t});e&&(this.frameStore.changeOpacity(e.opacity),this.editor.render())};this.changeWidth=t=>{let e=this.frameStore.setEffectProperties({width:t});e&&(this.frameStore.changeWidth(e.width),this.editor.render())};this.changeColor=t=>{let e=this.frameStore.setEffectProperties({tintColor:t});e&&(this.frameStore.changeColor(e.tintColor),this.editor.render())};this.colorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.controls.selectColor)};this.toolSnapshot=t=>{this.addSnapshot(B.EDIT,t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.frameStore.removeFrameEffect(),this.frameStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=t=>t.identifier==="identity"?(this.pureReset(),new Promise(e=>{e()})):this.frameStore.setFrameEffect(t);this.updateStateFromSerialization=t=>D(this,null,function*(){return this.entityManager.items.find(i=>i.identifier===t.identifier)?this.frameStore.setFrameEffect(t).then(()=>{this.editor.transformToolStore.setFrameOpacity(t.opacity)}):new Promise((i,r)=>{r(new Error("Frame Asset doesn't exist"))})});this.editor=t,this.frameStore=new Re(this.editor.engineMediator);let e=this.editor.assetProvider.getAssets("frame"),{config:i}=this;this.entityManager=new pt(e,w(b({},i),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),Ce.color=z(re(this.config,"defaultColor",Ce.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=le(z(this.config.colors)))}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){let t=this.entityManager.items.find(e=>e.identifier===this.identifier);return t&&t.tintable||!1}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config[f.FRAME]}get locale(){return this.editor.configStore.locale[f.FRAME]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};s([h],lt.prototype,"selectFrame",2),s([h],lt.prototype,"changeOpacity",2),s([h],lt.prototype,"changeWidth",2),s([h],lt.prototype,"changeColor",2),s([h],lt.prototype,"pureReset",2),s([h],lt.prototype,"reset",2),s([h],lt.prototype,"updateStateFromHistory",2),s([h],lt.prototype,"updateStateFromSerialization",2),s([d],lt.prototype,"state",1),s([d],lt.prototype,"identifier",1),s([d],lt.prototype,"color",1),s([d],lt.prototype,"size",1),s([d],lt.prototype,"tintable",1),s([d],lt.prototype,"opacity",1),s([d],lt.prototype,"minSize",1),s([d],lt.prototype,"maxSize",1),s([d],lt.prototype,"config",1),s([d],lt.prototype,"locale",1),s([d],lt.prototype,"localeColor",1),s([d],lt.prototype,"items",1),s([d],lt.prototype,"isOptionSelected",1);var t0={categories:[],query:""},Nt=class{constructor(t){this.initProvider=t=>{t&&(this.libraryProvider=new t)};this.fetchImages=(t="")=>D(this,null,function*(){if(this.libraryProvider){let e=null;try{let i=yield this.libraryProvider.getCategories(),r=yield this.libraryProvider.searchImages(t);e=i.map((n,a)=>{let l=r.filter(c=>c.category===n.name);return{identifier:n.name,name:n.name,thumbnailURI:n.coverImageUrl,items:l.map(c=>({name:c.title||`image${a}`,identifier:`${n.name}-${c.title}-${a}`,thumbnailURI:c.thumbUrl,rawUrl:c.rawUrl,authorName:c.authorName,authorAvatar:c.authorAvatar}))}}).filter(n=>n.items.length)}catch(i){console.log(i)}ft(()=>{this.state.query=t,this.state.categories=e})}});this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""};this.getRawUrl=t=>{let e=this.items.findIndex(i=>i.identifier===t);return e!==-1?this.items[e].rawUrl:t};this.configStore=t.configStore,this.state=E(t0),this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(t=>t.items).reduce((t,e)=>[...t,...e],[])}get query(){return this.state.query}get config(){return this.configStore.config[f.LIBRARY]}get locale(){return this.configStore.locale[f.LIBRARY]}};s([E],Nt.prototype,"selectedCategory",2),s([h],Nt.prototype,"initProvider",2),s([h],Nt.prototype,"fetchImages",2),s([h],Nt.prototype,"toggleCategorySelection",2),s([d],Nt.prototype,"selectedCategoryIdentifier",1),s([d],Nt.prototype,"categories",1),s([d],Nt.prototype,"items",1),s([d],Nt.prototype,"query",1),s([d],Nt.prototype,"config",1),s([d],Nt.prototype,"locale",1);var mr={identifier:"identity",opacity:1,blendMode:ge.LIGHTEN};var e0=new Fe(0,1),He=class{constructor(t,e){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{let e=e0.clamp(t);this.state.opacity=e};this.changeBlendMode=t=>{this.state.blendMode=t};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=mr.identifier,this.state.opacity=mr.opacity,this.state.blendMode=mr.blendMode,this.removeIndex())};this.correctOverlayFlip=()=>{let{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();this.effect&&(this.effect.setFlipHorizontally(t),this.effect.setFlipVertically(e))};this.removeOverlayEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.removeIndex(),this.effect=void 0)};this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null;this.setOverlayEffect=({identifier:t,blendMode:e,opacity:i})=>{let r=b({},this.state);this.removeOverlayEffect();let n=this.engineMediator.orderHelper.addIndex(f.OVERLAY);return new Promise((a,l)=>{this.engineMediator.engine.addOverlayFromAssets(t,this.engineMediator.image.container,n).then(c=>{this.changeIdentifier(t),this.changeOpacity(i),this.changeBlendMode(e),this.effect=c,this.effect.setProperties({blendMode:e,opacity:i}),this.correctOverlayFlip(),a()}).catch(c=>{this.changeIdentifier(r.identifier),this.changeOpacity(r.opacity),this.changeBlendMode(r.blendMode),r.identifier==="identity"&&this.removeIndex(),l(c)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(f.OVERLAY)};this.engineMediator=t,this.editor=e,this.state=mr}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};s([E],He.prototype,"state",2),s([h],He.prototype,"changeIdentifier",2),s([h],He.prototype,"changeOpacity",2),s([h],He.prototype,"changeBlendMode",2),s([h],He.prototype,"reset",2),s([h],He.prototype,"correctOverlayFlip",2);var yt=class{constructor(t){this.selectOverlay=t=>D(this,null,function*(){if(t!==this.identifier){let e=this.defaultBlendModeForIdentifier(t);yield this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e}),this.addSnapshot(B.ADD,f.OVERLAY),this.editor.render()}});this.changeOpacity=t=>{let e=this.overlayStore.setEffectProperties({opacity:t});e&&(this.overlayStore.changeOpacity(e.opacity),this.editor.render())};this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.controls.sliderOpacity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.changeBlendMode=t=>{let e=this.overlayStore.setEffectProperties({blendMode:t});e&&(this.overlayStore.changeBlendMode(e.blendMode),this.addSnapshot(B.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())};this.pureReset=()=>{this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromSerialization=t=>D(this,null,function*(){return this.entityManager.items.find(i=>i.identifier===t.identifier)?this.overlayStore.setOverlayEffect(t).then(()=>{this.editor.transformToolStore.setOverlayOpacity(t.opacity)}):new Promise((i,r)=>{r(new Error(`Overlay Asset ${t.identifier} doesn't exist`))})});this.updateStateFromHistory=t=>D(this,null,function*(){return t.identifier==="identity"?(this.pureReset(),new Promise(e=>{e()})):this.overlayStore.setOverlayEffect(t)});this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=t=>{let e=this.entityManager.items.findIndex(i=>i.identifier===t);return e!==-1?this.entityManager.items[e].defaultBlendMode:ge.LIGHTEN};this.editor=t,this.overlayStore=new He(this.editor.engineMediator,t);let e=this.editor.assetProvider.getAssets("overlay"),{config:i}=this;this.entityManager=new pt(e,w(b({},i),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[f.OVERLAY]}get locale(){return this.editor.configStore.locale[f.OVERLAY]}get items(){return this.entityManager.items}get allBlendModes(){let t=this.locale.controls;return Object.keys(ge).map(e=>{let i=ge[e],r=`blendMode${i.charAt(0).toUpperCase()}${i.slice(1)}`;return{identifier:i,value:t[r]}})}};s([h],yt.prototype,"selectOverlay",2),s([h],yt.prototype,"changeOpacity",2),s([h],yt.prototype,"changeBlendMode",2),s([h],yt.prototype,"pureReset",2),s([h],yt.prototype,"reset",2),s([h],yt.prototype,"updateStateFromSerialization",2),s([h],yt.prototype,"updateStateFromHistory",2),s([h],yt.prototype,"correctOverlayFlip",2),s([d],yt.prototype,"state",1),s([d],yt.prototype,"identifier",1),s([d],yt.prototype,"opacity",1),s([d],yt.prototype,"blendMode",1),s([d],yt.prototype,"isOptionSelected",1),s([d],yt.prototype,"config",1),s([d],yt.prototype,"locale",1),s([d],yt.prototype,"items",1),s([d],yt.prototype,"allBlendModes",1);var o0=o=>{let t=atob(o.split(",")[1]),e=o.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i);for(let n=0;n<t.length;n+=1)r[n]=t.charCodeAt(n);return new Blob([i],{type:e})},Na=o0;var Pp=o=>o.split(",")[0].split(":")[1].split(";")[0],zp=o=>typeof o=="string"?Pp(o):o.src.includes(".svg")?Yt.SVG:o.src?Pp(o.src):Yt.JPEG;var _n=li(hc());var fr=class{static isImageElement(t){return t instanceof HTMLImageElement}constructor({license:t,assetProvider:e,crossOrigin:i}){this.crossOrigin=i,this.engine=new _r({license:t,crossOrigin:i,assetProvider:e,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(t){return new Promise((e,i)=>{let r=[],n=[];t.forEach(a=>{a.isDuotone?r.push(a.identifier):n.push(a.identifier)}),this.getAllDuotonePreview(r).then(a=>{this.getAllLutPreview(n).then(l=>{e(Object.assign(a,l))})}).catch(a=>{i(a)})})}getAllDuotonePreview(t){return D(this,null,function*(){let e={};if(!t.length)return e;let i=yield this.engine.addDuoToneFilterFromAssets(t[0],this.container);return yield(0,_n.default)(t,r=>D(this,null,function*(){let n=this.engine.assetProvider.getDuotoneFilterAsset(r);i.filterOperation.getFilter().set({intensity:.5,lightColor:xs.Color.fromHex(n.lightColor),darkColor:xs.Color.fromHex(n.darkColor)});let l=yield this.engine.export(Do.DATA_URL,fe.PNG);e[r]=l}),{concurrency:1}),this.engine.removeEffect(i),e})}loadLutAssets(t){return D(this,null,function*(){let e={};return yield(0,_n.default)(t,i=>D(this,null,function*(){e[i]=yield this.engine.getLutFilterImage(i)})),e})}getAllLutPreview(t){return D(this,null,function*(){let e={};if(!t.length)return e;let i=yield this.loadLutAssets(t),r=yield this.engine.addLUTFilterFromAssets(t[0],this.container);return yield(0,_n.default)(t,n=>D(this,null,function*(){let a=this.engine.assetProvider.getLUTFilterAsset(n),l=r.filterOperation.getFilter(),c={horizontalTileCount:a.horizontalTileCount||5,verticalTileCount:a.verticalTileCount||5,image:i[n]};l.set(w(b({},c),{intensity:a.defaultIntensity||1})),r.setProperties({intensity:1}),l._lutPrimitive.set(c);let p=yield this.engine.export(Do.DATA_URL,fe.PNG);e[n]=p}),{concurrency:1}),this.engine.removeEffect(r),e})}addImageToContainer(t){return new Promise((e,i)=>{let r;fr.isImageElement(t)?(r=t,this.setBackgroundImage(r),e()):this.getImageElement(t).then(n=>{r=n,this.setBackgroundImage(r),e()}).catch(n=>{i({identifier:"imageLoading",message:n.message})})})}getImageElement(t){return new Promise((e,i)=>{let r=new Image;r.addEventListener("load",()=>{e(r)}),r.addEventListener("error",n=>{i(n)}),r.crossOrigin=this.crossOrigin,r.src=t})}setBackgroundImage(t){this.container?this.container.setData({image:t}):this.container=this.engine.addImage({image:t,blendMode:ge.NORMAL,opacity:1});let{size:e}=this.container.getBounds();this.engine.getOutputContainer().setResolution(e)}};var gr={size:0,color:Bt.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0};var st=class{constructor(t){this.strokes={strokes:[]};this.colorList=at.defaultColors;this.dirty=E.box(!1);this.id="";this.containerId=()=>this.id;this.initSize=()=>{let{minimumSize:t,maximumSize:e}=this.state,{size:i}=this;i===0&&this.changeSize(ms(this.config,"defaultSize",[t,e]))};this.changeColor=t=>{this.state.color=t};this.changeSize=t=>{this.state.size=t};this.changeRelativeSize=t=>{let{maximumSize:e,minimumSize:i}=this.state;this.state.size=(e-i)*t/100+i};this.changeHardness=t=>{this.state.hardness=t};this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.editor=t,this.state=w(b({},gr),{hardness:ms(this.config,"defaultHardness",[gr.minimumHardness,gr.maximumHardness]),color:z(re(this.config,"defaultColor",gr.color))}),this.config.colors&&this.config.colors.length>0&&(this.colorList=le(z(this.config.colors)))}addSnapshot(t,e){this.editor.addSnapshot(void 0,t,e)}clickableCanvas(t){this.editor.clickableCanvas(t)}beginStroke(t=[]){if(!this.drawingContainer){let e=this.editor.orderHelper.addSprite(f.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:z(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(t){if(this.drawingContainer){let e=this.editor.previewToWorld(t,!1);this.drawingContainer.addPointToCurrentStroke(e),this.editor.render()}}endStroke(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(B.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))}updateStateFromHistory(t){if(!(0,wt.default)(t,this.strokes)){if((0,wt.default)(t,{strokes:[]})||!t){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length){this.dirty.set(!1);return}this.strokes=t,this.drawingContainer.setData(this.strokes)}else{let e=this.editor.orderHelper.addSprite(f.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e),this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0),this.id=this.drawingContainer.getID()}}pureReset(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}get config(){return this.editor.configStore.config[f.BRUSH]}get locale(){return this.editor.configStore.locale[f.BRUSH]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){let{size:t,maximumSize:e,minimumSize:i}=this.state;return(t-i)*100/(e-i)}get sizeOnScreenSpace(){let t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};s([E],st.prototype,"state",2),s([E],st.prototype,"dirty",2),s([h],st.prototype,"initSize",2),s([h],st.prototype,"changeColor",2),s([h],st.prototype,"changeSize",2),s([h],st.prototype,"changeRelativeSize",2),s([h],st.prototype,"changeHardness",2),s([h],st.prototype,"clickableCanvas",1),s([h],st.prototype,"beginStroke",1),s([h],st.prototype,"strokePosition",1),s([h],st.prototype,"endStroke",1),s([h],st.prototype,"updateStateFromHistory",1),s([h],st.prototype,"reset",2),s([d],st.prototype,"config",1),s([d],st.prototype,"locale",1),s([d],st.prototype,"localeColor",1),s([d],st.prototype,"color",1),s([d],st.prototype,"size",1),s([d],st.prototype,"relativeSize",1),s([d],st.prototype,"sizeOnScreenSpace",1),s([d],st.prototype,"hardness",1),s([d],st.prototype,"isDirty",1);var ce;(function(i){i.LEADING="leading",i.CENTER="center",i.TRAILING="trailing"})(ce||(ce={}));var i0={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},we=class{constructor(t){this.previewTopLeftPosition={x:0,y:0};this.getGuideValue=(t,e)=>{let{height:i,width:r}=this.editor.getPreviewSize(),{snapToLeft:n,snapToRight:a,snapToTop:l,snapToBottom:c}=this.configStore.config.snapping.position,p=Math.min(i,r),u=0;return e==="bottom"?u=Math.round(i-p*c):e==="top"?u=Math.round(p*l):e==="right"?u=Math.round(r-p*a):e==="left"?u=Math.round(p*n):t==="vertical"&&e==="center"?u=Math.round(r/2):t==="horizontal"&&e==="center"&&(u=Math.round(i/2)),u};this.getVerticalGuidesFromConfig=()=>{let{snapToVerticalCenter:t,snapToLeft:e,snapToRight:i}=this.configStore.config.snapping.position,r=[];return t&&r.push({value:this.getGuideValue("vertical","center"),edge:ce.CENTER,isVisible:!1,direction:"vertical"}),e&&r.push({value:this.getGuideValue("vertical","left"),edge:ce.LEADING,isVisible:!1,direction:"vertical"}),i&&r.push({value:this.getGuideValue("vertical","right"),edge:ce.TRAILING,isVisible:!1,direction:"vertical"}),r};this.getHorizontalGuidesFromConfig=()=>{let{snapToHorizontalCenter:t,snapToTop:e,snapToBottom:i}=this.configStore.config.snapping.position,r=[];return t&&r.push({value:this.getGuideValue("horizontal","center"),edge:ce.CENTER,isVisible:!1,direction:"horizontal"}),e&&r.push({value:this.getGuideValue("horizontal","top"),edge:ce.LEADING,isVisible:!1,direction:"horizontal"}),i&&r.push({value:this.getGuideValue("horizontal","bottom"),edge:ce.TRAILING,isVisible:!1,direction:"horizontal"}),r};this.getRotationGuidesFromConfig=()=>{let{angles:t}=this.configStore.config.snapping.rotation,e=[];return t.forEach(r=>{e.push(r),e.push(r+360),e.push(r-360)}),e.filter((r,n)=>e.indexOf(r)===n).map(r=>({value:r*Math.PI/180,edge:ce.CENTER,isVisible:!1,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:t,leftBottom:e,rightTop:i,rightBottom:r})=>{let n=Math.min(t.y,i.y,e.y,r.y),a=Math.max(t.y,i.y,e.y,r.y),l=Math.min(t.x,i.x,e.x,r.x),c=Math.max(t.x,i.x,e.x,r.x);return{height:Math.round(a-n),width:Math.round(c-l)}};this.mapRange=({value:t,fromMin:e,fromLength:i,toMin:r,toLength:n})=>(t-e)*n/i+r;this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(t,e,i,r)=>{if(e.length===0)return t;if(e[0]>t)return t-i;for(let n=0;n<e.length-1;n+=1){let a=e[n],l=e[n+1],c=a+i,p=l-i,u=0;r&&(u=n*i*2,c+=u,p+=u+i*2);let m=1e-5;if(a<=t&&t<=l)return t<=a+m?a+u:t>=l-m?l+u+(r?i*2:0):this.mapRange({value:t,fromMin:a,fromLength:l-a,toMin:c,toLength:p-c})}return r?t+(e.length-1)*i*2+i:t};this.mapFromSnapSystem=(t,e,i,r)=>{if(e.length===0)return t;if(e[0]>t)return t>=e[0]-i?e[0]:t+i;let n=t;for(let l=0;l<e.length-1;l+=1){let c=e[l],p=e[l+1],u=c+i,m=p-i,g=p;if(r&&(m+=i*2,g+=i*2,n=t-l*i*2),c<=n&&n<=g)return u<=n&&n<=m?this.mapRange({value:n,fromMin:u,fromLength:m-u,toMin:c,toLength:p-c}):n<u?c:p}n-=i*3;let a=e[e.length-1];return n<=a?a:n};this.centerSnapValue=(t,e)=>{let i=e*.5,{value:r,edge:n}=t,a=r;return n===ce.LEADING?a+=i:n===ce.TRAILING&&(a-=i),a};this.mapSnappingGuidesToCenter=(t,e)=>{let i=[];return t.forEach(r=>{i.push(this.centerSnapValue(r,e))}),i};this.calcSnapThresholdInRadians=(t,e)=>t===0?0:e/t;this.calculatePreviewTopLeftPosition=()=>{let t=this.editor.engineMediator.preview.container.getPosition(),e=this.editor.getPreviewSize(),i=at.devicePixelRatio;this.previewTopLeftPosition={x:t.x/i-e.width/2,y:t.y/i-e.height/2}};this.snapToRotation=(t,e,i)=>{let{rotationGuides:r}=this.state,{enabled:n,threshold:a}=this.configStore.config.snapping.rotation,{x:l,y:c}=this.previewTopLeftPosition,{width:p}=this.editor.getPreviewSize(),u=(t+Math.PI*2)%(Math.PI*2);if(n){let m=new y(e).magnitude,g=r.map(C=>C.value).sort((C,P)=>C-P),x=this.calcSnapThresholdInRadians(m,a);if(!this.rotationOffset){let C=this.mapToSnapSystem(t,g,x,!1);this.rotationOffset=C-u}u=this.mapFromSnapSystem(u+this.rotationOffset,g,x,!1);let S={x:i.position.x-l-p,y:i.position.y-c};return r.forEach(C=>{C.isVisible=C.value===u,C.position=S}),u}return t};this.snapToPosition=(t,e)=>{let{horizontalGuides:i,verticalGuides:r}=this.state,{enabled:n,threshold:a}=this.configStore.config.snapping.position,l=new y(this.previewTopLeftPosition),{height:c,width:p}=this.getSpriteDimensions(e),{x:u,y:m}=new y(t).subtract(l);if(n){let g=this.mapSnappingGuidesToCenter(i,c).sort((P,T)=>P-T),x=this.mapSnappingGuidesToCenter(r,p).sort((P,T)=>P-T);if(!this.positionOffset){let P=this.mapToSnapSystem(u,x,a,!0),T=this.mapToSnapSystem(m,g,a,!0);this.positionOffset=new y(P,T).subtract(new y(u,m))}let S=this.mapFromSnapSystem(u+this.positionOffset.x,x,a,!0),C=this.mapFromSnapSystem(m+this.positionOffset.y,g,a,!0);return S=Math.round(S),C=Math.round(C),i.forEach(P=>{let T=Math.round(this.centerSnapValue(P,c));P.isVisible=T===C}),r.forEach(P=>{let T=Math.round(this.centerSnapValue(P,p));P.isVisible=T===S}),new y(S,C).add(l)}return{x:u,y:m}};this.editor=t,this.configStore=t.configStore,this.state=E(i0),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}hidePositionGuides(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map(t=>w(b({},t),{isVisible:!1})),this.state.horizontalGuides=this.state.horizontalGuides.map(t=>w(b({},t),{isVisible:!1}))}hideRotationGuides(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map(t=>w(b({},t),{isVisible:!1}))}get positionGuides(){let{verticalGuides:t,horizontalGuides:e}=this.state;return[...t,...e]}get rotationGuides(){return this.state.rotationGuides}};s([E],we.prototype,"state",2),s([h],we.prototype,"snapToRotation",2),s([h],we.prototype,"snapToPosition",2),s([h],we.prototype,"hidePositionGuides",1),s([h],we.prototype,"hideRotationGuides",1),s([d],we.prototype,"positionGuides",1),s([d],we.prototype,"rotationGuides",1);var Bp=li(hc());function $n(o,t=null){return new Promise((e,i)=>{let r=new Image;r.addEventListener("load",()=>{let n=document.createElement("canvas"),a=n.getContext("2d");n.width=r.width,n.height=r.height,t&&(n.width=t,n.height=t*r.height/r.width),a.drawImage(r,0,0,n.width,n.height),e(n.toDataURL(Yt.PNG))}),r.addEventListener("error",()=>{i()}),r.src=o})}var Ap=o=>new Promise((t,e)=>{let i=new FileReader;i.onload=r=>D(void 0,null,function*(){try{let{result:n}=r.target,a=yield $n(n,150);t({stickerURI:n,thumbnailURI:a,name:o.name||"",type:o.type,identifier:Ui()})}catch(n){e(n)}}),i.onerror=r=>{e(r)},i.readAsDataURL(o)});var r0="white",Ut={identifier:"identity",opacity:1,tintColor:Bt[r0],tintMode:"none",resizeMode:"keepAspect"},Ua={};var Op="identity",Ga="imgly_sticker_custom",j=class{constructor(t){this.state=E.map(Ua);this.customStickers=[];this.colorList=at.defaultColors;this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=t=>this.entityManager.items.findIndex(e=>e.identifier===t)!==-1;this.add=t=>{let e=this.entityManager.items.find(n=>n.identifier===t),i=e?e.tintMode:Ut.tintMode,r=e?e.resizeMode:Ut.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:i,tintColor:Ut.tintColor,opacity:Ut.opacity,resizeMode:r}})};this.duplicate=()=>{if(this.id){let t=this.editor.spriteStore.getDuplicateContainerTransform(this.id),e=this.editor.spriteStore.getDuplicateContainerFlip(this.id),{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:z(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:i!==e.flipHorizontally,flipVertically:r!==e.flipVertically},transform:t})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.flipHorizontally=()=>{this.id&&this.editor.spriteStore.flipHorizontally(this.id)};this.delete=()=>{if(this.id){let t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}};this.updateStateFromHistory=(t,e)=>{(0,wt.default)(e,this.state.get(t))||(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e))};this.setState=(t,e)=>{let i=this.state.get(t);i?("opacity"in e&&(i.opacity=e.opacity),e.tintColor&&(i.tintColor=e.tintColor),e.tintMode&&(i.tintMode=e.tintMode),e.resizeMode&&(i.resizeMode=e.resizeMode),this.state.set(t,i)):this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:Ut.tintColor})};this.changeOpacity=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{opacity:t});let i=this.editor.spriteStore.getContainerProperties(this.id);e.opacity=i.opacity,this.state.set(this.id,e)}}};this.changeTintColor=t=>{if(this.id){let e=this.state.get(this.id);if(e){let{tintMode:i}=this.entityManager.items.find(n=>n.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:t,tintMode:i});let r=this.editor.spriteStore.getContainerProperties(this.id);e.tintColor=r.tintColor,e.tintMode=r.tintMode||Ut.tintMode,this.state.set(this.id,e)}}};this.tintColorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.color)};this.addFiles=t=>D(this,null,function*(){if(this.editor.modalStore.showInfoModal("loading"),t.length){let e=0,i=[];for(e=0;e<t.length;e+=1)i.push(Ap(t[e]));try{let r=yield Promise.all(i);this.addCustomStickerAsset(r),this.editor.configStore.events.onStickerUploadedAdd(r.map(({identifier:n,stickerURI:a},l)=>({identifier:n,stickerURI:a,file:t[l]})))}catch(r){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}}});this.addCustomStickerAsset=t=>D(this,null,function*(){let e=[];t.forEach(({stickerURI:a,thumbnailURI:l,name:c,identifier:p,type:u})=>{e.push({stickerURI:a,thumbnailURI:l,name:c,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:p}),this.customStickers.push({identifier:p,type:u,stickerURI:a,name:c})});let i=this.locale.categories[Ga];this.editor.assetProvider.addCustomStickerAsset(e,Ga,i);let r=this.editor.assetProvider.getAssets("sticker"),{config:n}=this;this.entityManager=new pt(r,w(b({},n),{itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=Ga,this.editor.modalStore.hideModal()});this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.opacity)};this.addSnapshot=(t,e)=>{let i=this.editor.historyStore.getCurrentSpritesState();(i==null?void 0:i.sticker)&&(0,wt.default)(i.sticker,z(this.state))||this.currentSticker&&this.editor.spriteStore.addSnapshot(t,e)};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Op:t};this.pureReset=()=>{this.state=E.map(Ua)};this.editor=t,this.selectedCategory=Op;let{config:e}=this,i=this.editor.assetProvider.getAssets("sticker");this.entityManager=new pt(i,w(b({},e),{itemFallbackKey:"stickerURI",locale:b(b({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),Ut.tintColor=z(re(this.config,"defaultTintColor",Ut.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=le(z(this.config.colors)))}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){let t=this.state.get(this.id);if(t)return t}}get identifier(){if(this.isStickerSelected){let t=this.state.get(this.id);if(t)return t.identifier}return"none"}get id(){if(this.isStickerSelected)return this.editor.spriteStore.id}get opacity(){return this.currentSticker?this.currentSticker.opacity:Ut.opacity}get tintMode(){return this.currentSticker?this.currentSticker.tintMode:Ut.tintMode}get resizeMode(){return this.currentSticker?this.currentSticker.resizeMode:Ut.resizeMode}get tintable(){return this.currentSticker?this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized":!1}get tintColor(){return this.currentSticker?this.currentSticker.tintColor:Ut.tintColor}get config(){return this.editor.configStore.config[f.STICKER]}get locale(){return this.editor.configStore.locale[f.STICKER]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};s([E],j.prototype,"selectedCategory",2),s([E],j.prototype,"entityManager",2),s([h],j.prototype,"selectLast",2),s([h],j.prototype,"add",2),s([h],j.prototype,"duplicate",2),s([h],j.prototype,"bringToFront",2),s([h],j.prototype,"flipHorizontally",2),s([h],j.prototype,"delete",2),s([h],j.prototype,"updateStateFromHistory",2),s([h],j.prototype,"setState",2),s([h],j.prototype,"changeOpacity",2),s([h],j.prototype,"changeTintColor",2),s([h],j.prototype,"addFiles",2),s([h],j.prototype,"addCustomStickerAsset",2),s([h],j.prototype,"toggleCategorySelection",2),s([h],j.prototype,"pureReset",2),s([d],j.prototype,"isStickerSelected",1),s([d],j.prototype,"isCustomStickerEnabled",1),s([d],j.prototype,"customStickerTintMode",1),s([d],j.prototype,"customStickerResizeMode",1),s([d],j.prototype,"currentSticker",1),s([d],j.prototype,"identifier",1),s([d],j.prototype,"id",1),s([d],j.prototype,"opacity",1),s([d],j.prototype,"tintMode",1),s([d],j.prototype,"resizeMode",1),s([d],j.prototype,"tintable",1),s([d],j.prototype,"tintColor",1),s([d],j.prototype,"config",1),s([d],j.prototype,"locale",1),s([d],j.prototype,"localeColor",1),s([d],j.prototype,"selectedCategoryIdentifier",1),s([d],j.prototype,"items",1),s([d],j.prototype,"categories",1);var n0="imgly_font_open_sans_bold",J={text:"Write Something",identifier:n0,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:Bt.white,backgroundColor:Bt.transparent||[0,0,0,0],width:0},ja={};var Lp={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},Di=class{constructor(t){this.state=E.map(ja);this.colorList=at.defaultColors;this.backgroundColorList=at.defaultBackgroundColors;this.fontsLoadStatus=E.object({pending:!1,loaded:!1});this.doesTextAssetExist=t=>this.editor.assetProvider.getFontAssets().findIndex(e=>e.identifier===t)!==-1;this.validFontWithConfig=t=>this.fonts.find(e=>e.identifier===t)||this.fonts[0];this.addOrselect=()=>{this.state.size?(this.selectLast(),this.loadFonts()):this.add()};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>D(this,null,function*(){let{fontsLoadStatus:t}=this,e=()=>{this.editor.spriteStore.addText({state:{identifier:J.identifier,text:J.text,textColor:J.textColor,backgroundColor:J.backgroundColor,lineHeight:J.lineHeight,alignment:J.alignment,fontSize:0}})};if(!t.pending&&!t.loaded){this.fontsLoadStatus.pending=!0;let i=this.editor.assetProvider.getFontManager();try{yield i.loadFontsWithIdentifiers([J.identifier]),e()}catch(r){this.editor.modalStore.showActionModal({type:et.ERROR,identifier:"fontLoading",error:J.identifier})}yield this.loadFonts()}else e()});this.duplicate=()=>{if(this.id){let t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:z(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:z(this.backgroundColor),width:this.width},transform:t})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.delete=()=>{if(this.id){let t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.changeFont=t=>{let e=this.fonts.find(i=>i.identifier===t);this.changeIdentifier(e,this.id),this.id&&this.addSnapshot(B.EDIT,this.locale.history.fontFamily)};this.changeIdentifier=(t,e)=>{ft(()=>{if(t&&e){let i=this.state.get(e);if(i){this.editor.spriteStore.setContainerProperties(e,{fontIdentifier:t.identifier},!0);let r=this.editor.spriteStore.getContainerProperties(e);i.identifier=r.fontIdentifier,i.fontFamily=t.fontFamily,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=r.fontSize,i.width=r.width,i.defaultFontSize=i.fontSize,this.state.set(e,i)}}})};this.changeFontSize=(t,e=!1)=>{if(this.id){let i=this.state.get(this.id);i&&(i.fontSize=t,e&&(i.defaultFontSize=t),this.state.set(this.id,i))}};this.updateDefaultFontSize=()=>{if(this.id){let t=this.state.get(this.id);t&&(t.defaultFontSize=t.fontSize,this.state.set(this.id,t))}};this.changeSize=(t,e)=>{let i=this.state.get(t);i&&(i.width=e.width,i.fontSize=e.fontSize,i.defaultFontSize=e.fontSize,this.state.set(t,i))};this.changeWidth=t=>{if(this.id){let e=this.state.get(this.id);e&&(e.width=t,this.state.set(this.id,e))}};this.changeText=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);let i=this.editor.spriteStore.getContainerProperties(this.id),r=this.editor.outputContainer.getSizeInOutputSpace(),n=this.editor.spriteStore.getSize(this.id);this.config.disableAutoScaling||n.height>r.height&&this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,r.height)},!0),i=this.editor.spriteStore.getContainerProperties(this.id),e.text=i.text,e.fontSize=i.fontSize,e.defaultFontSize=i.fontSize,this.state.set(this.id,e),this.addSnapshot(B.EDIT,this.locale.history.edit)}}};this.calculateFitFontSize=(t,e)=>{if(!Di.measureContext){let x=document.createElement("canvas");Di.measureContext=x.getContext("2d")}let i=this.editor.spriteStore.getContainerProperties(t),r=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier),n=this.config.minFontSizeForAutoScaling,a=ws(Di.measureContext,i.text,r,i.fontSize,i.lineHeight,i.width,r.textMetrics),l=Math.min(Math.floor(i.fontSize*(e/a.height)),1),c=Math.round(i.fontSize),p=0,u=c-l,m=Math.floor((c-l)*2),g=u;for(;p<=m;){u=p+Math.floor((m-p)/2);let x=ws(Di.measureContext,i.text,r,u,i.lineHeight,i.width,r.textMetrics);if(e<x.height)m=u-1,g=u-1;else if(e>x.height){if(p=u+1,l+u>=c)return c}else{g=u;break}}return n&&g<n?n:g};this.changeLineHeight=t=>{if(this.id){let e=this.state.get(this.id);if(e&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);e.lineHeight=i.lineHeight,this.state.set(this.id,e)}}};this.changeColor=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});let i=this.editor.spriteStore.getContainerProperties(this.id);e.textColor=i.textColor,this.state.set(this.id,e)}}};this.changeBackgroundColor=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});let i=this.editor.spriteStore.getContainerProperties(this.id);e.backgroundColor=i.backgroundColor,this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.backgroundColor)};this.changeAlignment=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});let i=this.editor.spriteStore.getContainerProperties(this.id);e.alignment=i.alignment,this.state.set(this.id,e),this.addSnapshot(B.EDIT,this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.lineSpacing)};this.addSnapshot=(t,e)=>{let i=this.editor.historyStore.getCurrentSpritesState();(i==null?void 0:i.text)&&(0,wt.default)(i.text,z(this.state))||this.currentText&&this.editor.spriteStore.addSnapshot(t,e)};this.updateStateFromHistory=(t,e)=>{(0,wt.default)(e,this.state.get(t))||(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e))};this.setState=(t,e)=>{let i=this.state.get(t);if(i)e.alignment&&(i.alignment=e.alignment),e.text&&(i.text=e.text),e.lineHeight&&(i.lineHeight=e.lineHeight),e.textColor&&(i.textColor=e.textColor),e.backgroundColor&&(i.backgroundColor=e.backgroundColor),e.fontIdentifier&&(i.identifier=e.fontIdentifier),e.fontSize&&(i.fontSize=e.fontSize,i.defaultFontSize=e.fontSize),e.width&&(i.width=e.width);else{let r=this.validFontWithConfig(e.fontIdentifier);r&&this.state.set(t,{text:e.text,identifier:r.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:J.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:J.backgroundColor,fontFamily:r.fontFamily,fontStyle:r.fontStyle,fontSize:e.fontSize,fontWeight:r.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}};this.setFontSize=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);e.fontSize=i.fontSize,e.defaultFontSize=i.fontSize,this.state.set(this.id,e)}}};this.pureReset=()=>{this.state=E.map(ja)};this.editor=t,this.fonts.find(e=>e.identifier===J.identifier)||(J.identifier=this.fonts[0].identifier),J.textColor=z(re(this.config,"defaultColor",J.textColor)),J.backgroundColor=z(re(this.config,"defaultBackgroundColor",J.backgroundColor)),J.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=le(z(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=le(z(this.config.backgroundColors)))}static defaultText(){return J.text}static getDisplayFontStyle(t){let e=t.fontWeight&&Lp[t.fontWeight].toLowerCase()!=="regular"?Lp[t.fontWeight]:"",i=t.fontStyle&&t.fontStyle.toLowerCase()!=="normal"?t.fontStyle:"";return`${t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e} ${i}`.trim()}loadFonts(){return D(this,null,function*(){let{fontsLoadStatus:t}=this;if(t.loaded)return;let e=this.editor.assetProvider.getFontManager(),i=this.editor.assetProvider.getFontAssetsForText().map(r=>r.identifier);try{yield e.loadFontsWithIdentifiers(i)}catch(r){let n=i.filter(a=>!e.isFontLoaded(a)).join(", ");this.editor.modalStore.showActionModal({type:et.ERROR,identifier:"fontLoading",error:n})}t.loaded=!0})}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){let t=this.state.get(this.id);if(t)return t}}get text(){return this.currentText?this.currentText.text:J.text}get fontSize(){return this.currentText?this.currentText.fontSize:J.fontSize}get defaultFontSize(){return this.currentText?this.currentText.defaultFontSize:J.defaultFontSize}get width(){return this.currentText?this.currentText.width:J.width}get fontFamily(){return this.currentText?this.currentText.fontFamily:J.fontFamily}get fontStyle(){return this.currentText?this.currentText.fontStyle:J.fontStyle}get fontWeight(){return this.currentText?this.currentText.fontWeight:J.fontWeight}get lineHeight(){return this.currentText?this.currentText.lineHeight:J.lineHeight}get identifier(){return this.currentText?this.currentText.identifier:J.identifier}get id(){if(this.isTextSelected)return this.editor.spriteStore.id}get alignment(){return this.currentText?this.currentText.alignment:J.alignment}get textColor(){return this.currentText?this.currentText.textColor:J.textColor}get backgroundColor(){return this.currentText?this.currentText.backgroundColor:J.backgroundColor}get config(){return this.editor.configStore.config[f.TEXT]}get locale(){return this.editor.configStore.locale[f.TEXT]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce((t,e)=>this.rawOptions.find(i=>i.identifier===e.identifier)?[...t,{identifier:e.identifier,fontFamily:e.fontFamily,fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||""}]:t,[])}get fontFamilies(){return[...new Set(this.fonts)]}},H=Di;s([h],H.prototype,"addOrselect",2),s([h],H.prototype,"selectLast",2),s([h],H.prototype,"add",2),s([h],H.prototype,"duplicate",2),s([h],H.prototype,"bringToFront",2),s([h],H.prototype,"delete",2),s([h],H.prototype,"setEditMode",2),s([h],H.prototype,"changeFont",2),s([h],H.prototype,"changeIdentifier",2),s([h],H.prototype,"changeFontSize",2),s([h],H.prototype,"updateDefaultFontSize",2),s([h],H.prototype,"changeSize",2),s([h],H.prototype,"changeWidth",2),s([h],H.prototype,"changeText",2),s([h],H.prototype,"changeLineHeight",2),s([h],H.prototype,"changeColor",2),s([h],H.prototype,"changeBackgroundColor",2),s([h],H.prototype,"changeAlignment",2),s([h],H.prototype,"updateStateFromHistory",2),s([h],H.prototype,"setState",2),s([h],H.prototype,"setFontSize",2),s([h],H.prototype,"pureReset",2),s([d],H.prototype,"isEditMode",1),s([d],H.prototype,"isTextSelected",1),s([d],H.prototype,"fontsLoaded",1),s([d],H.prototype,"currentText",1),s([d],H.prototype,"text",1),s([d],H.prototype,"fontSize",1),s([d],H.prototype,"defaultFontSize",1),s([d],H.prototype,"width",1),s([d],H.prototype,"fontFamily",1),s([d],H.prototype,"fontStyle",1),s([d],H.prototype,"fontWeight",1),s([d],H.prototype,"lineHeight",1),s([d],H.prototype,"identifier",1),s([d],H.prototype,"id",1),s([d],H.prototype,"alignment",1),s([d],H.prototype,"textColor",1),s([d],H.prototype,"backgroundColor",1),s([d],H.prototype,"config",1),s([d],H.prototype,"locale",1),s([d],H.prototype,"localeColor",1),s([d],H.prototype,"rawOptions",1),s([d],H.prototype,"fonts",1),s([d],H.prototype,"fontFamilies",1);var s0="imgly_text_design_blocks",vt={identifier:s0,color:Bt.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},Xa={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},Ya={};var X=class{constructor(t){this.state=E.map(Ya);this.colorList=at.defaultColors;this.fontsLoaded=!1;this.doesTextDesignAssetExist=t=>this.entityManager.items.findIndex(e=>e.identifier===t)!==-1;this.addOrselect=()=>D(this,null,function*(){yield this.loadFonts(),this.state.size?this.selectLast():this.add()});this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:vt.identifier,text:vt.text,color:vt.color,isInverted:vt.isInverted,seed:Xa[vt.identifier]||vt.seed,padding:0}})};this.updateStateFromHistory=(t,e)=>{if((0,wt.default)(e,this.state.get(t)))return;let i=this.state.get(t);e.identifier===i.identifier?(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)):this.changeIdentifier(e.identifier,!1,e.seed,t)};this.setState=(t,e)=>{let i=this.state.get(t);i?(e.inverted&&(i.isInverted=e.inverted),e.seed&&(i.seed=e.seed),e.color&&(i.color=e.color),e.padding&&(i.padding=e.padding),e.width&&(i.width=e.width)):this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:vt.color,padding:e.padding})};this.changeText=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);e.text=i.text,this.state.set(this.id,e),this.addSnapshot(B.EDIT,this.locale.history.edit)}}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.duplicate=()=>{if(this.id){let t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:z(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.addSnapshot=(t,e)=>{let i=this.editor.historyStore.getCurrentSpritesState();(i==null?void 0:i.textdesign)&&(0,wt.default)(i.textdesign,z(this.state))||this.currentTextDesign&&this.editor.spriteStore.addSnapshot(t,e)};this.delete=(t=this.id)=>{t&&(this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast())};this.changeSeed=()=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},!0);let e=this.editor.spriteStore.getContainerProperties(this.id);t.seed=e.seed,this.state.set(this.id,t),this.addSnapshot(B.EDIT,this.locale.history.shuffle)}}};this.changeIdentifier=(t,e=!0,i=null,r=this.id)=>{if(r&&t!==this.identifier){let n=this.state.get(r),a=this.editor.spriteStore.getContainerTransform(r);this.editor.spriteStore.addTextDesign({spriteId:r,state:{identifier:t,text:n.text,color:z(n.color),isInverted:n.isInverted,seed:i||Xa[t]||n.seed,padding:n.padding,width:n.width},transform:a},e,!0)}};this.changeColor=t=>{if(this.id){let e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{color:t});let i=this.editor.spriteStore.getContainerProperties(this.id);e.color=i.color,this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.color)};this.invertBackground=()=>{if(this.id){let t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!t.isInverted},!0);let e=this.editor.spriteStore.getContainerProperties(this.id);t.isInverted=e.inverted,this.state.set(this.id,t),this.addSnapshot(B.EDIT,this.locale.history.invert)}}};this.changeWidth=t=>{if(this.id){let e=this.state.get(this.id);e&&(e.width=t,this.state.set(this.id,e))}};this.changePadding=t=>{if(this.id){let e=this.state.get(this.id);e&&(e.padding=t,this.state.set(this.id,e))}};this.pureReset=()=>{this.state=E.map(Ya)};this.editor=t;let e=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new pt(e,w(b({},this.config),{flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find(i=>i.identifier===vt.identifier)||(vt.identifier=this.entityManager.items[0].identifier),vt.text=this.locale.canvasControls.placeholderText,vt.color=z(re(this.config,"defaultColor",vt.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=le(z(this.config.colors)))}static defaultText(){return vt.text}loadFonts(){return D(this,null,function*(){if(this.fontsLoaded)return;let t=this.editor.assetProvider.getFontManager(),e=this.editor.assetProvider.getFontAssetsForTextDesign().map(i=>i.identifier);try{yield t.loadFontsWithIdentifiers(e)}catch(i){let r=e.filter(n=>!t.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:et.ERROR,identifier:"fontLoading",error:r})}this.fontsLoaded=!0})}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){let t=this.state.get(this.id);if(t)return t}}get id(){if(this.isTextDesignSelected)return this.editor.spriteStore.id}get text(){return this.currentTextDesign?this.currentTextDesign.text:vt.text}get seed(){return this.currentTextDesign?this.currentTextDesign.seed:vt.seed}get padding(){return this.currentTextDesign?this.currentTextDesign.padding:vt.padding}get width(){return this.currentTextDesign?this.currentTextDesign.width:vt.width}get identifier(){return this.currentTextDesign?this.currentTextDesign.identifier:null}get isInverted(){return this.currentTextDesign?this.currentTextDesign.isInverted:vt.isInverted}get color(){return this.currentTextDesign?this.currentTextDesign.color:vt.color}get config(){return this.editor.configStore.config[f.TEXT_DESIGN]}get locale(){return this.editor.configStore.locale[f.TEXT_DESIGN]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};s([h],X.prototype,"addOrselect",2),s([h],X.prototype,"selectLast",2),s([h],X.prototype,"add",2),s([h],X.prototype,"updateStateFromHistory",2),s([h],X.prototype,"setState",2),s([h],X.prototype,"changeText",2),s([h],X.prototype,"setEditMode",2),s([h],X.prototype,"duplicate",2),s([h],X.prototype,"bringToFront",2),s([h],X.prototype,"delete",2),s([h],X.prototype,"changeSeed",2),s([h],X.prototype,"changeIdentifier",2),s([h],X.prototype,"changeColor",2),s([h],X.prototype,"invertBackground",2),s([h],X.prototype,"changeWidth",2),s([h],X.prototype,"changePadding",2),s([h],X.prototype,"pureReset",2),s([d],X.prototype,"isTextDesignSelected",1),s([d],X.prototype,"isEditMode",1),s([d],X.prototype,"currentTextDesign",1),s([d],X.prototype,"id",1),s([d],X.prototype,"text",1),s([d],X.prototype,"seed",1),s([d],X.prototype,"padding",1),s([d],X.prototype,"width",1),s([d],X.prototype,"identifier",1),s([d],X.prototype,"isInverted",1),s([d],X.prototype,"color",1),s([d],X.prototype,"config",1),s([d],X.prototype,"locale",1),s([d],X.prototype,"localeColor",1),s([d],X.prototype,"items",1);var a0={},Ka="none",l0={position:{x:0,y:0},rotation:0},br=class{constructor(t){this.state=E.map(a0);this.selectedId=E.box(Ka);this.editMode=E.box(!1);this.dragMode=E.box(!1);this.minLength=0;this.counter=0;this.addSticker=(t,e=!0)=>D(this,null,function*(){yield this.addStickerAsync(t,e)});this.addStickerAsync=(n,...a)=>D(this,[n,...a],function*({spriteId:t,state:e,transform:i},r=!0){return new Promise((l,c)=>{i=this.getInitialTransform(i);let{identifier:p}=e,u=this.editor.orderHelper.addSprite(p);this.editor.engine.addStickerFromAssets(p,this.editor.engineMediator.image.container,u).then(m=>D(this,null,function*(){t&&m.setData({id:t});let g=m.getID();this.container[g]=m,this.editor.orderHelper.renameSprite(p,g);let x=this.getSize(g);x.width*=m.getScale().x,x.height*=m.getScale().y,m.setPivot(.5,.5);let S;if(i.scale)S=i.scale;else if(i.size)S={x:i.size.width/x.width,y:i.size.height/x.height};else{let R=this.editor.shortestOutputSide*.4,$=br.magnitude(R)/br.sizeMagnitude(m.getSizeInWorldSpace());S={x:$,y:$}}let{flipHorizontally:C,flipVertically:P}=this.editor.outputContainer.getData();m.setFlipHorizontally(C),m.setFlipVertically(P),m.setTransform({position:i.position,scale:S,rotation:i.rotation}),e.flipHorizontally!==void 0&&m.setFlipHorizontally(e.flipHorizontally!==C),e.flipVertically!==void 0&&m.setFlipVertically(e.flipVertically!==P),this.setContainerProperties(g,b({},e));let T=m.getData();this.setInitialSpriteState(g,f.STICKER),this.stickerToolStore.setState(g,w(b({},T),{identifier:p})),yield this.editor.renderPromise(),r&&(this.setId(g),this.addSnapshot(B.ADD,this.stickerLocale.add)),l()})).catch(m=>{console.error(m),c()})})});this.addText=(t,e=!0)=>D(this,null,function*(){yield this.addTextAsync(t,e)});this.addTextAsync=({spriteId:t,state:e,transform:i},r=!0)=>new Promise((n,a)=>{i=this.getInitialTransform(i);let l=this.editor.orderHelper.addSprite(e.identifier),c=this.editor.shortestOutputSide,p={fontIdentifier:e.identifier,text:e.text,width:e.width||c*.6,fontSize:e.fontSize||c*.1,lineHeight:e.lineHeight,alignment:e.alignment,textColor:e.textColor,backgroundColor:e.backgroundColor};this.editor.engine.addTextWithFontLoading(p,this.editor.engineMediator.image.container,l).then(u=>D(this,null,function*(){t&&u.setData({id:t});let m=u.getID();this.container[m]=u,this.editor.orderHelper.renameSprite(e.identifier,this.id);let{flipHorizontally:g,flipVertically:x}=this.editor.outputContainer.getData();u.setFlipHorizontally(g),u.setFlipVertically(x),u.setPivot(.5,.5),u.setPosition(i.position),u.setRotation(i.rotation),this.setInitialSpriteState(m,f.TEXT);let S=u.getData();this.textToolStore.setState(m,b({},S)),yield this.editor.renderPromise(),r&&(this.setId(m),this.addSnapshot(B.ADD,this.textLocale.add)),n()})).catch(u=>{console.error(u),a()})});this.addTextDesign=(t,e=!0,i=!1)=>D(this,null,function*(){yield this.addTextDesignAsync(t,e,i)});this.addTextDesignAsync=({spriteId:t,state:e,transform:i},r=!0,n=!1)=>new Promise((a,l)=>{i=this.getInitialTransform(i);let c=this.editor.orderHelper.addSprite(e.identifier),p=this.editor.shortestOutputSide,u={width:e.width||p*.6,text:e.text,color:e.color,inverted:e.isInverted,seed:e.seed,padding:e.padding};this.editor.engine.addTextDesignAsync(e.identifier,u,this.editor.engineMediator.image.container,c).then(m=>D(this,null,function*(){t&&(n&&(this.pureRemoveSprite(t),this.textDesignToolStore.state.delete(t)),m.setData({id:t}));let g=m.getID();this.container[g]=m,this.editor.orderHelper.renameSprite(e.identifier,this.id);let{flipHorizontally:x,flipVertically:S}=this.editor.outputContainer.getData();m.setFlipHorizontally(x),m.setFlipVertically(S),m.setPivot(.5,.5),m.setPosition(i.position),m.setRotation(i.rotation),this.setInitialSpriteState(g,f.TEXT_DESIGN);let C=m.getData();this.textDesignToolStore.setState(g,w(b({},C),{identifier:e.identifier})),yield this.editor.renderPromise(),r&&(this.setId(g),this.addSnapshot(B.ADD,this.textDesignLocale.add)),a()})).catch(m=>{console.error(m),l()})});this.spriteLocalTransform=()=>({position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation});this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.setContainerProperties=(t,e,i=!1)=>{this.container[t].setData(e),i&&this.updatePositionAndSize(),this.editor.render()};this.setContainerPosition=(t,e)=>{this.container[t].setPosition(e)};this.pureRemoveSprite=t=>(this.editor.engine.removeContainer(this.container[t]),this.container[t].getIndexInParent()===-1?(delete this.container[t],this.state.delete(t),this.editor.orderHelper.removeSprite(t),!0):!1);this.deleteSprite=(t=this.id)=>{let e=this.state.get(t);e.tool===f.STICKER?this.stickerToolStore.delete():e.tool===f.TEXT?this.textToolStore.delete():e.tool===f.TEXT_DESIGN&&this.textDesignToolStore.delete()};this.removeSprite=t=>{this.pureRemoveSprite(t)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.spriteSnapshot=t=>{this.addSnapshot(B.EDIT,this.historyLocale[t])};this.addNewText=(t,e)=>D(this,null,function*(){if(this.textToolStore.doesTextAssetExist(e.identifier))yield this.addTextAsync(w(b({},t),{state:e}),!1);else throw new Error(`Text identifier ${e.identifier} doesn't exist`)});this.addNewTextDesign=(t,e)=>D(this,null,function*(){if(this.textDesignToolStore.doesTextDesignAssetExist(e.identifier))yield this.addTextDesignAsync(w(b({},t),{state:e}),!1);else throw new Error(`TextDesign identifier ${e.identifier} doesn't exist`)});this.addNewSticker=(t,e)=>D(this,null,function*(){if(this.stickerToolStore.doesStickerAssetExist(e.identifier))yield this.addStickerAsync(w(b({},t),{state:e}),!1);else throw new Error(`Sticker identifier ${e.identifier} doesn't exist`)});this.getSpriteHistoryState=()=>{let t=z(this.textToolStore.state),e=z(this.textDesignToolStore.state),i={common:z(this.state),[f.STICKER]:z(this.stickerToolStore.state),[f.TEXT]:t,[f.TEXT_DESIGN]:e,spriteIdList:Object.keys(this.container)};return Object.keys(i.common).forEach(r=>{i.common[r].size=this.container[r].getSizeInWorldSpace(),i.common[r].position=this.container[r].getPosition(),i.common[r].order=this.container[r].getIndexInParent()}),i};this.updateStateFromSerialization=(t,e)=>D(this,null,function*(){if(e&&e.length)try{let i=yield Promise.all(e.map(c=>D(this,[c],function*({svg:r,raster:n,name:a,identifier:l}){let p=(r==null?void 0:r.data)?Yt.SVG:n.type,u=`data:${p};base64,${(r==null?void 0:r.data)||n.data}`,m=yield $n(u,150);return{stickerURI:u,thumbnailURI:m,name:a,type:p,identifier:l}})));yield this.stickerToolStore.addCustomStickerAsset(i)}catch(i){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}yield this.updateStateByHistoryState(t.spriteIdList,t)});this.updateStateFromHistory=t=>D(this,null,function*(){Object.keys(this.container).filter(r=>t.spriteIdList.indexOf(r)===-1).forEach(r=>{this.pureRemoveSprite(r)}),yield this.updateStateByHistoryState(t.spriteIdList,t)});this.serializableState=()=>D(this,null,function*(){let t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach(i=>{let{flipHorizontally:r,flipVertically:n}=this.editor.outputContainer.getData(),a=this.editor.outputContainer.getRotation(),l=n!==r?-t.common[i].rotation:t.common[i].rotation;t.common[i].rotation=n!==r?l+a:l-a});let e=yield Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(l=>D(this,[l],function*({identifier:i,type:r,stickerURI:n,name:a}){let c={identifier:i,name:a,raster:{data:"",type:Yt.JPEG}};if(r===Yt.SVG&&(c.svg={data:n.split(",")[1]}),r===Yt.JPEG||r===Yt.PNG)[,c.raster.data]=n.split(","),c.raster.type=r;else{let p=yield $n(n);[,c.raster.data]=p.split(","),c.raster.type=Yt.PNG}return c})));return{sprite:t,customStickers:e}});this.updateCanvasControls=()=>{Object.keys(this.container).forEach(t=>{this.updatePositionAndSize(t,!0);let e=this.state.get(t);if(e){if(e.tool===f.TEXT){let i=this.getContainerProperties(t);this.textToolStore.changeSize(t,i)}else if(e.tool===f.TEXT_DESIGN){let i=this.getContainerProperties(t);this.textToolStore.changeWidth(i.width)}}})};this.setEditMode=t=>{this.currentSprite&&[f.TEXT,f.TEXT_DESIGN].indexOf(this.tool)!==-1&&(t?this.editor.modalStore.showTextEditModal():this.editor.modalStore.hideModal(),this.editMode.set(t))};this.setDragMode=t=>{this.dragMode.set(t)};this.setPosition=t=>{let e=this.currentSprite,i=this.container[this.id];if(e&&i){i.setPosition(this.editor.previewToWorld(t));let{position:r}=this.getSizePositionFromContainer();e.position.x=r.x,e.position.y=r.y,this.state.set(this.id,e),this.editor.render()}};this.setSize=t=>{let e=this.currentSprite;e&&(e.size.width=t.width,e.size.height=t.height,this.state.set(this.id,e))};this.setRotation=t=>{let e=this.currentSprite;if(e){let{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData(),n=this.editor.outputContainer.getRotation(),a=Gi({rotation:t,outputRotation:n,flipHorizontally:i,flipVertically:r});this.container[this.id].setRotation(a),e.rotation=this.container[this.id].getRotation(),this.state.set(this.id,e),this.editor.render()}};this.onCanvasClick=t=>{this.isEditMode||this.selectHighestOrderSprite(t)};this.select=t=>{let e=this.state.get(t);e&&(this.editor.activeStore.tool!==e.tool&&this.editor.activeStore.selectTool(e.tool),this.setId(t))};this.selectLast=()=>{let t=this.editor.orderHelper.getLastSpriteId();t&&this.select(t)};this.selectNext=()=>{if(this.currentSprite){let e=this.container[this.id].getIndexInParent();if(e){let i=Object.keys(this.container).find(r=>this.container[r].getIndexInParent()===e-1);i&&this.select(i)}}};this.deselect=()=>{this.setId(Ka)};this.bringToFront=t=>D(this,null,function*(){let e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e),this.spriteSnapshot("order"),yield this.editor.render(),this.counter+=1});this.flipHorizontally=t=>{let e=this.state.get(t),i=this.container[t];i.setFlipHorizontally(!i.getFlipHorizontally()),e.flipHorizontally=i.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(t,e),this.editor.render()};this.pureReset=()=>{this.deselect(),Array.from(this.state.keys()).forEach(t=>{this.pureRemoveSprite(t)}),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=t=>{let e=this.editor.brushToolStore.containerId();if(t=t.filter(n=>n!==e),t.length<1){this.deselect();return}let i="",r=0;t.forEach(n=>{let a=this.container[n],l=a&&a.getIndexInParent()||0;l>=r&&(r=l,i=n)}),this.select(i)};this.onCornerDrag=({x:t,y:e})=>{if(this.currentSprite){let i=new y(this.currentSprite.position),r=new y(t,e),n=r.subtract(i).magnitude,a=this.getSize(),l=n*2/br.sizeMagnitude(a);if(n>this.minLength)if(this.isSpriteSticker)if(this.stickerToolStore.resizeMode!=="unrestricted")this.setStickerSize({width:a.width*l,height:a.height*l});else{let c=this.rotationWRTOutputRotation,p=r.subtract(i),u=Math.cos(c),m=Math.sin(c),g=Math.max(Math.abs(p.x*u*2+p.y*m*2),this.minLength),x=Math.max(Math.abs(p.x*-m*2+p.y*u*2),this.minLength);this.setStickerSize({width:g,height:x})}else this.isSpriteText?this.setTextSize(a.width*l):this.isSpriteTextDesign&&this.setTextDesignScale(l);this.editor.render()}};this.onWidthDrag=({x:t,y:e})=>{let i=new y(this.currentSprite.position),n=new y(t,e).subtract(i).magnitude,a=this.editor.previewToWorld(2*n);if(a>this.minLength&&(this.setContainerProperties(this.id,{width:a},!0),this.isSpriteText)){let l=this.getContainerProperties(this.id);this.textToolStore.changeWidth(l.width)}};this.onPaddingDrag=({x:t,y:e})=>{if(this.isSpriteTextDesign){let i=this.getContainerProperties(this.id),r=new y(this.currentSprite.position),a=new y(t,e).subtract(r).magnitude,l=Math.max(this.editor.previewToWorld(a)-i.width/2,0);this.setContainerProperties(this.id,{padding:l},!0),this.isSpriteTextDesign&&(i=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(i.padding))}};this.correctTextFlip=()=>{let{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();Object.values(this.container).forEach(i=>{(i.type==="text"||i.type==="text-design")&&(i.setFlipHorizontally(t),i.setFlipVertically(e))})};this.reverseTextHorizontally=t=>{Object.values(this.container).forEach(e=>{(e.type==="text"||e.type==="text-design")&&e.setFlipHorizontally(t)})};this.reverseTextVertically=t=>{Object.values(this.container).forEach(e=>{(e.type==="text"||e.type==="text-design")&&e.setFlipVertically(t)})};this.getOutputProperties=()=>this.editor.outputContainer.getData();this.getContainerProperties=t=>this.container[t].getData();this.getContainerTransform=t=>this.container[t].getTransform();this.getDuplicateContainerTransform=t=>{let e=this.container[t].getTransform(),i=this.editor.shortestOutputSide*.1,r=new y(e.position).add(new y(i,i));return w(b({},e),{position:r})};this.getDuplicateContainerFlip=t=>{let e=this.container[t].getFlipHorizontally(),i=this.container[t].getFlipVertically();return{flipHorizontally:e,flipVertically:i}};this.updatePositionAndSize=(t=this.id,e=!1)=>{let{position:i,size:r}=this.getSizePositionFromContainer(t),n=this.state.get(t);if(n){if(n.position.x=i.x,n.position.y=i.y,n.size.width=r.width,n.size.height=r.height,e){let a=this.container[t].getRotation();this.container[t].setRotation(a),n.rotation=this.container[t].getRotation()}this.state.set(t,n)}};this.getInitialTransform=t=>{let e=this.editor.outputToWorld(l0.position);return t?b({position:e},t):{rotation:this.editor.outputContainer.getRotation(),position:e}};this.setInitialSpriteState=(t,e)=>{let i=this.container[t],{position:r,size:n}=this.getSizePositionFromContainer(t),a=i.getRotation(),l=e!==f.STICKER?!1:i.getFlipHorizontally(),c=e!==f.STICKER?!1:i.getFlipVertically();this.state.set(t,{tool:e,position:r,rotation:a,size:n,flipHorizontally:l,flipVertically:c})};this.setStickerSize=t=>{let e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));let i=this.currentSprite;i&&(i.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace()),this.state.set(this.id,i))};this.setTextSize=t=>{let e=this.getContainerProperties(this.id),i={width:this.editor.previewToWorld(t)},r=i.width/e.width,n={fontSize:Math.round(e.fontSize*r)},a=this.isSpriteText?b(b({},i),n):i;i.width>this.minLength&&n.fontSize&&(this.setContainerProperties(this.id,a,!0),e=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(e.fontSize,!0),this.textToolStore.changeWidth(e.width))};this.setTextDesignScale=t=>{let e=this.getContainerProperties(this.id),i=e.width*t;if(i>this.minLength){this.setContainerProperties(this.id,{width:i},!0);let{width:r}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(r),e=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(e.padding)}};this.getSizePositionFromContainer=(t=this.id)=>{let e=this.container[t];if(e){let i=this.editor.worldToPreview(e.getPosition()),r=this.editor.worldSizeToPreview(e.getSizeInWorldSpace());return{position:i,size:r}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(t=this.id)=>{let e=this.container[t];return e?this.editor.worldSizeToPreview(e.getSizeInWorldSpace()):{width:0,height:0}};this.editor=t,this.container={},this.stickerToolStore=new j(t),this.textToolStore=new H(t),this.textDesignToolStore=new X(t),this.rect=new dt(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(t,e){return new y(t,e||t).magnitude}static sizeMagnitude(t){return Math.sqrt(t.width*t.width+t.height*t.height)}updateStateByHistoryState(t,e){return D(this,null,function*(){yield(0,Bp.default)(t,i=>D(this,null,function*(){let r=e.common[i];if(!r)return;this.state.get(i)?this.updateExistingItem(i,e):yield this.addNewItem(i,e),this.container[i].setIndexInParent(r.order)})),this.counter+=1})}addNewItem(t,e){return D(this,null,function*(){let i=e.common[t],r=i.size?{width:this.editor.worldToPreview(i.size.width),height:this.editor.worldToPreview(i.size.height)}:void 0,{flipHorizontally:n,flipVertically:a}=this.editor.outputContainer.getData(),l=this.editor.outputContainer.getRotation(),c=a!==n?i.rotation-l:i.rotation+l,p=a!==n?-c:c,u={spriteId:t,transform:{size:r,position:new y(i.position),rotation:p}};if(e.text[t]){let m=e.text[t],g=this.textToolStore.validFontWithConfig(m.identifier);m.identifier=g==null?void 0:g.identifier,yield this.addNewText(u,m)}e.textdesign[t]&&(yield this.addNewTextDesign(u,e.textdesign[t])),e.sticker[t]&&(yield this.addNewSticker(u,w(b({},e.sticker[t]),{flipHorizontally:i.flipHorizontally,flipVertically:i.flipVertically})))})}updateExistingItem(t,e){let i=e.common[t],r=this.state.get(t);this.state.set(t,r);let n=this.container[t];if(n.setPosition(new y(i.position)),n.setRotation(i.rotation),r.rotation=n.getRotation(),i.flipHorizontally!==void 0&&n.setFlipHorizontally(i.flipHorizontally),i.flipVertically!==void 0&&n.setFlipVertically(i.flipVertically),e.text[t]){let a=e.text[t];this.textToolStore.updateStateFromHistory(t,w(b({},a),{fontIdentifier:a.identifier}))}if(e.textdesign[t]){let a=e.textdesign[t];this.textDesignToolStore.updateStateFromHistory(t,w(b({},a),{inverted:a.isInverted}))}e.sticker[t]&&(n.setSizeInWorldSpace(i.size),this.stickerToolStore.updateStateFromHistory(t,e.sticker[t])),this.updatePositionAndSize(t)}get currentSprite(){if(this.isSpriteSelected)return this.state.get(this.id)}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==Ka}get position(){if(this.currentSprite)return this.currentSprite.position}get tool(){if(this.currentSprite)return this.currentSprite.tool}get size(){if(this.currentSprite)return this.currentSprite.size}get rotation(){if(this.currentSprite)return this.currentSprite.rotation}get rotationWRTOutputRotation(){if(this.currentSprite){let{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData(),i=this.editor.outputContainer.getRotation();return Gi({rotation:this.currentSprite.rotation-i,flipHorizontally:t,flipVertically:e})}}get flipHorizontal(){if(this.currentSprite)return this.currentSprite.flipHorizontally}get isSpriteSticker(){return this.tool===f.STICKER}get isSpriteText(){return this.tool===f.TEXT}get isSpriteTextDesign(){return this.tool===f.TEXT_DESIGN}get isOnTop(){let t=this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){let{x:t,y:e}=this.currentSprite.position,{height:i,width:r}=this.currentSprite.size;return{x:Math.round(t-r/2),y:Math.round(e-i/2)}}}get currentRect(){if(this.currentSprite)return this.rect}get leftTopPosition(){if(this.currentSprite)return this.rect.leftTop}get leftBottomPosition(){if(this.currentSprite)return this.rect.leftBottom}get leftMidPosition(){if(this.currentSprite)return this.rect.leftMid}get leftMidPadPosition(){if(this.currentSprite){let{leftMid:t}=this.rect;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}}get rightTopPosition(){if(this.currentSprite)return this.rect.rightTop}get rightBottomPosition(){if(this.currentSprite)return this.rect.rightBottom}get rightMidPosition(){if(this.currentSprite)return this.rect.rightMid}get rightMidPadPosition(){if(this.currentSprite){let{rightMid:t}=this.rect;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}}get leftBottomHandlePosition(){if(this.currentSprite)return this.rect.leftBottomHandle}get rightBottomHandlePosition(){if(this.currentSprite)return this.rect.rightBottomHandle}get historyLocale(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale}get stickerLocale(){return this.editor.configStore.locale[f.STICKER].history}get textLocale(){return this.editor.configStore.locale[f.TEXT].history}get textDesignLocale(){return this.editor.configStore.locale[f.TEXT_DESIGN].history}setId(t){this.selectedId.set(t)}},I=br;s([E],I.prototype,"counter",2),s([h],I.prototype,"addSticker",2),s([h],I.prototype,"addStickerAsync",2),s([h],I.prototype,"addText",2),s([h],I.prototype,"addTextAsync",2),s([h],I.prototype,"addTextDesign",2),s([h],I.prototype,"addTextDesignAsync",2),s([h],I.prototype,"clickableCanvas",2),s([h],I.prototype,"setContainerProperties",2),s([h],I.prototype,"setContainerPosition",2),s([h],I.prototype,"pureRemoveSprite",2),s([h],I.prototype,"deleteSprite",2),s([h],I.prototype,"removeSprite",2),s([h],I.prototype,"addSnapshot",2),s([h],I.prototype,"addNewText",2),s([h],I.prototype,"addNewTextDesign",2),s([h],I.prototype,"addNewSticker",2),s([h],I.prototype,"updateStateFromSerialization",2),s([h],I.prototype,"updateStateFromHistory",2),s([h],I.prototype,"updateCanvasControls",2),s([h],I.prototype,"setEditMode",2),s([h],I.prototype,"setDragMode",2),s([h],I.prototype,"setPosition",2),s([h],I.prototype,"setSize",2),s([h],I.prototype,"setRotation",2),s([h],I.prototype,"onCanvasClick",2),s([h],I.prototype,"select",2),s([h],I.prototype,"selectLast",2),s([h],I.prototype,"selectNext",2),s([h],I.prototype,"deselect",2),s([h],I.prototype,"bringToFront",2),s([h],I.prototype,"flipHorizontally",2),s([h],I.prototype,"pureReset",2),s([h],I.prototype,"onCornerDrag",2),s([h],I.prototype,"onWidthDrag",2),s([h],I.prototype,"onPaddingDrag",2),s([h],I.prototype,"correctTextFlip",2),s([h],I.prototype,"reverseTextHorizontally",2),s([h],I.prototype,"reverseTextVertically",2),s([d],I.prototype,"currentSprite",1),s([d],I.prototype,"padding",1),s([d],I.prototype,"isEditMode",1),s([d],I.prototype,"isDragMode",1),s([d],I.prototype,"id",1),s([d],I.prototype,"isSpriteSelected",1),s([d],I.prototype,"position",1),s([d],I.prototype,"tool",1),s([d],I.prototype,"size",1),s([d],I.prototype,"rotation",1),s([d],I.prototype,"rotationWRTOutputRotation",1),s([d],I.prototype,"flipHorizontal",1),s([d],I.prototype,"isSpriteSticker",1),s([d],I.prototype,"isSpriteText",1),s([d],I.prototype,"isSpriteTextDesign",1),s([d],I.prototype,"isOnTop",1),s([d],I.prototype,"spritePosition",1),s([d],I.prototype,"currentRect",1),s([d],I.prototype,"leftTopPosition",1),s([d],I.prototype,"leftBottomPosition",1),s([d],I.prototype,"leftMidPosition",1),s([d],I.prototype,"leftMidPadPosition",1),s([d],I.prototype,"rightTopPosition",1),s([d],I.prototype,"rightBottomPosition",1),s([d],I.prototype,"rightMidPosition",1),s([d],I.prototype,"rightMidPadPosition",1),s([d],I.prototype,"leftBottomHandlePosition",1),s([d],I.prototype,"rightBottomHandlePosition",1),s([d],I.prototype,"historyLocale",1),s([d],I.prototype,"stickerLocale",1),s([d],I.prototype,"textLocale",1),s([d],I.prototype,"textDesignLocale",1);var de={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},Fp={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:E.map({})};var G=class{constructor(t,e){this.minCropSize=0;this.state=Fp,this.configStore=t.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=e}changeIdentifier(t){this.state.identifier=t,this.state.cropState.get(t)||this.state.cropState.set(t,b({},de))}changeRatio(t){let e=this.state.cropState.get(this.identifier);e&&this.state.cropState.set(this.identifier,w(b({},e),{ratio:t}))}changeSize(t){let e=this.state.cropState.get(this.identifier);e&&(t.width&&t.width>0&&(e.size.width=Math.round(t.width)),t.height&&t.height>0&&(e.size.height=Math.round(t.height)),this.state.cropState.set(this.identifier,e))}changeHeight(t){let e=this.state.cropState.get(this.identifier);e&&t&&(e.size.height=Math.round(t),this.state.cropState.set(this.identifier,e))}changeWidth(t){let e=this.state.cropState.get(this.identifier);e&&t&&(e.size.width=Math.round(t),this.state.cropState.set(this.identifier,e))}changePositionX(t,e){let i=this.state.cropState.get(this.identifier);return i&&t<=e-this.minCropSize&&t>=0?(i.position.x=Math.round(t),this.state.cropState.set(this.identifier,i),!0):!1}changePositionY(t,e){let i=this.state.cropState.get(this.identifier);return i&&t<=e-this.minCropSize&&t>=0?(i.position.y=Math.round(t),this.state.cropState.set(this.identifier,i),!0):!1}changePosition(t,e){let i=this.state.cropState.get(this.identifier);return i&&t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0?(i.position.x=Math.round(t.x),i.position.y=Math.round(t.y),this.state.cropState.set(this.identifier,i),!0):!1}changeLockResolution(t){let e=this.state.cropState.get(this.identifier);e&&(e.lockResolution=t!==void 0?t:!e.lockResolution,this.state.cropState.set(this.identifier,e))}changeForceDimensions(t){let e=this.state.cropState.get(this.identifier);e&&(e.forceDimensions=t,this.state.cropState.set(this.identifier,e))}setRotation(t){this.state.rotationInDegrees=t}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=!1,this.state.flipVertically=!1}updateFlip({flipHorizontally:t,flipVertically:e}){this.state.flipHorizontally=t,this.state.flipVertically=e}setOutputRotation(t){this.state.outputRotation=t}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){let{width:t,height:e}=this.defaults.maxCropMaskSize;return new y(t/2,e/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:de.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:de.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:de.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:de.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:de.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:de.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:de.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:de.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:de.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};s([E],G.prototype,"state",2),s([h],G.prototype,"changeIdentifier",1),s([h],G.prototype,"changeRatio",1),s([h],G.prototype,"changeSize",1),s([h],G.prototype,"changeHeight",1),s([h],G.prototype,"changeWidth",1),s([h],G.prototype,"changePositionX",1),s([h],G.prototype,"changePositionY",1),s([h],G.prototype,"changePosition",1),s([h],G.prototype,"changeLockResolution",1),s([h],G.prototype,"changeForceDimensions",1),s([h],G.prototype,"setRotation",1),s([h],G.prototype,"resetRotation",1),s([h],G.prototype,"resetOutputRotation",1),s([h],G.prototype,"resetFlip",1),s([h],G.prototype,"updateFlip",1),s([h],G.prototype,"setOutputRotation",1),s([h],G.prototype,"flipHorizontally",1),s([h],G.prototype,"flipVertically",1),s([d],G.prototype,"flipCenter",1),s([d],G.prototype,"isFlippedHorizontal",1),s([d],G.prototype,"isFlippedVertical",1),s([d],G.prototype,"identifier",1),s([d],G.prototype,"height",1),s([d],G.prototype,"width",1),s([d],G.prototype,"position",1),s([d],G.prototype,"ratio",1),s([d],G.prototype,"size",1),s([d],G.prototype,"x",1),s([d],G.prototype,"y",1),s([d],G.prototype,"lockResolution",1),s([d],G.prototype,"forceDimensions",1),s([d],G.prototype,"selectedCrop",1),s([d],G.prototype,"rotationInDegrees",1),s([d],G.prototype,"outputRotation",1);var qa=class{constructor(t){this.transforms={output:JSON.stringify(Pe.IDENTITY),preview:JSON.stringify(Pe.IDENTITY)};this.setFrameOpacity=t=>{this.frameOpacity=t,this.entered&&this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(0)};this.setOverlayOpacity=t=>{this.overlayOpacity=t,this.entered&&this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(0)};this.editor=t,this.overlayOpacity=0,this.frameOpacity=0,this.entered=!1}onLeave(){let{flipHorizontally:t,flipVertically:e,rotation:i,outputRotation:r}=this.transformToolStore.rotateFlipState;this.entered=!1,this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(this.frameOpacity),this.editor.engine.setWatermarkOpacity(1);let n=this.editor.previewToWorld(new y(this.transformToolStore.leftTopRespectFlip).add(new y(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new y(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),a=this.engineMediator.preview.container,{outputContainer:l}=this.editor;l.setResolution(z(this.transformToolStore.localOutputImageSize)),l.setData({flipVertically:e,flipHorizontally:t});let c=a.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();let p=1;if(this.transformToolStore.lockResolution){let{cropMaskSize:S,defaultImageSize:C}=this.transformToolStore,P=this.transformToolStore.maxCropMaskSize;p={height:S.height*C.height/P.height,width:S.width*C.width/P.width}.width/this.transformToolStore.localOutputImageSize.width}let u=Math.abs(c.x),m=p/(u/this.transformToolStore.defaultScale),g={x:m,y:m},x=-(i-r);l.setTransform({scale:g,position:n,rotation:x}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}resetTransforms(t){this.transforms=t}onEnter(){this.entered=!0,this.editor.overlayToolStore.identifier!=="identity"&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),this.editor.frameToolStore.identifier!=="identity"&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.engine.setWatermarkOpacity(0),this.editor.scale.setScaleToDefault();let t=this.engineMediator.preview.container,{outputContainer:e}=this.editor,i=JSON.parse(this.transforms.preview);e.setResolution(z(this.transformToolStore.defaultImageSize)),t.setTransform(i),e.setTransform(JSON.parse(this.transforms.output));let r=i.scale;e.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:r.y<0,flipHorizontally:r.x<0}),this.engineMediator.preview.savePreviewTransform(i);let{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(t,e=!0){let{width:i,height:r}=this.editor.engineMediator.image.container.getBounds(),n=gc(t)?{width:r,height:i}:{width:i,height:r};this.editor.outputContainer.rotate(t,n),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());let{rotation:a}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(a),ft(()=>{this.editor.scale.setInitialTransform();let l=this.getScaleWithFlip(a);this.engineMediator.preview.container.setScale(l),this.transformToolStore.setCropDefaults(!0),this.transformToolStore.updateCropMask()}),e&&this.editor.render()}applyPreviewTransform(){let{rotation:t,flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState,r=this.editor.scale.getPositionWithOffset(),n=this.getScaleWithFlip(),a=t;e&&(a=Cs(a)),i&&(a=Cs(a));let l={position:r,rotation:a,scale:n};this.engineMediator.preview.savePreviewTransform(l),this.engineMediator.preview.container.setTransform(l)}getScaleWithFlip(t=this.transformToolStore.rotateFlipState.rotation){let{flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState,r=e?-1:1,n=i?-1:1,a=this.editor.scale.calculateScale(t);return{x:a*r,y:a*n}}saveTransforms(){let t=JSON.stringify(this.engineMediator.preview.container.getTransform()),e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}}saveTransformsBasedOnFlip(){let t=this.engineMediator.preview.container.getTransform(),{scale:e}=t,{flipVertically:i,flipHorizontally:r}=this.editor.outputContainer.getData(),n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(w(b({},t),{scale:{x:r?-e.x:e.x,y:i?-e.y:e.y}})),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}};var Za=class{constructor(t){this.store=t;this.initialState={};this.state={}}init(){this.initialState=this.store.serializableState,this.state=b({},this.initialState)}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,wt.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}};var Rp="identity",_o=class{constructor(t){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=E.box(!1);this.minCropSize=0;this.transformHistory=new Za(this);this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=t=>{if(!t.trim())return!1;let e=this.editor.configStore.config.assetBaseUrl,{length:i}=e;if(e[i-1]!=="/"&&(e+="/"),`${e}transform`===t)return!1;let r=new Image;try{return r.src=t,!0}catch(n){return!1}};this.reset=()=>{this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.resetCrop(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop(),this.editor.render(),this.trackChanges()};this.changeLocalOutputSize=t=>{this.localOutputSize.height=Math.round(t.height),this.localOutputSize.width=Math.round(t.width),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(t.width),height:Math.round(t.height)})};this.changeDefaultScale=t=>{this.defaults.scale=t};this.changeLocalOutputHeight=t=>{this.localOutputSize.height=Math.round(t)};this.changeLocalOutputWidth=t=>{this.localOutputSize.width=Math.round(t)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution(),this.trackChanges()};this.rotateClockwise=()=>{let t=this.editor.outputContainer.getRotation(),e=this.isFlippedVertical?ys:vs;this.rotateOutputContainer(e(t))};this.rotateAntiClockwise=()=>{let t=this.editor.outputContainer.getRotation(),e=this.isFlippedVertical?vs:ys;this.rotateOutputContainer(e(t))};this.flipHorizontally=(t=!0)=>{this.transformStore.flipHorizontally(),this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal),this.transformRender(t),t&&this.trackChanges()};this.flipVertically=(t=!0)=>{this.transformStore.flipVertically(),this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical),this.transformRender(t),t&&this.trackChanges()};this.applyDefaultCrop=(t=!1)=>{if(this.identifier==="identity"){let{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,t)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,!0)};this.onLeftTop=({x:t,y:e})=>{let i=this.getRatio(),r=this.rightBottom,{minCropMaskSize:n,maxCropMaskSize:a}=this,l=Math.min(Math.max(0,t),r.x-n.width),c=Math.min(Math.max(0,e),r.y-n.height),p=r.x-l,u=r.y-c,m={width:Math.max(this.minCropSize,Math.min(p,a.width-l)),height:Math.max(this.minCropSize,Math.min(u,a.height-c))};if(i==="*")this.changePosition({x:l,y:c})&&this.changeCropAndOutputSize(m);else{let g=this.proportionalSize(i,m),x=new y(r).subtract({x:g.width,y:g.height});this.changePosition(x)&&this.changeCropAndOutputSize(g,i)}};this.onLeftBottom=({x:t,y:e})=>{let i=this.getRatio(),r=this.rightTop,{minCropMaskSize:n,maxCropMaskSize:a}=this,l=Math.min(Math.max(0,t),r.x-n.width),c=Math.max(0,e,r.y+n.height),p=r.x-l,u=c-r.y,m={width:Math.max(1,Math.min(p,a.width-l)),height:Math.max(1,Math.min(u,a.height-r.y))};if(i==="*")this.changePositionX(l)&&this.changeCropAndOutputSize(m);else{let g=this.proportionalSize(i,m);this.changePositionX(r.x-g.width)&&this.changeCropAndOutputSize(g,i)}};this.onRightTop=({x:t,y:e})=>{let i=this.getRatio(),r=this.leftBottom,{minCropMaskSize:n,maxCropMaskSize:a}=this,l=Math.max(0,t,r.x+n.width),c=Math.min(Math.max(0,e),r.y-n.height),p=l-r.x,u=r.y-c,m={width:Math.max(1,Math.min(p,a.width-r.x)),height:Math.max(1,Math.min(u,a.height-c))};if(i==="*")this.changePositionY(c)&&this.changeCropAndOutputSize(m);else{let g=this.proportionalSize(i,m);this.changePositionY(r.y-g.height)&&this.changeCropAndOutputSize(g,i)}};this.onRightBottom=({x:t,y:e})=>{let i=this.getRatio(),r=this.leftTop,{minCropMaskSize:n,maxCropMaskSize:a}=this,l=Math.max(0,t,r.x+n.width),c=Math.max(0,e,r.y+n.height),p=l-r.x,u=c-r.y,m={width:Math.max(1,Math.min(p,a.width-r.x)),height:Math.max(1,Math.min(u,a.height-r.y))};if(i==="*")this.changeCropAndOutputSize(m);else{let g=this.proportionalSize(i,m);this.changeCropAndOutputSize(g,i)}};this.onPixelWidth=t=>{let e=JSON.stringify(z(this.localOutputSize)),i=this.entityManager.items.find(n=>n.identifier===this.identifier),r=this.defaults.imageSize;if(i&&i.ratio){let n=t,a=this.localOutputSize.height,{ratio:l}=i;if(l==="*"&&this.lockResolution&&(l=this.localOutputSize.width/this.localOutputSize.height),l==="*"&&!this.lockResolution)n=Math.max(Math.min(t,r.width),this.minCropSize),this.changeLocalOutputWidth(n),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(n),height:Math.round(a)});else{let c=_o.placeCropMask(l,r);n=Math.max(Math.min(n,c.width),this.minCropSize),a=n/l,this.changeLocalOutputSize({height:a,width:n})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(e)),Math.round(n)}return t};this.onPixelHeight=t=>{let e=JSON.stringify(z(this.localOutputSize)),i=this.entityManager.items.find(n=>n.identifier===this.identifier),r=this.defaults.imageSize;if(i&&i.ratio){let n=t,a=this.localOutputSize.width,{ratio:l}=i;if(l==="*"&&this.lockResolution&&(l=this.localOutputSize.width/this.localOutputSize.height),l==="*"&&!this.lockResolution)n=Math.max(Math.min(t,r.height),this.minCropSize),this.changeLocalOutputHeight(n),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(a),height:Math.round(n)});else{let c=_o.placeCropMask(l,r);n=Math.max(Math.min(n,c.height),this.minCropSize),a=n*l,this.changeLocalOutputSize({height:n,width:a})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(e)),Math.round(n)}return t};this.setFrameOpacity=t=>{this.transformations.setFrameOpacity(t)};this.setOverlayOpacity=t=>{this.transformations.setOverlayOpacity(t)};this.closestRatioReducer=t=>(e,i)=>i===null||Math.abs(t-e.ratio)<Math.abs(t-i.ratio)?-1:1;this.closestDimensionsReducer=t=>(e,i)=>{if(i===null)return-1;let r=Math.abs(e.dimensions.x/e.dimensions.y),n=Math.abs(i.dimensions.x/i.dimensions.y);return r===n?e.dimensions.x*e.dimensions.y>i.dimensions.x*i.dimensions.y?-1:1:Math.abs(t-r)<Math.abs(t-n)?-1:1};this.getMatchingItem=()=>{let t=this.entityManager.items.findIndex(c=>c.identifier==="imgly_transform_common_custom");if(t!==-1)return this.entityManager.items[t];let e=this.entityManager.items.findIndex(c=>c.ratio==="*");if(e!==-1)return this.entityManager.items[e];let i=z(this.editor.outputContainer.getResolution()),r=Math.abs(i.width/i.height),[n]=this.entityManager.items.filter(c=>c.ratio&&typeof c.ratio=="number").sort(this.closestRatioReducer(r)),[a]=this.entityManager.items.filter(c=>c.dimensions&&!c.ratio).sort(this.closestDimensionsReducer(r));if(!n||!a||!n.ratio&&!a.dimensions)return this.entityManager.items[0];if(!a||!a.dimensions)return n;if(!n||!n.ratio)return a;let l=Math.abs(a.dimensions.x/a.dimensions.y);return l===n.ratio||Math.abs(r-n.ratio)<Math.abs(r-l)?n:a};this.getTransform=t=>{let e=this.entityManager.items.find(i=>i.identifier===t);return e||(e=this.getMatchingItem()),e};this.editor=t,this.selectedCategory=Rp,this.transformStore=new G(t,this.defaults),this.transformations=new qa(t);let a=this.config,{enableRotation:e,enableFlip:i}=a,r=Xt(a,["enableRotation","enableFlip"]),n=this.editor.assetProvider.getAssets("transform");this.entityManager=new pt(n,w(b({},r),{locale:b(b({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new dt(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new dt(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(t){return t*Math.PI/180}static placeCropMask(t,e){if(e.height*t>e.width)return{height:e.width/t,width:e.width,yChanged:!0};let i=e.height*t;return{height:e.height,width:i,yChanged:!1}}changeIdentifier(t,e=!1){this.transformStore.changeIdentifier(t);let i=this.getCropMask(t,this.defaults.imageSize);i&&(this.transformStore.changeRatio(i.ratio),this.changeLocalOutputSize(i),this.updatePreviewSizeWRTImageSize(),i.yChanged!==void 0&&this.updateInitialCropMaskPosition(i.yChanged),i.dimensions&&this.changeLocalOutputSize({width:i.dimensions.x,height:i.dimensions.y}),e&&this.trackChanges())}setDragMode(t){this.dragMode.set(t)}getCropMask(t,e){let i=this.getTransform(t);if(i){let{ratio:r,forceDimensions:n,lockDimensions:a,dimensions:l=null}=i;if(n&&this.transformStore.changeForceDimensions(n),a&&this.transformStore.changeLockResolution(a),r)switch(r){case"*":return this.changePosition({x:0,y:0}),w(b({},e),{yChanged:void 0,ratio:"*",dimensions:l});default:return w(b({},_o.placeCropMask(i.ratio,e)),{ratio:i.ratio,dimensions:l})}else{let{x:c,y:p}=i.dimensions;return w(b({},_o.placeCropMask(c/p,e)),{ratio:null,dimensions:l})}}return null}setCropDefaults(t=!1){let e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);let i=this.editor.getPreviewSize(),{position:r}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(i),this.setDefaultCropPosition({x:r.x-i.width/2,y:r.y-i.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),t||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}setDefaultImageSize(t){this.defaults.imageSize=b({},z(t)),this.lockResolution||(this.localOutputSize=b({},z(t)))}setMaxCropSize(t){this.defaults.maxCropMaskSize.height=t.height,this.defaults.maxCropMaskSize.width=t.width}setDefaultCropPosition(t){this.defaults.cropMaskPosition.x=t.x,this.defaults.cropMaskPosition.y=t.y}resetCrop(){this.state.cropState.clear(),this.transformStore.changeIdentifier("identity")}toggleCategorySelection(t){this.selectedCategory=this.selectedCategory===t?Rp:t}pureReset(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();let t=JSON.stringify(this.engineMediator.preview.container.getTransform()),e=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:t,output:e})}changePosition(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)}changePositionX(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)}changePositionY(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:t,height:e},i,r=!0){if(this.transformStore.changeWidth(t),this.transformStore.changeHeight(e),!this.lockResolution){let{height:n,width:a}=this.defaults.maxCropMaskSize,{height:l,width:c}=this.defaults.imageSize,p=l/n*e,u=c/a*t;i&&(p=u/i),r&&this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(u),height:Math.round(p)}),e>=this.minCropSize&&this.changeLocalOutputHeight(p),t>=this.minCropSize&&this.changeLocalOutputWidth(u)}}transformRender(t=!0){this.transformations.applyPreviewTransform(),t&&this.editor.render()}addSnapshot(){this.transformHistory.isEqual()||this.editor.addSnapshot({[f.TRANSFORM]:this.serializableState},B.EDIT,"Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){let{flipHorizontally:t,flipVertically:e}=this.rotateFlipState,{identifier:i,rotationInDegrees:r}=this,n=fs(r),a=bs(gs(this.editor.engineMediator.output.container.getRotation())+r),{start:l,end:c}=this.convertUIToOperationOptions(n,a);return{flipHorizontally:t,flipVertically:e,rotation:n,start:l,end:c,identifier:i,outputRotation:a}}getStartEndForOperation(t){let{leftTop:e,rightBottom:i,maxCropMaskSize:r}=this,n=e.y,a=e.x,l=i.x,c=i.y;switch(t){case 270:return{leftTop:{x:r.height-c,y:a},rightBottom:{x:r.height-n,y:l}};case 180:return{leftTop:{x:r.width-l,y:r.height-c},rightBottom:{x:r.width-a,y:r.height-n}};case 90:return{leftTop:{x:n,y:r.width-l},rightBottom:{x:c,y:r.width-a}};default:return{leftTop:{x:a,y:n},rightBottom:{x:l,y:c}}}}getStartEndForUI(t,e,i){let{maxCropMaskSize:r}=this,n=e.y,a=e.x,l=i.x,c=i.y;switch(t){case 90:return{leftTop:{x:r.width-c,y:a},rightBottom:{x:r.width-n,y:l}};case 180:return{leftTop:{x:r.width-l,y:r.height-c},rightBottom:{x:r.width-a,y:r.height-n}};case 270:return{leftTop:{x:n,y:r.height-l},rightBottom:{x:c,y:r.height-a}};default:return{leftTop:{x:a,y:n},rightBottom:{x:l,y:c}}}}convertOperationOptionsToUI({start:t,end:e,rotation:i,outputRotation:r}){let n=r===90||r===270,a=n?y.fromSize(this.defaultImageSize).swapped:y.fromSize(this.defaultImageSize),l=Math.cos(i),c=Math.sin(i),p=this.calculateScale(i),u=new y(Math.min(t.x,e.x),Math.min(t.y,e.y)),g=new y(Math.max(t.x,e.x),Math.max(t.y,e.y)).subtract(u).divide(2),S=u.add(g).multiply(a).subtract(a.multiply(.5)),C=new y(S.x*l-S.y*c,S.x*c+S.y*l).multiply(p),T=a.multiply(.5).add(C).divide(a),R=T.subtract(g.multiply(p)),$=T.add(g.multiply(p)),W=n?y.fromSize(this.maxCropMaskSize).swapped:y.fromSize(this.maxCropMaskSize),it=R.multiply(W),L=$.multiply(W),{leftTop:K,rightBottom:Q}=this.getStartEndForUI(r,it,L);return{start:new y(K),end:new y(Q)}}convertUIToOperationOptions(t,e){let i=e===90||e===270,r=i?y.fromSize(this.defaultImageSize).swapped:y.fromSize(this.defaultImageSize),n=i?y.fromSize(this.maxCropMaskSize).swapped:y.fromSize(this.maxCropMaskSize),a=Math.cos(-t),l=Math.sin(-t),c=this.calculateScale(t,i),{leftTop:p,rightBottom:u}=this.getStartEndForOperation(e),m=new y(p).divide(n),x=new y(u).divide(n).subtract(m).divide(2),C=m.add(x).multiply(r).subtract(r.multiply(.5)),P=new y(C.x*a-C.y*l,C.x*l+C.y*a).divide(c),R=r.multiply(.5).add(P).divide(r),$=R.subtract(x.divide(c)),W=R.add(x.divide(c));return{start:$,end:W}}calculateScale(t,e=!1){let i=e?y.fromSize(this.defaultImageSize).swapped:y.fromSize(this.defaultImageSize),r=new y(Math.abs(i.x*Math.cos(t))+Math.abs(i.y*Math.sin(t)),Math.abs(i.x*Math.sin(t))+Math.abs(i.y*Math.cos(t))),n=i.subtract(r.clone()).divide(2).abs;return n.y>n.x?n.y*2/i.y+1:n.x*2/i.x+1}updateStateFromSerialization(t){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();let e=Math.round(gs(t.rotation));if(this.transformStore.setRotation(e>180?e-360:e),this.transformations.rotateOutputContainer(fs(bs(t.outputRotation||mc.Top))),t.identifier&&this.transformStore.changeIdentifier(t.identifier),t.start&&t.end){(t.end.x===0||t.end.y===0)&&(t.end.x=1,t.end.y=1);let{start:i,end:r}=this.convertOperationOptionsToUI({start:new y(t.start),end:new y(t.end),rotation:t.rotation,outputRotation:t.outputRotation});this.changePositionX(i.x),this.changePositionY(i.y);let n=r.x-i.x,a=r.y-i.y;this.transformStore.changeSize({width:n,height:a});let{maxCropMaskSize:l,imageSize:c}=this.defaults,p={height:a*c.height/l.height,width:n*c.width/l.width};this.changeLocalOutputSize(p)}t.flipHorizontally&&this.flipHorizontally(!1),t.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(t){this.defaultAngle=t}updateCanvasControls(t){let e=z(this.cropMaskPosition),i=z(this.cropMaskSize),r=z(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:r.height*i.height/t.height,width:r.width*i.width/t.width},void 0,!1),this.changePosition({y:r.height*e.y/t.height,x:r.width*e.x/t.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter(),this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(t){this.transformStore.setRotation(t),this.transformRender()}rotateOutputContainer(t,e=!0){return D(this,null,function*(){this.setDragMode(!0),this.transformations.rotateOutputContainer(t,e),yield this.editor.wait(),this.setDragMode(!1)})}applyInitialCrop(){let{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,!1)}clickableCanvas(t){this.editor.clickableCanvas(t)}proportionalSize(t,e,i=this.defaults.maxCropMaskSize,r=this.minCropSize){let n=e.height*t,{height:a}=e;return(n>i.width||n<r||a<r)&&(n=e.width,a=e.width/t),{width:Math.round(n),height:Math.round(a)}}checkAndAddSnapshot(t){let e=z(this.localOutputSize);(t.width!==e.width||t.height!==e.height)&&this.trackChanges()}updateInitialCropMaskPosition(t){let{cropMaskSize:e}=this,i=this.defaults.maxCropMaskSize;t?this.changePosition({x:0,y:Math.abs(i.height-e.height)/2}):this.changePosition({x:Math.abs(i.width-e.width)/2,y:0})}updatePreviewSizeWRTImageSize(){let t=z(this.localOutputSize),e=z(this.defaults.imageSize),i=z(this.defaults.maxCropMaskSize),r={height:i.height*t.height/e.height,width:i.width*t.width/e.width};this.transformStore.changeSize(r)}getScaleWithFlip(t=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(t)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){let{flipHorizontally:t,flipVertically:e,rotationInDegrees:i,outputRotation:r}=this.transformStore.state;return{flipHorizontally:t,flipVertically:e,rotation:_o.inRadians(i),outputRotation:r}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[f.TRANSFORM]}get locale(){return this.editor.configStore.locale[f.TRANSFORM]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){let t=this.getRatio();return t==="*"||t===1?{width:this.minCropSize,height:this.minCropSize}:t>1?{width:this.minCropSize*t,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*t}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){let t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:t.ratio;let{x:e,y:i}=t.dimensions;return e/i}return"*"}},k=_o;s([E],k.prototype,"selectedCategory",2),s([E],k.prototype,"defaults",2),s([E],k.prototype,"localOutputSize",2),s([h],k.prototype,"changeIdentifier",1),s([h],k.prototype,"setDragMode",1),s([h],k.prototype,"setCropDefaults",1),s([h],k.prototype,"setDefaultImageSize",1),s([h],k.prototype,"setMaxCropSize",1),s([h],k.prototype,"setDefaultCropPosition",1),s([h],k.prototype,"resetCrop",1),s([h],k.prototype,"toggleCategorySelection",1),s([h],k.prototype,"pureReset",1),s([h],k.prototype,"reset",2),s([h],k.prototype,"changePosition",1),s([h],k.prototype,"changePositionX",1),s([h],k.prototype,"changePositionY",1),s([h],k.prototype,"changeCropAndOutputSize",1),s([h],k.prototype,"onLeave",1),s([h],k.prototype,"onEnter",1),s([h],k.prototype,"changeLocalOutputSize",2),s([h],k.prototype,"changeDefaultScale",2),s([h],k.prototype,"changeLocalOutputHeight",2),s([h],k.prototype,"changeLocalOutputWidth",2),s([h],k.prototype,"changeLockResolution",2),s([h],k.prototype,"setRotation",1),s([h],k.prototype,"rotateClockwise",2),s([h],k.prototype,"rotateAntiClockwise",2),s([h],k.prototype,"rotateOutputContainer",1),s([h],k.prototype,"flipHorizontally",2),s([h],k.prototype,"flipVertically",2),s([h],k.prototype,"applyDefaultCrop",2),s([h],k.prototype,"applyInitialCrop",1),s([h],k.prototype,"updateCropMask",2),s([h],k.prototype,"clickableCanvas",1),s([h],k.prototype,"onLeftTop",2),s([h],k.prototype,"onLeftBottom",2),s([h],k.prototype,"onRightTop",2),s([h],k.prototype,"onRightBottom",2),s([h],k.prototype,"proportionalSize",1),s([h],k.prototype,"onPixelWidth",2),s([h],k.prototype,"onPixelHeight",2),s([h],k.prototype,"updateInitialCropMaskPosition",1),s([h],k.prototype,"updatePreviewSizeWRTImageSize",1),s([d],k.prototype,"cropState",1),s([d],k.prototype,"identifier",1),s([d],k.prototype,"ratio",1),s([d],k.prototype,"height",1),s([d],k.prototype,"width",1),s([d],k.prototype,"localOutputImageSize",1),s([d],k.prototype,"localOutputHeight",1),s([d],k.prototype,"localOutputWidth",1),s([d],k.prototype,"lockResolution",1),s([d],k.prototype,"forceDimensions",1),s([d],k.prototype,"rotationInDegrees",1),s([d],k.prototype,"outputRotation",1),s([d],k.prototype,"isDragMode",1),s([d],k.prototype,"rotateFlipState",1),s([d],k.prototype,"selectedCategoryIdentifier",1),s([d],k.prototype,"categories",1),s([d],k.prototype,"items",1),s([d],k.prototype,"config",1),s([d],k.prototype,"locale",1),s([d],k.prototype,"isOptionSelected",1),s([d],k.prototype,"leftTop",1),s([d],k.prototype,"leftBottom",1),s([d],k.prototype,"rightTop",1),s([d],k.prototype,"rightBottom",1),s([d],k.prototype,"isFlippedHorizontal",1),s([d],k.prototype,"isFlippedVertical",1),s([d],k.prototype,"leftTopRespectFlip",1),s([d],k.prototype,"leftBottomRespectFlip",1),s([d],k.prototype,"rightTopRespectFlip",1),s([d],k.prototype,"rightBottomRespectFlip",1),s([d],k.prototype,"cropMaskPosition",1),s([d],k.prototype,"cropMaskSize",1),s([d],k.prototype,"state",1),s([d],k.prototype,"defaultImageSize",1),s([d],k.prototype,"maxCropMaskSize",1),s([d],k.prototype,"minCropMaskSize",1),s([d],k.prototype,"defaultCropMaskPosition",1),s([d],k.prototype,"defaultScale",1);var at=class{constructor(t){this.checkImageResize=()=>{this.engine.on(Hr.BEGAN_IMAGE_DOWNSCALING,()=>{this.modalStore.showInfoModal("resizing")}),this.engine.on(Hr.IMAGE_DOWNSCALED,({width:t,height:e})=>{let{maxMegaPixels:i}=this.configStore.config.engine.downscaleOptions,r=lc.isMobile()?i.mobile:i.desktop;this.modalStore.hideModal(),this.modalStore.showActionModal({type:et.WARNING,identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${r}`,width:`${t}`,height:`${e}`}})})};this.init=t=>{this.historyStore.isDirty()?this.modalStore.showActionModal({type:et.WARNING,identifier:"discardChanges",handleConfirm:()=>{this.setImage(t),this.resetToolStates()},handleDismiss:()=>{this.setImage(t,!0)}}):(this.historyStore.reset(),this.setImage(t,!0).then(()=>{let{engine:i,displayCanvasRendererWarning:r}=this.configStore.config;i.preferredRenderer==="canvas"&&r&&this.modalStore.showActionModal({type:et.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})})),this.libraryStore.fetchImages()};this.setImage=(t,e=!1)=>D(this,null,function*(){try{this.activeStore.setImageLoadedToEngine(!1),this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),yield this.activeStore.setImage(t),yield this.engineMediator.image.addImageToContainer(),this.canvasStore.resizeCanvas(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults();let{flipHorizontally:i,flipVertically:r,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:r,flipHorizontally:i}),yield this.transformToolStore.rotateOutputContainer(fc(n),!1),e?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransforms(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),this.historyStore.addInitialSnapshot(),yield this.renderPromise(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"&&this.filterToolStore.setImageAndGetPreviews(),this.activeStore.tool?this.configStore.events.onImageLoaded():this.onReady(),this.modalStore.identifier!=="imageResized"&&this.modalStore.hideModal(),this.activeStore.setImageLoadedToEngine(!0),this.resize()}catch(i){this.configStore.events.onErrorImageLoading(i),this.modalStore.hideModal(),this.modalStore.showActionModal({type:et.ERROR,identifier:i.identifier?i.identifier:"rendering",error:i,handleConfirm:()=>{window.location.reload()}})}});this.onToolChange=(t,e=null,i=!0)=>{t!==e&&this.engineMediator.preview.container&&([t,e].indexOf(f.TRANSFORM)!==-1?(t===f.TRANSFORM?(this.transformToolStore.onLeave(),this.transformToolStore.addSnapshot(),this.snappingStore.calculatePreviewTopLeftPosition()):e===f.TRANSFORM&&this.transformToolStore.onEnter(),this.resize(e)):(this.scale.resetOffset(),this.scale.resetPosition(),this.scale.setScaleToDefault(),this.scale.scaleRender(!0)),i&&this.render())};this.resize=(t=null)=>{try{let e=this.activeStore.tool,i=t===f.TRANSFORM||!t&&e===f.TRANSFORM;this.canvasStore.resizeCanvas(t),this.transformToolStore.applyDefaultCrop();let r=z(this.transformToolStore.maxCropMaskSize);i||this.transformToolStore.onEnter();let n=this.engineMediator.preview.container.getRotation();if(this.engineMediator.preview.updateTransform(n)){this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.transformToolStore.updateCanvasControls(r),this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls();let l=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(l),i||(this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()),this.snappingStore.calculatePreviewTopLeftPosition(),this.render()}}catch(e){this.configStore.events.onErrorImageLoading(e),this.modalStore.showActionModal({type:et.ERROR,identifier:"rendering",handleConfirm:()=>{window.location.reload()}})}};this.export=(i={})=>{var r=i,{preventExportEvent:t}=r,e=Xt(r,["preventExportEvent"]);return new Promise((n,a)=>{this.modalStore.showInfoModal("exporting");let l=this.activeStore.tool===f.TRANSFORM;l&&this.transformToolStore.onLeave();let{config:c}=this.configStore,p=b(b({},c.export.image),e),{exportType:u,format:m,quality:g,enableDownload:x}=p;this.engineMediator.engine.export(u,m,g).then(S=>{x&&this.triggerFileDownload(c.export.filename,m,u,S),t||this.configStore.events.onExport(S),this.historyStore.isDirtySinceSave=!1,n(S)}).catch(S=>{a(S)}).finally(()=>{l&&(this.transformToolStore.onEnter(),this.render()),this.modalStore.hideModal()})})};this.serialize=({image:t}={image:!0})=>this.serializationMediator.serialize({image:t});this.deserialize=t=>this.serializationMediator.deserialize(t);this.close=()=>{this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning?this.modalStore.showActionModal({type:et.WARNING,identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}}):this.configStore.events.onClose()};this.hasChanges=()=>this.historyStore.isDirtySinceSave;this.getImageDimensions=()=>{let{width:t,height:e}=this.engine.getOutputDimensions();return{width:t,height:e}};this.wait=(t=0)=>new Promise(e=>setTimeout(e,t));this.clickableCanvas=t=>D(this,null,function*(){t?(yield new Promise(e=>setTimeout(e,0)),this.canvasStore.enableCanvasClick()):this.canvasStore.disableCanvasClick()});this.onReady=()=>D(this,null,function*(){let{forceCrop:t}=this.configStore.config;if(this.activeStore.selectTool(this.configStore.defaultTool),t){let e=this.transformToolStore.localOutputImageSize,i=e.width/e.height,r=this.transformToolStore.entityManager.items.map(n=>n.ratio?n.ratio:n.dimensions.x/n.dimensions.y);r.indexOf("*")!==-1?console.error('ForceCrop will not work if "*" is one of the ratios'):r.indexOf(parseFloat(i.toFixed(2)))===-1&&this.activeStore.selectTool(f.TRANSFORM)}this.configStore.events.onEditorReady()});this.addSnapshot=(t,e,i)=>{this.historyStore.addSnapshot(t,e,i)};this.resetToolStates=()=>{this.transformToolStore.pureReset(),this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.historyStore.reset(),this.render()};this.getAssetPath=t=>this.assetProvider.getPathForCategory(t);this.render=()=>D(this,null,function*(){yield this.renderPromise()});this.applyFlipToPreview=t=>this.engineMediator.previewSpaceToFlippedPreviewSpace(t);this.getPreviewSize=()=>{let{width:t,height:e}=this.engine.getOutputDimensions();return t&&e?{width:Math.round(this.worldToPreview(this.outputToWorld(t))),height:Math.round(this.worldToPreview(this.outputToWorld(e)))}:{height:e,width:t}};this.getImageMimeType=()=>zp(this.activeStore.image);this.triggerFileDownload=(t,e,i,r)=>{let n=e===fe.JPEG&&i!==Do.MSBLOB?".jpeg":".png",a=t+n,l=this.blobFromExportData(r);this.triggerBlobDownload(a,l)};this.triggerBlobDownload=(t,e)=>{if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{let i=document.createElement("a"),r=URL.createObjectURL(e);i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),Nl()||URL.revokeObjectURL(r)}};this.blobFromExportData=t=>typeof t=="string"?Na(t):t instanceof HTMLImageElement?Na(t.src):t;this.configStore=new Wt;let e=this.configStore.saveConfig(t);if(this.engineMediator=new Ja(this),this.serializationMediator=new ur(this),this.spriteStore=new I(this),this.scale=new bt(this),this.filterToolStore=new ht(this),this.adjustmentsToolStore=new q(this),this.focusToolStore=new U(this),this.overlayToolStore=new yt(this),this.frameToolStore=new lt(this),this.brushToolStore=new st(this),this.transformToolStore=new k(this),this.libraryStore=new Nt(this),this.modalStore=new Jt(this),this.snappingStore=new we(this),this.activeStore=new Vt(this),this.canvasStore=new Ot(this),this.historyStore=new Ro(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(e),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){let i=this.configStore.config.engine;this.previewThumbnails=new fr(w(b({},i),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}this.engine.pesdk.on(Hr.WEBGL_CONTEXT_LOST,()=>{this.configStore.events.onErrorWebGLContextLost()})}static get defaultColors(){return Object.keys(Bt).map(t=>{let e=Bt[t];return{identifier:t,color:e,colorString:Be(e)}})}static get defaultBackgroundColors(){return Object.keys(Aa).map(t=>{let e=Aa[t];return{identifier:t,color:e,colorString:Be(e)}})}static get devicePixelRatio(){return Math.max(window.devicePixelRatio||1,1)}get shortestOutputSide(){let t=this.outputContainer.getBounds();return Math.min(t.width,t.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get orderHelper(){return this.engineMediator.orderHelper}renderPromise(){return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(t,e){return be(t)?this.engineMediator.previewSpaceToWorldSpace(t,e):this.engineMediator.previewSpaceToWorldSpace(t,e)}worldToPreview(t){return be(t)?this.engineMediator.worldSpaceToPreviewSpace(t):this.engineMediator.worldSpaceToPreviewSpace(t)}worldSizeToPreview(t){return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}}previewSizeToWorld(t,e){return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}}outputToWorld(t){return be(t)?this.engineMediator.outputSpaceToWorldSpace(t):this.engineMediator.outputSpaceToWorldSpace(t)}previewToOutput(t){return be(t)?this.engineMediator.previewSpaceToOutputSpace(t):this.engineMediator.previewSpaceToOutputSpace(t)}get outputContainer(){return this.engineMediator.output.container}};s([h],at.prototype,"resize",2),s([h],at.prototype,"export",2),s([h],at.prototype,"clickableCanvas",2);function yr(o,t){let e=o.width/o.height,i=t.width/t.height;return e>i?o.height/t.height:o.width/t.width}var c0={transform:Pe.IDENTITY},_e=class{constructor(t){this.initialTransform=Pe.IDENTITY;this.editor=t,this.state=E(c0)}createPreview(t){this.container=this.editor.engine.createPreview(t)}updateTransform(t=0,e=!0){let i=this.calculateTransform(t);return i.scale.x?(e?this.saveInitialTransform(i):this.savePreviewTransform(i),this.container.setTransform(this.state.transform),!0):!1}saveInitialTransform(t){this.initialTransform=t,this.savePreviewTransform(t)}savePreviewTransform(t){ft(()=>{this.state.transform.position=t.position,this.state.transform.scale=t.scale,this.state.transform.rotation=t.rotation;let e=at.devicePixelRatio,i=new y(t.scale).divide(e);this.previewTransformWithoutDpr={position:new y(t.position).divide(e),scale:i,rotation:t.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(t=0){let e=at.devicePixelRatio,{scaleImageToFit:i}=this.editor.configStore.config,{width:r,height:n}=this.editor.canvasStore.canvasSize,a=this.editor.engine.getOutputDimensions(),l=yr({width:r,height:n},a),c=i?l:Math.min(1,l),p=n-a.height*c,u=this.editor.configStore.measurements.mainCanvasActionBar.height*2;p<u&&(c=yr({width:r,height:n-u},a));let m=.95;a.height*c>n*m&&(c=yr({width:r,height:n*m},a)),a.width*c>r*m&&(c=yr({width:r*m,height:n},a)),c*=e;let g={x:r*e/2,y:n*e/2},x={x:c,y:c};return new Pe(g,x,t)}};s([h],_e.prototype,"updateTransform",1),s([h],_e.prototype,"savePreviewTransform",1),s([d],_e.prototype,"transform",1),s([d],_e.prototype,"position",1),s([d],_e.prototype,"scale",1),s([d],_e.prototype,"rotation",1);var Ze=class{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(t){if([f.STICKER,f.TEXT,f.TEXT_DESIGN,f.BRUSH,f.FRAME].indexOf(t)!==-1)throw new Error("addIndex is used for non sprites, for sprites use addSprite")}static remove(t,e){let i=e.findIndex(r=>r===t);i!==-1&&e.splice(i,1)}static indexForOrder(t,e,i){let r=t[i],n=e.findIndex(l=>l===i);if(n!==-1)return{index:n,order:e};let{length:a}=e;if(a){let l;for(l=0;l<a;l+=1){let c=e[l],p=t[c];if(r<p)return e=[...e.slice(0,l),i,...e.slice(l)],{index:l,order:e}}}return e.push(i),{index:e.length-1,order:e}}addIndex(t){Ze.checkTool(t);let{index:e,order:i}=Ze.indexForOrder(Ze.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t);return this.imageContainerOrder=i,e}removeIndex(t){Ze.checkTool(t),Ze.remove(t,this.imageContainerOrder)}addSprite(t){return this.spriteContainerOrder.push(t),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(t){Ze.remove(t,this.spriteContainerOrder)}renameSprite(t,e){let i=this.spriteContainerOrder.findIndex(r=>r===t);i!==-1&&(this.spriteContainerOrder[i]=e)}bringToFront(t){let e=this.spriteContainerOrder.findIndex(i=>i===t);return e!==-1&&(this.spriteContainerOrder.splice(e,1),this.spriteContainerOrder.push(t)),this.getLastSpriteIndex()}getLastSpriteId(){let{length:t}=this.spriteContainerOrder;return this.spriteContainerOrder[t-1]}getSpriteIndex(t){return this.spriteContainerOrder.findIndex(i=>i===t)+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}},Wn=Ze;Wn.IMAGE_CONTAINER_INDEX={[f.FILTER]:0,[f.ADJUSTMENT]:1,[f.FOCUS]:2,[f.OVERLAY]:3};var Ja=class{constructor(t){this.orderHelper=new Wn;let e=t.configStore.config.engine;this.engine=new _r(w(b({},e),{license:t.configStore.config.license,assetProvider:t.configStore.assetProvider,watermark:t.configStore.config.watermark})),this.image=new Ha(t),this.output=new _a(t),this.preview=new _e(t),this.editor=t}render(t){return this.engine.render(t)}previewSpaceToWorldSpace(t,e){let i=this.preview.previewTransformWithoutDpr;if(be(t)){let r=this.editor.engine.convertPointFromPreviewIntoWorldSpace(y.ZERO,i,e),n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},i,e);return y.distance(new y(r),new y(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,i,e)}worldSpaceToPreviewSpace(t){let e=this.preview.previewTransformWithoutDpr;if(be(t)){let i=this.editor.engine.convertPointFromWorldIntoPreviewSpace(y.ZERO,e),r=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return y.distance(new y(i),new y(r))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)}outputSpaceToWorldSpace(t){return be(t)?Ss.getScalarInWorldSpace(t,this.editor.engine.getOutputContainer()):Ss.getPointInWorldSpace(t,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(t){let e=this.preview.previewTransformWithoutDpr;if(be(t)){let i=this.editor.engine.convertPointFromPreviewIntoOutputSpace(y.ZERO,e),r=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return y.distance(new y(i),new y(r))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)}previewSpaceToFlippedPreviewSpace(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)}};var Hp=[[0,0],[0,1],[1,0],[1,1]],d0=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],ke=class{constructor(t,e,i="center",r=!0,n=!1){this.considerRotation=!0;this.considerFlip=!0;this.store=e,this.m=i==="center"?ke.movePivotTo([.5,.5]):Hp,this.considerRotation=r,this.considerFlip=n,this.configStore=t.configStore}static getFlippedEdgeIndex(t,e,i){return d0[(e?1:0)+(i?2:0)][t]}static movePivotTo(t){return Hp.map(e=>[e[0]-t[0],e[1]-t[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:!1}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:!1}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(t,e,i){let r=ke.getFlippedEdgeIndex(t,e,i),n=this.m[r][0]*this.size.width,a=this.m[r][1]*this.size.height;return{width:n,height:a}}get leftTop(){let{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(0,e,i);return ke.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottom(){let{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(1,e,i);return ke.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightTop(){let{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(2,e,i);return ke.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottom(){let{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(3,e,i);return ke.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottomHandle(){let{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(1,e,i);return r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,ke.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottomHandle(){let{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(3,e,i);return r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,ke.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftMid(){let t=new y(this.leftTop),e=new y(this.leftBottom);return t.add(e).divide(2)}get rightMid(){let t=new y(this.rightTop),e=new y(this.rightBottom);return t.add(e).divide(2)}},dt=ke;dt.coordinatesWithRotation=({width:t,height:e},i,r,n,a,l)=>{let c=t*Math.cos(i)-e*Math.sin(i)+l.x,p=t*Math.sin(i)+e*Math.cos(i)+l.y;return r&&(c=a.x*2-c),n&&(p=a.y*2-p),new y({x:c,y:p}).rounded},s([d],dt.prototype,"position",1),s([d],dt.prototype,"size",1),s([d],dt.prototype,"rotation",1),s([d],dt.prototype,"flipHorizontally",1),s([d],dt.prototype,"flipVertically",1),s([d],dt.prototype,"flipCenter",1),s([d],dt.prototype,"leftTop",1),s([d],dt.prototype,"leftBottom",1),s([d],dt.prototype,"rightTop",1),s([d],dt.prototype,"rightBottom",1),s([d],dt.prototype,"leftBottomHandle",1),s([d],dt.prototype,"rightBottomHandle",1),s([d],dt.prototype,"leftMid",1),s([d],dt.prototype,"rightMid",1);var Ei=(o,t=0,e=3)=>{let i=Math.tan(t),r=Math.sqrt(i**2+1);return{x:o.x+e/r,y:o.y+e*i/r}};var Vn={blurRadius:40,gradientSize:.2},p0=b({start:{x:0,y:0},end:{x:0,y:0}},Vn),h0=b({center:{x:0,y:0},radius:0},Vn),u0=b({origin:{x:0,y:0},rotation:0,size:0},Vn),m0=Vn,$o={identifier:"identity",linear:p0,radial:h0,mirrored:u0,gaussian:m0};var Et=class{constructor(t){this.selectFocus=(t,e)=>{ft(()=>{this.state.identifier=t,e&&(this.state[t].blurRadius=e)})};this.changeBlurRadius=(t,e)=>{t!=="identity"&&(this.state[t].blurRadius=e)};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=$o.identifier,this.state.identifier!=="identity"&&(this.state[this.state.identifier].blurRadius=$o[this.state.identifier].blurRadius))};this.setLinear=({start:t,end:e})=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y,this.state.linear.end.x=e.x,this.state.linear.end.y=e.y};this.setLinearStart=t=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y};this.setLinearEnd=t=>{this.state.linear.end.x=t.x,this.state.linear.end.y=t.y};this.setRadialCenter=t=>{this.state.radial.center.x=t.x,this.state.radial.center.y=t.y};this.setRadialRadius=t=>{this.state.radial.radius=t};this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x,this.state.mirrored.origin.y=t.y};this.setMirroredRotation=t=>{this.state.mirrored.rotation=t};this.setMirroredSize=t=>{this.state.mirrored.size=t};this.getEffectProperties=()=>this.effect?this.effect.getProperties():null;this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=t=>{let e=this.getEffectProperties();if(e&&t!=="identity")switch(t){case Z.LINEAR:this.updateLinearState(e);break;case Z.RADIAL:this.updateRadialState(e);break;case Z.MIRRORED:this.updateMirroredState(e);break;default:break}};this.updateGaussianState=t=>{this.changeBlurRadius(Z.GAUSSIAN,t.blurRadius)};this.updateMirroredState=t=>{let e=this.editor.worldToPreview(t.mirrorAxisOrigin),r=new y(this.editor.worldToPreview(t.mirrorAxisDirection)).subtract(e),n=Math.atan2(r.y,r.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.setMirroredRotation(n),this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.changeBlurRadius(Z.MIRRORED,t.blurRadius)};this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center)),this.setRadialRadius(this.editor.worldToPreview(t.radius)),this.changeBlurRadius(Z.RADIAL,t.blurRadius)};this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start)),this.setLinearEnd(this.editor.worldToPreview(t.end)),this.changeBlurRadius(Z.LINEAR,t.blurRadius)};this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null;this.removeFocus=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(f.FOCUS))};this.editor=t,this.engineMediator=this.editor.engineMediator,this.state=$o}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get order(){return this.engineMediator.orderHelper.addIndex(f.FOCUS)}get imageContainer(){return this.engineMediator.image.container}};s([E],Et.prototype,"state",2),s([h],Et.prototype,"selectFocus",2),s([h],Et.prototype,"changeBlurRadius",2),s([h],Et.prototype,"reset",2),s([h],Et.prototype,"setLinear",2),s([h],Et.prototype,"setLinearStart",2),s([h],Et.prototype,"setLinearEnd",2),s([h],Et.prototype,"setRadialCenter",2),s([h],Et.prototype,"setRadialRadius",2),s([h],Et.prototype,"setMirroredOrigin",2),s([h],Et.prototype,"setMirroredRotation",2),s([h],Et.prototype,"setMirroredSize",2),s([h],Et.prototype,"updateFromEngineState",2);var Wo=class{constructor(t){this.selectFocus=t=>{if(t!==this.identifier){this.focusStore.removeFocus();let e=this.maxIntensity*.2,{width:i}=this.editor.engine.getOutputContainer().getBounds(),r=this.editor.shortestOutputSide*.2;switch(t){case Z.LINEAR:let n=this.editor.outputToWorld({x:-i/2,y:0}),a=this.editor.outputToWorld({x:i/2,y:0});this.setLinearFocus({start:n,end:a,blurRadius:e});break;case Z.RADIAL:let l=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:l,radius:r,blurRadius:e});break;case Z.MIRRORED:let c=this.editor.outputToWorld({x:0,y:0}),p=r,u=this.editor.outputToWorld(Ei({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:c,clearAreaWidth:p,blurRadius:e,mirrorAxisDirection:u});break;case Z.GAUSSIAN:this.setGaussianFocus({blurRadius:e});break;default:break}this.focusStore.selectFocus(t,e),this.editor.render(),this.addSnapshot(B.ADD,f.FOCUS)}};this.changeIntensity=t=>{let e=this.focusStore.setEffectProperties({blurRadius:t});e&&(this.focusStore.changeBlurRadius(this.identifier,e.blurRadius),this.editor.render())};this.changeRelativeIntensity=t=>{let e=(this.maxIntensity-Wo.minIntensity)*t/100+Wo.minIntensity,i=this.focusStore.setEffectProperties({blurRadius:e});i&&(this.focusStore.changeBlurRadius(this.identifier,i.blurRadius),this.editor.render())};this.toolSnapshot=t=>{this.addSnapshot(B.EDIT,t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.pureReset=()=>{this.focusStore.removeFocus(),this.focusStore.reset()};this.reset=()=>{this.pureReset(),this.editor.render(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset)};this.setStart=t=>{let e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearStart(this.editor.worldToPreview(e.start)),this.editor.render())};this.setEnd=t=>{let e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end)),this.editor.render())};this.setCenter=t=>{let e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center)),this.editor.render())};this.setRadius=t=>{let e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius)),this.editor.render())};this.setOrigin=t=>{let e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(Ei(t,this.rotation))});e&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.editor.render())};this.setSize=t=>{let e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});e&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.editor.render())};this.setRotation=t=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(Ei(this.origin,t))}),this.focusStore.setMirroredRotation(t),this.editor.render()};this.updateStateFromHistory=(t,e)=>{this.focusStore.removeFocus();let{magnitude:i}=e;ft(()=>{switch(this.focusStore.selectFocus(t.identifier),t.identifier){case Z.LINEAR:this.setLinearFocus({start:this.editor.previewToWorld(new y(t.linear.start).multiply(e)),end:this.editor.previewToWorld(new y(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case Z.GAUSSIAN:this.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case Z.RADIAL:this.setRadialFocus({center:this.editor.previewToWorld(new y(t.radial.center).multiply(e)),radius:this.editor.previewToWorld(t.radial.radius*i),blurRadius:t.radial.blurRadius});break;case Z.MIRRORED:{let r=new y(t.mirrored.origin).multiply(e);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(r),mirrorAxisDirection:this.editor.previewToWorld(Ei(r,t.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(t.mirrored.size*i),blurRadius:t.mirrored.blurRadius});break}case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=t=>D(this,null,function*(){if(Wo.doesFocusIdentifierExist(t.identifier))this.focusStore.removeFocus(),ft(()=>{switch(this.focusStore.selectFocus(t.identifier),t.identifier){case Z.LINEAR:this.setLinearFocus(t.linear);break;case Z.GAUSSIAN:this.setGaussianFocus(t.gaussian);break;case Z.RADIAL:this.setRadialFocus(t.radial);break;case Z.MIRRORED:this.setMirroredFocus({mirrorAxisOrigin:t.mirrored.origin,clearAreaWidth:t.mirrored.size,blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:Ei(t.mirrored.origin,t.mirrored.rotation)});break;default:break}});else throw new Error(`Focus identifier ${t.identifier} doesn't exist`)});this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{let t=this.editor.canvasStore.sizeVector,{linear:e}=this.focusStore.state,{radial:i}=this.focusStore.state,{mirrored:r}=this.focusStore.state,n=t,{magnitude:a}=n;return w(b({},this.focusStore.state),{linear:w(b({},e),{start:new y(e.start).divide(n),end:new y(e.end).divide(n)}),radial:w(b({},i),{center:new y(i.center).divide(n),radius:i.radius/a}),mirrored:w(b({},r),{origin:new y(r.origin).divide(n),size:r.size/a}),gaussian:b({},this.focusStore.state.gaussian)})};this.editor=t,this.focusStore=new Et(this.editor);let e=this.editor.assetProvider.getAssets("focus");this.entityManager=new pt(e,w(b({},this.config),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}static get minIntensity(){return 0}static doesFocusIdentifierExist(t){return Object.keys(Z).map(e=>Z[e]).findIndex(e=>e===t)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case Z.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case Z.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case Z.MIRRORED:let t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:z(this.state.mirrored.rotation),size:t.clearAreaWidth}};case Z.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return $o}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){let t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){let t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){let{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();return Gi({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:e})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){let{width:t,height:e}=this.editor.canvasStore.canvasSize;return Math.sqrt(t**2+e**2)*2}get identifier(){return this.state.identifier}get intensity(){return this.identifier==="identity"?$o.gaussian.blurRadius:this.state[this.identifier].blurRadius}get relativeIntensity(){let{blurRadius:t}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(t-Wo.minIntensity)*100/(this.maxIntensity-Wo.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[f.FOCUS]}get locale(){return this.editor.configStore.locale[f.FOCUS]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:t}){this.focusStore.setGaussianFocus({blurRadius:t})}setLinearFocus({start:t,end:e,blurRadius:i}){this.focusStore.setLinearFocus({start:t,end:e,blurRadius:i})}setRadialFocus({center:t,radius:e,blurRadius:i}){this.focusStore.setRadialFocus({center:t,radius:e,blurRadius:i})}setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:r}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:r})}},U=Wo;s([h],U.prototype,"selectFocus",2),s([h],U.prototype,"changeIntensity",2),s([h],U.prototype,"changeRelativeIntensity",2),s([h],U.prototype,"clickableCanvas",2),s([h],U.prototype,"pureReset",2),s([h],U.prototype,"reset",2),s([h],U.prototype,"setStart",2),s([h],U.prototype,"setEnd",2),s([h],U.prototype,"setCenter",2),s([h],U.prototype,"setRadius",2),s([h],U.prototype,"setOrigin",2),s([h],U.prototype,"setSize",2),s([h],U.prototype,"setRotation",2),s([h],U.prototype,"updateStateFromHistory",2),s([h],U.prototype,"updateStateFromSerialization",2),s([h],U.prototype,"updateCanvasControls",2),s([d],U.prototype,"state",1),s([d],U.prototype,"start",1),s([d],U.prototype,"startOnPreview",1),s([d],U.prototype,"end",1),s([d],U.prototype,"endOnPreview",1),s([d],U.prototype,"center",1),s([d],U.prototype,"radius",1),s([d],U.prototype,"origin",1),s([d],U.prototype,"rotation",1),s([d],U.prototype,"rotationOnPreview",1),s([d],U.prototype,"size",1),s([d],U.prototype,"mirroredAreaWidth",1),s([d],U.prototype,"identifier",1),s([d],U.prototype,"intensity",1),s([d],U.prototype,"relativeIntensity",1),s([d],U.prototype,"maxIntensity",1),s([d],U.prototype,"isOptionSelected",1),s([d],U.prototype,"config",1),s([d],U.prototype,"locale",1),s([d],U.prototype,"items",1);import{useContext as f0}from"react";function ut(){return f0(or)}import g0 from"styled-components";var Qa=g0.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
`;import b0,{css as _p}from"styled-components";var $p=b0.div.attrs(()=>({"data-test":M.MainCanvasActionBar}))`
  &&& {
    display: ${o=>o.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${o=>o.theme.measurements.mainCanvasActionBar.height}px;
    color: ${o=>o.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${o=>o.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${o=>o.theme.measurements.zIndex.canvas.bar};
    background: ${o=>o.transparentBackgound?"transparent":o.theme.mainCanvasActionBar.background};
    ${o=>o.bottom?_p`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:_p`
            justify-content: space-between;
          `}
  }
`;import y0 from"styled-components";var Wp=y0.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import v0 from"styled-components";var Vp=v0.div.attrs({role:"main"})`
  background-color: ${o=>o.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${o=>o.theme.measurements.canvas.marginTop}px;
`;import x0 from"styled-components";var Np=x0.div.attrs(({height:o,width:t})=>({style:{height:`${o}px`,width:`${t}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${o=>o.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`;import S0 from"styled-components";var Up=S0.div.attrs(({radius:o})=>({style:{height:`${o*2}px`,width:`${o*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${o=>o.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`;import C0 from"styled-components";var Gp=C0.div`
  position: relative;
  height: inherit;
  width: inherit;
`;import jp,{css as mt}from"styled-components";var w0=jp.div(o=>{let{desktop:t,mobile:e}=o.theme.measurements.canvasControls.corner.touchable,i=t/4,r=e/2;return mt`
    position: absolute;
    width: ${t}px;
    height: ${t}px;
    ${n=>n.vertical==="top"?mt`
            top: 0px;
          `:mt`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?mt`
            left: 0px;
          `:mt`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?mt`
            margin-top: -${i}px;
          `:mt`
            margin-bottom: -${i}px;
          `}
  ${n=>n.horizontal==="left"?mt`
            margin-left: -${i}px;
          `:mt`
            margin-right: -${i}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${e}px;
      height: ${e}px;
      ${n=>n.vertical==="top"?mt`
              margin-top: -${r}px;
            `:mt`
              margin-bottom: -${r}px;
            `}
      ${n=>n.horizontal==="left"?mt`
              margin-left: -${r}px;
            `:mt`
              margin-right: -${r}px;
            `}
    }
  `}),Nn=jp(w0)(o=>{let t=o.horizontal==="right"?o.borderWidth:0,e=o.vertical==="bottom"?o.borderWidth:0,i=o.horizontal==="left"?o.borderWidth:0,n=`${o.vertical==="top"?o.borderWidth:0}px ${t}px ${e}px ${i}px`,a=o.horizontal==="left"&&o.vertical==="bottom"||o.horizontal==="right"&&o.vertical==="top"?"nesw-resize":"nwse-resize",l=o.theme.measurements.canvasControls.corner.touchable.desktop/4-o.borderWidth,c=o.theme.measurements.canvasControls.corner.touchable.mobile/4+o.borderWidth;return mt`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${p=>p.theme.measurements.canvasControls.corner.size}px;
      height: ${p=>p.theme.measurements.canvasControls.corner.size}px;
      z-index: ${p=>p.theme.measurements.zIndex.canvas.controls};
      border-color: ${p=>p.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${o.vertical==="top"?mt`
            top: ${l}px;
          `:mt`
            bottom: ${l}px;
          `}
      ${o.horizontal==="left"?mt`
            left: ${l}px;
          `:mt`
            right: ${l}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${o.vertical==="top"?mt`
              margin-top: ${c}px;
            `:mt`
              margin-bottom: ${c}px;
            `}
        ${o.horizontal==="left"?mt`
              margin-left: ${c}px;
            `:mt`
              margin-right: ${c}px;
            `}
      }
    }
    cursor: ${a};
    pointer-events: none;
  `});import k0 from"styled-components";var Xp=k0.div.attrs(()=>({"data-test":M.Knob}))`
  position: absolute;
  height: ${o=>o.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${o=>o.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${o=>o.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${o=>o.theme.measurements.canvasControls.knob.size}px;
    height: ${o=>o.theme.measurements.canvasControls.knob.size}px;
    top: ${o=>o.theme.measurements.canvasControls.knob.size/4}px;
    left: ${o=>o.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`;import T0 from"styled-components";var Yp=T0.div`
  position: absolute;
  color: ${o=>o.theme.canvas.controlsOutline};
`;import M0 from"styled-components";var Kp=M0.div.attrs(o=>({style:{left:`${o.x}px`}}))`
  position: absolute;
  bottom: -${o=>o.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${o=>o.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${o=>o.theme.canvas.controlsOutline};
`;import I0 from"styled-components";var qp=I0.div.attrs(({height:o,width:t,theme:e})=>({style:{height:`${o+e.measurements.canvasControls.sprite.controlPadding}px`,width:`${t+e.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${o=>o.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${o=>o.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${o=>o.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`;import D0 from"styled-components";var Zp=D0.div.attrs(()=>({"data-test":M.TextWidth}))`
  position: absolute;
  height: ${o=>o.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.controls};
  background: ${o=>o.theme.canvas.controlsColor};
  cursor: pointer;
`;import E0 from"styled-components";var Jp=E0.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${o=>o.height}px;
  width: ${o=>o.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`;import Un,{css as Qp}from"styled-components";var Gn=Vl()?Qp`
      transition: unset;
    `:Qp`
      transition: all 0.4s ease-in-out;
    `,th=Un.div`
  position: absolute;
  background: ${o=>o.theme.canvas.cropBackdrop};
  z-index: ${o=>o.theme.measurements.zIndex.canvas.crop.backdrop};
  ${Gn}
`,eh=Un.div.attrs({"data-test":M.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${o=>o.theme.canvas.controlsOutline};
  cursor: move;
  ${Gn}
`,oh=Un.div`
  position: absolute;
  background: ${o=>o.theme.canvas.controlsOutline};
  z-index: ${o=>o.theme.measurements.zIndex.canvas.crop.grid};
  ${Gn}
`,Vo=Un(Nn)`
  z-index: ${o=>o.theme.measurements.zIndex.canvas.controls};
  ${Gn};
`;import P0 from"styled-components";var ih=P0.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import z0 from"styled-components";var rh=z0.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;import A0 from"styled-components";var nh=A0.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${o=>o.theme.webcam.background};
`;var A={Index:Wp,Area:Qa,Bar:{Index:$p,ButtonGroup:vp},Button:{TextSecondary:bp,Float:Cp},Container:Vp,Element:ih,Wrapper:nh,Webcam:rh,Controls:{Knob:Xp,Circle:Up,Corner:Nn,Line:Yp,Area:Np,Sprite:qp,RotateHandle:Kp,Container:Gp,Wrapper:Jp,SpriteActionsWrapper:Ia,SpriteActionButton:On,Width:Zp},Crop:{Mask:eh,GridLine:oh,Backdrop:th,Control:Vo}};var sh=class{constructor(t={},e={}){this.getAdvancedCategoryCard=()=>this.components.advancedUICategoryCard;this.getAdvancedItemCard=()=>this.components.advancedUIItemCard;this.getAdvancedToolbarItem=()=>this.components.advancedUIToolbarItem;this.getDialog=()=>this.components.dialog;this.getButton=t=>this.components.buttons[t];this.getColorItem=()=>this.components.colorItem;this.getCheckbox=()=>this.components.checkbox;let i={dialog:F.Dialog,colorItem:F.ColorItem,checkbox:F.Input.Checkbox,buttons:{mainCanvasActionUndo:A.Button.TextSecondary,mainCanvasActionRedo:A.Button.TextSecondary,mainCanvasActionExport:Es,mainCanvasActionClose:hi,canvasActionEdit:A.Controls.SpriteActionButton,canvasActionBringToFront:A.Controls.SpriteActionButton,canvasActionDuplicate:A.Controls.SpriteActionButton,canvasActionDelete:A.Controls.SpriteActionButton,canvasActionInvert:A.Controls.SpriteActionButton,canvasActionFlip:A.Controls.SpriteActionButton,transformActionFlipHorizontal:Eo,transformActionFlipVertical:Eo,transformActionRotateClockwise:Eo,transformActionRotateAntiClockwise:Eo,textAlignment:Eo,toolControlBarPrimaryButton:Ds,toolControlBarSecondaryButton:hi}};this.components=Zt([i,e,t])}};import ee from"react";import jy from"styled-components";import Je from"react";var O0=()=>Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Je.createElement("defs",null,Je.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),Je.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Je.createElement("path",{d:"M0 0H48V48H0z"}),Je.createElement("mask",{fill:"currentColor"},Je.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),Je.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"}))),ah=O0;import No from"react";var L0=()=>No.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},No.createElement("defs",null,No.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),No.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},No.createElement("mask",null,No.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),No.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"}))),lh=L0;import Qe from"react";var B0=()=>Qe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Qe.createElement("defs",null,Qe.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),Qe.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qe.createElement("path",{d:"M0 0H48V48H0z"}),Qe.createElement("mask",{fill:"currentColor"},Qe.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),Qe.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"}))),ch=B0;import to from"react";var F0=()=>to.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},to.createElement("defs",null,to.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),to.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},to.createElement("path",{d:"M0 0H48V48H0z"}),to.createElement("mask",{fill:"currentColor"},to.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),to.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"}))),dh=F0;import eo from"react";var R0=()=>eo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},eo.createElement("defs",null,eo.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),eo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},eo.createElement("path",{d:"M0 0H48V48H0z"}),eo.createElement("mask",{fill:"currentColor"},eo.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),eo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"}))),ph=R0;import oo from"react";var H0=()=>oo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},oo.createElement("defs",null,oo.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),oo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},oo.createElement("path",{d:"M0 0H48V48H0z"}),oo.createElement("mask",{fill:"#fff"},oo.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),oo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"}))),hh=H0;import io from"react";var _0=()=>io.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},io.createElement("defs",null,io.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),io.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},io.createElement("path",{d:"M0 0H48V48H0z"}),io.createElement("mask",{fill:"currentColor"},io.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),io.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"}))),uh=_0;import ro from"react";var $0=()=>ro.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ro.createElement("defs",null,ro.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),ro.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ro.createElement("path",{d:"M0 0H48V48H0z"}),ro.createElement("mask",{fill:"currentColor"},ro.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),ro.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"}))),mh=$0;import no from"react";var W0=()=>no.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},no.createElement("defs",null,no.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),no.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},no.createElement("path",{d:"M0 0H48V48H0z"}),no.createElement("mask",{fill:"currentColor"},no.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),no.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"}))),fh=W0;import so from"react";var V0=()=>so.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},so.createElement("defs",null,so.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),so.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},so.createElement("path",{d:"M0 0H48V48H0z"}),so.createElement("mask",{fill:"currentColor"},so.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),so.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"}))),gh=V0;import ao from"react";var N0=()=>ao.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ao.createElement("defs",null,ao.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),ao.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ao.createElement("path",{d:"M0 0H48V48H0z"}),ao.createElement("mask",{fill:"currentColor"},ao.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),ao.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"}))),bh=N0;import lo from"react";var U0=()=>lo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},lo.createElement("defs",null,lo.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),lo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},lo.createElement("path",{d:"M0 0H48V48H0z"}),lo.createElement("mask",{fill:"currentColor"},lo.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),lo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"}))),yh=U0;import Uo from"react";var G0=()=>Uo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Uo.createElement("defs",null,Uo.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Uo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Uo.createElement("mask",{fill:"currentColor"},Uo.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Uo.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"}))),vh=G0;import Go from"react";function j0(){return Go.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Go.createElement("defs",null,Go.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Go.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Go.createElement("mask",{fill:"#fff"},Go.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Go.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var xh=j0;import jo from"react";var X0=()=>jo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},jo.createElement("defs",null,jo.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),jo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jo.createElement("mask",{fill:"currentColor"},jo.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),jo.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"}))),Sh=X0;import Xo from"react";var Y0=()=>Xo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Xo.createElement("defs",null,Xo.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Xo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Xo.createElement("mask",{fill:"currentColor"},Xo.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),Xo.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"}))),Ch=Y0;import Yo from"react";function K0(){return Yo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Yo.createElement("defs",null,Yo.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Yo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Yo.createElement("mask",{fill:"#fff"},Yo.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Yo.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var wh=K0;import Ko from"react";var q0=()=>Ko.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},Ko.createElement("defs",null,Ko.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Ko.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ko.createElement("mask",{fill:"#fff"},Ko.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),Ko.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"}))),kh=q0;import co from"react";function Z0(){return co.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},co.createElement("defs",null,co.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),co.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},co.createElement("path",{d:"M0 0H48V48H0z"}),co.createElement("mask",{fill:"#fff"},co.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),co.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var Th=Z0;import Pt from"react";var J0=()=>Pt.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Pt.createElement("g",{fill:"none",fillRule:"evenodd"},Pt.createElement("g",null,Pt.createElement("g",{fill:"#D8D8D8",opacity:"0"},Pt.createElement("rect",{width:"48",height:"48"})),Pt.createElement("g",{transform:"translate(12 12)"},Pt.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),Pt.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},Pt.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),Pt.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),Pt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),Pt.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},Pt.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),Pt.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},Pt.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),Pt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})))))),Mh=J0;import qo from"react";function Q0(){return qo.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},qo.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},qo.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),qo.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),qo.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),qo.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),qo.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var Ih=Q0;import Te from"react";var ty=()=>Te.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Te.createElement("g",{fill:"none",fillRule:"evenodd"},Te.createElement("g",null,Te.createElement("g",{fill:"#D8D8D8",opacity:"0"},Te.createElement("rect",{width:"48",height:"48"})),Te.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},Te.createElement("g",null,Te.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),Te.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),Te.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"})))))),Dh=ty;import pe from"react";var ey=()=>pe.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},pe.createElement("g",{fill:"none",fillRule:"evenodd"},pe.createElement("g",null,pe.createElement("g",{fill:"#D8D8D8",opacity:"0"},pe.createElement("rect",{width:"48",height:"48"})),pe.createElement("g",{transform:"translate(12 12)"},pe.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),pe.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},pe.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),pe.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),pe.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"})))))),Eh=ey;import Pi from"react";var oy=()=>Pi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},Pi.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Pi.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),Pi.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),Pi.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),Pi.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"}))),Ph=oy;import Qt from"react";var iy=()=>Qt.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Qt.createElement("g",{fill:"none",fillRule:"evenodd"},Qt.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},Qt.createElement("g",null,Qt.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),Qt.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),Qt.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),Qt.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),Qt.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),Qt.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},Qt.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),Qt.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"})))))),zh=iy;import vr from"react";var ry=()=>vr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},vr.createElement("g",{fill:"none",fillRule:"evenodd"},vr.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},vr.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),vr.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"})))),Ah=ry;import $e from"react";var ny=()=>$e.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},$e.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},$e.createElement("g",null,$e.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},$e.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},$e.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),$e.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),$e.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),$e.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"}))))),Oh=ny;import xr from"react";var sy=()=>xr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},xr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},xr.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),xr.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),xr.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"}))),Lh=sy;import Sr from"react";var ay=()=>Sr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Sr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Sr.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),Sr.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),Sr.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"}))),Bh=ay;import Zo from"react";function ly(){return Zo.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Zo.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Zo.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),Zo.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),Zo.createElement("g",{fillOpacity:"0.2"},Zo.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),Zo.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var Fh=ly;import Jo from"react";var cy=()=>Jo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jo.createElement("defs",null,Jo.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),Jo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jo.createElement("mask",{fill:"currentColor"},Jo.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),Jo.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"}))),Rh=cy;import Hh from"react";var dy=()=>Hh.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Hh.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"})),_h=dy;import $h from"react";var py=()=>$h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},$h.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"})),Wh=py;import Qo from"react";function hy(){return Qo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Qo.createElement("defs",null,Qo.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),Qo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qo.createElement("mask",{fill:"currentColor"},Qo.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),Qo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var Vh=hy;import ti from"react";var uy=()=>ti.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ti.createElement("defs",null,ti.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),ti.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ti.createElement("mask",{fill:"currentColor"},ti.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),ti.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"}))),Nh=uy;import po from"react";var my=()=>po.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},po.createElement("defs",null,po.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),po.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},po.createElement("path",{d:"M0 0H24V24H0z"}),po.createElement("mask",{fill:"currentColor"},po.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),po.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"}))),Uh=my;import xt from"react";var fy=({highlight:o="currentColor",width:t=48,height:e=48})=>xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},xt.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},xt.createElement("g",{fill:o,transform:"translate(13 13)"},xt.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),xt.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),xt.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),xt.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),xt.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),xt.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),xt.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),xt.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),xt.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),xt.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),xt.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),xt.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),xt.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),xt.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),xt.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),xt.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"})))),Gh=fy;import tl from"react";var gy=({highlight:o="currentColor",width:t=48,height:e=48})=>tl.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},tl.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},tl.createElement("path",{fill:o,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"}))),jh=gy;import zi from"react";var by=({highlight:o="currentColor",width:t=48,height:e=48})=>zi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},zi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},zi.createElement("g",{fill:o,transform:"translate(13 13)"},zi.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),zi.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),zi.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"})))),Xh=by;import el from"react";var yy=({highlight:o="currentColor",width:t=48,height:e=48})=>el.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},el.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},el.createElement("path",{fill:o,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"}))),Yh=yy;import vy from"styled-components";var xy=vy.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``,Gt=xy;import ot from"react";var Sy=({highlight:o="#565656",width:t=32,height:e=32})=>ot.createElement(Gt,{width:t,height:e,viewBox:"0 0 32 32"},ot.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ot.createElement("g",{fill:o,transform:"translate(-8 -8)"},ot.createElement("g",{transform:"translate(8 8)"},ot.createElement("g",null,ot.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),ot.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),ot.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),ot.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),ot.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),ot.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),ot.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),ot.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),ot.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),ot.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),ot.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),ot.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),ot.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),ot.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),ot.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),ot.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),ot.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),ot.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),ot.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),ot.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),ot.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),ot.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),ot.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),ot.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"})))))),Kh=Sy;import jn from"react";var Cy=({highlight:o="#565656",width:t=32,height:e=48})=>jn.createElement(Gt,{width:t,height:e,viewBox:"0 0 42 32"},jn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jn.createElement("g",{fill:o,transform:"translate(-3 -8)"},jn.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"})))),qh=Cy;import Xn from"react";var wy=({highlight:o="#565656",width:t=26,height:e=46})=>Xn.createElement(Gt,{width:t,height:e,viewBox:"0 0 26 46"},Xn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Xn.createElement("g",{fill:o,transform:"translate(-11 -1)"},Xn.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"})))),Zh=wy;import Yn from"react";var ky=({highlight:o="#565656",width:t=26,height:e=46})=>Yn.createElement(Gt,{width:t,height:e,viewBox:"0 0 26 46"},Yn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Yn.createElement("g",{fill:o,transform:"translate(-11 -1)"},Yn.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"})))),Jh=ky;import We from"react";var Ty=({highlight:o="#565656",mask:t="#fff",width:e=32,height:i=32})=>We.createElement(Gt,{width:e,height:i,viewBox:"0 0 32 32"},We.createElement("defs",null,We.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),We.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},We.createElement("g",{transform:"translate(-8 -8)"},We.createElement("g",{transform:"translate(7.08 7.293)"},We.createElement("mask",{fill:t},We.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),We.createElement("use",{fill:o,xlinkHref:"#photoeditorsdk-square-icon"}))))),Qh=Ty;import Kn from"react";var My=({highlight:o="#565656",width:t=32,height:e=42})=>Kn.createElement(Gt,{width:t,height:e,viewBox:"0 0 32 42"},Kn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Kn.createElement("g",{fill:o,transform:"translate(-8 -3)"},Kn.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"})))),tu=My;import Ve from"react";var Iy=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Ve.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ve.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Ve.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),Ve.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Ve.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Ve.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:o,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),Ve.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:o,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Ve.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:o,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}))),eu=Iy;import Ne from"react";var Dy=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Ne.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ne.createElement("g",null,Ne.createElement("path",{fill:o,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Ne.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:o,rx:"1"}),Ne.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:o,rx:"1"}),Ne.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:o,rx:"1"}),Ne.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}),Ne.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:o,rx:"1"})))),ou=Dy;import Ue from"react";var Ey=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Ue.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ue.createElement("g",{transform:"translate(5 5)"},Ue.createElement("path",{fill:t,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),Ue.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:o,rx:"1"}),Ue.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:o,rx:"1"}),Ue.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:o,rx:"1"}),Ue.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:o,rx:"1"}),Ue.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:o,rx:"1"})))),iu=Ey;import ho from"react";var Py=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>ho.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},ho.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ho.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:o,rx:"1"}),ho.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:o,rx:"1"}),ho.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:o,rx:"1"}),ho.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:o,rx:"1"}),ho.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:o,rx:"1"}),ho.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:t,rx:"1"}))),ru=Py;import uo from"react";var zy=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>uo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},uo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},uo.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:o,rx:"1"}),uo.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:t,rx:"1"}),uo.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:o,rx:"1"}),uo.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:o,rx:"1"}),uo.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:o,rx:"1"}),uo.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:o,rx:"1"}))),nu=zy;import mo from"react";var Ay=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>mo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},mo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},mo.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:o,rx:"1"}),mo.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:t,rx:"1"}),mo.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:o,rx:"1"}),mo.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:o,rx:"1"}),mo.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:o,rx:"1"}),mo.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:o,rx:"1"}))),su=Ay;import qn from"react";var Oy=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>qn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},qn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},qn.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:t,rx:"1.5"}),qn.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:o,rx:"1"}))),au=Oy;import Ft from"react";var Ly=({main:o="#424242",highlight:t="#565656",shadow:e="#333333",width:i="48px",height:r="48px"})=>Ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},Ft.createElement("defs",null,Ft.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},Ft.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),Ft.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ft.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:o,rx:"0.5"}),Ft.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:o,rx:"0.5"}),Ft.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:o,rx:"0.5"}),Ft.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:o,rx:"0.5"}),Ft.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),Ft.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:o,rx:"0.5"}),Ft.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:o,rx:"0.5"}),Ft.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:e,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),Ft.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:o,rx:"1"}))),lu=Ly;import Me from"react";var By=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Me.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Me.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:o,rx:"0.5"}),Me.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}))),cu=By;import Ie from"react";var Fy=({main:o="#424242",highlight:t="#565656",width:e="48px",height:i="48px"})=>Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},Ie.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ie.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),Ie.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:o,rx:"0.5"}),Ie.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:o,rx:"1"}))),du=Fy;import ei from"react";var Ry=()=>ei.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ei.createElement("defs",null,ei.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),ei.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ei.createElement("mask",{fill:"currentColor"},ei.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),ei.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"}))),pu=Ry;import te from"react";var Hy=({height:o=3,width:t=102,x:e=-102,className:i,style:r})=>te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:o,viewBox:"0 0 102 3",className:i,style:r},te.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},te.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),te.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),te.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-t*1.5,y:"0",width:t*4,height:"3",transform:`translate(${e}, 0)`})),hu=Hy;import oi from"react";var _y=()=>oi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},oi.createElement("defs",null,oi.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),oi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},oi.createElement("mask",{fill:"currentColor"},oi.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),oi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"}))),uu=_y;import mu from"react";var $y=()=>mu.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},mu.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"})),fu=$y;import fo from"react";var Wy=({className:o})=>fo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:o},fo.createElement("title",null,"Flip Horizontal"),fo.createElement("defs",null,fo.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),fo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},fo.createElement("mask",{fill:"none"},fo.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),fo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"}))),gu=Wy;import go from"react";var Vy=({className:o})=>go.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:o},go.createElement("title",null,"Flip Vertical"),go.createElement("defs",null,go.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),go.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},go.createElement("mask",{fill:"none"},go.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),go.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"}))),bu=Vy;import bo from"react";var Ny=({alt:o="Rotate",className:t})=>bo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:t},bo.createElement("title",null,o),bo.createElement("defs",null,bo.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),bo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},bo.createElement("mask",{fill:"none"},bo.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),bo.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"}))),yu=Ny;var pF={[f.ADJUSTMENT]:Mh,[f.FILTER]:Dh,[f.LIBRARY]:zh,[f.OVERLAY]:Ah,[f.FOCUS]:Eh,[f.STICKER]:Oh,[f.TEXT]:Lh,[f.TEXT_DESIGN]:Bh,[f.FRAME]:Ph,[f.TRANSFORM]:Fh,[f.BRUSH]:Ih},hF={left:kh,right:Th,center:wh},uF={addText:Rh,openWebcam:_h,reset:Wh,shuffle:Vh,uploadImage:Nh},Cr={undo:Ch,redo:Sh,close:vh,export:xh},ct={categories:{[gt.CommonCategory]:Gh,[gt.FacebookCategory]:jh,[gt.TwitterCategory]:Yh,[gt.InstagramCategory]:Xh},crops:{[gt.Custom]:Kh,[gt.Square]:Qh,[gt.ThreeByFour]:tu,[gt.FourByThree]:qh,[gt.NineBySixteen]:Zh,[gt.SixteenByNine]:Jh,[gt.FacebookPost]:eu,[gt.FacebookProfile]:ou,[gt.FacebookTitle]:iu,[gt.InstagramLandscape]:ru,[gt.InstagramPortrait]:nu,[gt.InstagramSquare]:su,[gt.InstagramStory]:au,[gt.TwitterPost]:lu,[gt.TwitterProfile]:cu,[gt.TwitterTitle]:du},dots:hu,duplicate:uu,edit:fu,bringToFront:Uh,delete:pu,flipHorizontal:gu,flipVertical:bu,rotate:yu},mF={[nt.BRIGHTNESS]:lh,[nt.CONTRAST]:dh,[nt.SATURATION]:mh,[nt.CLARITY]:ch,[nt.SHADOWS]:fh,[nt.HIGHLIGHTS]:uh,[nt.EXPOSURE]:ph,[nt.GAMMA]:hh,[nt.BLACKS]:ah,[nt.WHITES]:yh,[nt.TEMPERATURE]:bh,[nt.SHARPNESS]:gh};import Zn from"react";import Uy from"styled-components";var vu=A.Button.TextSecondary,xu=Uy.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${o=>o.theme.canvasActionBar.foreground};
  letter-spacing: ${o=>o.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`,Gy=({scale:o,active:t})=>{let{canZoomIn:e}=o,{canZoomOut:i}=o,{zoomLevel:r}=o;return[f.TRANSFORM,f.BRUSH,f.FOCUS,f.STICKER,f.TEXT,f.TEXT_DESIGN].indexOf(t.tool)!==-1?null:Zn.createElement(A.Bar.ButtonGroup,null,Zn.createElement(vu,{"data-test":M.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!i,onClick:o.out},"-"),Zn.createElement(xu,{"data-test":M.ZoomLevel},r," %"),Zn.createElement(vu,{ariaLabel:"Zoom in",isDisabled:!e,onClick:o.in},"+"))},Su=_("scale","active")(O(Gy));xu.defaultProps={theme:$t};var Cu=jy(A.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`,Xy=({config:o,editor:t,history:e,custom:i})=>{let r=o.locale.mainCanvasActions,{canUndo:n}=e,{canRedo:a}=e,l=o.config.mainCanvasActions,c=()=>{t.export()},p=()=>{if(t.activeStore.tool===f.TRANSFORM)return null;let S=i.getButton("mainCanvasActionUndo");return ee.createElement(S,{key:"mainCanvasActionUndo","data-test":M.MainBarButtonUndo,onClick:e.undo,isDisabled:!n,label:r.buttonUndo,ariaLabel:r.buttonUndo,icon:ee.createElement(Cr.undo,null)})},u=()=>{if(t.activeStore.tool===f.TRANSFORM)return null;let S=i.getButton("mainCanvasActionRedo");return ee.createElement(S,{key:"mainCanvasActionRedo","data-test":M.MainBarButtonRedo,onClick:e.redo,isDisabled:!a,label:r.buttonRedo,ariaLabel:r.buttonRedo,icon:ee.createElement(Cr.redo,null)})},m=()=>{let S=i.getButton("mainCanvasActionExport");return ee.createElement(S,{key:"mainCanvasActionExport","data-test":M.MainBarButtonExport,onClick:c,label:r.buttonExport,ariaLabel:r.buttonExport,icon:ee.createElement(Cr.export,null)})},g=()=>{if(!o.displayCloseButton)return null;let S=i.getButton("mainCanvasActionClose");return ee.createElement(S,{key:"mainCanvasActionClose","data-test":M.MainBarButtonClose,onClick:t.close,label:r.buttonClose,ariaLabel:r.buttonClose,icon:ee.createElement(Cr.close,null)})},x=l.map(S=>{switch(S){case rt.UNDO:return p;case rt.REDO:return u;case rt.EXPORT:return m;case rt.CLOSE:return g;default:return null}});return ee.createElement(A.Bar.Index,null,ee.createElement(Cu,null,x[0]&&x[0]()||null,x[1]&&x[1]()||null),o.config.enableZoom?ee.createElement(Su,null):null,ee.createElement(Cu,null,x[2]&&x[2]()||null,x[3]&&x[3]()||null))},Yy=_("config","editor","history","custom")(O(Xy));import Wu from"react";import Tr from"react";import Hv from"styled-components";function Ky(o){return typeof o=="string"&&o.includes("%")}function qy(o){return typeof o=="string"&&o.includes(".")&&parseFloat(o)===1}function St(o,t){qy(o)&&(o="100%");let e=Ky(o);return o=t===360?o:Math.min(t,Math.max(0,parseFloat(o))),e&&(o=parseInt(String(o*t),10)/100),Math.abs(o-t)<1e-6?1:(t===360?o=(o<0?o%t+t:o%t)/parseFloat(String(t)):o=o%t/parseFloat(String(t)),o)}function Jn(o){return o=parseFloat(o),(Number.isNaN(o)||o<0||o>1)&&(o=1),o}function wr(o){return o<=1?`${Number(o)*100}%`:o}function yo(o){return o.length===1?`0${o}`:String(o)}function ol(o,t,e){return{r:St(o,255)*255,g:St(t,255)*255,b:St(e,255)*255}}function il(o,t,e){o=St(o,255),t=St(t,255),e=St(e,255);let i=Math.max(o,t,e),r=Math.min(o,t,e),n=0,a=0,l=(i+r)/2;if(i===r)a=0,n=0;else{let c=i-r;switch(a=l>.5?c/(2-i-r):c/(i+r),i){case o:n=(t-e)/c+(t<e?6:0);break;case t:n=(e-o)/c+2;break;case e:n=(o-t)/c+4;break;default:break}n/=6}return{h:n,s:a,l}}function wu(o,t,e){let i,r,n;o=St(o,360),t=St(t,100),e=St(e,100);function a(l,c,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?l+(c-l)*(6*p):p<1/2?c:p<2/3?l+(c-l)*(2/3-p)*6:l}if(t===0)r=e,n=e,i=e;else{let l=e<.5?e*(1+t):e+t-e*t,c=2*e-l;i=a(c,l,o+1/3),r=a(c,l,o),n=a(c,l,o-1/3)}return{r:i*255,g:r*255,b:n*255}}function rl(o,t,e){o=St(o,255),t=St(t,255),e=St(e,255);let i=Math.max(o,t,e),r=Math.min(o,t,e),n=0,a=i,l=i-r,c=i===0?0:l/i;if(i===r)n=0;else{switch(i){case o:n=(t-e)/l+(t<e?6:0);break;case t:n=(e-o)/l+2;break;case e:n=(o-t)/l+4;break;default:break}n/=6}return{h:n,s:c,v:a}}function ku(o,t,e){o=St(o,360)*6,t=St(t,100),e=St(e,100);let i=Math.floor(o),r=o-i,n=e*(1-t),a=e*(1-r*t),l=e*(1-(1-r)*t),c=i%6,p=[e,a,n,n,l,e][c],u=[l,e,e,a,n,n][c],m=[n,n,l,e,e,a][c];return{r:p*255,g:u*255,b:m*255}}function nl(o,t,e,i){let r=[yo(Math.round(o).toString(16)),yo(Math.round(t).toString(16)),yo(Math.round(e).toString(16))];return i&&r[0].charAt(0)===r[0].charAt(1)&&r[1].charAt(0)===r[1].charAt(1)&&r[2].charAt(0)===r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Zy(o){return Math.round(parseFloat(o)*255).toString(16)}function Rt(o){return parseInt(o,16)}function sl(o){return Rt(o)/255}function Tu(o,t,e,i,r){let n=[yo(Math.round(o).toString(16)),yo(Math.round(t).toString(16)),yo(Math.round(e).toString(16)),yo(Zy(i))];return r&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}var Ai={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Jy="[-\\+]?\\d+%?",Qy="[-\\+]?\\d*\\.\\d+%?",vo=`(?:${Qy})|(?:${Jy})`,al=`[\\s|\\(]+(${vo})[,|\\s]+(${vo})[,|\\s]+(${vo})\\s*\\)?`,ll=`[\\s|\\(]+(${vo})[,|\\s]+(${vo})[,|\\s]+(${vo})[,|\\s]+(${vo})\\s*\\)?`,he={CSS_UNIT:new RegExp(vo),rgb:new RegExp(`rgb${al}`),rgba:new RegExp(`rgba${ll}`),hsl:new RegExp(`hsl${al}`),hsla:new RegExp(`hsla${ll}`),hsv:new RegExp(`hsv${al}`),hsva:new RegExp(`hsva${ll}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function oe(o){return Boolean(he.CSS_UNIT.exec(String(o)))}function tv(o){if(o=o.trim().toLowerCase(),o.length===0)return!1;let t=!1;if(Ai[o])o=Ai[o],t=!0;else if(o==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let e=he.rgb.exec(o);return e?{r:e[1],g:e[2],b:e[3]}:(e=he.rgba.exec(o),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=he.hsl.exec(o),e?{h:e[1],s:e[2],l:e[3]}:(e=he.hsla.exec(o),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=he.hsv.exec(o),e?{h:e[1],s:e[2],v:e[3]}:(e=he.hsva.exec(o),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=he.hex8.exec(o),e?{r:Rt(e[1]),g:Rt(e[2]),b:Rt(e[3]),a:sl(e[4]),format:t?"name":"hex8"}:(e=he.hex6.exec(o),e?{r:Rt(e[1]),g:Rt(e[2]),b:Rt(e[3]),format:t?"name":"hex"}:(e=he.hex4.exec(o),e?{r:Rt(e[1]+e[1]),g:Rt(e[2]+e[2]),b:Rt(e[3]+e[3]),a:sl(e[4]+e[4]),format:t?"name":"hex8"}:(e=he.hex3.exec(o),e?{r:Rt(e[1]+e[1]),g:Rt(e[2]+e[2]),b:Rt(e[3]+e[3]),format:t?"name":"hex"}:!1)))))))))}function Mu(o){let t={r:0,g:0,b:0},e=1,i=null,r=null,n=null,a=!1,l=!1;if(typeof o=="string"&&(o=tv(o)),Array.isArray(o)){let[c,p,u]=o;oe(c)&&oe(p)&&oe(u)&&(t=ol(c*255,p*255,u*255),a=!0,l="rgb"),o.length===4&&(e=o[3])}return typeof o=="object"&&(oe(o.r)&&oe(o.g)&&oe(o.b)?(t=ol(o.r,o.g,o.b),a=!0,l=String(o.r).substr(-1)==="%"?"prgb":"rgb"):oe(o.h)&&oe(o.s)&&oe(o.v)?(i=wr(o.s),r=wr(o.v),t=ku(o.h,i,r),a=!0,l="hsv"):oe(o.h)&&oe(o.s)&&oe(o.l)&&(i=wr(o.s),n=wr(o.l),t=wu(o.h,i,n),a=!0,l="hsl"),Object.prototype.hasOwnProperty.call(o,"a")&&(e=o.a)),e=Jn(e),{ok:a,format:o.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var jt=class{constructor(t="",e={}){if(t instanceof jt)return t;this.originalInput=t;let i=Mu(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=e.format||i.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}getAlpha(){return this.a}setAlpha(t){return this.a=Jn(t),this.roundA=Math.round(100*this.a)/100,this}toHsv(){let t=rl(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){let t=rl(this.r,this.g,this.b),e=Math.round(t.h*360),i=Math.round(t.s*100),r=Math.round(t.v*100);return this.a===1?`hsv(${e}, ${i}%, ${r}%)`:`hsva(${e}, ${i}%, ${r}%, ${this.roundA})`}toHsl(){let t=il(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){let t=il(this.r,this.g,this.b),e=Math.round(t.h*360),i=Math.round(t.s*100),r=Math.round(t.l*100);return this.a===1?`hsl(${e}, ${i}%, ${r}%)`:`hsla(${e}, ${i}%, ${r}%, ${this.roundA})`}toHex(t=!1){return nl(this.r,this.g,this.b,t)}toHexString(t=!1){return`#${this.toHex(t)}`}toHex8(t=!1){return Tu(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return`#${this.toHex8(t)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){let t=Math.round(this.r),e=Math.round(this.g),i=Math.round(this.b);return`rgba(${t}, ${e}, ${i}, ${this.roundA})`}toPercentageRgb(){let t=e=>`${Math.round(St(e,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){let t=e=>Math.round(St(e,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;let t=`#${nl(this.r,this.g,this.b,!1)}`;for(let e of Object.keys(Ai))if(Ai[e]===t)return e;return!1}toString(t){let e=Boolean(t);t=t||this.format;let i=this.a<1&&this.a>=0;if(!e&&i&&t&&(t.startsWith("hex")||t==="name"))return t==="name"&&this.a===0?this.toName():this.toRgbString();switch(t){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(!0);case"hex4":return this.toHex8String(!0);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new jt(this.toString())}};import Ct from"react";import Li,{css as Hu}from"styled-components";import ev,{css as Qn}from"styled-components";var ov=ev.div`
  position: absolute;
  width: ${o=>o.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${o=>o.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${o=>o.direction==="bottom"?Qn`
          bottom: 100%;
        `:Qn`
          top: 100%;
        `}
  left: ${o=>o.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${o=>o.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${o=>o.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${o=>o.direction==="bottom"?Qn`
            transform: translate(-50%, 50%) rotate(45deg);
          `:Qn`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${o=>o.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`,Iu=ov;import cl from"react";import Du from"styled-components";var iv=Du.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`,rv=Du(F.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${o=>o.theme.colorPicker.inputBorderColor};
  }
`,nv=({value:o,label:t,onChange:e})=>cl.createElement(iv,null,cl.createElement(F.Input.Label,{label:t}),cl.createElement(rv,{min:0,max:255,value:o,onChange:e})),ts=nv;import dl from"react";import Eu from"styled-components";var sv=Eu.div`
  text-align: left;
  width: 62px;
`,av=Eu(F.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${o=>o.theme.colorPicker.inputBorderColor};
  }
`,lv=({value:o,label:t,onChange:e})=>dl.createElement(sv,null,dl.createElement(F.Input.Label,{label:t}),dl.createElement(av,{value:o.toUpperCase(),onChange:e})),Pu=lv;import hl,{useRef as yv,useState as vv,useEffect as xv}from"react";import Sv from"styled-components";import cv from"styled-components";var ii=cv.div.attrs(o=>({style:{left:o.position[0]||`${0}px`,top:o.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${o=>o.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${o=>o.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${o=>o.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;ii.defaultProps={theme:$t};var Au=li(Jr());import pl,{useState as dv,useRef as zu,forwardRef as pv,useCallback as hv}from"react";import uv from"styled-components";var mv=uv.div`
  position: relative;
  height: 14px;
  width: 100%;
`,fv=o=>t=>{o.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})},Oi=pv(({surface:o,onChange:t,className:e,children:i},r)=>{let n=zu(null),a=zu(null),{config:l}=ut(),[c,p]=dv(!1),u=S=>{let C=l.measurements.color.colorPicker.thumb.size/2,P=l.measurements.color.colorPicker.thumb.size,T=0,R=0;T=S.clientX,R=S.clientY;let{top:$,left:W,width:it,height:L}=n.current.getBoundingClientRect(),K=T-W-C,Q=R-$-C;K=Math.max(0,Math.min(it-P,K)),Q=Math.max(0,Math.min(L-P,Q)),t&&t([K,Q])},m=S=>{p(!0),u(S)},g=hv((0,Au.default)(S=>{c&&u(S)},10),[c]),x=()=>{c&&p(!1)};return pl.createElement(mv,{ref:fv([n,r]),className:e},pl.createElement(F.DraggableCore,{nodeRef:a,onStart:m,onDrag:g,onStop:x},pl.createElement("div",{ref:a},o)),i)});import{css as gv}from"styled-components";var bv=gv`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`,ri=bv;var Cv=Sv.div`
  ${ri}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`,Ou=({hue:o,onChange:t})=>{let[e,i]=vv(0),r=yv(null),{config:n}=ut(),a=l=>{if(r.current){let[c]=l,{offsetWidth:p}=r.current,u=p-n.measurements.color.colorPicker.thumb.size,m=c*p/u,g=Math.max(0,Math.min(360,m/p*360));t(g),i(c)}};return xv(()=>{if(r.current){let{offsetWidth:l}=r.current,c=0,p=l-n.measurements.color.colorPicker.thumb.size;c=o*l/360,i(c*p/l)}},[o]),hl.createElement(Oi,{surface:hl.createElement(Cv,null),ref:r,onChange:a},hl.createElement(ii,{position:[e,0]}))};import es,{useState as wv,useRef as kv,useEffect as Tv}from"react";import Lu from"styled-components";var Mv=Lu.div.attrs(o=>({style:{background:`linear-gradient(to left, ${o.transparentColor} 0%, ${o.opaqueColor} 100%)`}}))`
  ${ri}
  z-index: 1;
`,Iv=Lu.div.attrs(o=>({style:{backgroundImage:`url(${o.url})`}}))`
  ${ri}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`,Bu=({color:o,opaqueColor:t,transparentColor:e,onChange:i})=>{let{config:r}=ut(),[n,a]=wv(0),l=kv(null),c=r.assetProvider.getPath("controls","/tiled-background.png"),p=u=>{if(l.current){let{offsetWidth:m}=l.current,[g]=u,x=m-r.measurements.color.colorPicker.thumb.size,S=g*m/x,C=(m-S)/m,P=Math.round((C+Number.EPSILON)*100)/100,T=Math.min(1,Math.max(0,P));i(T),a(g)}};return Tv(()=>{if(l.current){let{offsetWidth:u}=l.current,m=0,g=u-r.measurements.color.colorPicker.thumb.size;m=(1-o.toHsv().a)*u,a(m*g/u)}},[o.toString()]),es.createElement(Oi,{ref:l,surface:es.createElement(Mv,{opaqueColor:t,transparentColor:e}),onChange:p},es.createElement(Iv,{url:c}),es.createElement(ii,{position:[n,0]}))};import ul,{useState as Dv,useRef as Ev,useEffect as Pv}from"react";import Fu from"styled-components";var zv=Fu.div.attrs(o=>({style:{backgroundColor:`hsl(${o.hue}, 100%, 50%)`}}))`
  ${ri}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${o=>o.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`,Av=Fu(Oi)`
  height: ${o=>o.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`,Ru=({color:o,hue:t,onChange:e})=>{let[i,r]=Dv([0,0]),n=Ev(null),{config:a}=ut();return Pv(()=>{let{s:c,v:p}=o.toHsv();if(n.current){let{offsetWidth:u,offsetHeight:m}=n.current,g=u-a.measurements.color.colorPicker.thumb.size,x=m-a.measurements.color.colorPicker.thumb.size,S=c*u,C=(1-p)*m;r([S*g/u,C*x/m])}},[o.toString()]),ul.createElement(Av,{ref:n,surface:ul.createElement(zv,{hue:t}),onChange:c=>{if(n.current){let[p,u]=c,{offsetHeight:m,offsetWidth:g}=n.current,x=g-a.measurements.color.colorPicker.thumb.size,S=m-a.measurements.color.colorPicker.thumb.size,C=p*g/x,P=u*m/S,T=Math.min(1,Math.max(0,C/g)),R=Math.min(1,Math.max(0,(m-P)/m));e(T,R),r([p,u])}}},ul.createElement(ii,{position:i}))};var Ov=Li.div`
  position: absolute;
  left: ${o=>o.leftOffset}px;
  top: ${o=>o.topOffset}px;
  z-index: ${o=>o.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${o=>o.show&&Hu`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`,_u=Li.div`
  &&& {
    position: absolute;
    ${o=>o.direction==="top"&&Hu`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${o=>o.theme.colorPicker.listShadow};
    background: ${o=>o.theme.colorPicker.listBackground};
    border-radius: ${o=>o.theme.shape.radiusMedium}px;
    width: ${o=>o.theme.measurements.color.colorPicker.width}px;
    height: ${o=>o.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`,Lv=Li(Ou)`
  margin-top: 8px;
`,Bv=Li(Bu)`
  margin-top: 8px;
`,Fv=Li.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`,Rv=Li.div`
  display: flex;
`,kr=class extends Ct.Component{constructor(t){super(t);this.node=Ct.createRef();this.checkId=(t,e,i)=>{let r=t,n=0;for(;r.parentElement&&n<i;)if(r=r.parentElement,n+=1,r.id===e)return!0;return!1};this.handleOutsideClick=t=>{var a;let{onRequestClose:e,onAddSnapshot:i,show:r}=this.props,{color:n}=this.state;if(r){if((a=this.node.current)==null?void 0:a.contains(t.target))return;this.setState({hexInputValue:n.toHexString()}),e&&e(),i&&i()}};this.onChange=t=>{let{onChange:e}=this.props;e({color:t.toRgbArray(),colorString:t.toRgbString()})};this.onHexValueChange=t=>{if(t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){let e=new jt(t);this.onChange(e),this.setState({color:e,hue:e.toHsl().h})}this.setState({hexInputValue:t})};this.onAlphaChange=t=>{let{color:e}=this.state,i=e.setAlpha(t);this.onChange(i),this.setState({color:i,hexInputValue:i.toHexString()})};this.onHueChange=t=>{let{color:e}=this.state,{s:i,v:r,a:n}=e.toHsv(),a=new jt({h:t,s:i,v:r,a:n});this.onChange(a),this.setState({color:a,hexInputValue:a.toHexString(),hue:t})};this.onSaturationBrightnessChange=(t,e)=>{let{color:i,hue:r}=this.state,{a:n}=i.toHsv(),a=new jt({h:r,s:t,v:e,a:n});this.onChange(a),this.setState({color:a,hexInputValue:a.toHexString()})};this.onInputChange=t=>e=>{let{color:i}=this.state;if(e.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!e.trim()){let r=i.toRgb();r[t]=parseInt(e,10)||0;let n=new jt(r);this.onChange(n),this.setState({color:n,hexInputValue:n.toHexString(),hue:n.toHsl().h})}};let{color:e}=this.props,i=new jt(e);this.state={color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1),document.addEventListener("keydown",this.handleOutsideClick,!1)}componentDidUpdate(t){let{color:e,show:i}=this.props;if(i&&!t.show){let r=new jt(e);this.setState({color:r,hue:r.toHsl().h,hexInputValue:r.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1),document.removeEventListener("keydown",this.handleOutsideClick,!1)}render(){let{show:t,showArrow:e,direction:i,arrowOffset:r,topOffset:n,leftOffset:a,labelHex:l,labelR:c,labelG:p,labelB:u,labelSliderHue:m,labelSliderOpacity:g}=this.props,{color:x,hexInputValue:S,hue:C}=this.state,{r:P,g:T,b:R}=x.toRgb(),$=x.clone().setAlpha(1).toRgbString(),W=x.clone().setAlpha(0).toRgbString();return Ct.createElement("div",{ref:this.node},Ct.createElement(Ov,{show:t,direction:i,leftOffset:a,topOffset:n},Ct.createElement(_u,{direction:i},e&&Ct.createElement(Iu,{direction:i,arrowOffset:r}),Ct.createElement(Ru,{color:x,hue:C,onChange:this.onSaturationBrightnessChange}),Ct.createElement(F.Spacer,{count:2}),Ct.createElement(F.Input.Label,{label:m}),Ct.createElement(Lv,{hue:C,onChange:this.onHueChange}),Ct.createElement(F.Spacer,{count:2}),Ct.createElement(F.Input.Label,{label:g}),Ct.createElement(Bv,{color:x,opaqueColor:$,transparentColor:W,onChange:this.onAlphaChange}),Ct.createElement(Fv,null,Ct.createElement(Pu,{value:S,label:l,onChange:this.onHexValueChange}),Ct.createElement(Rv,null,Ct.createElement(ts,{value:P,label:c,onChange:this.onInputChange("r")}),Ct.createElement(ts,{value:T,label:p,onChange:this.onInputChange("g")}),Ct.createElement(ts,{value:R,label:u,onChange:this.onInputChange("b")}))))))}};kr.defaultProps={direction:"bottom",showArrow:!0};_u.defaultProps={theme:$t};var _v=Hv.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`,ml=class extends Tr.Component{constructor(t){super(t);this.containerRef=null;this.onClick=t=>e=>{let{onAddSnapshot:i,config:r,onChange:n,colorPickerDirection:a,rect:l}=this.props,{activeIdentifier:c,showColorPicker:p,colorList:u}=this.state,m=u.find(g=>g.identifier===t);if(c===m.identifier&&!p){let{left:g,width:x,top:S,height:C}=e.currentTarget.getBoundingClientRect(),{left:P,top:T}=this.containerRef.current.getBoundingClientRect(),{colorPicker:R}=r.measurements.color,$=R.arrow.width/2,W=g-P+x/2-2,it=a==="bottom"?S-T+C+$:S-T-$,L=-24,K=R.width-R.arrow.width-12;W>K&&(L+=W-K,W-=L);let Q=!0;if(a==="bottom"&&l){let Mt=l.height,je=l.top,Mo=S-je,Io=Mt-(Mo+C),Lr=r.measurements.color.colorPicker.height+$;Io<Lr&&(it=Io-Lr),Mo+it<Mo+C/2&&(it+=$,Q=!1)}this.setState({showColorPicker:!0,showColorPickerArrow:Q,arrowOffset:W,topOffset:it,leftOffset:L})}else p?this.setState({showColorPicker:!1}):(n(m.color),this.setState({activeIdentifier:t}),i&&i())};this.onChange=({color:t,colorString:e})=>{let{onChange:i}=this.props,{activeIdentifier:r,colorList:n}=this.state,a=n.findIndex(l=>l.identifier===r);if(a!==-1){let l=[...n];l[a]={identifier:n[a].identifier,colorString:e,color:t},this.setState({colorList:l})}i(t)};this.onChangeColorPicker=({color:t,colorString:e})=>{this.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:e})};this.closeColorPicker=()=>{this.setState({showColorPicker:!1})};this.getColorPicker=()=>{let{activeColor:t,labelsColor:e,colorPickerDirection:i,onAddSnapshot:r}=this.props,{showColorPicker:n,showColorPickerArrow:a,arrowOffset:l,leftOffset:c,topOffset:p}=this.state;return Tr.createElement(kr,{color:z(t),show:n,showArrow:a,direction:i,arrowOffset:l,leftOffset:c,topOffset:p,labelHex:e.hex,labelR:e.r,labelG:e.g,labelB:e.b,labelSliderOpacity:e.sliderOpacity,labelSliderHue:e.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:r})};let{colors:e}=this.props;this.containerRef=Tr.createRef(),this.state={activeIdentifier:"",activeSprite:"",colorList:[...e],showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:t,activeColor:e},{activeSprite:i,colorList:r}){if(t!==i||!t){let n=Be(z(e)),a=r.find(({colorString:l})=>l===n);return{activeSprite:t,activeIdentifier:a?a.identifier:""}}return null}render(){let{tool:t,isDisabled:e,custom:i,config:r}=this.props,{activeIdentifier:n,colorList:a}=this.state,l=i.getColorItem(),c=r.assetProvider.getPath("controls","/tiled-background.png"),p=a.map(u=>Tr.createElement(l,{tool:t,key:`${u.colorString}-item-${u.identifier}`,isActive:u.identifier===n,isDisabled:e,onClick:this.onClick(u.identifier),color:u.colorString,label:u.identifier,tiledBackgroundUrl:c}));return Tr.createElement(_v,{"data-test":M.ColorList,ref:this.containerRef},p,this.getColorPicker())}};ml.defaultProps={colorPickerDirection:"bottom",isDisabled:!1};var $u=_("config","custom")(O(ml));var $v=o=>Wu.createElement(Qr.Consumer,null,({rect:t})=>Wu.createElement($u,w(b({},o),{rect:t})));import $i,{useRef as Hx,useEffect as _x,useLayoutEffect as $x}from"react";var Im=li(Jr());import si,{useRef as Tx}from"react";import os from"react";import Vu from"styled-components";var Wv=Vu(A.Controls.Container)`
  cursor: none;
`,Vv=Vu.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${o=>o.theme.foreground};
`,Nu=class extends os.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=w(b({},this.INITIAL_POSITION),{isDrawing:!1});this.containerElementRef=null;this.getCursorCoordinates=t=>{let e=0,i=0;if(t.type.indexOf("touch")!==-1){let l=t;if(!l.touches.length)return w(b({},this.INITIAL_POSITION),{height:0,width:0});e=l.touches[0].clientX,i=l.touches[0].clientY}else{let l=t;e=l.clientX,i=l.clientY}let r=this.containerElementRef.current.getBoundingClientRect(),n=e-r.left,a=i-r.top;return{x:n,y:a,height:r.height,width:r.width}};this.draw=t=>{t.preventDefault(),t.stopPropagation(),this.touchDraw(t)};this.touchDraw=t=>{let{x:e,y:i}=this.getCursorCoordinates(t);e!==void 0&&i!==void 0&&(this.setState({x:e,y:i}),this.state.isDrawing&&this.brushTool.strokePosition({x:e,y:i}))};this.touchStart=()=>{this.brushTool.clickableCanvas(!1),this.setState({isDrawing:!0}),this.brushTool.beginStroke()};this.start=t=>{t.button===0?this.touchStart():this.stop(t)};this.stop=t=>{this.state.isDrawing&&(t.preventDefault(),t.stopPropagation(),this.setState({isDrawing:!1}),this.brushTool.endStroke(),this.brushTool.clickableCanvas(!0))};this.setInitialPosition=()=>{this.setState(b({},this.INITIAL_POSITION))};this.mouseOut=t=>{let{config:e}=this.props;t.preventDefault(),t.stopPropagation();let i=this.brushTool.sizeOnScreenSpace/2,{x:r,y:n,height:a,width:l}=this.getCursorCoordinates(t);r&&n&&(r<0||n<0||r>l-i||n>a-i||n<e.measurements.mainCanvasActionBar.height)&&this.setInitialPosition()};this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();let{x:e,y:i}=this.state;e&&i&&this.setInitialPosition()};this.getCursor=()=>{let{x:t,y:e}=this.state;if(t&&e){let i=Be(this.brushTool.color),r=`${this.brushTool.sizeOnScreenSpace}px`,n={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:i,height:r,width:r};return os.createElement(Vv,{style:n,"data-test":M.Cursor})}return null};this.containerElementRef=os.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get brushTool(){return this.props.brushTool}render(){return os.createElement(Wv,{ref:this.containerElementRef,"data-test":M.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}},Uu=_("brushTool","config")(O(Nu));import Gv from"react";import ue from"react";import Nv from"styled-components";var ie=(o,t)=>o!==void 0&&t!==void 0&&!Number.isNaN(o)&&!Number.isNaN(t);var fl=Nv(A.Controls.Knob)`
  margin-top: -${o=>o.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${o=>o.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`,{Container:Uv}=A.Controls,Gu=class extends ue.Component{constructor(t){super(t);this.start=(t,{x:e,y:i})=>{ie(e,i)&&this.focusTool.setStart({x:e,y:i})};this.end=(t,{x:e,y:i})=>{ie(e,i)&&this.focusTool.setEnd({x:e,y:i})};this.onKnob1DragStart=(t,e)=>{this.focusTool.clickableCanvas(!1),this.start(t,e)};this.onKnob1DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition),this.start(t,e),this.focusTool.clickableCanvas(!0)};this.onKnob2DragStart=(t,e)=>{this.focusTool.clickableCanvas(!1),this.end(t,e)};this.onKnob2DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition),this.end(t,e),this.focusTool.clickableCanvas(!0)};this.addSnapshot=({x:t,y:e},i)=>{ie(t,e)&&this.focusTool.toolSnapshot(i)};this.getLine=()=>{let{height:t,width:e}=this.props.canvas.canvasSize,i=this.focusTool.startOnPreview,r=this.focusTool.endOnPreview;return ue.createElement("svg",{focusable:"false",height:t,width:e},ue.createElement("line",{x1:i.x,y1:i.y,x2:r.x,y2:r.y,strokeWidth:"2",stroke:"currentColor"}))};this.startRef=ue.createRef(),this.endRef=ue.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return ue.createElement(Uv,null,ue.createElement(A.Controls.Line,null,this.getLine()),ue.createElement(F.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},ue.createElement(fl,{ref:this.startRef})),ue.createElement(F.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},ue.createElement(fl,{ref:this.endRef})))}};fl.defaultProps={theme:$t};var ju=_("canvas","focusTool")(O(Gu));import xo from"react";var Mr=class extends xo.Component{constructor(t){super(t);this.getKnobPosition=()=>{let{focusTool:t}=this.props,{origin:e,size:i}=t,r=i/2,n=Math.PI/2+t.rotation;return{x:e.x+r*Math.cos(n),y:e.y+r*Math.sin(n)}};this.onArea=(t,{x:e,y:i})=>{let{editor:r}=this.props,n=r.configStore.measurements.canvasControls.knob.size;if(ie(e,i)){let{canvas:a,focusTool:l}=this.props,{size:c,mirroredAreaWidth:p}=l,u=e+p/2,m=i+c/2,g=new y(this.getKnobPosition()),S=new y({x:e,y:i}).subtract(new y(this.areaPosition)),C=g.add(S);C.x>n&&C.x<a.canvasSize.width-n&&C.y>n&&C.y<a.canvasSize.height-n&&l.setOrigin({x:u,y:m})}};this.onKnob=(t,{x:e,y:i})=>{let{focusTool:r}=this.props;if(ie(e,i)){r.clickableCanvas(!1);let n=new y(r.origin),a=new y(e,i),l=n.subtract(a),c=l.magnitude,p=Math.PI/2+Math.atan2(l.y,l.x);r.setSize(c*2),r.setRotation(p)}};this.onAreaDragStop=(t,e)=>{let{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition),this.onArea(t,e),i.clickableCanvas(!0)};this.onKnobDragStop=(t,e)=>{let{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize),this.onKnob(t,e),i.clickableCanvas(!0)};this.addSnapshot=({x:t,y:e},i)=>{let{focusTool:r}=this.props;ie(t,e)&&r.toolSnapshot(i)};this.knobRef=xo.createRef(),this.areaRef=xo.createRef()}get areaPosition(){let{focusTool:t}=this.props,{origin:e,size:i,mirroredAreaWidth:r}=t;return{x:e.x-r/2,y:e.y-i/2}}render(){let{x:t,y:e}=this.areaPosition,{focusTool:i}=this.props;return xo.createElement(A.Controls.Container,null,xo.createElement(F.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},xo.createElement(A.Controls.Knob,{ref:this.knobRef})),xo.createElement(F.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:e},rotation:i.rotation},xo.createElement(A.Controls.Area,{ref:this.areaRef,"data-test":M.Focus,height:i.size,width:i.mirroredAreaWidth})))}};Mr=s([_("focusTool","canvas","editor"),O],Mr);import So from"react";var Ir=class extends So.Component{constructor(t){super(t);this.state={knobAngle:2.35};this.onCircle=(t,{x:e,y:i})=>{if(ie(e,i)){let{focusTool:r}=this.props;r.setCenter({x:e+r.radius,y:i+r.radius})}};this.onKnob=(t,{x:e,y:i})=>{if(ie(e,i)){let{focusTool:r}=this.props,n=new y(e,i),l=new y(r.center.x,r.center.y).subtract(n),c=l.magnitude,p=-Math.atan2(l.y,l.x);this.setState({knobAngle:p}),r.setRadius(c)}};this.onCircleDragStart=(t,e)=>{let{focusTool:i}=this.props;i.clickableCanvas(!1),this.onCircle(t,e)};this.onCircleDragStop=(t,e)=>{let{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition),this.onCircle(t,e),i.clickableCanvas(!0)};this.onKnobDragStart=(t,e)=>{let{focusTool:i}=this.props;i.clickableCanvas(!1),this.onKnob(t,e)};this.onKnobDragStop=(t,e)=>{let{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize),this.onKnob(t,e),i.clickableCanvas(!0)};this.addSnapshot=({x:t,y:e},i)=>{let{focusTool:r}=this.props;ie(t,e)&&r.toolSnapshot(i)};this.knobRef=So.createRef(),this.circleRef=So.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){let{focusTool:t}=this.props,{knobAngle:e}=this.state,{center:i,radius:r}=t,n={x:i.x-r,y:i.y-r},a=Math.PI-e,l={x:i.x+r*Math.cos(a),y:i.y+r*Math.sin(a)};return So.createElement(A.Controls.Container,null,So.createElement(F.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:l},So.createElement(A.Controls.Knob,{ref:this.knobRef})),So.createElement(F.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},So.createElement(A.Controls.Circle,{ref:this.circleRef,"data-test":M.Focus,radius:r})))}};Ir=s([_("focusTool","canvas"),O],Ir);var Xu=O(()=>{let{focusTool:o}=ut(),{state:t}=o,i=(()=>{switch(t.identifier){case Z.LINEAR:return ju;case Z.RADIAL:return Ir;case Z.MIRRORED:return Mr;default:return null}})();return o.isOptionSelected&&i?Gv.createElement(i,null):null});import Ge,{useRef as ix}from"react";import Ri from"react";import Dr from"react";import Ku from"react";import jv from"react";var Yu=({customButtonKey:o,onClick:t,label:e,icon:i,disabled:r})=>{let{custom:n}=ut(),a=n.getButton(o);return jv.createElement(a,{onClick:t,label:e,ariaLabel:e,icon:i,isDisabled:r})};var Bi=({availableKeys:o,actions:t})=>Ku.createElement(A.Bar.ButtonGroup,{onClick:cc},o.map(e=>{let i=t[e];return i?Ku.createElement(Yu,b({key:e},i)):null}));var Xv=({sprite:o,stickerTool:t})=>{let e=t.locale.canvasActions,i={[rt.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:Dr.createElement(ct.bringToFront,null),disabled:o.isOnTop},[rt.FLIP]:{customButtonKey:"canvasActionFlip",onClick:t.flipHorizontally,label:e.buttonFlipHorizontal,icon:Dr.createElement(ct.flipHorizontal,null)},[rt.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:e.buttonDuplicate,icon:Dr.createElement(ct.duplicate,null)},[rt.DELETE]:{customButtonKey:"canvasActionDelete",onClick:t.delete,label:e.buttonDelete,icon:Dr.createElement(ct.delete,null)}};return t.isStickerSelected?Dr.createElement(Bi,{availableKeys:t.config.canvasActions,actions:i}):null},qu=_("sprite","stickerTool")(O(Xv));import Er from"react";var Yv=({textTool:o,sprite:t})=>{let e=o.locale.canvasActions,i={[rt.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>o.setEditMode(!0),label:e.buttonEdit,icon:Er.createElement(ct.edit,null)},[rt.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:o.bringToFront,label:e.buttonBringToFront,icon:Er.createElement(ct.bringToFront,null),disabled:t.isOnTop},[rt.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:o.duplicate,label:e.buttonDuplicate,icon:Er.createElement(ct.duplicate,null)},[rt.DELETE]:{customButtonKey:"canvasActionDelete",onClick:o.delete,label:e.buttonDelete,icon:Er.createElement(ct.delete,null)}};return t.isSpriteText?Er.createElement(Bi,{availableKeys:o.config.canvasActions,actions:i}):null},Zu=_("textTool","sprite")(O(Yv));import Fi from"react";var Kv=({sprite:o,textDesignTool:t})=>{let e=t.locale.canvasActions,i={[rt.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(!0),label:e.buttonEdit,icon:Fi.createElement(ct.edit,null)},[rt.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:Fi.createElement(ct.bringToFront,null),disabled:o.isOnTop},[rt.INVERT]:{customButtonKey:"canvasActionInvert",onClick:t.invertBackground,label:e.buttonInvert,icon:Fi.createElement(ct.flipHorizontal,null)},[rt.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:t.duplicate,label:e.buttonDuplicate,icon:Fi.createElement(ct.duplicate,null)},[rt.DELETE]:{customButtonKey:"canvasActionDelete",onClick:()=>t.delete(),label:e.buttonDelete,icon:Fi.createElement(ct.delete,null)}};return t.isTextDesignSelected?Fi.createElement(Bi,{availableKeys:t.config.canvasActions,actions:i}):null},Ju=_("sprite","textDesignTool")(O(Kv));var Pr=class extends Ri.Component{constructor(t){super(t);this.actionsRef=null;this.spriteControlPosition=()=>{let{config:t,sprite:e,canvas:{canvasSize:i}}=this.props,{controlPadding:r,controlOffset:n}=t.measurements.canvasControls.sprite,{x:a,y:l}=e.position,{height:c,width:p}=e.currentSprite.size,u=e.rotationWRTOutputRotation,m=this.actionsRef.current,g=new y(0,0);if(m){let C=m.getBoundingClientRect();g=new y(C.width/2+n,C.height+n)}let x=Math.abs(p*Math.sin(u))+Math.abs(c*Math.cos(u)),S=new y(a,l-x/2-r-n).clamp(g,new y(i.width,i.height).subtract(g));return{left:S.x,top:S.y}};this.getSpriteControls=()=>{let{sprite:t}=this.props;switch(t.tool){case f.TEXT:return Ri.createElement(Zu,null);case f.TEXT_DESIGN:return Ri.createElement(Ju,null);case f.STICKER:return Ri.createElement(qu,null);default:return null}};this.actionsRef=Ri.createRef(),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0})}render(){let{sprite:t}=this.props,{isMounted:e}=this.state,i=!t.isDragMode&&!t.isEditMode,r=this.spriteControlPosition();return Ri.createElement(A.Controls.SpriteActionsWrapper,{"data-test":M.SpriteActions,ref:this.actionsRef,show:i&&e,style:b({},r)},this.getSpriteControls())}};Pr=s([_("sprite","config","editor","canvas"),O],Pr);import De,{useRef as is}from"react";var{Corner:rs}=A.Controls,{Draggable:ns}=F,gl=new y(0,0),bl=new y(0,0),Qu=O(()=>{let o=is(null),t=is(null),e=is(null),i=is(null),{config:r,sprite:n}=ut(),{leftTopPosition:a,leftBottomPosition:l,rightTopPosition:c,rightBottomPosition:p}=n,{borderWidth:u}=r.measurements.canvasControls.corner,m=({clientX:C,clientY:P})=>{C!==void 0&&P!==void 0&&n.onCornerDrag(bl.subtract(gl.subtract(new y(C,P))))},g=C=>{switch(C){case"leftTop":return a;case"leftBottom":return l;case"rightTop":return c;case"rightBottom":return p;default:return a}},x=(C,P)=>{let{clientX:T,clientY:R}=C;gl=new y(T,R),bl=new y(g(P)),n.clickableCanvas(!1),n.setDragMode(!0)},S=()=>{n.clickableCanvas(!0),n.setDragMode(!1),n.spriteSnapshot("size"),gl=new y(0,0),bl=new y(0,0)};return De.createElement(De.Fragment,null,De.createElement(ns,{nodeRef:o,onStop:S,onDrag:m,onStart:C=>x(C,"leftTop")},De.createElement(rs,{ref:o,"data-test":M.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:u})),De.createElement(ns,{nodeRef:e,onStop:S,onDrag:m,onStart:C=>x(C,"leftBottom")},De.createElement(rs,{ref:e,"data-test":M.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:u})),De.createElement(ns,{nodeRef:t,onStop:S,onDrag:m,onStart:C=>x(C,"rightTop")},De.createElement(rs,{ref:t,"data-test":M.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:u})),De.createElement(ns,{nodeRef:i,onStop:S,onDrag:m,onStart:C=>x(C,"rightBottom")},De.createElement(rs,{ref:i,"data-test":M.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:u})))});import Hi,{useRef as tm}from"react";import em from"styled-components";var qv=em.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,Zv=em.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,yl=new y(0,0),vl=new y(0,0),Jv=({sprite:o,config:t})=>{let e=tm(null),i=tm(null),r=o.leftMidPosition,n=o.rightMidPosition,a=t.assetProvider.getPath("controls","/arrow-left.png"),l=t.assetProvider.getPath("controls","/arrow-right.png"),c=(m,g)=>{o.setDragMode(!0),o.clickableCanvas(!1);let{clientX:x,clientY:S}=m;yl=new y(x,S),vl=new y(g==="left"?r:n)},p=()=>{o.clickableCanvas(!0),o.setDragMode(!1),o.addSnapshot(B.EDIT,o.textDesignLocale.padding),yl=new y(0,0),vl=new y(0,0)},u=({clientX:m,clientY:g})=>{if(m!==void 0&&g!==void 0){let x=vl.subtract(yl.subtract(new y(m,g)));o.onPaddingDrag(x)}};return Hi.createElement(Hi.Fragment,null,Hi.createElement(F.Draggable,{nodeRef:e,onStart:m=>c(m,"left"),onDrag:u,onStop:p},Hi.createElement(qv,{ref:e,src:a})),Hi.createElement(F.Draggable,{nodeRef:i,onStart:m=>c(m,"right"),onDrag:u,onStop:p},Hi.createElement(Zv,{ref:i,src:l})))},om=_("sprite","config")(O(Jv));import im,{useRef as Qv}from"react";import tx from"styled-components";var rm=tx(A.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${o=>o.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${o=>o.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`,xl=new y(0,0),Sl=new y(0,0),ex=({config:o,sprite:t,snapping:e})=>{let i=Qv(null),r=t.rightBottomHandlePosition,n=t.leftBottomHandlePosition,a={x:(r.x+n.x)/2,y:(r.y+n.y)/2},l=({clientX:g,clientY:x})=>{xl=new y(g,x),Sl=new y(a),t.setDragMode(!0),t.clickableCanvas(!1)},c=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.spriteSnapshot("rotation"),e.hideRotationGuides(),xl=new y(0,0),Sl=new y(0,0)},p=({clientX:g,clientY:x})=>{if(g!==void 0&&x!==void 0){let S=Sl.subtract(xl.subtract(new y(g,x))),C=t.position,P=new y(C.x,C.y),T=S.subtract(P),R=Math.atan2(T.y,T.x)-Math.PI/2,$=e.snapToRotation(R,T,t.currentRect);t.setRotation($)}},u=g=>{p(g)},m=o.assetProvider.getPath("controls",`/${Wl()?"rotate-windows":"rotate-osx"}.png`);return im.createElement(F.Draggable,{nodeRef:i,onStart:l,onDrag:u,onStop:c},im.createElement(rm,{ref:i,url:m}))};rm.defaultProps={theme:$t};var nm=_("sprite","snapping","config")(O(ex));import _i,{useRef as sm}from"react";import Cl from"styled-components";var am=Cl(A.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`,lm=Cl(am)`
  left: -3px;
  top: calc(
    50% - ${o=>o.theme.measurements.canvasControls.width.size/2}px
  );
`,cm=Cl(am)`
  right: -3px;
  top: calc(
    50% - ${o=>o.theme.measurements.canvasControls.width.size/2}px
  );
`,wl=new y(0,0),kl=new y(0,0),ox=({sprite:o,textTool:t})=>{let e=sm(null),i=sm(null),r=o.leftMidPadPosition,n=o.rightMidPadPosition,a=(p,u)=>{o.setDragMode(!0),o.clickableCanvas(!1);let{clientX:m,clientY:g}=p;wl=new y(m,g),kl=new y(u==="left"?r:n)},l=()=>{o.clickableCanvas(!0),o.setDragMode(!1),o.addSnapshot(B.EDIT,o.textLocale.width),t.updateDefaultFontSize(),wl=new y(0,0),kl=new y(0,0)},c=({clientX:p,clientY:u})=>{if(p!==void 0&&u!==void 0){let m=kl.subtract(wl.subtract(new y(p,u)));o.onWidthDrag(m)}};return _i.createElement(_i.Fragment,null,_i.createElement(F.Draggable,{nodeRef:e,onStart:p=>a(p,"left"),onDrag:c,onStop:l},_i.createElement(lm,{ref:e})),_i.createElement(F.Draggable,{nodeRef:i,onStart:p=>a(p,"right"),onDrag:c,onStop:l},_i.createElement(cm,{ref:i})))};lm.defaultProps={theme:$t};cm.defaultProps={theme:$t};var dm=_("sprite","textTool")(O(ox));var{Draggable:rx}=F,ss=new y(0,0),Tl=new y(0,0),pm=O(()=>{let o=ix(),{active:t,config:e,snapping:i,sprite:r}=ut(),n=({clientX:T,clientY:R})=>{let $=Tl.subtract(ss.subtract(new y(T,R))),{x:W,y:it}=i.snapToPosition({x:$.x,y:$.y},r.currentRect);r.setPosition({x:W,y:it})},a=T=>{let{clientX:R,clientY:$}=T;ss=new y(R,$),Tl=new y(r.position),r.setDragMode(!0),i.updateGuides()},l=T=>{let{clientX:R,clientY:$}=T,{x:W,y:it}=ss;ss=new y(0,0),Tl=new y(0,0),r.setDragMode(!1),W!==R&&it!==$&&r.spriteSnapshot("position"),i.hidePositionGuides()},c=T=>{T.preventDefault(),T.stopPropagation(),r.setEditMode(!0)};if(!(()=>{let T=t.tool,R=r.tool;return r.isSpriteSelected&&T===R})())return null;let{isSpriteText:u}=r,m=r.isSpriteTextDesign&&r.textDesignToolStore.isInverted,{height:g,width:x}=r.size,S=r.spritePosition,C=r.rotationWRTOutputRotation,{controlPadding:P}=e.measurements.canvasControls.sprite;return Ge.createElement(A.Controls.Container,null,Ge.createElement(rx,{nodeRef:o,onStart:a,onDrag:n,onStop:l,rotation:C,position:S},Ge.createElement(A.Controls.Sprite,{ref:o,"data-test":M.Sprite,onDoubleClick:c,height:g,width:x},u&&Ge.createElement(dm,null)||null,m&&Ge.createElement(om,null)||null,Ge.createElement(Qu,null),Ge.createElement(A.Controls.RotateHandle,{x:x/2+P/2},Ge.createElement(nm,null)))),Ge.createElement(Pr,null))});import wo from"react";import Lt,{useRef as zr}from"react";import as,{css as Ml}from"styled-components";var{GridLine:ls}=A.Crop,nx=A.Crop.Mask,{Draggable:Ar}=F,Co=3,sx=as(Vo)`
  left: ${Co}px;
  top: ${Co}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`,ax=as(Vo)(o=>{let{desktop:t}=o.theme.measurements.canvasControls.corner.touchable,e=t/4-o.borderWidth;return Ml`
    left: ${e-t}px;
    top: ${Co}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `}),lx=as(Vo)(o=>{let{desktop:t}=o.theme.measurements.canvasControls.corner.touchable,e=t/4-o.borderWidth;return Ml`
    left: ${e-t}px;
    top: ${e-t}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `}),cx=as(Vo)(o=>{let{desktop:t}=o.theme.measurements.canvasControls.corner.touchable,e=t/4-o.borderWidth;return Ml`
    top: ${e-t}px;
    left: ${Co}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `}),dx=({transformTool:o})=>{let t=zr(null),e=zr(null),i=zr(null),r=zr(null),n=zr(null),{leftTopRespectFlip:a,leftBottomRespectFlip:l,rightTopRespectFlip:c,rightBottomRespectFlip:p}=o,{height:u,width:m}=o.cropMaskSize,{maxCropMaskSize:g,defaultCropMaskPosition:x}=o,{isFlippedHorizontal:S,isFlippedVertical:C}=o,P=g.width/2,T=g.height/2,R=w(b({},g),{left:x.x,top:x.y}),$={height:u,width:m},W=o.isDragMode?{transition:"unset"}:{},it=tt=>S?P*2-tt:tt,L=tt=>C?T*2-tt:tt,K=(tt,V,N)=>{let ai=it(tt),Br=L(V);switch(dt.getFlippedEdgeIndex(N,S,C)){case 0:o.onLeftTop({x:ai,y:Br});break;case 1:o.onLeftBottom({x:ai,y:Br});break;case 2:o.onRightTop({x:ai,y:Br});break;case 3:o.onRightBottom({x:ai,y:Br});break;default:break}},Q=(tt,V,N)=>{o.setDragMode(!0),o.clickableCanvas(!1),K(tt,V,N)},Mt=(tt,V,N)=>{K(tt,V,N)},je=(tt,V,N)=>{o.setDragMode(!1),K(tt,V,N),o.clickableCanvas(!0),o.trackChanges()},Mo=(tt,{x:V,y:N})=>{Q(V,N,0)},Io=(tt,{x:V,y:N})=>{Mt(V,N,0)},Lr=(tt,{x:V,y:N})=>{je(V,N,0)},zm=(tt,{x:V,y:N})=>{Q(V,N,1)},Am=(tt,{x:V,y:N})=>{Mt(V,N,1)},Om=(tt,{x:V,y:N})=>{je(V,N,1)},Lm=(tt,{x:V,y:N})=>{Q(V,N,2)},Bm=(tt,{x:V,y:N})=>{Mt(V,N,2)},Fm=(tt,{x:V,y:N})=>{je(V,N,2)},Rm=(tt,{x:V,y:N})=>{Q(V,N,3)},Hm=(tt,{x:V,y:N})=>{Mt(V,N,3)},_m=(tt,{x:V,y:N})=>{je(V,N,3)},hs=(tt,V)=>{let N=it(tt+m/2)-m/2,ai=L(V+u/2)-u/2;o.changePosition({x:N,y:ai})},$m=(tt,{x:V,y:N})=>{o.setDragMode(!0),o.clickableCanvas(!1),hs(V,N)},Wm=(tt,{x:V,y:N})=>{hs(V,N)},Vm=(tt,{x:V,y:N})=>{o.setDragMode(!1),hs(V,N),o.clickableCanvas(!0),o.trackChanges()};return Lt.createElement("div",{style:w(b({},R),{position:"absolute"})},Lt.createElement(Ar,{nodeRef:n,bounds:"parent",position:a,onStart:$m,onDrag:Wm,onStop:Vm},Lt.createElement(nx,{ref:n,style:b(b({},$),W)})),Lt.createElement(ls,{style:b({left:a.x+m/3,top:a.y,height:u,width:1},W)}),Lt.createElement(ls,{style:b({left:a.x+m/3*2,top:a.y,height:u,width:1},W)}),Lt.createElement(ls,{style:b({left:a.x,top:a.y+u/3,height:1,width:m},W)}),Lt.createElement(ls,{style:b({left:a.x,top:a.y+u/3*2,height:1,width:m},W)}),Lt.createElement(Ar,{nodeRef:t,bounds:"parent",position:b({},a),onStart:Mo,onDrag:Io,onStop:Lr},Lt.createElement(sx,{ref:t,"data-test":M.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:Co,style:W})),Lt.createElement(Ar,{nodeRef:i,bounds:"parent",position:l,onStart:zm,onDrag:Am,onStop:Om},Lt.createElement(cx,{ref:i,"data-test":M.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:Co,style:W})),Lt.createElement(Ar,{nodeRef:e,bounds:"parent",position:c,onStart:Lm,onDrag:Bm,onStop:Fm},Lt.createElement(ax,{ref:e,"data-test":M.CropTopRight,vertical:"top",horizontal:"right",borderWidth:Co,style:W})),Lt.createElement(Ar,{nodeRef:r,bounds:"parent",position:p,onStart:Rm,onDrag:Hm,onStop:_m},Lt.createElement(lx,{ref:r,"data-test":M.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:Co,style:W})))},hm=_("transformTool")(O(dx));import ni from"react";import Or from"styled-components";import Ee from"react";import cs,{css as um}from"styled-components";var mm=cs.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${o=>o.isVisible&&um`
      display: inline-block;
    `}

  svg {
    color: ${o=>o.theme.foreground};
  }
`,px=cs.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`,hx=cs.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${o=>o.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${o=>o.isVisible&&um`
      display: inline-block;
    `}
`,ux=cs.div`
  transform: translate(0, 0) !important;
`,fm=class extends Ee.Component{constructor(t){super(t);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(t,{x:e})=>{let{flipHorizontally:i,flipVertically:r}=this.transformTool.rotateFlipState;i!==r&&(e*=-1);let n=this.transformTool.defaultAngle-e*this.DEGREES_PER_PIXEL,a=Math.min(this.MAX_ROTATION,Math.max(n,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${a}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees),this.transformTool.trackChanges()};this.rotateRef=Ee.createRef()}get transformTool(){return this.props.transformTool}render(){let{config:t,canvasWidth:e,transformTool:i}=this.props,{flipHorizontally:r,flipVertically:n}=this.transformTool.rotateFlipState,a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minSliderWidth,l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minValueWidth,c=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,p=r===n?c*-1:c,u=r!==n?i.rotationInDegrees*-1:i.rotationInDegrees;return Ee.createElement(px,{"data-test":M.RotateSlider},Ee.createElement(F.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!a},Ee.createElement(ux,{ref:this.rotateRef},Ee.createElement(mm,{isVisible:a},Ee.createElement(ct.dots,{width:90,height:15,x:p})),Ee.createElement(hx,{isVisible:l},u,"\xB0"),Ee.createElement(mm,{isVisible:a},Ee.createElement(ct.dots,{width:90,height:15,x:p})))))}},gm=_("transformTool","config")(O(fm));var mx=Or(ct.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`,fx=Or(ct.rotate)`
  height: 16px;
  width: 16px;
`,gx=Or(ct.flipHorizontal)`
  height: 16px;
  width: 16px;
`,bx=Or(ct.flipVertical)`
  height: 16px;
  width: 16px;
`,yx=Or.div`
  display: inline-flex;
  transform: scale(0.9);

  svg {
    color: ${o=>o.theme.foreground};
  }
`,vx=({transformTool:o,config:t,custom:e,canvas:i})=>{let r=o.locale.transformActions,n=i.canvasSize.width,a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&n>t.measurements.canvas.transform.minFlipWidth,l=({customButtonKey:x,onClick:S,label:C,icon:P})=>{let T=e.getButton(x);return ni.createElement(T,{key:C,onClick:S,label:C,ariaLabel:C,icon:P,style:{margin:"0 5px"}})},c=l({label:r.buttonFlipHorizontal,icon:ni.createElement(gx,null),onClick:()=>{o.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),p=l({label:r.buttonFlipVertical,icon:ni.createElement(bx,null),onClick:()=>{o.flipVertically()},customButtonKey:"transformActionFlipVertical"}),u=l({label:r.buttonRotateClockwise,icon:ni.createElement(mx,null),onClick:o.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),m=l({label:r.buttonRotateAntiClockwise,icon:ni.createElement(fx,null),onClick:o.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),g=t.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return ni.createElement(yx,{style:g,"data-test":M.FlipRotateControls},o.config.enableFlip&&a&&c||null,o.config.enableFlip&&a&&p||null,o.config.enableRotation&&ni.createElement(gm,{canvasWidth:n})||null,o.config.enableRotation&&m||null,o.config.enableRotation&&u||null)},Il=_("transformTool","config","custom","canvas")(O(vx));var xx=A.Bar.Index,{Backdrop:ds}=A.Crop,Sx=({transformTool:o,canvas:t,config:e})=>{let{leftTopRespectFlip:i,leftBottomRespectFlip:r,rightTopRespectFlip:n}=o,{height:a}=o.cropMaskSize,{height:l,width:c}=t.canvasSize,{defaultCropMaskPosition:p}=o,u=o.isDragMode?{transition:"unset"}:{};return wo.createElement(A.Controls.Container,null,wo.createElement(ds,{style:b({left:0,top:0,width:c,height:i.y+p.y},u)}),wo.createElement(ds,{style:b({left:0,top:i.y+p.y,width:p.x+i.x,height:a},u)}),wo.createElement(ds,{style:b({left:n.x+p.x,top:n.y+p.y,width:c-n.x-p.x,height:a},u)}),wo.createElement(ds,{style:b({left:0,top:r.y+p.y,width:c,height:l-r.y-p.y+e.measurements.basicToolControlBar.controlsBarHeight},u)}),wo.createElement(hm,null),e.isLayoutAdvanced?wo.createElement(xx,{bottom:!0},wo.createElement(Il,null)):null)},bm=_("transformTool","canvas","config")(O(Sx));import Dl from"react";import Cx,{css as wx}from"styled-components";var kx=Cx(A.Controls.Container)`
  ${o=>o.activeCursor?wx`
          cursor: move;
        `:""}
  z-index: ${o=>o.theme.measurements.zIndex.canvas.crop.dragImage};
`,ym=class extends Dl.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=w(b({},this.INITIAL_POSITION),{isDragging:!1});this.containerRef=null;this.getCursorCoordinates=t=>{let e=0,i=0;if(t.type.indexOf("touch")!==-1){let l=t;if(!l.touches.length)return this.INITIAL_POSITION;e=l.touches[0].clientX,i=l.touches[0].clientY}else{let l=t;e=l.clientX,i=l.clientY}let r=this.containerRef.current.getBoundingClientRect(),n=e-r.left,a=i-r.top;return{x:n,y:a}};this.move=t=>{if(this.scale.canDrag){let{x:e,y:i}=this.getCursorCoordinates(t);if(e!==void 0&&i!==void 0&&this.state.isDragging){let r={x:this.state.x-e,y:this.state.y-i};this.scale.setOffset(r)}}};this.touchDrag=t=>{if(this.scale.canDrag){let{x:e,y:i}=this.getCursorCoordinates(t);e!==void 0&&i!==void 0&&this.setState({x:e,y:i,isDragging:!0})}};this.drag=t=>{t.preventDefault(),this.touchDrag(t)};this.stop=()=>{this.scale.canDrag&&(this.scale.savePosition(),this.setState(w(b({},this.INITIAL_POSITION),{isDragging:!1})))};this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();let{x:e,y:i}=this.state;e&&i&&this.setState(w(b({},this.INITIAL_POSITION),{isDragging:!1}))};this.containerRef=Dl.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get scale(){return this.props.scale}render(){return Dl.createElement(kx,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}},vm=_("scale")(O(ym));var xm=O(({children:o})=>{let t=Tx(null),{active:e,sprite:i,canvas:r}=ut(),n=()=>{switch(e.tool){case f.FOCUS:return si.createElement(Xu,null);case f.TEXT:case f.TEXT_DESIGN:case f.STICKER:return si.createElement(pm,null);case f.BRUSH:return si.createElement(Uu,null);case f.TRANSFORM:return si.createElement(bm,null);default:return si.createElement(A.Controls.Container,null,si.createElement(vm,null))}},a=p=>{if(p.preventDefault(),p.stopPropagation(),r.isCanvasClickable){let{clientX:u}=p,{clientY:m}=p;if(p.type.indexOf("touch")!==-1){let C=p;if(!C.touches.length)return;u=C.touches[0].clientX,m=C.touches[0].clientY}let g=t.current.getBoundingClientRect(),x=u-g.left,S=m-g.top;r.getContainersAtPreviewPoint({x,y:S})}},l=p=>{p.code==="Tab"&&i.selectLast()},{canvasSize:c}=r;return si.createElement(A.Controls.Wrapper,{"aria-hidden":!0,ref:t,onClick:a,onKeyDown:l,height:c.height,width:c.width},o,n())});import Pl from"react";import zl,{css as Sm}from"styled-components";import Mx from"react";import Ix from"styled-components";var Dx=Ix.div`
  display: ${({isVisible:o})=>o?"block":"none"};
  position: absolute;
  z-index: ${o=>o.theme.measurements.zIndex.canvas.snappingGuide};
`,Ex=({isVisible:o,className:t})=>Mx.createElement(Dx,{isVisible:o,className:t}),El=Ex;var Px=zl(El)`
  background: ${o=>o.theme.snapping.positionGuideColor};
  ${o=>o.direction==="horizontal"?Sm`
        width: 100%;
        height: 2px;
        top: ${()=>o.position}px;
      `:Sm`
      width: 2px;
      height: 100%;
      left: ${()=>o.position}px;
    `}
`,zx=zl(El)`
  border: none;
  border-top: 2px dashed ${o=>o.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:o})=>o.x}px;
  top: ${({position:o})=>o.y}px;
  transform: rotate(${({rotation:o})=>o}rad);
  width: 200%;
`,Ax=zl.div`
  position: absolute;
  width: ${({width:o})=>o}px;
  height: ${({height:o})=>o}px;
  top: ${({top:o})=>o}px;
  left: ${({left:o})=>o}px;
  overflow: hidden;
`,Ox=({snapping:o,editor:t})=>{let{width:e,height:i}=t.getPreviewSize(),{x:r,y:n}=o.previewTopLeftPosition,a=o.positionGuides.map(({direction:c,value:p,isVisible:u},m)=>Pl.createElement(Px,{key:`positionGuide-${m}`,direction:c,position:p,isVisible:u})),l=o.rotationGuides.find(({isVisible:c})=>c);return Pl.createElement(Ax,{"data-test":M.SnappingLine,width:e,height:i,left:r,top:n},a,Pl.createElement(zx,{key:"rotationGuide",rotation:l?l.value:0,position:l?l.position:{x:0,y:0},isVisible:!!l}))},Cm=_("snapping","editor")(O(Ox));import Lx from"react";import Bx from"styled-components";var Fx=Bx.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`,wm=()=>Lx.createElement(Fx,{alt:"watermark","data-test":M.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="});import ko from"react";var Al=24,km=class extends ko.Component{constructor(t){super(t);this.init=()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{this.video.srcObject=t}).catch(()=>{this.props.modal.showActionModal({type:et.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})}):this.props.modal.showActionModal({type:et.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})};this.stop=()=>{let{active:t}=this.props;this.video.srcObject.getTracks().forEach(r=>{r.stop()}),this.video.srcObject=null,t.selectWebcam(!1)};this.captureAndCloseWebcam=()=>{this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0),this.props.active.newImage(this.canvas.toDataURL("image/webp")),this.stop()};this.videoRef=ko.createRef()}componentDidMount(){this.canvas=document.createElement("canvas"),this.video=this.videoRef.current,this.init()}render(){let{editor:t}=this.props,{height:e,width:i}=t.getPreviewSize(),{measurements:r}=t.configStore,n=this.props.canvas.canvasSize.height,a=(n-e)/2,l=a<Al+r.buttons.float.size?n-Al*2-r.buttons.float.size/2:n-a+Al,c=this.props.active.webcamLabel;return ko.createElement(A.Wrapper,null,ko.createElement(A.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},ko.createElement(A.Bar.ButtonGroup,null,ko.createElement(hi,{ariaLabel:c,onClick:this.stop},c))),ko.createElement(A.Webcam,{style:{height:e,width:i},autoPlay:!0,ref:this.videoRef}),ko.createElement(A.Button.Float,{ariaLabel:"Click and Save",style:{top:l},onClick:this.captureAndCloseWebcam}))}},Tm=_("active","canvas","modal","editor")(O(km));import Rx from"react";var Mm=({children:o})=>Rx.createElement(A.Container,{"data-test":M.CanvasContainer},o);var Wx=O(()=>{let o=Hx(null),{canvas:t,active:e,config:i}=ut(),r=(l=!0)=>{if(o==null?void 0:o.current){let{clientWidth:c,clientHeight:p}=o.current,u=at.devicePixelRatio;o.current.width=c*u,o.current.height=p*u,t.saveDimensions({width:c,height:p,render:l})}},n=new tr((0,Im.default)(()=>r(),100,{trailing:!0}));_x(()=>{let l=o.current;return t.setCanvasElement(l),()=>{n.disconnect()}},[]),$x(()=>{r(!1),n.observe(o.current)});let{licenseChecker:a}=i;return $i.createElement(Mm,null,a&&a.isWhiteLabel()?null:$i.createElement(wm,null),e.isWebcam?$i.createElement(Tm,null):null,$i.createElement(A.Element,{ref:o,"aria-label":"Canvas","data-test":M.Canvas}),$i.createElement(xm,null,$i.createElement(Cm,null)))});import To from"react";var Vx=({modal:o,textTool:t,textDesignTool:e,custom:i})=>{let{type:r,identifier:n,isVisible:a,modalProps:l,positionOffset:c}=o,{headerLabel:p,bodyLabel:u,confirmLabel:m,dismissLabel:g,handleClose:x,handleConfirm:S,handleDismiss:C}=l,P=i.getDialog();if(r===et.INFO)return To.createElement(F.InfoModal,{headerLabel:p,bodyLabel:u},To.createElement(P,{type:r,isVisible:a,identifier:n,position:c,handleClose:x,headerLabel:p,bodyLabel:u}));if(r===et.TEXT_EDIT){let{buttonSave:T,buttonClose:R}=t.locale.canvasControls,$={type:r,isVisible:o.isVisible,confirmLabel:T,dismissLabel:R,headerLabel:t.locale.canvasControls.inputText};if(t.isTextSelected)return To.createElement(F.TextEditModal,w(b({},$),{defaultText:H.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis}),To.createElement(P,{type:r,isVisible:a,identifier:n,position:c,handleClose:x,confirmLabel:T,dismissLabel:R,headerLabel:t.locale.canvasControls.inputText}));if(e.isTextDesignSelected)return To.createElement(F.TextEditModal,w(b({},$),{defaultText:X.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text,maxLength:e.config.maxCharacterLimit,allowEmojis:e.config.allowEmojis}),To.createElement(P,{type:r,isVisible:a,identifier:n,position:c,handleClose:x,confirmLabel:T,dismissLabel:R,headerLabel:t.locale.canvasControls.inputText}))}return To.createElement(F.ActionModal,{type:r,headerLabel:p,bodyLabel:u,confirmLabel:m,dismissLabel:g,handleClose:x,handleConfirm:S,handleDismiss:C},To.createElement(P,{type:r,isVisible:a,identifier:n,position:c,confirmLabel:m,dismissLabel:g,headerLabel:p,bodyLabel:u,handleClose:x}))},Nx=_("textTool","textDesignTool","modal","custom")(O(Vx));import Wi from"react";import Em from"styled-components";import ps from"react";import Ux from"styled-components";var Gx=Ux.div`
  position: absolute;
  right: 8px;
  top: 8px;
`,Dm=class extends ps.Component{constructor(t){super(t);this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:!1})};this.onSubmit=()=>{let{getCorrectValue:t}=this.props,{isSubmitted:e,value:i}=this.state;e||this.setState({value:t(parseInt(i,10)||0).toString(),isSubmitted:!0})};this.state={isSubmitted:!1,value:t.value.toString()}}componentDidUpdate(t){let{value:e}=this.props;t.value!==e&&this.setState({value:e.toString()})}render(){let{id:t,isDisabled:e,label:i}=this.props,{value:r}=this.state;return ps.createElement(F.Input.Text,{id:t,value:r,isDisabled:e,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:dc(this.onSubmit)},ps.createElement(Gx,null,ps.createElement(F.Input.Label,{label:i,htmlFor:t})))}},Ol=Dm;var jx=Em.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${o=>o.theme.measurements.advancedUIToolControlBar.width}px;
`,Xx=Em.span`
  font-size: ${o=>o.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${o=>o.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${o=>o.theme.measurements.fontSystem.body.case};
  color: ${o=>o.theme.textInput.foreground};
  margin-top: 10px;
  margin-right: 13px;
`,Yx="photoeditorsdk-transformScaleWidth",Kx="photoeditorsdk-transformScaleHeight",qx=({showLabel:o=!0,label:t,isDisabled:e,valueHeight:i,valueWidth:r,labelWidth:n,labelHeight:a,onSubmitWidth:l,onSubmitHeight:c})=>Wi.createElement("div",null,Wi.createElement(F.Input.Label,{label:t,show:o}),Wi.createElement(jx,null,Wi.createElement(Ol,{id:Yx,value:r,getCorrectValue:l,label:n,isDisabled:e}),Wi.createElement(Xx,null,"x"),Wi.createElement(Ol,{id:Kx,value:i,getCorrectValue:c,label:a,isDisabled:e}))),Zx=qx;import tS from"react";import{useState as Jx,useEffect as Qx}from"react";var Pm=()=>{let[o,t]=Jx([]);return Qx(()=>{var e;if(typeof window!==void 0&&((e=window.navigator)==null?void 0:e.mediaDevices)){let i=!0,r=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{i&&t(n.map(({deviceId:a,groupId:l,kind:c,label:p})=>({deviceId:a,groupId:l,kind:c,label:p})))}).catch(()=>null)};return window.navigator.mediaDevices.addEventListener("devicechange",r),r(),()=>{i=!1,window.navigator.mediaDevices.removeEventListener("devicechange",r)}}return null},[]),o};var mN=O(({tool:o,fullWidth:t=!1,icon:e,label:i,onClick:r})=>{let{custom:n}=ut();if(!Pm().some(({kind:c})=>c==="videoinput"))return null;let l=n.getButton("toolControlBarSecondaryButton");return tS.createElement(l,{"data-test":M.LibraryWebcamButton,tool:o,label:i,ariaLabel:i,onClick:r,fullWidth:t,icon:e})});export{O as a,vg as b,_ as c,At as d,da as e,Yi as f,Ki as g,Ds as h,hi as i,Eo as j,Es as k,Ta as l,pf as m,uf as n,U3 as o,G3 as p,F as q,bp as r,On as s,Ia as t,Gt as u,pF as v,hF as w,uF as x,ct as y,mF as z,Qa as A,Ti as B,Zt as C,H as D,at as E,Yy as F,ut as G,$v as H,Il as I,Wx as J,sh as K,Nx as L,Zx as M,mN as N};
